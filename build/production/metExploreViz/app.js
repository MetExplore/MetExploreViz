var Ext=Ext||{};if(!Ext.Toolbar){Ext.Toolbar={}}if(!Ext.app){Ext.app={}}if(!Ext.app.bind){Ext.app.bind={}}if(!Ext.app.domain){Ext.app.domain={}}if(!Ext.app.route){Ext.app.route={}}if(!Ext.button){Ext.button={}}if(!Ext.container){Ext.container={}}if(!Ext.core){Ext.core={}}if(!Ext.data){Ext.data={}}if(!Ext.data.field){Ext.data.field={}}if(!Ext.data.flash){Ext.data.flash={}}if(!Ext.data.identifier){Ext.data.identifier={}}if(!Ext.data.matrix){Ext.data.matrix={}}if(!Ext.data.operation){Ext.data.operation={}}if(!Ext.data.proxy){Ext.data.proxy={}}if(!Ext.data.reader){Ext.data.reader={}}if(!Ext.data.request){Ext.data.request={}}if(!Ext.data.schema){Ext.data.schema={}}if(!Ext.data.session){Ext.data.session={}}if(!Ext.data.validator){Ext.data.validator={}}if(!Ext.data.writer){Ext.data.writer={}}if(!Ext.dd){Ext.dd={}}if(!Ext.dom){Ext.dom={}}if(!Ext.dom.Element){Ext.dom.Element={}}if(!Ext.event){Ext.event={}}if(!Ext.event.gesture){Ext.event.gesture={}}if(!Ext.event.publisher){Ext.event.publisher={}}if(!Ext.form){Ext.form={}}if(!Ext.form.Action){Ext.form.Action={}}if(!Ext.form.action){Ext.form.action={}}if(!Ext.form.field){Ext.form.field={}}if(!Ext.form.trigger){Ext.form.trigger={}}if(!Ext.fx){Ext.fx={}}if(!Ext.fx.animation){Ext.fx.animation={}}if(!Ext.fx.easing){Ext.fx.easing={}}if(!Ext.fx.runner){Ext.fx.runner={}}if(!Ext.fx.target){Ext.fx.target={}}if(!Ext.layout){Ext.layout={}}if(!Ext.layout.boxOverflow){Ext.layout.boxOverflow={}}if(!Ext.layout.component){Ext.layout.component={}}if(!Ext.layout.component.field){Ext.layout.component.field={}}if(!Ext.layout.container){Ext.layout.container={}}if(!Ext.layout.container.border){Ext.layout.container.border={}}if(!Ext.layout.container.boxOverflow){Ext.layout.container.boxOverflow={}}if(!Ext.menu){Ext.menu={}}if(!Ext.mixin){Ext.mixin={}}if(!Ext.overrides){Ext.overrides={}}if(!Ext.overrides.app){Ext.overrides.app={}}if(!Ext.overrides.app.domain){Ext.overrides.app.domain={}}if(!Ext.overrides.dom){Ext.overrides.dom={}}if(!Ext.overrides.event){Ext.overrides.event={}}if(!Ext.overrides.event.publisher){Ext.overrides.event.publisher={}}if(!Ext.overrides.util){Ext.overrides.util={}}if(!Ext.panel){Ext.panel={}}if(!Ext.perf){Ext.perf={}}if(!Ext.plugin){Ext.plugin={}}if(!Ext.promise){Ext.promise={}}if(!Ext.resizer){Ext.resizer={}}if(!Ext.scroll){Ext.scroll={}}if(!Ext.selection){Ext.selection={}}if(!Ext.state){Ext.state={}}if(!Ext.theme){Ext.theme={}}if(!Ext.theme.neptune){Ext.theme.neptune={}}if(!Ext.theme.neptune.layout){Ext.theme.neptune.layout={}}if(!Ext.theme.neptune.layout.component){Ext.theme.neptune.layout.component={}}if(!Ext.theme.neptune.menu){Ext.theme.neptune.menu={}}if(!Ext.theme.neptune.panel){Ext.theme.neptune.panel={}}if(!Ext.theme.neptune.resizer){Ext.theme.neptune.resizer={}}if(!Ext.theme.neptune.toolbar){Ext.theme.neptune.toolbar={}}if(!Ext.theme.triton){Ext.theme.triton={}}if(!Ext.theme.triton.form){Ext.theme.triton.form={}}if(!Ext.theme.triton.form.field){Ext.theme.triton.form.field={}}if(!Ext.theme.triton.menu){Ext.theme.triton.menu={}}if(!Ext.theme.triton.resizer){Ext.theme.triton.resizer={}}if(!Ext.theme.triton.toolbar){Ext.theme.triton.toolbar={}}if(!Ext.tip){Ext.tip={}}if(!Ext.toolbar){Ext.toolbar={}}if(!Ext.util){Ext.util={}}if(!Ext.util.paintmonitor){Ext.util.paintmonitor={}}if(!Ext.util.sizemonitor){Ext.util.sizemonitor={}}if(!Ext.util.translatable){Ext.util.translatable={}}if(!Ext.ux){Ext.ux={}}if(!Ext.ux.form){Ext.ux.form={}}if(!Ext.view){Ext.view={}}if(!Ext.window){Ext.window={}}var metExploreViz=metExploreViz||{};if(!metExploreViz.view){metExploreViz.view={}}if(!metExploreViz.view.button){metExploreViz.view.button={}}if(!metExploreViz.view.button.buttonImportMapping){metExploreViz.view.button.buttonImportMapping={}}if(!metExploreViz.view.button.buttonImportSideCompounds){metExploreViz.view.button.buttonImportSideCompounds={}}if(!metExploreViz.view.button.buttonImportToNetwork){metExploreViz.view.button.buttonImportToNetwork={}}if(!metExploreViz.view.form){metExploreViz.view.form={}}if(!metExploreViz.view.form.generalStyleForm){metExploreViz.view.form.generalStyleForm={}}if(!metExploreViz.view.form.metaboliteStyleForm){metExploreViz.view.form.metaboliteStyleForm={}}if(!metExploreViz.view.form.reactionStyleForm){metExploreViz.view.form.reactionStyleForm={}}if(!metExploreViz.view.form.selectCondition){metExploreViz.view.form.selectCondition={}}if(!metExploreViz.view.form.selectConditionForm){metExploreViz.view.form.selectConditionForm={}}if(!metExploreViz.view.form.selectMapping){metExploreViz.view.form.selectMapping={}}if(!metExploreViz.view.form.updateStyleForm){metExploreViz.view.form.updateStyleForm={}}if(!metExploreViz.view.menu){metExploreViz.view.menu={}}if(!metExploreViz.view.menu.viz_ColorMenu){metExploreViz.view.menu.viz_ColorMenu={}}if(!metExploreViz.view.menu.viz_ConvexHullMenu){metExploreViz.view.menu.viz_ConvexHullMenu={}}if(!metExploreViz.view.menu.viz_DrawingMenu){metExploreViz.view.menu.viz_DrawingMenu={}}if(!metExploreViz.view.menu.viz_ExportMenu){metExploreViz.view.menu.viz_ExportMenu={}}if(!metExploreViz.view.menu.viz_ImportMenu){metExploreViz.view.menu.viz_ImportMenu={}}if(!metExploreViz.view.menu.viz_LoadMenu){metExploreViz.view.menu.viz_LoadMenu={}}if(!metExploreViz.view.menu.viz_MiningMenu){metExploreViz.view.menu.viz_MiningMenu={}}if(!metExploreViz.view.menu.viz_SaveMenu){metExploreViz.view.menu.viz_SaveMenu={}}if(!metExploreViz.view.panel){metExploreViz.view.panel={}}if(!metExploreViz.view.panel.comparePanel){metExploreViz.view.panel.comparePanel={}}if(!metExploreViz.view.panel.comparisonSidePanel){metExploreViz.view.panel.comparisonSidePanel={}}if(!metExploreViz.view.panel.graphPanel){metExploreViz.view.panel.graphPanel={}}if(!metExploreViz.view.panel.networkPanel){metExploreViz.view.panel.networkPanel={}}if(!metExploreViz.view.panel.viz){metExploreViz.view.panel.viz={}}(function(f){var b,q=["constructor","toString","valueOf","toLocaleString"],g={},u={},d=0,r,o,w,j,a,h,s,c,m,v=function(){var A,z;o=Ext.Base;w=Ext.ClassManager;for(A=q.length;A-->0;){z=(1<<A);u[g[z]=q[A]]=z}for(A in u){d|=u[A]}d=~d;Function.prototype.$isFunction=1;m=!!(w&&w.addAlias);j=Ext.Class.getPreprocessor("config").fn;a=Ext.Class.getPreprocessor("cachedConfig")&&Ext.Class.getPreprocessor("cachedConfig").fn;h=Ext.Class.getPreprocessor("platformConfig")&&Ext.Class.getPreprocessor("platformConfig").fn;c=Ext.Class.getPreprocessor("privates")&&Ext.Class.getPreprocessor("privates").fn;s=Ext.ClassManager.postprocessors.deprecated&&Ext.ClassManager.postprocessors.deprecated.fn;b=o.$staticMembers;if(!b){b=[];for(r in o){if(o.hasOwnProperty(r)){b.push(r)}}}f.derive=p;return p.apply(this,arguments)},y=function(I,E,H){var B=H.enumerableMembers,F=I.prototype,D,G,C,A,z;if(!E){return}if(m){I.addMembers(E)}else{for(D in E){A=E[D];if(A&&A.$isFunction&&!A.$isClass&&A!==Ext.emptyFn&&A!==Ext.identityFn){z=F.hasOwnProperty(D)&&F[D];if(z){A.$previous=z}F[D]=G=A;G.$owner=I;G.$name=D}else{F[D]=A}}for(C=1;B;C<<=1){if(B&C){B&=~C;D=g[C];F[D]=G=E[D];G.$owner=I;G.$name=D}}}},t=function(D){var z=function C(){return D.apply(this,arguments)||null},B,A;z.prototype=Ext.Object.chain(D.prototype);for(B=b.length;B-->0;){A=b[B];z[A]=o[A]}return z},p=function(E,H,ac,z,G,Q,F,Z,C,S,L){var A=function K(){return this.constructor.apply(this,arguments)||null},ab=A,B={enumerableMembers:z&d,onCreated:L,onBeforeCreated:y,aliases:Z},O=ac.alternateClassName||[],X=Ext.global,T,W,Y,N,V,af,ae,D,U,J,aa,R,M,ad,P=w.alternateToName||w.maps.alternateToName,I=w.nameToAlternates||w.maps.nameToAlternates;for(Y=b.length;Y-->0;){ae=b[Y];A[ae]=o[ae]}if(ac.$isFunction){ac=ac(A)}B.data=ac;J=ac.statics;delete ac.statics;ac.$className=E;if("$className" in ac){A.$className=ac.$className}A.extend(H);U=A.prototype;if(G){A.xtype=ac.xtype=G[0];U.xtypes=G}U.xtypesChain=Q;U.xtypesMap=F;ac.alias=Z;ab.triggerExtended(A,ac,B);if(ac.onClassExtended){A.onExtended(ac.onClassExtended,A);delete ac.onClassExtended}if(ac.privates&&c){c.call(Ext.Class,A,ac)}if(J){if(m){A.addStatics(J)}else{for(aa in J){if(J.hasOwnProperty(aa)){ad=J[aa];if(ad&&ad.$isFunction&&!ad.$isClass&&ad!==Ext.emptyFn&&ad!==Ext.identityFn){A[aa]=M=ad;M.$owner=A;M.$name=aa}A[aa]=ad}}}}if(ac.inheritableStatics){A.addInheritableStatics(ac.inheritableStatics);delete ac.inheritableStatics}if(U.onClassExtended){ab.onExtended(U.onClassExtended,ab);delete U.onClassExtended}if(ac.platformConfig&&h){h.call(Ext.Class,A,ac);delete ac.platformConfig}if(ac.config){j.call(Ext.Class,A,ac)}if(ac.cachedConfig&&a){a.call(Ext.Class,A,ac);delete ac.cachedConfig}if(ac.deprecated&&s){s.call(Ext.ClassManager,E,A,ac)}B.onBeforeCreated(A,B.data,B);for(Y=0,V=C&&C.length;Y<V;++Y){A.mixin.apply(A,C[Y])}for(Y=0,V=Z.length;Y<V;Y++){T=Z[Y];w.setAlias?w.setAlias(A,T):w.addAlias(A,T)}if(ac.singleton){ab=new A()}if(!(O instanceof Array)){O=[O]}R=w.getName(ab);for(Y=0,N=O.length;Y<N;Y++){W=O[Y];w.classes[W]=ab;if(m){w.addAlternate(A,W)}else{if(R){P[W]=R;O=I[R]||(I[R]=[]);O.push(W)}}}for(Y=0,V=S.length;Y<V;Y+=2){af=S[Y];if(!af){af=X}af[S[Y+1]]=ab}w.classes[E]=ab;if(!m){if(R&&R!==E){P[E]=R;O=I[R]||(I[R]=[]);O.push(E)}}delete U.alternateClassName;if(B.onCreated){B.onCreated.call(ab,ab)}if(E){w.triggerCreated(E)}return ab};f.derive=v}(Ext.cmd={}));var Ext=Ext||{};(function(){var b=this,h=Object.prototype,c=h.toString,r=["valueOf","toLocaleString","toString","constructor"],o=function(){},g=function(){},j=function(s){return s},q=function(){var s=q.caller.caller;return s.$owner.prototype[s.$name].apply(this,arguments)},a=Ext.manifest||{},m,d=/\[object\s*(?:Array|Arguments|\w*Collection|\w*List|HTML\s+document\.all\s+class)\]/,f=/^\\?\/Date\(([-+])?(\d+)(?:[+-]\d{4})?\)\\?\/$/;Ext.global=b;Ext.now=Date.now||(Date.now=function(){return +new Date()});Ext.ticks=(b.performance&&b.performance.now)?function(){return performance.now()}:Ext.now;Ext._startTime=Ext.ticks();o.$nullFn=j.$nullFn=o.$emptyFn=j.$identityFn=g.$nullFn=true;g.$privacy="framework";Ext.suspendLayouts=Ext.resumeLayouts=o;for(m in {toString:1}){r=null}Ext.enumerables=r;Ext.apply=function(v,u,y){if(y){Ext.apply(v,y)}if(v&&u&&typeof u==="object"){var w,t,s;for(w in u){v[w]=u[w]}if(r){for(t=r.length;t--;){s=r[t];if(u.hasOwnProperty(s)){v[s]=u[s]}}}}return v};function p(v,s,w){var t,u;for(t in w){if(w.hasOwnProperty(t)){u=w[t];if(typeof u==="function"){u.$name=t;u.$owner=s;u.$previous=v.hasOwnProperty(t)?v[t]:q}v[t]=u}}}Ext.buildSettings=Ext.apply({baseCSSPrefix:"x-"},Ext.buildSettings||{});Ext.apply(Ext,{idSeed:0,idPrefix:"ext-",isSecure:/^https/i.test(window.location.protocol),enableGarbageCollector:false,enableListenerCollection:true,name:Ext.sandboxName||"Ext",privateFn:g,emptyFn:o,identityFn:j,frameStartTime:Ext.now(),manifest:a,enableAria:true,enableAriaButtons:true,enableAriaPanels:true,startsWithHashRe:/^#/,validIdRe:/^[a-z_][a-z0-9\-_]*$/i,BLANK_IMAGE_URL:"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",makeIdSelector:function(s){return"#"+s},id:function(t,s){if(t&&t.id){return t.id}var u=(s||Ext.idPrefix)+(++Ext.idSeed);if(t){t.id=u}return u},returnId:function(s){return s.getId()},returnTrue:function(){return true},emptyString:new String(),baseCSSPrefix:Ext.buildSettings.baseCSSPrefix,$eventNameMap:{},$vendorEventRe:/^(Moz.+|MS.+|webkit.+)/,canonicalEventName:function(s){return Ext.$eventNameMap[s]||(Ext.$eventNameMap[s]=(Ext.$vendorEventRe.test(s)?s:s.toLowerCase()))},applyIf:function(t,s){var u;if(t){for(u in s){if(t[u]===undefined){t[u]=s[u]}}}return t},destroy:function(){var u=arguments.length,t,s;for(t=0;t<u;t++){s=arguments[t];if(s){if(Ext.isArray(s)){this.destroy.apply(this,s)}else{if(Ext.isFunction(s.destroy)){s.destroy()}}}}return null},destroyMembers:function(v){for(var y,u,w=1,t=arguments,s=t.length;w<s;w++){y=v[u=t[w]];if(y!=null){v[u]=Ext.destroy(y)}}},override:function(u,v){if(u.$isClass){u.override(v)}else{if(typeof u==="function"){Ext.apply(u.prototype,v)}else{var s=u.self,t;if(s&&s.$isClass){t=v.privates;if(t){v=Ext.apply({},v);delete v.privates;p(u,s,t)}p(u,s,v)}else{Ext.apply(u,v)}}}return u},valueFrom:function(u,s,t){return Ext.isEmpty(u,t)?s:u},isEmpty:function(s,t){return(s==null)||(!t?s==="":false)||(Ext.isArray(s)&&s.length===0)},isArray:("isArray" in Array)?Array.isArray:function(s){return c.call(s)==="[object Array]"},isDate:function(s){return c.call(s)==="[object Date]"},isMSDate:function(s){if(!Ext.isString(s)){return false}return f.test(s)},isObject:(c.call(null)==="[object Object]")?function(s){return s!==null&&s!==undefined&&c.call(s)==="[object Object]"&&s.ownerDocument===undefined}:function(s){return c.call(s)==="[object Object]"},isSimpleObject:function(s){return s instanceof Object&&s.constructor===Object},isPrimitive:function(t){var s=typeof t;return s==="string"||s==="number"||s==="boolean"},isFunction:(typeof document!=="undefined"&&typeof document.getElementsByTagName("body")==="function")?function(s){return !!s&&c.call(s)==="[object Function]"}:function(s){return !!s&&typeof s==="function"},isNumber:function(s){return typeof s==="number"&&isFinite(s)},isNumeric:function(s){return !isNaN(parseFloat(s))&&isFinite(s)},isString:function(s){return typeof s==="string"},isBoolean:function(s){return typeof s==="boolean"},isElement:function(s){return s?s.nodeType===1:false},isTextNode:function(s){return s?s.nodeName==="#text":false},isDefined:function(s){return typeof s!=="undefined"},isIterable:function(s){if(!s||typeof s.length!=="number"||typeof s==="string"||Ext.isFunction(s)){return false}if(!s.propertyIsEnumerable){return !!s.item}if(s.hasOwnProperty("length")&&!s.propertyIsEnumerable("length")){return true}return d.test(c.call(s))},isDebugEnabled:o,clone:function(y){if(y===null||y===undefined){return y}if(y.nodeType&&y.cloneNode){return y.cloneNode(true)}var w=c.call(y),v,t,s,z,u;if(w==="[object Date]"){return new Date(y.getTime())}if(w==="[object Array]"){v=y.length;z=[];while(v--){z[v]=Ext.clone(y[v])}}else{if(w==="[object Object]"&&y.constructor===Object){z={};for(u in y){z[u]=Ext.clone(y[u])}if(r){for(t=r.length;t--;){s=r[t];if(y.hasOwnProperty(s)){z[s]=y[s]}}}}}return z||y},getUniqueGlobalNamespace:function(){var t=this.uniqueGlobalNamespace,s;if(t===undefined){s=0;do{t="ExtBox"+(++s)}while(b[t]!==undefined);b[t]=Ext;this.uniqueGlobalNamespace=t}return t},functionFactoryCache:{},cacheableFunctionFactory:function(){var y=this,u=Array.prototype.slice.call(arguments),t=y.functionFactoryCache,s,v,w;if(Ext.isSandboxed){w=u.length;if(w>0){w--;u[w]="var Ext=window."+Ext.name+";"+u[w]}}s=u.join("");v=t[s];if(!v){v=Function.prototype.constructor.apply(Function.prototype,u);t[s]=v}return v},functionFactory:function(){var s=Array.prototype.slice.call(arguments),t;if(Ext.isSandboxed){t=s.length;if(t>0){t--;s[t]="var Ext=window."+Ext.name+";"+s[t]}}return Function.prototype.constructor.apply(Function.prototype,s)},Logger:{verbose:o,log:o,info:o,warn:o,error:function(s){throw new Error(s)},deprecate:o},getElementById:function(s){return document.getElementById(s)},splitAndUnescape:(function(){var s={};return function(v,u){if(!v){return[]}else{if(!u){return[v]}}var y=s[u]||(s[u]=new RegExp("\\\\"+u,"g")),t=[],z,w;z=v.split(u);while((w=z.shift())!==undefined){while(w.charAt(w.length-1)==="\\"&&z.length>0){w=w+u+z.shift()}w=w.replace(y,u);t.push(w)}return t}})()});Ext.returnTrue.$nullFn=Ext.returnId.$nullFn=true}());Ext.platformTags.modern=!(Ext.platformTags.classic=Ext.isClassic=true);(function(){function a(){var c=this,b=c.sourceClass,f=c.sourceMethod,d=c.msg;if(f){if(d){f+="(): ";f+=d}else{f+="()"}}if(b){f=f?(b+"."+f):b}return f||d||""}Ext.Error=function(c){if(Ext.isString(c)){c={msg:c}}var b=new Error();Ext.apply(b,c);b.message=b.message||b.msg;b.toString=a;return b};Ext.apply(Ext.Error,{ignore:false,raise:function(d){d=d||{};if(Ext.isString(d)){d={msg:d}}var c=this,g=c.raise.caller,f,b;if(g===Ext.raise){g=g.caller}if(g){if(!d.sourceMethod&&(b=g.$name)){d.sourceMethod=b}if(!d.sourceClass&&(b=g.$owner)&&(b=b.$className)){d.sourceClass=b}}if(c.handle(d)!==true){f=a.call(d);throw new Ext.Error(d)}},handle:function(){return this.ignore}})})();Ext.deprecated=function(a){return Ext.emptyFn};Ext.raise=function(){Ext.Error.raise.apply(Ext.Error,arguments)};Ext.Array=(function(){var c=Array.prototype,o=c.slice,q=(function(){var A=[],y,z=20;if(!A.splice){return false}while(z--){A.push("A")}A.splice(15,0,"F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F");y=A.length;A.splice(13,0,"XXX");if(y+1!==A.length){return false}return true}()),p="indexOf" in c,g=true;function m(C,z){var y=C.length,B=new Array(y),A;for(A=0;A<y;A++){B[A]=A}B.sort(function(E,D){return z(C[E],C[D])||(E-D)});for(A=0;A<y;A++){B[A]=C[B[A]]}for(A=0;A<y;A++){C[A]=B[A]}return C}try{if(typeof document!=="undefined"){o.call(document.getElementsByTagName("body"))}}catch(s){g=false}var j=function(z,y){return(y<0)?Math.max(0,z.length+y):Math.min(z.length,y)},w=function(G,F,z,J){var K=J?J.length:0,B=G.length,H=j(G,F);if(H===B){if(K){G.push.apply(G,J)}}else{var E=Math.min(z,B-H),I=H+E,A=I+K-E,y=B-I,C=B-E,D;if(A<I){for(D=0;D<y;++D){G[A+D]=G[I+D]}}else{if(A>I){for(D=y;D--;){G[A+D]=G[I+D]}}}if(K&&H===C){G.length=C;G.push.apply(G,J)}else{G.length=C+K;for(D=0;D<K;++D){G[H+D]=J[D]}}}return G},f=function(B,y,A,z){if(z&&z.length){if(y===0&&!A){B.unshift.apply(B,z)}else{if(y<B.length){B.splice.apply(B,[y,A].concat(z))}else{B.push.apply(B,z)}}}else{B.splice(y,A)}return B},b=function(A,y,z){return w(A,y,z)},r=function(A,y,z){A.splice(y,z);return A},h=function(C,y,A){var B=j(C,y),z=C.slice(y,j(C,B+A));if(arguments.length<4){w(C,B,A)}else{w(C,B,A,o.call(arguments,3))}return z},d=function(y){return y.splice.apply(y,o.call(arguments,1))},v=q?r:b,t=q?f:w,u=q?d:h,a={binarySearch:function(F,C,A,y,E){var B=F.length,z,D;if(A instanceof Function){E=A;A=0;y=B}else{if(y instanceof Function){E=y;y=B}else{if(A===undefined){A=0}if(y===undefined){y=B}E=E||a.lexicalCompare}}--y;while(A<=y){z=(A+y)>>1;D=E(C,F[z]);if(D>=0){A=z+1}else{if(D<0){y=z-1}}}return A},defaultCompare:function(y,z){return(y<z)?-1:((y>z)?1:0)},lexicalCompare:function(y,z){y=String(y);z=String(z);return(y<z)?-1:((y>z)?1:0)},each:function(D,B,A,y){D=a.from(D);var z,C=D.length;if(y!==true){for(z=0;z<C;z++){if(B.call(A||D[z],D[z],z,D)===false){return z}}}else{for(z=C-1;z>-1;z--){if(B.call(A||D[z],D[z],z,D)===false){return z}}}return true},forEach:("forEach" in c)?function(A,z,y){return A.forEach(z,y)}:function(C,A,z){for(var y=0,B=C.length;y<B;y++){A.call(z,C[y],y,C)}},indexOf:p?function(A,y,z){return c.indexOf.call(A,y,z)}:function(C,A,B){var y,z=C.length;for(y=(B<0)?Math.max(0,z+B):B||0;y<z;y++){if(C[y]===A){return y}}return -1},contains:p?function(z,y){return c.indexOf.call(z,y)!==-1}:function(B,A){var y,z;for(y=0,z=B.length;y<z;y++){if(B[y]===A){return true}}return false},toArray:function(A,C,y){if(!A||!A.length){return[]}if(typeof A==="string"){A=A.split("")}if(g){return o.call(A,C||0,y||A.length)}var B=[],z;C=C||0;y=y?((y<0)?A.length+y:y):A.length;for(z=C;z<y;z++){B.push(A[z])}return B},pluck:function(D,y){var z=[],A,C,B;for(A=0,C=D.length;A<C;A++){B=D[A];z.push(B[y])}return z},map:("map" in c)?function(A,z,y){return A.map(z,y)}:function(D,C,B){var A=[],y=D.length,z;for(z=0;z<y;z++){A[z]=C.call(B,D[z],z,D)}return A},every:("every" in c)?function(A,z,y){return A.every(z,y)}:function(C,A,z){var y=0,B=C.length;for(;y<B;++y){if(!A.call(z,C[y],y,C)){return false}}return true},some:("some" in c)?function(A,z,y){return A.some(z,y)}:function(C,A,z){var y=0,B=C.length;for(;y<B;++y){if(A.call(z,C[y],y,C)){return true}}return false},equals:function(C,B){var z=C.length,y=B.length,A;if(C===B){return true}if(z!==y){return false}for(A=0;A<z;++A){if(C[A]!==B[A]){return false}}return true},clean:function(C){var z=[],y=0,B=C.length,A;for(;y<B;y++){A=C[y];if(!Ext.isEmpty(A)){z.push(A)}}return z},unique:function(C){var B=[],y=0,A=C.length,z;for(;y<A;y++){z=C[y];if(a.indexOf(B,z)===-1){B.push(z)}}return B},filter:("filter" in c)?function(A,z,y){return A.filter(z,y)}:function(D,B,A){var z=[],y=0,C=D.length;for(;y<C;y++){if(B.call(A,D[y],y,D)){z.push(D[y])}}return z},findBy:function(C,B,A){var z=0,y=C.length;for(;z<y;z++){if(B.call(A||C,C[z],z)){return C[z]}}return null},from:function(A,z){if(A===undefined||A===null){return[]}if(Ext.isArray(A)){return(z)?o.call(A):A}var y=typeof A;if(A&&A.length!==undefined&&y!=="string"&&(y!=="function"||!A.apply)){return a.toArray(A)}return[A]},remove:function(A,z){var y=a.indexOf(A,z);if(y!==-1){v(A,y,1)}return A},removeAt:function(B,z,A){var y=B.length;if(z>=0&&z<y){A=A||1;A=Math.min(A,y-z);v(B,z,A)}return B},include:function(z,y){if(!a.contains(z,y)){z.push(y)}},clone:function(y){return o.call(y)},merge:function(){var y=o.call(arguments),B=[],z,A;for(z=0,A=y.length;z<A;z++){B=B.concat(y[z])}return a.unique(B)},intersect:function(){var y=[],A=o.call(arguments),L,J,F,I,M,B,z,H,K,C,G,E,D;if(!A.length){return y}L=A.length;for(G=M=0;G<L;G++){B=A[G];if(!I||B.length<I.length){I=B;M=G}}I=a.unique(I);v(A,M,1);z=I.length;L=A.length;for(G=0;G<z;G++){H=I[G];C=0;for(E=0;E<L;E++){J=A[E];F=J.length;for(D=0;D<F;D++){K=J[D];if(H===K){C++;break}}}if(C===L){y.push(H)}}return y},difference:function(z,y){var E=o.call(z),C=E.length,B,A,D;for(B=0,D=y.length;B<D;B++){for(A=0;A<C;A++){if(E[A]===y[B]){v(E,A,1);A--;C--}}}return E},reduce:Array.prototype.reduce?function(A,z,y){if(arguments.length===3){return Array.prototype.reduce.call(A,z,y)}return Array.prototype.reduce.call(A,z)}:function(D,C,y){D=Object(D);var A=0,B=D.length>>>0,z=y;if(arguments.length<3){while(true){if(A in D){z=D[A++];break}if(++A>=B){throw new TypeError("Reduce of empty array with no initial value")}}}for(;A<B;++A){if(A in D){z=C(z,D[A],A,D)}}return z},slice:([1,2].slice(1,undefined).length?function(A,z,y){return o.call(A,z,y)}:function(A,z,y){if(typeof z==="undefined"){return o.call(A)}if(typeof y==="undefined"){return o.call(A,z)}return o.call(A,z,y)}),sort:function(z,y){return m(z,y||a.lexicalCompare)},flatten:function(A){var z=[];function y(B){var D,E,C;for(D=0,E=B.length;D<E;D++){C=B[D];if(Ext.isArray(C)){y(C)}else{z.push(C)}}return z}return y(A)},min:function(D,C){var z=D[0],y,B,A;for(y=0,B=D.length;y<B;y++){A=D[y];if(C){if(C(z,A)===1){z=A}}else{if(A<z){z=A}}}return z},max:function(D,C){var y=D[0],z,B,A;for(z=0,B=D.length;z<B;z++){A=D[z];if(C){if(C(y,A)===-1){y=A}}else{if(A>y){y=A}}}return y},mean:function(y){return y.length>0?a.sum(y)/y.length:undefined},sum:function(C){var z=0,y,B,A;for(y=0,B=C.length;y<B;y++){A=C[y];z+=A}return z},toMap:function(C,y,A){var B={},z=C.length;if(!y){while(z--){B[C[z]]=z+1}}else{if(typeof y==="string"){while(z--){B[C[z][y]]=z+1}}else{while(z--){B[y.call(A,C[z])]=z+1}}}return B},toValueMap:function(E,B,J,D){var y={},A=E.length,z,C,H,F,I,G;if(!B){while(A--){G=E[A];y[G]=G}}else{if(!(F=(typeof B!=="string"))){D=J}C=D===1;z=D===2;while(A--){G=E[A];I=F?B.call(J,G):G[B];if(C){if(I in y){y[I].push(G)}else{y[I]=[G]}}else{if(z&&(I in y)){if((H=y[I]) instanceof Array){H.push(G)}else{y[I]=[H,G]}}else{y[I]=G}}}}return y},erase:v,insert:function(A,z,y){return t(A,z,0,y)},move:function(D,z,B){if(B===z){return}var A=D[z],C=B>z?1:-1,y;for(y=z;y!=B;y+=C){D[y]=D[y+C]}D[B]=A},replace:t,splice:u,push:function(B){var y=arguments.length,A=1,z;if(B===undefined){B=[]}else{if(!Ext.isArray(B)){B=[B]}}for(;A<y;A++){z=arguments[A];Array.prototype.push[Ext.isIterable(z)?"apply":"call"](B,z)}return B},numericSortFn:function(z,y){return z-y}};Ext.each=a.each;a.union=a.merge;Ext.min=a.min;Ext.max=a.max;Ext.sum=a.sum;Ext.mean=a.mean;Ext.flatten=a.flatten;Ext.clean=a.clean;Ext.unique=a.unique;Ext.pluck=a.pluck;Ext.toArray=function(){return a.toArray.apply(a,arguments)};return a}());Ext.String=(function(){var j=/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,q=/('|\\)/g,b=/([-.*+?\^${}()|\[\]\/\\])/g,s=/^\s+|\s+$/g,m=/\s+/,p=/(^[^a-z]*|[^\w])/gi,f,a,h,d,g=function(u,t){return f[t]},o=function(u,t){return(t in a)?a[t]:String.fromCharCode(parseInt(t.substr(2),10))},c=function(u,t){if(u===null||u===undefined||t===null||t===undefined){return false}return t.length<=u.length},r;return r={insert:function(v,w,u){if(!v){return w}if(!w){return v}var t=v.length;if(!u&&u!==0){u=t}if(u<0){u*=-1;if(u>=t){u=0}else{u=t-u}}if(u===0){v=w+v}else{if(u>=v.length){v+=w}else{v=v.substr(0,u)+w+v.substr(u)}}return v},startsWith:function(v,w,u){var t=c(v,w);if(t){if(u){v=v.toLowerCase();w=w.toLowerCase()}t=v.lastIndexOf(w,0)===0}return t},endsWith:function(w,u,v){var t=c(w,u);if(t){if(v){w=w.toLowerCase();u=u.toLowerCase()}t=w.indexOf(u,w.length-u.length)!==-1}return t},createVarName:function(t){return t.replace(p,"")},htmlEncode:function(t){return(!t)?t:String(t).replace(h,g)},htmlDecode:function(t){return(!t)?t:String(t).replace(d,o)},hasHtmlCharacters:function(t){return h.test(t)},addCharacterEntities:function(u){var t=[],y=[],v,w;for(v in u){w=u[v];a[v]=w;f[w]=v;t.push(w);y.push(v)}h=new RegExp("("+t.join("|")+")","g");d=new RegExp("("+y.join("|")+"|&#[0-9]{1,5};)","g")},resetCharacterEntities:function(){f={};a={};this.addCharacterEntities({"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'"})},urlAppend:function(u,t){if(!Ext.isEmpty(t)){return u+(u.indexOf("?")===-1?"?":"&")+t}return u},trim:function(t){if(t){t=t.replace(j,"")}return t||""},capitalize:function(t){if(t){t=t.charAt(0).toUpperCase()+t.substr(1)}return t||""},uncapitalize:function(t){if(t){t=t.charAt(0).toLowerCase()+t.substr(1)}return t||""},ellipsis:function(v,u,w){if(v&&v.length>u){if(w){var y=v.substr(0,u-2),t=Math.max(y.lastIndexOf(" "),y.lastIndexOf("."),y.lastIndexOf("!"),y.lastIndexOf("?"));if(t!==-1&&t>=(u-15)){return y.substr(0,t)+"..."}}return v.substr(0,u-3)+"..."}return v},escapeRegex:function(t){return t.replace(b,"\\$1")},createRegex:function(y,w,u,t){var v=y;if(y!=null&&!y.exec){v=r.escapeRegex(String(y));if(w!==false){v="^"+v}if(u!==false){v+="$"}v=new RegExp(v,(t!==false)?"i":"")}return v},escape:function(t){return t.replace(q,"\\$1")},toggle:function(u,v,t){return u===v?t:v},leftPad:function(u,v,w){var t=String(u);w=w||" ";while(t.length<v){t=w+t}return t},repeat:function(y,w,u){if(w<1){w=0}for(var t=[],v=w;v--;){t.push(y)}return t.join(u||"")},splitWords:function(t){if(t&&typeof t=="string"){return t.replace(s,"").split(m)}return t||[]}}}());Ext.String.resetCharacterEntities();Ext.htmlEncode=Ext.String.htmlEncode;Ext.htmlDecode=Ext.String.htmlDecode;Ext.urlAppend=Ext.String.urlAppend;Ext.Date=(function(){var g,f=Date,p=/(\\.)/g,a=/([gGhHisucUOPZ]|MS)/,h=/([djzmnYycU]|MS)/,o=/\\/gi,c=/\{(\d+)\}/g,j=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/"),d=Ext.String.leftPad,b=["var me = this, dt, y, m, d, h, i, s, ms, o, O, z, zz, u, v, W, year, jan4, week1monday, daysInMonth, dayMatched,","def = me.defaults,","from = Ext.Number.from,","results = String(input).match(me.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = me.clearTime(new Date);","y = from(y, from(def.y, dt.getFullYear()));","m = from(m, from(def.m - 1, dt.getMonth()));","dayMatched = d !== undefined;","d = from(d, from(def.d, dt.getDate()));","if (!dayMatched) {","dt.setDate(1);","dt.setMonth(m);","dt.setFullYear(y);","daysInMonth = me.getDaysInMonth(dt);","if (d > daysInMonth) {","d = daysInMonth;","}","}","h  = from(h, from(def.h, dt.getHours()));","i  = from(i, from(def.i, dt.getMinutes()));","s  = from(s, from(def.s, dt.getSeconds()));","ms = from(ms, from(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = me.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (me.isLeapYear(v) && z <= 365))? me.add(v, me.DAY, z) : null);","}else if(strict === true && !me.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","if (W) {","year = y || (new Date()).getFullYear();","jan4 = new Date(year, 0, 4, 0, 0, 0);","d = jan4.getDay();","week1monday = new Date(jan4.getTime() - ((d === 0 ? 6 : d - 1) * 86400000));","v = Ext.Date.clearTime(new Date(week1monday.getTime() + ((W - 1) * 604800000 + 43200000)));","} else {","v = me.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","}","}","}","}","if(v){","if(zz != null){","v = me.add(v, me.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = me.add(v, me.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return (v != null) ? v : null;"].join("\n");if(!Date.prototype.toISOString){Date.prototype.toISOString=function(){var q=this;return d(q.getUTCFullYear(),4,"0")+"-"+d(q.getUTCMonth()+1,2,"0")+"-"+d(q.getUTCDate(),2,"0")+"T"+d(q.getUTCHours(),2,"0")+":"+d(q.getUTCMinutes(),2,"0")+":"+d(q.getUTCSeconds(),2,"0")+"."+d(q.getUTCMilliseconds(),3,"0")+"Z"}}function m(r){var q=Array.prototype.slice.call(arguments,1);return r.replace(c,function(s,t){return q[t]})}return g={now:f.now,toString:function(q){if(!q){q=new f()}return q.getFullYear()+"-"+d(q.getMonth()+1,2,"0")+"-"+d(q.getDate(),2,"0")+"T"+d(q.getHours(),2,"0")+":"+d(q.getMinutes(),2,"0")+":"+d(q.getSeconds(),2,"0")},getElapsed:function(r,q){return Math.abs(r-(q||g.now()))},useStrict:false,formatCodeToRegex:function(r,q){var s=g.parseCodes[r];if(s){s=typeof s==="function"?s():s;g.parseCodes[r]=s}return s?Ext.applyIf({c:s.c?m(s.c,q||"{0}"):s.c},s):{g:0,c:null,s:Ext.String.escapeRegex(r)}},parseFunctions:{MS:function(s,q){var t=(s||"").match(j);return t?new f(((t[1]||"")+t[2])*1):null},time:function(r,q){var s=parseInt(r,10);if(s||s===0){return new f(s)}return null},timestamp:function(r,q){var s=parseInt(r,10);if(s||s===0){return new f(s*1000)}return null}},parseRegexes:[],formatFunctions:{MS:function(){return"\\/Date("+this.getTime()+")\\/"},time:function(){return this.getTime().toString()},timestamp:function(){return g.format(this,"U")}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{January:0,Jan:0,February:1,Feb:1,March:2,Mar:2,April:3,Apr:3,May:4,June:5,Jun:5,July:6,Jul:6,August:7,Aug:7,September:8,Sep:8,October:9,Oct:9,November:10,Nov:10,December:11,Dec:11},defaultFormat:"m/d/Y",getShortMonthName:function(q){return g.monthNames[q].substring(0,3)},getShortDayName:function(q){return g.dayNames[q].substring(0,3)},getMonthNumber:function(q){return g.monthNumbers[q.substring(0,1).toUpperCase()+q.substring(1,3).toLowerCase()]},formatContainsHourInfo:function(q){return a.test(q.replace(p,""))},formatContainsDateInfo:function(q){return h.test(q.replace(p,""))},unescapeFormat:function(q){return q.replace(o,"")},formatCodes:{d:"Ext.String.leftPad(m.getDate(), 2, '0')",D:"Ext.Date.getShortDayName(m.getDay())",j:"m.getDate()",l:"Ext.Date.dayNames[m.getDay()]",N:"(m.getDay() ? m.getDay() : 7)",S:"Ext.Date.getSuffix(m)",w:"m.getDay()",z:"Ext.Date.getDayOfYear(m)",W:"Ext.String.leftPad(Ext.Date.getWeekOfYear(m), 2, '0')",F:"Ext.Date.monthNames[m.getMonth()]",m:"Ext.String.leftPad(m.getMonth() + 1, 2, '0')",M:"Ext.Date.getShortMonthName(m.getMonth())",n:"(m.getMonth() + 1)",t:"Ext.Date.getDaysInMonth(m)",L:"(Ext.Date.isLeapYear(m) ? 1 : 0)",o:"(m.getFullYear() + (Ext.Date.getWeekOfYear(m) == 1 && m.getMonth() > 0 ? +1 : (Ext.Date.getWeekOfYear(m) >= 52 && m.getMonth() < 11 ? -1 : 0)))",Y:"Ext.String.leftPad(m.getFullYear(), 4, '0')",y:"('' + m.getFullYear()).substring(2, 4)",a:"(m.getHours() < 12 ? 'am' : 'pm')",A:"(m.getHours() < 12 ? 'AM' : 'PM')",g:"((m.getHours() % 12) ? m.getHours() % 12 : 12)",G:"m.getHours()",h:"Ext.String.leftPad((m.getHours() % 12) ? m.getHours() % 12 : 12, 2, '0')",H:"Ext.String.leftPad(m.getHours(), 2, '0')",i:"Ext.String.leftPad(m.getMinutes(), 2, '0')",s:"Ext.String.leftPad(m.getSeconds(), 2, '0')",u:"Ext.String.leftPad(m.getMilliseconds(), 3, '0')",O:"Ext.Date.getGMTOffset(m)",P:"Ext.Date.getGMTOffset(m, true)",T:"Ext.Date.getTimezone(m)",Z:"(m.getTimezoneOffset() * -60)",c:function(){var u="Y-m-dTH:i:sP",s=[],r,q=u.length,t;for(r=0;r<q;++r){t=u.charAt(r);s.push(t==="T"?"'T'":g.getFormatCode(t))}return s.join(" + ")},C:function(){return"m.toISOString()"},U:"Math.round(m.getTime() / 1000)"},isValid:function(A,q,z,v,t,u,r){v=v||0;t=t||0;u=u||0;r=r||0;var w=g.add(new f(A<100?100:A,q-1,z,v,t,u,r),g.YEAR,A<100?A-100:0);return A===w.getFullYear()&&q===w.getMonth()+1&&z===w.getDate()&&v===w.getHours()&&t===w.getMinutes()&&u===w.getSeconds()&&r===w.getMilliseconds()},parse:function(r,t,q){var s=g.parseFunctions;if(s[t]==null){g.createParser(t)}return s[t].call(g,r,Ext.isDefined(q)?q:g.useStrict)},parseDate:function(r,s,q){return g.parse(r,s,q)},getFormatCode:function(r){var q=g.formatCodes[r];if(q){q=typeof q==="function"?q():q;g.formatCodes[r]=q}return q||("'"+Ext.String.escape(r)+"'")},createFormat:function(u){var t=[],q=false,s="",r;for(r=0;r<u.length;++r){s=u.charAt(r);if(!q&&s==="\\"){q=true}else{if(q){q=false;t.push("'"+Ext.String.escape(s)+"'")}else{if(s==="\n"){t.push("'\\n'")}else{t.push(g.getFormatCode(s))}}}}g.formatFunctions[u]=Ext.functionFactory("var m=this;return "+t.join("+"))},createParser:function(A){var r=g.parseRegexes.length,B=1,s=[],z=[],w=false,q="",u=0,v=A.length,y=[],t;for(;u<v;++u){q=A.charAt(u);if(!w&&q==="\\"){w=true}else{if(w){w=false;z.push(Ext.String.escape(q))}else{t=g.formatCodeToRegex(q,B);B+=t.g;z.push(t.s);if(t.g&&t.c){if(t.calcAtEnd){y.push(t.c)}else{s.push(t.c)}}}}}s=s.concat(y);g.parseRegexes[r]=new RegExp("^"+z.join("")+"$","i");g.parseFunctions[A]=Ext.functionFactory("input","strict",m(b,r,s.join("")))},parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|0[1-9])"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|[1-9])"},D:function(){for(var q=[],r=0;r<7;q.push(g.getShortDayName(r)),++r){}return{g:0,c:null,s:"(?:"+q.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+g.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:1,c:"W = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},F:function(){return{g:1,c:"m = parseInt(me.getMonthNumber(results[{0}]), 10);\n",s:"("+g.monthNames.join("|")+")"}},M:function(){for(var q=[],r=0;r<12;q.push(g.getShortMonthName(r)),++r){}return Ext.applyIf({s:"("+q.join("|")+")"},g.formatCodeToRegex("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|0[1-9])"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|[1-9])"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > me.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{2})"},a:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(am|pm|AM|PM)",calcAtEnd:true},A:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)",calcAtEnd:true},g:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|[0-9])"},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|1[0-9]|[0-9])"},h:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|0[1-9])"},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|[0-1][0-9])"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,5}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var s=[],q=[g.formatCodeToRegex("Y",1),g.formatCodeToRegex("m",2),g.formatCodeToRegex("d",3),g.formatCodeToRegex("H",4),g.formatCodeToRegex("i",5),g.formatCodeToRegex("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",g.formatCodeToRegex("P",8).c,"}else{",g.formatCodeToRegex("O",8).c,"}","}"].join("\n")}],t,r;for(t=0,r=q.length;t<r;++t){s.push(q[t].c)}return{g:1,c:s.join(""),s:[q[0].s,"(?:","-",q[1].s,"(?:","-",q[2].s,"(?:","(?:T| )?",q[3].s,":",q[4].s,"(?::",q[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}},dateFormat:function(q,r){return g.format(q,r)},isEqual:function(r,q){if(r&&q){return(r.getTime()===q.getTime())}return !(r||q)},format:function(r,s){var q=g.formatFunctions;if(!Ext.isDate(r)){return""}if(q[s]==null){g.createFormat(s)}return q[s].call(r)+""},getTimezone:function(q){return q.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,5})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(q,r){var s=q.getTimezoneOffset();return(s>0?"-":"+")+Ext.String.leftPad(Math.floor(Math.abs(s)/60),2,"0")+(r?":":"")+Ext.String.leftPad(Math.abs(s%60),2,"0")},getDayOfYear:function(s){var r=0,u=g.clone(s),q=s.getMonth(),t;for(t=0,u.setDate(1),u.setMonth(0);t<q;u.setMonth(++t)){r+=g.getDaysInMonth(u)}return r+s.getDate()-1},getWeekOfYear:(function(){var q=86400000,r=7*q;return function(t){var u=f.UTC(t.getFullYear(),t.getMonth(),t.getDate()+3)/q,s=Math.floor(u/7),v=new f(s*r).getUTCFullYear();return s-Math.floor(f.UTC(v,0,7)/r)+1}}()),isLeapYear:function(q){var r=q.getFullYear();return !!((r&3)===0&&(r%100||(r%400===0&&r)))},getFirstDayOfMonth:function(r){var q=(r.getDay()-(r.getDate()-1))%7;return(q<0)?(q+7):q},getLastDayOfMonth:function(q){return g.getLastDateOfMonth(q).getDay()},getFirstDateOfMonth:function(q){return new f(q.getFullYear(),q.getMonth(),1)},getLastDateOfMonth:function(q){return new f(q.getFullYear(),q.getMonth(),g.getDaysInMonth(q))},getDaysInMonth:(function(){var q=[31,28,31,30,31,30,31,31,30,31,30,31];return function(s){var r=s.getMonth();return r===1&&g.isLeapYear(s)?29:q[r]}}()),getSuffix:function(q){switch(q.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(q){return new f(q.getTime())},isDST:function(q){return new f(q.getFullYear(),0,1).getTimezoneOffset()!==q.getTimezoneOffset()},clearTime:function(q,u){if(isNaN(q.getTime())){return q}if(u){return g.clearTime(g.clone(q))}var s=q.getDate(),r,t;q.setHours(0);q.setMinutes(0);q.setSeconds(0);q.setMilliseconds(0);if(q.getDate()!==s){for(r=1,t=g.add(q,g.HOUR,r);t.getDate()!==s;r++,t=g.add(q,g.HOUR,r)){}q.setDate(s);q.setHours(t.getHours())}return q},add:function(s,r,v){var w=g.clone(s),q,u,t=0;if(!r||v===0){return w}u=v-parseInt(v,10);v=parseInt(v,10);if(v){switch(r.toLowerCase()){case g.MILLI:w.setTime(w.getTime()+v);break;case g.SECOND:w.setTime(w.getTime()+v*1000);break;case g.MINUTE:w.setTime(w.getTime()+v*60*1000);break;case g.HOUR:w.setTime(w.getTime()+v*60*60*1000);break;case g.DAY:w.setDate(w.getDate()+v);break;case g.MONTH:q=s.getDate();if(q>28){q=Math.min(q,g.getLastDateOfMonth(g.add(g.getFirstDateOfMonth(s),g.MONTH,v)).getDate())}w.setDate(q);w.setMonth(s.getMonth()+v);break;case g.YEAR:q=s.getDate();if(q>28){q=Math.min(q,g.getLastDateOfMonth(g.add(g.getFirstDateOfMonth(s),g.YEAR,v)).getDate())}w.setDate(q);w.setFullYear(s.getFullYear()+v);break}}if(u){switch(r.toLowerCase()){case g.MILLI:t=1;break;case g.SECOND:t=1000;break;case g.MINUTE:t=1000*60;break;case g.HOUR:t=1000*60*60;break;case g.DAY:t=1000*60*60*24;break;case g.MONTH:q=g.getDaysInMonth(w);t=1000*60*60*24*q;break;case g.YEAR:q=(g.isLeapYear(w)?366:365);t=1000*60*60*24*q;break}if(t){w.setTime(w.getTime()+t*u)}}return w},subtract:function(r,q,s){return g.add(r,q,-s)},between:function(r,u,q){var s=r.getTime();return u.getTime()<=s&&s<=q.getTime()},compat:function(){var y,z=["useStrict","formatCodeToRegex","parseFunctions","parseRegexes","formatFunctions","y2kYear","MILLI","SECOND","MINUTE","HOUR","DAY","MONTH","YEAR","defaults","dayNames","monthNames","monthNumbers","getShortMonthName","getShortDayName","getMonthNumber","formatCodes","isValid","parseDate","getFormatCode","createFormat","createParser","parseCodes"],w=["dateFormat","format","getTimezone","getGMTOffset","getDayOfYear","getWeekOfYear","isLeapYear","getFirstDayOfMonth","getLastDayOfMonth","getDaysInMonth","getSuffix","clone","isDST","clearTime","add","between"],r=z.length,q=w.length,u,v,t;for(t=0;t<r;t++){u=z[t];f[u]=g[u]}for(y=0;y<q;y++){v=w[y];f.prototype[v]=function(){var s=Array.prototype.slice.call(arguments);s.unshift(this);return g[v].apply(g,s)}}},diff:function(r,q,t){var s,u=+q-r;switch(t){case g.MILLI:return u;case g.SECOND:return Math.floor(u/1000);case g.MINUTE:return Math.floor(u/60000);case g.HOUR:return Math.floor(u/3600000);case g.DAY:return Math.floor(u/86400000);case"w":return Math.floor(u/604800000);case g.MONTH:s=(q.getFullYear()*12+q.getMonth())-(r.getFullYear()*12+r.getMonth());if(g.add(r,t,s)>q){return s-1}return s;case g.YEAR:s=q.getFullYear()-r.getFullYear();if(g.add(r,t,s)>q){return s-1}else{return s}}},align:function(r,t,s){var q=new f(+r);switch(t.toLowerCase()){case g.MILLI:return q;case g.SECOND:q.setUTCSeconds(q.getUTCSeconds()-q.getUTCSeconds()%s);q.setUTCMilliseconds(0);return q;case g.MINUTE:q.setUTCMinutes(q.getUTCMinutes()-q.getUTCMinutes()%s);q.setUTCSeconds(0);q.setUTCMilliseconds(0);return q;case g.HOUR:q.setUTCHours(q.getUTCHours()-q.getUTCHours()%s);q.setUTCMinutes(0);q.setUTCSeconds(0);q.setUTCMilliseconds(0);return q;case g.DAY:if(s===7||s===14){q.setUTCDate(q.getUTCDate()-q.getUTCDay()+1)}q.setUTCHours(0);q.setUTCMinutes(0);q.setUTCSeconds(0);q.setUTCMilliseconds(0);return q;case g.MONTH:q.setUTCMonth(q.getUTCMonth()-(q.getUTCMonth()-1)%s,1);q.setUTCHours(0);q.setUTCMinutes(0);q.setUTCSeconds(0);q.setUTCMilliseconds(0);return q;case g.YEAR:q.setUTCFullYear(q.getUTCFullYear()-q.getUTCFullYear()%s,1,1);q.setUTCHours(0);q.setUTCMinutes(0);q.setUTCSeconds(0);q.setUTCMilliseconds(0);return r}}}}());Ext.Function=(function(){var b=0,q,f=[],r=[],j=0,m={},h=window,d=Ext.global,g=!!(d.setImmediate&&d.clearImmediate),p=h.requestAnimationFrame||h.webkitRequestAnimationFrame||h.mozRequestAnimationFrame||h.oRequestAnimationFrame||function(v){var s=Ext.now(),t=Math.max(0,16-(s-b)),u=h.setTimeout(function(){v(s+t)},t);b=s+t;return u},c=function(){var s=f.length,v,t,u;q=null;for(t=0;t<s;t++){u=f[t];v=u[3];if(m[v]){u[0].apply(u[1]||d,u[2]||r);delete m[v]}}f=f.slice(s)},a=function(){Ext.elevateFunction(c)},o={flexSetter:function(s){return function(u,w){var t,v;if(u!==null){if(typeof u!=="string"){for(t in u){if(u.hasOwnProperty(t)){s.call(this,t,u[t])}}if(Ext.enumerables){for(v=Ext.enumerables.length;v--;){t=Ext.enumerables[v];if(u.hasOwnProperty(t)){s.call(this,t,u[t])}}}}else{s.call(this,u,w)}}return this}},bind:function(v,u,t,s){if(arguments.length===2){return function(){return v.apply(u,arguments)}}var y=v,w=Array.prototype.slice;return function(){var z=t||arguments;if(s===true){z=w.call(arguments,0);z=z.concat(t)}else{if(typeof s==="number"){z=w.call(arguments,0);Ext.Array.insert(z,s,t)}}return y.apply(u||d,z)}},bindCallback:function(w,v,u,t,s){return function(){var y=Ext.Array.slice(arguments);return Ext.callback(w,v,u?u.concat(y):y,t,s)}},pass:function(u,s,t){if(!Ext.isArray(s)){if(Ext.isIterable(s)){s=Ext.Array.clone(s)}else{s=s!==undefined?[s]:[]}}return function(){var v=s.slice();v.push.apply(v,arguments);return u.apply(t||this,v)}},alias:function(t,s){return function(){return t[s].apply(t,arguments)}},clone:function(s){return function(){return s.apply(this,arguments)}},createInterceptor:function(v,u,t,s){if(!Ext.isFunction(u)){return v}else{s=Ext.isDefined(s)?s:null;return function(){var y=this,w=arguments;return(u.apply(t||y||d,w)!==false)?v.apply(y||d,w):s}}},createDelayed:function(w,u,v,t,s){if(v||t){w=Ext.Function.bind(w,v,t,s)}return function(){var z=this,y=Array.prototype.slice.call(arguments);setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(w,z,y)}else{w.apply(z,y)}},u)}},defer:function(w,u,v,t,s){w=Ext.Function.bind(w,v,t,s);if(u>0){return setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(w)}else{w()}},u)}w();return 0},interval:function(w,u,v,t,s){w=Ext.Function.bind(w,v,t,s);return setInterval(function(){if(Ext.elevateFunction){Ext.elevateFunction(w)}else{w()}},u)},createSequence:function(t,u,s){if(!u){return t}else{return function(){var v=t.apply(this,arguments);u.apply(s||this,arguments);return v}}},createBuffered:function(w,t,v,u){var s;return function(){var z=u||Array.prototype.slice.call(arguments,0),y=v||this;if(s){clearTimeout(s)}s=setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(w,y,z)}else{w.apply(y,z)}},t)}},createAnimationFrame:function(v,u,t,w){var s;w=w||3;return function(){var y=t||Array.prototype.slice.call(arguments,0);u=u||this;if(w===3&&s){o.cancelAnimationFrame(s)}if((w&1)||!s){s=o.requestAnimationFrame(function(){s=null;v.apply(u,y)})}}},requestAnimationFrame:function(v,u,s){var w=++j,t=Array.prototype.slice.call(arguments,0);t[3]=w;m[w]=1;f.push(t);if(!q){q=p(Ext.elevateFunction?a:c)}return w},cancelAnimationFrame:function(s){delete m[s]},createThrottled:function(w,t,v){var y=0,s,u,A,z=function(){if(Ext.elevateFunction){Ext.elevateFunction(w,v,u)}else{w.apply(v,u)}y=Ext.now();A=null};return function(){if(!v){v=this}s=Ext.now()-y;u=arguments;if(s>=t){clearTimeout(A);z()}else{if(!A){A=Ext.defer(z,t-s)}}}},createBarrier:function(u,t,s){return function(){if(!--u){t.apply(s,arguments)}}},interceptBefore:function(t,s,v,u){var w=t[s]||Ext.emptyFn;return(t[s]=function(){var y=v.apply(u||this,arguments);w.apply(this,arguments);return y})},interceptAfter:function(t,s,v,u){var w=t[s]||Ext.emptyFn;return(t[s]=function(){w.apply(this,arguments);return v.apply(u||this,arguments)})},makeCallback:function(t,s){return function(){return s[t].apply(s,arguments)}},memoize:function(v,u,s){var t={},w=s&&Ext.isFunction(s);return function(z){var y=w?s.apply(u,arguments):z;if(!(y in t)){t[y]=v.apply(u,arguments)}return t[y]}}};Ext.asap=g?function(t,s,u){if(s!=null||u!=null){t=o.bind(t,s,u)}return setImmediate(function(){if(Ext.elevateFunction){Ext.elevateFunction(t)}else{t()}})}:function(t,s,u){if(s!=null||u!=null){t=o.bind(t,s,u)}return setTimeout(function(){if(Ext.elevateFunction){Ext.elevateFunction(t)}else{t()}},0,true)},Ext.asapCancel=g?function(s){clearImmediate(s)}:function(s){clearTimeout(s)};Ext.defer=o.defer;Ext.interval=o.interval;Ext.pass=o.pass;Ext.bind=o.bind;Ext.deferCallback=o.requestAnimationFrame;return o})();Ext.Number=(new function(){var d=this,c=(0.9).toFixed()!=="1",b=Math,a={count:false,inclusive:false,wrap:true};Ext.apply(d,{Clip:{DEFAULT:a,COUNT:Ext.applyIf({count:true},a),INCLUSIVE:Ext.applyIf({inclusive:true},a),NOWRAP:Ext.applyIf({wrap:false},a)},clipIndices:function(p,q,h){h=h||a;var g=0,o=h.wrap,m,f,j;q=q||[];for(j=0;j<2;++j){m=f;f=q[j];if(f==null){f=g}else{if(j&&h.count){f+=m;f=(f>p)?p:f}else{if(o){f=(f<0)?(p+f):f}if(j&&h.inclusive){++f}f=(f<0)?0:((f>p)?p:f)}}g=p}q[0]=m;q[1]=(f<m)?m:f;return q},constrain:function(j,h,g){var f=parseFloat(j);if(h===null){h=j}if(g===null){g=j}return(f<h)?h:((f>g)?g:f)},snap:function(j,g,h,o){var f;if(j===undefined||j<h){return h||0}if(g){f=j%g;if(f!==0){j-=f;if(f*2>=g){j+=g}else{if(f*2<-g){j-=g}}}}return d.constrain(j,h,o)},snapInRange:function(j,f,h,m){var g;h=(h||0);if(j===undefined||j<h){return h}if(f&&(g=((j-h)%f))){j-=g;g*=2;if(g>=f){j+=f}}if(m!==undefined){if(j>(m=d.snapInRange(m,f,h))){j=m}}return j},sign:function(f){f=+f;if(f===0||isNaN(f)){return f}return(f>0)?1:-1},toFixed:c?function(h,f){f=f||0;var g=b.pow(10,f);return(b.round(h*g)/g).toFixed(f)}:function(g,f){return g.toFixed(f)},from:function(g,f){if(isFinite(g)){g=parseFloat(g)}return !isNaN(g)?g:f},randomInt:function(g,f){return b.floor(b.random()*(f-g+1)+g)},correctFloat:function(f){return parseFloat(f.toPrecision(14))}});Ext.num=function(){return d.from.apply(this,arguments)}}());(function(){var d=function(){},b=/^\?/,c=/(\[):?([^\]]*)\]/g,a=/^([^\[]+)/,g=/\+/g,f=Ext.Object={chain:Object.create||function(j){d.prototype=j;var h=new d();d.prototype=null;return h},clear:function(h){for(var j in h){delete h[j]}return h},freeze:Object.freeze?function(m,h){if(m&&typeof m==="object"&&!Object.isFrozen(m)){Object.freeze(m);if(h){for(var j in m){f.freeze(m[j],h)}}}return m}:Ext.identityFn,toQueryObjects:function(m,r,j){var h=f.toQueryObjects,q=[],o,p;if(Ext.isArray(r)){for(o=0,p=r.length;o<p;o++){if(j){q=q.concat(h(m+"["+o+"]",r[o],true))}else{q.push({name:m,value:r[o]})}}}else{if(Ext.isObject(r)){for(o in r){if(r.hasOwnProperty(o)){if(j){q=q.concat(h(m+"["+o+"]",r[o],true))}else{q.push({name:m,value:r[o]})}}}}else{q.push({name:m,value:r})}}return q},toQueryString:function(p,m){var q=[],o=[],s,r,t,h,u;for(s in p){if(p.hasOwnProperty(s)){q=q.concat(f.toQueryObjects(s,p[s],m))}}for(r=0,t=q.length;r<t;r++){h=q[r];u=h.value;if(Ext.isEmpty(u)){u=""}else{if(Ext.isDate(u)){u=Ext.Date.toString(u)}}o.push(encodeURIComponent(h.name)+"="+encodeURIComponent(String(u)))}return o.join("&")},fromQueryString:function(m,z){var t=m.replace(b,"").split("&"),C={},A,r,E,u,y,p,v,w,h,q,B,s,D,o;for(y=0,p=t.length;y<p;y++){v=t[y];if(v.length>0){r=v.split("=");E=r[0];E=E.replace(g,"%20");E=decodeURIComponent(E);u=r[1];if(u!==undefined){u=u.replace(g,"%20");u=decodeURIComponent(u)}else{u=""}if(!z){if(C.hasOwnProperty(E)){if(!Ext.isArray(C[E])){C[E]=[C[E]]}C[E].push(u)}else{C[E]=u}}else{q=E.match(c);B=E.match(a);E=B[0];s=[];if(q===null){C[E]=u;continue}for(w=0,h=q.length;w<h;w++){D=q[w];D=(D.length===2)?"":D.substring(1,D.length-1);s.push(D)}s.unshift(E);A=C;for(w=0,h=s.length;w<h;w++){D=s[w];if(w===h-1){if(Ext.isArray(A)&&D===""){A.push(u)}else{A[D]=u}}else{if(A[D]===undefined||typeof A[D]==="string"){o=s[w+1];A[D]=(Ext.isNumeric(o)||o==="")?[]:{}}A=A[D]}}}}}return C},each:function(j,p,o){var h=Ext.enumerables,m,q;if(j){o=o||j;for(q in j){if(j.hasOwnProperty(q)){if(p.call(o,q,j[q],j)===false){return}}}if(h){for(m=h.length;m--;){if(j.hasOwnProperty(q=h[m])){if(p.call(o,q,j[q],j)===false){return}}}}}},eachValue:function(j,p,o){var h=Ext.enumerables,m,q;o=o||j;for(q in j){if(j.hasOwnProperty(q)){if(p.call(o,j[q])===false){return}}}if(h){for(m=h.length;m--;){if(j.hasOwnProperty(q=h[m])){if(p.call(o,j[q])===false){return}}}}},merge:function(r){var p=1,q=arguments.length,h=f.merge,m=Ext.clone,o,t,s,j;for(;p<q;p++){o=arguments[p];for(t in o){s=o[t];if(s&&s.constructor===Object){j=r[t];if(j&&j.constructor===Object){h(j,s)}else{r[t]=m(s)}}else{r[t]=s}}}return r},mergeIf:function(h){var p=1,q=arguments.length,m=Ext.clone,j,o,r;for(;p<q;p++){j=arguments[p];for(o in j){if(!(o in h)){r=j[o];if(r&&r.constructor===Object){h[o]=m(r)}else{h[o]=r}}}}return h},getAllKeys:function(h){var j=[],m;for(m in h){j.push(m)}return j},getKey:function(h,m){for(var j in h){if(h.hasOwnProperty(j)&&h[j]===m){return j}}return null},getValues:function(j){var h=[],m;for(m in j){if(j.hasOwnProperty(m)){h.push(j[m])}}return h},getKeys:(typeof Object.keys=="function")?function(h){if(!h){return[]}return Object.keys(h)}:function(h){var j=[],m;for(m in h){if(h.hasOwnProperty(m)){j.push(m)}}return j},getSize:function(h){var j=0,m;for(m in h){if(h.hasOwnProperty(m)){j++}}return j},isEmpty:function(h){for(var j in h){if(h.hasOwnProperty(j)){return false}}return true},equals:(function(){var h=function(o,m){var j;for(j in o){if(o.hasOwnProperty(j)){if(o[j]!==m[j]){return false}}}return true};return function(m,j){if(m===j){return true}if(m&&j){return h(m,j)&&h(j,m)}else{if(!m&&!j){return m===j}else{return false}}}})(),fork:function(o){var h,j,m;if(o&&o.constructor===Object){h=f.chain(o);for(j in o){m=o[j];if(m){if(m.constructor===Object){h[j]=f.fork(m)}else{if(m instanceof Array){h[j]=Ext.Array.clone(m)}}}}}else{h=o}return h},defineProperty:("defineProperty" in Object)?Object.defineProperty:function(j,h,m){if(!Object.prototype.__defineGetter__){return}if(m.get){j.__defineGetter__(h,m.get)}if(m.set){j.__defineSetter__(h,m.set)}},classify:function(o){var m=o,q=[],j={},h=function(){var s=0,t=q.length,u;for(;s<t;s++){u=q[s];this[u]=new j[u]()}},p,r;for(p in o){if(o.hasOwnProperty(p)){r=o[p];if(r&&r.constructor===Object){q.push(p);j[p]=f.classify(r)}}}h.prototype=m;return h}};Ext.merge=Ext.Object.merge;Ext.mergeIf=Ext.Object.mergeIf}());Ext.apply(Ext,{_namedScopes:{"this":{isThis:1},controller:{isController:1},self:{isSelf:1},"self.controller":{isSelf:1,isController:1}},escapeId:(function(){var c=/^[a-zA-Z_][a-zA-Z0-9_\-]*$/i,d=/([\W]{1})/g,b=/^(\d)/g,a=function(h,g){return"\\"+g},f=function(h,g){return"\\00"+g.charCodeAt(0).toString(16)+" "};return function(g){return c.test(g)?g:g.replace(d,a).replace(b,f)}}()),callback:function(j,g,d,c,b,h){if(!j){return}var f=(g in Ext._namedScopes);if(j.charAt){if((!g||f)&&b){g=b.resolveListenerScope(f?g:h)}j=g[j]}else{if(f){g=h||b}else{if(!g){g=b}}}var a;if(j&&Ext.isFunction(j)){g=g||Ext.global;if(c){Ext.defer(j,c,g,d)}else{if(Ext.elevateFunction){a=Ext.elevateFunction(j,g,d)}else{if(d){a=j.apply(g,d)}else{a=j.call(g)}}}}return a},coerce:function(f,d){var c=Ext.typeOf(f),b=Ext.typeOf(d),a=typeof f==="string";if(c!==b){switch(b){case"string":return String(f);case"number":return Number(f);case"boolean":return a&&(!f||f==="false")?false:Boolean(f);case"null":return a&&(!f||f==="null")?null:f;case"undefined":return a&&(!f||f==="undefined")?undefined:f;case"date":return a&&isNaN(f)?Ext.Date.parse(f,Ext.Date.defaultFormat):Date(Number(f))}}return f},copyTo:function(b,d,g,f){if(typeof g==="string"){g=g.split(Ext.propertyNameSplitRe)}for(var a,c=0,h=g?g.length:0;c<h;c++){a=g[c];if(f||d.hasOwnProperty(a)){b[a]=d[a]}}return b},copy:function(b,d,g,f){if(typeof g==="string"){g=g.split(Ext.propertyNameSplitRe)}for(var a,c=0,h=g?g.length:0;c<h;c++){a=g[c];if(d.hasOwnProperty(a)||(f&&a in d)){b[a]=d[a]}}return b},propertyNameSplitRe:/[,;\s]+/,copyToIf:function(a,d,f){if(typeof f==="string"){f=f.split(Ext.propertyNameSplitRe)}for(var b,c=0,g=f?f.length:0;c<g;c++){b=f[c];if(a[b]===undefined){a[b]=d[b]}}return a},copyIf:function(a,d,f){if(typeof f==="string"){f=f.split(Ext.propertyNameSplitRe)}for(var b,c=0,g=f?f.length:0;c<g;c++){b=f[c];if(!(b in a)&&(b in d)){a[b]=d[b]}}return a},extend:(function(){var a=Object.prototype.constructor,b=function(d){for(var c in d){if(!d.hasOwnProperty(c)){continue}this[c]=d[c]}};return function(c,j,g){if(Ext.isObject(j)){g=j;j=c;c=g.constructor!==a?g.constructor:function(){j.apply(this,arguments)}}var f=function(){},d,h=j.prototype;f.prototype=h;d=c.prototype=new f();d.constructor=c;c.superclass=h;if(h.constructor===a){h.constructor=j}c.override=function(m){Ext.override(c,m)};d.override=b;d.proto=d;c.override(g);c.extend=function(m){return Ext.extend(c,m)};return c}}()),iterate:function(a,c,b){if(Ext.isEmpty(a)){return}if(b===undefined){b=a}if(Ext.isIterable(a)){Ext.Array.each.call(Ext.Array,a,c,b)}else{Ext.Object.each.call(Ext.Object,a,c,b)}},_resourcePoolRe:/^[<]([^<>@:]*)(?:[@]([^<>@:]+))?[>](.+)$/,resolveResource:function(c){var b=c,a;if(c&&c.charAt(0)==="<"){a=Ext._resourcePoolRe.exec(c);if(a){b=Ext.getResourcePath(a[3],a[1],a[2])}}return b},urlEncode:function(){var a=Ext.Array.from(arguments),b="";if(Ext.isString(a[1])){b=a[1]+"&";a[1]=false}return b+Ext.Object.toQueryString.apply(Ext.Object,a)},urlDecode:function(){return Ext.Object.fromQueryString.apply(Ext.Object,arguments)},getScrollbarSize:function(c){var b=Ext._scrollbarSize;if(c||!b){var a=document.body,d=document.createElement("div");d.style.width=d.style.height="100px";d.style.overflow="scroll";d.style.position="absolute";a.appendChild(d);Ext._scrollbarSize=b={width:d.offsetWidth-d.clientWidth,height:d.offsetHeight-d.clientHeight};a.removeChild(d)}return b},typeOf:(function(){var a=/\S/,c=Object.prototype.toString,d={number:1,string:1,"boolean":1,"undefined":1},b={"[object Array]":"array","[object Date]":"date","[object Boolean]":"boolean","[object Number]":"number","[object RegExp]":"regexp"};return function(h){if(h===null){return"null"}var g=typeof h,f,j;if(d[g]){return g}f=b[j=c.call(h)];if(f){return f}if(g==="function"){return"function"}if(g==="object"){if(h.nodeType!==undefined){if(h.nodeType===3){return a.test(h.nodeValue)?"textnode":"whitespace"}else{return"element"}}return"object"}return j}}()),factory:function(b,f,a,g){var d=Ext.ClassManager,c;if(!b||b.isInstance){if(a&&a!==b){a.destroy()}return b}if(g){if(typeof b==="string"){return d.instantiateByAlias(g+"."+b)}else{if(Ext.isObject(b)&&"type" in b){return d.instantiateByAlias(g+"."+b.type,b)}}}if(b===true){return a||Ext.create(f)}if("xtype" in b){c=d.instantiateByAlias("widget."+b.xtype,b)}else{if("xclass" in b){c=Ext.create(b.xclass,b)}}if(c){if(a){a.destroy()}return c}if(a){return a.setConfig(b)}return Ext.create(f,b)},log:(function(){var a=function(){};a.info=a.warn=a.error=Ext.emptyFn;return a}())});(function(){var d=[""],j=/([^\d\.])/,b=/[^\d]/g,a=/[\-+]/g,h=/\s/g,c=/_/g,g={classic:1,modern:1},f;Ext.Version=f=function(v,r){var w=this,p=w.padModes,m,t,q,s,y,o,u;if(v.isVersion){v=v.version}w.version=u=String(v).toLowerCase().replace(c,".").replace(a,"");m=u.charAt(0);if(m in p){u=u.substring(1);q=p[m]}else{q=r?p[r]:0}w.pad=q;o=u.search(j);w.shortVersion=u;if(o!==-1){w.release=y=u.substr(o,v.length);w.shortVersion=u.substr(0,o);y=f.releaseValueMap[y]||y}w.releaseValue=y||q;w.shortVersion=w.shortVersion.replace(b,"");w.parts=s=u.split(".");for(t=s.length;t--;){s[t]=parseInt(s[t],10)}if(q===Infinity){s.push(q)}w.major=s[0]||q;w.minor=s[1]||q;w.patch=s[2]||q;w.build=s[3]||q;return w};f.prototype={isVersion:true,padModes:{"~":NaN,"^":Infinity},release:"",compareTo:function(y){var z=this,r=z.pad,v=z.parts,A=v.length,q=y.isVersion?y:new f(y),o=q.pad,u=q.parts,t=u.length,m=Math.max(A,t),s,p,w;for(s=0;s<m;s++){p=(s<A)?v[s]:r;w=(s<t)?u[s]:o;if(p<w){return -1}if(p>w){return 1}}p=z.releaseValue;w=q.releaseValue;if(p<w){return -1}if(p>w){return 1}return 0},toString:function(){return this.version},valueOf:function(){return this.version},getMajor:function(){return this.major},getMinor:function(){return this.minor},getPatch:function(){return this.patch},getBuild:function(){return this.build},getRelease:function(){return this.release},getReleaseValue:function(){return this.releaseValue},isGreaterThan:function(m){return this.compareTo(m)>0},isGreaterThanOrEqual:function(m){return this.compareTo(m)>=0},isLessThan:function(m){return this.compareTo(m)<0},isLessThanOrEqual:function(m){return this.compareTo(m)<=0},equals:function(m){return this.compareTo(m)===0},match:function(m){m=String(m);return this.version.substr(0,m.length)===m},toArray:function(){var m=this;return[m.getMajor(),m.getMinor(),m.getPatch(),m.getBuild(),m.getRelease()]},getShortVersion:function(){return this.shortVersion},gt:function(m){return this.compareTo(m)>0},lt:function(m){return this.compareTo(m)<0},gtEq:function(m){return this.compareTo(m)>=0},ltEq:function(m){return this.compareTo(m)<=0}};Ext.apply(f,{aliases:{from:{extjs:"ext",core:"core",touch:"modern"},to:{ext:["extjs"],core:["core"],modern:["touch"]}},releaseValueMap:{dev:-6,alpha:-5,a:-5,beta:-4,b:-4,rc:-3,"#":-2,p:-1,pl:-1},getComponentValue:function(m){return !m?0:(isNaN(m)?this.releaseValueMap[m]||m:parseInt(m,10))},compare:function(p,o){var m=p.isVersion?p:new f(p);return m.compareTo(o)},set:function(s,q,p){var o=f.aliases.to[q],m=p.isVersion?p:new f(p),r;s[q]=m;if(o){for(r=o.length;r-->0;){s[o[r]]=m}}return m}});Ext.apply(Ext,{compatVersions:{},versions:{},lastRegisteredVersion:null,getCompatVersion:function(o){var m=Ext.compatVersions,p;if(!o){p=m.ext||m.touch||m.core}else{p=m[f.aliases.from[o]||o]}return p||Ext.getVersion(o)},setCompatVersion:function(o,m){f.set(Ext.compatVersions,o,m)},setVersion:function(o,m){if(o in g){Ext.toolkit=o}Ext.lastRegisteredVersion=f.set(Ext.versions,o,m);return this},getVersion:function(o){var m=Ext.versions;if(!o){return m.ext||m.touch||m.core}return m[f.aliases.from[o]||o]},checkVersion:function(t,C){var y=Ext.isArray(t),p=f.aliases.from,D=y?t:d,o=D.length,q=Ext.versions,B=q.ext||q.touch,u,A,w,r,s,m,E,v,z;if(!y){d[0]=t}for(u=0;u<o;++u){if(!Ext.isString(E=D[u])){w=Ext.checkVersion(E.and||E.or,!E.or);if(E.not){w=!w}}else{if(E.indexOf(" ")>=0){E=E.replace(h,"")}A=E.indexOf("@");if(A<0){v=E;z=B}else{m=E.substring(0,A);if(!(z=q[p[m]||m])){if(C){return false}continue}v=E.substring(A+1)}A=v.indexOf("-");if(A<0){if(v.charAt(A=v.length-1)==="+"){r=v.substring(0,A);s=null}else{r=s=v}}else{if(A>0){r=v.substring(0,A);s=v.substring(A+1)}else{r=null;s=v.substring(A+1)}}w=true;if(r){r=new f(r,"~");w=r.ltEq(z)}if(w&&s){s=new f(s,"~");w=s.gtEq(z)}}if(w){if(!C){return true}}else{if(C){return false}}}return !!C},deprecate:function(m,p,q,o){if(f.compare(Ext.getVersion(m),p)<1){q.call(o)}}})}());(function(d){var f=(d&&d.packages)||{},c=d&&d.compatibility,b,a;for(b in f){a=f[b];Ext.setVersion(b,a.version)}if(c){if(Ext.isString(c)){Ext.setCompatVersion("core",c)}else{for(b in c){Ext.setCompatVersion(b,c[b])}}}if(!f.ext&&!f.touch){Ext.setVersion("ext","6.0.1.250");Ext.setVersion("core","6.0.1.250")}})(Ext.manifest);Ext.Config=function(b){var c=this,a=b.charAt(0).toUpperCase()+b.substr(1);c.name=b;c.names={internal:"_"+b,initializing:"is"+a+"Initializing",apply:"apply"+a,update:"update"+a,get:"get"+a,set:"set"+a,initGet:"initGet"+a,changeEvent:b.toLowerCase()+"change"};c.root=c};Ext.Config.map={};Ext.Config.get=function(b){var c=Ext.Config.map,a=c[b]||(c[b]=new Ext.Config(b));return a};Ext.Config.prototype={self:Ext.Config,isConfig:true,getGetter:function(){return this.getter||(this.root.getter=this.makeGetter())},getInitGetter:function(){return this.initGetter||(this.root.initGetter=this.makeInitGetter())},getSetter:function(){return this.setter||(this.root.setter=this.makeSetter())},getEventedSetter:function(){return this.eventedSetter||(this.root.eventedSetter=this.makeEventedSetter())},getInternalName:function(a){return a.$configPrefixed?this.names.internal:this.name},mergeNew:function(g,b,f,d){var a,c;if(!b){a=g}else{if(!g){a=b}else{a=Ext.Object.chain(b);for(c in g){if(!d||!(c in a)){a[c]=g[c]}}}}return a},mergeSets:function(f,c,a){var b=c?Ext.Object.chain(c):{},d,g;if(f instanceof Array){for(d=f.length;d--;){g=f[d];if(!a||!(g in b)){b[g]=true}}}else{if(f){if(f.constructor===Object){for(d in f){g=f[d];if(!a||!(d in b)){b[d]=g}}}else{if(!a||!(f in b)){b[f]=true}}}}return b},makeGetter:function(){var a=this.name,b=this.names.internal;return function(){var c=this.$configPrefixed?b:a;return this[c]}},makeInitGetter:function(){var a=this.name,f=this.names,d=f.set,b=f.get,c=f.initializing;return function(){var g=this;g[c]=true;delete g[b];g[d](g.config[a]);delete g[c];return g[b].apply(g,arguments)}},makeSetter:function(){var a=this.name,f=this.names,c=f.internal,d=f.get,b=f.apply,h=f.update,g;g=function(p){var o=this,m=o.$configPrefixed?c:a,j=o[m];delete o[d];if(!o[b]||(p=o[b](p,j))!==undefined){if(p!==(j=o[m])){o[m]=p;if(o[h]){o[h](p,j)}}}return o};g.$isDefault=true;return g},makeEventedSetter:function(){var b=this.name,h=this.names,m=h.internal,a=h.get,j=h.apply,d=h.update,g=h.changeEvent,f=function(q,r,o,p){q[p]=r;if(q[d]){q[d](r,o)}},c;c=function(r){var q=this,p=q.$configPrefixed?m:b,o=q[p];delete q[a];if(!q[j]||(r=q[j](r,o))!==undefined){if(r!==(o=q[p])){if(q.isConfiguring){q[p]=r;if(q[d]){q[d](r,o)}}else{q.fireEventedAction(g,[q,r,o],f,q,[q,r,o,p])}}}return q};c.$isDefault=true;return c}};(function(){var b=Ext.Config,c=b.map,a=Ext.Object;Ext.Configurator=function(d){var g=this,f=d.prototype,h=d.superclass?d.superclass.self.$config:null;g.cls=d;g.superCfg=h;if(h){g.configs=a.chain(h.configs);g.cachedConfigs=a.chain(h.cachedConfigs);g.initMap=a.chain(h.initMap);g.values=a.chain(h.values);g.needsFork=h.needsFork}else{g.configs={};g.cachedConfigs={};g.initMap={};g.values={}}f.config=f.defaultConfig=g.values;d.$config=g};Ext.Configurator.prototype={self:Ext.Configurator,needsFork:false,initList:null,add:function(z,d){var A=this,j=A.cls,p=A.configs,B=A.cachedConfigs,r=A.initMap,v=j.prototype,C=d&&d.$config.configs,f=A.values,o,q,y,g,h,m,D,u,t,w;for(D in z){w=z[D];o=w&&w.constructor===Object;q=o&&"$value" in w?w:null;if(q){y=!!q.cached;w=q.$value;o=w&&w.constructor===Object}g=q&&q.merge;h=p[D];if(h){if(d){g=h.merge;if(!g){continue}q=null}else{g=g||h.merge}m=f[D];if(g){w=g.call(h,w,m,j,d)}else{if(o){if(m&&m.constructor===Object){w=a.merge({},m,w)}}}}else{if(C){h=C[D];q=null}else{h=b.get(D)}p[D]=h;if(h.cached||y){B[D]=true}u=h.names;if(!v[t=u.get]){v[t]=h.getter||h.getGetter()}if(!v[t=u.set]){v[t]=(q&&q.evented)?(h.eventedSetter||h.getEventedSetter()):(h.setter||h.getSetter())}}if(q){if(h.owner!==j){p[D]=h=Ext.Object.chain(h);h.owner=j}Ext.apply(h,q);delete h.$value}if(!A.needsFork&&w&&(w.constructor===Object||w instanceof Array)){A.needsFork=true}if(w!==null){r[D]=true}else{if(v.$configPrefixed){v[p[D].names.internal]=null}else{v[p[D].name]=null}if(D in r){r[D]=false}}f[D]=w}},configure:function(C,p){var E=this,o=E.configs,q=E.initMap,s=E.initListMap,A=E.initList,t=E.cls.prototype,f=E.values,u=0,w=!A,g,h,j,G,z,y,m,r,F,v,D,B,d;f=E.needsFork?a.fork(f):a.chain(f);C.isConfiguring=true;if(w){E.initList=A=[];E.initListMap=s={};C.isFirstInstance=true;for(F in q){G=q[F];h=o[F];D=h.cached;if(G){r=h.names;v=f[F];if(!t[r.set].$isDefault||t[r.apply]||t[r.update]||typeof v==="object"){if(D){(g||(g=[])).push(h)}else{A.push(h);s[F]=true}C[r.get]=h.initGetter||h.getInitGetter()}else{t[h.getInternalName(t)]=v}}else{if(D){t[h.getInternalName(t)]=undefined}}}}m=g&&g.length;if(m){for(z=0;z<m;++z){y=g[z].getInternalName(t);C[y]=null}for(z=0;z<m;++z){r=(h=g[z]).names;j=r.get;if(C.hasOwnProperty(j)){C[r.set](f[h.name]);delete C[j]}}for(z=0;z<m;++z){y=g[z].getInternalName(t);t[y]=C[y];delete C[y]}}if(p&&p.platformConfig){p=E.resolvePlatformConfig(C,p)}if(w){if(C.afterCachedConfig&&!C.afterCachedConfig.$nullFn){C.afterCachedConfig(p)}}C.config=f;for(z=0,m=A.length;z<m;++z){h=A[z];C[h.names.get]=h.initGetter||h.getInitGetter()}if(C.transformInstanceConfig){p=C.transformInstanceConfig(p)}if(p){for(F in p){v=p[F];h=o[F];if(!h){C[F]=v}else{if(!h.lazy){++u}if(!s[F]){C[h.names.get]=h.initGetter||h.getInitGetter()}if(h.merge){v=h.merge(v,f[F],C)}else{if(v&&v.constructor===Object){B=f[F];if(B&&B.constructor===Object){v=a.merge(f[F],v)}else{v=Ext.clone(v)}}}}f[F]=v}}if(C.beforeInitConfig&&!C.beforeInitConfig.$nullFn){if(C.beforeInitConfig(p)===false){return}}if(p){for(F in p){if(!u){break}h=o[F];if(h&&!h.lazy){--u;r=h.names;j=r.get;if(C.hasOwnProperty(j)){C[r.set](f[F]);delete C[r.get]}}}}for(z=0,m=A.length;z<m;++z){h=A[z];r=h.names;j=r.get;if(!h.lazy&&C.hasOwnProperty(j)){C[r.set](f[h.name]);delete C[j]}}delete C.isConfiguring},getCurrentConfig:function(f){var d=f.defaultConfig,h={},g;for(g in d){h[g]=f[c[g].names.get]()}return h},merge:function(d,m,h){var p=this.configs,g,o,j,f;for(g in h){o=h[g];f=p[g];if(f){if(f.merge){o=f.merge(o,m[g],d)}else{if(o&&o.constructor===Object){j=m[g];if(j&&j.constructor===Object){o=Ext.Object.merge(j,o)}else{o=Ext.clone(o)}}}}m[g]=o}return m},reconfigure:function(v,q,w){var j=v.config,m=[],u=v.$configStrict&&!(w&&w.strict===false),r=this.configs,g=w&&w.defaults,p,t,h,o,f,s,d;for(f in q){if(g&&v.hasOwnProperty(f)){continue}j[f]=q[f];p=r[f];if(p){v[p.names.get]=p.initGetter||p.getInitGetter()}else{d=v.self.prototype[f];if(u){if((typeof d==="function")&&!d.$nullFn){continue}}}m.push(f)}for(h=0,o=m.length;h<o;h++){f=m[h];p=r[f];if(p){s=p.names;t=s.get;if(v.hasOwnProperty(t)){v[s.set](q[f]);delete v[t]}}else{p=c[f]||Ext.Config.get(f);s=p.names;if(v[s.set]){v[s.set](q[f])}else{v[f]=q[f]}}}},resolvePlatformConfig:function(d,o){var j=o&&o.platformConfig,f=o,g,h,m;if(j){h=Ext.getPlatformConfigKeys(j);m=h.length;if(m){f=Ext.merge({},f);for(g=0,m=h.length;g<m;++g){this.merge(d,f,j[h[g]])}}}return f}}}());Ext.Base=(function(c){var b=[],m,p=[],q=function(u,t){var w=this,s,r,v;if(u){r=Ext.Config.map[u];v=r.names.get;if(t&&w.hasOwnProperty(v)){s=w.config[u]}else{s=w[v]()}}else{s=w.getCurrentConfig()}return s},g=function(r){return function(){return this[r].apply(this,arguments)}},a=Ext.Version,j=/^\d/,o={},f={},h=function(){},d=h.prototype;Ext.apply(h,{$className:"Ext.Base",$isClass:true,create:function(){return Ext.create.apply(Ext,[this].concat(Array.prototype.slice.call(arguments,0)))},addDeprecations:function(y){var H=this,s=[],u=Ext.getCompatVersion(y.name),G,C,w,D,I,A,F,z,E,J,B,r,v,t;for(C in y){if(j.test(C)){t=new Ext.Version(C);t.deprecations=y[C];s.push(t)}}s.sort(a.compare);for(w=s.length;w--;){G=(t=s[w]).deprecations;I=H.prototype;v=G.statics;A=u&&u.lt(t);if(!A){break}while(G){E=G.methods;if(E){for(J in E){r=E[J];z=null;if(!r){}else{if(Ext.isString(r)){if(A){z=g(r)}}else{D="";if(r.message||r.fn){r=r.fn}F=I.hasOwnProperty(J)&&I[J];if(A&&r){r.$owner=H;r.$name=J;if(F){r.$previous=F}z=r}}}if(z){I[J]=z}}}G=v;v=null;I=H}}},extend:function(v){var y=this,r=v.prototype,t,u,w,s,z;t=y.prototype=Ext.Object.chain(r);t.self=y;y.superclass=t.superclass=r;if(!v.$isClass){for(u in d){if(u in t){t[u]=d[u]}}}z=r.$inheritableStatics;if(z){for(u=0,w=z.length;u<w;u++){s=z[u];if(!y.hasOwnProperty(s)){y[s]=v[s]}}}if(v.$onExtended){y.$onExtended=v.$onExtended.slice()}y.getConfigurator()},$onExtended:[],triggerExtended:function(){var t=this.$onExtended,s=t.length,r,u;if(s>0){for(r=0;r<s;r++){u=t[r];u.fn.apply(u.scope||this,arguments)}}},onExtended:function(s,r){this.$onExtended.push({fn:s,scope:r});return this},addStatics:function(r){this.addMembers(r,true);return this},addInheritableStatics:function(s){var v,r,u=this.prototype,t,w;v=u.$inheritableStatics;r=u.$hasInheritableStatics;if(!v){v=u.$inheritableStatics=[];r=u.$hasInheritableStatics={}}for(t in s){if(s.hasOwnProperty(t)){w=s[t];this[t]=w;if(!r[t]){r[t]=true;v.push(t)}}}return this},addMembers:function(v,H,s){var F=this,A=Ext.Function.clone,D=H?F:F.prototype,w=!H&&D.defaultConfig,G=Ext.enumerables,B=v.privates,C,z,E,y,r,t,u;if(B){delete v.privates;if(!H){u=B.statics;delete B.statics}F.addMembers(B,H,t);if(u){F.addMembers(u,true,t)}}for(r in v){if(v.hasOwnProperty(r)){y=v[r];if(typeof y==="function"&&!y.$isClass&&!y.$nullFn){if(y.$owner){y=A(y)}if(D.hasOwnProperty(r)){y.$previous=D[r]}y.$owner=F;y.$name=r}else{if(w&&(r in w)&&!D.config.hasOwnProperty(r)){(C||(C={}))[r]=y;continue}}D[r]=y}}if(C){F.addConfig(C)}if(G){for(z=0,E=G.length;z<E;++z){if(v.hasOwnProperty(r=G[z])){y=v[r];if(y&&!y.$nullFn){if(y.$owner){y=A(y)}y.$owner=F;y.$name=r;if(D.hasOwnProperty(r)){y.$previous=D[r]}}D[r]=y}}}return this},addMember:function(r,s){o[r]=s;this.addMembers(o);delete o[r];return this},borrow:function(y,r){var t=y.prototype,v={},u,w,s;r=Ext.Array.from(r);for(u=0,w=r.length;u<w;u++){s=r[u];v[s]=t[s]}return this.addMembers(v)},override:function(s){var u=this,y=s.statics,w=s.inheritableStatics,t=s.config,r=s.mixins,v=s.cachedConfig;if(y||w||t){s=Ext.apply({},s)}if(y){u.addMembers(y,true);delete s.statics}if(w){u.addInheritableStatics(w);delete s.inheritableStatics}if(t){u.addConfig(t);delete s.config}if(v){u.addCachedConfig(v);delete s.cachedConfig}delete s.mixins;u.addMembers(s);if(r){u.mixin(r)}return u},callParent:function(r){var s;return(s=this.callParent.caller)&&(s.$previous||((s=s.$owner?s:s.caller)&&s.$owner.superclass.self[s.$name])).apply(this,r||b)},callSuper:function(r){var s;return(s=this.callSuper.caller)&&((s=s.$owner?s:s.caller)&&s.$owner.superclass.self[s.$name]).apply(this,r||b)},mixin:function(r,s){var y=this,E,A,D,z,t,w,C,B,v;if(typeof r!=="string"){v=r;if(v instanceof Array){for(t=0,w=v.length;t<w;t++){E=v[t];y.mixin(E.prototype.mixinId||E.$className,E)}}else{for(var u in v){y.mixin(u,v[u])}}return}E=s.prototype;A=y.prototype;if(E.onClassMixedIn){E.onClassMixedIn.call(s,y)}if(!A.hasOwnProperty("mixins")){if("mixins" in A){A.mixins=Ext.Object.chain(A.mixins)}else{A.mixins={}}}for(D in E){B=E[D];if(D==="mixins"){Ext.applyIf(A.mixins,B)}else{if(!(D==="mixinId"||D==="config")&&(A[D]===undefined)){A[D]=B}}}z=E.$inheritableStatics;if(z){for(t=0,w=z.length;t<w;t++){C=z[t];if(!y.hasOwnProperty(C)){y[C]=s[C]}}}if("config" in E){y.addConfig(E.config,s)}A.mixins[r]=E;if(E.afterClassMixedIn){E.afterClassMixedIn.call(s,y)}return y},addConfig:function(s,t){var r=this.$config||this.getConfigurator();r.add(s,t)},addCachedConfig:function(r,t){var u={},s;for(s in r){u[s]={cached:true,$value:r[s]}}this.addConfig(u,t)},getConfigurator:function(){return this.$config||new Ext.Configurator(this)},getName:function(){return Ext.getClassName(this)},createAlias:c(function(s,r){f[s]=function(){return this[r].apply(this,arguments)};this.override(f);delete f[s]})});for(m in h){if(h.hasOwnProperty(m)){p.push(m)}}h.$staticMembers=p;h.getConfigurator();h.addMembers({$className:"Ext.Base",isInstance:true,$configPrefixed:true,$configStrict:true,isConfiguring:false,isFirstInstance:false,destroyed:false,statics:function(){var s=this.statics.caller,r=this.self;if(!s){return r}return s.$owner},callParent:function(s){var t,r=(t=this.callParent.caller)&&(t.$previous||((t=t.$owner?t:t.caller)&&t.$owner.superclass[t.$name]));return r.apply(this,s||b)},callSuper:function(s){var t,r=(t=this.callSuper.caller)&&((t=t.$owner?t:t.caller)&&t.$owner.superclass[t.$name]);return r.apply(this,s||b)},self:h,constructor:function(){return this},getConfigurator:function(){return this.$config||this.self.getConfigurator()},initConfig:function(t){var s=this,r=s.getConfigurator();s.initConfig=Ext.emptyFn;s.initialConfig=t||{};r.configure(s,t);return s},beforeInitConfig:Ext.emptyFn,getConfig:q,setConfig:function(t,v,s){var u=this,r;if(t){if(typeof t==="string"){r={};r[t]=v}else{r=t}u.getConfigurator().reconfigure(u,r,s)}return u},getCurrentConfig:function(){var r=this.getConfigurator();return r.getCurrentConfig(this)},hasConfig:function(r){return r in this.defaultConfig},getInitialConfig:function(s){var r=this.config;if(!s){return r}return r[s]},$links:null,link:function(s,u){var t=this,r=t.$links||(t.$links={});r[s]=true;t[s]=u;return u},unlink:function(w){var u=this,r,t,s,v;for(r=0,t=w.length;r<t;r++){s=w[r];v=u[s];if(v){if(v.isInstance&&!v.destroyed){v.destroy()}else{if(v.parentNode&&"nodeType" in v){v.parentNode.removeChild(v)}}}u[s]=null}return u},destroy:function(){var s=this,r=s.$links;s.initialConfig=s.config=null;s.destroy=Ext.emptyFn;s.isDestroyed=s.destroyed=true;if(r){s.$links=null;s.unlink(Ext.Object.getKeys(r))}}});d.callOverridden=d.callParent;return h}(Ext.Function.flexSetter));(function(b,a){(Ext.util||(Ext.util={})).Cache=b=function(c){var f=this,d;if(c){Ext.apply(f,c)}f.head=d={key:null,value:null};f.map={};d.next=d.prev=d};b.prototype=a={maxSize:100,count:0,clear:function(){var f=this,c=f.head,d=c.next;c.next=c.prev=c;if(!f.evict.$nullFn){for(;d!==c;d=d.next){f.evict(d.key,d.value)}}f.count=0},each:function(f,d){d=d||this;for(var c=this.head,g=c.next;g!==c;g=g.next){if(f.call(d,g.key,g.value)){break}}},get:function(d){var g=this,c=g.head,h=g.map,f=h[d];if(f){if(f.prev!==c){g.unlinkEntry(f);g.linkEntry(f)}}else{h[d]=f={key:d,value:g.miss.apply(g,arguments)};g.linkEntry(f);++g.count;while(g.count>g.maxSize){g.unlinkEntry(c.prev,true);--g.count}}return f.value},evict:Ext.emptyFn,linkEntry:function(d){var c=this.head,f=c.next;d.next=f;d.prev=c;c.next=d;f.prev=d},unlinkEntry:function(f,g){var c=f.next,d=f.prev;d.next=c;c.prev=d;if(g){this.evict(f.key,f.value)}}};a.destroy=a.clear}());(function(){var d,c=Ext.Base,f=c.$staticMembers,b=function(h,g){return(h.length-g.length)||((h<g)?-1:((h>g)?1:0))};function a(h){function g(){return this.constructor.apply(this,arguments)||null}return g}Ext.Class=d=function(h,j,g){if(typeof h!="function"){g=j;j=h;h=null}if(!j){j={}}h=d.create(h,j);d.process(h,j,g);return h};Ext.apply(d,{makeCtor:a,onBeforeCreated:function(h,j,g){h.addMembers(j);g.onCreated.call(h,h)},create:function(g,m){var j=f.length,h;if(!g){g=a()}while(j--){h=f[j];g[h]=c[h]}return g},process:function(g,r,m){var h=r.preprocessors||d.defaultPreprocessors,u=this.preprocessors,y={onBeforeCreated:this.onBeforeCreated},w=[],z,q,p,v,o,t,s;delete r.preprocessors;g._classHooks=y;for(p=0,v=h.length;p<v;p++){z=h[p];if(typeof z=="string"){z=u[z];q=z.properties;if(q===true){w.push(z.fn)}else{if(q){for(o=0,t=q.length;o<t;o++){s=q[o];if(r.hasOwnProperty(s)){w.push(z.fn);break}}}}}else{w.push(z)}}y.onCreated=m?m:Ext.emptyFn;y.preprocessors=w;this.doProcess(g,r,y)},doProcess:function(h,p,g){var o=this,q=g.preprocessors,j=q.shift(),m=o.doProcess;for(;j;j=q.shift()){if(j.call(o,h,p,g,m)===false){return}}g.onBeforeCreated.apply(o,arguments)},preprocessors:{},registerPreprocessor:function(h,o,j,g,m){if(!g){g="last"}if(!j){j=[h]}this.preprocessors[h]={name:h,properties:j||false,fn:o};this.setDefaultPreprocessorPosition(h,g,m);return this},getPreprocessor:function(g){return this.preprocessors[g]},getPreprocessors:function(){return this.preprocessors},defaultPreprocessors:[],getDefaultPreprocessors:function(){return this.defaultPreprocessors},setDefaultPreprocessors:function(g){this.defaultPreprocessors=Ext.Array.from(g);return this},setDefaultPreprocessorPosition:function(j,o,m){var g=this.defaultPreprocessors,h;if(typeof o=="string"){if(o==="first"){g.unshift(j);return this}else{if(o==="last"){g.push(j);return this}}o=(o==="after")?1:-1}h=Ext.Array.indexOf(g,m);if(h!==-1){Ext.Array.splice(g,Math.max(0,h+o),0,j)}return this}});d.registerPreprocessor("extend",function(h,m,s){var o=Ext.Base,p=o.prototype,q=m.extend,g,r,j;delete m.extend;if(q&&q!==Object){g=q}else{g=o}r=g.prototype;if(!g.$isClass){for(j in p){if(!r[j]){r[j]=p[j]}}}h.extend(g);h.triggerExtended.apply(h,arguments);if(m.onClassExtended){h.onExtended(m.onClassExtended,h);delete m.onClassExtended}},true);d.registerPreprocessor("privates",function(g,m){var j=m.privates,o=j.statics,h=j.privacy||true;delete m.privates;delete j.statics;g.addMembers(j,false,h);if(o){g.addMembers(o,true,h)}});d.registerPreprocessor("statics",function(g,h){g.addStatics(h.statics);delete h.statics});d.registerPreprocessor("inheritableStatics",function(g,h){g.addInheritableStatics(h.inheritableStatics);delete h.inheritableStatics});Ext.createRuleFn=function(g){return new Function("$c","with($c) { return ("+g+"); }")};Ext.expressionCache=new Ext.util.Cache({miss:Ext.createRuleFn});Ext.ruleKeySortFn=b;Ext.getPlatformConfigKeys=function(j){var h=[],g,m;for(g in j){m=Ext.expressionCache.get(g);if(m(Ext.platformTags)){h.push(g)}}h.sort(b);return h};d.registerPreprocessor("platformConfig",function(j,q,y){var r=q.platformConfig,m=q.config,v,s,t,o,h,z,g,w,p,u;delete q.platformConfig;o=j.getConfigurator();s=o.configs;z=Ext.getPlatformConfigKeys(r);for(p=0,u=z.length;p<u;++p){t=r[z[p]];h=v=null;for(g in t){w=t[g];if(m&&g in m){(v||(v={}))[g]=w;(h||(h={}))[g]=m[g];delete m[g]}else{if(g in s){(v||(v={}))[g]=w}else{q[g]=w}}}if(h){o.add(h)}if(v){o.add(v)}}});d.registerPreprocessor("config",function(g,h){if(h.hasOwnProperty("$configPrefixed")){g.prototype.$configPrefixed=h.$configPrefixed}g.addConfig(h.config);delete h.config});d.registerPreprocessor("cachedConfig",function(g,h){if(h.hasOwnProperty("$configPrefixed")){g.prototype.$configPrefixed=h.$configPrefixed}g.addCachedConfig(h.cachedConfig);delete h.cachedConfig});d.registerPreprocessor("mixins",function(m,o,g){var j=o.mixins,h=g.onCreated;delete o.mixins;g.onCreated=function(){g.onCreated=h;m.mixin(j);return g.onCreated.apply(this,arguments)}});Ext.extend=function(j,m,h){if(arguments.length===2&&Ext.isObject(m)){h=m;m=j;j=null}var g;if(!m){throw new Error("[Ext.extend] Attempting to extend from a class which has not been loaded on the page.")}h.extend=m;h.preprocessors=["extend","statics","inheritableStatics","mixins","platformConfig","config"];if(j){g=new d(j,h);g.prototype.constructor=j}else{g=new d(h)}g.prototype.override=function(q){for(var p in q){if(q.hasOwnProperty(p)){this[p]=q[p]}}};return g}}());Ext.Inventory=function(){var a=this;a.names=[];a.paths={};a.alternateToName={};a.aliasToName={};a.nameToAliases={};a.nameToAlternates={}};Ext.Inventory.prototype={_array1:[0],prefixes:null,dotRe:/\./g,wildcardRe:/\*/g,addAlias:function(b,a,c){return this.addMapping(b,a,this.aliasToName,this.nameToAliases,c)},addAlternate:function(a,b){return this.addMapping(a,b,this.alternateToName,this.nameToAlternates)},addMapping:function(p,f,g,s,h){var b=p.$className||p,m=b,o=this._array1,r,d,t,j,c,q;if(Ext.isString(b)){m={};m[b]=f}for(t in m){d=m[t];if(Ext.isString(d)){o[0]=d;d=o}c=d.length;q=s[t]||(s[t]=[]);for(j=0;j<c;++j){if(!(r=d[j])){continue}if(g[r]!==t){g[r]=t;q.push(r)}}}},getAliasesByName:function(a){return this.nameToAliases[a]||null},getAlternatesByName:function(a){return this.nameToAlternates[a]||null},getNameByAlias:function(a){return this.aliasToName[a]||""},getNameByAlternate:function(a){return this.alternateToName[a]||""},getNamesByExpression:function(p,a,j){var y=this,u=y.aliasToName,r=y.alternateToName,b=y.nameToAliases,d=y.nameToAlternates,w=j?a:{},o=[],v=Ext.isString(p)?[p]:p,h=v.length,f=y.wildcardRe,c,s,t,m,q,z,g;for(s=0;s<h;++s){if((c=v[s]).indexOf("*")<0){if(!(z=u[c])){if(!(z=r[c])){z=c}}if(!(z in w)&&!(a&&(z in a))){w[z]=1;o.push(z)}}else{g=new RegExp("^"+c.replace(f,"(.*?)")+"$");for(z in b){if(!(z in w)&&!(a&&(z in a))){if(!(m=g.test(z))){q=(t=b[z]).length;while(!m&&q-->0){m=g.test(t[q])}t=d[z];if(t&&!m){q=t.length;while(!m&&q-->0){m=g.test(t[q])}}}if(m){w[z]=1;o.push(z)}}}}}return o},getPath:function(b){var c=this,f=c.paths,a="",d;if(b in f){a=f[b]}else{d=c.getPrefix(b);if(d){b=b.substring(d.length+1);a=f[d];if(a){a+="/"}}a+=b.replace(c.dotRe,"/")+".js"}return a},getPrefix:function(b){if(b in this.paths){return b}var f=this.getPrefixes(),a=f.length,c,d;while(a-->0){c=(d=f[a]).length;if(c<b.length&&b.charAt(c)==="."&&d===b.substring(0,c)){return d}}return""},getPrefixes:function(){var a=this,b=a.prefixes;if(!b){a.prefixes=b=a.names.slice(0);b.sort(a._compareNames)}return b},removeName:function(b){var g=this,m=g.aliasToName,p=g.alternateToName,o=g.nameToAliases,f=g.nameToAlternates,c=o[b],h=f[b],d,j;delete o[b];delete f[b];if(c){for(d=c.length;d--;){if(b===(j=c[d])){delete m[j]}}}if(h){for(d=h.length;d--;){if(b===(j=h[d])){delete p[j]}}}},resolveName:function(a){var b=this,c;if(!(a in b.nameToAliases)){if(!(c=b.aliasToName[a])){c=b.alternateToName[a]}}return c||a},select:function(f,c){var d=this,g={},b={excludes:g,exclude:function(){d.getNamesByExpression(arguments,g,true);return this}},a;for(a in f){b[a]=d.selectMethod(g,f[a],c||f)}return b},selectMethod:function(d,b,a){var c=this;return function(f){var g=Ext.Array.slice(arguments,1);g.unshift(c.getNamesByExpression(f,d));return b.apply(a,g)}},setPath:Ext.Function.flexSetter(function(a,c){var b=this;b.paths[a]=c;b.names.push(a);b.prefixes=null;return b}),_compareNames:function(a,c){var b=a.length-c.length;if(!b){b=(a<c)?-1:1}return b}};Ext.ClassManager=(function(u,p,w,f,s){var b=Ext.Class.makeCtor,h=[],j={Ext:{name:"Ext",value:Ext}},c=Ext.apply(new Ext.Inventory(),{classes:{},classState:{},existCache:{},instantiators:[],isCreated:function(z){if(c.classes[z]||c.existCache[z]){return true}if(!c.lookupName(z,false)){return false}c.triggerCreated(z);return true},createdListeners:[],nameCreatedListeners:{},existsListeners:[],nameExistsListeners:{},overrideMap:{},triggerCreated:function(z,A){c.existCache[z]=A||1;c.classState[z]+=40;c.notify(z,c.createdListeners,c.nameCreatedListeners)},onCreated:function(B,A,z){c.addListener(B,A,z,c.createdListeners,c.nameCreatedListeners)},notify:function(H,J,B){var C=c.getAlternatesByName(H),I=[H],E,G,D,F,A,z;for(E=0,G=J.length;E<G;E++){A=J[E];A.fn.call(A.scope,H)}while(I){for(E=0,G=I.length;E<G;E++){z=I[E];J=B[z];if(J){for(D=0,F=J.length;D<F;D++){A=J[D];A.fn.call(A.scope,z)}delete B[z]}}I=C;C=null}},addListener:function(E,D,C,B,A){if(Ext.isArray(C)){E=Ext.Function.createBarrier(C.length,E,D);for(z=0;z<C.length;z++){this.addListener(E,null,C[z],B,A)}return}var z,F={fn:E,scope:D};if(C){if(this.isCreated(C)){E.call(D,C);return}if(!A[C]){A[C]=[]}A[C].push(F)}else{B.push(F)}},$namespaceCache:j,addRootNamespaces:function(A){for(var z in A){j[z]={name:z,value:A[z]}}},clearNamespaceCache:function(){h.length=0;for(var z in j){if(!j[z].value){delete j[z]}}},getNamespaceEntry:function(A){if(typeof A!=="string"){return A}var B=j[A],z;if(!B){z=A.lastIndexOf(".");if(z<0){B={name:A}}else{B={name:A.substring(z+1),parent:c.getNamespaceEntry(A.substring(0,z))}}j[A]=B}return B},lookupName:function(C,E){var D=c.getNamespaceEntry(C),B=Ext.global,z=0,F,A;for(F=D;F;F=F.parent){h[z++]=F}while(B&&z-->0){F=h[z];A=B;B=F.value||B[F.name];if(!B&&E){A[F.name]=B={}}}return B},setNamespace:function(A,C){var B=c.getNamespaceEntry(A),z=Ext.global;if(B.parent){z=c.lookupName(B.parent,true)}z[B.name]=C;return C},setXType:function(z,H){var B=z.$className,G=B?z:c.get(B=z),D=G.prototype,E=D.xtypes,A=D.xtypesChain,F=D.xtypesMap;if(!D.hasOwnProperty("xtypes")){D.xtypes=E=[];D.xtypesChain=A=A?A.slice(0):[];D.xtypesMap=F=Ext.apply({},F)}c.addAlias(B,"widget."+H,true);E.push(H);A.push(H);F[H]=true},set:function(z,B){var A=c.getName(B);c.classes[z]=c.setNamespace(z,B);if(A&&A!==z){c.addAlternate(A,z)}return c},get:function(z){return c.classes[z]||c.lookupName(z,false)},addNameAliasMappings:function(z){c.addAlias(z)},addNameAlternateMappings:function(z){c.addAlternate(z)},getByAlias:function(z){return c.get(c.getNameByAlias(z))},getByConfig:function(A,B){var C=A.xclass,z;if(C){z=C}else{z=A.xtype;if(z){B="widget."}else{z=A.type}z=c.getNameByAlias(B+z)}return c.get(z)},getName:function(z){return z&&z.$className||""},getClass:function(z){return z&&z.self||null},create:function(A,C,z){var B=b(A);if(typeof C==="function"){C=C(B)}C.$className=A;return new u(B,C,function(){var D=C.postprocessors||c.defaultPostprocessors,K=c.postprocessors,L=[],J,F,I,E,H,G,M;delete C.postprocessors;for(F=0,I=D.length;F<I;F++){J=D[F];if(typeof J==="string"){J=K[J];G=J.properties;if(G===true){L.push(J.fn)}else{if(G){for(E=0,H=G.length;E<H;E++){M=G[E];if(C.hasOwnProperty(M)){L.push(J.fn);break}}}}}else{L.push(J)}}C.postprocessors=L;C.createdFn=z;c.processCreate(A,this,C)})},processCreate:function(C,A,E){var D=this,z=E.postprocessors.shift(),B=E.createdFn;if(!z){if(C){D.set(C,A)}delete A._classHooks;if(B){B.call(A,A)}if(C){D.triggerCreated(C)}return}if(z.call(D,C,A,E,D.processCreate)!==false){D.processCreate(C,A,E)}},createOverride:function(F,D,B){var H=this,I=D.override,K=D.requires,C=D.uses,E=D.mixins,z,J=1,G,A=function(){var L,P,O,N,M;if(!G){P=K?K.slice(0):[];if(E){if(!(z=E instanceof Array)){for(N in E){if(Ext.isString(L=E[N])){P.push(L)}}}else{for(O=0,M=E.length;O<M;++O){if(Ext.isString(L=E[O])){P.push(L)}}}}G=true;if(P.length){Ext.require(P,A);return}}if(z){for(O=0,M=E.length;O<M;++O){if(Ext.isString(L=E[O])){E[O]=Ext.ClassManager.get(L)}}}else{if(E){for(N in E){if(Ext.isString(L=E[N])){E[N]=Ext.ClassManager.get(L)}}}}L=H.get(I);delete D.override;delete D.compatibility;delete D.requires;delete D.uses;Ext.override(L,D);Ext.Loader.history.push(F);if(C){Ext.Loader.addUsedClasses(C)}if(B){B.call(L,L)}};c.overrideMap[F]=true;if("compatibility" in D&&Ext.isString(J=D.compatibility)){J=Ext.checkVersion(J)}if(J){H.onCreated(A,H,I)}H.triggerCreated(F,2);return H},instantiateByAlias:function(){var A=arguments[0],z=w.call(arguments),B=this.getNameByAlias(A);z[0]=B;return Ext.create.apply(Ext,z)},instantiate:function(){return Ext.create.apply(Ext,arguments)},dynInstantiate:function(A,z){z=f(z,true);z.unshift(A);return Ext.create.apply(Ext,z)},getInstantiator:function(C){var B=this.instantiators,D,A,z;D=B[C];if(!D){A=C;z=[];for(A=0;A<C;A++){z.push("a["+A+"]")}D=B[C]=new Function("c","a","return new c("+z.join(",")+")")}return D},postprocessors:{},defaultPostprocessors:[],registerPostprocessor:function(A,D,B,z,C){if(!z){z="last"}if(!B){B=[A]}this.postprocessors[A]={name:A,properties:B||false,fn:D};this.setDefaultPostprocessorPosition(A,z,C);return this},setDefaultPostprocessors:function(z){this.defaultPostprocessors=f(z);return this},setDefaultPostprocessorPosition:function(A,D,C){var B=this.defaultPostprocessors,z;if(typeof D==="string"){if(D==="first"){B.unshift(A);return this}else{if(D==="last"){B.push(A);return this}}D=(D==="after")?1:-1}z=Ext.Array.indexOf(B,C);if(z!==-1){Ext.Array.splice(B,Math.max(0,z+D),0,A)}return this}});c.registerPostprocessor("alias",function(B,A,E){var z=Ext.Array.from(E.alias),C,D;for(C=0,D=z.length;C<D;C++){p=z[C];this.addAlias(A,p)}},["xtype","alias"]);c.registerPostprocessor("singleton",function(A,z,C,B){if(C.singleton){B.call(this,A,new z(),C)}else{return true}return false});c.registerPostprocessor("alternateClassName",function(A,z,E){var C=E.alternateClassName,B,D,F;if(!(C instanceof Array)){C=[C]}for(B=0,D=C.length;B<D;B++){F=C[B];this.set(F,z)}});c.registerPostprocessor("debugHooks",function(A,z,B){var C=z.isInstance?z.self:z;delete C.prototype.debugHooks});c.registerPostprocessor("deprecated",function(A,z,B){var C=z.isInstance?z.self:z;C.addDeprecations(B.deprecated);delete C.prototype.deprecated});Ext.apply(Ext,{create:function(){var B=arguments[0],C=typeof B,A=w.call(arguments,1),z;if(C==="function"){z=B}else{if(C!=="string"&&A.length===0){A=[B];if(!(B=B.xclass)){B=A[0].xtype;if(B){B="widget."+B}}}B=c.resolveName(B);z=c.get(B)}if(!z){Ext.syncRequire(B);z=c.get(B)}return c.getInstantiator(A.length)(z,A)},widget:function(B,A){var E=B,C,D,z;if(typeof E!=="string"){A=B;E=A.xtype;D=A.xclass}else{A=A||{}}if(A.isComponent){return A}if(!D){C="widget."+E;D=c.getNameByAlias(C)}if(D){z=c.get(D)}if(!z){return Ext.create(D||C,A)}return new z(A)},createByAlias:p(c,"instantiateByAlias"),define:function(A,B,z){if(B.override){c.classState[A]=20;return c.createOverride.apply(c,arguments)}c.classState[A]=10;return c.create.apply(c,arguments)},undefine:function(B){var z=c.classes;delete z[B];delete c.existCache[B];delete c.classState[B];c.removeName(B);var C=c.getNamespaceEntry(B),A=C.parent?c.lookupName(C.parent,false):Ext.global;if(A){try{delete A[C.name]}catch(D){A[C.name]=undefined}}},getClassName:p(c,"getName"),getDisplayName:function(z){if(z){if(z.displayName){return z.displayName}if(z.$name&&z.$class){return Ext.getClassName(z.$class)+"#"+z.$name}if(z.$className){return z.$className}}return"Anonymous"},getClass:p(c,"getClass"),namespace:function(){var z=s,A;for(A=arguments.length;A-->0;){z=c.lookupName(arguments[A],true)}return z}});Ext.addRootNamespaces=c.addRootNamespaces;Ext.createWidget=Ext.widget;Ext.ns=Ext.namespace;u.registerPreprocessor("className",function(z,A){if("$className" in A){z.$className=A.$className}},true,"first");u.registerPreprocessor("alias",function(K,E){var I=K.prototype,B=f(E.xtype),z=f(E.alias),L="widget.",J=L.length,F=Array.prototype.slice.call(I.xtypesChain||[]),C=Ext.merge({},I.xtypesMap||{}),D,H,G,A;for(D=0,H=z.length;D<H;D++){G=z[D];if(G.substring(0,J)===L){A=G.substring(J);Ext.Array.include(B,A)}}K.xtype=E.xtype=B[0];E.xtypes=B;for(D=0,H=B.length;D<H;D++){A=B[D];if(!C[A]){C[A]=true;F.push(A)}}E.xtypesChain=F;E.xtypesMap=C;Ext.Function.interceptAfter(E,"onClassCreated",function(){var M=I.mixins,O,N;for(O in M){if(M.hasOwnProperty(O)){N=M[O];B=N.xtypes;if(B){for(D=0,H=B.length;D<H;D++){A=B[D];if(!C[A]){C[A]=true;F.push(A)}}}}}});for(D=0,H=B.length;D<H;D++){A=B[D];Ext.Array.include(z,L+A)}E.alias=z},["xtype","alias"]);if(Ext.manifest){var g=Ext.manifest,v=g.classes,r=g.paths,t={},m={},d,o,y,q,a;if(r){if(g.bootRelative){a=Ext.Boot.baseUrl;for(q in r){if(r.hasOwnProperty(q)){r[q]=a+r[q]}}}c.setPath(r)}if(v){for(d in v){m[d]=[];t[d]=[];o=v[d];if(o.alias){t[d]=o.alias}if(o.alternates){m[d]=o.alternates}}}c.addAlias(t);c.addAlternate(m)}return c}(Ext.Class,Ext.Function.alias,Array.prototype.slice,Ext.Array.from,Ext.global));(Ext.env||(Ext.env={})).Browser=function(y,r){var z=this,a=Ext.Boot.browserPrefixes,c=Ext.Boot.browserNames,b=z.enginePrefixes,m=z.engineNames,u=y.match(new RegExp("((?:"+Ext.Object.getValues(a).join(")|(?:")+"))([\\w\\._]+)")),h=y.match(new RegExp("((?:"+Ext.Object.getValues(b).join(")|(?:")+"))([\\w\\._]+)")),t=c.other,w=m.other,p="",g="",d="",j=false,s,q,o,A,v;z.userAgent=y;if(/Edge\//.test(y)){u=y.match(/(Edge\/)([\w.]+)/)}if(u){t=c[Ext.Object.getKey(a,u[1])];if(t==="Safari"&&/^Opera/.test(y)){t="Opera"}p=new Ext.Version(u[2])}if(h){w=m[Ext.Object.getKey(b,h[1])];g=new Ext.Version(h[2])}if(w==="Trident"&&t!=="IE"){t="IE";var f=y.match(/.*rv:(\d+.\d+)/);if(f&&f.length){f=f[1];p=new Ext.Version(f)}}if(t&&p){Ext.setVersion(t,p)}if(y.match(/FB/)&&t==="Other"){t=c.safari;w=m.webkit}if(y.match(/Android.*Chrome/g)){t="ChromeMobile"}if(y.match(/OPR/)){t="Opera";u=y.match(/OPR\/(\d+.\d+)/);p=new Ext.Version(u[1])}Ext.apply(this,{engineName:w,engineVersion:g,name:t,version:p});this.setFlag(t,true,r);if(p){d=p.getMajor()||"";if(z.is.IE){d=parseInt(d,10);o=document.documentMode;if(o===7||(d===7&&o!==8&&o!==9&&o!==10)){d=7}else{if(o===8||(d===8&&o!==8&&o!==9&&o!==10)){d=8}else{if(o===9||(d===9&&o!==7&&o!==8&&o!==10)){d=9}else{if(o===10||(d===10&&o!==7&&o!==8&&o!==9)){d=10}else{if(o===11||(d===11&&o!==7&&o!==8&&o!==9&&o!==10)){d=11}}}}}v=Math.max(d,Ext.Boot.maxIEVersion);for(s=7;s<=v;++s){q="isIE"+s;if(d<=s){Ext[q+"m"]=true}if(d===s){Ext[q]=true}if(d>=s){Ext[q+"p"]=true}}}if(z.is.Opera&&parseInt(d,10)<=12){Ext.isOpera12m=true}Ext.chromeVersion=Ext.isChrome?d:0;Ext.firefoxVersion=Ext.isFirefox?d:0;Ext.ieVersion=Ext.isIE?d:0;Ext.operaVersion=Ext.isOpera?d:0;Ext.safariVersion=Ext.isSafari?d:0;Ext.webKitVersion=Ext.isWebKit?d:0;this.setFlag(t+d,true,r);this.setFlag(t+p.getShortVersion())}for(s in c){if(c.hasOwnProperty(s)){A=c[s];this.setFlag(A,t===A)}}this.setFlag(A);if(g){this.setFlag(w+(g.getMajor()||""));this.setFlag(w+g.getShortVersion())}for(s in m){if(m.hasOwnProperty(s)){A=m[s];this.setFlag(A,w===A,r)}}this.setFlag("Standalone",!!navigator.standalone);this.setFlag("Ripple",!!document.getElementById("tinyhippos-injected")&&!Ext.isEmpty(window.top.ripple));this.setFlag("WebWorks",!!window.blackberry);if(window.PhoneGap!==undefined||window.Cordova!==undefined||window.cordova!==undefined){j=true;this.setFlag("PhoneGap");this.setFlag("Cordova")}if(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(y)){j=true}this.setFlag("WebView",j);this.isStrict=Ext.isStrict=document.compatMode==="CSS1Compat";this.isSecure=Ext.isSecure;this.identity=t+d+(this.isStrict?"Strict":"Quirks")};Ext.env.Browser.prototype={constructor:Ext.env.Browser,engineNames:{webkit:"WebKit",gecko:"Gecko",presto:"Presto",trident:"Trident",other:"Other"},enginePrefixes:{webkit:"AppleWebKit/",gecko:"Gecko/",presto:"Presto/",trident:"Trident/"},styleDashPrefixes:{WebKit:"-webkit-",Gecko:"-moz-",Trident:"-ms-",Presto:"-o-",Other:""},stylePrefixes:{WebKit:"Webkit",Gecko:"Moz",Trident:"ms",Presto:"O",Other:""},propertyPrefixes:{WebKit:"webkit",Gecko:"moz",Trident:"ms",Presto:"o",Other:""},is:function(a){return !!this.is[a]},name:null,version:null,engineName:null,engineVersion:null,setFlag:function(a,c,b){if(c===undefined){c=true}this.is[a]=c;this.is[a.toLowerCase()]=c;if(b){Ext["is"+a]=c}return this},getStyleDashPrefix:function(){return this.styleDashPrefixes[this.engineName]},getStylePrefix:function(){return this.stylePrefixes[this.engineName]},getVendorProperyName:function(a){var b=this.propertyPrefixes[this.engineName];if(b.length>0){return b+Ext.String.capitalize(a)}return a},getPreferredTranslationMethod:function(a){if(typeof a==="object"&&"translationMethod" in a&&a.translationMethod!=="auto"){return a.translationMethod}else{return"csstransform"}}};(function(a){Ext.browser=new Ext.env.Browser(a,true);Ext.userAgent=a.toLowerCase();Ext.SSL_SECURE_URL=Ext.isSecure&&Ext.isIE?"javascript:''":"about:blank"}(Ext.global.navigator.userAgent));Ext.env.OS=function(s,b,p){var o=this,m=Ext.Boot.osNames,d=Ext.Boot.osPrefixes,a,j="",g=o.is,c,h,f,r,q;p=p||Ext.browser;for(c in d){if(d.hasOwnProperty(c)){h=d[c];f=s.match(new RegExp("(?:"+h+")([^\\s;]+)"));if(f){a=m[c];q=f[1];if(q&&q==="HTC_"){j=new Ext.Version("2.3")}else{if(q&&q==="Silk/"){j=new Ext.Version("2.3")}else{j=new Ext.Version(f[f.length-1])}}break}}}if(!a){a=m[(s.toLowerCase().match(/mac|win|linux/)||["other"])[0]];j=new Ext.Version("")}this.name=a;this.version=j;if(b){this.setFlag(b.replace(/ simulator$/i,""))}this.setFlag(a);if(j){this.setFlag(a+(j.getMajor()||""));this.setFlag(a+j.getShortVersion())}for(c in m){if(m.hasOwnProperty(c)){r=m[c];if(!g.hasOwnProperty(a)){this.setFlag(r,(a===r))}}}if(this.name==="iOS"&&window.screen.height===568){this.setFlag("iPhone5")}if(p.is.Safari||p.is.Silk){if(this.is.Android2||this.is.Android3||p.version.shortVersion===501){p.setFlag("AndroidStock")}if(this.is.Android4){p.setFlag("AndroidStock");p.setFlag("AndroidStock4")}}};Ext.env.OS.prototype={constructor:Ext.env.OS,is:function(a){return !!this[a]},name:null,version:null,setFlag:function(a,b){if(b===undefined){b=true}if(this.flags){this.flags[a]=b}this.is[a]=b;this.is[a.toLowerCase()]=b;return this}};(function(){var a=Ext.global.navigator,h=a.userAgent,g=Ext.env.OS,f=(Ext.is||(Ext.is={})),j,d,b;g.prototype.flags=f;Ext.os=j=new g(h,a.platform);d=j.name;Ext["is"+d]=true;Ext.isMac=f.Mac=f.MacOS;var m=window.location.search.match(/deviceType=(Tablet|Phone)/),c=window.deviceType;if(m&&m[1]){b=m[1]}else{if(c==="iPhone"){b="Phone"}else{if(c==="iPad"){b="Tablet"}else{if(!j.is.Android&&!j.is.iOS&&!j.is.WindowsPhone&&/Windows|Linux|MacOS/.test(d)){b="Desktop";Ext.browser.is.WebView=!!Ext.browser.is.Ripple}else{if(j.is.iPad||j.is.RIMTablet||j.is.Android3||Ext.browser.is.Silk||(j.is.Android&&h.search(/mobile/i)===-1)){b="Tablet"}else{b="Phone"}}}}}j.setFlag(b,true);j.deviceType=b;delete g.prototype.flags}());Ext.feature={has:function(a){return !!this.has[a]},testElements:{},getTestElement:function(a,b){if(a===undefined){a="div"}else{if(typeof a!=="string"){return a}}if(b){return document.createElement(a)}if(!this.testElements[a]){this.testElements[a]=document.createElement(a)}return this.testElements[a]},isStyleSupported:function(c,b){var d=this.getTestElement(b).style,a=Ext.String.capitalize(c);if(typeof d[c]!=="undefined"||typeof d[Ext.browser.getStylePrefix(c)+a]!=="undefined"){return true}return false},isStyleSupportedWithoutPrefix:function(b,a){var c=this.getTestElement(a).style;if(typeof c[b]!=="undefined"){return true}return false},isEventSupported:function(c,a){if(a===undefined){a=window}var f=this.getTestElement(a),b="on"+c.toLowerCase(),d=(b in f);if(!d){if(f.setAttribute&&f.removeAttribute){f.setAttribute(b,"");d=typeof f[b]==="function";if(typeof f[b]!=="undefined"){f[b]=undefined}f.removeAttribute(b)}}return d},getStyle:function(c,b){var a=c.ownerDocument.defaultView,d=(a?a.getComputedStyle(c,null):c.currentStyle);return(d||c.style)[b]},getSupportedPropertyName:function(b,a){var c=Ext.browser.getVendorProperyName(a);if(c in b){return c}else{if(a in b){return a}}return null},detect:function(m){var o=this,q=document,g=o.toRun||o.tests,f=g.length,b=q.createElement("div"),c=[],s=Ext.supports,r=o.has,a,j,h,d,p;b.innerHTML='<div style="height:30px;width:50px;"><div style="height:20px;width:20px;"></div></div><div style="width: 200px; height: 200px; position: relative; padding: 5px;"><div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div></div><div style="position: absolute; left: 10%; top: 10%;"></div><div style="float:left; background-color:transparent;"></div>';if(m){q.body.appendChild(b)}d=o.preDetected[Ext.browser.identity]||[];while(f--){h=g[f];p=d[f];a=h.name;j=h.names;if(p===undefined){if(!m&&h.ready){c.push(h);continue}p=h.fn.call(o,q,b)}if(a){s[a]=r[a]=p}else{if(j){while(j.length){a=j.pop();s[a]=r[a]=p}}}}if(m){q.body.removeChild(b)}o.toRun=c},report:function(){var b=[],a=this.tests.length,c;for(c=0;c<a;++c){b.push(this.has[this.tests[c].name]?1:0)}Ext.log(Ext.browser.identity+": ["+b.join(",")+"]")},preDetected:{},tests:[{name:"CloneNodeCopiesExpando",fn:function(){var a=document.createElement("div");a.expandoProp={};return a.cloneNode().expandoProp===a.expandoProp}},{name:"CSSPointerEvents",fn:function(a){return"pointerEvents" in a.documentElement.style}},{name:"CSS3BoxShadow",fn:function(a){return"boxShadow" in a.documentElement.style||"WebkitBoxShadow" in a.documentElement.style||"MozBoxShadow" in a.documentElement.style}},{name:"CSS3NegationSelector",fn:function(b){try{b.querySelectorAll("foo:not(bar)")}catch(a){return false}return true}},{name:"ClassList",fn:function(a){return !!a.documentElement.classList}},{name:"Canvas",fn:function(){var a=this.getTestElement("canvas");return !!(a&&a.getContext&&a.getContext("2d"))}},{name:"Svg",fn:function(a){return !!(a.createElementNS&&!!a.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)}},{name:"Vml",fn:function(){var b=this.getTestElement(),a=false;b.innerHTML="<!--[if vml]><br><![endif]-->";a=(b.childNodes.length===1);b.innerHTML="";return a}},{name:"touchScroll",fn:function(){var a=0;if(Ext.os.is.Desktop&&(navigator.maxTouchPoints||navigator.msMaxTouchPoints)){a=1}else{if(Ext.supports.Touch){a=2}}return a}},{name:"Touch",fn:function(){var a=navigator.msMaxTouchPoints||navigator.maxTouchPoints;if(Ext.browser.is.Chrome&&Ext.browser.version.isLessThanOrEqual(39)){return(Ext.supports.TouchEvents&&a!==1)||a>1}else{return Ext.supports.TouchEvents||a>0}}},{name:"TouchEvents",fn:function(){return this.isEventSupported("touchend")}},{name:"PointerEvents",fn:function(){return navigator.pointerEnabled}},{name:"MSPointerEvents",fn:function(){return navigator.msPointerEnabled}},{name:"Orientation",fn:function(){return("orientation" in window)&&this.isEventSupported("orientationchange")}},{name:"OrientationChange",fn:function(){return this.isEventSupported("orientationchange")}},{name:"DeviceMotion",fn:function(){return this.isEventSupported("devicemotion")}},{names:["Geolocation","GeoLocation"],fn:function(){return"geolocation" in window.navigator}},{name:"SqlDatabase",fn:function(){return"openDatabase" in window}},{name:"WebSockets",fn:function(){return"WebSocket" in window}},{name:"Range",fn:function(){return !!document.createRange}},{name:"CreateContextualFragment",fn:function(){var a=!!document.createRange?document.createRange():false;return a&&!!a.createContextualFragment}},{name:"History",fn:function(){return("history" in window&&"pushState" in window.history)}},{name:"Css3dTransforms",fn:function(){return this.has("CssTransforms")&&this.isStyleSupported("perspective")}},{name:"CssTransforms",fn:function(){return this.isStyleSupported("transform")}},{name:"CssTransformNoPrefix",fn:function(){return this.isStyleSupportedWithoutPrefix("transform")}},{name:"CssAnimations",fn:function(){return this.isStyleSupported("animationName")}},{names:["CssTransitions","Transitions"],fn:function(){return this.isStyleSupported("transitionProperty")}},{names:["Audio","AudioTag"],fn:function(){return !!this.getTestElement("audio").canPlayType}},{name:"Video",fn:function(){return !!this.getTestElement("video").canPlayType}},{name:"LocalStorage",fn:function(){try{if("localStorage" in window&&window.localStorage!==null){localStorage.setItem("sencha-localstorage-test","test success");localStorage.removeItem("sencha-localstorage-test");return true}}catch(a){}return false}},{name:"XHR2",fn:function(){return window.ProgressEvent&&window.FormData&&window.XMLHttpRequest&&("withCredentials" in new XMLHttpRequest())}},{name:"XHRUploadProgress",fn:function(){if(window.XMLHttpRequest&&!Ext.browser.is.AndroidStock){var a=new XMLHttpRequest();return a&&("upload" in a)&&("onprogress" in a.upload)}return false}},{name:"NumericInputPlaceHolder",fn:function(){return !(Ext.browser.is.AndroidStock4&&Ext.os.version.getMinor()<2)}},{name:"matchesSelector",fn:function(){var b=document.documentElement,f="matches",d="webkitMatchesSelector",a="msMatchesSelector",c="mozMatchesSelector";return b[f]?f:b[d]?d:b[a]?a:b[c]?c:null}},{name:"RightMargin",ready:true,fn:function(b,c){var a=b.defaultView;return !(a&&a.getComputedStyle(c.firstChild.firstChild,null).marginRight!=="0px")}},{name:"DisplayChangeInputSelectionBug",fn:function(){var a=Ext.webKitVersion;return 0<a&&a<533}},{name:"DisplayChangeTextAreaSelectionBug",fn:function(){var a=Ext.webKitVersion;return 0<a&&a<534.24}},{name:"TransparentColor",ready:true,fn:function(b,c,a){a=b.defaultView;return !(a&&a.getComputedStyle(c.lastChild,null).backgroundColor!=="transparent")}},{name:"ComputedStyle",ready:true,fn:function(b,c,a){a=b.defaultView;return a&&a.getComputedStyle}},{name:"Float",fn:function(a){return"cssFloat" in a.documentElement.style}},{name:"CSS3BorderRadius",ready:true,fn:function(d){var b=["borderRadius","BorderRadius","MozBorderRadius","WebkitBorderRadius","OBorderRadius","KhtmlBorderRadius"],c=false,a;for(a=0;a<b.length;a++){if(d.documentElement.style[b[a]]!==undefined){c=true}}return c&&!Ext.isIE9}},{name:"CSS3LinearGradient",fn:function(g,a){var j="background-image:",h="-webkit-gradient(linear, left top, right bottom, from(black), to(white))",f="linear-gradient(left top, black, white)",d="-moz-"+f,b="-ms-"+f,c="-o-"+f,m=[j+h,j+f,j+d,j+b,j+c];a.style.cssText=m.join(";");return((""+a.style.backgroundImage).indexOf("gradient")!==-1)&&!Ext.isIE9}},{name:"MouseEnterLeave",fn:function(a){return("onmouseenter" in a.documentElement&&"onmouseleave" in a.documentElement)}},{name:"MouseWheel",fn:function(a){return("onmousewheel" in a.documentElement)}},{name:"Opacity",fn:function(a,b){if(Ext.isIE8){return false}b.firstChild.style.cssText="opacity:0.73";return b.firstChild.style.opacity=="0.73"}},{name:"Placeholder",fn:function(a){return"placeholder" in a.createElement("input")}},{name:"Direct2DBug",fn:function(a){return Ext.isString(a.documentElement.style.msTransformOrigin)&&Ext.isIE9m}},{name:"BoundingClientRect",fn:function(a){return"getBoundingClientRect" in a.documentElement}},{name:"RotatedBoundingClientRect",ready:true,fn:function(f){var a=f.body,b=false,d=f.createElement("div"),c=d.style;if(d.getBoundingClientRect){c.position="absolute";c.top="0";c.WebkitTransform=c.MozTransform=c.msTransform=c.OTransform=c.transform="rotate(90deg)";c.width="100px";c.height="30px";a.appendChild(d);b=d.getBoundingClientRect().height!==100;a.removeChild(d)}return b}},{name:"ChildContentClearedWhenSettingInnerHTML",ready:true,fn:function(){var a=this.getTestElement(),b;a.innerHTML="<div>a</div>";b=a.firstChild;a.innerHTML="<div>b</div>";return b.innerHTML!=="a"}},{name:"IncludePaddingInWidthCalculation",ready:true,fn:function(a,b){return b.childNodes[1].firstChild.offsetWidth===210}},{name:"IncludePaddingInHeightCalculation",ready:true,fn:function(a,b){return b.childNodes[1].firstChild.offsetHeight===210}},{name:"TextAreaMaxLength",fn:function(a){return("maxlength" in a.createElement("textarea"))}},{name:"GetPositionPercentage",ready:true,fn:function(a,b){return Ext.feature.getStyle(b.childNodes[2],"left")==="10%"}},{name:"PercentageHeightOverflowBug",ready:true,fn:function(d){var a=false,c,b;if(Ext.getScrollbarSize().height){b=this.getTestElement();c=b.style;c.height="50px";c.width="50px";c.overflow="auto";c.position="absolute";b.innerHTML=['<div style="display:table;height:100%;">','<div style="width:51px;"></div>',"</div>"].join("");d.body.appendChild(b);if(b.firstChild.offsetHeight===50){a=true}d.body.removeChild(b)}return a}},{name:"xOriginBug",ready:true,fn:function(d,f){f.innerHTML='<div id="b1" style="height:100px;width:100px;direction:rtl;position:relative;overflow:scroll"><div id="b2" style="position:relative;width:100%;height:20px;"></div><div id="b3" style="position:absolute;width:20px;height:20px;top:0px;right:0px"></div></div>';var c=document.getElementById("b1").getBoundingClientRect(),b=document.getElementById("b2").getBoundingClientRect(),a=document.getElementById("b3").getBoundingClientRect();return(b.left!==c.left&&a.right!==c.right)}},{name:"ScrollWidthInlinePaddingBug",ready:true,fn:function(d){var a=false,c,b;b=d.createElement("div");c=b.style;c.height="50px";c.width="50px";c.padding="10px";c.overflow="hidden";c.position="absolute";b.innerHTML='<span style="display:inline-block;zoom:1;height:60px;width:60px;"></span>';d.body.appendChild(b);if(b.scrollWidth===70){a=true}d.body.removeChild(b);return a}},{name:"rtlVertScrollbarOnRight",ready:true,fn:function(c,d){d.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:scroll"><div style="width:20px;height:200px;"></div></div>';var b=d.firstChild,a=b.firstChild;return(a.offsetLeft+a.offsetWidth!==b.offsetLeft+b.offsetWidth)}},{name:"rtlVertScrollbarOverflowBug",ready:true,fn:function(b,c){c.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:auto"><div style="width:95px;height:200px;"></div></div>';var a=c.firstChild;return a.clientHeight===a.offsetHeight}},{identity:"defineProperty",fn:function(){if(Ext.isIE8m){Ext.Object.defineProperty=Ext.emptyFn;return false}return true}},{identify:"nativeXhr",fn:function(){if(typeof XMLHttpRequest!=="undefined"){return true}XMLHttpRequest=function(){try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(a){return null}};return false}},{name:"SpecialKeyDownRepeat",fn:function(){return Ext.isWebKit?parseInt(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1],10)>=525:!((Ext.isGecko&&!Ext.isWindows)||(Ext.isOpera&&Ext.operaVersion<12))}},{name:"EmulatedMouseOver",fn:function(){return Ext.os.is.iOS}},{name:"Hashchange",fn:function(){var a=document.documentMode;return"onhashchange" in window&&(a===undefined||a>7)}},{name:"FixedTableWidthBug",ready:true,fn:function(){if(Ext.isIE8){return false}var b=document.createElement("div"),a=document.createElement("div"),c;b.setAttribute("style","display:table;table-layout:fixed;");a.setAttribute("style","display:table-cell;min-width:50px;");b.appendChild(a);document.body.appendChild(b);b.offsetWidth;b.style.width="25px";c=b.offsetWidth;document.body.removeChild(b);return c===50}},{name:"FocusinFocusoutEvents",fn:function(){return !Ext.isGecko}},{name:"AsyncFocusEvents",fn:function(){return Ext.asyncFocus=!!Ext.isIE}},{name:"accessibility",ready:true,fn:function(h){var a=h.body,j,d,f,b,c;function g(s){var m=[],p=0,r,o;if(s.indexOf("rgb(")!==-1){m=s.replace("rgb(","").replace(")","").split(", ")}else{if(s.indexOf("#")!==-1){r=s.length===7?/^#(\S\S)(\S\S)(\S\S)$/:/^#(\S)(\S)(\S)$/;o=s.match(r);if(o){m=["0x"+o[1],"0x"+o[2],"0x"+o[3]]}}}for(var q=0;q<m.length;q++){p+=parseInt(m[q])}return p}j=h.createElement("div");d=h.createElement("img");f=j.style;Ext.apply(f,{width:"2px",position:"absolute",clip:"rect(1px,1px,1px,1px)",borderWidth:"1px",borderStyle:"solid",borderTopTolor:"#f00",borderRightColor:"#ff0",backgroundColor:"#fff",backgroundImage:"url("+Ext.BLANK_IMAGE_URL+")"});d.alt="";d.src=Ext.BLANK_IMAGE_URL;j.appendChild(d);a.appendChild(j);f=j.currentStyle||j.style;c=f.backgroundImage;b={Images:d.offsetWidth===1&&d.readyState!=="uninitialized",BackgroundImages:!(c!==null&&(c==="none"||c==="url(invalid-url:)")),BorderColors:f.borderTopColor!==f.borderRightColor,LightOnDark:g(f.color)-g(f.backgroundColor)>0};Ext.supports.HighContrastMode=!b.BackgroundImages;a.removeChild(j);j=d=null;return b}},0]};Ext.feature.tests.pop();Ext.supports={};Ext.feature.detect();Ext.env.Ready={blocks:(location.search||"").indexOf("ext-pauseReadyFire")>0?1:0,bound:0,delay:1,firing:false,generation:0,listeners:[],nextId:0,sortGeneration:0,state:0,timer:null,bind:function(){var a=Ext.env.Ready,b=document;if(!a.bound){if(b.readyState==="complete"){a.onReadyEvent({type:b.readyState||"body"})}else{a.bound=1;if(Ext.browser.is.PhoneGap&&!Ext.os.is.Desktop){a.bound=2;b.addEventListener("deviceready",a.onReadyEvent,false)}b.addEventListener("DOMContentLoaded",a.onReadyEvent,false);window.addEventListener("load",a.onReadyEvent,false)}}},block:function(){++this.blocks;Ext.isReady=false},fireReady:function(){var a=Ext.env.Ready;if(!a.state){Ext._readyTime=Ext.ticks();Ext.isDomReady=true;a.state=1;Ext.feature.detect(true);if(!a.delay){a.handleReady()}else{if(navigator.standalone){a.timer=Ext.defer(function(){a.timer=null;a.handleReadySoon()},1)}else{a.handleReadySoon()}}}},handleReady:function(){var a=this;if(a.state===1){a.state=2;Ext._beforeReadyTime=Ext.ticks();a.invokeAll();Ext._afterReadyTime=Ext.ticks()}},handleReadySoon:function(a){var b=this;if(!b.timer){b.timer=Ext.defer(function(){b.timer=null;b.handleReady()},a||b.delay)}},invoke:function(b){var a=b.delay;if(a){Ext.defer(b.fn,a,b.scope)}else{if(Ext.elevateFunction){Ext.elevateFunction(b.fn,b.scope)}else{b.fn.call(b.scope)}}},invokeAll:function(){if(Ext.elevateFunction){Ext.elevateFunction(this.doInvokeAll,this)}else{this.doInvokeAll()}},doInvokeAll:function(){var b=this,a=b.listeners,c;if(!b.blocks){Ext.isReady=true}b.firing=true;while(a.length){if(b.sortGeneration!==b.generation){b.sortGeneration=b.generation;a.sort(b.sortFn)}c=a.pop();if(b.blocks&&!c.dom){a.push(c);break}b.invoke(c)}b.firing=false},makeListener:function(d,c,b){var a={fn:d,id:++this.nextId,scope:c,dom:false,priority:0};if(b){Ext.apply(a,b)}a.phase=a.dom?0:1;return a},on:function(c,b,a){var d=Ext.env.Ready,f=d.makeListener(c,b,a);if(d.state===2&&!d.firing&&(f.dom||!d.blocks)){d.invoke(f)}else{d.listeners.push(f);++d.generation;if(!d.bound){d.bind()}}},onReadyEvent:function(b){var a=Ext.env.Ready;if(Ext.elevateFunction){Ext.elevateFunction(a.doReadyEvent,a,arguments)}else{a.doReadyEvent(b)}},doReadyEvent:function(b){var a=this;if(a.bound>0){a.unbind();a.bound=-1}if(!a.state){a.fireReady()}},sortFn:function(d,c){return -((d.phase-c.phase)||(c.priority-d.priority)||(d.id-c.id))},unblock:function(){var a=this;if(a.blocks){if(!--a.blocks){if(a.state===2&&!a.firing){a.invokeAll()}}}},unbind:function(){var a=this,b=document;if(a.bound>1){b.removeEventListener("deviceready",a.onReadyEvent,false)}b.removeEventListener("DOMContentLoaded",a.onReadyEvent,false);window.removeEventListener("load",a.onReadyEvent,false)}};(function(){var a=Ext.env.Ready;if(Ext.isIE9m){Ext.apply(a,{scrollTimer:null,readyStatesRe:/complete/i,pollScroll:function(){var b=true;try{document.documentElement.doScroll("left")}catch(c){b=false}if(b&&document.body){a.onReadyEvent({type:"doScroll"})}else{a.scrollTimer=Ext.defer(a.pollScroll,20)}return b},bind:function(){if(a.bound){return}var d=document,b;try{b=window.frameElement===undefined}catch(c){}if(!b||!d.documentElement.doScroll){a.pollScroll=Ext.emptyFn}else{if(a.pollScroll()){return}}if(d.readyState==="complete"){a.onReadyEvent({type:"already "+(d.readyState||"body")})}else{d.attachEvent("onreadystatechange",a.onReadyStateChange);window.attachEvent("onload",a.onReadyEvent);a.bound=1}},unbind:function(){document.detachEvent("onreadystatechange",a.onReadyStateChange);window.detachEvent("onload",a.onReadyEvent);if(Ext.isNumber(a.scrollTimer)){clearTimeout(a.scrollTimer);a.scrollTimer=null}},onReadyStateChange:function(){var b=document.readyState;if(a.readyStatesRe.test(b)){a.onReadyEvent({type:b})}}})}Ext.onDocumentReady=function(f,d,b){var c={dom:true};if(b){Ext.apply(c,b)}a.on(f,d,c)};Ext.onReady=function(d,c,b){a.on(d,c,b)};Ext.onInternalReady=function(d,c,b){a.on(d,c,Ext.apply({priority:1000},b))};a.bind()}());Ext.Loader=(new function(){var c=this,a=Ext.ClassManager,h=Ext.Boot,d=Ext.Class,m=Ext.env.Ready,j=Ext.Function.alias,g=["extend","mixins","requires"],r={},o=[],b=[],f=[],s={},q={},p={enabled:true,scriptChainDelay:false,disableCaching:true,disableCachingParam:"_dc",paths:a.paths,preserveScripts:true,scriptCharset:undefined},t={disableCaching:true,disableCachingParam:true,preserveScripts:true,scriptChainDelay:"loadDelay"};Ext.apply(c,{isInHistory:r,isLoading:false,history:o,config:p,readyListeners:b,optionalRequires:f,requiresMap:s,hasFileLoadError:false,scriptsLoading:0,syncModeEnabled:false,missingQueue:q,init:function(){var A=document.getElementsByTagName("script"),u=A[A.length-1].src,F=u.substring(0,u.lastIndexOf("/")+1),D=Ext._classPathMetadata,E=Ext.Microloader,w=Ext.manifest,y,B,C,z,v;if(!a.getPath("Ext")){a.setPath("Ext",F+"src")}if(D){Ext._classPathMetadata=null;c.addClassPathMappings(D)}if(w){y=w.loadOrder;B=Ext.Boot.baseUrl;if(y&&w.bootRelative){for(C=y.length,z=0;z<C;z++){v=y[z];v.path=B+v.path}}}if(E){m.block();E.onMicroloaderReady(function(){m.unblock()})}},setConfig:Ext.Function.flexSetter(function(u,v){if(u==="paths"){c.setPath(v)}else{p[u]=v;var w=t[u];if(w){h.setConfig((w===true)?u:w,v)}}return c}),getConfig:function(u){return u?p[u]:p},setPath:function(){a.setPath.apply(a,arguments);return c},addClassPathMappings:function(u){a.setPath(u);return c},addBaseUrlClassPathMappings:function(u){for(var v in u){u[v]=h.baseUrl+u[v]}Ext.Loader.addClassPathMappings(u)},getPath:function(u){return a.getPath(u)},require:function(w,v,u,z){if(z){return c.exclude(z).require(w,v,u)}var y=a.getNamesByExpression(w);return c.load(y,v,u)},syncRequire:function(){var v=c.syncModeEnabled;c.syncModeEnabled=true;var u=c.require.apply(c,arguments);c.syncModeEnabled=v;return u},exclude:function(v){var u=a.select({require:function(z,y,w){return c.load(z,y,w)},syncRequire:function(B,z,y){var A=c.syncModeEnabled;c.syncModeEnabled=true;var w=c.load(B,z,y);c.syncModeEnabled=A;return w}});u.exclude(v);return u},load:function(u,D,E){if(D){if(D.length){D=c.makeLoadCallback(u,D)}D=D.bind(E||Ext.global)}var y=[],w=u.length,B,A,z,C=[],v=a.classState;for(A=0;A<w;++A){B=a.resolveName(u[A]);if(!a.isCreated(B)){y.push(B);q[B]=c.getPath(B);if(!v[B]){C.push(q[B])}}}z=y.length;if(z){c.missingCount+=z;a.onCreated(function(){if(D){Ext.callback(D,E,arguments)}c.checkReady()},c,y);if(!p.enabled){Ext.raise("Ext.Loader is not enabled, so dependencies cannot be resolved dynamically. Missing required class"+((y.length>1)?"es":"")+": "+y.join(", "))}if(C.length){c.loadScripts({url:C,_classNames:y})}else{c.checkReady()}}else{if(D){D.call(E)}c.checkReady()}if(c.syncModeEnabled){if(w===1){return a.get(u[0])}}return c},makeLoadCallback:function(u,v){return function(){var y=[],w=u.length;while(w-->0){y[w]=a.get(u[w])}return v.apply(this,y)}},onLoadFailure:function(){var u=this,v=u.onError;c.hasFileLoadError=true;--c.scriptsLoading;if(v){v.call(u.userScope,u)}c.checkReady()},onLoadSuccess:function(){var u=this,v=u.onLoad;--c.scriptsLoading;if(v){v.call(u.userScope,u)}c.checkReady()},onReady:function(w,v,z,u){if(z){m.on(w,v,u)}else{var y=m.makeListener(w,v,u);if(c.isLoading){b.push(y)}else{m.invoke(y)}}},addUsedClasses:function(w){var u,v,y;if(w){w=(typeof w==="string")?[w]:w;for(v=0,y=w.length;v<y;v++){u=w[v];if(typeof u==="string"&&!Ext.Array.contains(f,u)){f.push(u)}}}return c},triggerReady:function(){var u,v=f;if(c.isLoading&&v.length){f=[];c.require(v)}else{c.isLoading=false;b.sort(m.sortFn);while(b.length&&!c.isLoading){u=b.pop();m.invoke(u)}m.unblock()}},historyPush:function(u){if(u&&!r[u]&&!a.overrideMap[u]){r[u]=true;o.push(u)}return c},loadScripts:function(z){var y=Ext.manifest,u=y&&y.loadOrder,v=y&&y.loadOrderMap,w;++c.scriptsLoading;if(u&&!v){y.loadOrderMap=v=h.createLoadOrderMap(u)}c.checkReady();w=Ext.apply({loadOrder:u,loadOrderMap:v,charset:p.scriptCharset,success:c.onLoadSuccess,failure:c.onLoadFailure,sync:c.syncModeEnabled,_classNames:[]},z);w.userScope=w.scope;w.scope=w;h.load(w)},loadScriptsSync:function(v){var u=c.syncModeEnabled;c.syncModeEnabled=true;c.loadScripts({url:v});c.syncModeEnabled=u},loadScriptsSyncBasePrefix:function(v){var u=c.syncModeEnabled;c.syncModeEnabled=true;c.loadScripts({url:v,prependBaseUrl:true});c.syncModeEnabled=u},loadScript:function(D){var v=typeof D==="string",z=D instanceof Array,C=!z&&!v,u=C?D.url:D,y=C&&D.onError,A=C&&D.onLoad,B=C&&D.scope,w={url:u,scope:B,onLoad:A,onError:y,_classNames:[]};c.loadScripts(w)},flushMissingQueue:function(){var u,y,w=0,v=0;for(u in q){w++;y=q[u];if(a.isCreated(u)){delete q[u]}else{if(a.existCache[u]===2){delete q[u]}else{++v}}}this.missingCount=v},checkReady:function(){var v=c.isLoading,u;c.flushMissingQueue();u=c.missingCount+c.scriptsLoading;if(u&&!v){m.block();c.isLoading=!!u}else{if(!u&&v){c.triggerReady()}}}});Ext.require=j(c,"require");Ext.syncRequire=j(c,"syncRequire");Ext.exclude=j(c,"exclude");d.registerPreprocessor("loader",function(K,z,J,I){var F=this,D=[],u,E=a.getName(K),y,w,C,B,H,A,v,G;for(y=0,C=g.length;y<C;y++){A=g[y];if(z.hasOwnProperty(A)){v=z[A];if(typeof v==="string"){D.push(v)}else{if(v instanceof Array){for(w=0,B=v.length;w<B;w++){H=v[w];if(typeof H==="string"){D.push(H)}}}else{if(typeof v!=="function"){for(w in v){if(v.hasOwnProperty(w)){H=v[w];if(typeof H==="string"){D.push(H)}}}}}}}}if(D.length===0){return}if(E){s[E]=D}(E?c.exclude(E):c).require(D,function(){for(y=0,C=g.length;y<C;y++){A=g[y];if(z.hasOwnProperty(A)){v=z[A];if(typeof v==="string"){z[A]=a.get(v)}else{if(v instanceof Array){for(w=0,B=v.length;w<B;w++){H=v[w];if(typeof H==="string"){z[A][w]=a.get(H)}}}else{if(typeof v!=="function"){for(var L in v){if(v.hasOwnProperty(L)){H=v[L];if(typeof H==="string"){z[A][L]=a.get(H)}}}}}}}}I.call(F,K,z,J)});return false},true,"after","className");a.registerPostprocessor("uses",function(v,G,B){var u=Ext.manifest,w=u&&u.loadOrder,y=u&&u.classes,z,D,F,C,A,E;if(w){D=y[v];if(D&&!isNaN(A=D.idx)){F=w[A];z=F.uses;E={};for(C=z.length,A=0;A<C;A++){E[z[A]]=true}z=Ext.Boot.getPathsFromIndexes(E,w,true);if(z.length>0){c.loadScripts({url:z,sequential:true})}}}if(B.uses){z=B.uses;c.addUsedClasses(z)}});a.onCreated(c.historyPush);c.init()}());Ext._endTime=Ext.ticks();if(Ext._beforereadyhandler){Ext._beforereadyhandler()}(Ext.cmd.derive("Ext.Mixin",Ext.Base,function(a){return{statics:{addHook:function(j,f,c,d){var h=Ext.isFunction(j),g=function(){var o=arguments,p=h?j:d[j],m=this.callParent(o);p.apply(this,o);return m},b=f.hasOwnProperty(c)&&f[c];if(h){j.$previous=Ext.emptyFn}g.$name=c;g.$owner=f.self;if(b){g.$previous=b.$previous;b.$previous=g}else{f[c]=g}}},onClassExtended:function(p,d){var g=d.mixinConfig,m=d.xhooks,j=p.superclass,f=d.onClassMixedIn,b,h,o,c;if(m){delete d.xhooks;(g||(d.mixinConfig=g={})).on=m}if(g){b=j.mixinConfig;if(b){d.mixinConfig=g=Ext.merge({},b,g)}d.mixinId=g.id;h=g.before;o=g.after;m=g.on;c=g.extended}if(h||o||m||c){d.onClassMixedIn=function(t){var q=this.prototype,s=t.prototype,r;if(h){Ext.Object.each(h,function(u,v){t.addMember(u,function(){if(q[v].apply(this,arguments)!==false){return this.callParent(arguments)}})})}if(o){Ext.Object.each(o,function(u,v){t.addMember(u,function(){var w=this.callParent(arguments);q[v].apply(this,arguments);return w})})}if(m){for(r in m){a.addHook(m[r],s,r,q)}}if(c){t.onExtended(function(){var u=Ext.Array.slice(arguments,0);u.unshift(t);return c.apply(this,u)},this)}if(f){f.apply(this,arguments)}}}}}},0,0,0,0,0,0,[Ext,"Mixin"],0));Ext.util=Ext.util||{};Ext.util.DelayedTask=function(f,d,b,j,h){var g=this,a,c=function(){var m=Ext.GlobalEvents;clearInterval(g.id);g.id=null;f.apply(d,b||[]);if(h!==false&&m.hasListeners.idle){m.fireEvent("idle")}};j=typeof j==="boolean"?j:true;g.id=null;g.delay=function(o,q,p,m){if(j){g.cancel()}if(typeof o==="number"){a=o}f=q||f;d=p||d;b=m||b;if(!g.id){g.id=Ext.interval(c,a)}};g.cancel=function(){if(g.id){clearInterval(g.id);g.id=null}}};(Ext.cmd.derive("Ext.util.Event",Ext.Base,function(){var d=Array.prototype.slice,a=Ext.Array.insert,c=Ext.Array.toArray,b={};return{isEvent:true,suspended:0,noOptions:{},constructor:function(g,f){this.name=f;this.observable=g;this.listeners=[]},addListener:function(q,f,g,y,t){var B=this,o=false,s=B.observable,m=B.name,u,j,A,w,C,v,h,p,z,r;if(B.findListener(q,f)===-1){j=B.createListener(q,f,g,y,t);if(B.firing){B.listeners=B.listeners.slice(0)}u=B.listeners;p=h=u.length;A=g&&g.priority;C=B._highestNegativePriorityIndex;v=C!==undefined;if(A){w=(A<0);if(!w||v){for(z=(w?C:0);z<h;z++){r=u[z].o?u[z].o.priority||0:0;if(r<A){p=z;break}}}else{B._highestNegativePriorityIndex=p}}else{if(v){p=C}}if(!w&&p<=C){B._highestNegativePriorityIndex++}if(p===h){u[h]=j}else{a(u,p,[j])}if(s.isElement){s._getPublisher(m).subscribe(s,m,g.delegated!==false,g.capture)}o=true}return o},createListener:function(s,u,f,g,j){var q=this,r=Ext._namedScopes[u],h={fn:s,scope:u,ev:q,caller:g,manager:j,namedScope:r,defaultScope:r?(u||q.observable):undefined,lateBound:typeof s==="string"},t=s,p=false,m;if(f){h.o=f;if(f.single){t=q.createSingle(t,h,f,u);p=true}if(f.target){t=q.createTargeted(t,h,f,u,p);p=true}if(f.delay){t=q.createDelayed(t,h,f,u,p);p=true}if(f.buffer){t=q.createBuffered(t,h,f,u,p);p=true}if(q.observable.isElement){m=f.type;if(m){h.type=m}}}h.fireFn=t;h.wrapped=p;return h},findListener:function(j,h){var g=this.listeners,f=g.length,m;while(f--){m=g[f];if(m){if(m.fn===j&&m.scope==h){return f}}}return -1},removeListener:function(t,v,r){var s=this,q=false,f=s.observable,p=s.name,h,y,w,m,j,u,g,o;r=r||s.findListener(t,v);if(r!=-1){h=s.listeners[r];w=h.o;y=s._highestNegativePriorityIndex;if(s.firing){s.listeners=s.listeners.slice(0)}if(h.task){h.task.cancel();delete h.task}m=h.tasks&&h.tasks.length;if(m){while(m--){h.tasks[m].cancel()}delete h.tasks}s.listeners.splice(r,1);j=h.manager;if(j){u=j.managedListeners;if(u){for(o=u.length;o--;){g=u[o];if(g.item===s.observable&&g.ename===p&&g.fn===t&&g.scope===v){u.splice(o,1)}}}}if(y){if(r<y){s._highestNegativePriorityIndex--}else{if(r===y&&r===s.listeners.length){delete s._highestNegativePriorityIndex}}}if(f.isElement){f._getPublisher(p).unsubscribe(f,p,w.delegated!==false,w.capture)}q=true}return q},clearListeners:function(){var g=this.listeners,f=g.length,h;while(f--){h=g[f];this.removeListener(h.fn,h.scope)}},suspend:function(){++this.suspended},resume:function(){if(this.suspended){--this.suspended}},isSuspended:function(){return this.suspended>0},fireDelegated:function(g,f){this.firingObservable=g;return this.fire.apply(this,f)},fire:function(){var E=this,u=E.listeners,o=u.length,r=E.observable,v=r.isElement,D=r.isComponent,B=E.firingObservable,g,A,s,y,f,j,z,w,F,h,q,m,C,t,p;if(!E.suspended&&o>0){E.firing=true;f=arguments.length?d.call(arguments,0):[];z=f.length;if(v){C=f[0]}for(y=0;y<o;y++){j=u[y];g=j.o;if(v){if(F){C.setCurrentTarget(F)}h=j.type;if(h){q=C;C=f[0]=q.chain({type:h})}Ext.EventObject=C}m=f;if(g){A=g.delegate;if(A){if(v){w=C.getTarget("#"+C.currentTarget.id+" "+A);if(w){f[1]=w;F=C.currentTarget;C.setCurrentTarget(w)}else{continue}}else{if(D&&!B.is("#"+r.id+" "+g.delegate)){continue}}}if(v){if(g.preventDefault){C.preventDefault()}if(g.stopPropagation){C.stopPropagation()}if(g.stopEvent){C.stopEvent()}}f[z]=g;if(g.args){m=g.args.concat(f)}}s=E.getFireInfo(j);t=s.fn;p=s.scope;s.fn=s.scope=null;if(t.apply(p,m)===false){Ext.EventObject=null;return(E.firing=false)}if(q){C=f[0]=q;q=null}Ext.EventObject=null}}E.firing=false;return true},getFireInfo:function(o,m){var p=this.observable,f=o.fireFn,j=o.scope,g=o.namedScope,h;if(!m&&o.wrapped){b.fn=f;return b}h=m?o.fn:f;if(o.lateBound){if(!j||g){j=(o.caller||p).resolveListenerScope(o.defaultScope)}h=j[h]}else{if(g&&g.isController){j=(o.caller||p).resolveListenerScope(o.defaultScope)}else{if(!j||g){j=p}}}b.fn=h;b.scope=j;return b},createTargeted:function(h,j,m,g,f){return function(){if(m.target===arguments[0]){var o;if(!f){o=j.ev.getFireInfo(j,true);h=o.fn;g=o.scope;o.fn=o.scope=null}return h.apply(g,arguments)}}},createBuffered:function(h,j,m,g,f){j.task=new Ext.util.DelayedTask();return function(){var o;if(!f){o=j.ev.getFireInfo(j,true);h=o.fn;g=o.scope;o.fn=o.scope=null}j.task.delay(m.buffer,h,g,c(arguments))}},createDelayed:function(h,j,m,g,f){return function(){var o=new Ext.util.DelayedTask(),p;if(!f){p=j.ev.getFireInfo(j,true);h=p.fn;g=p.scope;p.fn=p.scope=null}if(!j.tasks){j.tasks=[]}j.tasks.push(o);o.delay(m.delay||10,h,g,c(arguments))}},createSingle:function(h,j,m,g,f){return function(){var o=j.ev,p;if(o.removeListener(j.fn,g)&&o.observable){o.observable.hasListeners[o.name]--}if(!f){p=o.getFireInfo(j,true);h=p.fn;g=p.scope;p.fn=p.scope=null}return h.apply(g,arguments)}}}},1,0,0,0,0,0,[Ext.util,"Event"],0));(Ext.cmd.derive("Ext.mixin.Identifiable",Ext.Base,{statics:{uniqueIds:{}},isIdentifiable:true,mixinId:"identifiable",idCleanRegex:/\.|[^\w\-]/g,defaultIdPrefix:"ext-",defaultIdSeparator:"-",getOptimizedId:function(){return this.id},getUniqueId:function(){var g=this.id,b,d,f,a,c;if(!(g||g===0)){b=this.self.prototype;d=this.defaultIdSeparator;a=Ext.mixin.Identifiable.uniqueIds;if(!b.hasOwnProperty("identifiablePrefix")){f=this.xtype;if(f){c=this.defaultIdPrefix+f.replace(this.idCleanRegex,d)+d}else{if(!(c=b.$className)){c=this.defaultIdPrefix+"anonymous"+d}else{c=c.replace(this.idCleanRegex,d).toLowerCase()+d}}b.identifiablePrefix=c}c=this.identifiablePrefix;if(!a.hasOwnProperty(c)){a[c]=0}g=this.id=this.id=c+(++a[c])}this.getUniqueId=this.getOptimizedId;return g},setId:function(a){this.id=this.id=a},getId:function(){var a=this.id;if(!a){a=this.getUniqueId()}this.getId=this.getOptimizedId;return a}},0,0,0,0,0,0,[Ext.mixin,"Identifiable"],0));(Ext.cmd.derive("Ext.mixin.Observable",Ext.Mixin,function(a){var d=Ext.emptyFn,c=[],f=Array.prototype,g=f.slice,b=function(h){if(h instanceof b){return h}this.observable=h;if(arguments[1].isObservable){this.managedListeners=true}this.args=g.call(arguments,1)};b.prototype.destroy=function(){this.destroy=Ext.emptyFn;var h=this.observable;h[this.managedListeners?"mun":"un"].apply(h,this.args)};return{mixinConfig:{id:"observable",after:{destroy:"clearListeners"}},statics:{releaseCapture:function(h){h.fireEventArgs=this.prototype.fireEventArgs},capture:function(p,j,h){var m=function(o,q){return j.apply(h,[o].concat(q))};this.captureArgs(p,m,h)},captureArgs:function(m,j,h){m.fireEventArgs=Ext.Function.createInterceptor(m.fireEventArgs,j,h)},observe:function(h,j){if(h){if(!h.isObservable){Ext.applyIf(h,new this());this.captureArgs(h.prototype,h.fireEventArgs,h)}if(Ext.isObject(j)){h.on(j)}}return h},prepareClass:function(p,v,q){var u=p.listeners=[],s=q||p.prototype,h=s.listeners,o=v?v.listeners:p.superclass.self.listeners,j,w,t;if(o){u.push(o)}if(h){w=h.scope;if(!w){h.scope="self"}else{t=Ext._namedScopes[w];if(t&&t.isController){h.scope="self.controller"}}u.push(h);s.listeners=null}if(!p.HasListeners){var r=function(){},m=p.superclass.HasListeners||(v&&v.HasListeners)||a.HasListeners;p.prototype.HasListeners=p.HasListeners=r;r.prototype=p.hasListeners=new m()}}},isObservable:true,eventsSuspended:0,constructor:function(o){var r=this,m=r.self,j,q,s,h,p;if(r.$observableInitialized){return}r.$observableInitialized=true;r.hasListeners=new r.HasListeners();r.eventedBeforeEventNames={};r.events=r.events||{};j=m.listeners;if(j&&!r._addDeclaredListeners(j)){m.listeners=null}q=(o&&o.listeners)||r.listeners;if(q){if(q instanceof Array){for(p=0,h=q.length;p<h;++p){r.addListener(q[p])}}else{r.addListener(q)}}s=(o&&o.bubbleEvents)||r.bubbleEvents;if(s){r.enableBubble(s)}if(r.$applyConfigs){if(o){Ext.apply(r,o)}}else{r.initConfig(o)}if(q){r.listeners=null}},onClassExtended:function(h,j){if(!h.HasListeners){a.prepareClass(h,h.prototype.$observableMixedIn?undefined:j)}},$eventOptions:{scope:1,delay:1,buffer:1,onFrame:1,single:1,args:1,destroyable:1,priority:1,order:1},$orderToPriority:{before:100,current:0,after:-100},_addDeclaredListeners:function(h){var j=this;if(h instanceof Array){Ext.each(h,j._addDeclaredListeners,j)}else{j._addedDeclaredListeners=true;j.addListener(h)}return j._addedDeclaredListeners},addManagedListener:function(s,o,q,t,u,m){var p=this,r=p.managedListeners=p.managedListeners||[],j,h;if(typeof o!=="string"){h=arguments.length>4?u:o;u=o;for(o in u){if(u.hasOwnProperty(o)){j=u[o];if(!s.$eventOptions[o]){p.addManagedListener(s,o,j.fn||j,j.scope||u.scope||t,j.fn?j:h,true)}}}if(u&&u.destroyable){return new b(p,s,u)}}else{if(q!==d){s.doAddListener(o,q,t,u,null,p,p);if(!m&&u&&u.destroyable){return new b(p,s,o,q,t)}}}},removeManagedListener:function(s,m,q,t){var p=this,u,j,r,h,o;if(typeof m!=="string"){u=m;for(m in u){if(u.hasOwnProperty(m)){j=u[m];if(!s.$eventOptions[m]){p.removeManagedListener(s,m,j.fn||j,j.scope||u.scope||t)}}}}else{r=p.managedListeners?p.managedListeners.slice():[];m=Ext.canonicalEventName(m);for(o=0,h=r.length;o<h;o++){p.removeManagedListenerItem(false,r[o],s,m,q,t)}}},fireEvent:function(h){return this.fireEventArgs(h,g.call(arguments,1))},resolveListenerScope:function(j){var h=Ext._namedScopes[j];if(h){if(h.isSelf||h.isThis){j=null}}return j||this},fireEventArgs:function(h,m){h=Ext.canonicalEventName(h);var q=this,o=q.events,p=o&&o[h],j=true;if(q.hasListeners[h]){j=q.doFireEvent(h,m||c,p?p.bubble:false)}return j},fireAction:function(j,o,q,p,m,h){if(typeof q==="string"&&!p){q=this[q]}m=m?Ext.Object.chain(m):{};m.single=true;m.priority=((h==="after")?-99.5:99.5);this.doAddListener(j,q,p,m);this.fireEventArgs(j,o)},$eventedController:{_paused:1,pause:function(){++this._paused},resume:function(){var q=this,p=q.fn,o=q.scope,r=q.fnArgs,h=q.owner,m,j;if(!--q._paused){if(p){m=Ext.Array.slice(r||q.args);if(r===false){m.shift()}q.fn=null;m.push(q);if(Ext.isFunction(p)){j=p.apply(o,m)}else{if(o&&Ext.isString(p)&&Ext.isFunction(o[p])){j=o[p].apply(o,m)}}if(j===false){return false}}if(!q._paused){return q.owner.fireEventArgs(q.eventName,q.args)}}}},fireEventedAction:function(j,o,r,u,q){var p=this,t=p.eventedBeforeEventNames,m=t[j]||(t[j]="before"+j),h=Ext.apply({owner:p,eventName:j,fn:r,scope:u,fnArgs:q,args:o},p.$eventedController),s;o.push(h);s=p.fireEventArgs(m,o);o.pop();if(s===false){return false}return h.resume()},doFireEvent:function(m,p,j){var r=this,h,q,o=true;do{if(r.eventsSuspended){if((h=r.eventQueue)){h.push([m,p])}return o}else{q=r.events&&r.events[m];if(q&&q!==true){if((o=q.fire.apply(q,p))===false){break}}}}while(j&&(r=r.getBubbleParent()));return o},getBubbleParent:function(){var j=this,h=j.getBubbleTarget&&j.getBubbleTarget();if(h&&h.isObservable){return h}return null},addListener:function(p,v,w,y,m,h){var u=this,q=Ext._namedScopes,j,t,r,s,o;if(typeof p!=="string"){y=p;w=y.scope;t=w&&q[w];r=t&&t.isSelf;o=((u.isComponent||u.isWidget)&&y.element)?u.$elementEventOptions:u.$eventOptions;for(p in y){j=y[p];if(!o[p]){s=j.scope;if(s&&r){t=q[s];if(t&&t.isController){s="self.controller"}}u.doAddListener(p,j.fn||j,s||w,j.fn?j:y,m,h)}}if(y&&y.destroyable){return new b(u,y)}}else{u.doAddListener(p,v,w,y,m,h);if(y&&y.destroyable){return new b(u,p,v,w,y)}}return u},removeListener:function(o,q,p,h){var r=this,m,j;if(typeof o!=="string"){j=o;h=h||r.$eventOptions;for(o in j){if(j.hasOwnProperty(o)){m=j[o];if(!r.$eventOptions[o]){r.doRemoveListener(o,m.fn||m,m.scope||j.scope)}}}}else{r.doRemoveListener(o,q,p)}return r},onBefore:function(h,o,m,j){return this.addListener(h,o,m,j,"before")},onAfter:function(h,o,m,j){return this.addListener(h,o,m,j,"after")},unBefore:function(h,o,m,j){return this.removeListener(h,o,m,j,"before")},unAfter:function(h,o,m,j){return this.removeListener(h,o,m,j,"after")},addBeforeListener:function(){return this.onBefore.apply(this,arguments)},addAfterListener:function(){return this.onAfter.apply(this,arguments)},removeBeforeListener:function(){return this.unBefore.apply(this,arguments)},removeAfterListener:function(){return this.unAfter.apply(this,arguments)},clearListeners:function(){var p=this,m=p.events,h=p.hasListeners,o,j;if(m){for(j in m){if(m.hasOwnProperty(j)){o=m[j];if(o.isEvent){delete h[j];o.clearListeners()}}}p.events=null}p.clearManagedListeners()},clearManagedListeners:function(){var o=this,j=o.managedListeners?o.managedListeners.slice():[],m=0,h=j.length;for(;m<h;m++){o.removeManagedListenerItem(true,j[m])}o.managedListeners=[]},removeManagedListenerItem:function(j,h,q,m,p,o){if(j||(h.item===q&&h.ename===m&&(!p||h.fn===p)&&(!o||h.scope===o))){h.item.doRemoveListener(h.ename,h.fn,h.scope,h.options);if(!j){Ext.Array.remove(this.managedListeners,h)}}},hasListener:function(h){h=Ext.canonicalEventName(h);return !!this.hasListeners[h]},isSuspended:function(m){var j=this.eventsSuspended>0,h=this.events;if(!j&&m&&h){m=h[m];if(m&&m.isEvent){return m.isSuspended()}}return j},suspendEvents:function(h){++this.eventsSuspended;if(h&&!this.eventQueue){this.eventQueue=[]}},suspendEvent:function(){var q=this,o=q.events,h=arguments.length,m,p,j;for(m=0;m<h;m++){j=arguments[m];j=Ext.canonicalEventName(j);p=o[j];if(!p||!p.isEvent){p=q._initEvent(j)}p.suspend()}},resumeEvent:function(){var m=this.events||0,h=m&&arguments.length,j,o;for(j=0;j<h;j++){o=m[arguments[j]];if(o&&o.resume){o.resume()}}},resumeEvents:function(h){var j=this,p=j.eventQueue,o,m;if(j.eventsSuspended&&!--j.eventsSuspended){delete j.eventQueue;if(!h&&p){o=p.length;for(m=0;m<o;m++){j.fireEventArgs.apply(j,p[m])}}}},relayEvents:function(s,t,m){var r=this,o=t.length,j=0,h,p,q={};if(Ext.isObject(t)){for(j in t){p=t[j];q[j]=r.createRelayer(p)}}else{for(;j<o;j++){h=t[j];q[h]=r.createRelayer(m?m+h:h)}}r.mon(s,q,null,null,undefined);return new b(r,s,q)},createRelayer:function(h,j){var m=this;return function(){return m.fireEventArgs.call(m,h,j?g.apply(arguments,j):arguments)}},enableBubble:function(s){if(s){var q=this,r=(typeof s=="string")?arguments:s,m=q.events,p=m&&r.length,j,o,h;for(h=0;h<p;++h){j=r[h];j=Ext.canonicalEventName(j);o=m[j];if(!o||!o.isEvent){o=q._initEvent(j)}q.hasListeners._incr_(j);o.bubble=true}}},destroy:function(){this.clearListeners();this.callParent()},privates:{doAddListener:function(o,r,u,v,m,j,p){var q=this,h,t,s;m=m||(v&&v.order);if(m){s=(v&&v.priority);if(!s){v=v?Ext.Object.chain(v):{};v.priority=q.$orderToPriority[m]}}o=Ext.canonicalEventName(o);if(!p&&(u&&u.isObservable&&(u!==q))){p=u}if(p){t=p.managedListeners=p.managedListeners||[];t.push({item:q,ename:o,fn:r,scope:u,options:v})}h=(q.events||(q.events={}))[o];if(!h||!h.isEvent){h=q._initEvent(o)}if(r!==d){if(h.addListener(r,u,v,j,p)){q.hasListeners._incr_(o)}}},doRemoveListener:function(j,o,m){var q=this,h=q.events,p;j=Ext.canonicalEventName(j);p=h&&h[j];if(p&&p.isEvent){if(p.removeListener(o,m)){q.hasListeners._decr_(j)}}},_initEvent:function(h){return(this.events[h]=new Ext.util.Event(this,h))}},deprecated:{"5.0":{methods:{addEvents:null}}}}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.mixin,"Observable"],function(){var b=this,f=b.prototype,c=function(){},g=function(h){if(!h.HasListeners){var j=h.prototype;j.$observableMixedIn=1;b.prepareClass(h,this);h.onExtended(function(m,o){b.prepareClass(m,null,o)});if(j.onClassMixedIn){Ext.override(h,{onClassMixedIn:function(m){g.call(this,m);this.callParent(arguments)}})}else{j.onClassMixedIn=function(m){g.call(this,m)}}}a.call(this,h)},a=f.onClassMixedIn;c.prototype={_decr_:function(j,h){if(h==null){h=1}if(!(this[j]-=h)){delete this[j]}},_incr_:function(h){if(this.hasOwnProperty(h)){++this[h]}else{this[h]=1}}};f.HasListeners=b.HasListeners=c;b.createAlias({on:"addListener",un:"removeListener",mon:"addManagedListener",mun:"removeManagedListener",setListeners:"addListener"});b.observeClass=b.observe;function d(r){var q=(this.methodEvents=this.methodEvents||{})[r],m,j,o,p=this,h;if(!q){this.methodEvents[r]=q={};q.originalFn=this[r];q.methodName=r;q.before=[];q.after=[];h=function(u,t,s){if((j=u.apply(t||p,s))!==undefined){if(typeof j=="object"){if(j.returnValue!==undefined){m=j.returnValue}else{m=j}o=!!j.cancel}else{if(j===false){o=true}else{m=j}}}};this[r]=function(){var u=Array.prototype.slice.call(arguments,0),t,v,s;m=j=undefined;o=false;for(v=0,s=q.before.length;v<s;v++){t=q.before[v];h(t.fn,t.scope,u);if(o){return m}}if((j=q.originalFn.apply(p,u))!==undefined){m=j}for(v=0,s=q.after.length;v<s;v++){t=q.after[v];h(t.fn,t.scope,u);if(o){return m}}return m}}return q}Ext.apply(f,{onClassMixedIn:g,beforeMethod:function(m,j,h){d.call(this,m).before.push({fn:j,scope:h})},afterMethod:function(m,j,h){d.call(this,m).after.push({fn:j,scope:h})},removeMethodListener:function(q,o,m){var p=this.getMethodEvent(q),j,h;for(j=0,h=p.before.length;j<h;j++){if(p.before[j].fn==o&&p.before[j].scope==m){Ext.Array.erase(p.before,j,1);return}}for(j=0,h=p.after.length;j<h;j++){if(p.after[j].fn==o&&p.after[j].scope==m){Ext.Array.erase(p.after,j,1);return}}},toggleEventLogging:function(h){Ext.util.Observable[h?"capture":"releaseCapture"](this,function(j){if(Ext.isDefined(Ext.global.console)){Ext.global.console.log(j,arguments)}})}})}));(Ext.cmd.derive("Ext.util.HashMap",Ext.Base,{generation:0,config:{keyFn:null},constructor:function(a){var c=this,b;c.mixins.observable.constructor.call(c,a);c.clear(true);b=c.getKeyFn();if(b){c.getKey=b}},getCount:function(){return this.length},getData:function(a,b){if(b===undefined){b=a;a=this.getKey(b)}return[a,b]},getKey:function(a){return a.id},add:function(a,c){var b=this;if(arguments.length===1){c=a;a=b.getKey(c)}if(b.containsKey(a)){return b.replace(a,c)}b.map[a]=c;++b.length;b.generation++;if(b.hasListeners.add){b.fireEvent("add",b,a,c)}return c},replace:function(b,d){var c=this,f=c.map,a;if(arguments.length===1){d=b;b=c.getKey(d)}if(!c.containsKey(b)){c.add(b,d)}a=f[b];f[b]=d;c.generation++;if(c.hasListeners.replace){c.fireEvent("replace",c,b,d,a)}return d},remove:function(b){var a=this.findKey(b);if(a!==undefined){return this.removeAtKey(a)}return false},removeAtKey:function(a){var b=this,c;if(b.containsKey(a)){c=b.map[a];delete b.map[a];--b.length;b.generation++;if(b.hasListeners.remove){b.fireEvent("remove",b,a,c)}return true}return false},get:function(a){var b=this.map;return b.hasOwnProperty(a)?b[a]:undefined},clear:function(a){var b=this;if(a||b.generation){b.map={};b.length=0;b.generation=a?0:b.generation+1}if(a!==true&&b.hasListeners.clear){b.fireEvent("clear",b)}return b},containsKey:function(a){var b=this.map;return b.hasOwnProperty(a)&&b[a]!==undefined},contains:function(a){return this.containsKey(this.findKey(a))},getKeys:function(){return this.getArray(true)},getValues:function(){return this.getArray(false)},getArray:function(d){var a=[],b,c=this.map;for(b in c){if(c.hasOwnProperty(b)){a.push(d?b:c[b])}}return a},each:function(d,c){var a=Ext.apply({},this.map),b,f=this.length;c=c||this;for(b in a){if(a.hasOwnProperty(b)){if(d.call(c,b,a[b],f)===false){break}}}return this},clone:function(){var c=new this.self(this.initialConfig),b=this.map,a;c.suspendEvents();for(a in b){if(b.hasOwnProperty(a)){c.add(a,b[a])}}c.resumeEvents();return c},findKey:function(b){var a,c=this.map;for(a in c){if(c.hasOwnProperty(a)&&c[a]===b){return a}}return undefined},destroy:function(){this.callParent();this.map=null}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,"HashMap"],function(b){var a=b.prototype;a.removeByKey=a.removeAtKey}));(Ext.cmd.derive("Ext.promise.Consequence",Ext.Base,function(a){return{promise:null,deferred:null,onFulfilled:null,onRejected:null,onProgress:null,constructor:function(f,b,d){var c=this;c.onFulfilled=f;c.onRejected=b;c.onProgress=d;c.deferred=new Ext.promise.Deferred();c.promise=c.deferred.promise},trigger:function(f,d){var c=this,b=c.deferred;switch(f){case"fulfill":c.propagate(d,c.onFulfilled,b,b.resolve);break;case"reject":c.propagate(d,c.onRejected,b,b.reject);break}},update:function(b){if(Ext.isFunction(this.onProgress)){b=this.onProgress(b)}this.deferred.update(b)},propagate:function(d,f,b,c){if(Ext.isFunction(f)){this.schedule(function(){try{b.resolve(f(d))}catch(g){b.reject(g)}})}else{c.call(this.deferred,d)}},schedule:function(c){var b=a.queueSize++;a.queue[b]=c;if(!b){Ext.asap(a.dispatch)}},statics:{queue:new Array(10000),queueSize:0,dispatch:function(){var b=a.queue,d,c;for(c=0;c<a.queueSize;++c){d=b[c];b[c]=null;d()}a.queueSize=0}}}},1,0,0,0,0,0,[Ext.promise,"Consequence"],0));(Ext.cmd.derive("Ext.promise.Deferred",Ext.Base,{promise:null,consequences:[],completed:false,completionAction:null,completionValue:null,constructor:function(){var a=this;a.promise=new Ext.promise.Promise(a);a.consequences=[];a.completed=false;a.completionAction=null;a.completionValue=null},then:function(f,a,d){var c=this,b=new Ext.promise.Consequence(f,a,d);if(c.completed){b.trigger(c.completionAction,c.completionValue)}else{c.consequences.push(b)}return b.promise},resolve:function(d){var c=this,a,b;if(c.completed){return}try{if(d===c.promise){throw new TypeError("A Promise cannot be resolved with itself.")}if((Ext.isObject(d)||Ext.isFunction(d))&&Ext.isFunction(b=d.then)){a=false;try{b.call(d,function(g){if(!a){a=true;c.resolve(g)}},function(g){if(!a){a=true;c.reject(g)}})}catch(f){if(!a){c.reject(f)}}}else{c.complete("fulfill",d)}}catch(f){c.reject(f)}},reject:function(a){if(this.completed){return}this.complete("reject",a)},update:function(b){var f=this.consequences,d,c,a;if(this.completed){return}for(c=0,a=f.length;c<a;c++){d=f[c];d.update(b)}},complete:function(g,f){var d=this,h=d.consequences,c,b,a;d.completionAction=g;d.completionValue=f;d.completed=true;for(b=0,a=h.length;b<a;b++){c=h[b];c.trigger(d.completionAction,d.completionValue)}d.consequences=null}},1,0,0,0,0,0,[Ext.promise,"Deferred"],0));(Ext.cmd.derive("Ext.promise.Promise",Ext.Base,function(b){var a;return{statics:{CancellationError:Ext.global.CancellationError||Error,_ready:function(){a=Ext.promise.Deferred},all:function(c){return b.when(c).then(function(f){var q=new a(),j=f.length,g=new Array(j),o,d,p,h,m;if(!j){q.resolve(g)}else{p=function(s,r){return b.when(s).then(function(t){g[r]=t;if(!--j){q.resolve(g)}return t},function(t){return q.reject(t)})};for(o=h=0,m=f.length;h<m;o=++h){d=f[o];if(o in f){p(d,o)}else{j--}}}return q.promise})},is:function(c){return(Ext.isObject(c)||Ext.isFunction(c))&&Ext.isFunction(c.then)},rethrowError:function(c){Ext.asap(function(){throw c})},when:function(d){var c=new Ext.promise.Deferred();c.resolve(d);return c.promise}},owner:null,constructor:function(c){this.owner=c},then:function(h,c,g,d){var f;if(arguments.length===1&&Ext.isObject(arguments[0])){f=arguments[0];h=f.success;c=f.failure;g=f.progress;d=f.scope}if(d){if(h){h=Ext.Function.bind(h,d)}if(c){c=Ext.Function.bind(c,d)}if(g){g=Ext.Function.bind(g,d)}}return this.owner.then(h,c,g)},otherwise:function(c,d){var f;if(arguments.length===1&&Ext.isObject(arguments[0])){f=arguments[0];c=f.fn;d=f.scope}if(d!=null){c=Ext.Function.bind(c,d)}return this.owner.then(null,c)},always:function(c,d){var f;if(arguments.length===1&&Ext.isObject(arguments[0])){f=arguments[0];c=f.fn;d=f.scope}if(d!=null){c=Ext.Function.bind(c,d)}return this.owner.then(function(g){try{c()}catch(h){b.rethrowError(h)}return g},function(h){try{c()}catch(g){b.rethrowError(g)}throw h})},done:function(){this.owner.then(null,b.rethrowError)},cancel:function(c){if(c==null){c=null}this.owner.reject(new this.self.CancellationError(c))},log:function(c){if(c==null){c=""}return this._owner.then(function(d){Ext.log(""+(c||"Promise")+" resolved with value: "+d);return d},function(d){Ext.log(""+(c||"Promise")+" rejected with reason: "+d);throw d})}}},1,0,0,0,0,0,[Ext.promise,"Promise"],function(a){a._ready()}));(Ext.cmd.derive("Ext.Promise",Ext.Base,function(){var a;return{statics:{_ready:function(){a=Ext.promise.Promise},all:function(){return a.all.apply(a,arguments)},race:function(){},reject:function(c){var b=new Ext.promise.Deferred();b.reject(c);return b.promise},resolve:function(c){var b=new Ext.promise.Deferred();b.resolve(c);return b.promise}},constructor:function(c){var b=new Ext.promise.Deferred();c(b.resolve.bind(b),b.reject.bind(b));return b.promise}}},1,0,0,0,0,0,[Ext,"Promise"],function(a){var b=Ext.global.Promise;if(b&&b.resolve){Ext.Promise=b}else{a._ready()}}));(Ext.cmd.derive("Ext.Deferred",Ext.promise.Deferred,function(b){var c,a;return{statics:{_ready:function(){c=Ext.promise.Promise;a=Ext.Promise.resolve},all:function(){return c.all.apply(c,arguments)},any:function(d){return b.some(d,1).then(function(f){return f[0]},function(f){if(f instanceof Error&&f.message==="Too few Promises were resolved."){Ext.raise("No Promises were resolved.")}else{throw f}})},delay:function(d,g){var f;if(arguments.length===1){g=d;d=undefined}g=Math.max(g,0);f=new b();setTimeout(function(){f.resolve(d)},g);return f.promise},map:function(d,f){return b.resolved(d).then(function(h){var s,q,g,o,r,j,m,p;o=h.length;j=new Array(h.length);s=new b();if(!o){s.resolve(j)}else{r=function(u,t){return b.resolved(u).then(function(v){return f(v,t,j)}).then(function(v){j[t]=v;if(!--o){s.resolve(j)}return v},function(v){return s.reject(v)})};for(q=m=0,p=h.length;m<p;q=++m){g=h[q];if(q in h){r(g,q)}else{o--}}}return s.promise})},memoize:function(h,g,d){var f=Ext.Function.memoize(h,g,d);return function(){return b.all(Ext.Array.slice(arguments)).then(function(j){return f.apply(g,j)})}},parallel:function(f,g){if(g==null){g=null}var d=Ext.Array.slice(arguments,2);return b.map(f,function(h){if(!Ext.isFunction(h)){throw new Error("Invalid parameter: expected a function.")}return h.apply(g,d)})},pipeline:function(f,d,g){if(g==null){g=null}return b.reduce(f,function(j,h){if(!Ext.isFunction(h)){throw new Error("Invalid parameter: expected a function.")}return h.call(g,j)},d)},reduce:function(f,g,d){var h=arguments.length===3;return b.resolved(f).then(function(m){var j=[m,function(p,q,o){return b.resolved(p).then(function(r){return b.resolved(q).then(function(s){return g(r,s,o,m)})})}];if(h){j.push(d)}return Ext.Array.reduce.apply(Ext.Array,j)})},rejected:function(f){var d=new Ext.Deferred();d.reject(f);return d.promise},resolved:function(f){var d=new Ext.Deferred();d.resolve(f);return d.promise},sequence:function(f,g){if(g==null){g=null}var d=Ext.Array.slice(arguments,2);return b.reduce(f,function(h,j){if(!Ext.isFunction(j)){throw new Error("Invalid parameter: expected a function.")}return b.resolved(j.apply(g,d)).then(function(m){h.push(m);return h})},[])},some:function(f,d){return b.resolved(f).then(function(j){var u,q,s,t,h,g,o,r,m,p;r=[];o=d;g=(j.length-o)+1;u=new b();if(j.length<d){u.reject(new Error("Too few Promises were resolved."))}else{t=function(v){if(o>0){r.push(v)}o--;if(o===0){u.resolve(r)}return v};s=function(v){g--;if(g===0){u.reject(new Error("Too few Promises were resolved."))}return v};for(q=m=0,p=j.length;m<p;q=++m){h=j[q];if(q in j){b.resolved(h).then(t,s)}}}return u.promise})},timeout:function(d,g){var f=new b(),h;h=setTimeout(function(){if(h){f.reject(new Error("Promise timed out."))}},g);b.resolved(d).then(function(j){clearTimeout(h);h=null;f.resolve(j)},function(j){clearTimeout(h);h=null;f.reject(j)});return f.promise}}}},0,0,0,0,0,0,[Ext,"Deferred"],function(a){a._ready()}));Ext.Factory=function(a){var b=this;b.aliasPrefix=a+".";b.cache={};b.name=a.replace(b.fixNameRe,b.fixNameFn);b.type=a};Ext.Factory.prototype={defaultProperty:"type",instanceProp:"isInstance",create:function(c,f){var j=this,a=Ext.ClassManager,b=j.cache,d,h,g,m;if(c){if(c[j.instanceProp]){return c}if(typeof c==="string"){m=c;c={};c[j.defaultProperty]=m}h=c.xclass;m=c.type}if(h){if(!(g=a.get(h))){return a.instantiate(h,c)}}else{if(!(m=m||f||j.defaultType)){g=j.defaultClass}if(!g&&!(g=b[m])){d=j.aliasPrefix+m;h=a.getNameByAlias(d);if(!(g=h&&a.get(h))){return a.instantiateByAlias(d,c)}b[m]=g}}return g.isInstance?g:new g(c)},fixNameRe:/\.[a-z]/ig,fixNameFn:function(a){return a.substring(1).toUpperCase()},clearCache:function(){this.cache={}}};Ext.Factory.define=function(g,d){var a=Ext.Factory,b,c,f;if(g.constructor===Object){Ext.Object.each(g,a.define,a)}else{c=new Ext.Factory(g);if(d){if(d.constructor===Object){Ext.apply(c,d);if(typeof(b=c.xclass)==="string"){c.defaultClass=Ext.ClassManager.get(b)}}else{c.defaultType=d}}a[c.name]=f=c.create.bind(c);f.instance=c}return f};(Ext.cmd.derive("Ext.mixin.Factoryable",Ext.Base,{mixinId:"factoryable",onClassMixedIn:function(g){var f=g.prototype,h=f.factoryConfig,d=f.alias,c={},b,a;d=d&&d.length&&d[0];if(d&&(b=d.lastIndexOf("."))>0){c.type=d.substring(0,b);c.defaultType=d.substring(b+1)}if(h){delete f.factoryConfig;Ext.apply(c,h)}a=Ext.Factory.define(c.type,c);if(g.create===Ext.Base.create){g.create=a}}},0,0,0,0,0,0,[Ext.mixin,"Factoryable"],0));(Ext.cmd.derive("Ext.data.request.Base",Ext.Base,{factoryConfig:{type:"request",defaultType:"ajax"},result:null,success:null,timer:null,constructor:function(a){var b=this;Ext.apply(b,a.options||{},a.ownerConfig);b.id=++Ext.data.Connection.requestId;b.owner=a.owner;b.options=a.options;b.requestOptions=a.requestOptions},start:function(){var a=this,b=a.getTimeout();if(b&&a.async){a.timer=Ext.defer(a.onTimeout,b,a)}},abort:function(){var a=this;a.clearTimer();if(!a.timedout){a.aborted=true}a.abort=Ext.emptyFn},createDeferred:function(){return(this.deferred=new Ext.Deferred())},getDeferred:function(){return this.deferred||this.createDeferred()},getPromise:function(){return this.getDeferred().promise},then:function(){var a=this.getPromise();return a.then.apply(a,arguments)},onComplete:function(){var c=this,b=c.deferred,a=c.result;c.clearTimer();if(b){if(c.success){b.resolve(a)}else{b.reject(a)}}},onTimeout:function(){var a=this;a.timedout=true;a.timer=null;a.abort(true)},getTimeout:function(){return this.timeout},clearTimer:function(){var a=this.timer;if(a){clearTimeout(a);this.timer=null}},destroy:function(){var a=this;a.abort();a.owner=a.options=a.requestOptions=a.result=null;a.callParent()},privates:{createException:function(){var b=this,a;a={request:b,requestId:b.id,status:b.aborted?-1:0,statusText:b.aborted?"transaction aborted":"communication failure",getResponseHeader:b._getHeader,getAllResponseHeaders:b._getHeaders};if(b.aborted){a.aborted=true}if(b.timedout){a.timedout=true}return a},_getHeader:function(a){var b=this.headers;return b&&b[a.toLowerCase()]},_getHeaders:function(){return this.headers}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.request,"Base"],0));(Ext.cmd.derive("Ext.data.flash.BinaryXhr",Ext.Base,{statics:{flashPluginActivated:function(){Ext.data.flash.BinaryXhr.flashPluginActive=true;Ext.data.flash.BinaryXhr.flashPlugin=document.getElementById("ext-flash-polyfill");Ext.GlobalEvents.fireEvent("flashready")},flashPluginActive:false,flashPluginInjected:false,connectionIndex:1,liveConnections:{},flashPlugin:null,onFlashStateChange:function(d,c,b){var a;a=this.liveConnections[Number(d)];if(a){a.onFlashStateChange(c,b)}},registerConnection:function(b){var a=this.connectionIndex;this.conectionIndex=this.connectionIndex+1;this.liveConnections[a]=b;return a},injectFlashPlugin:function(){var b=this,a,c;b.flashPolyfillEl=Ext.getBody().appendChild({id:"ext-flash-polyfill",cn:[{tag:"p",html:"To view this page ensure that Adobe Flash Player version 11.1.0 or greater is installed."},{tag:"a",href:"http://www.adobe.com/go/getflashplayer",cn:[{tag:"img",src:window.location.protocol+"//www.adobe.com/images/shared/download_buttons/get_flash_player.gif",alt:"Get Adobe Flash player"}]}]});a=[Ext.Loader.getPath("Ext.data.Connection"),"../../../plugins/flash/swfobject.js"].join("/");c="/plugins/flash/FlashPlugin.swf";if(Ext.flashPluginPath){c=Ext.flashPluginPath}Ext.Loader.loadScript({url:a,onLoad:function(){var f="11.4.0";var h="playerProductInstall.swf";var d={};var j={};j.quality="high";j.bgcolor="#ffffff";j.allowscriptaccess="sameDomain";j.allowfullscreen="true";var g={};g.id="ext-flash-polyfill";g.name="polyfill";g.align="middle";swfobject.embedSWF(c,"ext-flash-polyfill","0","0",f,h,d,j,g)},onError:function(){},scope:b});Ext.data.flash.BinaryXhr.flashPluginInjected=true}},readyState:0,status:0,statusText:"",responseBytes:null,javascriptId:null,constructor:function(a){if(!Ext.data.flash.BinaryXhr.flashPluginInjected){Ext.data.flash.BinaryXhr.injectFlashPlugin()}var b=this;Ext.apply(b,a);b.requestHeaders={}},abort:function(){var a=this;if(a.readyState==4){return}a.aborted=true;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.GlobalEvents.removeListener("flashready",a.onFlashReady,a);return}Ext.data.flash.BinaryXhr.flashPlugin.abortRequest(a.javascriptId);delete Ext.data.flash.BinaryXhr.liveConnections[a.javascriptId]},getAllResponseHeaders:function(){var a=[];Ext.Object.each(this.responseHeaders,function(b,c){a.push(b+": "+c)});return a.join("\r\n")},getResponseHeader:function(b){var a=this.responseHeaders;return(a&&a[b])||null},open:function(g,c,d,a,b){var f=this;f.method=g;f.url=c;f.async=d!==false;f.user=a;f.password=b},overrideMimeType:function(a){this.mimeType=a},send:function(a){var b=this;b.body=a;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.GlobalEvents.addListener("flashready",b.onFlashReady,b)}else{this.onFlashReady()}},onFlashReady:function(){var c=this,b,a;c.javascriptId=Ext.data.flash.BinaryXhr.registerConnection(c);b={method:c.method,url:c.url,user:c.user,password:c.password,mimeType:c.mimeType,requestHeaders:c.requestHeaders,body:c.body,javascriptId:c.javascriptId};a=Ext.data.flash.BinaryXhr.flashPlugin.postBinary(b)},setReadyState:function(b){var a=this;if(a.readyState!=b){a.readyState=b;a.onreadystatechange()}},setRequestHeader:function(b,a){this.requestHeaders[b]=a},onreadystatechange:Ext.emptyFn,parseData:function(b){var a=this;this.status=b.status||0;a.responseHeaders={};if(a.mimeType){a.responseHeaders["content-type"]=a.mimeType}if(b.reason=="complete"){this.responseBytes=b.data;a.responseHeaders["content-length"]=b.data.length}else{if(b.reason=="error"||b.reason=="securityError"){this.statusText=b.text;a.responseHeaders["content-length"]=0}}},onFlashStateChange:function(c,b){var a=this;if(c==4){a.parseData(b);delete Ext.data.flash.BinaryXhr.liveConnections[a.javascriptId]}a.setReadyState(c)}},1,0,0,0,0,0,[Ext.data.flash,"BinaryXhr"],0));(Ext.cmd.derive("Ext.data.request.Ajax",Ext.data.request.Base,{statics:{parseStatus:function(a){a=a==1223?204:a;var c=(a>=200&&a<300)||a==304,b=false;if(!c){switch(a){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:b=true;break}}return{success:c,isException:b}}},start:function(f){var c=this,b=c.options,a=c.requestOptions,d=c.isXdr,h,g;h=c.xhr=c.openRequest(b,a,c.async,c.username,c.password);if(!d){g=c.setupHeaders(h,b,a.data,a.params)}if(c.async){if(!d){h.onreadystatechange=Ext.Function.bind(c.onStateChange,c)}}if(d){c.processXdrRequest(c,h)}Ext.data.request.Base.prototype.start.call(this,f);h.send(f);if(!c.async){return c.onComplete()}return c},abort:function(b){var a=this,d=a.xhr;if(b||a.isLoading()){try{d.onreadystatechange=null}catch(c){d.onreadystatechange=Ext.emptyFn}d.abort();Ext.data.request.Base.prototype.abort.call(this,b);a.onComplete();a.cleanup()}},cleanup:function(){this.xhr=null;delete this.xhr},isLoading:function(){var a=this,d=a.xhr,b=d&&d.readyState,c=Ext.data.flash&&Ext.data.flash.BinaryXhr;if(!d||a.aborted||a.timedout){return false}if(c&&d instanceof c){return b!==4}return b!==0&&b!==4},openRequest:function(c,a,d,h,b){var f=this,g=f.newRequest(c);if(h){g.open(a.method,a.url,d,h,b)}else{if(f.isXdr){g.open(a.method,a.url)}else{g.open(a.method,a.url,d)}}if(c.binary||f.binary){if(window.Uint8Array){g.responseType="arraybuffer"}else{if(g.overrideMimeType){g.overrideMimeType("text/plain; charset=x-user-defined")}}}if(c.withCredentials||f.withCredentials){g.withCredentials=true}return g},newRequest:function(a){var b=this,c;if(a.binaryData){if(window.Uint8Array){c=b.getXhrInstance()}else{c=new Ext.data.flash.BinaryXhr()}}else{if(b.cors&&Ext.isIE9m){c=b.getXdrInstance();b.isXdr=true}else{c=b.getXhrInstance();b.isXdr=false}}return c},setupHeaders:function(r,s,f,d){var m=this,b=Ext.apply({},s.headers||{},m.defaultHeaders),q=m.defaultPostHeader,o=s.jsonData,a=s.xmlData,j="Content-Type",c=m.useDefaultXhrHeader,p,g;if(!b.hasOwnProperty(j)&&(f||d)){if(f){if(s.rawData){q="text/plain"}else{if(a&&Ext.isDefined(a)){q="text/xml"}else{if(o&&Ext.isDefined(o)){q="application/json"}}}}b[j]=q}if(c&&!b["X-Requested-With"]){b["X-Requested-With"]=m.defaultXhrHeader}if(b[j]===undefined||b[j]===null){delete b[j]}try{for(p in b){if(b.hasOwnProperty(p)){g=b[p];r.setRequestHeader(p,g)}}}catch(h){m.owner.fireEvent("exception",p,g)}return b},getXdrInstance:function(){var a;if(Ext.ieVersion>=8){a=new XDomainRequest()}else{Ext.raise({msg:"Your browser does not support CORS"})}return a},getXhrInstance:(function(){var b=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],c=0,a=b.length,f;for(;c<a;++c){try{f=b[c];f();break}catch(d){}}return f}()),processXdrRequest:function(b,c){var a=this;delete b.headers;b.contentType=b.options.contentType||a.defaultXdrContentType;c.onload=Ext.Function.bind(a.onStateChange,a,[true]);c.onerror=c.ontimeout=Ext.Function.bind(a.onStateChange,a,[false])},processXdrResponse:function(a,b){a.getAllResponseHeaders=function(){return[]};a.getResponseHeader=function(){return""};a.contentType=b.contentType||this.defaultXdrContentType},onStateChange:function(b){var c=this,d=c.xhr,a=Ext.GlobalEvents;if((d&&d.readyState==4)||c.isXdr){c.clearTimer();c.onComplete(b);c.cleanup();if(a.hasListeners.idle){a.fireEvent("idle")}}},onComplete:function(j){var f=this,a=f.owner,m=f.options,h=f.xhr,b={success:false,isException:false},o,g,c;if(!h||f.destroyed){return f.result=b}try{o=Ext.data.request.Ajax.parseStatus(h.status);if(o.success){o.success=h.readyState===4}}catch(d){o=b}g=f.success=f.isXdr?j:o.success;if(g){c=f.createResponse(h);a.fireEvent("requestcomplete",a,c,m);Ext.callback(m.success,m.scope,[c,m])}else{if(o.isException||f.aborted||f.timedout){c=f.createException(h)}else{c=f.createResponse(h)}a.fireEvent("requestexception",a,c,m);Ext.callback(m.failure,m.scope,[c,m])}f.result=c;Ext.callback(m.callback,m.scope,[m,g,c]);a.onRequestComplete(f);Ext.data.request.Base.prototype.onComplete.call(this,j);return c},createResponse:function(m){var h=this,c=h.isXdr,b={},o=c?[]:m.getAllResponseHeaders().replace(/\r\n/g,"\n").split("\n"),f=o.length,p,g,j,d,a;while(f--){p=o[f];g=p.indexOf(":");if(g>=0){j=p.substr(0,g).toLowerCase();if(p.charAt(g+1)==" "){++g}b[j]=p.substr(g+1)}}d={request:h,requestId:h.id,status:m.status,statusText:m.statusText,getResponseHeader:function(q){return b[q.toLowerCase()]},getAllResponseHeaders:function(){return b}};if(c){h.processXdrResponse(d,m)}if(h.binary){d.responseBytes=h.getByteArray(m)}else{d.responseText=m.responseText;d.responseXML=m.responseXML}return d},destroy:function(){this.xhr=null;Ext.data.request.Base.prototype.destroy.call(this)},privates:{getByteArray:function(j){var c=j.response,b=j.responseBody,m=Ext.data.flash&&Ext.data.flash.BinaryXhr,a,h,f,d;if(j instanceof m){a=j.responseBytes}else{if(window.Uint8Array){a=c?new Uint8Array(c):[]}else{if(Ext.isIE9p){try{a=new VBArray(b).toArray()}catch(g){a=[]}}else{if(Ext.isIE){if(!this.self.vbScriptInjected){this.injectVBScript()}getIEByteArray(j.responseBody,a=[])}else{a=[];h=j.responseText;f=h.length;for(d=0;d<f;d++){a.push(h.charCodeAt(d)&255)}}}}}return a},injectVBScript:function(){var a=document.createElement("script");a.type="text/vbscript";a.text=["Function getIEByteArray(byteArray, out)","Dim len, i","len = LenB(byteArray)","For i = 1 to len","out.push(AscB(MidB(byteArray, i, 1)))","Next","End Function"].join("\n");Ext.getHead().dom.appendChild(a);this.self.vbScriptInjected=true}}},0,0,0,0,["request.ajax"],0,[Ext.data.request,"Ajax"],0));(Ext.cmd.derive("Ext.data.request.Form",Ext.data.request.Base,{start:function(d){var c=this,b=c.options,a=c.requestOptions;Ext.data.request.Base.prototype.start.call(this,d);c.form=c.upload(b.form,a.url,a.data,b);return c},abort:function(b){var a=this,d;if(a.isLoading()){try{d=a.frame.dom;if(d.stop){d.stop()}else{d.document.execCommand("Stop")}}catch(c){}}Ext.data.request.Base.prototype.abort.call(this,b);a.onComplete();a.cleanup()},cleanup:function(){var a=this,b=a.frame;if(b){b.un("load",a.onComplete,a);Ext.removeNode(b)}a.frame=a.form=null},isLoading:function(){return !!this.frame},upload:function(b,j,A,g){b=Ext.getDom(b);g=g||{};var y=document.createElement("iframe"),q=Ext.get(y),s=q.id,c=[],d="multipart/form-data",z={target:b.target,method:b.method,encoding:b.encoding,enctype:b.enctype,action:b.action},a=function(h,v){m=document.createElement("input");Ext.fly(m).set({type:"hidden",value:v,name:h});b.appendChild(m);c.push(m)},m,p,u,B,t,o,r,w,f;q.set({name:s,cls:"x-hidden-display",src:Ext.SSL_SECURE_URL,tabIndex:-1});document.body.appendChild(y);if(document.frames){document.frames[s].name=s}Ext.fly(b).set({target:s,method:"POST",enctype:d,encoding:d,action:j||z.action});if(A){p=Ext.Object.fromQueryString(A)||{};for(B in p){if(p.hasOwnProperty(B)){u=p[B];if(Ext.isArray(u)){t=u.length;for(o=0;o<t;o++){a(B,u[o])}}else{a(B,u)}}}}this.frame=q;q.on({load:this.onComplete,scope:this,single:!Ext.isOpera});b.submit();Ext.fly(b).set(z);for(r=c.length,w=0;w<r;w++){Ext.removeNode(c[w])}return b},getDoc:function(){var a=this.frame.dom;return(a&&(a.contentWindow.document||a.contentDocument))||(window.frames[a.id]||{}).document},getTimeout:function(){return this.options.timeout},onComplete:function(){var g=this,b=g.frame,a=g.owner,o=g.options,j,h,m,d,c;if(!b){return}if(g.aborted||g.timedout){g.result=c=g.createException();c.responseXML=null;c.responseText='{success:false,message:"'+Ext.String.trim(c.statusText)+'"}';j=o.failure;m=false}else{try{h=g.getDoc();g.result=c={responseText:"",responseXML:null};if(h){if(Ext.isOpera&&h.location==Ext.SSL_SECURE_URL){return}if(h.body){if((d=h.body.firstChild)&&/pre/i.test(d.tagName)){c.responseText=d.textContent||d.innerText}else{if((d=h.getElementsByTagName("textarea")[0])){c.responseText=d.value}else{c.responseText=h.body.textContent||h.body.innerText}}}c.responseXML=h.XMLDocument||h;j=o.success;m=true;c.status=200}else{Ext.raise("Could not acquire a suitable connection for the file upload service.")}}catch(f){g.result=c=g.createException();c.status=400;c.statusText=(f.message||f.description)+"";c.responseText='{success:false,message:"'+Ext.String.trim(c.statusText)+'"}';c.responseXML=null;j=o.failure;m=false}}g.frame=null;g.success=m;a.fireEvent(m?"requestcomplete":"requestexception",a,c,o);Ext.callback(j,o.scope,[c,o]);Ext.callback(o.callback,o.scope,[o,m,c]);a.onRequestComplete(g);Ext.asap(b.destroy,b);Ext.data.request.Base.prototype.onComplete.call(this)},destroy:function(){this.cleanup();Ext.data.request.Base.prototype.destroy.call(this)}},0,0,0,0,["request.form"],0,[Ext.data.request,"Form"],0));(Ext.cmd.derive("Ext.data.Connection",Ext.Base,{statics:{requestId:0},enctypeRe:/multipart\/form-data/i,config:{url:null,async:true,username:"",password:"",disableCaching:true,withCredentials:false,binary:false,cors:false,isXdr:false,defaultXdrContentType:"text/plain",disableCachingParam:"_dc",timeout:30000,extraParams:null,autoAbort:false,method:null,defaultHeaders:null,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:true,defaultXhrHeader:"XMLHttpRequest"},constructor:function(a){this.mixins.observable.constructor.call(this,a);this.requests={}},request:function(b){b=b||{};var d=this,a,c;if(d.fireEvent("beforerequest",d,b)!==false){a=d.setOptions(b,b.scope||Ext.global);c=d.createRequest(b,a);return c.start(a.data)}Ext.callback(b.callback,b.scope,[b,undefined,undefined]);return Ext.Deferred.rejected([b,undefined,undefined])},createRequest:function(b,a){var f=this,c=b.type||a.type,d;if(!c){c=f.isFormUpload(b)?"form":"ajax"}if(b.autoAbort||f.getAutoAbort()){f.abort()}d=Ext.Factory.request({type:c,owner:f,options:b,requestOptions:a,ownerConfig:f.getConfig()});f.requests[d.id]=d;f.latestId=d.id;return d},isFormUpload:function(a){var b=this.getForm(a);if(b){return a.isUpload||this.enctypeRe.test(b.getAttribute("enctype"))}return false},getForm:function(a){return Ext.getDom(a.form)},setOptions:function(q,p){var m=this,f=q.params||{},j=m.getExtraParams(),d=q.urlParams,c=q.url||m.getUrl(),h=q.cors,o=q.jsonData,b,a,g;if(h!==undefined){m.setCors(h)}if(Ext.isFunction(f)){f=f.call(p,q)}if(Ext.isFunction(c)){c=c.call(p,q)}c=this.setupUrl(q,c);g=q.rawData||q.binaryData||q.xmlData||o||null;if(o&&!Ext.isPrimitive(o)){g=Ext.encode(g)}if(q.binaryData){if(m.nativeBinaryPostSupport()){g=(new Uint8Array(q.binaryData));if((Ext.isChrome&&Ext.chromeVersion<22)||Ext.isSafari||Ext.isGecko){g=g.buffer}}}if(Ext.isObject(f)){f=Ext.Object.toQueryString(f)}if(Ext.isObject(j)){j=Ext.Object.toQueryString(j)}f=f+((j)?((f)?"&":"")+j:"");d=Ext.isObject(d)?Ext.Object.toQueryString(d):d;f=this.setupParams(q,f);b=(q.method||m.getMethod()||((f||g)?"POST":"GET")).toUpperCase();this.setupMethod(q,b);a=q.disableCaching!==false?(q.disableCaching||m.getDisableCaching()):false;if(b==="GET"&&a){c=Ext.urlAppend(c,(q.disableCachingParam||m.getDisableCachingParam())+"="+(new Date().getTime()))}if((b=="GET"||g)&&f){c=Ext.urlAppend(c,f);f=null}if(d){c=Ext.urlAppend(c,d)}return{url:c,method:b,data:g||f||null}},setupUrl:function(b,a){var c=this.getForm(b);if(c){a=a||c.action}return a},setupParams:function(a,d){var c=this.getForm(a),b;if(c&&!this.isFormUpload(a)){b=Ext.Element.serializeForm(c);d=d?(d+"&"+b):b}return d},setupMethod:function(a,b){if(this.isFormUpload(a)){return"POST"}return b},isLoading:function(a){if(!a){a=this.getLatest()}return a?a.isLoading():false},abort:function(a){if(!a){a=this.getLatest()}if(a&&a.isLoading()){a.abort()}},abortAll:function(){var b=this.requests,a;for(a in b){this.abort(b[a])}},getLatest:function(){var b=this.latestId,a;if(b){a=this.requests[b]}return a||null},clearTimeout:function(a){if(!a){a=this.getLatest()}if(a){a.clearTimer()}},onRequestComplete:function(a){delete this.requests[a.id]},nativeBinaryPostSupport:function(){return Ext.isChrome||(Ext.isSafari&&Ext.isDefined(window.Uint8Array))||(Ext.isGecko&&Ext.isDefined(window.Uint8Array))}},1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.data,"Connection"],0));(Ext.cmd.derive("Ext.Ajax",Ext.data.Connection,{singleton:true,autoAbort:false},0,0,0,0,0,0,[Ext,"Ajax"],0));(Ext.cmd.derive("Ext.AnimationQueue",Ext.Base,{singleton:true,constructor:function(){var a=this;a.queue=[];a.taskQueue=[];a.runningQueue=[];a.idleQueue=[];a.isRunning=false;a.isIdle=true;a.run=Ext.Function.bind(a.run,a);if(Ext.os.is.iOS){Ext.interval(a.watch,500,a)}},start:function(c,b,a){var d=this;d.queue.push(arguments);if(!d.isRunning){if(d.hasOwnProperty("idleTimer")){clearTimeout(d.idleTimer);delete d.idleTimer}if(d.hasOwnProperty("idleQueueTimer")){clearTimeout(d.idleQueueTimer);delete d.idleQueueTimer}d.isIdle=false;d.isRunning=true;d.doStart()}},watch:function(){if(this.isRunning&&Ext.now()-this.lastRunTime>=500){this.run()}},run:function(){var f=this;if(!f.isRunning){return}var a=f.runningQueue,b=Ext.now(),c,d;f.lastRunTime=b;f.frameStartTime=b;a.push.apply(a,f.queue);for(c=0,d=a.length;c<d;c++){f.invoke(a[c])}a.length=0;f.doIterate()},doStart:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run);this.lastRunTime=Ext.now()},doIterate:function(){this.animationFrameId=Ext.Function.requestAnimationFrame(this.run)},doStop:function(){Ext.Function.cancelAnimationFrame(this.animationFrameId)},stop:function(f,d,b){var j=this;if(!j.isRunning){return}var a=j.queue,h=a.length,c,g;for(c=0;c<h;c++){g=a[c];if(g[0]===f&&g[1]===d&&g[2]===b){a.splice(c,1);c--;h--}}if(h===0){j.doStop();j.isRunning=false;j.idleTimer=Ext.defer(j.whenIdle,100,j)}},onIdle:function(f,d,a){var c=this.idleQueue,b,g,h;for(b=0,g=c.length;b<g;b++){h=c[b];if(f===h[0]&&d===h[1]&&a===h[2]){return}}c.push(arguments);if(this.isIdle){this.processIdleQueue()}},unIdle:function(f,d,a){var c=this.idleQueue,b,g,h;for(b=0,g=c.length;b<g;b++){h=c[b];if(f===h[0]&&d===h[1]&&a===h[2]){c.splice(b,1);return true}}return false},queueTask:function(c,b,a){this.taskQueue.push(arguments);this.processTaskQueue()},dequeueTask:function(f,d,a){var c=this.taskQueue,b,g,h;for(b=0,g=c.length;b<g;b++){h=c[b];if(f===h[0]&&d===h[1]&&a===h[2]){c.splice(b,1);b--;g--}}},invoke:function(d){var c=d[0],b=d[1],a=d[2];c=(typeof c=="string"?b[c]:c);if(Ext.isArray(a)){c.apply(b,a)}else{c.call(b,a)}},whenIdle:function(){this.isIdle=true;this.processIdleQueue()},processIdleQueue:function(){if(!this.hasOwnProperty("idleQueueTimer")){this.idleQueueTimer=Ext.defer(this.processIdleQueueItem,1,this)}},processIdleQueueItem:function(){delete this.idleQueueTimer;if(!this.isIdle){return}var a=this.idleQueue,b;if(a.length>0){b=a.shift();this.invoke(b);this.processIdleQueue()}},processTaskQueue:function(){if(!this.hasOwnProperty("taskQueueTimer")){this.taskQueueTimer=Ext.defer(this.processTaskQueueItem,15,this)}},processTaskQueueItem:function(){delete this.taskQueueTimer;var a=this.taskQueue,b;if(a.length>0){b=a.shift();this.invoke(b);this.processTaskQueue()}}},1,0,0,0,0,0,[Ext,"AnimationQueue"],0));(Ext.cmd.derive("Ext.ComponentManager",Ext.Base,{alternateClassName:"Ext.ComponentMgr",singleton:true,count:0,typeName:"xtype",constructor:function(a){var b=this;Ext.apply(b,a||{});b.all={};b.references={};b.onAvailableCallbacks={}},create:function(a,b){if(typeof a==="string"){return Ext.widget(a)}if(a.isComponent){return a}if("xclass" in a){return Ext.create(a.xclass,a)}return Ext.widget(a.xtype||b,a)},get:function(a){return this.all[a]},register:function(a){var f=this,d=f.all,c=a.getId(),b=f.onAvailableCallbacks;d[c]=a;if(a.getReference&&a.getReference()){f.references[c]=a}++f.count;if(!f.hasFocusListener){Ext.on("focus",f.onGlobalFocus,f);f.hasFocusListener=true}b=b&&b[c];if(b&&b.length){f.notifyAvailable(a)}},unregister:function(a){var b=a.getId();if(a.getReference&&a.getReference()){this.references[b]=null;delete this.references[b]}this.all[b]=null;delete this.all[b];this.count--},markReferencesDirty:function(){this.referencesDirty=true},fixReferences:function(){var c=this,b=c.references,a;if(c.referencesDirty){for(a in b){if(b.hasOwnProperty(a)){b[a].fixReference()}}c.referencesDirty=false}},onAvailable:function(h,c,b){var g=this,f=g.onAvailableCallbacks,a=g.all,d;if(h in a){d=a[h];c.call(b||d,d)}else{if(h){if(!Ext.isArray(f[h])){f[h]=[]}f[h].push(function(j){c.call(b||j,j)})}}},notifyAvailable:function(b){var a=this.onAvailableCallbacks[b&&b.getId()]||[];while(a.length){(a.shift())(b)}},each:function(b,a){return Ext.Object.each(this.all,b,a)},getCount:function(){return this.count},getAll:function(){return Ext.Object.getValues(this.all)},getActiveComponent:function(){return Ext.Component.fromElement(Ext.dom.Element.getActiveElement())},onGlobalFocus:function(h){var d=this,b=h.toElement,j=h.fromElement,g=Ext.Component.fromElement(b),a=Ext.Component.fromElement(j),c,f;if(g===a){return}c=d.getCommonAncestor(a,g);if(a&&!(a.destroyed||a.destroying)){if(a.handleBlurEvent){a.handleBlurEvent(h)}for(f=a;f&&f!==c;f=f.getRefOwner()){if(!(f.destroyed||f.destroying)){f.onFocusLeave({event:h.event,type:"focusleave",target:j,relatedTarget:b,fromComponent:a,toComponent:g})}}}if(g&&!g.destroyed){if(g.handleFocusEvent){g.handleFocusEvent(h)}for(f=g;f&&f!==c;f=f.getRefOwner()){f.onFocusEnter({event:h.event,type:"focusenter",relatedTarget:j,target:b,fromComponent:a,toComponent:g})}}},getCommonAncestor:function(b,a){if(b===a){return b}while(b&&!(b.isAncestor(a)||b===a)){b=b.getRefOwner()}return b},privates:{clearAll:function(){this.all={};this.references={};this.onAvailableCallbacks={}},fromElement:function(b,d,c){var h=Ext.getDom(b),a=this.all,f=0,m,g,j;if(typeof d!=="number"){m=Ext.getDom(d);d=Number.MAX_VALUE}while(h&&h.nodeType===1&&f<d&&h!==m){g=h.getAttribute("data-componentid")||h.id;if(g){j=a[g];if(j&&(!c||Ext.ComponentQuery.is(j,c))){return j}f++}h=h.parentNode}return null}},deprecated:{5:{methods:{isRegistered:null,registerType:null}}}},1,0,0,0,0,0,[Ext,"ComponentManager",Ext,"ComponentMgr"],function(){Ext.getCmp=function(a){return Ext.ComponentManager.get(a)}}));Ext.ns("Ext.util").Operators={"=":function(b,c){return b==c},"!=":function(b,c){return b!=c},"^=":function(b,c){return b&&b.substr(0,c.length)==c},"$=":function(b,c){return b&&b.substr(b.length-c.length)==c},"*=":function(b,c){return b&&b.indexOf(c)!==-1},"%=":function(b,c){return(b%c)===0},"|=":function(b,c){return b&&(b==c||b.substr(0,c.length+1)==c+"-")},"~=":function(b,c){return b&&(" "+b+" ").indexOf(" "+c+" ")!=-1}};(Ext.cmd.derive("Ext.util.LruCache",Ext.util.HashMap,{config:{maxSize:null},add:function(a,f){var d=this,c,b;d.removeAtKey(a);b=d.last;c={prev:b,next:null,key:a,value:f};if(b){b.next=c}else{d.first=c}d.last=c;Ext.util.HashMap.prototype.add.call(this,a,c);d.prune();return f},insertBefore:function(b,g,c){var f=this,a,d;if(c=this.map[this.findKey(c)]){a=f.findKey(g);if(a){f.unlinkEntry(d=f.map[a])}else{d={prev:c.prev,next:c,key:b,value:g}}if(c.prev){d.prev.next=d}else{f.first=d}d.next=c;c.prev=d;f.prune();return g}else{return f.add(b,g)}},get:function(a){var b=this.map[a];if(b){if(b.next){this.moveToEnd(b)}return b.value}},removeAtKey:function(a){this.unlinkEntry(this.map[a]);return Ext.util.HashMap.prototype.removeAtKey.apply(this,arguments)},clear:function(a){this.first=this.last=null;return Ext.util.HashMap.prototype.clear.call(this,a)},unlinkEntry:function(a){if(a){if(a.next){a.next.prev=a.prev}else{this.last=a.prev}if(a.prev){a.prev.next=a.next}else{this.first=a.next}a.prev=a.next=null}},moveToEnd:function(a){this.unlinkEntry(a);if(a.prev=this.last){this.last.next=a}else{this.first=a}this.last=a},getArray:function(c){var a=[],b=this.first;while(b){a.push(c?b.key:b.value);b=b.next}return a},each:function(c,b,a){var g=this,f=a?g.last:g.first,d=g.length;b=b||g;while(f){if(c.call(b,f.key,f.value,d)===false){break}f=a?f.prev:f.next}return g},findKey:function(b){var a,c=this.map;for(a in c){if(c.hasOwnProperty(a)&&c[a].value===b){return a}}return undefined},clone:function(){var a=new this.self(this.initialConfig),c=this.map,b;a.suspendEvents();for(b in c){if(c.hasOwnProperty(b)){a.add(b,c[b].value)}}a.resumeEvents();return a},prune:function(){var b=this,a=b.getMaxSize(),c=a?(b.length-a):0;if(c>0){for(;b.first&&c;c--){b.removeAtKey(b.first.key)}}},destroy:function(){this.first=this.last=null;Ext.util.HashMap.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util,"LruCache"],0));(Ext.cmd.derive("Ext.ComponentQuery",Ext.Base,{singleton:true},0,0,0,0,0,0,[Ext,"ComponentQuery"],function(){var g=this,w=Ext.util.Operators,o=/(\d*)n\+?(\d*)/,f=/\D/,q=/^(\s)+/,p=/\\(.)/g,r=new Ext.util.LruCache({maxSize:100}),s=["var r = [],","i = 0,","it = items,","l = it.length,","c;","for (; i < l; i++) {","c = it[i];","if (c.{0}) {","r.push(c);","}","}","return r;"].join(""),t=function(z,y){return y.method.apply(this,[z].concat(y.args))},a=function(A,E){var y=[],B=0,D=A.length,C,z=E!==">";for(;B<D;B++){C=A[B];if(C.getRefItems){y=y.concat(C.getRefItems(z))}}return y},h=function(z){var y=[],A=0,C=z.length,B;for(;A<C;A++){B=z[A];while(!!(B=B.getRefOwner())){y.push(B)}}return y},d=function(z,E,D){if(E==="*"){return z.slice()}else{var y=[],A=0,C=z.length,B;for(;A<C;A++){B=z[A];if(B.isXType(E,D)){y.push(B)}}return y}},b=function(H,I,B,A){var L=[],G=0,z=H.length,K,D,J,y,F,E,C;if(I.charAt(0)==="@"){K=true;I=I.substr(1)}if(I.charAt(0)==="?"){K=true;D=true;I=I.substr(1)}for(;G<z;G++){J=H[G];C=J.getConfigurator&&J.self.$config.configs[I];if(C){y=J[C.names.get]()}else{if(K&&!J.hasOwnProperty(I)){continue}else{y=J[I]}}if(D){L.push(J)}else{if(B==="~="){if(y){if(!Ext.isArray(y)){y=y.split(" ")}for(F=0,E=y.length;F<E;F++){if(w[B](Ext.coerce(y[F],A),A)){L.push(J);break}}}}else{if(B==="/="){if(y!=null&&A.test(y)){L.push(J)}}else{if(!A?!!J[I]:w[B](Ext.coerce(y,A),A)){L.push(J)}}}}}return L},j=function(z,D){var y=[],A=0,C=z.length,B;for(;A<C;A++){B=z[A];if(B.getItemId()===D){y.push(B)}}return y},v=function(y,z,A){return g.pseudos[z](y,A)},m=/^(\s?([>\^])\s?|\s|$)/,u=/^(#)?((?:\\\.|[\w\-])+|\*)(?:\((true|false)\))?/,c=[{re:/^\.((?:\\\.|[\w\-])+)(?:\((true|false)\))?/,method:d,argTransform:function(y){if(y[1]!==undefined){y[1]=y[1].replace(p,"$1")}return y.slice(1)}},{re:/^(?:\[((?:[@?$])?[\w\-]*)\s*(?:([\^$*~%!\/]?=)\s*(['"])?((?:\\\]|.)*?)\3)?(?!\\)\])/,method:b,argTransform:function(B){var y=B[0],C=B[1],z=B[2],A=B[4],D;if(A!==undefined){A=A.replace(p,"$1")}if(z==="/="){D=r.get(A);if(D){A=D}else{A=r.add(A,new RegExp(A))}}return[C,z,A]}},{re:/^#((?:\\\.|[\w\-])+)/,method:j},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:v,argTransform:function(y){if(y[2]!==undefined){y[2]=y[2].replace(p,"$1")}return y.slice(1)}},{re:/^(?:\{([^\}]+)\})/,method:s}];g.Query=Ext.extend(Object,{constructor:function(y){y=y||{};Ext.apply(this,y)},execute:function(A){var B=this.operations,z=[],D,C,y;for(C=0,y=B.length;C<y;C++){D=B[C];z=z.concat(this._execute(A,D))}return z},_execute:function(z,B){var C=0,D=B.length,A,y;if(!z){y=Ext.ComponentManager.getAll()}else{if(Ext.isIterable(z)){y=z}else{if(z.isMixedCollection){y=z.items}}}for(;C<D;C++){A=B[C];if(A.mode==="^"){y=h(y||[z])}else{if(A.mode){y=a(y||[z],A.mode)}else{y=t(y||a([z]),A)}}if(C===D-1){return y}}return[]},is:function(B){var A=this.operations,z=false,y=A.length,D,C;if(y===0){return true}for(C=0;C<y;C++){D=A[C];z=this._is(B,D);if(z){return z}}return false},_is:function(G,y){var E=y.length,z=[G],A,C,B,D,F,H;for(C=E-1;C>=0;--C){A=y[C];D=A.mode;if(D){if(D==="^"){z=a(z," ")}else{if(D===">"){F=[];for(B=0,E=z.length;B<E;++B){H=z[B].getRefOwner();if(H){F.push(H)}}z=F}else{z=h(z)}}if(z.length===0){return false}}else{z=t(z,A);if(z.length===0){return false}}}return true},getMatches:function(B,z){var y=z.length,A;for(A=0;A<y;++A){B=t(B,z[A]);if(B.length===0){break}}return B},isMultiMatch:function(){return this.operations.length>1}});Ext.apply(g,{cache:new Ext.util.LruCache({maxSize:100}),pseudos:{not:function(E,y){var C=0,D=E.length,B=[],A=-1,z;for(;C<D;++C){z=E[C];if(!g.is(z,y)){B[++A]=z}}return B},first:function(z){var y=[];if(z.length>0){y.push(z[0])}return y},last:function(A){var y=A.length,z=[];if(y>0){z.push(A[y-1])}return z},focusable:function(z){var y=z.length,B=[],A=0,C;for(;A<y;A++){C=z[A];if(C.isFocusable&&C.isFocusable()){B.push(C)}}return B},"nth-child":function(E,F){var G=[],z=o.exec(F==="even"&&"2n"||F==="odd"&&"2n+1"||!f.test(F)&&"n+"+F||F),C=(z[1]||1)-0,D=z[2]-0,B,y,A;for(B=0;y=E[B];B++){A=B+1;if(C===1){if(D===0||A===D){G.push(y)}}else{if((A+D)%C===0){G.push(y)}}}return G},scrollable:function(z){var y=z.length,B=[],A=0,C;for(;A<y;A++){C=z[A];if(C.scrollable||C._scrollable){B.push(C)}}return B}},query:function(y,F){if(!y){return Ext.ComponentManager.all.getArray()}var A=[],G=[],D={},C=g.cache.get(y),B,E,z;if(!C){C=g.cache.add(y,g.parse(y))}A=C.execute(F);if(C.isMultiMatch()){B=A.length;for(z=0;z<B;z++){E=A[z];if(!D[E.id]){G.push(E);D[E.id]=true}}A=G}return A},visitPreOrder:function(y,A,C,B,z){g._visit(true,y,A,C,B,z)},visitPostOrder:function(y,A,C,B,z){g._visit(false,y,A,C,B,z)},_visit:function(I,z,H,G,J,D){var F=g.cache.get(z),C=[H],y,E=0,B,A;if(!F){F=g.cache.add(z,g.parse(z))}A=F.is(H);if(H.getRefItems){y=H.getRefItems();E=y.length}if(D){Ext.Array.push(C,D)}if(I){if(A){if(G.apply(J||H,C)===false){return false}}}for(B=0;B<E;B++){if(g._visit.call(g,I,z,y[B],G,J,D)===false){return false}}if(!I){if(A){if(G.apply(J||H,C)===false){return false}}}},is:function(z,y){if(!y){return true}var A=g.cache.get(y);if(!A){A=g.cache.add(y,g.parse(y))}return A.is(z)},parse:function(z){var A=[],C,D,B,y;C=Ext.splitAndUnescape(z,",");for(B=0,y=C.length;B<y;B++){D=Ext.String.trim(C[B]);A.push(g._parse(D))}return new g.Query({operations:A})},_parse:function(E){var z=[],C=Ext.String.trim,A=c.length,J,F,D,K,L,M,B,G,H,y,I;while(E&&J!==E){J=E;F=E.match(u);if(F){K=F[1];D=C(F[2]).replace(p,"$1");if(K==="#"){z.push({method:j,args:[D]})}else{z.push({method:d,args:[D,Boolean(F[3])]})}E=E.replace(F[0],"").replace(q,"$1")}while(!(L=E.match(m))){for(G=0;E&&G<A;G++){H=c[G];M=E.match(H.re);y=H.method;B=H.argTransform;if(M){if(B){I=B(M)}else{I=M.slice(1)}z.push({method:Ext.isString(H.method)?Ext.functionFactory("items",Ext.String.format.apply(Ext.String,[y].concat(M.slice(1)))):H.method,args:I});E=E.replace(M[0],"").replace(q,"$1");break}if(G===(A-1)){Ext.raise('Invalid ComponentQuery selector: "'+arguments[0]+'"')}}}if(L[1]){z.push({mode:L[2]||L[1]});E=E.replace(L[0],"").replace(q,"")}}return z}});Ext.all=function(){return g.query.apply(g,arguments)};Ext.first=function(){var y=g.query.apply(g,arguments);return(y&&y[0])||null}}));(Ext.cmd.derive("Ext.Evented",Ext.Base,{alternateClassName:"Ext.EventedBase",initialized:false,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.initialized=true},onClassExtended:function(b,f){if(!f.hasOwnProperty("eventedConfig")){return}var d=f.config,g=f.eventedConfig,c,a;if(d){Ext.applyIf(d,g)}else{b.addConfig(g)}for(c in g){if(g.hasOwnProperty(c)){a=Ext.Config.get(c);f[a.names.set]=a.eventedSetter||a.getEventedSetter()}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext,"Evented",Ext,"EventedBase"],0));(Ext.cmd.derive("Ext.util.Positionable",Ext.Base,{mixinId:"positionable",_positionTopLeft:["position","top","left"],_alignRe:/^([a-z]+)-([a-z]+)([?!])?$/,afterSetPosition:Ext.emptyFn,adjustForConstraints:function(c,b){var a=this.getConstrainVector(b,c);if(a){c[0]+=a[0];c[1]+=a[1]}return c},alignTo:function(c,a,g,b){var f=this,d=f.el;return f.setXY(f.getAlignToXY(c,a,g),d.anim&&!!b?d.anim(b):false)},calculateAnchorXY:function(g,j,h,d){var m=this,c=m.el,o=document,f=(c.dom===o.body||c.dom===o),p=Math.round,q,b,a;g=(g||"tl").toLowerCase();d=d||{};b=d.width||(f?Ext.Element.getViewportWidth():m.getWidth());a=d.height||(f?Ext.Element.getViewportHeight():m.getHeight());switch(g){case"tl":q=[0,0];break;case"bl":q=[0,a];break;case"tr":q=[b,0];break;case"c":q=[p(b*0.5),p(a*0.5)];break;case"t":q=[p(b*0.5),0];break;case"l":q=[0,p(a*0.5)];break;case"r":q=[b,p(a*0.5)];break;case"b":q=[p(b*0.5),a];break;case"tc":q=[p(b*0.5),0];break;case"bc":q=[p(b*0.5),a];break;case"br":q=[b,a]}return[q[0]+j,q[1]+h]},convertPositionSpec:Ext.identityFn,getAlignToXY:function(m,C,f){var D=this,d,B,a,h,v,g,w,z,t,u,A,s,r,b,c,j,p,q,o;m=Ext.get(m.el||m);if(!m||!m.dom){}f=f||[0,0];C=(!C||C==="?"?"tl-bl?":(!(/-/).test(C)&&C!==""?"tl-"+C:C||"tl-bl")).toLowerCase();C=D.convertPositionSpec(C);a=C.match(D._alignRe);s=a[1];r=a[2];A=!!a[3];h=D.getAnchorXY(s,true);v=D.getAnchorToXY(m,r,false);q=v[0]-h[0]+f[0];o=v[1]-h[1]+f[1];if(A){if(a[3]==="!"){d=m}else{d=D.constrainTo||D.container||D.el.parent()}d=Ext.get(d.el||d);B=d.getConstrainRegion();B.right=B.left+d.el.dom.clientWidth;g=D.getWidth();w=D.getHeight();z=m.getRegion();b=s.charAt(0);c=s.charAt(s.length-1);j=r.charAt(0);p=r.charAt(r.length-1);t=(q<z.right&&q+g>=z.left)&&((b=="t"&&j=="b")||(b=="b"&&j=="t"));u=(o<z.bottom&&o+w>=z.top)&&((c=="r"&&p=="l")||(c=="l"&&p=="r"));if(q+g>B.right){if(u){q=z.left-g;u=false}else{q=B.right-g}}if(q<B.left){q=u?z.right:B.left}if(o+w>B.bottom){if(t){o=z.top-w;t=false}else{o=B.bottom-w}}if(o<B.top){o=t?z.bottom:B.top}}return[q,o]},getAnchorXY:function(d,j,b){var h=this,m=h.getXY(),a=h.el,p=document,c=a.dom==p.body||a.dom==p,o=a.getScroll(),g=c?o.left:j?0:m[0],f=c?o.top:j?0:m[1];return h.calculateAnchorXY(d,g,f,b)},getBox:function(d,j){var f=this,q=j?f.getLocalXY():f.getXY(),m=q[0],g=q[1],o=f.getWidth(),b=f.getHeight(),c,a,p;if(d){c=f.getBorderPadding();a=c.beforeX;p=c.beforeY;m+=a;g+=p;o-=(a+c.afterX);b-=(p+c.afterY)}return{x:m,left:m,0:m,y:g,top:g,1:g,width:o,height:b,right:m+o,bottom:g+b}},calculateConstrainedPosition:function(h,b,p,d){var o=this,c,j=o.floatParent,f=j?j.getTargetEl():null,a,g,m,r=false,q;if(p&&j){a=f.getXY();g=f.getBorderPadding();a[0]+=g.beforeX;a[1]+=g.beforeY;if(b){m=[b[0]+a[0],b[1]+a[1]]}}else{m=b}h=h||o.constrainTo||f||o.container||o.el.parent();if(p&&m){m=o.reverseTranslateXY(m)}c=((o.constrainHeader&&o.header.rendered)?o.header:o).getConstrainVector(h,m,d);if(c){r=b||o.getPosition(p);r[0]+=c[0];r[1]+=c[1]}return r},getConstrainRegion:function(){var h=this,c=h.el,a=c.dom.nodeName==="BODY",f=c.dom,g=c.getBorders(),j=c.getXY(),d=j[0]+g.beforeX,m=j[1]+g.beforeY,o,b,p;if(a){o=c.getScroll();d=o.left;m=o.top;b=Ext.Element.getViewportWidth();p=Ext.Element.getViewportHeight()}else{b=f.clientWidth;p=f.clientHeight}return new Ext.util.Region(m,d+b,m+p,d)},getConstrainVector:function(h,c,f){var a=this.getRegion(),d=[0,0],b=(this.shadow&&this.constrainShadow&&!this.shadowDisabled)?this.shadow.getShadowSize():undefined,m=false,j,g=this.constraintInsets;if(!(h instanceof Ext.util.Region)){h=Ext.get(h.el||h);j=h.getViewSize();h=h.getConstrainRegion();h.right=h.left+j.width;h.bottom=h.top+j.height}if(g){g=Ext.isObject(g)?g:Ext.Element.parseBox(g);h.adjust(g.top,g.right,g.bottom,g.left)}if(c){a.translateBy(c[0]-a.x,c[1]-a.y)}if(f){a.right=a.left+f[0];a.bottom=a.top+f[1]}if(b){h.adjust(b[0],-b[1],-b[2],b[3])}if(a.right>h.right){m=true;d[0]=(h.right-a.right)}if(a.left+d[0]<h.left){m=true;d[0]=(h.left-a.left)}if(a.bottom>h.bottom){m=true;d[1]=(h.bottom-a.bottom)}if(a.top+d[1]<h.top){m=true;d[1]=(h.top-a.top)}return m?d:false},getOffsetsTo:function(a){var c=this.getXY(),b=Ext.fly(a.el||a).getXY();return[c[0]-b[0],c[1]-b[1]]},getRegion:function(){var a=this.getBox();return new Ext.util.Region(a.top,a.right,a.bottom,a.left)},getClientRegion:function(){var b=this,a,c=b.getBox(),d=b.dom;a=d.offsetWidth-d.clientWidth;if(a){if(b.getStyle("direction")==="rtl"){c.left+=a}else{c.right-=a}}a=d.offsetHeight-d.clientHeight;if(a){c.bottom-=a}return new Ext.util.Region(c.top,c.right,c.bottom,c.left)},getViewRegion:function(){var g=this,c=g.el,a=c.dom.nodeName==="BODY",f,m,h,j,d,b,o;if(a){m=c.getScroll();d=m.left;j=m.top;b=Ext.Element.getViewportWidth();o=Ext.Element.getViewportHeight()}else{f=g.getBorderPadding();h=g.getXY();d=h[0]+f.beforeX;j=h[1]+f.beforeY;b=g.getWidth(true);o=g.getHeight(true)}return new Ext.util.Region(j,d+b,j+o,d)},move:function(m,b,c){var g=this,q=g.getXY(),o=q[0],j=q[1],d=[o-b,j],p=[o+b,j],h=[o,j-b],a=[o,j+b],f={l:d,left:d,r:p,right:p,t:h,top:h,up:h,b:a,bottom:a,down:a};m=m.toLowerCase();g.setXY([f[m][0],f[m][1]],c)},setBox:function(c){var b=this,a,d;if(c.isRegion){c={x:c.left,y:c.top,width:c.right-c.left,height:c.bottom-c.top}}b.constrainBox(c);a=c.x;d=c.y;b.setXY([a,d]);b.setSize(c.width,c.height);b.afterSetPosition(a,d);return b},constrainBox:function(d){var c=this,b,a,f;if(c.constrain||c.constrainHeader){a=("x" in d)?d.x:d.left;f=("y" in d)?d.y:d.top;b=c.calculateConstrainedPosition(null,[a,f],false,[d.width,d.height]);if(b){d.x=b[0];d.y=b[1]}}},translatePoints:function(a,c){var b=this.translateXY(a,c);return{left:b.x,top:b.y}},translateXY:function(h,f){var d=this,b=d.el,j=b.getStyle(d._positionTopLeft),a=j.position==="relative",c=parseFloat(j.left),g=parseFloat(j.top),m=d.getXY();if(Ext.isArray(h)){f=h[1];h=h[0]}if(isNaN(c)){c=a?0:b.dom.offsetLeft}if(isNaN(g)){g=a?0:b.dom.offsetTop}c=(typeof h==="number")?h-m[0]+c:undefined;g=(typeof f==="number")?f-m[1]+g:undefined;return{x:c,y:g}},reverseTranslateXY:function(o){var j=o,c=this.el,m=[],d=c.dom,b=d.offsetParent,a,f,h,g;if(b){a=c.isStyle("position","relative"),f=Ext.fly(b).getXY(),h=o[0]+f[0]+b.clientLeft;g=o[1]+f[1]+b.clientTop;if(a){h+=c.getPadding("l");g+=c.getPadding("t")}j=[h,g]}return j}},0,0,0,0,0,0,[Ext.util,"Positionable"],0));Ext.define("Ext.overrides.util.Positionable",{override:"Ext.util.Positionable",anchorTo:function(h,f,b,a,m,o){var g=this,j=!Ext.isEmpty(m),c=function(){g.alignTo(h,f,b,a);Ext.callback(o,g)},d=g.getAnchor();g.removeAnchor();Ext.apply(d,{fn:c,scroll:j});Ext.on("resize",c,null);if(j){Ext.getWin().on("scroll",c,null,{buffer:!isNaN(m)?m:50})}c();return g},getAnchor:function(){var b=this.el,c,a;if(!b.dom){return}c=b.getData();a=c._anchor;if(!a){a=c._anchor={}}return a},removeAnchor:function(){var a=this.getAnchor();if(a&&a.fn){Ext.un("resize",a.fn);if(a.scroll){Ext.getWin().on("scroll",a.fn)}delete a.fn}return this},setBox:function(c,a){var b=this;if(c.isRegion){c={x:c.left,y:c.top,width:c.right-c.left,height:c.bottom-c.top}}if(a){b.constrainBox(c);b.animate(Ext.applyIf({to:c,listeners:{afteranimate:Ext.Function.bind(b.afterSetPosition,b,[c.x,c.y])}},a))}else{arguments.callee.$previous.call(this,c)}return b}});(Ext.cmd.derive("Ext.dom.UnderlayPool",Ext.Base,{constructor:function(a){this.elementConfig=a;this.cache=[]},checkOut:function(){var a=this.cache.shift();if(!a){a=Ext.Element.create(this.elementConfig);a.setVisibilityMode(2)}return a},checkIn:function(a){this.cache.push(a)},reset:function(){var a=this.cache,b=a.length;while(b--){a[b].destroy()}this.cache=[]}},1,0,0,0,0,0,[Ext.dom,"UnderlayPool"],0));(Ext.cmd.derive("Ext.dom.Underlay",Ext.Base,{constructor:function(a){Ext.apply(this,a)},beforeShow:Ext.emptyFn,getInsertionTarget:function(){return this.target},getPool:function(){return this.pool||(this.self.prototype.pool=new Ext.dom.UnderlayPool(this.elementConfig))},hide:function(){var b=this,a=b.el;if(a){a.hide();b.getPool().checkIn(a);b.el=null;b.hidden=true}},realign:function(j,h,a,m){var f=this,b=f.el,d=f.target,c=f.offsets,g=Math.max;if(b){if(j==null){j=d.getX()}if(h==null){h=d.getY()}if(a==null){a=d.getWidth()}if(m==null){m=d.getHeight()}if(c){j=j+c.x;h=h+c.y;a=g(a+c.w,0);m=g(m+c.h,0)}b.setXY([j,h]);b.setSize(a,m)}},setZIndex:function(a){this.zIndex=a;if(this.el){this.el.setStyle("z-index",a)}},show:function(){var b=this,d=b.target,g=b.zIndex,a=b.el,c=b.getInsertionTarget().dom,f;if(!a){a=b.el=b.getPool().checkOut()}b.beforeShow();if(g==null){g=(parseInt(d.getStyle("z-index"),10))}if(g){a.setStyle("z-index",g)}a.setStyle("position",b.fixed?"fixed":"");f=a.dom;if(f.nextSibling!==c){d.dom.parentNode.insertBefore(f,c)}a.show();b.realign();b.hidden=false}},1,0,0,0,0,0,[Ext.dom,"Underlay"],0));(Ext.cmd.derive("Ext.dom.Shadow",Ext.dom.Underlay,{alternateClassName:"Ext.Shadow",mode:"drop",offset:4,cls:"x-"+(!Ext.supports.CSS3BoxShadow?"ie":"css")+"-shadow",constructor:function(b){var d=this,f,c,g,a;Ext.dom.Underlay.prototype.constructor.call(this,b);d.elementConfig={cls:d.cls,role:"presentation"};g=d.offset;a=Math.floor(g/2);d.opacity=50;switch(d.mode.toLowerCase()){case"drop":f={x:0,y:0,w:g,h:g};if(Ext.supports.CSS3BoxShadow){c={x:g,y:g,h:-g,w:-g}}else{c={x:-a,y:-a,h:-a,w:-a}}break;case"sides":f={x:-g,y:0,w:g*2,h:g};if(Ext.supports.CSS3BoxShadow){c={x:0,y:g,h:-g,w:0}}else{c={x:1+a-2*g,y:-(1+a),h:-1,w:a-1}}break;case"frame":f={x:-g,y:-g,w:g*2,h:g*2};if(Ext.supports.CSS3BoxShadow){c={x:0,y:0,h:0,w:0}}else{c={x:1+a-2*g,y:1+a-2*g,h:g-a-1,w:g-a-1}}break;case"bottom":f={x:-g,y:0,w:g*2,h:g};if(Ext.supports.CSS3BoxShadow){c={x:0,y:g,h:-g,w:0}}else{c={x:0,y:g,h:0,w:0}}break}d.offsets=c;d.outerOffsets=f},getShadowSize:function(){var b=this,d=b.el?b.offset:0,a=[d,d,d,d],c=b.mode.toLowerCase();if(b.el&&c!=="frame"){a[0]=0;if(c=="drop"){a[3]=0}}return a},boxShadowProperty:(function(){var b="boxShadow",a=document.documentElement.style;if(!("boxShadow" in a)){if("WebkitBoxShadow" in a){b="WebkitBoxShadow"}else{if("MozBoxShadow" in a){b="MozBoxShadow"}}}return b}()),beforeShow:function(){var b=this,a=b.el.dom.style,c=b.shim;if(Ext.supports.CSS3BoxShadow){a[b.boxShadowProperty]="0 0 "+(b.offset+2)+"px #888"}else{a.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+b.opacity+") progid:DXImageTransform.Microsoft.Blur(pixelradius="+(b.offset)+")"}if(c){c.realign()}},setOpacity:function(a){var b=this.el;if(b){if(Ext.isIE&&!Ext.supports.CSS3BoxShadow){a=Math.floor(a*100/2)/100}this.opacity=a;b.setOpacity(a)}}},1,0,0,0,0,0,[Ext.dom,"Shadow",Ext,"Shadow"],0));(Ext.cmd.derive("Ext.dom.Shim",Ext.dom.Underlay,{cls:"x-shim",constructor:function(a){Ext.dom.Underlay.prototype.constructor.call(this,a);this.elementConfig={tag:"iframe",cls:this.cls,role:"presentation",frameBorder:"0",src:Ext.SSL_SECURE_URL,tabindex:"-1"}},getInsertionTarget:function(){var a=this.shadow;return(a&&a.el)||this.target}},1,0,0,0,0,0,[Ext.dom,"Shim"],0));(Ext.cmd.derive("Ext.dom.ElementEvent",Ext.util.Event,{addListener:function(h,o,p,c,f){var g=this,j=false,a=g.name,b,d,m;p=p||{};if(p.delegated===false||Ext.event.publisher.Dom.instance.directEvents[a]){if(p.capture){m=g.directCaptures||(g.directCaptures=new Ext.util.Event(g.observable,a));j=m.addListener(h,o,p,c,f)}else{d=g.directs||(g.directs=new Ext.util.Event(g.observable,a));j=d.addListener(h,o,p,c,f)}}else{if(p.capture){b=g.captures||(g.captures=new Ext.util.Event(g.observable,a));j=b.addListener(h,o,p,c,f)}else{j=Ext.util.Event.prototype.addListener.call(this,h,o,p,c,f)}}return j},removeListener:function(f,d){var g=this,a=g.captures,c=g.directs,h=g.directCaptures,j=false,b=g.findListener(f,d);if(b!==-1){j=Ext.util.Event.prototype.removeListener.call(this,f,d,b)}else{if(c){b=c.findListener(f,d)}if(b!==-1){j=c.removeListener(f,d,b)}else{if(a){b=a.findListener(f,d)}if(b!==-1){j=a.removeListener(f,d,b)}else{if(h){b=h.findListener(f,d);if(b!==-1){j=h.removeListener(f,d,b)}}}}}return j},clearListeners:function(){var c=this,d=c.directCaptures,b=c.directs,a=c.captures;if(d){d.clearListeners()}if(b){b.clearListeners()}if(a){a.clearListeners()}Ext.util.Event.prototype.clearListeners.call(this)},suspend:function(){var c=this,d=c.directCaptures,b=c.directs,a=c.captures;if(d){d.suspend()}if(b){b.suspend()}if(a){a.suspend()}Ext.util.Event.prototype.suspend.call(this)},resume:function(){var c=this,d=c.directCaptures,b=c.directs,a=c.captures;if(d){d.resume()}if(b){b.resume()}if(a){a.resume()}Ext.util.Event.prototype.resume.call(this)}},0,0,0,0,0,0,[Ext.dom,"ElementEvent"],0));(Ext.cmd.derive("Ext.event.publisher.Publisher",Ext.Base,{handledEvents:[],statics:{publishers:{},publishersByEvent:{}},constructor:function(){var b=this,a=b.type;b.handles={};b.registerEvents();Ext.event.publisher.Publisher.publishers[a]=b},registerEvents:function(f){var h=this,d=Ext.event.publisher.Publisher.publishersByEvent,b=f||h.handledEvents,g=b.length,a,c;for(c=0;c<g;c++){a=b[c];h.handles[a]=1;d[a]=h}},fire:function(c,a,b){var d;if(c.hasListeners[a]){d=c.events[a];if(d){d.fire.apply(d,b)}}}},1,0,0,0,0,0,[Ext.event.publisher,"Publisher"],0));(Ext.cmd.derive("Ext.util.Offset",Ext.Base,{statics:{fromObject:function(a){return new this(a.x,a.y)}},constructor:function(a,b){this.x=(a!=null&&!isNaN(a))?a:0;this.y=(b!=null&&!isNaN(b))?b:0;return this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(a){this.x=a.x;this.y=a.y},toString:function(){return"Offset["+this.x+","+this.y+"]"},equals:function(a){return(this.x==a.x&&this.y==a.y)},round:function(b){if(!isNaN(b)){var a=Math.pow(10,b);this.x=Math.round(this.x*a)/a;this.y=Math.round(this.y*a)/a}else{this.x=Math.round(this.x);this.y=Math.round(this.y)}},isZero:function(){return this.x==0&&this.y==0}},3,0,0,0,0,0,[Ext.util,"Offset"],0));(Ext.cmd.derive("Ext.util.Region",Ext.Base,{isRegion:true,statics:{getRegion:function(a){return Ext.fly(a).getRegion()},from:function(a){return new this(a.top,a.right,a.bottom,a.left)}},constructor:function(f,b,a,d){var c=this;c.y=c.top=c[1]=f;c.right=b;c.bottom=a;c.x=c.left=c[0]=d},contains:function(b){var a=this;return(b.x>=a.x&&b.right<=a.right&&b.y>=a.y&&b.bottom<=a.bottom)},intersect:function(h){var g=this,d=Math.max(g.y,h.y),f=Math.min(g.right,h.right),a=Math.min(g.bottom,h.bottom),c=Math.max(g.x,h.x);if(a>d&&f>c){return new this.self(d,f,a,c)}else{return false}},union:function(h){var g=this,d=Math.min(g.y,h.y),f=Math.max(g.right,h.right),a=Math.max(g.bottom,h.bottom),c=Math.min(g.x,h.x);return new this.self(d,f,a,c)},constrainTo:function(b){var a=this,c=Ext.Number.constrain;a.top=a.y=c(a.top,b.y,b.bottom);a.bottom=c(a.bottom,b.y,b.bottom);a.left=a.x=c(a.left,b.x,b.right);a.right=c(a.right,b.x,b.right);return a},adjust:function(f,b,a,d){var c=this;c.top=c.y+=f;c.left=c.x+=d;c.right+=b;c.bottom+=a;return c},getOutOfBoundOffset:function(a,b){if(!Ext.isObject(a)){if(a=="x"){return this.getOutOfBoundOffsetX(b)}else{return this.getOutOfBoundOffsetY(b)}}else{b=a;var c=new Ext.util.Offset();c.x=this.getOutOfBoundOffsetX(b.x);c.y=this.getOutOfBoundOffsetY(b.y);return c}},getOutOfBoundOffsetX:function(a){if(a<=this.x){return this.x-a}else{if(a>=this.right){return this.right-a}}return 0},getOutOfBoundOffsetY:function(a){if(a<=this.y){return this.y-a}else{if(a>=this.bottom){return this.bottom-a}}return 0},isOutOfBound:function(a,b){if(!Ext.isObject(a)){if(a=="x"){return this.isOutOfBoundX(b)}else{return this.isOutOfBoundY(b)}}else{b=a;return(this.isOutOfBoundX(b.x)||this.isOutOfBoundY(b.y))}},isOutOfBoundX:function(a){return(a<this.x||a>this.right)},isOutOfBoundY:function(a){return(a<this.y||a>this.bottom)},restrict:function(b,d,a){if(Ext.isObject(b)){var c;a=d;d=b;if(d.copy){c=d.copy()}else{c={x:d.x,y:d.y}}c.x=this.restrictX(d.x,a);c.y=this.restrictY(d.y,a);return c}else{if(b=="x"){return this.restrictX(d,a)}else{return this.restrictY(d,a)}}},restrictX:function(b,a){if(!a){a=1}if(b<=this.x){b-=(b-this.x)*a}else{if(b>=this.right){b-=(b-this.right)*a}}return b},restrictY:function(b,a){if(!a){a=1}if(b<=this.y){b-=(b-this.y)*a}else{if(b>=this.bottom){b-=(b-this.bottom)*a}}return b},getSize:function(){return{width:this.right-this.x,height:this.bottom-this.y}},copy:function(){return new this.self(this.y,this.right,this.bottom,this.x)},copyFrom:function(b){var a=this;a.top=a.y=a[1]=b.y;a.right=b.right;a.bottom=b.bottom;a.left=a.x=a[0]=b.x;return this},toString:function(){return"Region["+this.top+","+this.right+","+this.bottom+","+this.left+"]"},translateBy:function(a,c){if(arguments.length==1){c=a.y;a=a.x}var b=this;b.top=b.y+=c;b.right+=a;b.bottom+=c;b.left=b.x+=a;return b},round:function(){var a=this;a.top=a.y=Math.round(a.y);a.right=Math.round(a.right);a.bottom=Math.round(a.bottom);a.left=a.x=Math.round(a.x);return a},equals:function(a){return(this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left)}},3,0,0,0,0,0,[Ext.util,"Region"],0));(Ext.cmd.derive("Ext.util.Point",Ext.util.Region,{radianToDegreeConstant:180/Math.PI,origin:{x:0,y:0},statics:{fromEvent:function(b){var a=b.changedTouches,c=(a&&a.length>0)?a[0]:b;return this.fromTouch(c)},fromTouch:function(a){return new this(a.pageX,a.pageY)},from:function(a){if(!a){return new this(0,0)}if(!(a instanceof this)){return new this(a.x,a.y)}return a}},constructor:function(a,b){if(a==null){a=0}if(b==null){b=0}Ext.util.Region.prototype.constructor.call(this,b,a,b,a)},clone:function(){return new this.self(this.x,this.y)},copy:function(){return this.clone.apply(this,arguments)},copyFrom:function(a){this.x=a.x;this.y=a.y;return this},toString:function(){return"Point["+this.x+","+this.y+"]"},equals:function(a){return(this.x===a.x&&this.y===a.y)},isCloseTo:function(c,b){if(typeof b=="number"){return this.getDistanceTo(c)<=b}var a=c.x,g=c.y,f=b.x,d=b.y;return(this.x<=a+f&&this.x>=a-f&&this.y<=g+d&&this.y>=g-d)},isWithin:function(){return this.isCloseTo.apply(this,arguments)},isContainedBy:function(a){if(!(a instanceof Ext.util.Region)){a=Ext.get(a.el||a).getRegion()}return a.contains(this)},roundedEquals:function(a){if(!a||typeof a!=="object"){a=this.origin}return(Math.round(this.x)===Math.round(a.x)&&Math.round(this.y)===Math.round(a.y))},getDistanceTo:function(b){if(!b||typeof b!=="object"){b=this.origin}var c=this.x-b.x,a=this.y-b.y;return Math.sqrt(c*c+a*a)},getAngleTo:function(b){if(!b||typeof b!=="object"){b=this.origin}var c=this.x-b.x,a=this.y-b.y;return Math.atan2(a,c)*this.radianToDegreeConstant}},3,0,0,0,0,0,[Ext.util,"Point"],function(){this.prototype.translate=this.prototype.translateBy}));(Ext.cmd.derive("Ext.event.Event",Ext.Base,{alternateClassName:"Ext.EventObjectImpl",isStopped:false,defaultPrevented:false,isEvent:true,statics:{resolveTextNode:function(a){return(a&&a.nodeType===3)?a.parentNode:a},pointerEvents:{pointerdown:1,pointermove:1,pointerup:1,pointercancel:1,pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerDown:1,MSPointerMove:1,MSPointerUp:1,MSPointerOver:1,MSPointerOut:1,MSPointerCancel:1,MSPointerEnter:1,MSPointerLeave:1},mouseEvents:{mousedown:1,mousemove:1,mouseup:1,mouseover:1,mouseout:1,mouseenter:1,mouseleave:1},clickEvents:{click:1,dblclick:1},touchEvents:{touchstart:1,touchmove:1,touchend:1,touchcancel:1},focusEvents:{focus:1,blur:1,focusin:1,focusout:1,focusenter:1,focusleave:1},pointerTypes:{2:"touch",3:"pen",4:"mouse",touch:"touch",pen:"pen",mouse:"mouse"}},constructor:function(b){var g=this,m=g.self,f=g.self.resolveTextNode,j=b.changedTouches,c=j?j[0]:b,h=b.type,a,d;g.pageX=c.pageX;g.pageY=c.pageY;g.target=g.delegatedTarget=f(b.target);d=b.relatedTarget;if(d){g.relatedTarget=f(d)}g.browserEvent=g.event=b;g.type=h;g.button=b.button||0;g.shiftKey=b.shiftKey;g.ctrlKey=b.ctrlKey||b.metaKey||false;g.altKey=b.altKey;g.charCode=b.charCode;g.keyCode=b.keyCode;g.buttons=b.buttons;if(g.button===0&&g.buttons===0){g.buttons=1}if(m.forwardTab!==undefined&&m.focusEvents[h]){g.forwardTab=m.forwardTab}if(m.mouseEvents[h]||m.clickEvents[h]){a="mouse"}else{if(m.pointerEvents[h]){a=m.pointerTypes[b.pointerType]}else{if(m.touchEvents[h]){a="touch"}}}if(a){g.pointerType=a}g.timeStamp=g.time=+(b.timeStamp||new Date())},chain:function(a){var b=Ext.Object.chain(this);b.parentEvent=this;return Ext.apply(b,a)},correctWheelDelta:function(c){var b=this.WHEEL_SCALE,a=Math.round(c/b);if(!a&&c){a=(c<0)?-1:1}return a},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.keyCode||this.charCode},getKeyName:function(){return this.keyCodes[this.keyCode]},getPoint:function(){var a=this.getXY();return new Ext.util.Point(a[0],a[1])},getRelatedTarget:function(b,f,a){var c=this.relatedTarget,d=null;if(c){if(b){d=Ext.fly(c).findParent(b,f,a)}else{d=a?Ext.get(c):c}}return d},getTarget:function(b,c,a){return b?Ext.fly(this.target).findParent(b,c,a):(a?Ext.get(this.target):this.target)},getTime:function(){return this.time},getWheelDelta:function(){var a=this.getWheelDeltas();return a.y},getWheelDeltas:function(){var d=this,c=d.browserEvent,b=0,a=0;if(Ext.isDefined(c.wheelDeltaX)){b=c.wheelDeltaX;a=c.wheelDeltaY}else{if(c.wheelDelta){a=c.wheelDelta}else{if(c.detail){a=-c.detail;if(a>100){a=3}else{if(a<-100){a=-3}}if(Ext.isDefined(c.axis)&&c.axis===c.HORIZONTAL_AXIS){b=a;a=0}}}}return{x:d.correctWheelDelta(b),y:d.correctWheelDelta(a)}},getX:function(){return this.getXY()[0]},getXY:function(){var c=this,f=c.xy;if(!f){f=c.xy=[c.pageX,c.pageY];var b=f[0],h,d,g,a;if(!b&&b!==0){h=c.browserEvent;d=document;g=d.documentElement;a=d.body;f[0]=h.clientX+(g&&g.scrollLeft||a&&a.scrollLeft||0)-(g&&g.clientLeft||a&&a.clientLeft||0);f[1]=h.clientY+(g&&g.scrollTop||a&&a.scrollTop||0)-(g&&g.clientTop||a&&a.clientTop||0)}}return f},getY:function(){return this.getXY()[1]},hasModifier:function(){var a=this;return !!(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey)},isNavKeyPress:function(d){var c=this,a=c.keyCode,b=c.type==="keypress";return((!b||Ext.isGecko)&&a>=33&&a<=40)||(!d&&(a===c.RETURN||a===c.TAB||a===c.ESC))},isSpecialKey:function(){var d=this,b=d.keyCode,a=Ext.isGecko,c=d.type==="keypress";return(a&&c&&d.charCode===0)||(this.isNavKeyPress())||(b===d.BACKSPACE)||(b===d.ENTER)||(b>=16&&b<=20)||((!c||a)&&b>=44&&b<=46)},makeUnpreventable:function(){this.browserEvent.preventDefault=Ext.emptyFn},preventDefault:function(){var b=this,a=b.parentEvent;b.defaultPrevented=true;if(a){a.defaultPrevented=true}b.browserEvent.preventDefault();return b},setCurrentTarget:function(a){this.currentTarget=this.delegatedTarget=a},stopEvent:function(){return this.preventDefault().stopPropagation()},stopPropagation:function(){var b=this,c=b.browserEvent,a=b.parentEvent;b.isStopped=true;if(a){a.isStopped=true}if(!c.stopPropagation){c.cancelBubble=true;return b}c.stopPropagation();return b},within:function(c,d,a){var b;if(c){b=d?this.getRelatedTarget():this.getTarget()}return b?Ext.fly(c).contains(b)||!!(a&&b===Ext.getDom(c)):false},deprecated:{"4.0":{methods:{getPageX:"getX",getPageY:"getY"}}}},1,0,0,0,0,0,[Ext.event,"Event",Ext,"EventObjectImpl"],function(a){var c=a.prototype,d={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,WHEEL_SCALE:(function(){var h;if(Ext.isGecko){h=3}else{if(Ext.isMac){if(Ext.isSafari&&Ext.webKitVersion>=532){h=120}else{h=12}h*=3}else{h=120}}return h}())},b={},f,g;Ext.apply(a,d);Ext.apply(c,d);delete d.WHEEL_SCALE;delete d.RETURN;for(f in d){g=d[f];b[g]=f}c.keyCodes=b;c.getTrueXY=c.getXY}));Ext.define("Ext.overrides.event.Event",{override:"Ext.event.Event",mousedownEvents:{mousedown:1,pointerdown:1,touchstart:1},injectEvent:(function(){var d,f={},c;if(!Ext.isIE9m&&document.createEvent){d={createHtmlEvent:function(o,j,h,g){var m=o.createEvent("HTMLEvents");m.initEvent(j,h,g);return m},createMouseEvent:function(z,w,q,p,s,o,j,m,g,v,u,r,t){var h=z.createEvent("MouseEvents"),y=z.defaultView||window;if(h.initMouseEvent){h.initMouseEvent(w,q,p,y,s,o,j,o,j,m,g,v,u,r,t)}else{h=z.createEvent("UIEvents");h.initEvent(w,q,p);h.view=y;h.detail=s;h.screenX=o;h.screenY=j;h.clientX=o;h.clientY=j;h.ctrlKey=m;h.altKey=g;h.metaKey=u;h.shiftKey=v;h.button=r;h.relatedTarget=t}return h},createUIEvent:function(q,o,j,h,m){var p=q.createEvent("UIEvents"),g=q.defaultView||window;p.initUIEvent(o,j,h,g,m);return p},fireEvent:function(j,g,h){j.dispatchEvent(h)}}}else{if(document.createEventObject){c={0:1,1:4,2:2};d={createHtmlEvent:function(o,j,h,g){var m=o.createEventObject();m.bubbles=h;m.cancelable=g;return m},createMouseEvent:function(y,w,q,p,s,o,j,m,g,v,u,r,t){var h=y.createEventObject();h.bubbles=q;h.cancelable=p;h.detail=s;h.screenX=o;h.screenY=j;h.clientX=o;h.clientY=j;h.ctrlKey=m;h.altKey=g;h.shiftKey=v;h.metaKey=u;h.button=c[r]||r;h.relatedTarget=t;return h},createUIEvent:function(p,m,h,g,j){var o=p.createEventObject();o.bubbles=h;o.cancelable=g;return o},fireEvent:function(j,g,h){j.fireEvent("on"+g,h)}}}}Ext.Object.each({load:[false,false],unload:[false,false],select:[true,false],change:[true,false],submit:[true,true],reset:[true,false],resize:[true,false],scroll:[true,false]},function(j,m){var h=m[0],g=m[1];f[j]=function(q,o){var p=d.createHtmlEvent(j,h,g);d.fireEvent(q,j,p)}});function b(j,h){var g=(j!=="mousemove");return function(q,m){var p=m.getXY(),o=d.createMouseEvent(q.ownerDocument,j,true,g,h,p[0],p[1],m.ctrlKey,m.altKey,m.shiftKey,m.metaKey,m.button,m.relatedTarget);d.fireEvent(q,j,o)}}Ext.each(["click","dblclick","mousedown","mouseup","mouseover","mousemove","mouseout"],function(g){f[g]=b(g,1)});Ext.Object.each({focusin:[true,false],focusout:[true,false],activate:[true,true],focus:[false,false],blur:[false,false]},function(j,m){var h=m[0],g=m[1];f[j]=function(q,o){var p=d.createUIEvent(q.ownerDocument,j,h,g,1);d.fireEvent(q,j,p)}});if(!d){f={};d={}}function a(h,g){}return function(m){var j=this,h=f[j.type]||a,g=m?(m.dom||m):j.getTarget();h(g,j)}}()),preventDefault:function(){var d=this,c=d.browserEvent,b=d.parentEvent,a,f;if(typeof c.type!=="unknown"){d.defaultPrevented=true;if(b){b.defaultPrevented=true}if(c.preventDefault){c.preventDefault()}else{if(c.type==="mousedown"){f=c.target;a=f.getAttribute("unselectable");if(a!=="on"){f.setAttribute("unselectable","on");Ext.defer(function(){f.setAttribute("unselectable",a)},1)}}c.returnValue=false;if(c.ctrlKey||c.keyCode>111&&c.keyCode<124){c.keyCode=-1}}}return d},stopPropagation:function(){var b=this,a=b.browserEvent;if(typeof a.type!=="unknown"){if(b.mousedownEvents[b.type]){Ext.GlobalEvents.fireMouseDown(b)}arguments.callee.$previous.call(this)}return b},deprecated:{"5.0":{methods:{clone:function(){return new this.self(this.browserEvent,this)}}}}},function(){var a=this,d,c=function(f){if(f.keyCode===9){a.forwardTab=!f.shiftKey}},b=function(f){if(f.keyCode===9){delete a.forwardTab}};if(Ext.isIE9m){d={0:0,1:0,4:1,2:2};a.override({statics:{enableIEAsync:function(h){var f,g={};for(f in h){g[f]=h[f]}return g}},constructor:function(j,m,g,f){var h=this;h.callParent([j,m,g,f]);h.button=d[j.button];if(j.type==="contextmenu"){h.button=2}h.toElement=j.toElement;h.fromElement=j.fromElement},mouseLeaveRe:/(mouseout|mouseleave)/,mouseEnterRe:/(mouseover|mouseenter)/,enableIEAsync:function(f){this.browserEvent=this.self.enableIEAsync(f)},getRelatedTarget:function(g,o,f){var j=this,h,m;if(!j.relatedTarget){h=j.type;if(j.mouseLeaveRe.test(h)){m=j.toElement}else{if(j.mouseEnterRe.test(h)){m=j.fromElement}}if(m){j.relatedTarget=j.self.resolveTextNode(m)}}return j.callParent([g,o,f])}});document.attachEvent("onkeydown",c);document.attachEvent("onkeyup",b);window.attachEvent("onunload",function(){document.detachEvent("onkeydown",c);document.detachEvent("onkeyup",b)})}else{if(document.addEventListener){document.addEventListener("keydown",c,true);document.addEventListener("keyup",b,true)}}});(Ext.cmd.derive("Ext.event.publisher.Dom",Ext.event.publisher.Publisher,{type:"dom",handledDomEvents:[],reEnterCount:0,captureEvents:{animationstart:1,animationend:1,resize:1,focus:1,blur:1,scroll:1},directEvents:{mouseenter:1,mouseleave:1,pointerenter:1,pointerleave:1,MSPointerEnter:1,MSPointerLeave:1,load:1,unload:1,beforeunload:1,error:1,DOMContentLoaded:1,DOMFrameContentLoaded:1,hashchange:1},blockedPointerEvents:{pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerOver:1,MSPointerOut:1,MSPointerEnter:1,MSPointerLeave:1},blockedCompatibilityMouseEvents:{mouseenter:1,mouseleave:1},constructor:function(){var a=this;a.bubbleSubscribers={};a.captureSubscribers={};a.directSubscribers={};a.directCaptureSubscribers={};a.delegatedListeners={};a.initHandlers();Ext.onInternalReady(a.onReady,a);Ext.event.publisher.Publisher.prototype.constructor.call(this)},registerEvents:function(){var g=this,d=Ext.event.publisher.Publisher.publishersByEvent,a=g.handledDomEvents,f=a.length,c=0,b;for(;c<f;c++){b=a[c];g.handles[b]=1;d[b]=g}Ext.event.publisher.Publisher.prototype.registerEvents.call(this)},onReady:function(){var d=this,a=d.handledDomEvents,c,b;if(a){for(b=0,c=a.length;b<c;b++){d.addDelegatedListener(a[b])}}Ext.getWin().on("unload",d.destroy,d)},initHandlers:function(){var a=this;a.onDelegatedEvent=Ext.bind(a.onDelegatedEvent,a);a.onDirectEvent=Ext.bind(a.onDirectEvent,a);a.onDirectCaptureEvent=Ext.bind(a.onDirectCaptureEvent,a)},addDelegatedListener:function(a){this.delegatedListeners[a]=1;this.target.addEventListener(a,this.onDelegatedEvent,!!this.captureEvents[a])},removeDelegatedListener:function(a){delete this.delegatedListeners[a];this.target.removeEventListener(a,this.onDelegatedEvent,!!this.captureEvents[a])},addDirectListener:function(b,c,a){c.dom.addEventListener(b,a?this.onDirectCaptureEvent:this.onDirectEvent,a)},removeDirectListener:function(b,c,a){c.dom.removeEventListener(b,a?this.onDirectCaptureEvent:this.onDirectEvent,a)},subscribe:function(c,b,g,a){var d=this,f,h;if(g&&!d.directEvents[b]){f=a?d.captureSubscribers:d.bubbleSubscribers;if(!d.handles[b]&&!d.delegatedListeners[b]){d.addDelegatedListener(b)}if(f[b]){++f[b]}else{f[b]=1}}else{f=a?d.directCaptureSubscribers:d.directSubscribers;h=c.id;f=f[b]||(f[b]={});if(f[h]){++f[h]}else{f[h]=1;d.addDirectListener(b,c,a)}}},unsubscribe:function(f,g,b,m){var j=this,h,d,a,c;if(b&&!j.directEvents[g]){h=j.captureSubscribers;d=j.bubbleSubscribers;a=m?h:d;if(a[g]){--a[g]}if(!j.handles[g]&&!d[g]&&!h[g]){this.removeDelegatedListener(g)}}else{a=m?j.directCaptureSubscribers:j.directSubscribers;c=f.id;a=a[g];if(a[c]){--a[c]}if(!a[c]){delete a[c];j.removeDirectListener(g,f,m)}}},getPropagatingTargets:function(d){var c=d,b=[],a;while(c){b.push(c);a=c.parentNode;if(!a){a=c.defaultView}c=a}return b},publish:function(b,j,h){var g=this,a,d,c,f;if(Ext.isArray(j)){a=j}else{if(g.captureEvents[b]){d=Ext.cache[j.id];a=d?[d]:[]}else{a=g.getPropagatingTargets(j)}}f=a.length;if(g.captureSubscribers[b]){for(c=f;c--;){d=Ext.cache[a[c].id];if(d){g.fire(d,b,h,false,true);if(h.isStopped){break}}}}if(!h.isStopped&&g.bubbleSubscribers[b]){for(c=0;c<f;c++){d=Ext.cache[a[c].id];if(d){g.fire(d,b,h,false,false);if(h.isStopped){break}}}}},fire:function(c,b,f,g,a){var d;if(c.hasListeners[b]){d=c.events[b];if(d){if(a&&g){d=d.directCaptures}else{if(a){d=d.captures}else{if(g){d=d.directs}}}if(d){f.setCurrentTarget(c.dom);d.fire(f,f.target)}}}},onDelegatedEvent:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doDelegatedEvent,this,[a])}else{this.doDelegatedEvent(a)}},doDelegatedEvent:function(d,c){var b=this,a=d.timeStamp;d=new Ext.event.Event(d);if(b.isEventBlocked(d)){return false}b.beforeEvent(d);Ext.frameStartTime=a;b.reEnterCount++;b.publish(d.type,d.target,d);b.reEnterCount--;if(c!==false){b.afterEvent(d)}return d},onDirectEvent:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doDirectEvent,this,[a,false])}else{this.doDirectEvent(a,false)}},onDirectCaptureEvent:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doDirectEvent,this,[a,true])}else{this.doDirectEvent(a,true)}},doDirectEvent:function(g,b){var d=this,f=g.currentTarget,a=g.timeStamp,c;g=new Ext.event.Event(g);if(d.isEventBlocked(g)){return}d.beforeEvent(g);Ext.frameStartTime=a;c=Ext.cache[f.id];if(c){d.reEnterCount++;d.fire(c,g.type,g,true,b);d.reEnterCount--}d.afterEvent(g)},beforeEvent:function(c){var f=c.browserEvent,a=Ext.event.publisher.Dom,b,d;if(f.type==="touchstart"){b=f.touches;if(b.length===1){d=b[0];a.lastTouchStartX=d.pageX;a.lastTouchStartY=d.pageY}}},afterEvent:function(d){var f=d.browserEvent,c=f.type,b=Ext.event.publisher.Dom,a=Ext.GlobalEvents;if(d.self.pointerEvents[c]&&d.pointerType!=="mouse"){b.lastScreenPointerEventTime=Ext.now()}if(c==="touchend"){b.lastTouchEndTime=Ext.now()}if(!this.reEnterCount&&a.hasListeners.idle&&!a.idleEventMask[c]){a.fireEvent("idle")}},isEventBlocked:function(f){var d=this,c=f.type,a=Ext.event.publisher.Dom,b=Ext.now();if(Ext.isGecko&&f.type==="click"&&f.button===2){return true}return(d.blockedPointerEvents[c]&&f.pointerType!=="mouse")||(d.blockedCompatibilityMouseEvents[c]&&(b-a.lastScreenPointerEventTime<1000))||(Ext.supports.TouchEvents&&f.self.mouseEvents[f.type]&&Math.abs(f.pageX-a.lastTouchStartX)<15&&Math.abs(f.pageY-a.lastTouchStartY)<15&&(Ext.now()-a.lastTouchEndTime)<1000)},destroy:function(){var a;for(a in this.delegatedListeners){this.removeDelegatedListener(a)}this.callParent()},reset:function(){var a=Ext.event.publisher.Dom;a.lastScreenPointerEventTime=a.lastTouchEndTime=a.lastTouchStartX=a.lastTouchStartY=undefined}},1,0,0,0,0,0,[Ext.event.publisher,"Dom"],function(b){var d=document,c=d.defaultView,a=b.prototype;if((Ext.os.is.iOS&&Ext.os.version.getMajor()<5)||Ext.browser.is.AndroidStock||!(c&&c.addEventListener)){a.target=d}else{a.target=c}b.instance=new b()}));Ext.define("Ext.overrides.event.publisher.Dom",{override:"Ext.event.publisher.Dom"},function(g){if(Ext.isIE9m){var b=document.documentElement,f=document.body,d=g.prototype,a,c;d.target=document;d.directBoundListeners={};a=function(m,j,h){m.target=m.srcElement||window;m.currentTarget=this;if(h){j.onDirectCaptureEvent(m)}else{j.onDirectEvent(m)}};c=function(j,h){j.target=j.srcElement||window;j.currentTarget=this;h.onDirectCaptureEvent(j)};g.override({addDelegatedListener:function(h){this.delegatedListeners[h]=1;this.target.attachEvent("on"+h,this.onDelegatedEvent)},removeDelegatedListener:function(h){delete this.delegatedListeners[h];this.target.detachEvent("on"+h,this.onDelegatedEvent)},addDirectListener:function(o,p,m){var r=this,s=p.dom,q=Ext.Function.bind(a,s,[r,m],true),h=r.directBoundListeners,j=h[o]||(h[o]={});j[s.id]=q;if(s.attachEvent){s.attachEvent("on"+o,q)}else{r.callParent(arguments)}},removeDirectListener:function(h,j){var m=j.dom;if(m.detachEvent){m.detachEvent("on"+h,this.directBoundListeners[h][m.id])}else{this.callParent(arguments)}},doDelegatedEvent:function(j,h){j.target=j.srcElement||window;if(j.type==="focusin"){j.relatedTarget=j.fromElement===f||j.fromElement===b?null:j.fromElement}else{if(j.type==="focusout"){j.relatedTarget=j.toElement===f||j.toElement===b?null:j.toElement}}return this.callParent([j,h])}});Ext.apply(d.directEvents,d.captureEvents);Ext.apply(d.directEvents,{change:1,input:1,paste:1});d.captureEvents={}}});(Ext.cmd.derive("Ext.event.publisher.Gesture",Ext.event.publisher.Dom,{type:"gesture",config:{async:true},isCancelEvent:{touchcancel:1,pointercancel:1,MSPointerCancel:1},handledEvents:[],handledDomEvents:[],constructor:function(b){var h=this,c=h.handledDomEvents,q=Ext.supports,o=q.TouchEvents,p=Ext.Function,d=h.onTouchStart,a=h.onTouchMove,m=h.onTouchEnd,g=p.createAnimationFrame(h.onTouchStart,h,null,1),f=p.createAnimationFrame(h.onTouchMove,h),j=p.createAnimationFrame(h.onTouchEnd,h,null,1);h._handlers={touchstart:d,touchmove:a,touchend:m,touchcancel:m,pointerdown:d,pointermove:a,pointerup:m,pointercancel:m,MSPointerDown:d,MSPointerMove:a,MSPointerUp:m,MSPointerCancel:m,mousedown:d,mousemove:a,mouseup:m};h._asyncHandlers={touchstart:g,touchmove:f,touchend:j,touchcancel:j,pointerdown:g,pointermove:f,pointerup:j,pointercancel:j,MSPointerDown:g,MSPointerMove:f,MSPointerUp:j,MSPointerCancel:j,mousedown:g,mousemove:f,mouseup:j};h.activeTouchesMap={};h.activeTouches=[];h.changedTouches=[];h.recognizers=[];if(o){h.onTargetTouchMove=h.onTargetTouchMove.bind(h);h.onTargetTouchEnd=h.onTargetTouchEnd.bind(h)}if(q.PointerEvents){c.push("pointerdown","pointermove","pointerup","pointercancel");h.mousePointerType="mouse"}else{if(q.MSPointerEvents){c.push("MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel");h.mousePointerType=4}else{if(o){c.push("touchstart","touchmove","touchend","touchcancel")}}}if(!c.length||(o&&Ext.isWebKit&&Ext.os.is.Desktop)){c.push("mousedown","mousemove","mouseup")}h.initConfig(b);return Ext.event.publisher.Dom.prototype.constructor.call(this)},onReady:function(){Ext.event.publisher.Dom.prototype.onReady.call(this);Ext.Array.sort(this.recognizers,function(g,f){var d=g.priority,c=f.priority;return(d>c)?1:(d<c)?-1:0})},registerRecognizer:function(a){var f=this,b=a.handledEvents,d=b.length,c;a.setOnRecognized(f.onRecognized);a.setCallbackScope(f);for(c=0;c<d;c++){f.handledEvents.push(b[c])}f.registerEvents(b);f.recognizers.push(a)},onRecognized:function(d,g,a){var j=this,m=g.changedTouches,h=m.length,o,f,c,b;a=a||{};a.type=d;a.target=m[0].target;a.isStopped=false;g=g.chain(a);if(h>1){o=[];for(c=0;c<h;c++){b=m[c];o.push(b.targets)}f=j.getCommonTargets(o)}else{f=m[0].targets}j.publish(d,f,g)},getCommonTargets:function(a){var m=a[0],g=a.length;if(g===1){return m}var d=[],f=1,h,b,c;while(true){h=m[m.length-f];if(!h){return d}for(c=1;c<g;c++){b=a[c];if(b[b.length-f]!==h){return d}}d.unshift(h);f++}return d},invokeRecognizers:function(c,g){var b=this.recognizers,f=b.length,d,a;if(c==="onStart"){for(d=0;d<f;d++){b[d].isActive=true}}for(d=0;d<f;d++){a=b[d];if(a.isActive&&a[c].call(a,g)===false){a.isActive=false}}},updateTouches:function(j,b){var q=this,u=j.browserEvent,f=u.changedTouches||[u],a=q.activeTouches,m=q.activeTouchesMap,s=[],p,h,d,g,c,o,t,r;for(c=0,o=f.length;c<o;c++){p=f[c];if("identifier" in p){h=p.identifier}else{if("pointerId" in p){h=p.pointerId}else{h=1}}d=m[h];if(!d){g=Ext.event.Event.resolveTextNode(p.target);d=m[h]={identifier:h,target:g,targets:q.getPropagatingTargets(g)};a.push(d)}if(b){delete m[h];Ext.Array.remove(a,d)}t=p.pageX;r=p.pageY;d.pageX=t;d.pageY=r;d.point=new Ext.util.Point(t,r);s.push(d)}j.touches=Ext.Array.clone(a);j.changedTouches=s},doDelegatedEvent:function(b){var a=this;b=Ext.event.publisher.Dom.prototype.doDelegatedEvent.call(this,b,false);if(b){if(!b.button||b.button<1){a.handlers[b.type].call(a,b)}a.afterEvent(b)}},onTouchStart:function(d){var a=this,c=d.target,b=d.browserEvent.touches;if(d.browserEvent.type==="touchstart"){c.addEventListener("touchmove",a.onTargetTouchMove);c.addEventListener("touchend",a.onTargetTouchEnd);c.addEventListener("touchcancel",a.onTargetTouchEnd)}if(b&&b.length<=a.activeTouches.length){a.removeGhostTouches(b)}a.updateTouches(d);if(!a.isStarted){a.isStarted=true;a.invokeRecognizers("onStart",d);if(Ext.enableGarbageCollector){Ext.dom.GarbageCollector.pause()}}a.invokeRecognizers("onTouchStart",d)},onTouchMove:function(c){var b=this,a=b.mousePointerType;if(b.isStarted){if(a&&c.browserEvent.pointerType===a&&c.buttons===0){c.type=Ext.dom.Element.prototype.eventMap.touchend;c.button=0;b.onTouchEnd(c);return}b.updateTouches(c);if(c.changedTouches.length>0){b.invokeRecognizers("onTouchMove",c)}}},onTouchEnd:function(b){var a=this;if(!a.isStarted){return}a.updateTouches(b,true);a.invokeRecognizers(a.isCancelEvent[b.type]?"onTouchCancel":"onTouchEnd",b);if(!a.activeTouches.length){a.isStarted=false;a.invokeRecognizers("onEnd",b);if(Ext.enableGarbageCollector){Ext.dom.GarbageCollector.resume()}}},onTargetTouchMove:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doTargetTouchMove,this,[a])}else{this.doTargetTouchMove(a)}},doTargetTouchMove:function(a){if(!Ext.getBody().contains(a.target)){this.onTouchMove(new Ext.event.Event(a))}},onTargetTouchEnd:function(a){if(Ext.elevateFunction){Ext.elevateFunction(this.doTargetTouchEnd,this,[a])}else{this.doTargetTouchEnd(a)}},doTargetTouchEnd:function(c){var a=this,b=c.target;b.removeEventListener("touchmove",a.onTargetTouchMove);b.removeEventListener("touchend",a.onTargetTouchEnd);b.removeEventListener("touchcancel",a.onTargetTouchEnd);if(!Ext.getBody().contains(b)){a.onTouchEnd(new Ext.event.Event(c))}},updateAsync:function(a){this.handlers=a?this._asyncHandlers:this._handlers},reset:function(){var f=this,b=f.recognizers,d=b.length,c,a;f.activeTouchesMap={};f.activeTouches=[];f.changedTouches=[];f.isStarted=false;for(c=0;c<d;c++){a=b[c];a.reset();a.isActive=false}Ext.event.publisher.Dom.prototype.reset.call(this)},privates:{removeGhostTouches:function(f){var c={},a=f.length,j=this.activeTouches,d=this.activeTouchesMap,b,h,g;for(b=0;b<a;++b){c[f[b].identifier]=true}b=j.length;while(b--){g=j[b];h=g.identifier;if(!f[h]){Ext.Array.remove(j,g);delete d[h]}}}}},1,0,0,0,0,0,[Ext.event.publisher,"Gesture"],function(a){a.instance=new a()}));Ext.define("Ext.overrides.event.publisher.Gesture",{override:"Ext.event.publisher.Gesture"},function(){if(Ext.isIE9m){this.override({updateTouches:function(c,a){var d=c.browserEvent,b=c.getXY();d.pageX=b[0];d.pageY=b[1];this.callParent([c,a])},doDelegatedEvent:function(a){this.callParent([Ext.event.Event.enableIEAsync(a)])}})}});(Ext.cmd.derive("Ext.mixin.Templatable",Ext.Mixin,{mixinConfig:{id:"templatable"},referenceAttributeName:"reference",referenceSelector:"[reference]",getElementConfig:function(){return{reference:"element"}},getElementTemplate:function(){var a=document.createDocumentFragment();a.appendChild(Ext.Element.create(this.getElementConfig(),true));return a},initElement:function(){var a=this.self.prototype;a.elementTemplate=this.getElementTemplate();a.initElement=a.doInitElement;this.initElement.apply(this,arguments)},linkElement:function(a,b){this.link(a,b)},doInitElement:function(){var h=this.referenceAttributeName,c,d,f,g,b,a;c=this.elementTemplate.cloneNode(true);d=c.querySelectorAll(this.referenceSelector);for(f=0,g=d.length;f<g;f++){b=d[f];a=b.getAttribute(h);b.removeAttribute(h);this.linkElement(a,b)}}},0,0,0,0,0,0,[Ext.mixin,"Templatable"],0));(Ext.cmd.derive("Ext.TaskQueue",Ext.Base,{singleton:true,pending:false,mode:true,constructor:function(){this.readQueue=[];this.writeQueue=[];this.run=Ext.Function.bind(this.run,this);if(Ext.os.is.iOS){Ext.interval(this.watch,500,this)}},requestRead:function(c,b,a){this.request(true);this.readQueue.push(arguments)},requestWrite:function(c,b,a){this.request(false);this.writeQueue.push(arguments)},request:function(a){if(!this.pending){this.pendingTime=Date.now();this.pending=true;this.mode=a;if(a){Ext.defer(this.run,1,this)}else{Ext.Function.requestAnimationFrame(this.run)}}},watch:function(){if(this.pending&&Date.now()-this.pendingTime>=500){this.run()}},run:function(){this.pending=false;var m=this.readQueue,f=this.writeQueue,c=null,g;if(this.mode){g=m;if(f.length>0){c=false}}else{g=f;if(m.length>0){c=true}}var b=g.slice(),d,h,a,j,o;g.length=0;for(d=0,h=b.length;d<h;d++){a=b[d];j=a[0];o=a[1];if(typeof j==="string"){j=o[j]}if(a.length>2){j.apply(o,a[2])}else{j.call(o)}}b.length=0;if(c!==null){this.request(c)}}},1,0,0,0,0,0,[Ext,"TaskQueue"],0));(Ext.cmd.derive("Ext.util.sizemonitor.Abstract",Ext.Base,{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},width:0,height:0,contentWidth:0,contentHeight:0,constructor:function(a){this.refresh=Ext.Function.bind(this.refresh,this);this.info={width:0,height:0,contentWidth:0,contentHeight:0,flag:0};this.initElement();this.initConfig(a);this.bindListeners(true)},bindListeners:Ext.emptyFn,applyElement:function(a){if(a){return Ext.get(a)}},updateElement:function(a){a.append(this.detectorsContainer);a.addCls("x-size-monitored")},applyArgs:function(a){return a.concat([this.info])},refreshMonitors:Ext.emptyFn,forceRefresh:function(){Ext.TaskQueue.requestRead("refresh",this)},getContentBounds:function(){return this.detectorsContainer.getBoundingClientRect()},getContentWidth:function(){return this.detectorsContainer.offsetWidth},getContentHeight:function(){return this.detectorsContainer.offsetHeight},refreshSize:function(){var d=this.getElement();if(!d||d.destroyed){return false}var b=d.getWidth(),o=d.getHeight(),a=this.getContentWidth(),m=this.getContentHeight(),j=this.contentWidth,g=this.contentHeight,c=this.info,f=false,h;this.width=b;this.height=o;this.contentWidth=a;this.contentHeight=m;h=((j!==a?1:0)+(g!==m?2:0));if(h>0){c.width=b;c.height=o;c.contentWidth=a;c.contentHeight=m;c.flag=h;f=true;this.getCallback().apply(this.getScope(),this.getArgs())}return f},refresh:function(a){if(this.refreshSize()||a){Ext.TaskQueue.requestWrite("refreshMonitors",this)}},destroy:function(){var b=this,a=b.getElement();b.bindListeners(false);if(a&&!a.destroyed){a.removeCls("x-size-monitored")}delete b._element;b.callParent()}},1,0,0,0,0,[[Ext.mixin.Templatable.prototype.mixinId||Ext.mixin.Templatable.$className,Ext.mixin.Templatable]],[Ext.util.sizemonitor,"Abstract"],0));(Ext.cmd.derive("Ext.util.sizemonitor.Scroll",Ext.util.sizemonitor.Abstract,{getElementConfig:function(){return{reference:"detectorsContainer",classList:["x-size-monitors","scroll"],children:[{reference:"expandMonitor",className:"expand"},{reference:"shrinkMonitor",className:"shrink"}]}},constructor:function(a){this.onScroll=Ext.Function.bind(this.onScroll,this);Ext.util.sizemonitor.Abstract.prototype.constructor.apply(this,arguments)},bindListeners:function(b){var a=b?"addEventListener":"removeEventListener";this.expandMonitor[a]("scroll",this.onScroll,true);this.shrinkMonitor[a]("scroll",this.onScroll,true)},forceRefresh:function(){Ext.TaskQueue.requestRead("refresh",this,[true])},onScroll:function(){Ext.TaskQueue.requestRead("refresh",this)},refreshMonitors:function(){var b=this.expandMonitor,c=this.shrinkMonitor,a=1000000;if(b&&!b.destroyed){b.scrollLeft=a;b.scrollTop=a}if(c&&!c.destroyed){c.scrollLeft=a;c.scrollTop=a}}},1,0,0,0,0,0,[Ext.util.sizemonitor,"Scroll"],0));(Ext.cmd.derive("Ext.util.sizemonitor.OverflowChange",Ext.util.sizemonitor.Abstract,{constructor:function(a){this.onExpand=Ext.Function.bind(this.onExpand,this);this.onShrink=Ext.Function.bind(this.onShrink,this);Ext.util.sizemonitor.Abstract.prototype.constructor.apply(this,arguments)},getElementConfig:function(){return{reference:"detectorsContainer",classList:["x-size-monitors","overflowchanged"],children:[{reference:"expandMonitor",className:"expand",children:[{reference:"expandHelper"}]},{reference:"shrinkMonitor",className:"shrink",children:[{reference:"shrinkHelper"}]}]}},bindListeners:function(b){var a=b?"addEventListener":"removeEventListener";this.expandMonitor[a](Ext.browser.is.Firefox?"underflow":"overflowchanged",this.onExpand,true);this.shrinkMonitor[a](Ext.browser.is.Firefox?"overflow":"overflowchanged",this.onShrink,true)},onExpand:function(a){if(Ext.browser.is.Webkit&&a.horizontalOverflow&&a.verticalOverflow){return}Ext.TaskQueue.requestRead("refresh",this)},onShrink:function(a){if(Ext.browser.is.Webkit&&!a.horizontalOverflow&&!a.verticalOverflow){return}Ext.TaskQueue.requestRead("refresh",this)},refreshMonitors:function(){if(this.destroyed){return}var g=this.expandHelper,f=this.shrinkHelper,b=this.getContentBounds(),d=b.width,a=b.height,c;if(g&&!g.destroyed){c=g.style;c.width=(d+1)+"px";c.height=(a+1)+"px"}if(f&&!f.destroyed){c=f.style;c.width=d+"px";c.height=a+"px"}Ext.TaskQueue.requestRead("refresh",this)}},1,0,0,0,0,0,[Ext.util.sizemonitor,"OverflowChange"],0));(Ext.cmd.derive("Ext.util.SizeMonitor",Ext.Base,{constructor:function(a){var b=Ext.util.sizemonitor;if(Ext.browser.is.Firefox){return new b.OverflowChange(a)}else{return new b.Scroll(a)}}},1,0,0,0,0,0,[Ext.util,"SizeMonitor"],0));(Ext.cmd.derive("Ext.event.publisher.ElementSize",Ext.event.publisher.Publisher,{type:"size",handledEvents:["resize"],constructor:function(){this.monitors={};this.subscribers={};Ext.event.publisher.Publisher.prototype.constructor.apply(this,arguments)},subscribe:function(b){var d=b.id,c=this.subscribers,a=this.monitors;if(c[d]){++c[d]}else{c[d]=1;a[d]=new Ext.util.SizeMonitor({element:b,callback:this.onElementResize,scope:this,args:[b]})}b.on("painted","forceRefresh",a[d]);return true},unsubscribe:function(c){var f=c.id,d=this.subscribers,b=this.monitors,a;if(d[f]&&!--d[f]){delete d[f];a=b[f];c.un("painted","forceRefresh",a);a.destroy();delete b[f]}},onElementResize:function(a,b){Ext.TaskQueue.requestRead("fire",this,[a,"resize",[a,b]])}},1,0,0,0,0,0,[Ext.event.publisher,"ElementSize"],function(a){a.instance=new a()}));(Ext.cmd.derive("Ext.util.paintmonitor.Abstract",Ext.Base,{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},eventName:"",monitorClass:"",constructor:function(a){this.onElementPainted=Ext.Function.bind(this.onElementPainted,this);this.initConfig(a)},bindListeners:function(a){this.monitorElement[a?"addEventListener":"removeEventListener"](this.eventName,this.onElementPainted,true)},applyElement:function(a){if(a){return Ext.get(a)}},updateElement:function(a){this.monitorElement=Ext.Element.create({classList:["x-paint-monitor",this.monitorClass]},true);a.appendChild(this.monitorElement);a.addCls("x-paint-monitored");this.bindListeners(true)},onElementPainted:function(){},destroy:function(){var d=this,b=d.monitorElement,a=b.parentNode,c=d.getElement();d.bindListeners(false);delete d.monitorElement;if(c&&!c.destroyed){c.removeCls("x-paint-monitored");delete d._element}if(a){a.removeChild(b)}d.callParent()}},1,0,0,0,0,0,[Ext.util.paintmonitor,"Abstract"],0));(Ext.cmd.derive("Ext.util.paintmonitor.CssAnimation",Ext.util.paintmonitor.Abstract,{eventName:Ext.browser.is.WebKit?"webkitAnimationEnd":"animationend",monitorClass:"cssanimation",onElementPainted:function(a){if(a.animationName==="x-paint-monitor-helper"){this.getCallback().apply(this.getScope(),this.getArgs())}}},0,0,0,0,0,0,[Ext.util.paintmonitor,"CssAnimation"],0));(Ext.cmd.derive("Ext.util.PaintMonitor",Ext.Base,{constructor:function(a){return new Ext.util.paintmonitor.CssAnimation(a)}},1,0,0,0,0,0,[Ext.util,"PaintMonitor"],0));(Ext.cmd.derive("Ext.event.publisher.ElementPaint",Ext.event.publisher.Publisher,{type:"paint",handledEvents:["painted"],constructor:function(){this.monitors={};this.subscribers={};Ext.event.publisher.Publisher.prototype.constructor.apply(this,arguments)},subscribe:function(a){var b=this,d=a.id,c=b.subscribers;if(c[d]){++c[d]}else{c[d]=1;b.monitors[d]=new Ext.util.PaintMonitor({element:a,callback:b.onElementPainted,scope:b,args:[a]})}},unsubscribe:function(b){var d=b.id,c=this.subscribers,a=this.monitors;if(c[d]&&!--c[d]){delete c[d];a[d].destroy();delete a[d]}},onElementPainted:function(a){Ext.TaskQueue.requestRead("fire",this,[a,"painted",[a]])}},1,0,0,0,0,0,[Ext.event.publisher,"ElementPaint"],function(a){a.instance=new a()}));(Ext.cmd.derive("Ext.dom.Element",Ext.Base,function(u){var A=window,Y=document,am="ext-window",S="ext-document",m="width",W="height",aj="min-width",f="min-height",v="max-width",J="max-height",Z="top",an="right",T="bottom",N="left",p="visibility",ak="hidden",d="display",ab="none",s="z-index",ad="position",y="relative",z="static",F="-",D=/\w/g,R=/\s+/,al=/[\s]+/,b=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,P=/table-row|table-.*-group/,c=/top/i,C={t:"border-top-width",r:"border-right-width",b:"border-bottom-width",l:"border-left-width"},ai={t:"padding-top",r:"padding-right",b:"padding-bottom",l:"padding-left"},r={t:"margin-top",r:"margin-right",b:"margin-bottom",l:"margin-left"},M=[ai.l,ai.r,ai.t,ai.b],h=[C.l,C.r,C.t,C.b],ag=/\d+$/,o=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,X="px",V=/(-[a-z])/gi,ao=/([a-z0-9\-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,w=/^\d+(?:\.\d*)?px$/i,E={},B="originalDisplay",ac=function(ap,aq){return aq.charAt(1).toUpperCase()},Q=function(at,aq){var au,ar,ap;if(at.nodeType===1){at._extData=null;if(aq){au=at.childNodes;for(ar=0,ap=au.length;ar<ap;++ar){Q(au[ar],aq)}}}},K="x-hidden-visibility",I="x-hidden-display",q="x-hidden-offsets",a="x-hidden-clip",H="x-sized",U="x-unsized",O="x-stretched",af="x-no-touch-scroll",t={style:"style",className:"className",cls:"cls",classList:"classList",text:"text",hidden:"hidden",html:"html",children:"children"},aa=0,ah=0,G=false,g=false,ae,L,j;return{alternateClassName:["Ext.Element"],observableType:"element",isElement:true,skipGarbageCollection:true,$applyConfigs:true,identifiablePrefix:"ext-element-",styleHooks:{},validIdRe:Ext.validIdRe,blockedEvents:Ext.supports.EmulatedMouseOver?{mouseover:1}:{},longpressEvents:{longpress:1,taphold:1},constructor:function(aq){var ap=this,ar;if(typeof aq==="string"){aq=Y.getElementById(aq)}if(!aq){return null}ap.dom=aq;ar=aq.id;if(ar){ap.id=ar}else{ar=aq.id=ap.getUniqueId()}ap.el=ap;Ext.cache[ar]=ap;ap.mixins.observable.constructor.call(ap)},inheritableStatics:{cache:Ext.cache={},editableSelector:'input,textarea,[contenteditable="true"]',VISIBILITY:1,DISPLAY:2,OFFSETS:3,CLIP:4,minKeyboardHeight:100,unitRe:o,useDelegatedEvents:true,validNodeTypes:{1:1,9:1},addUnits:function(aq,ap){if(typeof aq==="number"){return aq+(ap||X)}if(aq===""||aq==="auto"||aq==null){return aq||""}if(ag.test(aq)){return aq+(ap||X)}if(!o.test(aq)){return aq||""}return aq},create:function(ar,aq){var ay=this,av=t.hidden,au,az,aB,aA,ap,at,ax,aw;if(!ar){ar={}}if(ar.isElement){return aq?ar.dom:ar}else{if("nodeType" in ar){return aq?ar:Ext.get(ar)}}if(typeof ar==="string"){return Y.createTextNode(ar)}aB=ar.tag;if(!aB){aB="div"}if(ar.namespace){au=Y.createElementNS(ar.namespace,aB)}else{au=Y.createElement(aB)}az=au.style;if(ar[av]){aw=ar.className;aw=(aw==null)?"":aw+" ";ar.className=aw+I;delete ar[av]}for(ap in ar){if(ap!=="tag"){aA=ar[ap];switch(ap){case t.style:if(typeof aA==="string"){au.setAttribute(ap,aA)}else{for(at in aA){if(aA.hasOwnProperty(at)){az[at]=aA[at]}}}break;case t.className:case t.cls:au.className=aA;break;case t.classList:au.className=aA.join(" ");break;case t.text:au.textContent=aA;break;case t.html:au.innerHTML=aA;break;case t.children:for(at=0,ax=aA.length;at<ax;at++){au.appendChild(ay.create(aA[at],true))}break;default:if(aA!=null){au.setAttribute(ap,aA)}}}}if(aq){return au}else{return ay.get(au)}},detach:function(){var ap=this.dom;if(ap&&ap.parentNode&&ap.tagName!=="BODY"){ap.parentNode.removeChild(ap)}return this},fly:function(aq,ap){return Ext.fly(aq,ap)},fromPoint:function(ap,aq){return Ext.get(Y.elementFromPoint(ap,aq))},get:function(ar){var aw=this,ap=Ext.cache,au,at,aq,az,ay,av,ax;if(!ar){return null}if(ar.isFly){ar=ar.dom}if(typeof ar==="string"){aq=ar;if(ap.hasOwnProperty(aq)){az=ap[aq];if(az.skipGarbageCollection||!Ext.isGarbage(az.dom)){return az}else{az.destroy()}}if(aq===am){return u.get(A)}else{if(aq===S){return u.get(Y)}}at=Ext.getElementById?Ext.getElementById(aq):Y.getElementById(aq);if(at){return new u(at)}}au=ar.nodeType;if(au){ay=(au===9);ax=aw.validNodeTypes[au]}else{av=(ar.window==ar)}if(ax||av){aq=ar.id;if(ap.hasOwnProperty(aq)){az=ap[aq];if(az.skipGarbageCollection||ar===az.dom||!Ext.isGarbage(az.dom)){return az}else{az.destroy()}}if(ar===Y){ar.id=S}if(ar==A){ar.id=am}ar=new u(ar);if(av||ay){ar.skipGarbageCollection=true}return ar}if(ar.isElement){return ar}if(ar.isComposite){return ar}if(Ext.isIterable(ar)){return aw.select(ar)}return null},getActiveElement:function(ap){var aq=Y.activeElement;if(!aq||!aq.focus){aq=Y.body}return ap?Ext.get(aq):aq},getDocumentHeight:function(){return Math.max(!Ext.isStrict?Y.body.scrollHeight:Y.documentElement.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(!Ext.isStrict?Y.body.scrollWidth:Y.documentElement.scrollWidth,this.getViewportWidth())},getOrientation:function(){if(Ext.supports.OrientationChange){return(A.orientation==0)?"portrait":"landscape"}return(A.innerHeight>A.innerWidth)?"portrait":"landscape"},getViewportHeight:function(){var ap=u._viewportHeight;if(Ext.isIE9m){return Y.documentElement.clientHeight}return(ap!=null)?ap:A.innerHeight},getViewportWidth:function(){var ap=u._viewportWidth;if(Ext.isIE9m){return Y.documentElement.clientWidth}return(ap!=null)?ap:A.innerWidth},getViewSize:function(){return{width:u.getViewportWidth(),height:u.getViewportHeight()}},normalize:function(ap){return E[ap]||(E[ap]=ap.replace(V,ac))},_onWindowFocusChange:function(ap){if(Ext.fly(ap.target).is(u.editableSelector)){aa=new Date();G=(ap.type==="focusin"||ap.type==="pointerup")}},_onWindowResize:function(){var au=window.innerWidth,av=window.innerHeight,at=new Date(),aq=1000,ar,ap;ar=au-u._windowWidth;ap=av-u._windowHeight;u._windowWidth=au;u._windowHeight=av;if(((at-aa)<aq)||((at-ah)<aq)){if(ar===0&&(G&&(ap<=-u.minKeyboardHeight))){g=true;return}}if(g&&(ar===0)&&(ap>=u.minKeyboardHeight)){g=false;ah=new Date()}if(g){return}u._viewportWidth=au;u._viewportHeight=av},parseBox:function(ar){ar=ar||0;var ap=typeof ar,at,aq;if(ap==="number"){return{top:ar,right:ar,bottom:ar,left:ar}}else{if(ap!=="string"){return ar}}at=ar.split(" ");aq=at.length;if(aq===1){at[1]=at[2]=at[3]=at[0]}else{if(aq===2){at[2]=at[0];at[3]=at[1]}else{if(aq===3){at[3]=at[1]}}}return{top:parseFloat(at[0])||0,right:parseFloat(at[1])||0,bottom:parseFloat(at[2])||0,left:parseFloat(at[3])||0}},parseStyles:function(aq){var ap={},ar;if(aq){ao.lastIndex=0;while((ar=ao.exec(aq))){ap[ar[1]]=ar[2]||""}}return ap},select:function(ap,ar,aq){return Ext.fly(aq||Y).select(ap,ar)},query:function(aq,ap,ar){return Ext.fly(ar||Y).query(aq,ap)},unitizeBox:function(ar,ap){var aq=this;ar=aq.parseBox(ar);return aq.addUnits(ar.top,ap)+" "+aq.addUnits(ar.right,ap)+" "+aq.addUnits(ar.bottom,ap)+" "+aq.addUnits(ar.left,ap)},serializeForm:function(ar){var at=ar.elements||(Y.forms[ar]||Ext.getDom(ar)).elements,aC=false,aB=encodeURIComponent,aw="",av=at.length,ax,ap,aA,aE,aD,ay,au,az,aq;for(ay=0;ay<av;ay++){ax=at[ay];ap=ax.name;aA=ax.type;aE=ax.options;if(!ax.disabled&&ap){if(/select-(one|multiple)/i.test(aA)){az=aE.length;for(au=0;au<az;au++){aq=aE[au];if(aq.selected){aD=aq.hasAttribute("value");aw+=Ext.String.format("{0}={1}&",aB(ap),aB(aD?aq.value:aq.text))}}}else{if(!(/file|undefined|reset|button/i.test(aA))){if(!(/radio|checkbox/i.test(aA)&&!ax.checked)&&!(aA=="submit"&&aC)){aw+=aB(ap)+"="+aB(ax.value)+"&";aC=/submit/i.test(aA)}}}}}return aw.substr(0,aw.length-1)},getCommonAncestor:function(ar,aq,ap){j=j||new Ext.dom.Fly();j.attach(Ext.getDom(ar));while(!j.isAncestor(aq)){if(j.dom.parentNode){j.attach(j.dom.parentNode)}else{j.attach(document.body);break}}return ap?j.dom:Ext.get(j)}},addCls:function(ay,aw,aA){var az=this,at=az.getData(),aB,au,aq,ar,av,ax,ap;if(!ay){return az}if(!at.isSynchronized){az.synchronize()}au=az.dom;aq=at.classMap;ar=at.classList;aw=aw?aw+F:"";aA=aA?F+aA:"";if(typeof ay==="string"){ay=ay.split(R)}for(av=0,ax=ay.length;av<ax;av++){ap=ay[av];if(ap){ap=aw+ap+aA;if(!aq[ap]){aq[ap]=true;ar.push(ap);aB=true}}}if(aB){au.className=ar.join(" ")}return az},addStyles:function(ax,aw){var ar=0,av=(ax||"").match(D),au,ap=av.length,at,aq=[];if(ap===1){ar=Math.abs(parseFloat(this.getStyle(aw[av[0]]))||0)}else{if(ap){for(au=0;au<ap;au++){at=av[au];aq.push(aw[at])}aq=this.getStyle(aq);for(au=0;au<ap;au++){at=av[au];ar+=parseFloat(aq[aw[at]])||0}}}return ar},addUnits:function(aq,ap){return u.addUnits(aq,ap)},adjustDirect2DDimension:function(ar){var ax=this,aq=ax.dom,av=ax.getStyle("display"),au=aq.style.display,ay=aq.style.position,aw=ar===m?0:1,ap=aq.currentStyle,at;if(av==="inline"){aq.style.display="inline-block"}aq.style.position=av.match(P)?"absolute":"static";at=(parseFloat(ap[ar])||parseFloat(ap.msTransformOrigin.split(" ")[aw])*2)%1;aq.style.position=ay;if(av==="inline"){aq.style.display=au}return at},animate:function(ap){ap=new Ext.fx.Animation(ap);ap.setElement(this);this._activeAnimation=ap;ap.on({animationend:this._onAnimationEnd});Ext.Animator.run(ap);return ap},_onAnimationEnd:function(){this._activeAnimation=null},getActiveAnimation:function(){return this._activeAnimation},append:function(){this.appendChild.apply(this,arguments)},appendChild:function(ar,aq){var at=this,av,ap,au;if(ar.nodeType||ar.dom||typeof ar==="string"){ar=Ext.getDom(ar);at.dom.appendChild(ar);return !aq?Ext.get(ar):ar}else{if(ar.length){av=Ext.fly(document.createDocumentFragment());ap=ar.length;for(au=0;au<ap;au++){av.appendChild(ar[au],aq)}at.dom.appendChild(av.dom);return aq?av.dom:av}else{return at.createChild(ar,null,aq)}}},appendTo:function(ap){Ext.getDom(ap).appendChild(this.dom);return this},applyStyles:function(ap){if(ap){if(typeof ap==="function"){ap=ap.call()}if(typeof ap==="string"){ap=u.parseStyles(ap)}if(typeof ap==="object"){this.setStyle(ap)}}return this},blur:function(){var ap=this,ar=ap.dom;if(ar!==Y.body){try{ar.blur()}catch(aq){}return ap}else{return ap.focus(undefined,ar)}},cacheScrollValues:function(){var au=this,av=[],at=[],aw,ar,aq,ap;L=L||new Ext.dom.Fly();aw=au.query("*");for(aq=0,ap=aw.length;aq<ap;aq++){ar=aw[aq];if(ar.scrollTop>0||ar.scrollLeft!==0){at.push(ar);av.push(L.attach(ar).getScroll())}}return function(){var ay,az,ax;for(az=0,ax=at.length;az<ax;az++){ay=av[az];L.attach(at[az]);L.setScrollLeft(ay.left);L.setScrollTop(ay.top)}}},center:function(ap){return this.alignTo(ap||Y,"c-c")},child:function(ap,aq){var ar=this,at=Ext.get(ar).id;return ar.selectNode(Ext.makeIdSelector(at)+" > "+ap,!!aq)},clone:function(ap,aq){var ar=this.dom.cloneNode(ap);if(Ext.supports.CloneNodeCopiesExpando){Q(ar,ap)}return aq?ar:Ext.get(ar)},constrainScrollLeft:function(ap){var aq=this.dom;return Math.max(Math.min(ap,aq.scrollWidth-aq.clientWidth),0)},constrainScrollTop:function(ap){var aq=this.dom;return Math.max(Math.min(ap,aq.scrollHeight-aq.clientHeight),0)},createChild:function(aq,ap,ar){aq=aq||{tag:"div"};if(ap){return Ext.DomHelper.insertBefore(ap,aq,ar!==true)}else{return Ext.DomHelper.append(this.dom,aq,ar!==true)}},contains:function(ap){if(!ap){return false}var aq=this,ar=Ext.getDom(ap);return(ar===aq.dom)||aq.isAncestor(ar)},destroy:function(){var ap=this,aq=ap.dom;if(aq&&aq.parentNode){aq.parentNode.removeChild(aq)}ap.collect();if(!ap.isFly){ap.callParent()}},detach:function(){var ap=this.dom;if(ap&&ap.parentNode&&ap.tagName!=="BODY"){ap.parentNode.removeChild(ap)}return this},disableShadow:function(){var ap=this.shadow;if(ap){ap.hide();ap.disabled=true}},disableShim:function(){var ap=this.shim;if(ap){ap.hide();ap.disabled=true}},disableTouchContextMenu:function(){this._contextMenuListenerRemover=this.on({MSHoldVisual:function(ap){ap.preventDefault()},destroyable:true,delegated:false})},disableTouchScroll:function(){this.addCls(af);this.on({touchmove:function(ap){ap.preventDefault()},translate:false})},doReplaceWith:function(ap){var aq=this.dom;aq.parentNode.replaceChild(Ext.getDom(ap),aq)},doScrollIntoView:function(ap,au,aq,av,aB,ay){L=L||new Ext.dom.Fly();var az=this,aw=az.dom,aC=L.attach(ap)[aB](),aA=ap.scrollTop,ax=az.getScrollIntoViewXY(ap,aC,aA),at=ax.x,ar=ax.y;if(av){if(aq){aq=Ext.apply({listeners:{afteranimate:function(){L.attach(aw).highlight()}}},aq)}else{L.attach(aw).highlight()}}if(ar!==aA){L.attach(ap).scrollTo("top",ar,aq)}if(au!==false&&(at!==aC)){L.attach(ap)[ay]("left",at,aq)}return az},down:function(ap,aq){return this.selectNode(ap,!!aq)},enableShadow:function(aq,ap){var ar=this,au=ar.shadow||(ar.shadow=new Ext.dom.Shadow(Ext.apply({target:ar},aq))),at=ar.shim;if(at){at.offsets=au.outerOffsets;at.shadow=au;au.shim=at}if(ap===true||(ap!==false&&ar.isVisible())){au.show()}else{au.hide()}au.disabled=false},enableShim:function(aq,ap){var ar=this,au=ar.shim||(ar.shim=new Ext.dom.Shim(Ext.apply({target:ar},aq))),at=ar.shadow;if(at){au.offsets=at.outerOffsets;au.shadow=at;at.shim=au}if(ap===true||(ap!==false&&ar.isVisible())){au.show()}else{au.hide()}au.disabled=false},findParent:function(aw,aq,ap){var at=this,au=at.dom,ar=Y.documentElement,av=0;if(aq||aq===0){if(typeof aq!=="number"){ar=Ext.getDom(aq);aq=Number.MAX_VALUE}}else{aq=50}while(au&&au.nodeType===1&&av<aq&&au!==ar){if(Ext.fly(au).is(aw)){return ap?Ext.get(au):au}av++;au=au.parentNode}return null},findParentNode:function(at,aq,ap){var ar=Ext.fly(this.dom.parentNode);return ar?ar.findParent(at,aq,ap):null},first:function(ap,aq){return this.matchNode("nextSibling","firstChild",ap,aq)},focus:function(ar,aq){var ap=this;aq=aq||ap.dom;if(Number(ar)){Ext.defer(ap.focus,ar,ap,[null,aq])}else{Ext.GlobalEvents.fireEvent("beforefocus",aq);aq.focus()}return ap},collect:function(){var ap=this,aq=ap.dom,at=ap.shadow,ar=ap.shim;if(!ap.isFly){ap.mixins.observable.destroy.call(ap);delete Ext.cache[ap.id];ap.destroyed=true;ap.el=null}if(aq){aq._extData=ap.dom=null}if(at){at.hide();ap.shadow=null}if(ar){ar.hide();ap.shim=null}},getAnchorToXY:function(at,ap,ar,aq){return at.getAnchorXY(ap,ar,aq)},getAttribute:function(ap,aq){var ar=this.dom;return aq?(ar.getAttributeNS(aq,ap)||ar.getAttribute(aq+":"+ap)):(ar.getAttribute(ap)||ar[ap]||null)},getAttributes:function(){var at=this.dom.attributes,ar={},aq,au,ap;for(au=0,ap=at.length;au<ap;au++){aq=at[au];ar[aq.name]=aq.value}return ar},getBottom:function(ap){return(ap?this.getLocalY():this.getY())+this.getHeight()},getById:function(ar,ap){var aq=Y.getElementById(ar)||this.dom.querySelector(Ext.makeIdSelector(ar));return ap?aq:(aq?Ext.get(aq):null)},getBorderPadding:function(){var ap=this.getStyle(M),aq=this.getStyle(h);return{beforeX:(parseFloat(aq[C.l])||0)+(parseFloat(ap[ai.l])||0),afterX:(parseFloat(aq[C.r])||0)+(parseFloat(ap[ai.r])||0),beforeY:(parseFloat(aq[C.t])||0)+(parseFloat(ap[ai.t])||0),afterY:(parseFloat(aq[C.b])||0)+(parseFloat(ap[ai.b])||0)}},getBorders:function(){var ap=this.getStyle(h);return{beforeX:(parseFloat(ap[C.l])||0),afterX:(parseFloat(ap[C.r])||0),beforeY:(parseFloat(ap[C.t])||0),afterY:(parseFloat(ap[C.b])||0)}},getBorderWidth:function(ap){return this.addStyles(ap,C)},getData:function(ap){var ar=this.dom,aq;if(ar){aq=ar._extData;if(!aq&&!ap){ar._extData=aq={}}}return aq},getFirstChild:function(){return Ext.get(this.dom.firstElementChild)},getHeight:function(at,aq){var ar=this,au=ar.isStyle("display","none"),ap,av;if(au){return 0}ap=ar.dom.offsetHeight;if(Ext.supports.Direct2DBug){av=ar.adjustDirect2DDimension(W);if(aq){ap+=av}else{if(av>0&&av<0.5){ap++}}}if(at){ap-=ar.getBorderWidth("tb")+ar.getPadding("tb")}return(ap<0)?0:ap},getHtml:function(){return this.dom?this.dom.innerHTML:""},getLeft:function(ap){return ap?this.getLocalX():this.getX()},getLocalX:function(){var ar=this,aq,ap=ar.getStyle("left");if(!ap||ap==="auto"){ap=0}else{if(w.test(ap)){ap=parseFloat(ap)}else{ap=ar.getX();aq=ar.dom.offsetParent;if(aq){ap-=Ext.fly(aq).getX()}}}return ap},getLocalXY:function(){var at=this,ar,aq=at.getStyle(["left","top"]),ap=aq.left,au=aq.top;if(!ap||ap==="auto"){ap=0}else{if(w.test(ap)){ap=parseFloat(ap)}else{ap=at.getX();ar=at.dom.offsetParent;if(ar){ap-=Ext.fly(ar).getX()}}}if(!au||au==="auto"){au=0}else{if(w.test(au)){au=parseFloat(au)}else{au=at.getY();ar=at.dom.offsetParent;if(ar){au-=Ext.fly(ar).getY()}}}return[ap,au]},getLocalY:function(){var aq=this,ap,ar=aq.getStyle("top");if(!ar||ar==="auto"){ar=0}else{if(w.test(ar)){ar=parseFloat(ar)}else{ar=aq.getY();ap=aq.dom.offsetParent;if(ap){ar-=Ext.fly(ap).getY()}}}return ar},getMargin:(function(){var aq={t:"top",l:"left",r:"right",b:"bottom"},ap=["margin-top","margin-left","margin-right","margin-bottom"];return function(at){var av=this,au,ar,aw;if(!at){au=av.getStyle(ap);aw={};if(au&&typeof au==="object"){aw={};for(ar in r){aw[ar]=aw[aq[ar]]=parseFloat(au[r[ar]])||0}}}else{aw=av.addStyles(at,r)}return aw}})(),getPadding:function(ap){return this.addStyles(ap,ai)},getParent:function(){return Ext.get(this.dom.parentNode)},getRight:function(ap){return(ap?this.getLocalX():this.getX())+this.getWidth()},getScroll:function(){var ar=this,av=ar.dom,aq=Y.documentElement,au,at,ap=document.body;if(av===Y||av===ap){au=aq.scrollLeft||(ap?ap.scrollLeft:0);at=aq.scrollTop||(ap?ap.scrollTop:0)}else{au=av.scrollLeft;at=av.scrollTop}return{left:au,top:at}},getScrollIntoViewXY:function(av,aC,aB){var aE=this.dom,aq=Ext.getDom(av),ar=this.getOffsetsTo(aq),aA=aE.offsetWidth,ax=aE.offsetHeight,ap=ar[0]+aC,aw=ar[1]+aB,au=aw+ax,aG=ap+aA,ay=aq.clientHeight,aD=aq.clientWidth,aF=aC,az=aB,at=az+ay,aH=aF+aD;if(ax>ay||aw<az){aB=aw}else{if(au>at){aB=au-ay}}if(aA>aD||ap<aF){aC=ap}else{if(aG>aH){aC=aG-aD}}return{x:aC,y:aB}},getScrollLeft:function(){var ap=this.dom;if(ap===Y||ap===document.body){return this.getScroll().left}else{return ap.scrollLeft}},getScrollTop:function(){var ap=this.dom;if(ap===Y||ap===document.body){return this.getScroll().top}else{return ap.scrollTop}},getSize:function(ap){return{width:this.getWidth(ap),height:this.getHeight(ap)}},getStyle:function(aC,ax){var ay=this,at=ay.dom,aF=typeof aC!=="string",aD=ay.styleHooks,aq=aC,az=aq,aw=1,av,aE,aB,aA,ar,ap,au;if(aF){aB={};aq=az[0];au=0;if(!(aw=az.length)){return aB}}if(!at||at.documentElement){return aB||""}av=at.style;if(ax){ap=av}else{ap=at.ownerDocument.defaultView.getComputedStyle(at,null);if(!ap){ax=true;ap=av}}do{aA=aD[aq];if(!aA){aD[aq]=aA={name:u.normalize(aq)}}if(aA.get){ar=aA.get(at,ay,ax,ap)}else{aE=aA.name;ar=ap[aE]}if(!aF){return ar}aB[aq]=ar;aq=az[++au]}while(au<aw);return aB},getStyleValue:function(ap){return this.dom.style.getPropertyValue(ap)},getTop:function(ap){return ap?this.getLocalY():this.getY()},getValue:function(aq){var ap=this.dom.value;return aq?parseInt(ap,10):ap},getViewSize:function(){var ap=this.dom;if(ap===Y||ap===Y.body){return{width:u.getViewportWidth(),height:u.getViewportHeight()}}else{return{width:ap.clientWidth,height:ap.clientHeight}}},getVisibilityMode:function(){var ap=this,aq=ap.getData(),ar=aq.visibilityMode;if(ar===undefined){aq.visibilityMode=ar=u.DISPLAY}return ar},getWidth:function(ap,av){var at=this,aw=at.dom,au=at.isStyle("display","none"),ar,aq,ax;if(au){return 0}if(Ext.supports.BoundingClientRect){ar=aw.getBoundingClientRect();aq=(at.vertical&&!Ext.supports.RotatedBoundingClientRect)?(ar.bottom-ar.top):(ar.right-ar.left);aq=av?aq:Math.ceil(aq)}else{aq=aw.offsetWidth}if(Ext.supports.Direct2DBug&&!at.vertical){ax=at.adjustDirect2DDimension(m);if(av){aq+=ax}else{if(ax>0&&ax<0.5){aq++}}}if(ap){aq-=at.getBorderWidth("lr")+at.getPadding("lr")}return(aq<0)?0:aq},getX:function(){return this.getXY()[0]},getXY:function(){var ar=Math.round,av=this.dom,aq=0,aw=0,au,ap;if(av!==Y&&av!==Y.body){try{au=av.getBoundingClientRect()}catch(at){au={left:0,top:0}}aq=ar(au.left);aw=ar(au.top);ap=Ext.getDoc().getScroll();aq+=ap.left;aw+=ap.top}return[aq,aw]},getY:function(){return this.getXY()[1]},getZIndex:function(){return parseInt(this.getStyle("z-index"),10)},hasCls:function(ap){var aq=this.getData();if(!aq.isSynchronized){this.synchronize()}return aq.classMap.hasOwnProperty(ap)},hide:function(){this.setVisible(false);return this},insertAfter:function(ap){ap=Ext.getDom(ap);ap.parentNode.insertBefore(this.dom,ap.nextSibling);return this},insertBefore:function(ap){ap=Ext.getDom(ap);ap.parentNode.insertBefore(this.dom,ap);return this},insertFirst:function(aq,ap){aq=aq||{};if(aq.nodeType||aq.dom||typeof aq==="string"){aq=Ext.getDom(aq);this.dom.insertBefore(aq,this.dom.firstChild);return !ap?Ext.get(aq):aq}else{return this.createChild(aq,this.dom.firstChild,ap)}},insertHtml:function(aq,ar,ap){var at=Ext.DomHelper.insertHtml(aq,this.dom,ar);return ap?Ext.get(at):at},insertSibling:function(aq,au,ax){var aw=this,ay=Ext.DomHelper,az=(au||"before").toLowerCase()==="after",at,ap,ar,av;if(Ext.isIterable(aq)){ar=aq.length;ap=Ext.fly(document.createDocumentFragment());if(Ext.isArray(aq)){for(av=0;av<ar;av++){at=ap.appendChild(aq[av],ax)}}else{for(av=0;av<ar;av++){ap.dom.appendChild(at=aq[0])}if(ax===false){at=Ext.get(at)}}aw.dom.parentNode.insertBefore(ap.dom,az?aw.dom.nextSibling:aw.dom);return at}aq=aq||{};if(aq.nodeType||aq.dom){at=aw.dom.parentNode.insertBefore(Ext.getDom(aq),az?aw.dom.nextSibling:aw.dom);if(!ax){at=Ext.get(at)}}else{if(az&&!aw.dom.nextSibling){at=ay.append(aw.dom.parentNode,aq,!ax)}else{at=ay[az?"insertAfter":"insertBefore"](aw.dom,aq,!ax)}}return at},is:function(ap){var ar=this.dom,aq;if(!ap){aq=true}else{if(!ar.tagName){aq=false}else{if(Ext.isFunction(ap)){aq=ap(ar)}else{aq=ar[Ext.supports.matchesSelector](ap)}}}return aq},isAncestor:function(aq){var ap=false,ar=this.dom,at=Ext.getDom(aq);if(ar&&at){if(ar.contains){return ar.contains(at)}else{if(ar.compareDocumentPosition){return !!(ar.compareDocumentPosition(at)&16)}else{while((at=at.parentNode)){ap=at===ar||ap}}}}return ap},isPainted:(function(){return !Ext.browser.is.IE?function(){var ap=this.dom;return Boolean(ap&&ap.offsetParent)}:function(){var ap=this.dom;return Boolean(ap&&(ap.offsetHeight!==0&&ap.offsetWidth!==0))}})(),isScrollable:function(){var ap=this.dom;return ap.scrollHeight>ap.clientHeight||ap.scrollWidth>ap.clientWidth},isStyle:function(ap,aq){return this.getStyle(ap)===aq},isVisible:function(aq){var ar=this.dom,ap;if(!ar){return false}if(!ae){ae=new Ext.dom.Fly()}for(ap=ar.ownerDocument.documentElement;ar!==ap;ar=ar.parentNode){if(!ar||ar.nodeType===11||(ae.attach(ar)).isStyle(p,ak)||ae.isStyle(d,ab)){return false}if(!aq){break}}return true},last:function(ap,aq){return this.matchNode("previousSibling","lastChild",ap,aq)},maskIframes:function(){var ap=document.getElementsByTagName("iframe");Ext.each(ap,function(at){var ar=Ext.fly(at.parentNode),aq=ar.mask();aq.setStyle("background-color","transparent")})},matchNode:function(aq,av,ap,ar){var at=this.dom,au;if(!at){return null}au=at[av];while(au){if(au.nodeType===1&&(!ap||Ext.fly(au,"_matchNode").is(ap))){return !ar?Ext.get(au):au}au=au[aq]}return null},next:function(ap,aq){return this.matchNode("nextSibling","nextSibling",ap,aq)},parent:function(ap,aq){return this.matchNode("parentNode","parentNode",ap,aq)},position:function(au,at,ap,ar){var aq=this;if(aq.dom.tagName!=="BODY"){if(!au&&aq.isStyle(ad,z)){aq.setStyle(ad,y)}else{if(au){aq.setStyle(ad,au)}}if(at){aq.setStyle(s,at)}if(ap||ar){aq.setXY([ap||false,ar||false])}}},prev:function(ap,aq){return this.matchNode("previousSibling","previousSibling",ap,aq)},query:function(ar,aA,ay){var au=this.dom,aw,ax,az,aq,ap,av,at;if(!au){return null}aA=(aA!==false);ar=ar.split(",");if(!ay){aw=[]}for(av=0,ax=ar.length;av<ax;av++){if(typeof ar[av]==="string"){if(ay){aq=au.querySelector(ar[av]);return aA?aq:Ext.get(aq)}ap=au.querySelectorAll(ar[av]);for(at=0,az=ap.length;at<az;at++){aw.push(aA?ap[at]:Ext.get(ap[at]))}}}return aw},radioCls:function(at){var au=this.dom.parentNode.childNodes,aq;at=Ext.isArray(at)?at:[at];for(var ar=0,ap=au.length;ar<ap;ar++){aq=au[ar];if(aq&&aq.nodeType===1){Ext.fly(aq).removeCls(at)}}return this.addCls(at)},redraw:function(){var aq=this.dom,ap=aq.style;ap.display="none";aq.offsetHeight;ap.display=""},remove:function(){this.destroy()},removeChild:function(ap){this.dom.removeChild(Ext.getDom(ap));return this},removeCls:function(ay,aw,aA){var az=this,at=az.getData(),aB,au,aq,ar,av,ax,ap;if(!ay){return az}if(!at.isSynchronized){az.synchronize()}au=az.dom;aq=at.classMap;ar=at.classList;aw=aw?aw+F:"";aA=aA?F+aA:"";if(typeof ay==="string"){ay=ay.split(R)}for(av=0,ax=ay.length;av<ax;av++){ap=ay[av];if(ap){ap=aw+ap+aA;if(aq[ap]){delete aq[ap];Ext.Array.remove(ar,ap);aB=true}}}if(aB){au.className=ar.join(" ")}return az},repaint:function(){var ap=this;ap.addCls("x-repaint");Ext.defer(function(){if(ap.dom){Ext.fly(ap.dom).removeCls("x-repaint")}},1);return ap},replace:function(ar,aq){ar=Ext.getDom(ar);var ap=ar.parentNode,au=ar.id,at=this.dom;if(aq!==false&&au&&Ext.cache[au]){ap.insertBefore(at,ar);Ext.get(ar).destroy()}else{ap.replaceChild(at,ar)}return this},replaceCls:function(ar,az,ax,aC){var aA=this,av,aq,at,aw,ay,ap,au=aA.getData(),aB;if(!ar&&!az){return aA}ar=ar||[];az=az||[];if(!au.isSynchronized){aA.synchronize()}if(!aC){aC=""}av=aA.dom;aq=au.classMap;at=au.classList;ax=ax?ax+F:"";aC=aC?F+aC:"";if(typeof ar==="string"){ar=ar.split(R)}if(typeof az==="string"){az=az.split(R)}for(aw=0,ay=ar.length;aw<ay;aw++){ap=ax+ar[aw]+aC;if(aq[ap]){delete aq[ap];aB=true}}for(aw=0,ay=az.length;aw<ay;aw++){ap=ax+az[aw]+aC;if(!aq[ap]){aq[ap]=true;aB=true}}if(aB){au.classList=at=Ext.Object.getKeys(aq);av.className=at.join(" ")}return aA},replaceWith:function(at){var au=this,av=au.dom,ar=av.parentNode,ap=Ext.cache,aq;au.clearListeners();if(at.nodeType||at.dom||typeof at==="string"){at=Ext.get(at);aq=ar.insertBefore(at.dom,av)}else{aq=Ext.DomHelper.insertBefore(av,at)}ar.removeChild(av);au.dom=aq;if(!au.isFly){delete ap[au.id];ap[au.id=Ext.id(aq)]=au}return au},resolveListenerScope:function(aq){var ap=this.component;return ap?ap.resolveListenerScope(aq):this},scroll:function(ay,ap,ar){if(!this.isScrollable()){return false}ay=ay.charAt(0);var ax=this,au=ax.dom,aw=ay==="r"||ay==="l"?"left":"top",aq=false,at,av;if(ay==="l"||ay==="t"||ay==="u"){ap=-ap}if(aw==="left"){at=au.scrollLeft;av=ax.constrainScrollLeft(at+ap)}else{at=au.scrollTop;av=ax.constrainScrollTop(at+ap)}if(av!==at){this.scrollTo(aw,av,ar);aq=true}return aq},scrollBy:function(aq,ap,ar){var at=this,au=at.dom;if(aq.length){ar=ap;ap=aq[1];aq=aq[0]}else{if(typeof aq!="number"){ar=ap;ap=aq.y;aq=aq.x}}if(aq){at.scrollTo("left",at.constrainScrollLeft(au.scrollLeft+aq),ar)}if(ap){at.scrollTo("top",at.constrainScrollTop(au.scrollTop+ap),ar)}return at},scrollChildIntoView:function(aq,ap){Ext.fly(aq).scrollIntoView(this,ap)},scrollIntoView:function(ap,at,ar,aq){ap=Ext.getDom(ap)||Ext.getBody().dom;return this.doScrollIntoView(ap,at,ar,aq,"getScrollLeft","scrollTo")},scrollTo:function(ar,au,ap){var av=c.test(ar),at=this,ax=av?"scrollTop":"scrollLeft",aw=at.dom,aq;if(!ap||!at.anim){aw[ax]=au;aw[ax]=au}else{aq={to:{}};aq.to[ax]=au;if(Ext.isObject(ap)){Ext.applyIf(aq,ap)}at.animate(aq)}return at},select:function(aq,at){var ap,ar;if(typeof aq==="string"){ar=this.query(aq,!at)}else{ar=aq;ap=true}return at?new Ext.CompositeElement(ar,!ap):new Ext.CompositeElementLite(ar,true)},selectNode:function(aq,ap){return this.query(aq,ap,true)},set:function(ap,aq){var at=this,av=at.dom,ar,au;for(ar in ap){if(ap.hasOwnProperty(ar)){au=ap[ar];if(ar==="style"){at.applyStyles(au)}else{if(ar==="cls"){av.className=au}else{if(aq!==false){if(au===undefined){av.removeAttribute(ar)}else{av.setAttribute(ar,au)}}else{av[ar]=au}}}}}return at},setBottom:function(ap){this.dom.style[T]=u.addUnits(ap);return this},setCls:function(at){var av=this,ar=av.getData(),aq,au,ap,aw,ax;if(!ar.isSynchronized){av.synchronize()}if(typeof at==="string"){at=at.split(R)}ar.classList=ax=at.slice();ar.classMap=aw={};for(aq=0,au=ax.length;aq<au;aq++){aw[ax[aq]]=true}av.dom.className=ax.join(" ")},setDisplayed:function(aq){var ap=this;if(typeof aq==="boolean"){aq=aq?ap._getDisplay():ab}ap.setStyle(d,aq);if(ap.shadow||ap.shim){ap.setUnderlaysVisible(aq!==ab)}return ap},setHeight:function(ap){var aq=this;aq.dom.style[W]=u.addUnits(ap);if(aq.shadow||aq.shim){aq.syncUnderlays()}return aq},setHtml:function(ap){if(this.dom){this.dom.innerHTML=ap}return this},setId:function(at){var ar=this,ap=ar.id,aq=Ext.cache;if(ap){delete aq[ap]}ar.dom.id=at;ar.id=at;aq[at]=ar;return ar},setLeft:function(aq){var ap=this;ap.dom.style[N]=u.addUnits(aq);if(ap.shadow||ap.shim){ap.syncUnderlays()}return ap},setLocalX:function(ap){var ar=this,aq=ar.dom.style;aq.right="auto";aq.left=(ap===null)?"auto":ap+"px";if(ar.shadow||ar.shim){ar.syncUnderlays()}return ar},setLocalXY:function(ap,at){var ar=this,aq=ar.dom.style;aq.right="auto";if(ap&&ap.length){at=ap[1];ap=ap[0]}if(ap===null){aq.left="auto"}else{if(ap!==undefined){aq.left=ap+"px"}}if(at===null){aq.top="auto"}else{if(at!==undefined){aq.top=at+"px"}}if(ar.shadow||ar.shim){ar.syncUnderlays()}return ar},setLocalY:function(aq){var ap=this;ap.dom.style.top=(aq===null)?"auto":aq+"px";if(ap.shadow||ap.shim){ap.syncUnderlays()}return ap},setMargin:function(ar){var aq=this,ap=aq.dom.style;if(ar||ar===0){ar=aq.self.unitizeBox((ar===true)?5:ar);ap.setProperty("margin",ar,"important")}else{ap.removeProperty("margin-top");ap.removeProperty("margin-right");ap.removeProperty("margin-bottom");ap.removeProperty("margin-left")}},setMaxHeight:function(ap){this.dom.style[J]=u.addUnits(ap);return this},setMaxWidth:function(ap){this.dom.style[v]=u.addUnits(ap);return this},setMinHeight:function(ap){this.dom.style[f]=u.addUnits(ap);return this},setMinWidth:function(ap){this.dom.style[aj]=u.addUnits(ap);return this},setOpacity:function(ap){var aq=this;if(aq.dom){aq.setStyle("opacity",ap)}return aq},setPadding:function(ar){var aq=this,ap=aq.dom.style;if(ar||ar===0){ar=aq.self.unitizeBox((ar===true)?5:ar);ap.setProperty("padding",ar,"important")}else{ap.removeProperty("padding-top");ap.removeProperty("padding-right");ap.removeProperty("padding-bottom");ap.removeProperty("padding-left")}},setRight:function(ap){this.dom.style[an]=u.addUnits(ap);return this},setScrollLeft:function(ap){this.dom.scrollLeft=ap;return this},setScrollTop:function(ap){this.dom.scrollTop=ap;return this},setSize:function(ar,ap){var at=this,aq=at.dom.style;if(Ext.isObject(ar)){ap=ar.height;ar=ar.width}aq.width=u.addUnits(ar);aq.height=u.addUnits(ap);if(at.shadow||at.shim){at.syncUnderlays()}return at},setSizeState:function(ar){var aq=this,at,ap;if(ar===true){at=H;ap=[U,O]}else{if(ar===false){at=U;ap=[H,O]}else{if(ar===null){at=O;ap=[H,U]}else{ap=[H,U,O]}}}if(at){aq.addCls(at)}aq.removeCls(ap);return aq},setStyle:function(ax,av){var at=this,aw=at.dom,ap=at.styleHooks,ar=aw.style,aq=ax,au;if(typeof aq==="string"){au=ap[aq];if(!au){ap[aq]=au={name:u.normalize(aq)}}av=(av==null)?"":av;if(au.set){au.set(aw,av,at)}else{ar[au.name]=av}if(au.afterSet){au.afterSet(aw,av,at)}}else{for(aq in ax){if(ax.hasOwnProperty(aq)){au=ap[aq];if(!au){ap[aq]=au={name:u.normalize(aq)}}av=ax[aq];av=(av==null)?"":av;if(au.set){au.set(aw,av,at)}else{ar[au.name]=av}if(au.afterSet){au.afterSet(aw,av,at)}}}}return at},setText:function(ap){this.dom.textContent=ap},setTop:function(aq){var ap=this;ap.dom.style[Z]=u.addUnits(aq);if(ap.shadow||ap.shim){ap.syncUnderlays()}return ap},setUnderlaysVisible:function(ap){var ar=this.shadow,aq=this.shim;if(ar&&!ar.disabled){if(ap){ar.show()}else{ar.hide()}}if(aq&&!aq.disabled){if(ap){aq.show()}else{aq.hide()}}},setVisibility:function(ap){var aq=this.dom.style;if(ap){aq.removeProperty("visibility")}else{aq.setProperty("visibility","hidden","important")}},setVisibilityMode:function(ap){this.getData().visibilityMode=ap;return this},setVisible:function(ar){var ap=this,aq=ap.getVisibilityMode(),at=ar?"removeCls":"addCls";switch(aq){case u.DISPLAY:ap.removeCls([K,q,a]);ap[at](I);break;case u.VISIBILITY:ap.removeCls([I,q,a]);ap[at](K);break;case u.OFFSETS:ap.removeCls([K,I,a]);ap[at](q);break;case u.CLIP:ap.removeCls([K,I,q]);ap[at](a);break}if(ap.shadow||ap.shim){ap.setUnderlaysVisible(ar)}return ap},setWidth:function(ap){var aq=this;aq.dom.style[m]=u.addUnits(ap);if(aq.shadow||aq.shim){aq.syncUnderlays()}return aq},setX:function(ap){return this.setXY([ap,false])},setXY:function(ar){var aq=this,at=aq.translatePoints(ar),ap=aq.dom.style,au;aq.position();ap.right="auto";for(au in at){if(!isNaN(at[au])){ap[au]=at[au]+"px"}}if(aq.shadow||aq.shim){aq.syncUnderlays()}return aq},setY:function(ap){return this.setXY([false,ap])},setZIndex:function(ap){var aq=this;if(aq.shadow){aq.shadow.setZIndex(ap)}if(aq.shim){aq.shim.setZIndex(ap)}return aq.setStyle("z-index",ap)},show:function(){this.setVisible(true);return this},swapCls:function(aq,aw,ap,au){if(ap===undefined){ap=true}var at=this,av=ap?aq:aw,ar=ap?aw:aq;if(ar){at.removeCls(au?au+"-"+ar:ar)}if(av){at.addCls(au?au+"-"+av:av)}return at},synchronize:function(){var ax=this,at=ax.dom,ay={},aw=at.className,aq,au,av,ap,ar=ax.getData();if(aw&&aw.length>0){aq=at.className.split(al);for(au=0,av=aq.length;au<av;au++){ap=aq[au];ay[ap]=true}}else{aq=[]}ar.classList=aq;ar.classMap=ay;ar.isSynchronized=true;return ax},syncUnderlays:function(){var at=this,ax=at.shadow,ap=at.shim,aq=at.dom,ay,av,au,aw,ar;if(at.isVisible()){ay=at.getXY();av=ay[0];au=ay[1];aw=aq.offsetWidth;ar=aq.offsetHeight;if(ax&&!ax.hidden){ax.realign(av,au,aw,ar)}if(ap&&!ap.hidden){ap.realign(av,au,aw,ar)}}},toggleCls:function(ap,aq){if(typeof aq!=="boolean"){aq=!this.hasCls(ap)}return aq?this.addCls(ap):this.removeCls(ap)},toggle:function(){this.setVisible(!this.isVisible());return this},translate:function(){var ap="webkitTransform" in Y.createElement("div").style?"webkitTransform":"transform";return function(aq,at,ar){this.dom.style[ap]="translate3d("+(aq||0)+"px, "+(at||0)+"px, "+(ar||0)+"px)"}}(),unmaskIframes:function(){var ap=document.getElementsByTagName("iframe");Ext.each(ap,function(ar){var aq=Ext.fly(ar.parentNode);aq.unmask()})},unwrap:function(){var aw=this.dom,aq=aw.parentNode,at,av=Ext.fly(Ext.Element.getActiveElement()),au,ar,ax,ap;au=Ext.cache[av.id];if(au){av=au}if(this.contains(av)){if(au){au.suspendFocusEvents()}ar=true}if(aq){at=aq.parentNode;if(ar){ap=at.getAttribute("tabIndex");ax=Ext.fly(at);ax.set({tabIndex:-1});ax.suspendFocusEvents();ax.focus()}at.insertBefore(aw,aq);at.removeChild(aq)}else{at=document.createDocumentFragment();at.appendChild(aw)}if(ar){if(au){au.focus();au.resumeFocusEvents()}else{Ext.fly(av).focus()}if(ax){ax.resumeFocusEvents();ax.set({tabIndex:ap})}}return this},up:function(ar,ap,aq){return this.findParentNode(ar,ap,!aq)},update:function(ap){return this.setHtml(ap)},wrap:function(at,aA,aw){var az=this,ax=az.dom,av=Ext.DomHelper.insertBefore(ax,at||{tag:"div"},!aA),ay=av,ar=Ext.Element.getActiveElement(),au,aq,ap;au=Ext.cache[ar.id];if(au){ar=au}if(aw){ay=av.selectNode(aw,aA)}if(az.contains(ar)){if(au){au.suspendFocusEvents()}ap=av.dom.getAttribute("tabIndex");av.set({tabIndex:-1});av.suspendFocusEvents();av.focus();aq=true}ay.appendChild(ax);if(aq){if(au){au.focus();au.resumeFocusEvents()}else{Ext.fly(ar).focus()}av.resumeFocusEvents();av.set({tabIndex:ap})}return av},privates:{doAddListener:function(av,ay,az,aA,aq,ap,ar){var ax=this,at,au,aw;av=Ext.canonicalEventName(av);if(!ax.blockedEvents[av]){at=ax.mixins.observable.doAddListener;aA=aA||{};if(ax.longpressEvents[av]){ax.disableTouchContextMenu()}if(u.useDelegatedEvents===false){aA.delegated=aA.delegated||false}if(aA.translate!==false){au=ax.additiveEvents[av];if(au){aA.type=av;av=au;at.call(ax,av,ay,az,aA,aq,ap,ar)}aw=ax.eventMap[av];if(aw){aA.type=aA.type||av;av=aw}}at.call(ax,av,ay,az,aA,aq,ap,ar);delete aA.type}},doRemoveListener:function(ap,au,at){var av=this,ar,ax,aw,aq;if(!av.blockedEvents[ap]){ar=av.mixins.observable.doRemoveListener;if(av.longpressEvents[ap]){aq=this._contextMenuListenerRemover;if(aq){aq.destroy()}}aw=av.additiveEvents[ap];if(aw){ap=aw;ar.call(av,ap,au,at)}ax=av.eventMap[ap];if(ax){ar.call(av,ax,au,at)}ar.call(av,ap,au,at)}},_initEvent:function(ap){return(this.events[ap]=new Ext.dom.ElementEvent(this,ap))},_getDisplay:function(){var ap=this.getData(),aq=ap[B];if(aq===undefined){ap[B]=aq=""}return aq},_getPublisher:function(ap){var ar=Ext.event.publisher.Publisher,aq=ar.publishersByEvent[ap];if(!aq||(this.dom===window&&ap==="resize")){aq=ar.publishers.dom}return aq},isFocusSuspended:function(){return !!this.getData().suspendFocusEvents},suspendFocusEvents:function(){if(!this.isFly){this.suspendEvent("focus","blur")}this.getData().suspendFocusEvents=true},resumeFocusEvents:function(){function ap(){var aq;if(!this.destroyed){aq=this.getData();if(aq){aq.suspendFocusEvents=false}if(!this.isFly){this.resumeEvent("focus","blur")}}}if(!this.destroyed&&this.getData().suspendFocusEvents){if(Ext.isIE){Ext.asap(ap,this)}else{ap.call(this)}}}},deprecated:{"5.0":{methods:{cssTranslate:null,getHTML:"getHtml",getOuterHeight:null,getOuterWidth:null,getPageBox:function(ar){var av=this,at=av.dom,ax=at.nodeName==="BODY",ay=ax?u.getViewportWidth():at.offsetWidth,au=ax?u.getViewportHeight():at.offsetHeight,aA=av.getXY(),az=aA[1],ap=aA[0]+ay,aw=aA[1]+au,aq=aA[0];if(ar){return new Ext.util.Region(az,ap,aw,aq)}else{return{left:aq,top:az,width:ay,height:au,right:ap,bottom:aw}}},getScrollParent:null,isDescendent:null,isTransparent:function(aq){var ap=this.getStyle(aq);return ap?b.test(ap):false},purgeAllListeners:"clearListeners",removeAllListeners:"clearListeners",setHTML:"setHtml",setTopLeft:null}}}}},1,0,0,0,0,[[Ext.util.Positionable.prototype.mixinId||Ext.util.Positionable.$className,Ext.util.Positionable],[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.dom,"Element",Ext,"Element"],function(u){var b=document,q=u.prototype,C=Ext.supports,J="pointerdown",f="pointermove",c="pointerup",d="pointercancel",j="MSPointerDown",r="MSPointerMove",F="MSPointerUp",a="MSPointerCancel",y="mousedown",E="mousemove",z="mouseup",K="mouseover",I="mouseout",t="mouseenter",g="mouseleave",B="touchstart",p="touchmove",G="touchend",h="touchcancel",v="click",m="dblclick",A="tap",H="doubletap",o=q.eventMap={},w=q.additiveEvents={},s=Ext.id,D;Ext.id=function(N,M){var L=Ext.getDom(N,true),O,P;if(!L){P=s(N,M)}else{if(!(P=L.id)){P=s(null,M||u.prototype.identifiablePrefix);if(Ext.isSandboxed){O=Ext.sandboxPrefix||(Ext.sandboxPrefix=Ext.sandboxName.toLowerCase()+"-");P=O+P}L.id=P}}return P};if(C.PointerEvents){o[y]=J;o[E]=f;o[z]=c;o[B]=J;o[p]=f;o[G]=c;o[h]=d;o[v]=A;o[m]=H;o[K]="pointerover";o[I]="pointerout";o[t]="pointerenter";o[g]="pointerleave"}else{if(C.MSPointerEvents){o[J]=j;o[f]=r;o[c]=F;o[d]=a;o[y]=j;o[E]=r;o[z]=F;o[B]=j;o[p]=r;o[G]=F;o[h]=a;o[v]=A;o[m]=H;o[K]="MSPointerOver";o[I]="MSPointerOut"}else{if(C.TouchEvents){o[J]=B;o[f]=p;o[c]=G;o[d]=h;o[y]=B;o[E]=p;o[z]=G;o[v]=A;o[m]=H;if(Ext.isWebKit&&Ext.os.is.Desktop){o[B]=y;o[p]=E;o[G]=z;o[h]=z;w[y]=y;w[E]=E;w[z]=z;w[B]=B;w[p]=p;w[G]=G;w[h]=h;w[J]=y;w[f]=E;w[c]=z;w[d]=z}}else{o[J]=y;o[f]=E;o[c]=z;o[d]=z;o[B]=y;o[p]=E;o[G]=z;o[h]=z}}}if(Ext.isWebKit){o.transitionend=Ext.browser.getVendorProperyName("transitionEnd");o.animationstart=Ext.browser.getVendorProperyName("animationStart");o.animationend=Ext.browser.getVendorProperyName("animationEnd")}if(!Ext.supports.MouseWheel&&!Ext.isOpera){o.mousewheel="DOMMouseScroll"}D=q.$eventOptions=Ext.Object.chain(q.$eventOptions);D.translate=D.capture=D.delegate=D.delegated=D.stopEvent=D.preventDefault=D.stopPropagation=D.element=1;q.styleHooks.opacity={name:"opacity",afterSet:function(N,M,L){var O=L.shadow;if(O){O.setOpacity(M)}}};q.getTrueXY=q.getXY;Ext.select=u.select;Ext.query=u.query;Ext.apply(Ext,{get:function(L){return u.get(L)},getDom:function(L){if(!L||!b){return null}return typeof L==="string"?Ext.getElementById(L):"dom" in L?L.dom:L},getBody:function(){if(!Ext._bodyEl){if(!b.body){throw new Error("[Ext.getBody] document.body does not yet exist")}Ext._bodyEl=Ext.get(b.body)}return Ext._bodyEl},getHead:function(){if(!Ext._headEl){Ext._headEl=Ext.get(b.head||b.getElementsByTagName("head")[0])}return Ext._headEl},getDoc:function(){if(!Ext._docEl){Ext._docEl=Ext.get(b)}return Ext._docEl},getWin:function(){if(!Ext._winEl){Ext._winEl=Ext.get(window)}return Ext._winEl},removeNode:function(N){N=N.dom||N;var O=N&&N.id,M=Ext.cache[O],L;if(M){M.destroy()}else{if(N&&(N.nodeType===3||N.tagName.toUpperCase()!=="BODY")){L=N.parentNode;if(L){L.removeChild(N)}}}}});Ext.isGarbage=function(L){return L&&L.nodeType===1&&L.tagName!=="BODY"&&L.tagName!=="HTML"&&(!L.parentNode||(!L.offsetParent&&((Ext.isIE8?b.all[L.id]:b.getElementById(L.id))!==L)&&!(Ext.detachedBodyEl&&Ext.detachedBodyEl.isAncestor(L))))};if(Ext.os.is.Android||(Ext.os.is.Windows&&Ext.supports.Touch)){Ext.onReady(function(){var L=Ext.getWin();u._windowWidth=u._viewportWidth=window.innerWidth;u._windowHeight=u._viewportHeight=window.innerHeight;L.on({focusin:"_onWindowFocusChange",focusout:"_onWindowFocusChange",pointerup:"_onWindowFocusChange",capture:true,delegated:false,delay:1,scope:u});L.on({resize:"_onWindowResize",priority:2000,scope:u})})}}));(Ext.cmd.derive("Ext.util.Filter",Ext.Base,{isFilter:true,config:{property:null,value:null,filterFn:null,id:null,anyMatch:false,exactMatch:false,caseSensitive:false,disabled:false,disableOnEmpty:false,operator:null,root:null,serializer:null,convert:null},scope:null,$configStrict:false,statics:{createFilterFn:function(a){if(!a){return Ext.returnTrue}return function(g){var b=a.isCollection?a.items:a,h=b.length,c=true,d,f;for(d=0;c&&d<h;d++){f=b[d];if(!f.getDisabled()){c=f.filter(g)}}return c}},isInvalid:function(a){if(!a.filterFn){if(!a.property){return"A Filter requires either a property or a filterFn to be set"}if(!a.hasOwnProperty("value")&&!a.operator){return"A Filter requires either a property and value, or a filterFn to be set"}}return false}},constructor:function(a){this.initConfig(a)},preventConvert:{"in":1,notin:1},filter:function(b){var a=this,f=a._filterFn||a.getFilterFn(),d=a.getConvert(),c=a._value;a._filterValue=c;a.isDateValue=Ext.isDate(c);if(a.isDateValue){a.dateValue=c.getTime()}if(d&&!a.preventConvert[a.getOperator()]){a._filterValue=d.call(a.scope||a,c)}return f.call(a.scope||a,b)},getId:function(){var a=this._id;if(!a){a=this.getProperty();if(!a){a=Ext.id(null,"ext-filter-")}this._id=a}return a},getFilterFn:function(){var b=this,c=b._filterFn,a;if(!c){a=b.getOperator();if(a){c=b.operatorFns[a]}else{c=b.createRegexFilter()}b._filterFn=c}return c},createRegexFilter:function(){var b=this,f=!!b.getAnyMatch(),a=!!b.getExactMatch(),c=b.getValue(),d=Ext.String.createRegex(c,!f,!f&&a,!b.getCaseSensitive());return function(g){var h=b.getPropertyValue(g);return d?d.test(h):(h==null)}},getPropertyValue:function(b){var a=this._root,c=(a==null)?b:b[a];return c[this._property]},getState:function(){var c=this.getInitialConfig(),a={},b;for(b in c){if(c.hasOwnProperty(b)){a[b]=c[b]}}delete a.root;a.value=this.getValue();return a},getScope:function(){return this.scope},serialize:function(){var a=this.getState(),b=this.getSerializer();delete a.id;delete a.serializer;if(b){b.call(this,a)}return a},updateOperator:function(){this._filterFn=null},updateValue:function(a){this._filterFn=null;if(this.getDisableOnEmpty()){this.setDisabled(Ext.isEmpty(a))}},updateDisableOnEmpty:function(a){var b=false;if(a){b=Ext.isEmpty(this.getValue())}this.setDisabled(b)},privates:{getCandidateValue:function(c,b,f){var d=this,g=d._convert,a=d.getPropertyValue(c);if(g){a=g.call(d.scope||d,a)}else{if(!f){a=Ext.coerce(a,b)}}return a}}},1,0,0,0,0,0,[Ext.util,"Filter"],function(){var a=this.prototype,b=(a.operatorFns={"<":function(d){var c=this._filterValue;return this.getCandidateValue(d,c)<c},"<=":function(d){var c=this._filterValue;return this.getCandidateValue(d,c)<=c},"=":function(d){var f=this,c=f._filterValue;d=f.getCandidateValue(d,c);if(f.isDateValue&&d instanceof Date){d=d.getTime();c=f.dateValue}return d==c},"===":function(d){var f=this,c=f._filterValue;d=f.getCandidateValue(d,c,true);if(f.isDateValue&&d instanceof Date){d=d.getTime();c=f.dateValue}return d===c},">=":function(d){var c=this._filterValue;return this.getCandidateValue(d,c)>=c},">":function(d){var c=this._filterValue;return this.getCandidateValue(d,c)>c},"!=":function(d){var f=this,c=f._filterValue;d=f.getCandidateValue(d,c);if(f.isDateValue&&d instanceof Date){d=d.getTime();c=f.dateValue}return d!=c},"!==":function(d){var f=this,c=f._filterValue;d=f.getCandidateValue(d,c,true);if(f.isDateValue&&d instanceof Date){d=d.getTime();c=f.dateValue}return d!==c},"in":function(d){var c=this._filterValue;return Ext.Array.contains(c,this.getCandidateValue(d,c))},notin:function(d){var c=this._filterValue;return !Ext.Array.contains(c,this.getCandidateValue(d,c))},like:function(d){var c=this._filterValue;return c&&this.getCandidateValue(d,c).toLowerCase().indexOf(c.toLowerCase())>-1}});b["=="]=b["="];b.gt=b[">"];b.ge=b[">="];b.lt=b["<"];b.le=b["<="];b.eq=b["="];b.ne=b["!="]}));(Ext.cmd.derive("Ext.util.Observable",Ext.mixin.Observable,{$applyConfigs:true},0,0,0,0,0,0,[Ext.util,"Observable"],function(a){var b=Ext.mixin.Observable;a.releaseCapture=b.releaseCapture;a.capture=b.capture;a.captureArgs=b.captureArgs;a.observe=a.observeClass=b.observe}));(Ext.cmd.derive("Ext.util.AbstractMixedCollection",Ext.Base,{isMixedCollection:true,generation:0,indexGeneration:0,constructor:function(b,a){var c=this;if(arguments.length===1&&Ext.isObject(b)){c.initialConfig=b;Ext.apply(c,b)}else{c.allowFunctions=b===true;if(a){c.getKey=a}c.initialConfig={allowFunctions:c.allowFunctions,getKey:c.getKey}}c.items=[];c.map={};c.keys=[];c.indexMap={};c.length=0;c.mixins.observable.constructor.call(c)},destroy:function(){var a=this;a.items=a.map=a.keys=a.indexMap=null;a.callParent()},allowFunctions:false,add:function(c,d){var a=this.length,b;if(arguments.length===1){b=this.insert(a,c)}else{b=this.insert(a,c,d)}return b},getKey:function(a){return a.id},replace:function(c,f){var d=this,a,b;if(arguments.length==1){f=arguments[0];c=d.getKey(f)}a=d.map[c];if(typeof c=="undefined"||c===null||typeof a=="undefined"){return d.add(c,f)}d.generation++;b=d.indexOfKey(c);d.items[b]=f;d.map[c]=f;if(d.hasListeners.replace){d.fireEvent("replace",c,a,f)}return f},reorder:function(d){var h=this,b=h.items,c=0,g=b.length,a=[],f=[],j;h.suspendEvents();for(j in d){a[d[j]]=b[j]}for(c=0;c<g;c++){if(d[c]==undefined){f.push(b[c])}}for(c=0;c<g;c++){if(a[c]==undefined){a[c]=f.shift()}}h.clear();h.addAll(a);h.resumeEvents()},updateKey:function(g,h){var d=this,f=d.map,a=d.indexOfKey(g),c=d.indexMap,b;if(a>-1){b=f[g];delete f[g];delete c[g];f[h]=b;c[h]=a;d.keys[a]=h;d.indexGeneration=++d.generation}},addAll:function(c){var b=this,a;if(arguments.length>1||Ext.isArray(c)){b.insert(b.length,arguments.length>1?arguments:c)}else{for(a in c){if(c.hasOwnProperty(a)){if(b.allowFunctions||typeof c[a]!="function"){b.add(a,c[a])}}}}},each:function(f,d){var b=Ext.Array.push([],this.items),c=0,a=b.length,g;for(;c<a;c++){g=b[c];if(f.call(d||g,g,c,a)===false){break}}},eachKey:function(f,d){var g=this.keys,b=this.items,c=0,a=g.length;for(;c<a;c++){f.call(d||window,g[c],b[c],c,a)}},findBy:function(f,d){var g=this.keys,b=this.items,c=0,a=b.length;for(;c<a;c++){if(f.call(d||window,b[c],g[c])){return b[c]}}return null},insert:function(b,c,d){var a;if(Ext.isIterable(c)){a=this.doInsert(b,c,d)}else{if(arguments.length>2){a=this.doInsert(b,[c],[d])}else{a=this.doInsert(b,[c])}a=a[0]}return a},doInsert:function(j,r,q){var o=this,b,c,g,m=r.length,a=m,f=o.hasListeners.add,d,h={},p,t,s;if(q!=null){o.useLinearSearch=true}else{q=r;r=new Array(m);for(g=0;g<m;g++){r[g]=this.getKey(q[g])}}o.suspendEvents();for(g=0;g<m;g++){b=r[g];c=o.indexOfKey(b);if(c!==-1){if(c<j){j--}o.removeAt(c)}if(b!=null){if(h[b]!=null){p=true;a--}h[b]=g}}o.resumeEvents();if(p){t=r;s=q;r=new Array(a);q=new Array(a);g=0;for(b in h){r[g]=t[h[b]];q[g]=s[h[b]];g++}m=a}d=j===o.length&&o.indexGeneration===o.generation;Ext.Array.insert(o.items,j,q);Ext.Array.insert(o.keys,j,r);o.length+=m;o.generation++;if(d){o.indexGeneration=o.generation}for(g=0;g<m;g++,j++){b=r[g];if(b!=null){o.map[b]=q[g];if(d){o.indexMap[b]=j}}if(f){o.fireEvent("add",j,q[g],b)}}return q},remove:function(d){var c=this,b,a;if(!c.useLinearSearch&&(b=c.getKey(d))){a=c.indexOfKey(b)}else{a=Ext.Array.indexOf(c.items,d)}return(a===-1)?false:c.removeAt(a)},removeAll:function(a){var c=this,b;if(a||c.hasListeners.remove){if(a){for(b=a.length-1;b>=0;--b){c.remove(a[b])}}else{while(c.length){c.removeAt(0)}}}else{c.length=c.items.length=c.keys.length=0;c.map={};c.indexMap={};c.generation++;c.indexGeneration=c.generation}},removeAt:function(a){var c=this,d,b;if(a<c.length&&a>=0){c.length--;d=c.items[a];Ext.Array.erase(c.items,a,1);b=c.keys[a];if(typeof b!="undefined"){delete c.map[b]}Ext.Array.erase(c.keys,a,1);if(c.hasListeners.remove){c.fireEvent("remove",d,b)}c.generation++;return d}return false},removeRange:function(h,a){var j=this,b,m,g,f,c,d;if(h<j.length&&h>=0){if(!a){a=1}f=Math.min(h+a,j.length);a=f-h;d=f===j.length;c=d&&j.indexGeneration===j.generation;for(g=h;g<f;g++){m=j.keys[g];if(m!=null){delete j.map[m];if(c){delete j.indexMap[m]}}}b=j.items[g-1];j.length-=a;j.generation++;if(c){j.indexGeneration=j.generation}if(d){j.items.length=j.keys.length=j.length}else{j.items.splice(h,a);j.keys.splice(h,a)}return b}return false},removeAtKey:function(b){var d=this,c=d.keys,a;if(b==null){for(a=c.length-1;a>=0;a--){if(c[a]==null){d.removeAt(a)}}}else{return d.removeAt(d.indexOfKey(b))}},getCount:function(){return this.length},indexOf:function(c){var b=this,a;if(c!=null){if(!b.useLinearSearch&&(a=b.getKey(c))){return this.indexOfKey(a)}return Ext.Array.indexOf(b.items,c)}return -1},indexOfKey:function(a){if(!this.map.hasOwnProperty(a)){return -1}if(this.indexGeneration!==this.generation){this.rebuildIndexMap()}return this.indexMap[a]},rebuildIndexMap:function(){var f=this,d=f.indexMap={},c=f.keys,a=c.length,b;for(b=0;b<a;b++){d[c[b]]=b}f.indexGeneration=f.generation},get:function(b){var d=this,a=d.map[b],c=a!==undefined?a:(typeof b=="number")?d.items[b]:undefined;return typeof c!="function"||d.allowFunctions?c:null},getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},contains:function(c){var b=this,a;if(c!=null){if(!b.useLinearSearch&&(a=b.getKey(c))){return this.map[a]!=null}return Ext.Array.indexOf(this.items,c)!==-1}return false},containsKey:function(a){return this.map.hasOwnProperty(a)},clear:function(){var a=this;if(a.generation){a.length=0;a.items=[];a.keys=[];a.map={};a.indexMap={};a.generation++;a.indexGeneration=a.generation}if(a.hasListeners.clear){a.fireEvent("clear")}},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},sum:function(h,b,j,a){var c=this.extractValues(h,b),g=c.length,f=0,d;j=j||0;a=(a||a===0)?a:g-1;for(d=j;d<=a;d++){f+=c[d]}return f},collect:function(m,f,h){var o=this.extractValues(m,f),a=o.length,b={},c=[],j,g,d;for(d=0;d<a;d++){j=o[d];g=String(j);if((h||!Ext.isEmpty(j))&&!b[g]){b[g]=true;c.push(j)}}return c},extractValues:function(c,a){var b=this.items;if(a){b=Ext.Array.pluck(b,a)}return Ext.Array.pluck(b,c)},hasRange:function(b,a){return(a<this.length)},getRange:function(j,b){var h=this,d=h.items,c=[],a=d.length,g,f;if(a<1){return c}if(j>b){f=true;g=j;j=b;b=g}if(j<0){j=0}if(b==null||b>=a){b=a-1}c=d.slice(j,b+1);if(f&&c.length){c.reverse()}return c},filter:function(d,c,f,a){var b=[];if(Ext.isString(d)){b.push(new Ext.util.Filter({property:d,value:c,anyMatch:f,caseSensitive:a}))}else{if(Ext.isArray(d)||d instanceof Ext.util.Filter){b=b.concat(d)}}return this.filterBy(Ext.util.Filter.createFilterFn(b))},filterBy:function(f,d){var j=this,a=new j.self(j.initialConfig),h=j.keys,b=j.items,g=b.length,c;a.getKey=j.getKey;for(c=0;c<g;c++){if(f.call(d||j,b[c],h[c])){a.add(h[c],b[c])}}a.useLinearSearch=j.useLinearSearch;return a},findIndex:function(c,b,f,d,a){if(Ext.isEmpty(b,false)){return -1}b=this.createValueMatcher(b,d,a);return this.findIndexBy(function(g){return g&&b.test(g[c])},null,f)},findIndexBy:function(f,d,j){var h=this,g=h.keys,b=h.items,c=j||0,a=b.length;for(;c<a;c++){if(f.call(d||h,b[c],g[c])){return c}}return -1},createValueMatcher:function(c,f,a,b){if(!c.exec){var d=Ext.String.escapeRegex;c=String(c);if(f===true){c=d(c)}else{c="^"+d(c);if(b===true){c+="$"}}c=new RegExp(c,a?"":"i")}return c},clone:function(){var a=this,b=new a.self(a.initialConfig);b.add(a.keys,a.items);b.useLinearSearch=a.useLinearSearch;return b}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.util,"AbstractMixedCollection"],0));(Ext.cmd.derive("Ext.util.Sorter",Ext.Base,{isSorter:true,config:{property:null,sorterFn:null,root:null,transform:null,direction:"ASC",id:undefined},statics:{createComparator:function(b,a){a=a||0;return function(c,j){var f=b.isCollection?b.items:b,h=f.length,d,g;for(g=0;g<h;++g){d=f[g].sort(c,j);if(d){return d}}return a&&a(c,j)}}},multiplier:1,constructor:function(a){this.initConfig(a)},getId:function(){var a=this._id;if(!a){a=this.getProperty();if(!a){a=Ext.id(null,"ext-sorter-")}this._id=a}return a},sort:function(a,b){return this.multiplier*this.sortFn(a,b)},sortFn:function(d,c){var g=this,f=g._transform,b=g._root,h=g._property,a,j;if(b){d=d[b];c=c[b]}a=d[h];j=c[h];if(f){a=f(a);j=f(j)}return(a>j)?1:(a<j?-1:0)},applyDirection:function(a){return a?a:"ASC"},updateDirection:function(a){this.multiplier=(a.toUpperCase()==="DESC")?-1:1},updateProperty:function(a){if(a){delete this.sortFn}},updateSorterFn:function(a){this.sortFn=a},toggle:function(){this.setDirection(Ext.String.toggle(this.getDirection(),"ASC","DESC"))},getState:function(){var b=this,a={root:b.getRoot(),property:b.getProperty(),direction:b.getDirection()};if(b._id){a.id=b._id}return a},serialize:function(){return{property:this.getProperty(),direction:this.getDirection()}}},1,0,0,0,0,0,[Ext.util,"Sorter"],0));(Ext.cmd.derive("Ext.util.Sortable",Ext.Base,{isSortable:true,$configPrefixed:false,$configStrict:false,config:{sorters:null},defaultSortDirection:"ASC",multiSortLimit:3,statics:{createComparator:function(a){return a&&a.length?function(d,c){var b=a[0].sort(d,c),g=a.length,f=1;for(;!b&&f<g;f++){b=a[f].sort.call(a[f],d,c)}return b}:function(){return 0}}},applySorters:function(c){var b=this,a=b.getSorters()||new Ext.util.MixedCollection(false,Ext.returnId);if(c){a.addAll(b.decodeSorters(c))}return a},sort:function(h,g,a,f){var b=this,j,d,c=b.getSorters();if(!c){b.setSorters(null);c=b.getSorters()}if(Ext.isArray(h)){f=a;a=g}else{if(Ext.isObject(h)){h=[h];f=a;a=g}else{if(Ext.isString(h)){j=c.get(h);if(!j){j={property:h,direction:g}}else{if(g==null){j.toggle()}else{j.setDirection(g)}}h=[j]}}}if(h&&h.length){h=b.decodeSorters(h);switch(a){case"multi":c.insert(0,h[0]);d=c.getCount()-b.multiSortLimit;if(d>0){c.removeRange(b.multiSortLimit,d)}break;case"prepend":c.insert(0,h);break;case"append":c.addAll(h);break;case undefined:case null:case"replace":c.clear();c.addAll(h);break;default:}}if(f!==false){b.fireEvent("beforesort",b,h);b.onBeforeSort(h);if(b.getSorterCount()){b.doSort(b.generateComparator())}}return h},getSorterCount:function(){return this.getSorters().items.length},generateComparator:function(){var a=this.getSorters().getRange();return a.length?this.createComparator(a):this.emptyComparator},emptyComparator:function(){return 0},onBeforeSort:Ext.emptyFn,decodeSorters:function(g){if(!Ext.isArray(g)){if(g===undefined){g=[]}else{g=[g]}}var d=g.length,h=Ext.util.Sorter,b=this.getModel?this.getModel():this.model,f,a,c;for(c=0;c<d;c++){a=g[c];if(!(a instanceof h)){if(Ext.isString(a)){a={property:a}}Ext.applyIf(a,{root:this.sortRoot,direction:"ASC"});if(a.fn){a.sorterFn=a.fn}if(typeof a=="function"){a={sorterFn:a}}if(b&&!a.transform){f=b.getField(a.property);a.transform=f&&f.sortType!==Ext.identityFn?f.sortType:undefined}g[c]=new Ext.util.Sorter(a)}}return g},getFirstSorter:function(){var c=this.getSorters().items,a=c.length,b=0,d;for(;b<a;++b){d=c[b];if(!d.isGrouper){return d}}return null}},0,0,0,0,0,0,[Ext.util,"Sortable"],function(){this.prototype.createComparator=this.createComparator}));(Ext.cmd.derive("Ext.util.MixedCollection",Ext.util.AbstractMixedCollection,{constructor:function(){this.initConfig();Ext.util.AbstractMixedCollection.prototype.constructor.apply(this,arguments)},doSort:function(a){this.sortBy(a)},_sort:function(q,b,p){var m=this,f,g,d=String(b).toUpperCase()=="DESC"?-1:1,j=[],r=m.keys,h=m.items,a;p=p||function(o,c){return o-c};for(f=0,g=h.length;f<g;f++){j[j.length]={key:r[f],value:h[f],index:f}}Ext.Array.sort(j,function(o,c){return p(o[q],c[q])*d||(o.index<c.index?-1:1)});for(f=0,g=j.length;f<g;f++){a=j[f];h[f]=a.value;r[f]=a.key;m.indexMap[a.key]=f}m.generation++;m.indexGeneration=m.generation;m.fireEvent("sort",m)},sortBy:function(b){var j=this,a=j.items,h,g=j.keys,d,f=a.length,c;for(c=0;c<f;c++){a[c].$extCollectionIndex=c}Ext.Array.sort(a,function(o,m){return b(o,m)||(o.$extCollectionIndex<m.$extCollectionIndex?-1:1)});for(c=0;c<f;c++){h=a[c];d=j.getKey(h);g[c]=d;j.indexMap[d]=c;delete a.$extCollectionIndex}j.generation++;j.indexGeneration=j.generation;j.fireEvent("sort",j,a,g)},findInsertionIndex:function(f,d){var g=this,b=g.items,j=0,a=b.length-1,c,h;if(!d){d=g.generateComparator()}while(j<=a){c=(j+a)>>1;h=d(f,b[c]);if(h>=0){j=c+1}else{if(h<0){a=c-1}}}return j},reorder:function(a){Ext.util.AbstractMixedCollection.prototype.reorder.call(this,a);this.fireEvent("sort",this)},sortByKey:function(a,b){this._sort("key",a,b||function(d,c){var g=String(d).toUpperCase(),f=String(c).toUpperCase();return g>f?1:(g<f?-1:0)})}},1,0,0,0,0,[["sortable",Ext.util.Sortable]],[Ext.util,"MixedCollection"],0));(Ext.cmd.derive("Ext.util.TaskRunner",Ext.Base,{interval:10,timerId:null,constructor:function(a){var b=this;if(typeof a=="number"){b.interval=a}else{if(a){Ext.apply(b,a)}}b.tasks=[];b.timerFn=Ext.Function.bind(b.onTick,b)},newTask:function(b){var a=new Ext.util.TaskRunner.Task(b);a.manager=this;return a},start:function(a){var c=this,b=Ext.Date.now();if(!a.pending){c.tasks.push(a);a.pending=true}a.stopped=false;a.taskStartTime=b;a.taskRunTime=a.fireOnStart!==false?0:a.taskStartTime;a.taskRunCount=0;if(!c.firing){if(a.fireOnStart!==false){c.startTimer(0,b)}else{c.startTimer(a.interval,b)}}return a},stop:function(a){if(!a.stopped){a.stopped=true;if(a.onStop){a.onStop.call(a.scope||a,a)}}return a},stopAll:function(){Ext.each(this.tasks,this.stop,this)},firing:false,nextExpires:1e+99,onTick:function(){var q=this,g=q.tasks,a=Ext.Date.now(),r=1e+99,o=g.length,d=Ext.GlobalEvents,c,s,j,b,f,h,t;q.timerId=null;q.firing=true;for(j=0;j<o||j<(o=g.length);++j){b=g[j];if(!(h=b.stopped)){c=b.taskRunTime+b.interval;if(c<=a){f=1;if(b.hasOwnProperty("fireIdleEvent")){t=b.fireIdleEvent}else{t=q.fireIdleEvent}try{f=b.run.apply(b.scope||b,b.args||[++b.taskRunCount])}catch(m){try{if(b.onError){f=b.onError.call(b.scope||b,b,m)}}catch(p){}}b.taskRunTime=a;if(f===false||b.taskRunCount===b.repeat){q.stop(b);h=true}else{h=b.stopped;c=a+b.interval}}if(!h&&b.duration&&b.duration<=(a-b.taskStartTime)){q.stop(b);h=true}}if(h){b.pending=false;if(!s){s=g.slice(0,j)}}else{if(s){s.push(b)}if(r>c){r=c}}}if(s){q.tasks=s}q.firing=false;if(q.tasks.length){q.startTimer(r-a,Ext.Date.now())}if(t!==false&&d.hasListeners.idle){d.fireEvent("idle")}},startTimer:function(f,c){var d=this,b=c+f,a=d.timerId;if(a&&d.nextExpires-b>d.interval){clearTimeout(a);a=null}if(!a){if(f<d.interval){f=d.interval}d.timerId=Ext.defer(d.timerFn,f);d.nextExpires=b}}},1,0,0,0,0,0,[Ext.util,"TaskRunner"],function(){var b=this,a=b.prototype;a.destroy=a.stopAll;b.Task=new Ext.Class({isTask:true,stopped:true,fireOnStart:false,constructor:function(c){Ext.apply(this,c)},restart:function(c){if(c!==undefined){this.interval=c}this.manager.start(this)},start:function(c){if(this.stopped){this.restart(c)}},stop:function(){this.manager.stop(this)}});a=b.Task.prototype;a.destroy=a.stop}));(Ext.cmd.derive("Ext.fx.target.Target",Ext.Base,{isAnimTarget:true,constructor:function(a){this.target=a;this.id=this.getId()},getId:function(){return this.target.id},remove:function(){Ext.destroy(this.target)}},1,0,0,0,0,0,[Ext.fx.target,"Target"],0));(Ext.cmd.derive("Ext.fx.target.Element",Ext.fx.target.Target,{type:"element",getElVal:function(b,a,c){if(c===undefined){if(a==="x"){c=b.getX()}else{if(a==="y"){c=b.getY()}else{if(a==="scrollTop"){c=b.getScroll().top}else{if(a==="scrollLeft"){c=b.getScroll().left}else{if(a==="height"){c=b.getHeight()}else{if(a==="width"){c=b.getWidth()}else{c=b.getStyle(a)}}}}}}}return c},getAttr:function(a,c){var b=this.target;return[[b,this.getElVal(b,a,c)]]},setAttr:function(m){var g=m.length,d,a,h,f,c,b;for(f=0;f<g;f++){d=m[f].attrs;for(a in d){if(d.hasOwnProperty(a)){b=d[a].length;for(c=0;c<b;c++){h=d[a][c];this.setElVal(h[0],a,h[1])}}}}},setElVal:function(b,a,c){if(a==="x"){b.setX(c)}else{if(a==="y"){b.setY(c)}else{if(a==="scrollTop"){b.scrollTo("top",c)}else{if(a==="scrollLeft"){b.scrollTo("left",c)}else{if(a==="width"){b.setWidth(c)}else{if(a==="height"){b.setHeight(c)}else{b.setStyle(a,c)}}}}}}}},0,0,0,0,0,0,[Ext.fx.target,"Element"],0));(Ext.cmd.derive("Ext.fx.target.ElementCSS",Ext.fx.target.Element,{setAttr:function(s,f){var v={attrs:[],duration:[],easing:[]},q=s.length,r=function(){this.setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",null);this.setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",null);this.setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",null)},t={single:true},g,u,m,p,c,b,h,d,a;for(h=0;h<q;h++){u=s[h];c=u.duration;p=u.easing;u=u.attrs;for(m in u){if(Ext.Array.indexOf(v.attrs,m)==-1){v.attrs.push(m.replace(/[A-Z]/g,function(j){return"-"+j.toLowerCase()}));v.duration.push(c+"ms");v.easing.push(p)}}}g=v.attrs.join(",");c=v.duration.join(",");p=v.easing.join(", ");for(h=0;h<q;h++){u=s[h].attrs;for(m in u){a=u[m].length;for(d=0;d<a;d++){b=u[m][d];b[0].setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",f?"":g);b[0].setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",f?"":c);b[0].setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",f?"":p);b[0].setStyle(m,b[1]);if(f){b=b[0].dom.offsetWidth}else{b[0].on(Ext.supports.CSS3TransitionEnd,r,b[0],t)}}}}}},0,0,0,0,0,0,[Ext.fx.target,"ElementCSS"],0));(Ext.cmd.derive("Ext.fx.target.CompositeElement",Ext.fx.target.Element,{isComposite:true,constructor:function(a){a.id=a.id||Ext.id(null,"ext-composite-");Ext.fx.target.Element.prototype.constructor.call(this,a)},getAttr:function(a,j){var b=[],h=this.target,g=h.elements,f=g.length,c,d;for(c=0;c<f;c++){d=g[c];if(d){d=h.getElement(d);b.push([d,this.getElVal(d,a,j)])}}return b},setAttr:function(p){var m=this.target,o=p.length,b=m.elements,s=b.length,q,d,r,h,c,g,f,a;for(g=0;g<o;g++){r=p[g].attrs;for(h in r){if(r.hasOwnProperty(h)){a=r[h].length;for(f=0;f<a;f++){q=r[h][f][1];for(d=0;d<s;++d){c=b[d];if(c){c=m.getElement(c);this.setElVal(c,h,q)}}}}}}},remove:function(){this.target.destroy()}},1,0,0,0,0,0,[Ext.fx.target,"CompositeElement"],0));(Ext.cmd.derive("Ext.fx.target.CompositeElementCSS",Ext.fx.target.CompositeElement,{setAttr:function(){return Ext.fx.target.ElementCSS.prototype.setAttr.apply(this,arguments)}},0,0,0,0,0,0,[Ext.fx.target,"CompositeElementCSS"],0));(Ext.cmd.derive("Ext.fx.target.Sprite",Ext.fx.target.Target,{type:"draw",getFromPrim:function(b,a){var c;switch(a){case"rotate":case"rotation":c=b.attr.rotation;return{x:c.x||0,y:c.y||0,degrees:c.degrees||0};case"scale":case"scaling":c=b.attr.scaling;return{x:c.x||1,y:c.y||1,cx:c.cx||0,cy:c.cy||0};case"translate":case"translation":c=b.attr.translation;return{x:c.x||0,y:c.y||0};default:return b.attr[a]}},getAttr:function(a,b){return[[this.target,b!==undefined?b:this.getFromPrim(this.target,a)]]},setAttr:function(p){var g=p.length,m=[],b,f,s,u,t,r,q,d,c,o,h,a;for(d=0;d<g;d++){b=p[d].attrs;for(f in b){s=b[f];a=s.length;for(c=0;c<a;c++){t=s[c][0];u=s[c][1];if(f==="translate"||f==="translation"){q={x:u.x,y:u.y}}else{if(f==="rotate"||f==="rotation"){o=u.x;if(isNaN(o)){o=null}h=u.y;if(isNaN(h)){h=null}q={degrees:u.degrees,x:o,y:h}}else{if(f==="scale"||f==="scaling"){o=u.x;if(isNaN(o)){o=null}h=u.y;if(isNaN(h)){h=null}q={x:o,y:h,cx:u.cx,cy:u.cy}}else{if(f==="width"||f==="height"||f==="x"||f==="y"){q=parseFloat(u)}else{q=u}}}}r=Ext.Array.indexOf(m,t);if(r===-1){m.push([t,{}]);r=m.length-1}m[r][1][f]=q}}}g=m.length;for(d=0;d<g;d++){m[d][0].setAttributes(m[d][1])}this.target.redraw()}},0,0,0,0,0,0,[Ext.fx.target,"Sprite"],0));(Ext.cmd.derive("Ext.fx.target.CompositeSprite",Ext.fx.target.Sprite,{getAttr:function(a,h){var b=[],g=[].concat(this.target.items),f=g.length,d,c;for(d=0;d<f;d++){c=g[d];b.push([c,h!==undefined?h:this.getFromPrim(c,a)])}return b}},0,0,0,0,0,0,[Ext.fx.target,"CompositeSprite"],0));(Ext.cmd.derive("Ext.fx.target.Component",Ext.fx.target.Target,{type:"component",getPropMethod:{top:function(){return this.getPosition(true)[1]},left:function(){return this.getPosition(true)[0]},x:function(){return this.getPosition()[0]},y:function(){return this.getPosition()[1]},height:function(){return this.getHeight()},width:function(){return this.getWidth()},opacity:function(){return this.el.getStyle("opacity")}},setMethods:{top:"setPosition",left:"setPosition",x:"setPagePosition",y:"setPagePosition",height:"setSize",width:"setSize",opacity:"setOpacity"},getAttr:function(a,b){return[[this.target,b!==undefined?b:this.getPropMethod[a].call(this.target)]]},setAttr:function(v,g,b){var t=this,s=v.length,A,r,c,m,f,q,d,u,z,p,a={},y;for(m=0;m<s;m++){A=v[m].attrs;for(r in A){q=A[r].length;for(f=0;f<q;f++){c=A[r][f];y=a[t.setMethods[r]]||(a[t.setMethods[r]]={});y.target=c[0];y[r]=c[1]}}if(a.setPosition){c=a.setPosition;d=(c.left===undefined)?undefined:parseFloat(c.left);u=(c.top===undefined)?undefined:parseFloat(c.top);c.target.setPosition(d,u)}if(a.setPagePosition){c=a.setPagePosition;c.target.setPagePosition(c.x,c.y)}if(a.setSize){c=a.setSize;z=(c.width===undefined)?c.target.getWidth():parseFloat(c.width);p=(c.height===undefined)?c.target.getHeight():parseFloat(c.height);c.target.el.setSize(z,p);if(b||t.dynamic){Ext.GlobalEvents.on({idle:Ext.Function.bind(c.target.setSize,c.target,[z,p]),single:true})}}if(a.setOpacity){c=a.setOpacity;c.target.el.setStyle("opacity",c.opacity)}}}},0,0,0,0,0,0,[Ext.fx.target,"Component"],0));(Ext.cmd.derive("Ext.fx.Queue",Ext.Base,{constructor:function(){this.targets=new Ext.util.HashMap();this.fxQueue={}},getFxDefaults:function(a){var b=this.targets.get(a);if(b){return b.fxDefaults}return{}},setFxDefaults:function(a,c){var b=this.targets.get(a);if(b){b.fxDefaults=Ext.apply(b.fxDefaults||{},c)}},stopAnimation:function(b){var f=this,a=f.getFxQueue(b),d=a.length,c;while(d){c=a[d-1];if(c){c.end()}d--}},getActiveAnimation:function(b){var a=this.getFxQueue(b);return(a&&!!a.length)?a[0]:false},hasFxBlock:function(b){var a=this.getFxQueue(b);return a&&a[0]&&a[0].block},getFxQueue:function(b){if(!b){return false}var c=this,a=c.fxQueue[b],d=c.targets.get(b);if(!d){return false}if(!a){c.fxQueue[b]=[];if(d.type!=="element"){d.target.on("destroy",function(){c.fxQueue[b]=[]})}}return c.fxQueue[b]},queueFx:function(d){var c=this,f=d.target,a,b;if(!f){return}a=c.getFxQueue(f.getId());b=a.length;if(b){if(d.concurrent){d.paused=false}else{a[b-1].on("afteranimate",function(){d.paused=false})}}else{d.paused=false}d.on("afteranimate",function(){Ext.Array.remove(a,d);if(a.length===0){c.targets.remove(d.target)}if(d.remove){if(f.type==="element"){var g=Ext.get(f.id);if(g){g.destroy()}}}},c,{single:true});a.push(d)}},1,0,0,0,0,0,[Ext.fx,"Queue"],0));(Ext.cmd.derive("Ext.fx.Manager",Ext.Base,{singleton:true,constructor:function(){var a=this;a.items=new Ext.util.MixedCollection();a.targetArr={};a.mixins.queue.constructor.call(a);a.taskRunner=new Ext.util.TaskRunner()},interval:16,forceJS:true,createTarget:function(d){var b=this,c=!b.forceJS&&Ext.supports.Transitions,a;b.useCSS3=c;if(d){if(d.tagName||Ext.isString(d)||d.isFly){d=Ext.get(d);a=new Ext.fx.target["Element"+(c?"CSS":"")](d)}else{if(d.dom){a=new Ext.fx.target["Element"+(c?"CSS":"")](d)}else{if(d.isComposite){a=new Ext.fx.target["CompositeElement"+(c?"CSS":"")](d)}else{if(d.isSprite){a=new Ext.fx.target.Sprite(d)}else{if(d.isCompositeSprite){a=new Ext.fx.target.CompositeSprite(d)}else{if(d.isComponent){a=new Ext.fx.target.Component(d)}else{if(d.isAnimTarget){return d}else{return null}}}}}}}b.targets.add(a);return a}else{return null}},addAnim:function(d){var c=this,b=c.items,a=c.task;b.add(d.id,d);if(!a&&b.length){a=c.task={run:c.runner,interval:c.interval,scope:c};c.taskRunner.start(a)}},removeAnim:function(d){var c=this,b=c.items,a=c.task;b.removeAtKey(d.id);if(a&&!b.length){c.taskRunner.stop(a);delete c.task}},runner:function(){var d=this,b=d.items.getRange(),c=0,a=b.length,f;d.targetArr={};d.timestamp=new Date();for(;c<a;c++){f=b[c];if(f.isReady()){d.startAnim(f)}}for(c=0;c<a;c++){f=b[c];if(f.isRunning()){d.runAnim(f)}}d.applyPendingAttrs();d.targetArr=null},startAnim:function(a){a.start(this.timestamp)},runAnim:function(f,a){if(!f){return}var d=this,h=d.useCSS3&&f.target.type==="element",b=d.timestamp-f.startTime,c=(b>=f.duration),g,j;if(a){b=f.duration;c=true}g=this.collectTargetData(f,b,h,c);if(h){f.target.setAttr(g.anims[f.id].attributes,true);d.collectTargetData(f,f.duration,h,c);f.paused=true;g=f.target.target;if(f.target.isComposite){g=f.target.target.last()}j={};j[Ext.supports.CSS3TransitionEnd]=f.lastFrame;j.scope=f;j.single=true;g.on(j)}return g},jumpToEnd:function(c){var b=this,d,a;if(!b.targetArr){b.targetArr={};a=true}d=b.runAnim(c,true);b.applyAnimAttrs(d,d.anims[c.id]);if(a){b.targetArr=null}},collectTargetData:function(c,a,f,g){var b=c.target.getId(),d=this.targetArr[b];if(!d){d=this.targetArr[b]={id:b,el:c.target,anims:{}}}d.anims[c.id]={id:c.id,anim:c,elapsed:a,isLastFrame:g,attributes:[{duration:c.duration,easing:(f&&c.reverse)?c.easingFn.reverse().toCSS3():c.easing,attrs:c.runAnim(a)}]};return d},applyAnimAttrs:function(c,a){var b=a.anim;if(a.attributes&&b.isRunning()){c.el.setAttr(a.attributes,false,a.isLastFrame);if(a.isLastFrame){b.lastFrame()}}},applyPendingAttrs:function(){var f=this.targetArr,g,c,b,d,a;for(c in f){if(f.hasOwnProperty(c)){g=f[c];for(a in g.anims){if(g.anims.hasOwnProperty(a)){b=g.anims[a];d=b.anim;if(b.attributes&&d.isRunning()){g.el.setAttr(b.attributes,false,b.isLastFrame);if(b.isLastFrame){d.lastFrame()}}}}}}}},1,0,0,0,0,[["queue",Ext.fx.Queue]],[Ext.fx,"Manager"],0));(Ext.cmd.derive("Ext.fx.Animator",Ext.Base,{isAnimator:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",running:false,paused:false,damper:1,iterations:1,currentIteration:0,keyframeStep:0,animKeyFramesRE:/^(from|to|\d+%?)$/,constructor:function(a){var b=this;a=Ext.apply(b,a||{});b.config=a;b.id=Ext.id(null,"ext-animator-");b.mixins.observable.constructor.call(b,a);b.timeline=[];b.createTimeline(b.keyframes);if(b.target){b.applyAnimator(b.target);Ext.fx.Manager.addAnim(b)}},sorter:function(d,c){return d.pct-c.pct},createTimeline:function(d){var h=this,o=[],j=h.to||{},b=h.duration,p,a,c,g,m,f;for(m in d){if(d.hasOwnProperty(m)&&h.animKeyFramesRE.test(m)){f={attrs:Ext.apply(d[m],j)};if(m==="from"){m=0}else{if(m==="to"){m=100}}f.pct=parseInt(m,10);o.push(f)}}Ext.Array.sort(o,h.sorter);g=o.length;for(c=0;c<g;c++){p=(o[c-1])?b*(o[c-1].pct/100):0;a=b*(o[c].pct/100);h.timeline.push({duration:a-p,attrs:o[c].attrs})}},applyAnimator:function(d){var h=this,j=[],o=h.timeline,g=o.length,b,f,a,m,c;if(h.fireEvent("beforeanimate",h)!==false){for(c=0;c<g;c++){b=o[c];m=b.attrs;f=m.easing||h.easing;a=m.damper||h.damper;delete m.easing;delete m.damper;b=new Ext.fx.Anim({target:d,easing:f,damper:a,duration:b.duration,paused:true,to:m});j.push(b)}h.animations=j;h.target=b.target;for(c=0;c<g-1;c++){b=j[c];b.nextAnim=j[c+1];b.on("afteranimate",function(){this.nextAnim.paused=false});b.on("afteranimate",function(){this.fireEvent("keyframe",this,++this.keyframeStep)},h)}j[g-1].on("afteranimate",function(){this.lastFrame()},h)}},start:function(d){var f=this,c=f.delay,b=f.delayStart,a;if(c){if(!b){f.delayStart=d;return}else{a=d-b;if(a<c){return}else{d=new Date(b.getTime()+c)}}}if(f.fireEvent("beforeanimate",f)!==false){f.startTime=d;f.running=true;f.animations[f.keyframeStep].paused=false}},lastFrame:function(){var c=this,a=c.iterations,b=c.currentIteration;b++;if(b<a){c.startTime=new Date();c.currentIteration=b;c.keyframeStep=0;c.applyAnimator(c.target);c.animations[c.keyframeStep].paused=false}else{c.currentIteration=0;c.end()}},end:function(){var a=this;a.fireEvent("afteranimate",a,a.startTime,new Date()-a.startTime)},isReady:function(){return this.paused===false&&this.running===false&&this.iterations>0},isRunning:function(){return false}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.fx,"Animator"],0));(Ext.cmd.derive("Ext.fx.CubicBezier",Ext.Base,{singleton:true,cubicBezierAtTime:function(s,d,b,r,q,j){var m=3*d,p=3*(r-d)-m,a=1-m-p,h=3*b,o=3*(q-b)-h,u=1-h-o;function g(v){return((a*v+p)*v+m)*v}function c(v,y){var w=f(v,y);return((u*w+o)*w+h)*w}function f(t,C){var B,A,y,v,z,w;for(y=t,w=0;w<8;w++){v=g(y)-t;if(Math.abs(v)<C){return y}z=(3*a*y+2*p)*y+m;if(Math.abs(z)<0.000001){break}y=y-v/z}B=0;A=1;y=t;if(y<B){return B}if(y>A){return A}while(B<A){v=g(y);if(Math.abs(v-t)<C){return y}if(t>v){B=y}else{A=y}y=(A-B)/2+B}return y}return c(s,1/(200*j))},cubicBezier:function(b,f,a,c){var d=function(g){return Ext.fx.CubicBezier.cubicBezierAtTime(g,b,f,a,c,1)};d.toCSS3=function(){return"cubic-bezier("+[b,f,a,c].join(",")+")"};d.reverse=function(){return Ext.fx.CubicBezier.cubicBezier(1-a,1-c,1-b,1-f)};return d}},0,0,0,0,0,0,[Ext.fx,"CubicBezier"],0));(Ext.cmd.derive("Ext.fx.Easing",Ext.Base,function(){var f=Math,h=f.PI,d=f.pow,b=f.sin,g=f.sqrt,a=f.abs,c=1.70158;return{singleton:true,linear:Ext.identityFn,ease:function(v){var p=0.07813-v/2,o=g(0.0066+p*p),j=o-p,u=d(a(j),1/3)*(j<0?-1:1),s=-o-p,r=d(a(s),1/3)*(s<0?-1:1),m=u+r+0.25;return d(1-m,2)*3*m*0.1+(1-m)*3*m*m+m*m*m},easeIn:function(j){return d(j,1.7)},easeOut:function(j){return d(j,0.48)},easeInOut:function(v){var p=0.48-v/1.04,o=g(0.1734+p*p),j=o-p,u=d(a(j),1/3)*(j<0?-1:1),s=-o-p,r=d(a(s),1/3)*(s<0?-1:1),m=u+r+0.5;return(1-m)*3*m*m+m*m*m},backIn:function(j){return j*j*((c+1)*j-c)},backOut:function(j){j=j-1;return j*j*((c+1)*j+c)+1},elasticIn:function(o){if(o===0||o===1){return o}var m=0.3,j=m/4;return d(2,-10*o)*b((o-j)*(2*h)/m)+1},elasticOut:function(j){return 1-Ext.fx.Easing.elasticIn(1-j)},bounceIn:function(j){return 1-Ext.fx.Easing.bounceOut(1-j)},bounceOut:function(q){var m=7.5625,o=2.75,j;if(q<(1/o)){j=m*q*q}else{if(q<(2/o)){q-=(1.5/o);j=m*q*q+0.75}else{if(q<(2.5/o)){q-=(2.25/o);j=m*q*q+0.9375}else{q-=(2.625/o);j=m*q*q+0.984375}}}return j}}},0,0,0,0,0,0,[Ext.fx,"Easing"],function(b){var c=b.self,a=c.prototype;c.addMembers({"back-in":a.backIn,"back-out":a.backOut,"ease-in":a.easeIn,"ease-out":a.easeOut,"elastic-in":a.elasticIn,"elastic-out":a.elasticOut,"bounce-in":a.bounceIn,"bounce-out":a.bounceOut,"ease-in-out":a.easeInOut})}));(Ext.cmd.derive("Ext.fx.DrawPath",Ext.Base,{singleton:true,pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,is:function(b,a){a=String(a).toLowerCase();return(a=="object"&&b===Object(b))||(a=="undefined"&&typeof b==a)||(a=="null"&&b===null)||(a=="array"&&Array.isArray&&Array.isArray(b))||(Object.prototype.toString.call(b).toLowerCase().slice(8,-1))==a},path2string:function(){return this.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},pathToString:function(a){return a.join(",").replace(Ext.fx.DrawPath.pathToStringRE,"$1")},parsePathString:function(a){if(!a){return null}var d={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},c=[],b=this;if(b.is(a,"array")&&b.is(a[0],"array")){c=b.pathClone(a)}if(!c.length){String(a).replace(b.pathCommandRE,function(g,f,m){var j=[],h=f.toLowerCase();m.replace(b.pathValuesRE,function(p,o){if(o){j.push(+o)}});if(h=="m"&&j.length>2){c.push([f].concat(Ext.Array.splice(j,0,2)));h="l";f=(f=="m")?"l":"L"}while(j.length>=d[h]){c.push([f].concat(Ext.Array.splice(j,0,d[h])));if(!d[h]){break}}})}c.toString=b.path2string;return c},pathClone:function(g){var c=[],a,f,b,d;if(!this.is(g,"array")||!this.is(g&&g[0],"array")){g=this.parsePathString(g)}for(b=0,d=g.length;b<d;b++){c[b]=[];for(a=0,f=g[b].length;a<f;a++){c[b][a]=g[b][a]}}c.toString=this.path2string;return c},pathToAbsolute:function(c){if(!this.is(c,"array")||!this.is(c&&c[0],"array")){c=this.parsePathString(c)}var m=[],p=0,o=0,s=0,q=0,g=0,h=c.length,b,d,f,a;if(h&&c[0][0]=="M"){p=+c[0][1];o=+c[0][2];s=p;q=o;g++;m[0]=["M",p,o]}for(;g<h;g++){b=m[g]=[];d=c[g];if(d[0]!=d[0].toUpperCase()){b[0]=d[0].toUpperCase();switch(b[0]){case"A":b[1]=d[1];b[2]=d[2];b[3]=d[3];b[4]=d[4];b[5]=d[5];b[6]=+(d[6]+p);b[7]=+(d[7]+o);break;case"V":b[1]=+d[1]+o;break;case"H":b[1]=+d[1]+p;break;case"M":s=+d[1]+p;q=+d[2]+o;default:f=1;a=d.length;for(;f<a;f++){b[f]=+d[f]+((f%2)?p:o)}}}else{f=0;a=d.length;for(;f<a;f++){m[g][f]=d[f]}}switch(b[0]){case"Z":p=s;o=q;break;case"H":p=b[1];break;case"V":o=b[1];break;case"M":d=m[g];a=d.length;s=d[a-2];q=d[a-1];default:d=m[g];a=d.length;p=d[a-2];o=d[a-1]}}m.toString=this.path2string;return m},interpolatePaths:function(u,o){var j=this,d=j.pathToAbsolute(u),q=j.pathToAbsolute(o),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},b=function(p,v){if(p[v].length>7){p[v].shift();var w=p[v];while(w.length){Ext.Array.splice(p,v++,0,["C"].concat(Ext.Array.splice(w,0,6)))}Ext.Array.erase(p,v,1);s=Math.max(d.length,q.length||0)}},c=function(z,y,v,p,w){if(z&&y&&z[w][0]=="M"&&y[w][0]!="M"){Ext.Array.splice(y,w,0,["M",p.x,p.y]);v.bx=0;v.by=0;v.x=z[w][1];v.y=z[w][2];s=Math.max(d.length,q.length||0)}},h,s,g,t,f,m;for(h=0,s=Math.max(d.length,q.length||0);h<s;h++){d[h]=j.command2curve(d[h],r);b(d,h);(q[h]=j.command2curve(q[h],a));b(q,h);c(d,q,r,a,h);c(q,d,a,r,h);g=d[h];t=q[h];f=g.length;m=t.length;r.x=g[f-2];r.y=g[f-1];r.bx=parseFloat(g[f-4])||r.x;r.by=parseFloat(g[f-3])||r.y;a.bx=(parseFloat(t[m-4])||a.x);a.by=(parseFloat(t[m-3])||a.y);a.x=t[m-2];a.y=t[m-1]}return[d,q]},command2curve:function(c,b){var a=this;if(!c){return["C",b.x,b.y,b.x,b.y,b.x,b.y]}if(c[0]!="T"&&c[0]!="Q"){b.qx=b.qy=null}switch(c[0]){case"M":b.X=c[1];b.Y=c[2];break;case"A":c=["C"].concat(a.arc2curve.apply(a,[b.x,b.y].concat(c.slice(1))));break;case"S":c=["C",b.x+(b.x-(b.bx||b.x)),b.y+(b.y-(b.by||b.y))].concat(c.slice(1));break;case"T":b.qx=b.x+(b.x-(b.qx||b.x));b.qy=b.y+(b.y-(b.qy||b.y));c=["C"].concat(a.quadratic2curve(b.x,b.y,b.qx,b.qy,c[1],c[2]));break;case"Q":b.qx=c[1];b.qy=c[2];c=["C"].concat(a.quadratic2curve(b.x,b.y,c[1],c[2],c[3],c[4]));break;case"L":c=["C"].concat(b.x,b.y,c[1],c[2],c[1],c[2]);break;case"H":c=["C"].concat(b.x,b.y,c[1],b.y,c[1],b.y);break;case"V":c=["C"].concat(b.x,b.y,b.x,c[1],b.x,c[1]);break;case"Z":c=["C"].concat(b.x,b.y,b.X,b.Y,b.X,b.Y);break}return c},quadratic2curve:function(b,d,h,f,a,c){var g=1/3,j=2/3;return[g*b+j*h,g*d+j*f,g*a+j*h,g*c+j*f,a,c]},rotate:function(b,h,a){var d=Math.cos(a),c=Math.sin(a),g=b*d-h*c,f=b*c+h*d;return{x:g,y:f}},arc2curve:function(v,ah,J,H,B,p,g,u,ag,C){var z=this,d=Math.PI,A=z.radian,G=d*120/180,b=A*(+B||0),O=[],L=Math,V=L.cos,a=L.sin,X=L.sqrt,w=L.abs,q=L.asin,K,Q,P,ac,c,T,W,E,D,o,m,s,j,af,f,ae,R,U,S,ad,ab,aa,Y,N,Z,M,F,I,r;if(!C){K=z.rotate(v,ah,-b);v=K.x;ah=K.y;K=z.rotate(u,ag,-b);u=K.x;ag=K.y;Q=(v-u)/2;P=(ah-ag)/2;ac=(Q*Q)/(J*J)+(P*P)/(H*H);if(ac>1){ac=X(ac);J=ac*J;H=ac*H}c=J*J;T=H*H;W=(p==g?-1:1)*X(w((c*T-c*P*P-T*Q*Q)/(c*P*P+T*Q*Q)));E=W*J*P/H+(v+u)/2;D=W*-H*Q/J+(ah+ag)/2;o=q(((ah-D)/H).toFixed(7));m=q(((ag-D)/H).toFixed(7));o=v<E?d-o:o;m=u<E?d-m:m;if(o<0){o=d*2+o}if(m<0){m=d*2+m}if(g&&o>m){o=o-d*2}if(!g&&m>o){m=m-d*2}}else{o=C[0];m=C[1];E=C[2];D=C[3]}s=m-o;if(w(s)>G){F=m;I=u;r=ag;m=o+G*(g&&m>o?1:-1);u=E+J*V(m);ag=D+H*a(m);O=z.arc2curve(u,ag,J,H,B,0,g,I,r,[m,F,E,D])}s=m-o;j=V(o);af=a(o);f=V(m);ae=a(m);R=L.tan(s/4);U=4/3*J*R;S=4/3*H*R;ad=[v,ah];ab=[v+U*af,ah-S*j];aa=[u+U*ae,ag-S*f];Y=[u,ag];ab[0]=2*ad[0]-ab[0];ab[1]=2*ad[1]-ab[1];if(C){return[ab,aa,Y].concat(O)}else{O=[ab,aa,Y].concat(O).join().split(",");N=[];M=O.length;for(Z=0;Z<M;Z++){N[Z]=Z%2?z.rotate(O[Z-1],O[Z],b).y:z.rotate(O[Z],O[Z+1],b).x}return N}}},0,0,0,0,0,0,[Ext.fx,"DrawPath"],0));(Ext.cmd.derive("Ext.fx.PropertyHandler",Ext.Base,{statics:{defaultHandler:{pixelDefaultsRE:/width|height|top$|bottom$|left$|right$/i,unitRE:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,scrollRE:/^scroll/i,computeDelta:function(m,c,a,g,j){a=(typeof a=="number")?a:1;var h=this.unitRE,d=h.exec(m),b,f;if(d){m=d[1];f=d[2];if(!this.scrollRE.test(j)&&!f&&this.pixelDefaultsRE.test(j)){f="px"}}m=+m||0;d=h.exec(c);if(d){c=d[1];f=d[2]||f}c=+c||0;b=(g!=null)?g:m;return{from:m,delta:(c-b)*a,units:f}},get:function(r,b,a,q,m){var p=r.length,d=[],f,h,o,c,g;for(f=0;f<p;f++){if(q){h=q[f][1].from}if(Ext.isArray(r[f][1])&&Ext.isArray(b)){o=[];c=0;g=r[f][1].length;for(;c<g;c++){o.push(this.computeDelta(r[f][1][c],b[c],a,h,m))}d.push([r[f][0],o])}else{d.push([r[f][0],this.computeDelta(r[f][1],b,a,h,m)])}}return d},set:function(o,g){var h=o.length,c=[],d,a,m,f,b;for(d=0;d<h;d++){a=o[d][1];if(Ext.isArray(a)){m=[];b=0;f=a.length;for(;b<f;b++){m.push(a[b].from+a[b].delta*g+(a[b].units||0))}c.push([o[d][0],m])}else{c.push([o[d][0],a.from+a.delta*g+(a.units||0)])}}return c}},stringHandler:{computeDelta:function(f,b,d,c,a){return{from:f,delta:b}},get:function(m,b,a,j,g){var h=m.length,c=[],d,f;for(d=0;d<h;d++){c.push([m[d][0],this.computeDelta(m[d][1],b,a,f,g)])}return c},set:function(a,g){var d=a.length,b=[],c,f;for(c=0;c<d;c++){f=a[c][1];b.push([a[c][0],f.delta])}return b}},color:{rgbRE:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,parseColor:function(f,a){a=(typeof a=="number")?a:1;var g=false,c=[this.hexRE,this.rgbRE,this.hex3RE],d=c.length,j,b,m,h;for(h=0;h<d;h++){m=c[h];b=(h%2===0)?16:10;j=m.exec(f);if(j&&j.length===4){if(h===2){j[1]+=j[1];j[2]+=j[2];j[3]+=j[3]}g={red:parseInt(j[1],b),green:parseInt(j[2],b),blue:parseInt(j[3],b)};break}}return g||f},computeDelta:function(h,a,f,c){h=this.parseColor(h);a=this.parseColor(a,f);var g=c?c:h,b=typeof g,d=typeof a;if(b==="string"||b==="undefined"||d==="string"||d==="undefined"){return a||g}return{from:h,delta:{red:Math.round((a.red-g.red)*f),green:Math.round((a.green-g.green)*f),blue:Math.round((a.blue-g.blue)*f)}}},get:function(j,a,g,d){var h=j.length,c=[],f,b;for(f=0;f<h;f++){if(d){b=d[f][1].from}c.push([j[f][0],this.computeDelta(j[f][1],a,g,b)])}return c},set:function(m,f){var g=m.length,c=[],d,b,a,h,j;for(d=0;d<g;d++){b=m[d][1];if(b){h=b.from;j=b.delta;b=(typeof b==="object"&&"red" in b)?"rgb("+b.red+", "+b.green+", "+b.blue+")":b;b=(typeof b==="object"&&b.length)?b[0]:b;if(typeof b==="undefined"){return[]}a=typeof b==="string"?b:"rgb("+[(h.red+Math.round(j.red*f))%256,(h.green+Math.round(j.green*f))%256,(h.blue+Math.round(j.blue*f))%256].join(",")+")";c.push([m[d][0],a])}}return c}},object:{interpolate:function(d,b){b=(typeof b==="number")?b:1;var a={},c;for(c in d){a[c]=parseFloat(d[c])*b}return a},computeDelta:function(h,a,c,b){h=this.interpolate(h);a=this.interpolate(a,c);var g=b?b:h,f={},d;for(d in a){f[d]=a[d]-g[d]}return{from:h,delta:f}},get:function(j,a,g,d){var h=j.length,c=[],f,b;for(f=0;f<h;f++){if(d){b=d[f][1].from}c.push([j[f][0],this.computeDelta(j[f][1],a,g,b)])}return c},set:function(o,g){var h=o.length,c=[],f={},d,j,m,b,a;for(d=0;d<h;d++){b=o[d][1];j=b.from;m=b.delta;for(a in j){f[a]=j[a]+m[a]*g}c.push([o[d][0],f])}return c}},path:{computeDelta:function(f,a,c,b){c=(typeof c==="number")?c:1;var d;f=+f||0;a=+a||0;d=(b!=null)?b:f;return{from:f,delta:(a-d)*c}},forcePath:function(a){if(!Ext.isArray(a)&&!Ext.isArray(a[0])){a=Ext.fx.DrawPath.parsePathString(a)}return a},get:function(b,m,a,s){var c=this.forcePath(m),p=[],u=b.length,d,h,q,g,r,o,f,v,t;for(q=0;q<u;q++){t=this.forcePath(b[q][1]);g=Ext.fx.DrawPath.interpolatePaths(t,c);t=g[0];c=g[1];d=t.length;v=[];for(o=0;o<d;o++){g=[t[o][0]];h=t[o].length;for(f=1;f<h;f++){r=s&&s[0][1][o][f].from;g.push(this.computeDelta(t[o][f],c[o][f],a,r))}v.push(g)}p.push([b[q][0],v])}return p},set:function(r,p){var q=r.length,f=[],h,g,d,m,o,c,a,b;for(h=0;h<q;h++){c=r[h][1];m=[];a=c.length;for(g=0;g<a;g++){o=[c[g][0]];b=c[g].length;for(d=1;d<b;d++){o.push(c[g][d].from+c[g][d].delta*p)}m.push(o.join(","))}f.push([r[h][0],m.join(",")])}return f}}}},0,0,0,0,0,0,[Ext.fx,"PropertyHandler"],function(){var b=["outlineColor","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fill","stroke"],c=b.length,a=0,d;for(;a<c;a++){d=b[a];this[d]=this.color}b=["cursor"];c=b.length;a=0;for(;a<c;a++){d=b[a];this[d]=this.stringHandler}}));(Ext.cmd.derive("Ext.fx.Anim",Ext.Base,{isAnimation:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",damper:1,bezierRE:/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,reverse:false,running:false,paused:false,iterations:1,autoEnd:false,alternate:false,currentIteration:0,startTime:0,frameCount:0,constructor:function(a){var b=this,c;a=a||{};if(a.keyframes){return new Ext.fx.Animator(a)}Ext.apply(b,a);if(b.from===undefined){b.from={}}b.propHandlers={};b.config=a;b.target=Ext.fx.Manager.createTarget(b.target);b.easingFn=Ext.fx.Easing[b.easing];b.target.dynamic=b.dynamic;if(!b.easingFn){b.easingFn=String(b.easing).match(b.bezierRE);if(b.easingFn&&b.easingFn.length===5){c=b.easingFn;b.easingFn=Ext.fx.CubicBezier.cubicBezier(+c[1],+c[2],+c[3],+c[4])}}b.id=Ext.id(null,"ext-anim-");b.mixins.observable.constructor.call(b);Ext.fx.Manager.addAnim(b);if(a.autoEnd){b.running=true;b.jumpToEnd()}},setAttr:function(a,b){return Ext.fx.Manager.items.get(this.id).setAttr(this.target,a,b)},initAttrs:function(){var f=this,h=f.from,j=f.to,g=f.initialFrom||{},c={},a,b,m,d;for(d in j){if(j.hasOwnProperty(d)){a=f.target.getAttr(d,h[d]);b=j[d];if(!Ext.fx.PropertyHandler[d]){if(Ext.isObject(b)){m=f.propHandlers[d]=Ext.fx.PropertyHandler.object}else{m=f.propHandlers[d]=Ext.fx.PropertyHandler.defaultHandler}}else{m=f.propHandlers[d]=Ext.fx.PropertyHandler[d]}c[d]=m.get(a,b,f.damper,g[d],d)}}f.currentAttrs=c},start:function(d){var f=this,c=f.delay,b=f.delayStart,a;if(c){if(!b){f.delayStart=d;return}else{a=d-b;if(a<c){return}else{d=new Date(b.getTime()+c)}}}if(f.fireEvent("beforeanimate",f)!==false){f.startTime=d;if(!f.paused&&!f.currentAttrs){f.initAttrs()}f.running=true;f.frameCount=0}},jumpToEnd:function(){var a=this;if(!a.endWasCalled){if(!a.currentAttrs){a.initAttrs()}Ext.fx.Manager.jumpToEnd(a);a.end()}},runAnim:function(p){var j=this,o=j.currentAttrs,d=j.duration,c=j.easingFn,b=j.propHandlers,g={},h,m,f,a;if(p>=d){p=d;a=true}if(j.reverse){p=d-p}for(f in o){if(o.hasOwnProperty(f)){m=o[f];h=a?1:c(p/d);g[f]=b[f].set(m,h)}}j.frameCount++;return g},lastFrame:function(){var c=this,a=c.iterations,b=c.currentIteration;b++;if(b<a){if(c.alternate){c.reverse=!c.reverse}c.startTime=new Date();c.currentIteration=b;c.paused=false}else{c.currentIteration=0;c.end();c.fireEvent("lastframe",c,c.startTime)}},endWasCalled:0,end:function(){var a=this;if(a.endWasCalled++){return}a.startTime=0;a.paused=false;a.running=false;Ext.fx.Manager.removeAnim(a);a.fireEvent("afteranimate",a,a.startTime);Ext.callback(a.callback,a.scope,[a,a.startTime]);if(a.remove){a.target.destroy()}},isReady:function(){return this.paused===false&&this.running===false&&this.iterations>0},isRunning:function(){return this.paused===false&&this.running===true&&this.isAnimator!==true}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.fx,"Anim"],0));Ext.enableFx=true;(Ext.cmd.derive("Ext.util.Animate",Ext.Base,{mixinId:"animate",isAnimate:true,animate:function(a){var b=this;if(Ext.fx.Manager.hasFxBlock(b.id)){return b}Ext.fx.Manager.queueFx(new Ext.fx.Anim(b.anim(a)));return this},anim:function(a){if(!Ext.isObject(a)){return(a)?{}:false}var b=this;if(a.stopAnimation){b.stopAnimation()}Ext.applyIf(a,Ext.fx.Manager.getFxDefaults(b.id));return Ext.apply({target:b,paused:true},a)},getAnimationProps:function(){var b=this,a=b.layout;return a&&a.animate?a.animate:{}},stopFx:Ext.Function.alias(Ext.util.Animate,"stopAnimation"),stopAnimation:function(){Ext.fx.Manager.stopAnimation(this.id);return this},syncFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:true});return this},sequenceFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:false});return this},hasActiveFx:Ext.Function.alias(Ext.util.Animate,"getActiveAnimation"),getActiveAnimation:function(){return Ext.fx.Manager.getActiveAnimation(this.id)}},0,0,0,0,0,0,[Ext.util,"Animate"],0));(Ext.cmd.derive("Ext.dom.Fly",Ext.dom.Element,{alternateClassName:"Ext.dom.Element.Fly",validNodeTypes:{1:1,9:1,11:1},isFly:true,constructor:function(a){this.dom=a;this.el=this},attach:function(b){var a=this;if(!b){return a.detach()}a.dom=b;if(!Ext.cache[b.id]){a.getData().isSynchronized=false}return a},detach:function(){this.dom=null},addListener:null,removeListener:null},1,0,0,0,0,0,[Ext.dom,"Fly",Ext.dom.Element,"Fly"],function(a){var b={};a.cache=b;Ext.fly=function(j,d){var g=null,f=Ext.fly,c,h;d=d||(f.caller&&f.caller.$name)||"_global";j=Ext.getDom(j);if(j){c=j.nodeType;if(a.prototype.validNodeTypes[c]||(!c&&(j.window==j))){g=Ext.cache[j.id];if(!g||g.dom!==j){g=b[d]||(b[d]=new a());g.dom=j;h=g.getData(true);if(h){h.isSynchronized=false}}}}return g}}));(Ext.cmd.derive("Ext.dom.CompositeElementLite",Ext.Base,{alternateClassName:["Ext.CompositeElementLite"],isComposite:true,isLite:true,statics:{importElementMethods:function(){var a=Ext.dom.Element,b=this.prototype;Ext.Object.each(a.prototype,function(c,d){if(typeof d==="function"&&!b[c]){b[c]=function(){return this.invoke(c,arguments)}}})}},constructor:function(b,a){if(a){this.elements=b||[]}else{this.elements=[];this.add(b)}},getElement:function(b){var a=this._fly||(this._fly=new Ext.dom.Fly());return a.attach(b)},transformElement:function(a){return Ext.getDom(a)},getCount:function(){return this.elements.length},add:function(c,a){var f=this.elements,b,d;if(!c){return this}if(typeof c=="string"){c=Ext.fly(a||document).query(c)}else{if(c.isComposite){c=c.elements}else{if(!Ext.isIterable(c)){c=[c]}}}for(b=0,d=c.length;b<d;++b){f.push(this.transformElement(c[b]))}return this},invoke:function(f,b){var h=this,j=h.elements,g=j.length,a,d,c;if(c!==0){a=(h.isLite?Ext.dom.Fly:Ext.dom.Element).prototype;for(c=0;c<g;c++){d=j[c];if(d){a[f].apply(h.getElement(d),b)}}}return h},item:function(b){var c=this.elements[b],a=null;if(c){a=this.getElement(c)}return a},slice:function(b,a){return Ext.Array.slice(this.elements,b,a)},each:function(f,d){var g=this,c=g.elements,a=c.length,b,h;for(b=0;b<a;b++){h=c[b];if(h){h=this.getElement(h);if(f.call(d||h,h,g,b)===false){break}}}return g},fill:function(a){var b=this;b.elements=[];b.add(a);return b},insert:function(b,a){Ext.Array.insert(this.elements,b,a)},filter:function(b){var h=this,c=h.elements,g=c.length,d=[],f=0,j=typeof b=="function",m,a;for(;f<g;f++){a=c[f];m=false;if(a){a=h.getElement(a);if(j){m=b.call(a,a,h,f)!==false}else{m=a.is(b)}if(m){d.push(h.transformElement(a))}}}h.elements=d;return h},indexOf:function(a){return Ext.Array.indexOf(this.elements,this.transformElement(a))},replaceElement:function(f,c,a){var b=!isNaN(f)?f:this.indexOf(f),g;if(b>-1){c=Ext.getDom(c);if(a){g=this.elements[b];g.parentNode.insertBefore(c,g);Ext.removeNode(g)}Ext.Array.splice(this.elements,b,1,c)}return this},clear:function(d){var c=this,b=c.elements,a=b.length-1;if(d){for(;a>=0;a--){Ext.removeNode(b[a])}}this.elements=[]},addElements:function(d,b){if(!d){return this}if(typeof d==="string"){d=Ext.dom.Element.selectorFunction(d,b)}var c=this.elements,a=d.length,f;for(f=0;f<a;f++){c.push(Ext.get(d[f]))}return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(a){return this.indexOf(a)!=-1},removeElement:function(f,j){f=[].concat(f);var d=this,g=d.elements,c=f.length,h,b,a;for(a=0;a<c;a++){h=f[a];if((b=(g[h]||g[h=d.indexOf(h)]))){if(j){if(b.dom){b.destroy()}else{Ext.removeNode(b)}}Ext.Array.erase(g,h,1)}}return d},destroy:function(){return this.invoke("destroy",arguments);this.callParent()}},1,0,0,0,0,0,[Ext.dom,"CompositeElementLite",Ext,"CompositeElementLite"],function(b){var a=b.prototype;b.importElementMethods();a.on=a.addListener}));Ext.define("Ext.overrides.dom.Element",(function(){var m,p=window,J=document,R="hidden",u="isClipped",P="overflow",z="overflow-x",y="overflow-y",C="originalClip",H="height",f="width",g="visibility",a="display",L="none",T="offsets",c="clip",q="originalDisplay",M="visibilityMode",D="isVisible",o="x-hidden-offsets",t="x-hidden-clip",U=['<div class="{0}-tl" role="presentation">','<div class="{0}-tr" role="presentation">','<div class="{0}-tc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-ml" role="presentation">','<div class="{0}-mr" role="presentation">','<div class="{0}-mc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-bl" role="presentation">','<div class="{0}-br" role="presentation">','<div class="{0}-bc" role="presentation"></div>',"</div>","</div>"].join(""),O=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,I=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,b=/\ssrc=([\'\"])(.*?)\1/i,s=/\S/,j=/\stype=([\'\"])(.*?)\1/i,F=/^-ms-/,G=/(-[a-z])/gi,N=function(V,W){return W.charAt(1).toUpperCase()},r="x-masked",E="x-masked-relative",A="x-mask-msg",w=/^body/i,v={},B=function(W){var X=W.getData(),V=X[M];if(V===undefined){X[M]=V=m.VISIBILITY}return V},S=J.createRange?J.createRange():null,K={INPUT:true,TEXTAREA:true};if(Ext.isIE8){var h=J.createElement("div"),Q=[],d=Ext.Function.createBuffered(function(){var V=Q.length,W;for(W=0;W<V;W++){h.appendChild(Q[W])}h.innerHTML="";Q.length=0},10)}return{override:"Ext.dom.Element",mixins:[Ext.util.Animate],skipGarbageCollection:false,_init:function(V){m=V;V.tabbableSelector+=",["+V.tabbableSavedCounterAttribute+"]"},statics:{selectableCls:"x-selectable",unselectableCls:"x-unselectable",tabbableSelector:Ext.supports.CSS3NegationSelector?'a[href],button,iframe,input,select,textarea,[tabindex]:not([tabindex="-1"]),[contenteditable="true"]':'a[href],button,iframe,input,select,textarea,[tabindex],[contenteditable="true"]',naturallyFocusableTags:{BUTTON:true,IFRAME:true,EMBED:true,INPUT:true,OBJECT:true,SELECT:true,TEXTAREA:true,HTML:Ext.isIE?true:false},naturallyTabbableTags:{BUTTON:true,IFRAME:true,INPUT:true,SELECT:true,TEXTAREA:true,OBJECT:Ext.isIE8m?true:false},tabbableSavedCounterAttribute:"data-tabindex-counter",tabbableSavedValueAttribute:"data-tabindex-value",normalize:function(V){if(V==="float"){V=Ext.supports.Float?"cssFloat":"styleFloat"}return v[V]||(v[V]=V.replace(F,"ms-").replace(G,N))}},addClsOnClick:function(X,aa,W){var Y=this,Z=Y.dom,V=Ext.isFunction(aa);Y.on("mousedown",function(){if(V&&aa.call(W||Y,Y)===false){return false}Ext.fly(Z).addCls(X);var ac=Ext.getDoc(),ab=function(){Ext.fly(Z).removeCls(X);ac.removeListener("mouseup",ab)};ac.on("mouseup",ab)});return Y},addClsOnFocus:function(X,aa,W){var Y=this,Z=Y.dom,V=Ext.isFunction(aa);Y.on("focus",function(){if(V&&aa.call(W||Y,Y)===false){return false}Ext.fly(Z).addCls(X)});Y.on("blur",function(){Ext.fly(Z).removeCls(X)});return Y},addClsOnOver:function(X,aa,W){var Y=this,Z=Y.dom,V=Ext.isFunction(aa);Y.hover(function(){if(V&&aa.call(W||Y,Y)===false){return}Ext.fly(Z).addCls(X)},function(){Ext.fly(Z).removeCls(X)});return Y},addKeyListener:function(W,Y,X){var V;if(typeof W!=="object"||Ext.isArray(W)){V={target:this,key:W,fn:Y,scope:X}}else{V={target:this,key:W.key,shift:W.shift,ctrl:W.ctrl,alt:W.alt,fn:Y,scope:X}}return new Ext.util.KeyMap(V)},addKeyMap:function(V){return new Ext.util.KeyMap(Ext.apply({target:this},V))},afterAnimate:function(){var V=this.shadow;if(V&&!V.disabled&&!V.animate){V.show()}},anchorAnimX:function(V){var W=(V==="l")?"right":"left";this.dom.style[W]="0px"},anim:function(V){if(!Ext.isObject(V)){return(V)?{}:false}var W=this,X=V.duration||Ext.fx.Anim.prototype.duration,Z=V.easing||"ease",Y;if(V.stopAnimation){W.stopAnimation()}Ext.applyIf(V,Ext.fx.Manager.getFxDefaults(W.id));Ext.fx.Manager.setFxDefaults(W.id,{delay:0});Y={target:W.dom,remove:V.remove,alternate:V.alternate||false,duration:X,easing:Z,callback:V.callback,listeners:V.listeners,iterations:V.iterations||1,scope:V.scope,block:V.block,concurrent:V.concurrent,delay:V.delay||0,paused:true,keyframes:V.keyframes,from:V.from||{},to:Ext.apply({},V),userConfig:V};Ext.apply(Y.to,V.to);delete Y.to.to;delete Y.to.from;delete Y.to.remove;delete Y.to.alternate;delete Y.to.keyframes;delete Y.to.iterations;delete Y.to.listeners;delete Y.to.target;delete Y.to.paused;delete Y.to.callback;delete Y.to.scope;delete Y.to.duration;delete Y.to.easing;delete Y.to.concurrent;delete Y.to.block;delete Y.to.stopAnimation;delete Y.to.delay;return Y},animate:function(V){this.addAnimation(V);return this},addAnimation:function(X){var Z=this,W=Z.dom.id||Ext.id(Z.dom),Y,aa,V;if(!Ext.fx.Manager.hasFxBlock(W)){if(X.listeners){Y=X.listeners;delete X.listeners}if(X.internalListeners){X.listeners=X.internalListeners;delete X.internalListeners}V=X.autoEnd;delete X.autoEnd;aa=new Ext.fx.Anim(Z.anim(X));aa.on({afteranimate:"afterAnimate",beforeanimate:"beforeAnimate",scope:Z,single:true});if(Y){aa.on(Y)}Ext.fx.Manager.queueFx(aa);if(V){aa.jumpToEnd()}}return aa},beforeAnimate:function(){var V=this.shadow;if(V&&!V.disabled&&!V.animate){V.hide()}},boxWrap:function(V){V=V||"x-box";var W=Ext.get(this.insertHtml("beforeBegin","<div class='"+V+"' role='presentation'>"+Ext.String.format(U,V)+"</div>"));W.selectNode("."+V+"-mc").appendChild(this.dom);return W},clean:function(W){var Y=this,aa=Y.dom,Z=Y.getData(),ab=aa.firstChild,X=-1,V;if(Z.isCleaned&&W!==true){return Y}while(ab){V=ab.nextSibling;if(ab.nodeType===3){if(!(s.test(ab.nodeValue))){aa.removeChild(ab)}else{if(V&&V.nodeType===3){ab.appendData(Ext.String.trim(V.data));aa.removeChild(V);V=ab.nextSibling;ab.nodeIndex=++X}}}else{Ext.fly(ab,"_clean").clean();ab.nodeIndex=++X}ab=V}Z.isCleaned=true;return Y},empty:S?function(){var V=this.dom;if(V.firstChild){S.setStartBefore(V.firstChild);S.setEndAfter(V.lastChild);S.deleteContents()}}:function(){var V=this.dom;while(V.lastChild){V.removeChild(V.lastChild)}},clearListeners:function(){this.removeAnchor();arguments.callee.$previous.call(this)},clearPositioning:function(V){V=V||"";return this.setStyle({left:V,right:V,top:V,bottom:V,"z-index":"",position:"static"})},createProxy:function(V,Z,Y){V=(typeof V==="object")?V:{tag:"div",role:"presentation",cls:V};var X=this,W=Z?Ext.DomHelper.append(Z,V,true):Ext.DomHelper.insertBefore(X.dom,V,true);W.setVisibilityMode(m.DISPLAY);W.hide();if(Y&&X.setBox&&X.getBox){W.setBox(X.getBox())}return W},clearOpacity:function(){return this.setOpacity("")},clip:function(){var W=this,X=W.getData(),V;if(!X[u]){X[u]=true;V=W.getStyle([P,z,y]);X[C]={o:V[P],x:V[z],y:V[y]};W.setStyle(P,R);W.setStyle(z,R);W.setStyle(y,R)}return W},destroy:function(){var X=this,Z=X.dom,Y=X.getData(),W,V;if(Z&&X.isAnimate){X.stopAnimation()}arguments.callee.$previous.call(this);if(Z&&Ext.isIE8&&(Z.window!=Z)&&(Z.nodeType!==9)&&(Z.tagName!=="BODY")&&(Z.tagName!=="HTML")){Q[Q.length]=Z;d()}if(Y){W=Y.maskEl;V=Y.maskMsg;if(W){W.destroy()}if(V){V.destroy()}}},enableDisplayMode:function(W){var V=this;V.setVisibilityMode(m.DISPLAY);if(W!==undefined){V.getData()[q]=W}return V},fadeIn:function(X){var V=this,W=V.dom;V.animate(Ext.apply({},X,{opacity:1,internalListeners:{beforeanimate:function(Z){var Y=Ext.fly(W,"_anim");if(Y.isStyle("display","none")){Y.setDisplayed("")}else{Y.show()}}}}));return this},fadeOut:function(X){var V=this,W=V.dom;X=Ext.apply({opacity:0,internalListeners:{afteranimate:function(Z){if(W&&Z.to.opacity===0){var Y=Ext.fly(W,"_anim");if(X.useDisplay){Y.setDisplayed(false)}else{Y.hide()}}}}},X);V.animate(X);return V},fixDisplay:function(){var V=this;if(V.isStyle(a,L)){V.setStyle(g,R);V.setStyle(a,V._getDisplay());if(V.isStyle(a,L)){V.setStyle(a,"block")}}},frame:function(V,Y,Z){var X=this,aa=X.dom,W;V=V||"#C3DAF9";Y=Y||1;Z=Z||{};W=function(){var ae=Ext.fly(aa,"_anim"),ad=this,af,ac,ab;ae.show();af=ae.getBox();ac=Ext.getBody().createChild({role:"presentation",id:ae.dom.id+"-anim-proxy",style:{position:"absolute","pointer-events":"none","z-index":35000,border:"0px solid "+V}});ab=new Ext.fx.Anim({target:ac,duration:Z.duration||1000,iterations:Y,from:{top:af.y,left:af.x,borderWidth:0,opacity:1,height:af.height,width:af.width},to:{top:af.y-20,left:af.x-20,borderWidth:10,opacity:0,height:af.height+40,width:af.width+40}});ab.on("afteranimate",function(){ac.destroy();ad.end()})};X.animate({duration:(Math.max(Z.duration,500)*2)||2000,listeners:{beforeanimate:{fn:W}},callback:Z.callback,scope:Z.scope});return X},getColor:function(W,X,ac){var Z=this.getStyle(W),Y=ac||ac===""?ac:"#",ab,V,aa=0;if(!Z||(/transparent|inherit/.test(Z))){return X}if(/^r/.test(Z)){Z=Z.slice(4,Z.length-1).split(",");V=Z.length;for(;aa<V;aa++){ab=parseInt(Z[aa],10);Y+=(ab<16?"0":"")+ab.toString(16)}}else{Z=Z.replace("#","");Y+=Z.length===3?Z.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):Z}return(Y.length>5?Y.toLowerCase():X)},getLoader:function(){var W=this,X=W.getData(),V=X.loader;if(!V){X.loader=V=new Ext.ElementLoader({target:W})}return V},getPositioning:function(W){var V=this.getStyle(["left","top","position","z-index"]),X=this.dom;if(W){if(V.left==="auto"){V.left=X.offsetLeft+"px"}if(V.top==="auto"){V.top=X.offsetTop+"px"}}return V},ghost:function(V,Y){var X=this,Z=X.dom,W;V=V||"b";W=function(){var ad=Ext.fly(Z,"_anim"),ac=ad.getWidth(),ab=ad.getHeight(),ae=ad.getXY(),aa=ad.getPositioning(),af={opacity:0};switch(V){case"t":af.y=ae[1]-ab;break;case"l":af.x=ae[0]-ac;break;case"r":af.x=ae[0]+ac;break;case"b":af.y=ae[1]+ab;break;case"tl":af.x=ae[0]-ac;af.y=ae[1]-ab;break;case"bl":af.x=ae[0]-ac;af.y=ae[1]+ab;break;case"br":af.x=ae[0]+ac;af.y=ae[1]+ab;break;case"tr":af.x=ae[0]+ac;af.y=ae[1]-ab;break}this.to=af;this.on("afteranimate",function(){var ag=Ext.fly(Z,"_anim");if(ag){ag.hide();ag.clearOpacity();ag.setPositioning(aa)}})};X.animate(Ext.applyIf(Y||{},{duration:500,easing:"ease-out",listeners:{beforeanimate:W}}));return X},hide:function(V){if(typeof V==="string"){this.setVisible(false,V);return this}this.setVisible(false,this.anim(V));return this},highlight:function(Y,W){var ac=this,Z=ac.dom,ae={},ab,af,aa,X,V,ad;W=W||{};X=W.listeners||{};aa=W.attr||"backgroundColor";ae[aa]=Y||"ffff9c";if(!W.to){af={};af[aa]=W.endColor||ac.getColor(aa,"ffffff","")}else{af=W.to}W.listeners=Ext.apply(Ext.apply({},X),{beforeanimate:function(){ab=Z.style[aa];var ag=Ext.fly(Z,"_anim");ag.clearOpacity();ag.show();V=X.beforeanimate;if(V){ad=V.fn||V;return ad.apply(V.scope||X.scope||p,arguments)}},afteranimate:function(){if(Z){Z.style[aa]=ab}V=X.afteranimate;if(V){ad=V.fn||V;ad.apply(V.scope||X.scope||p,arguments)}}});ac.animate(Ext.apply({},W,{duration:1000,easing:"ease-in",from:ae,to:af}));return ac},hover:function(W,V,Y,X){var Z=this;Z.on("mouseenter",W,Y||Z.dom,X);Z.on("mouseleave",V,Y||Z.dom,X);return Z},initDD:function(X,W,Y){var V=new Ext.dd.DD(Ext.id(this.dom),X,W);return Ext.apply(V,Y)},initDDProxy:function(X,W,Y){var V=new Ext.dd.DDProxy(Ext.id(this.dom),X,W);return Ext.apply(V,Y)},initDDTarget:function(X,W,Y){var V=new Ext.dd.DDTarget(Ext.id(this.dom),X,W);return Ext.apply(V,Y)},isFocusable:function(){var W=this.dom,V=false,X;if(W&&!W.disabled){X=W.nodeName;V=!!Ext.Element.naturallyFocusableTags[X]||((X==="A"||X==="LINK")&&!!W.href)||W.getAttribute("tabIndex")!=null||W.contentEditable==="true";if(Ext.isIE8&&X==="INPUT"&&W.type==="hidden"){V=false}V=V&&this.isVisible(true)}return V},isInputField:function(){var W=this.dom,V=W.contentEditable;if((K[W.tagName]&&W.type!=="button")||(V===""||V==="true")){return true}return false},isTabbable:function(X){var Y=this.dom,aa=false,Z,W,V;if(Y&&!Y.disabled){Z=Y.nodeName;V=Y.getAttribute("tabIndex");W=V!=null;V-=0;if(Z==="A"||Z==="LINK"){if(Y.href){aa=W&&V<0?false:true}else{if(Y.contentEditable==="true"){aa=!W||(W&&V>=0)?true:false}else{aa=W&&V>=0?true:false}}}else{if(Y.contentEditable==="true"||Ext.Element.naturallyTabbableTags[Z]){aa=W&&V<0?false:true}else{if(W&&V>=0){aa=true}}}if(Ext.isIE8&&Z==="INPUT"&&Y.type==="hidden"){aa=false}aa=aa&&(X||((!this.component||this.component.isVisible(true))&&this.isVisible(true)))}return aa},isMasked:function(V){var Z=this,ab=Z.getData(),Y=ab.maskEl,W=ab.maskMsg,aa=false,X;if(Y&&Y.isVisible()){if(W){W.center(Z)}aa=true}else{if(V){X=Z.findParentNode();if(X){return Ext.fly(X).isMasked(V)}}}return aa},load:function(V){this.getLoader().load(V);return this},mask:function(ac,aa,V){var Y=this,ab=Y.dom,Z=Y.getData(),X=Z.maskEl,W;if(!(w.test(ab.tagName)&&Y.getStyle("position")==="static")){Y.addCls(E)}if(X){X.destroy()}X=Ext.DomHelper.append(ab,{role:"presentation",cls:"x-mask x-border-box",children:{role:"presentation",cls:aa?A+" "+aa:A,cn:{tag:"div",role:"presentation",cls:"x-mask-msg-inner",cn:{tag:"div",role:"presentation",cls:"x-mask-msg-text",html:ac||""}}}},true);W=Ext.get(X.dom.firstChild);Z.maskEl=X;Y.addCls(r);X.setDisplayed(true);if(typeof ac==="string"){W.setDisplayed(true);W.center(Y)}else{W.setDisplayed(false)}if(ab===J.body){X.addCls("x-mask-fixed")}Y.saveTabbableState({skipSelf:ab===J.body});if(Ext.isIE9m&&ab!==J.body&&Y.isStyle("height","auto")){X.setSize(undefined,V||Y.getHeight())}return X},monitorMouseLeave:function(V,Y,X){var Z=this,aa,W={mouseleave:function(ab){if(Ext.isIE9m){ab.enableIEAsync()}aa=Ext.defer(Y,V,X||Z,[ab])},mouseenter:function(){clearTimeout(aa)}};Z.on(W);return W},puff:function(Z){var Y=this,aa=Y.dom,W,X=Y.getBox(),V=Y.getStyle(["width","height","left","right","top","bottom","position","z-index","font-size","opacity"],true);Z=Ext.applyIf(Z||{},{easing:"ease-out",duration:500,useDisplay:false});W=function(){var ab=Ext.fly(aa,"_anim");ab.clearOpacity();ab.show();this.to={width:X.width*2,height:X.height*2,x:X.x-(X.width/2),y:X.y-(X.height/2),opacity:0,fontSize:"200%"};this.on("afteranimate",function(){var ac=Ext.fly(aa,"_anim");if(ac){if(Z.useDisplay){ac.setDisplayed(false)}else{ac.hide()}ac.setStyle(V);Ext.callback(Z.callback,Z.scope)}})};Y.animate({duration:Z.duration,easing:Z.easing,listeners:{beforeanimate:{fn:W}}});return Y},selectable:function(){var V=this;V.dom.unselectable="";V.removeCls(m.unselectableCls);V.addCls(m.selectableCls);return V},setCapture:function(){var V=this.dom;if(Ext.isIE9m&&V.setCapture){V.setCapture()}},setHeight:function(V,W){var X=this;if(!W||!X.anim){arguments.callee.$previous.apply(this,arguments)}else{if(!Ext.isObject(W)){W={}}X.animate(Ext.applyIf({to:{height:V}},W))}return X},setHorizontal:function(){var W=this,V=W.verticalCls;delete W.vertical;if(V){delete W.verticalCls;W.removeCls(V)}delete W.setWidth;delete W.setHeight;if(!Ext.isIE8){delete W.getWidth;delete W.getHeight}delete W.styleHooks},updateText:function(Y){var V=this,X,W;if(X){W=X.firstChild;if(!W||(W.nodeType!==3||W.nextSibling)){W=J.createTextNode();V.empty();X.appendChild(W)}if(Y){W.data=Y}}},setHtml:function(X,W,ac,Y){var Z=this,ab,aa,V;if(!Z.dom){return Z}X=X||"";aa=Z.dom;if(W!==true){aa.innerHTML=X;Ext.callback(ac,Z);return Z}ab=Ext.id();X+='<span id="'+ab+'" role="presentation"></span>';V=Ext.interval(function(){var aj,ag,af,ae,ad,ai,ah;if(!(ai=J.getElementById(ab))){return false}clearInterval(V);Ext.removeNode(ai);aj=Ext.getHead().dom;while((ag=O.exec(X))){af=ag[1];ae=af?af.match(b):false;if(ae&&ae[2]){ah=J.createElement("script");ah.src=ae[2];ad=af.match(j);if(ad&&ad[2]){ah.type=ad[2]}aj.appendChild(ah)}else{if(ag[2]&&ag[2].length>0){if(Y){Ext.functionFactory(ag[2]).call(Y)}else{Ext.globalEval(ag[2])}}}}Ext.callback(ac,Y||Z)},20);aa.innerHTML=X.replace(I,"");return Z},setOpacity:function(W,V){var X=this;if(!X.dom){return X}if(!V||!X.anim){X.setStyle("opacity",W)}else{if(typeof V!="object"){V={duration:350,easing:"ease-in"}}X.animate(Ext.applyIf({to:{opacity:W}},V))}return X},setPositioning:function(V){return this.setStyle(V)},setVertical:function(Y,V){var X=this,W=m.prototype;X.vertical=true;if(V){X.addCls(X.verticalCls=V)}X.setWidth=W.setHeight;X.setHeight=W.setWidth;if(!Ext.isIE8){X.getWidth=W.getHeight;X.getHeight=W.getWidth}X.styleHooks=(Y===270)?W.verticalStyleHooks270:W.verticalStyleHooks90},setSize:function(X,V,W){var Y=this;if(Ext.isObject(X)){W=V;V=X.height;X=X.width}if(!W||!Y.anim){Y.dom.style.width=m.addUnits(X);Y.dom.style.height=m.addUnits(V);if(Y.shadow||Y.shim){Y.syncUnderlays()}}else{if(W===true){W={}}Y.animate(Ext.applyIf({to:{width:X,height:V}},W))}return Y},setVisible:function(Z,V){var X=this,Y=X.dom,W=B(X);if(typeof V==="string"){switch(V){case a:W=m.DISPLAY;break;case g:W=m.VISIBILITY;break;case T:W=m.OFFSETS;break;case c:W=m.CLIP;break}X.setVisibilityMode(W);V=false}if(!V||!X.anim){if(W===m.DISPLAY){return X.setDisplayed(Z)}else{if(W===m.OFFSETS){X[Z?"removeCls":"addCls"](o)}else{if(W===m.CLIP){X[Z?"removeCls":"addCls"](t)}else{if(W===m.VISIBILITY){X.fixDisplay();Y.style.visibility=Z?"":R}}}}}else{if(Z){X.setOpacity(0.01);X.setVisible(true)}if(!Ext.isObject(V)){V={duration:350,easing:"ease-in"}}X.animate(Ext.applyIf({callback:function(){if(!Z){Ext.fly(Y).setVisible(false).setOpacity(1)}},to:{opacity:(Z)?1:0}},V))}X.getData()[D]=Z;if(X.shadow||X.shim){X.setUnderlaysVisible(Z)}return X},setWidth:function(W,V){var X=this;if(!V||!X.anim){arguments.callee.$previous.apply(this,arguments)}else{if(!Ext.isObject(V)){V={}}X.animate(Ext.applyIf({to:{width:W}},V))}return X},setX:function(V,W){return this.setXY([V,this.getY()],W)},setXY:function(X,V){var W=this;if(!V||!W.anim){arguments.callee.$previous.call(this,X)}else{if(!Ext.isObject(V)){V={}}W.animate(Ext.applyIf({to:{x:X[0],y:X[1]}},V))}return this},setY:function(W,V){return this.setXY([this.getX(),W],V)},show:function(V){if(typeof V==="string"){this.setVisible(true,V);return this}this.setVisible(true,this.anim(V));return this},slideIn:function(Y,X,Z){var ab=this,W=ab.dom,ae=W.style,ad,V,aa,ac;Y=Y||"t";X=X||{};ad=function(){var aj=this,ai=X.listeners,ah=Ext.fly(W,"_anim"),ak,af,al,ag;if(!Z){ah.fixDisplay()}ak=ah.getBox();if((Y=="t"||Y=="b")&&ak.height===0){ak.height=W.scrollHeight}else{if((Y=="l"||Y=="r")&&ak.width===0){ak.width=W.scrollWidth}}af=ah.getStyle(["width","height","left","right","top","bottom","position","z-index"],true);ah.setSize(ak.width,ak.height);if(X.preserveScroll){aa=ah.cacheScrollValues()}ag=ah.wrap({role:"presentation",id:Ext.id()+"-anim-wrap-for-"+ah.dom.id,style:{visibility:Z?"visible":"hidden"}});ac=ag.dom.parentNode;ag.setPositioning(ah.getPositioning());if(ag.isStyle("position","static")){ag.position("relative")}ah.clearPositioning("auto");ag.clip();if(aa){aa()}ah.setStyle({visibility:"",position:"absolute"});if(Z){ag.setSize(ak.width,ak.height)}switch(Y){case"t":al={from:{width:ak.width+"px",height:"0px"},to:{width:ak.width+"px",height:ak.height+"px"}};ae.bottom="0px";break;case"l":al={from:{width:"0px",height:ak.height+"px"},to:{width:ak.width+"px",height:ak.height+"px"}};ab.anchorAnimX(Y);break;case"r":al={from:{x:ak.x+ak.width,width:"0px",height:ak.height+"px"},to:{x:ak.x,width:ak.width+"px",height:ak.height+"px"}};ab.anchorAnimX(Y);break;case"b":al={from:{y:ak.y+ak.height,width:ak.width+"px",height:"0px"},to:{y:ak.y,width:ak.width+"px",height:ak.height+"px"}};break;case"tl":al={from:{x:ak.x,y:ak.y,width:"0px",height:"0px"},to:{width:ak.width+"px",height:ak.height+"px"}};ae.bottom="0px";ab.anchorAnimX("l");break;case"bl":al={from:{y:ak.y+ak.height,width:"0px",height:"0px"},to:{y:ak.y,width:ak.width+"px",height:ak.height+"px"}};ab.anchorAnimX("l");break;case"br":al={from:{x:ak.x+ak.width,y:ak.y+ak.height,width:"0px",height:"0px"},to:{x:ak.x,y:ak.y,width:ak.width+"px",height:ak.height+"px"}};ab.anchorAnimX("r");break;case"tr":al={from:{x:ak.x+ak.width,width:"0px",height:"0px"},to:{x:ak.x,width:ak.width+"px",height:ak.height+"px"}};ae.bottom="0px";ab.anchorAnimX("r");break}ag.show();V=Ext.apply({},X);delete V.listeners;V=new Ext.fx.Anim(Ext.applyIf(V,{target:ag,duration:500,easing:"ease-out",from:Z?al.to:al.from,to:Z?al.from:al.to}));V.on("afteranimate",function(){var am=Ext.fly(W,"_anim");am.setStyle(af);if(Z){if(X.useDisplay){am.setDisplayed(false)}else{am.hide()}}if(ag.dom){if(ag.dom.parentNode){ag.dom.parentNode.insertBefore(am.dom,ag.dom)}else{ac.appendChild(am.dom)}ag.destroy()}if(aa){aa()}aj.end()});if(ai){V.on(ai)}};ab.animate({duration:X.duration?Math.max(X.duration,500)*2:1000,listeners:{beforeanimate:ad}});return ab},slideOut:function(V,W){return this.slideIn(V,W,true)},swallowEvent:function(W,X){var Z=this,aa,V,Y=function(ab){ab.stopPropagation();if(X){ab.preventDefault()}};if(Ext.isArray(W)){V=W.length;for(aa=0;aa<V;aa++){Z.on(W[aa],Y)}return Z}Z.on(W,Y);return Z},switchOff:function(X){var W=this,Y=W.dom,V;X=Ext.applyIf(X||{},{easing:"ease-in",duration:500,remove:false,useDisplay:false});V=function(){var ad=Ext.fly(Y,"_anim"),ac=this,ab=ad.getSize(),ae=ad.getXY(),aa,Z;ad.clearOpacity();ad.clip();Z=ad.getPositioning();aa=new Ext.fx.Animator({target:Y,duration:X.duration,easing:X.easing,keyframes:{33:{opacity:0.3},66:{height:1,y:ae[1]+ab.height/2},100:{width:1,x:ae[0]+ab.width/2}}});aa.on("afteranimate",function(){var af=Ext.fly(Y,"_anim");if(X.useDisplay){af.setDisplayed(false)}else{af.hide()}af.clearOpacity();af.setPositioning(Z);af.setSize(ab);ac.end()})};W.animate({duration:(Math.max(X.duration,500)*2),listeners:{beforeanimate:{fn:V}},callback:X.callback,scope:X.scope});return W},syncContent:function(W){W=Ext.getDom(W);var X=W.childNodes,ai=X.length,ag=this.dom,ah=ag.childNodes,ae=ah.length,ac,af,Z,ab,Y,V,ad,aa=ag._extData;if(Ext.isIE9m&&ag.mergeAttributes){ag.mergeAttributes(W,true);ag.src=W.src}else{Y=W.attributes;V=Y.length;for(ac=0;ac<V;ac++){ad=Y[ac].name;if(ad!=="id"){ag.setAttribute(ad,Y[ac].value)}}}if(aa){aa.isSynchronized=false}if(ai!==ae){ag.innerHTML=W.innerHTML;return}for(ac=0;ac<ai;ac++){Z=X[ac];af=ah[ac];ab=Z.nodeType;if(ab!==af.nodeType||(ab===1&&Z.tagName!==af.tagName)){ag.innerHTML=W.innerHTML;return}if(ab===3){af.data=Z.data}else{if(Z.id&&af.id!==Z.id){af.id=Z.id}af.style.cssText=Z.style.cssText;af.className=Z.className;Ext.fly(af,"_syncContent").syncContent(Z)}}},toggle:function(V){var W=this;W.setVisible(!W.isVisible(),W.anim(V));return W},unmask:function(){var X=this,Y=X.getData(),W=Y.maskEl,V;if(W){V=W.dom.style;if(V.clearExpression){V.clearExpression("width");V.clearExpression("height")}if(W){W.destroy();delete Y.maskEl}X.removeCls([r,E])}X.restoreTabbableState(X.dom===J.body)},unclip:function(){var W=this,X=W.getData(),V;if(X[u]){X[u]=false;V=X[C];if(V.o){W.setStyle(P,V.o)}if(V.x){W.setStyle(z,V.x)}if(V.y){W.setStyle(y,V.y)}}return W},translate:function(V,X,W){if(Ext.supports.CssTransforms&&!Ext.isIE9m){arguments.callee.$previous.apply(this,arguments)}else{if(V!=null){this.dom.style.left=V+"px"}if(X!=null){this.dom.style.top=X+"px"}}},unselectable:function(){var V=this;if(Ext.isOpera){V.dom.unselectable="on"}V.removeCls(m.selectableCls);V.addCls(m.unselectableCls);return V},privates:{findTabbableElements:function(ak){var V,af,ah,Z,aa,ad=this.dom,ac=Ext.Element.tabbableSavedCounterAttribute,aj=[],ai=0,W,Y,ab,ae,ag,X;if(!ad){return aj}if(ak){V=ak.skipSelf;af=ak.skipChildren;ah=ak.excludeRoot;Z=ak.includeSaved;aa=ak.includeHidden}ah=ah&&Ext.getDom(ah);if(ah&&ah.contains(ad)){return aj}if(!V&&((Z&&ad.hasAttribute(ac))||this.isTabbable(aa))){aj[ai++]=ad}if(af){return aj}W=ad.querySelectorAll(Ext.Element.tabbableSelector);ag=W.length;if(!ag){return aj}ab=new Ext.dom.Fly();for(ae=0;ae<ag;ae++){Y=W[ae];X=+Y.getAttribute("tabIndex");if(((Z&&Y.hasAttribute(ac))||(!(X<0)&&ab.attach(Y).isTabbable(aa)))&&!(ah&&(ah===Y||ah.contains(Y)))){aj[ai++]=Y}}return aj},saveTabbableState:function(Z){var ac=Ext.Element.tabbableSavedCounterAttribute,Y=Ext.Element.tabbableSavedValueAttribute,W,X,ab,aa,V;if(!Z||Z.includeSaved==null){Z=Ext.Object.chain(Z||null);Z.includeSaved=true}X=this.findTabbableElements(Z);for(aa=0,V=X.length;aa<V;aa++){ab=X[aa];W=+ab.getAttribute(ac);if(W>0){ab.setAttribute(ac,++W)}else{if(ab.hasAttribute("tabIndex")){ab.setAttribute(Y,ab.getAttribute("tabIndex"))}else{ab.setAttribute(Y,"none")}ab.setAttribute("tabIndex","-1");ab.setAttribute(ac,"1")}}return X},restoreTabbableState:function(V,ab){var Z=this.dom,ad=Ext.Element.tabbableSavedCounterAttribute,ae=Ext.Element.tabbableSavedValueAttribute,X=[],af,W,X,Y,aa,ac;if(!Z){return this}if(!ab){X=Ext.Array.from(Z.querySelectorAll("["+ad+"]"))}if(!V){X.unshift(Z)}for(aa=0,ac=X.length;aa<ac;aa++){Y=X[aa];if(!Y.hasAttribute(ad)||!Y.hasAttribute(ae)){continue}W=+Y.getAttribute(ad);if(W>1){Y.setAttribute(ad,--W);continue}af=Y.getAttribute(ae);if(af==="none"){Y.removeAttribute("tabIndex")}else{Y.setAttribute("tabIndex",af)}Y.removeAttribute(ae);Y.removeAttribute(ad)}return X}},deprecated:{"4.0":{methods:{pause:function(V){var W=this;Ext.fx.Manager.setFxDefaults(W.id,{delay:V});return W},scale:function(V,W,X){this.animate(Ext.apply({},X,{width:V,height:W}));return this},shift:function(V){this.animate(V);return this}}},"4.2":{methods:{moveTo:function(V,X,W){return this.setXY([V,X],W)},setBounds:function(W,Z,Y,V,X){return this.setBox({x:W,y:Z,width:Y,height:V},X)},setLeftTop:function(Y,X){var W=this,V=W.dom.style;V.left=m.addUnits(Y);V.top=m.addUnits(X);if(W.shadow||W.shim){W.syncUnderlays()}return W},setLocation:function(V,X,W){return this.setXY([V,X],W)}}},"5.0":{methods:{getAttributeNS:function(W,V){return this.getAttribute(V,W)},getCenterXY:function(){return this.getAlignToXY(J,"c-c")},getComputedHeight:function(){return Math.max(this.dom.offsetHeight,this.dom.clientHeight)||parseFloat(this.getStyle(H))||0},getComputedWidth:function(){return Math.max(this.dom.offsetWidth,this.dom.clientWidth)||parseFloat(this.getStyle(f))||0},getStyleSize:function(){var Z=this,aa=this.dom,W=(aa===J||aa===J.body),Y,V,X;if(W){return{width:m.getViewportWidth(),height:m.getViewportHeight()}}Y=Z.getStyle(["height","width"],true);if(Y.width&&Y.width!=="auto"){V=parseFloat(Y.width)}if(Y.height&&Y.height!=="auto"){X=parseFloat(Y.height)}return{width:V||Z.getWidth(true),height:X||Z.getHeight(true)}},isBorderBox:function(){return true},isDisplayed:function(){return !this.isStyle("display","none")},focusable:"isFocusable"}}}}})(),function(){var t=Ext.dom.Element,s=t.prototype,A=!Ext.isIE8,b=document,p=b.defaultView,z=/alpha\(opacity=(.*)\)/i,h=/^\s+|\s+$/g,B=s.styleHooks,w=Ext.supports,f,r,d,v,g,C,c;s._init(t);delete s._init;Ext.plainTableCls="x-table-plain";Ext.plainListCls="x-list-plain";if(Ext.CompositeElementLite){Ext.CompositeElementLite.importElementMethods()}if(!w.Opacity&&Ext.isIE){Ext.apply(B.opacity,{get:function(G){var F=G.style.filter,E,D;if(F.match){E=F.match(z);if(E){D=parseFloat(E[1]);if(!isNaN(D)){return D?D/100:0}}}return 1},set:function(G,E){var D=G.style,F=D.filter.replace(z,"").replace(h,"");D.zoom=1;if(typeof(E)==="number"&&E>=0&&E<1){E*=100;D.filter=F+(F.length?" ":"")+"alpha(opacity="+E+")"}else{D.filter=F}}})}if(!w.matchesSelector){var m=/^([a-z]+|\*)?(?:\.([a-z][a-z\-_0-9]*))?$/i,o=/\-/g,a,y=function(D,E){var F=new RegExp("(?:^|\\s+)"+E.replace(o,"\\-")+"(?:\\s+|$)");if(D&&D!=="*"){D=D.toUpperCase();return function(G){return G.tagName===D&&F.test(G.className)}}return function(G){return F.test(G.className)}},u=function(D){D=D.toUpperCase();return function(E){return E.tagName===D}},q={};s.matcherCache=q;s.is=function(D){if(!D){return true}var E=this.dom,K,G,J,I,H,F,L;if(E.nodeType!==1){return false}if(!(J=Ext.isFunction(D)?D:q[D])){if(!(G=D.match(m))){I=E.parentNode;if(!I){H=true;I=a||(a=b.createDocumentFragment());a.appendChild(E)}F=Ext.Array.indexOf(Ext.fly(I,"_is").query(D),E)!==-1;if(H){a.removeChild(E)}return F}L=G[1];K=G[2];q[D]=J=K?y(L,K):u(L)}return J(E)}}if(!p||!p.getComputedStyle){s.getStyle=function(R,M){var N=this,I=N.dom,T=typeof R!=="string",F=R,O=F,L=1,G=M,E=N.styleHooks,S,K,Q,P,H,D,J;if(T){Q={};F=O[0];J=0;if(!(L=O.length)){return Q}}if(!I||I.documentElement){return Q||""}K=I.style;if(M){D=K}else{D=I.currentStyle;if(!D){G=true;D=K}}do{P=E[F];if(!P){E[F]=P={name:t.normalize(F)}}if(P.get){H=P.get(I,N,G,D)}else{S=P.name;H=D[S]}if(!T){return H}Q[F]=H;F=O[++J]}while(J<L);return Q}}if(Ext.isIE8){c=function(G,E,F,D){if(D[this.styleName]==="none"){return"0px"}return D[this.name]};d=["Top","Right","Bottom","Left"];v=d.length;while(v--){g=d[v];C="border"+g+"Width";B["border-"+g.toLowerCase()+"-width"]=B[C]={name:C,styleName:"border"+g+"Style",get:c}}var j="x-sync-repaint";s.syncRepaint=function(){this.addCls(j);this.getWidth();this.removeCls(j)}}if(Ext.isIE10m){Ext.override(t,{focus:function(H,G){var F=this,E;G=G||F.dom;if(Number(H)){Ext.defer(F.focus,H,F,[null,G])}else{Ext.GlobalEvents.fireEvent("beforefocus",G);if(G&&(G.tagName==="INPUT"||G.tagname==="TEXTAREA")){Ext.synchronouslyFocusing=document.activeElement}try{G.focus()}catch(D){E=D}if(Ext.synchronouslyFocusing&&document.activeElement!==G&&!E){G.focus()}Ext.synchronouslyFocusing=null}return F}})}Ext.apply(Ext,{enableGarbageCollector:true,isBorderBox:true,useShims:false,getDetachedBody:function(){var D=Ext.detachedBodyEl;if(!D){D=b.createElement("div");Ext.detachedBodyEl=D=new Ext.dom.Fly(D);D.isDetachedBody=true}return D},getElementById:function(F){var E=b.getElementById(F),D;if(!E&&(D=Ext.detachedBodyEl)){E=D.dom.querySelector(Ext.makeIdSelector(F))}return E},addBehaviors:function(H){if(!Ext.isReady){Ext.onInternalReady(function(){Ext.addBehaviors(H)})}else{var E={},G,D,F;for(D in H){if((G=D.split("@"))[1]){F=G[0];if(!E[F]){E[F]=Ext.fly(document).select(F,true)}E[F].on(G[1],H[D])}}E=null}}});if(Ext.isIE9m){Ext.getElementById=function(F){var E=b.getElementById(F),D;if(!E&&(D=Ext.detachedBodyEl)){E=D.dom.all[F]}return E};s.getById=function(I,D){var H=this.dom,E=null,G,F;if(H){F=(A&&b.getElementById(I))||H.all[I];if(F){if(D){E=F}else{G=Ext.cache[I];if(G){if(G.skipGarbageCollection||!Ext.isGarbage(G.dom)){E=G}else{G.destroy()}}E=E||new Ext.Element(F)}}}return E}}else{if(!b.querySelector){Ext.getDetachedBody=Ext.getBody;Ext.getElementById=function(D){return b.getElementById(D)};s.getById=function(F,D){var E=b.getElementById(F);return D?E:(E?Ext.get(E):null)}}}if(Ext.isIE&&!(Ext.isIE9p&&b.documentMode>=9)){s.getAttribute=function(D,F){var G=this.dom,E;if(F){E=typeof G[F+":"+D];if(E!=="undefined"&&E!=="unknown"){return G[F+":"+D]||null}return null}if(D==="for"){D="htmlFor"}return G[D]||null}}Ext.onInternalReady(function(){var G=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,E=[],L=s.setWidth,M=s.setHeight,Q=s.setSize,R=/^\d+(?:\.\d*)?px$/i,K,I,D,P;if(w.FixedTableWidthBug){B.width={name:"width",set:function(X,W,U){var T=X.style,S=U._needsTableWidthFix,V=T.display;if(S){T.display="none"}T.width=W;if(S){X.scrollWidth;T.display=V}}};s.setWidth=function(V,T){var X=this,Y=X.dom,U=Y.style,S=X._needsTableWidthFix,W=U.display;if(S&&!T){U.display="none"}L.call(X,V,T);if(S&&!T){Y.scrollWidth;U.display=W}return X};s.setSize=function(W,T,U){var Y=this,Z=Y.dom,V=Z.style,S=Y._needsTableWidthFix,X=V.display;if(S&&!U){V.display="none"}Q.call(Y,W,T,U);if(S&&!U){Z.scrollWidth;V.display=X}return Y}}if(Ext.isIE8){B.height={name:"height",set:function(X,W,U){var T=U.component,V,S;if(T&&T._syncFrameHeight&&U===T.el){S=T.frameBody.dom.style;if(R.test(W)){V=T.getFrameInfo();if(V){S.height=(parseInt(W,10)-V.height)+"px"}}else{if(!W||W==="auto"){S.height=""}}}X.style.height=W}};s.setHeight=function(S,U){var V=this.component,W,T;if(V&&V._syncFrameHeight&&this===V.el){T=V.frameBody.dom.style;if(!S||S==="auto"){T.height=""}else{W=V.getFrameInfo();if(W){T.height=(S-W.height)+"px"}}}return M.call(this,S,U)};s.setSize=function(W,S,U){var V=this.component,X,T;if(V&&V._syncFrameHeight&&this===V.el){T=V.frameBody.dom.style;if(!S||S==="auto"){T.height=""}else{X=V.getFrameInfo();if(X){T.height=(S-X.height)+"px"}}}return Q.call(this,W,S,U)}}Ext.getDoc().on("selectstart",function(W,X){var V=t.selectableCls,U=t.unselectableCls,S=X&&X.tagName;S=S&&S.toLowerCase();if(S==="input"||S==="textarea"){return}while(X&&X.nodeType===1&&X!==b.documentElement){var T=Ext.fly(X);if(T.hasCls(V)){return}if(T.hasCls(U)){W.stopEvent();return}X=X.parentNode}});function J(W,T,V,S){var U=S[this.name]||"";return G.test(U)?"transparent":U}function O(T,U,S){return function(){T.selectionStart=U;T.selectionEnd=S}}function N(W){var U=w.DisplayChangeInputSelectionBug,V=w.DisplayChangeTextAreaSelectionBug,X,S,Y,T;if(U||V){X=t.getActiveElement();S=X&&X.tagName;if((V&&S==="TEXTAREA")||(U&&S==="INPUT"&&X.type==="text")){if(Ext.fly(W).isAncestor(X)){Y=X.selectionStart;T=X.selectionEnd;if(Ext.isNumber(Y)&&Ext.isNumber(T)){return O(X,Y,T)}}}}return Ext.emptyFn}function H(Y,V,X,U){var S=U.marginRight,T,W;if(S!=="0px"){T=Y.style;W=T.display;T.display="inline-block";S=(X?U:Y.ownerDocument.defaultView.getComputedStyle(Y,null)).marginRight;T.display=W}return S}function F(Z,W,Y,V){var S=V.marginRight,U,T,X;if(S!=="0px"){U=Z.style;T=N(Z);X=U.display;U.display="inline-block";S=(Y?V:Z.ownerDocument.defaultView.getComputedStyle(Z,"")).marginRight;U.display=X;T()}return S}if(!w.RightMargin){B.marginRight=B["margin-right"]={name:"marginRight",get:(w.DisplayChangeInputSelectionBug||w.DisplayChangeTextAreaSelectionBug)?F:H}}if(!w.TransparentColor){K=["background-color","border-color","color","outline-color"];for(I=K.length;I--;){D=K[I];P=t.normalize(D);B[D]=B[P]={name:P,get:J}}}s.verticalStyleHooks90=f=Ext.Object.chain(B);s.verticalStyleHooks270=r=Ext.Object.chain(B);f.width=B.height||{name:"height"};f.height=B.width||{name:"width"};f["margin-top"]={name:"marginLeft"};f["margin-right"]={name:"marginTop"};f["margin-bottom"]={name:"marginRight"};f["margin-left"]={name:"marginBottom"};f["padding-top"]={name:"paddingLeft"};f["padding-right"]={name:"paddingTop"};f["padding-bottom"]={name:"paddingRight"};f["padding-left"]={name:"paddingBottom"};f["border-top"]={name:"borderLeft"};f["border-right"]={name:"borderTop"};f["border-bottom"]={name:"borderRight"};f["border-left"]={name:"borderBottom"};r.width=B.height||{name:"height"};r.height=B.width||{name:"width"};r["margin-top"]={name:"marginRight"};r["margin-right"]={name:"marginBottom"};r["margin-bottom"]={name:"marginLeft"};r["margin-left"]={name:"marginTop"};r["padding-top"]={name:"paddingRight"};r["padding-right"]={name:"paddingBottom"};r["padding-bottom"]={name:"paddingLeft"};r["padding-left"]={name:"paddingTop"};r["border-top"]={name:"borderRight"};r["border-right"]={name:"borderBottom"};r["border-bottom"]={name:"borderLeft"};r["border-left"]={name:"borderTop"};if(!Ext.scopeCss){E.push("x-body")}if(w.Touch){E.push("x-touch")}if(Ext.isIE&&Ext.isIE9m){E.push("x-ie","x-ie9m");E.push("x-ie8p");if(Ext.isIE8){E.push("x-ie8")}else{E.push("x-ie9","x-ie9p")}if(Ext.isIE8m){E.push("x-ie8m")}}if(Ext.isIE10){E.push("x-ie10")}if(Ext.isIE10p){E.push("x-ie10p")}if(Ext.isIE11){E.push("x-ie11")}if(Ext.isGecko){E.push("x-gecko")}if(Ext.isOpera){E.push("x-opera")}if(Ext.isOpera12m){E.push("x-opera12m")}if(Ext.isWebKit){E.push("x-webkit")}if(Ext.isSafari){E.push("x-safari")}if(Ext.isChrome){E.push("x-chrome")}if(Ext.isMac){E.push("x-mac")}if(Ext.isLinux){E.push("x-linux")}if(!w.CSS3BorderRadius){E.push("x-nbr")}if(!w.CSS3LinearGradient){E.push("x-nlg")}if(w.Touch){E.push("x-touch")}Ext.getBody().addCls(E)},null,{priority:1500})});(Ext.cmd.derive("Ext.GlobalEvents",Ext.mixin.Observable,{alternateClassName:"Ext.globalEvents",observableType:"global",singleton:true,resizeBuffer:100,idleEventMask:{mousemove:1,touchmove:1,pointermove:1,MSPointerMove:1,unload:1},constructor:function(){var a=this;a.callParent();Ext.onInternalReady(function(){a.attachListeners()})},attachListeners:function(){Ext.get(window).on("resize",this.fireResize,this,{buffer:this.resizeBuffer});Ext.getDoc().on("mousedown",this.fireMouseDown,this)},fireMouseDown:function(a){this.fireEvent("mousedown",a)},fireResize:function(){var d=this,b=Ext.Element,a=b.getViewportWidth(),c=b.getViewportHeight();if(d.curHeight!==c||d.curWidth!==a){d.curHeight=c;d.curWidth=a;d.fireEvent("resize",a,c)}}},1,0,0,0,0,0,[Ext,"GlobalEvents",Ext,"globalEvents"],function(a){Ext.on=function(){return a.addListener.apply(a,arguments)};Ext.un=function(){return a.removeListener.apply(a,arguments)}}));Ext.define("Ext.overrides.GlobalEvents",{override:"Ext.GlobalEvents",deprecated:{5:{methods:{addListener:function(d,h,j,m,c,b,f){var a,g;if(d==="ready"){g=h}else{if(typeof d!=="string"){for(a in d){if(a==="ready"){g=d[a]}}}}if(g){Ext.onReady(g)}this.callParent([d,h,j,m,c,b,f])}}}}});Ext.USE_NATIVE_JSON=false;Ext.JSON=(new (function(){var me=this,hasNative=window.JSON&&JSON.toString()==="[object JSON]",useHasOwn=!!{}.hasOwnProperty,pad=function(n){return n<10?"0"+n:n},doDecode=function(json){return eval("("+json+")")},doEncode=function(o,newline){if(o===null||o===undefined){return"null"}else{if(Ext.isDate(o)){return me.encodeDate(o)}else{if(Ext.isString(o)){if(Ext.isMSDate(o)){return me.encodeMSDate(o)}else{return me.encodeString(o)}}else{if(typeof o==="number"){return isFinite(o)?String(o):"null"}else{if(Ext.isBoolean(o)){return String(o)}else{if(o.toJSON){return o.toJSON()}else{if(Ext.isArray(o)){return encodeArray(o,newline)}else{if(Ext.isObject(o)){return encodeObject(o,newline)}else{if(typeof o==="function"){return"null"}}}}}}}}}return"undefined"},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","\v":"\\u000b"},charToReplace=/[\\\"\x00-\x1f\x7f-\uffff]/g,encodeString=function(s){return'"'+s.replace(charToReplace,function(a){var c=m[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"'},encodeMSDate=function(o){return'"'+o+'"'},encodeArrayPretty=function(o,newline){var len=o.length,cnewline=newline+"   ",sep=","+cnewline,a=["[",cnewline],i;for(i=0;i<len;i+=1){a.push(me.encodeValue(o[i],cnewline),sep)}a[a.length-1]=newline+"]";return a.join("")},encodeObjectPretty=function(o,newline){var cnewline=newline+"   ",sep=","+cnewline,a=["{",cnewline],i,val;for(i in o){val=o[i];if(!useHasOwn||o.hasOwnProperty(i)){if(typeof val==="function"||val===undefined){continue}a.push(me.encodeValue(i)+": "+me.encodeValue(val,cnewline),sep)}}a[a.length-1]=newline+"}";return a.join("")},encodeArray=function(o,newline){if(newline){return encodeArrayPretty(o,newline)}var a=["[",""],len=o.length,i;for(i=0;i<len;i+=1){a.push(me.encodeValue(o[i]),",")}a[a.length-1]="]";return a.join("")},encodeObject=function(o,newline){if(newline){return encodeObjectPretty(o,newline)}var a=["{",""],i,val;for(i in o){val=o[i];if(!useHasOwn||o.hasOwnProperty(i)){if(typeof val==="function"||val===undefined){continue}a.push(me.encodeValue(i),":",me.encodeValue(val),",")}}a[a.length-1]="}";return a.join("")};me.encodeString=encodeString;me.encodeValue=doEncode;me.encodeDate=function(o){return'"'+o.getFullYear()+"-"+pad(o.getMonth()+1)+"-"+pad(o.getDate())+"T"+pad(o.getHours())+":"+pad(o.getMinutes())+":"+pad(o.getSeconds())+'"'};me.encode=function(o){if(hasNative&&Ext.USE_NATIVE_JSON){return JSON.stringify(o)}return me.encodeValue(o)};me.decode=function(json,safe){try{if(hasNative&&Ext.USE_NATIVE_JSON){return JSON.parse(json)}return doDecode(json)}catch(e){if(safe){return null}Ext.raise({sourceClass:"Ext.JSON",sourceMethod:"decode",msg:"You're trying to decode an invalid JSON String: "+json})}};me.encodeMSDate=encodeMSDate;if(!Ext.util){Ext.util={}}Ext.util.JSON=me;Ext.encode=me.encode;Ext.decode=me.decode})());(Ext.cmd.derive("Ext.mixin.Inheritable",Ext.Mixin,{mixinConfig:{id:"inheritable"},getInherited:function(m){var f=this,h=(m&&f.inheritedStateInner)||f.inheritedState,b=f.getRefOwner(),a=f.isContainer,j,c,d,g;if(!h||h.invalid){j=f.getRefOwner();g=f.ownerLayout;if(b){d=g?g===b.layout:true}f.inheritedState=h=Ext.Object.chain(j?j.getInherited(d):Ext.rootInheritedState);if(a){f.inheritedStateInner=c=Ext.Object.chain(h)}f.initInheritedState(h,c);h=(a&&m)?f.inheritedStateInner:f.inheritedState}return h},getInheritedConfig:function(f,a){var d=this.inheritedState,b,c;if(!d||d.invalid){d=this.getInherited()}c=d[f];if(a&&d.hasOwnProperty(f)){b=c;delete d[f];c=d[f];d[f]=b}return c},resolveListenerScope:function(g,a){var d=this,f=(typeof a==="boolean"),c=Ext._namedScopes[g],b;if(!c){b=d.getInheritedConfig("defaultListenerScope",f?a:true)||g||d}else{if(c.isController){b=d.getInheritedConfig("controller",f?a:!c.isSelf)}else{if(c.isSelf){b=d.getInheritedConfig("defaultListenerScope",f&&a)||d}else{if(c.isThis){b=d}}}}return b||null},resolveSatelliteListenerScope:function(c,f){var d=this,b=Ext._namedScopes[f],a;if(!b){a=d.getInheritedConfig("defaultListenerScope")||f||d}else{if(b.isController){a=d.getInheritedConfig("controller")}else{if(b.isSelf){a=d.getInheritedConfig("defaultListenerScope")||c}else{if(b.isThis){a=c}}}}return a||null},lookupReferenceHolder:function(a){return this.getInheritedConfig("referenceHolder",a!==false)||null},getRefOwner:function(){var a=this;return a.ownerCt||a.parent||a.$initParent||a.ownerCmp||a.floatParent},invalidateInheritedState:function(){var a=this.inheritedState;if(a){a.invalid=true;delete this.inheritedState}},privates:{fixReference:function(){var a=this,b;if(a.getReference()){b=a.lookupReferenceHolder();if(b){b.attachReference(a)}}},onInheritedAdd:function(b,a){var c=this;if(c.inheritedState&&a){c.invalidateInheritedState()}if(c.getReference()){Ext.ComponentManager.markReferencesDirty()}},onInheritedRemove:function(b){var a=this,c;if(a.getReference()){c=a.lookupReferenceHolder();if(c){c.clearReference(a)}}if(a.inheritedState&&!b){a.invalidateInheritedState()}}}},0,0,0,0,0,0,[Ext.mixin,"Inheritable"],function(){Ext.rootInheritedState={}}));(Ext.cmd.derive("Ext.mixin.Bindable",Ext.Base,{mixinId:"bindable",config:{bind:{$value:null,lazy:true},controller:null,defaultListenerScope:false,publishes:{$value:null,lazy:true,merge:function(b,a){return this.mergeSets(b,a)}},reference:null,session:{$value:null,lazy:true},twoWayBindable:{$value:null,lazy:true,merge:function(b,a){return this.mergeSets(b,a)}},viewModel:{$value:null,lazy:true}},defaultBindProperty:null,validRefRe:/^[a-z_][a-z0-9_]*$/i,initInheritedState:function(d){var f=this,a=f.getReference(),b=f.getController(),c=f.getConfig("viewModel",true),h=f.getConfig("session",true),g=f.getDefaultListenerScope();if(b){d.controller=b}if(g){d.defaultListenerScope=f}else{if(b){d.defaultListenerScope=b}}if(c){if(!c.isViewModel){c=f}d.viewModel=c}if(h){if(!h.isSession){h=f}d.session=h}if(a){f.referenceKey=(d.referencePath||"")+a;f.viewModelKey=(d.viewModelPath||"")+a}},lookupController:function(a){return this.getInheritedConfig("controller",a)||null},lookupSession:function(a){var b=a?null:this.getSession();if(!b){b=this.getInheritedConfig("session",a);if(b&&!b.isSession){b=b.getInherited().session=b.getSession()}}return b||null},lookupViewModel:function(a){var b=a?null:this.getViewModel();if(!b){b=this.getInheritedConfig("viewModel",a);if(b&&!b.isViewModel){b=b.getInherited().viewModel=b.getViewModel()}}return b||null},publishState:function(o,m){var j=this,b=j.publishedState,f=j.getBind(),h=f&&o&&f[o],g=0,c,a,d,p;if(h&&!h.syncing&&!h.isReadOnly()){if(!(h.calls===0&&(m==null||m===j.getInitialConfig()[o]))){h.setValue(m)}}if(!(a=j.getPublishes())){return}if(!(d=j.lookupViewModel())){return}if(!(p=j.viewModelKey)){return}if(o&&b){if(!a[o]){return}if(!(m&&m.constructor===Object)&&!(m instanceof Array)){if(b[o]===m){return}}p+=".";p+=o}else{b=b||(j.publishedState={});for(c in a){++g;if(c===o){b[c]=m}else{b[c]=j[c]}}if(!g){return}m=b}d.set(p,m)},privates:{addBindableUpdater:function(c){var b=this,d=b.self.$config.configs,a=d[c],f;if(a&&!b.hasOwnProperty(f=a.names.update)){b[f]=a.bindableUpdater||(a.root.bindableUpdater=b.makeBindableUpdater(a))}},applyBind:function(d,o){if(!d){return d}var g=this,j=g.lookupViewModel(),f=g.getTwoWayBindable(),a=g._getBindTemplateScope,h,m,c;if(!o||typeof o==="string"){o={}}if(Ext.isString(d)){h=d;d={};d[g.defaultBindProperty]=h}for(m in d){c=d[m];h=o[m];if(h&&typeof h!=="string"){h.destroy();h=null}if(c){h=j.bind(c,g.onBindNotify,g);h._config=Ext.Config.get(m);h.getTemplateScope=a}o[m]=h;if(f&&f[m]&&!h.isReadOnly()){g.addBindableUpdater(m)}}return o},applyController:function(a){if(a){a=Ext.Factory.controller(a);a.setView(this)}return a},applyPublishes:function(a){if(this.lookupViewModel()){for(var b in a){this.addBindableUpdater(b)}}return a},applySession:function(c){if(!c){return null}if(!c.isSession){var b=this.lookupSession(true),a=(c===true)?{}:c;if(b){c=b.spawn(a)}else{c=new Ext.data.Session(a)}}return c},applyViewModel:function(b){var c=this,a,d;if(!b){return null}if(!b.isViewModel){a={parent:c.lookupViewModel(true)};a.session=c.getSession();if(!d&&!a.parent){a.session=c.lookupSession()}if(b){if(b.constructor===Object){Ext.apply(a,b)}else{if(typeof b==="string"){a.type=b}}}b=Ext.Factory.viewModel(a)}return b},_getBindTemplateScope:function(){return this.scope.resolveListenerScope()},destroyBindable:function(){var c=this,b=c.getConfig("viewModel",true),d=c.getConfig("session",true),a=c.getController();if(b&&b.isViewModel){b.destroy();c.setViewModel(null)}if(d&&d.isSession){if(d.getAutoDestroy()){d.destroy()}c.setSession(null)}if(a){c.setController(null);a.destroy()}},initBindable:function(){this.initBindable=Ext.emptyFn;this.getBind();this.getPublishes()},makeBindableUpdater:function(a){var b=a.names.update;return function(f,c){var d=this,g=d.self.prototype[b];if(g){g.call(d,f,c)}d.publishState(a.name,f)}},isSyncing:function(b){var d=this.getBind(),a=false,c;if(d){c=d[b];if(c){a=c.syncing>0}}return a},onBindNotify:function(b,a,c){c.syncing=(c.syncing+1)||1;this[c._config.names.set](b);--c.syncing},removeBindings:function(){var b=this,d,a,c;if(!b.destroying){d=b.getBind();if(d&&typeof d!=="string"){for(a in d){c=d[a];c.destroy();c._config=c.getTemplateScope=null}}}b.setBind(null)},updateSession:function(b){var a=this.getInherited();if(b){a.session=b}else{delete a.session}},updateViewModel:function(b){var c=this.getInherited(),a=this.getController();if(b){c.viewModel=b;b.setView(this);if(a){a.initViewModel(b)}}else{delete c.viewModel}}}},0,0,0,0,0,0,[Ext.mixin,"Bindable"],0));(Ext.cmd.derive("Ext.mixin.ComponentDelegation",Ext.Mixin,{mixinConfig:{id:"componentDelegation"},privates:{addDelegatedListener:function(g,j,o,p,d,c,f){var h=this,b,a,m;d=d||p.order;if(d){m=(p&&p.priority);if(!m){p=p?Ext.Object.chain(p):{};p.priority=h.$orderToPriority[d]}}b=h.$delegatedEvents||(h.$delegatedEvents={});a=b[g]||(b[g]=new Ext.util.Event(h,g));if(a.addListener(j,o,p,c,f)){h.$hasDelegatedListeners._incr_(g)}},clearDelegatedListeners:function(){var d=this,b=d.$delegatedEvents,a,c,f;if(b){for(a in b){c=b[a];f=c.listeners.length;c.clearListeners();d.$hasDelegatedListeners._decr_(a,f);delete b[a]}}},doFireDelegatedEvent:function(b,d){var h=this,c=true,a,f,g;if(h.$hasDelegatedListeners[b]){a=h.getRefOwner();while(a){f=a.$delegatedEvents;if(f){g=f[b];if(g){c=g.fireDelegated(h,d);if(c===false){break}}}a=a.getRefOwner()}}return c},removeDelegatedListener:function(a,d,c){var g=this,b=g.$delegatedEvents,f;if(b){f=b[a];if(f&&f.removeListener(d,c)){g.$hasDelegatedListeners._decr_(a);if(f.listeners.length===0){delete b[a]}}}}},onClassMixedIn:function(a){function b(){}a.prototype.HasListeners=a.HasListeners=b;b.prototype=a.hasListeners=new Ext.mixin.ComponentDelegation.HasDelegatedListeners()}},0,0,0,0,0,0,[Ext.mixin,"ComponentDelegation"],function(b){function a(){}b.HasDelegatedListeners=a;a.prototype=b.prototype.$hasDelegatedListeners=new Ext.mixin.Observable.HasListeners()}));(Ext.cmd.derive("Ext.Widget",Ext.Evented,{isWidget:true,element:{reference:"element"},observableType:"component",cachedConfig:{style:null},config:{userCls:null},eventedConfig:{width:null,height:null},template:[],constructor:function(b){var c=this,a;c.initId(b);c.initElement();c.mixins.observable.constructor.call(c,b);Ext.ComponentManager.register(c);a=c.getController();if(a){a.init(c)}},afterCachedConfig:function(){var j=this,m=j.self.prototype,o=j.referenceList,c=j.renderElement,g,d,f,h,b,a;m.renderTemplate=g=document.createDocumentFragment();g.appendChild(c.clone(true,true));a=g.querySelectorAll("[id]");for(f=0,h=a.length;f<h;f++){d=a[f];d.removeAttribute("id")}for(f=0,h=o.length;f<h;f++){b=o[f];j[b].dom.removeAttribute("reference")}},addCls:function(a){this.el.addCls(a)},applyWidth:function(a){return this.filterLengthValue(a)},applyHeight:function(a){return this.filterLengthValue(a)},clearListeners:function(){var a=this;a.mixins.observable.clearListeners.call(a);a.mixins.componentDelegation.clearDelegatedListeners.call(a)},destroy:function(){var f=this,b=f.referenceList,c,d,a;for(c=0,d=b.length;c<d;c++){a=b[c];if(f.hasOwnProperty(a)){f[a].destroy();f[a]=null}}f.destroyBindable();Ext.Evented.prototype.destroy.call(this);Ext.ComponentManager.unregister(f)},doFireEvent:function(b,d,a){var f=this,c=f.mixins.observable.doFireEvent.call(f,b,d,a);if(c!==false){c=f.mixins.componentDelegation.doFireDelegatedEvent.call(f,b,d)}return c},getElementConfig:function(){var b=this,a=b.element;if(!("children" in a)){a=Ext.apply({children:b.getTemplate()},a)}return a},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getTemplate:function(){return this.template},initElement:function(){var p=this,q=p.self.prototype,a=p.getId(),r=p.referenceList=p.referenceList=[],c=true,j,f,h,b,g,o,m,d;if(q.hasOwnProperty("renderTemplate")){j=p.renderTemplate.cloneNode(true);f=j.firstChild}else{c=false;j=document.createDocumentFragment();f=Ext.Element.create(p.processElementConfig.call(q),true);j.appendChild(f)}b=j.querySelectorAll("[reference]");for(g=0,o=b.length;g<o;g++){m=b[g];d=m.getAttribute("reference");if(c){m.removeAttribute("reference")}if(d==="element"){m.id=a;h=p.el=p.addElementReference(d,m);h.dom.setAttribute("data-componentid",a)}else{p.addElementReferenceOnDemand(d,m)}r.push(d)}if(f===h.dom){p.renderElement=h}else{p.addElementReferenceOnDemand("renderElement",f)}},is:function(a){return Ext.ComponentQuery.is(this,a)},isXType:function(b,a){return a?(Ext.Array.indexOf(this.xtypes,b)!==-1):!!this.xtypesMap[b]},removeCls:function(a){this.el.removeCls(a)},toggleCls:function(a,b){this.element.toggleCls(a,b)},resolveListenerScope:function(b,a){return this.mixins.inheritable.resolveListenerScope.call(this,b,a)},setSize:function(b,a){if(b!==undefined){this.setWidth(b)}if(a!==undefined){this.setHeight(a)}},applyStyle:function(b,a){if(a&&b===a&&Ext.isObject(a)){b=Ext.apply({},b)}return b},updateStyle:function(a){this.element.applyStyles(a)},updateWidth:function(a){this.element.setWidth(a)},updateHeight:function(a){this.element.setHeight(a)},onFocusEnter:Ext.emptyFn,onFocusLeave:Ext.emptyFn,isAncestor:function(){return false},privates:{addElementReferenceOnDemand:function(a,b){if(this._elementListeners[a]){this.addElementReference(a,b)}else{Ext.Object.defineProperty(this,a,{get:function(){delete this[a];return this.addElementReference(a,b)},configurable:true})}},addElementReference:function(c,f){var g=this,b=g[c]=Ext.get(f),d=g._elementListeners[c],a,h;b.skipGarbageCollection=true;b.component=g;if(d){d=Ext.clone(d);for(a in d){h=d[a];if(typeof h==="object"){h.scope=g}}d.scope=g;b.on(d)}return b},detachFromBody:function(){Ext.getDetachedBody().appendChild(this.element);this.isDetached=true},doAddListener:function(a,h,j,m,c,b,d){var g=this,f;if(m&&"element" in m){g[m.element].doAddListener(a,h,j||g,m,c)}if(m){f=m.delegate;if(f){g.mixins.componentDelegation.addDelegatedListener.call(g,a,h,j,m,c,b,d);return}}Ext.Evented.prototype.doAddListener.call(this,a,h,j,m,c,b,d)},doRemoveListener:function(a,c,b){var d=this;d.mixins.observable.doRemoveListener.call(d,a,c,b);d.mixins.componentDelegation.removeDelegatedListener.call(d,a,c,b)},filterLengthValue:function(a){if(a==="auto"||(!a&&a!==0)){return null}return a},getFocusEl:function(){return this.element},initElementListeners:function(p){var o=this,d=o.self.superclass,c=d._elementListeners,f=p.reference,a=p.children,h,m,b,j,g;if(o.hasOwnProperty("_elementListeners")){h=o._elementListeners}else{h=o._elementListeners=(c?Ext.Object.chain(c):{})}if(f){m=p.listeners;if(m){if(c){b=c[f];if(b){m=Ext.Object.chain(b);Ext.apply(m,p.listeners)}}h[f]=m;p.listeners=null}}if(a){for(g=0,j=a.length;g<j;g++){o.initElementListeners(a[g])}}},initId:function(b){var c=this,a=c.config,d=(b&&b.id)||(a&&a.id);if(d){c.setId(d);c.id=d}else{c.getId()}},processElementConfig:function(){var a=this,c=a.self.superclass,b;if(a.hasOwnProperty("_elementConfig")){b=a._elementConfig}else{b=a._elementConfig=a.getElementConfig();if(c.isWidget){a.processElementConfig.call(c)}a.initElementListeners(b)}return b},reattachToBody:function(){this.isDetached=false},updateUserCls:function(b,a){this.element.replaceCls(a,b)}}},1,["widget"],["widget"],{widget:true},["widget.widget"],[[Ext.mixin.Inheritable.prototype.mixinId||Ext.mixin.Inheritable.$className,Ext.mixin.Inheritable],[Ext.mixin.Bindable.prototype.mixinId||Ext.mixin.Bindable.$className,Ext.mixin.Bindable],[Ext.mixin.ComponentDelegation.prototype.mixinId||Ext.mixin.ComponentDelegation.$className,Ext.mixin.ComponentDelegation]],[Ext,"Widget"],function(b){var a=b.prototype;(a.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1;(a.$eventOptions=Ext.Object.chain(a.$eventOptions)).delegate=1}));Ext.define("Ext.overrides.Widget",{override:"Ext.Widget",$configStrict:false,isComponent:true,liquidLayout:true,rendered:true,rendering:true,config:{renderTo:null},cachedConfig:{baseCls:"x-widget"},constructor:function(a){var b=this,c;(arguments.callee.$previous||Ext.Evented.prototype.constructor).call(this,a);b.getComponentLayout();c=b.getRenderTo();if(c){b.render(c)}},addClsWithUI:function(a){this.el.addCls(a)},afterComponentLayout:Ext.emptyFn,updateLayout:function(){var a=this.getRefOwner();if(a){a.updateLayout()}},destroy:function(){var b=this,a=b.ownerCt;if(a&&a.remove){a.remove(b,false)}(arguments.callee.$previous||Ext.Evented.prototype.destroy).call(this)},finishRender:function(){this.rendering=false;this.initBindable()},getAnimationProps:function(){return{}},getComponentLayout:function(){var b=this,a=b.componentLayout;if(!a){a=b.componentLayout=new Ext.layout.component.Auto();a.setOwner(b)}return a},getEl:function(){return this.element},getTdCls:function(){return"x-"+this.getTdType()+"-"+(this.ui||"default")+"-cell"},getTdType:function(){return this.xtype},getItemId:function(){return this.itemId||this.id},getSizeModel:function(){return Ext.Component.prototype.getSizeModel.apply(this,arguments)},onAdded:function(b,f,a){var d=this,c=d.inheritedState;d.ownerCt=b;d.onInheritedAdd(d,a)},onRemoved:function(b){var a=this;if(!b){a.removeBindings()}a.onInheritedRemove(b);a.ownerCt=a.ownerLayout=null},parseBox:function(a){return Ext.Element.parseBox(a)},removeClsWithUI:function(a){this.el.removeCls(a)},render:function(b,a){var f=this,c=f.element,d=Ext.Component.prototype,g;if(!f.ownerCt||f.floating){if(Ext.scopeCss){c.addCls(d.rootCls)}c.addCls(d.borderBoxCls)}if(a){g=b.childNodes[a];if(g){Ext.fly(b).insertBefore(c,g);return}}Ext.fly(b).appendChild(c)},setPosition:function(a,b){this.el.setLocalXY(a,b)},up:function(){return Ext.Component.prototype.up.apply(this,arguments)},isAncestor:function(){return Ext.Component.prototype.isAncestor.apply(this,arguments)},onFocusEnter:function(){return Ext.Component.prototype.onFocusEnter.apply(this,arguments)},onFocusLeave:function(){return Ext.Component.prototype.onFocusLeave.apply(this,arguments)},isLayoutChild:function(b){var a=this.ownerCt;return a?(a===b||a.isLayoutChild(b)):false}},function(b){var a=b.prototype;if(Ext.isIE9m){a.addElementReferenceOnDemand=a.addElementReference}});(Ext.cmd.derive("Ext.ProgressBase",Ext.Base,{mixinId:"progressbase",config:{value:0,textTpl:null},applyTextTpl:function(a){if(!a.isTemplate){a=new Ext.XTemplate(a)}return a},applyValue:function(a){return a||0}},0,0,0,0,0,0,[Ext,"ProgressBase"],0));(Ext.cmd.derive("Ext.util.Format",Ext.Base,function(){var a;return{singleton:true,defaultDateFormat:"m/d/Y",thousandSeparator:",",decimalSeparator:".",currencyPrecision:2,currencySign:"$",percentSign:"%",currencyAtEnd:false,stripTagsRe:/<\/?[^>]+>/gi,stripScriptsRe:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,nl2brRe:/\r?\n/g,hashRe:/#+$/,allHashes:/^#+$/,formatPattern:/[\d,\.#]+/,formatCleanRe:/[^\d\.#]/g,I18NFormatCleanRe:null,formatFns:{},constructor:function(){a=this},undef:function(b){return b!==undefined?b:""},defaultValue:function(c,b){return c!==undefined&&c!==""?c:b},substr:"ab".substr(-1)!="b"?function(c,f,b){var d=String(c);return(f<0)?d.substr(Math.max(d.length+f,0),b):d.substr(f,b)}:function(c,d,b){return String(c).substr(d,b)},lowercase:function(b){return String(b).toLowerCase()},uppercase:function(b){return String(b).toUpperCase()},usMoney:function(b){return a.currency(b,"$",2)},currency:function(d,g,c,b){var j="",h=",0",f=0;d=d-0;if(d<0){d=-d;j="-"}c=Ext.isDefined(c)?c:a.currencyPrecision;h+=(c>0?".":"");for(;f<c;f++){h+="0"}d=a.number(d,h);if((b||a.currencyAtEnd)===true){return Ext.String.format("{0}{1}{2}",j,d,g||a.currencySign)}else{return Ext.String.format("{0}{1}{2}",j,g||a.currencySign,d)}},date:function(b,c){if(!b){return""}if(!Ext.isDate(b)){b=new Date(Date.parse(b))}return Ext.Date.dateFormat(b,c||Ext.Date.defaultFormat)},dateRenderer:function(b){return function(c){return a.date(c,b)}},hex:function(d,c){var b=parseInt(d||0,10).toString(16);if(c){if(c<0){c=-c;if(b.length>c){b=b.substring(b.length-c)}}while(b.length<c){b="0"+b}}return b},or:function(c,b){return c||b},pick:function(d,c,f){if(Ext.isNumber(d)){var b=arguments[d+1];if(b){return b}}return d?f:c},stripTags:function(b){return !b?b:String(b).replace(a.stripTagsRe,"")},stripScripts:function(b){return !b?b:String(b).replace(a.stripScriptsRe,"")},fileSize:(function(){var b=1024,c=1048576,d=1073741824;return function(g){var f;if(g<b){if(g===1){f="1 byte"}else{f=g+" bytes"}}else{if(g<c){f=(Math.round(((g*10)/b))/10)+" KB"}else{if(g<d){f=(Math.round(((g*10)/c))/10)+" MB"}else{f=(Math.round(((g*10)/d))/10)+" GB"}}}return f}})(),math:(function(){var b={};return function(d,c){if(!b[c]){b[c]=Ext.functionFactory("v","return v "+c+";")}return b[c](d)}}()),round:function(d,c){var b=Number(d);if(typeof c==="number"){c=Math.pow(10,c);b=Math.round(d*c)/c}else{if(c===undefined){b=Math.round(b)}}return b},number:function(q,g){if(!g){return q}if(isNaN(q)){return""}var f=a.formatFns[g];if(!f){var m=g,t=a.thousandSeparator,r=a.decimalSeparator,h=0,d="",c,o,p,s,b,j;if(g.substr(g.length-2)==="/i"){if(!a.I18NFormatCleanRe||a.lastDecimalSeparator!==r){a.I18NFormatCleanRe=new RegExp("[^\\d\\"+r+"#]","g");a.lastDecimalSeparator=r}g=g.substr(0,g.length-2);c=g.indexOf(t)!==-1;o=g.replace(a.I18NFormatCleanRe,"").split(r)}else{c=g.indexOf(",")!==-1;o=g.replace(a.formatCleanRe,"").split(".")}p=g.replace(a.formatPattern,"");if(o.length>2){}else{if(o.length===2){h=o[1].length;s=o[1].match(a.hashRe);if(s){j=s[0].length;d='trailingZeroes=new RegExp(Ext.String.escapeRegex(utilFormat.decimalSeparator) + "*0{0,'+j+'}$")'}}}b=["var utilFormat=Ext.util.Format,extNumber=Ext.Number,neg,absVal,fnum,parts"+(c?",thousandSeparator,thousands=[],j,n,i":"")+(p?',formatString="'+g+'",formatPattern=/[\\d,\\.#]+/':"")+',trailingZeroes;return function(v){if(typeof v!=="number"&&isNaN(v=extNumber.from(v,NaN)))return"";neg=v<0;',"absVal=Math.abs(v);","fnum=Ext.Number.toFixed(absVal, "+h+");",d,";"];if(c){if(h){b[b.length]='parts=fnum.split(".");';b[b.length]="fnum=parts[0];"}b[b.length]="if(absVal>=1000) {";b[b.length]="thousandSeparator=utilFormat.thousandSeparator;thousands.length=0;j=fnum.length;n=fnum.length%3||3;for(i=0;i<j;i+=n){if(i!==0){n=3;}thousands[thousands.length]=fnum.substr(i,n);}fnum=thousands.join(thousandSeparator);}";if(h){b[b.length]="fnum += utilFormat.decimalSeparator+parts[1];"}}else{if(h){b[b.length]='if(utilFormat.decimalSeparator!=="."){parts=fnum.split(".");fnum=parts[0]+utilFormat.decimalSeparator+parts[1];}'}}b[b.length]='if(neg&&fnum!=="'+(h?"0."+Ext.String.repeat("0",h):"0")+'") { fnum="-"+fnum; }';if(s){b[b.length]='fnum=fnum.replace(trailingZeroes,"");'}b[b.length]="return ";if(p){b[b.length]="formatString.replace(formatPattern, fnum);"}else{b[b.length]="fnum;"}b[b.length]="};";f=a.formatFns[m]=Ext.functionFactory("Ext",b.join(""))(Ext)}return f(q)},numberRenderer:function(b){return function(c){return a.number(c,b)}},percent:function(c,b){return a.number(c*100,b||"0")+a.percentSign},attributes:function(c){if(typeof c==="object"){var b=[],d;for(d in c){if(c.hasOwnProperty(d)){b.push(d,'="',d==="style"?Ext.DomHelper.generateStyles(c[d],null,true):Ext.htmlEncode(c[d]),'" ')}}c=b.join("")}return c||""},plural:function(b,c,d){return b+" "+(b===1?c:(d?d:c+"s"))},nl2br:function(b){return Ext.isEmpty(b)?"":b.replace(a.nl2brRe,"<br/>")},capitalize:Ext.String.capitalize,uncapitalize:Ext.String.uncapitalize,ellipsis:Ext.String.ellipsis,escape:Ext.String.escape,escapeRegex:Ext.String.escapeRegex,htmlDecode:Ext.String.htmlDecode,htmlEncode:Ext.String.htmlEncode,leftPad:Ext.String.leftPad,toggle:Ext.String.toggle,trim:Ext.String.trim,parseBox:function(c){c=c||0;if(typeof c==="number"){return{top:c,right:c,bottom:c,left:c}}var d=c.split(" "),b=d.length;if(b===1){d[1]=d[2]=d[3]=d[0]}else{if(b===2){d[2]=d[0];d[3]=d[1]}else{if(b===3){d[3]=d[1]}}}return{top:parseInt(d[0],10)||0,right:parseInt(d[1],10)||0,bottom:parseInt(d[2],10)||0,left:parseInt(d[3],10)||0}}}},1,0,0,0,0,0,[Ext.util,"Format"],0));(Ext.cmd.derive("Ext.Template",Ext.Base,{inheritableStatics:{from:function(b,a){b=Ext.getDom(b);return new this(b.value||b.innerHTML,a||"")}},useEval:Ext.isGecko,constructor:function(d){var g=this,b=arguments,a=[],c,f=b.length,h;g.initialConfig={};if(f===1&&Ext.isArray(d)){b=d;f=b.length}if(f>1){for(c=0;c<f;c++){h=b[c];if(typeof h==="object"){Ext.apply(g.initialConfig,h);Ext.apply(g,h)}else{a.push(h)}}}else{a.push(d)}g.html=a.join("")},isTemplate:true,disableFormats:false,tokenRe:/\{(?:(?:(\d+)|([a-z_][\w\-]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,apply:function(a){var b=this;if(b.compiled){if(!b.fn){b.compile()}return b.fn(a).join("")}return b.evaluate(a)},evaluate:function(a){var g=this,c=!g.disableFormats,f=Ext.util.Format,b=g;function d(o,m,j,p,h){if(j==null||j===""){j=m}if(p&&c){if(h){h=[a[j]].concat(Ext.functionFactory("return ["+h+"];")())}else{h=[a[j]]}if(p.substr(0,5)==="this."){return b[p.substr(5)].apply(b,h)}else{if(f[p]){return f[p].apply(f,h)}else{return o}}}else{return a[j]!==undefined?a[j]:""}}return g.html.replace(g.tokenRe,d)},applyOut:function(a,b){var c=this;if(c.compiled){if(!c.fn){c.compile()}b.push.apply(b,c.fn(a))}else{b.push(c.apply(a))}return b},applyTemplate:function(){return this.apply.apply(this,arguments)},set:function(a,c){var b=this;b.html=a;b.compiled=!!c;b.fn=null;return b},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){var b=this,a;a=b.html.replace(b.compileARe,"\\\\").replace(b.compileBRe,"\\n").replace(b.compileCRe,"\\'").replace(b.tokenRe,b.regexReplaceFn.bind(b));a=(this.disableFormats!==true?"var fm=Ext.util.Format;":"")+(b.useEval?"$=":"return")+" function(v){return ['"+a+"'];};";b.fn=b.useEval?b.evalCompiled(a):(new Function("Ext",a))(Ext);b.compiled=true;return b},evalCompiled:function($){eval($);return $},regexReplaceFn:function(d,c,b,f,a){if(c==null||c===""){c='"'+b+'"'}else{if(this.stringFormat){c=parseInt(c)+1}}if(f&&this.disableFormats!==true){a=a?","+a:"";if(f.substr(0,5)==="this."){f=f+"("}else{if(Ext.util.Format[f]){f="fm."+f+"("}else{return d}}return"',"+f+"v["+c+"]"+a+"),'"}else{return"',v["+c+"] == undefined ? '' : v["+c+"],'"}},insertFirst:function(b,a,c){return this.doInsert("afterBegin",b,a,c)},insertBefore:function(b,a,c){return this.doInsert("beforeBegin",b,a,c)},insertAfter:function(b,a,c){return this.doInsert("afterEnd",b,a,c)},append:function(b,a,c){return this.doInsert("beforeEnd",b,a,c)},doInsert:function(b,d,a,f){var c=Ext.DomHelper.insertHtml(b,Ext.getDom(d),this.apply(a));return f?Ext.get(c):c},overwrite:function(c,a,d){var b=Ext.DomHelper.overwrite(Ext.getDom(c),this.apply(a));return d?Ext.get(b):b}},1,0,0,0,0,0,[Ext,"Template"],function(d){var c=/\{\d+\}/,a=function(g){if(c.test(g)){g=new d(g,b);return function(){return g.apply(arguments)}}else{return function(){return g}}},b={useFormat:false,compiled:true,stringFormat:true},f={};Ext.String.format=Ext.util.Format.format=function(h){var g=f[h]||(f[h]=a(h));return g.apply(this,arguments)};Ext.String.formatEncode=function(){return Ext.String.htmlEncode(Ext.String.format.apply(this,arguments))}}));(Ext.cmd.derive("Ext.util.XTemplateParser",Ext.Base,{constructor:function(a){Ext.apply(this,a)},doTpl:Ext.emptyFn,parse:function(r){var B=this,w=r.length,v={elseif:"elif"},y=B.topRe,c=B.actionsRe,f,d,o,u,h,p,j,A,z,b,g,a,q;B.level=0;B.stack=d=[];for(f=0;f<w;f=b){y.lastIndex=f;u=y.exec(r);if(!u){B.doText(r.substring(f,w));break}z=u.index;b=y.lastIndex;if(f<z){o=r.substring(f,z);if(!(q&&Ext.String.trim(o)==="")){B.doText(o)}}q=false;if(u[1]){b=r.indexOf("%}",z+2);B.doEval(r.substring(z+2,b));b+=2}else{if(u[2]){b=r.indexOf("]}",z+2);B.doExpr(r.substring(z+2,b));b+=2}else{if(u[3]){B.doTag(u[3])}else{if(u[4]){g=null;while((A=c.exec(u[4]))!==null){o=A[2]||A[3];if(o){o=Ext.String.htmlDecode(o);h=A[1];h=v[h]||h;g=g||{};p=g[h];if(typeof p=="string"){g[h]=[p,o]}else{if(p){g[h].push(o)}else{g[h]=o}}}}if(!g){if(B.elseRe.test(u[4])){B.doElse()}else{if(B.defaultRe.test(u[4])){B.doDefault()}else{B.doTpl();d.push({type:"tpl"})}}}else{if(g["if"]){B.doIf(g["if"],g);d.push({type:"if"})}else{if(g["switch"]){B.doSwitch(g["switch"],g);d.push({type:"switch"});q=true}else{if(g["case"]){B.doCase(g["case"],g)}else{if(g.elif){B.doElseIf(g.elif,g)}else{if(g["for"]){++B.level;if(a=B.propRe.exec(u[4])){g.propName=a[1]||a[2]}B.doFor(g["for"],g);d.push({type:"for",actions:g})}else{if(g.foreach){++B.level;if(a=B.propRe.exec(u[4])){g.propName=a[1]||a[2]}B.doForEach(g.foreach,g);d.push({type:"foreach",actions:g})}else{if(g.exec){B.doExec(g.exec,g);d.push({type:"exec",actions:g})}}}}}}}}}else{if(u[0].length===5){d.push({type:"tpl"})}else{j=d.pop();B.doEnd(j.type,j.actions);if(j.type=="for"||j.type=="foreach"){--B.level}}}}}}}},topRe:/(?:(\{\%)|(\{\[)|\{([^{}]+)\})|(?:<tpl([^>]*)\>)|(?:<\/tpl>)/g,actionsRe:/\s*(elif|elseif|if|for|foreach|exec|switch|case|eval|between)\s*\=\s*(?:(?:"([^"]*)")|(?:'([^']*)'))\s*/g,propRe:/prop=(?:(?:"([^"]*)")|(?:'([^']*)'))/,defaultRe:/^\s*default\s*$/,elseRe:/^\s*else\s*$/},1,0,0,0,0,0,[Ext.util,"XTemplateParser"],0));(Ext.cmd.derive("Ext.util.XTemplateCompiler",Ext.util.XTemplateParser,{useEval:Ext.isGecko,useIndex:Ext.isIE8m,useFormat:true,propNameRe:/^[\w\d\$]*$/,compile:function(a){var c=this,b=c.generate(a);return c.useEval?c.evalTpl(b):(new Function("Ext",b))(Ext)},generate:function(a){var d=this,b="var fm=Ext.util.Format,ts=Object.prototype.toString;",c;d.maxLevel=0;d.body=["var c0=values, a0="+d.createArrayTest(0)+", p0=parent, n0=xcount, i0=xindex, k0, v;\n"];if(d.definitions){if(typeof d.definitions==="string"){d.definitions=[d.definitions,b]}else{d.definitions.push(b)}}else{d.definitions=[b]}d.switches=[];d.parse(a);d.definitions.push((d.useEval?"$=":"return")+" function ("+d.fnArgs+") {",d.body.join(""),"}");c=d.definitions.join("\n");d.definitions.length=d.body.length=d.switches.length=0;delete d.definitions;delete d.body;delete d.switches;return c},doText:function(c){var b=this,a=b.body;c=c.replace(b.aposRe,"\\'").replace(b.newLineRe,"\\n");if(b.useIndex){a.push("out[out.length]='",c,"'\n")}else{a.push("out.push('",c,"')\n")}},doExpr:function(b){var a=this.body;a.push("if ((v="+b+") != null) out");if(this.useIndex){a.push("[out.length]=v+''\n")}else{a.push(".push(v+'')\n")}},doTag:function(a){var b=this.parseTag(a);if(b){this.doExpr(b)}else{this.doText("{"+a+"}")}},doElse:function(){this.body.push("} else {\n")},doEval:function(a){this.body.push(a,"\n")},doIf:function(b,c){var a=this;if(b==="."){a.body.push("if (values) {\n")}else{if(a.propNameRe.test(b)){a.body.push("if (",a.parseTag(b),") {\n")}else{a.body.push("if (",a.addFn(b),a.callFn,") {\n")}}if(c.exec){a.doExec(c.exec)}},doElseIf:function(b,c){var a=this;if(b==="."){a.body.push("else if (values) {\n")}else{if(a.propNameRe.test(b)){a.body.push("} else if (",a.parseTag(b),") {\n")}else{a.body.push("} else if (",a.addFn(b),a.callFn,") {\n")}}if(c.exec){a.doExec(c.exec)}},doSwitch:function(c){var b=this,a;if(c==="."||c==="#"){a=c==="."?"values":"xindex";b.body.push("switch (",a,") {\n")}else{if(b.propNameRe.test(c)){b.body.push("switch (",b.parseTag(c),") {\n")}else{b.body.push("switch (",b.addFn(c),b.callFn,") {\n")}}b.switches.push(0)},doCase:function(f){var d=this,c=Ext.isArray(f)?f:[f],g=d.switches.length-1,a,b;if(d.switches[g]){d.body.push("break;\n")}else{d.switches[g]++}for(b=0,g=c.length;b<g;++b){a=d.intRe.exec(c[b]);c[b]=a?a[1]:("'"+c[b].replace(d.aposRe,"\\'")+"'")}d.body.push("case ",c.join(": case "),":\n")},doDefault:function(){var a=this,b=a.switches.length-1;if(a.switches[b]){a.body.push("break;\n")}else{a.switches[b]++}a.body.push("default:\n")},doEnd:function(b,d){var c=this,a=c.level-1;if(b=="for"||b=="foreach"){if(d.exec){c.doExec(d.exec)}c.body.push("}\n");c.body.push("parent=p",a,";values=r",a+1,";xcount=n"+a+";xindex=i",a,"+1;xkey=k",a,";\n")}else{if(b=="if"||b=="switch"){c.body.push("}\n")}}},doFor:function(f,h){var d=this,c,b=d.level,a=b-1,g;if(f==="."){c="values"}else{if(d.propNameRe.test(f)){c=d.parseTag(f)}else{c=d.addFn(f)+d.callFn}}if(d.maxLevel<b){d.maxLevel=b;d.body.push("var ")}if(f=="."){g="c"+b}else{g="a"+a+"?c"+a+"[i"+a+"]:c"+a}d.body.push("i",b,"=0,n",b,"=0,c",b,"=",c,",a",b,"=",d.createArrayTest(b),",r",b,"=values,p",b,",k",b,";\n","p",b,"=parent=",g,"\n","if (c",b,"){if(a",b,"){n",b,"=c",b,".length;}else if (c",b,".isMixedCollection){c",b,"=c",b,".items;n",b,"=c",b,".length;}else if(c",b,".isStore){c",b,"=c",b,".data.items;n",b,"=c",b,".length;}else{c",b,"=[c",b,"];n",b,"=1;}}\n","for (xcount=n",b,";i",b,"<n"+b+";++i",b,"){\n","values=c",b,"[i",b,"]");if(h.propName){d.body.push(".",h.propName)}d.body.push("\n","xindex=i",b,"+1\n");if(h.between){d.body.push('if(xindex>1){ out.push("',h.between,'"); } \n')}},doForEach:function(f,h){var d=this,c,b=d.level,a=b-1,g;if(f==="."){c="values"}else{if(d.propNameRe.test(f)){c=d.parseTag(f)}else{c=d.addFn(f)+d.callFn}}if(d.maxLevel<b){d.maxLevel=b;d.body.push("var ")}if(f=="."){g="c"+b}else{g="a"+a+"?c"+a+"[i"+a+"]:c"+a}d.body.push("i",b,"=-1,n",b,"=0,c",b,"=",c,",a",b,"=",d.createArrayTest(b),",r",b,"=values,p",b,",k",b,";\n","p",b,"=parent=",g,"\n","for(k",b," in c",b,"){\n","xindex=++i",b,"+1;\n","xkey=k",b,";\n","values=c",b,"[k",b,"];");if(h.propName){d.body.push(".",h.propName)}if(h.between){d.body.push('if(xindex>1){ out.push("',h.between,'"); } \n')}},createArrayTest:("isArray" in Array)?function(a){return"Array.isArray(c"+a+")"}:function(a){return"ts.call(c"+a+')==="[object Array]"'},doExec:function(d,f){var c=this,a="f"+c.definitions.length,b=c.guards[c.strict?0:1];c.definitions.push("function "+a+"("+c.fnArgs+") {",b.doTry," var $v = values; with($v) {","  "+d," }",b.doCatch,"}");c.body.push(a+c.callFn+"\n")},guards:[{doTry:"",doCatch:""},{doTry:"try { ",doCatch:" } catch(e) {\n}"}],addFn:function(a){var d=this,b="f"+d.definitions.length,c=d.guards[d.strict?0:1];if(a==="."){d.definitions.push("function "+b+"("+d.fnArgs+") {"," return values","}")}else{if(a===".."){d.definitions.push("function "+b+"("+d.fnArgs+") {"," return parent","}")}else{d.definitions.push("function "+b+"("+d.fnArgs+") {",c.doTry," var $v = values; with($v) {","  return("+a+")"," }",c.doCatch,"}")}}return b},parseTag:function(b){var h=this,a=h.tagRe.exec(b),f,j,d,g,c;if(!a){return null}f=a[1];j=a[2];d=a[3];g=a[4];if(f=="."){if(!h.validTypes){h.definitions.push("var validTypes={string:1,number:1,boolean:1};");h.validTypes=true}c='validTypes[typeof values] || ts.call(values) === "[object Date]" ? values : ""'}else{if(f=="#"){c="xindex"}else{if(f=="$"){c="xkey"}else{if(f.substr(0,7)=="parent."){c=f}else{if(isNaN(f)&&f.indexOf("-")==-1&&f.indexOf(".")!=-1){c="values."+f}else{c="values['"+f+"']"}}}}}if(g){c="("+c+g+")"}if(j&&h.useFormat){d=d?","+d:"";if(j.substr(0,5)!="this."){j="fm."+j+"("}else{j+="("}}else{return c}return j+c+d+")"},evalTpl:function($){eval($);return $},newLineRe:/\r\n|\r|\n/g,aposRe:/[']/g,intRe:/^\s*(\d+)\s*$/,tagRe:/^([\w-\.\#\$]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?$/},0,0,0,0,0,0,[Ext.util,"XTemplateCompiler"],function(){var a=this.prototype;a.fnArgs="out,values,parent,xindex,xcount,xkey";a.callFn=".call(this,"+a.fnArgs+")"}));(Ext.cmd.derive("Ext.XTemplate",Ext.Template,{isXTemplate:true,emptyObj:{},fn:null,strict:false,apply:function(a,b,c,d){return this.applyOut(a,[],b,c,d).join("")},applyOut:function(a,b,d,g,j){var f=this,c;if(!f.fn){c=new Ext.util.XTemplateCompiler({useFormat:f.disableFormats!==true,definitions:f.definitions,strict:f.strict});f.fn=c.compile(f.html)}g=g||1;j=j||1;if(f.strict){f.fn(b,a,d||f.emptyObj,g,j)}else{try{f.fn(b,a,d||f.emptyObj,g,j)}catch(h){}}return b},compile:function(){return this},statics:{getTpl:function(b,d){var c=b[d],a;if(c&&!c.isTemplate){c=Ext.ClassManager.dynInstantiate("Ext.XTemplate",c);if(b.hasOwnProperty(d)){a=b}else{for(a=b.self.prototype;a&&!a.hasOwnProperty(d);a=a.superclass){}}a[d]=c;c.owner=a}return c||null}}},0,0,0,0,0,0,[Ext,"XTemplate"],0));(Ext.cmd.derive("Ext.app.EventDomain",Ext.Base,{statics:{instances:{}},isEventDomain:true,isInstance:false,constructor:function(){var a=this;if(!a.isInstance){Ext.app.EventDomain.instances[a.type]=a}a.bus={};a.monitoredClasses=[]},dispatch:function(j,q,o){q=Ext.canonicalEventName(q);var p=this,m=p.bus,r=m[q],f,c,b,d,s,h,g,a;if(!r){return true}for(f in r){if(r.hasOwnProperty(f)&&p.match(j,f,p.controller)){c=r[f];for(b in c){if(c.hasOwnProperty(b)){d=c[b];if(d.controller.isActive()){s=d.list;h=s.length;for(g=0;g<h;g++){a=s[g];if(a.fire.apply(a,o)===false){return false}}}}}}}return true},listen:function(d,q){var A=this,p=A.bus,h=A.idProperty,j=A.monitoredClasses,f=j.length,o=q.getId(),z=(A.type==="component"),t=z?q.getRefMap():null,v,m,w,u,b,c,a,s,r,y,g;for(u in d){r=d[u];if(z){u=t[u]||u}if(r){if(h){u=u==="*"?u:u.substring(1)}for(y in r){b=null;c=r[y];a=q;y=Ext.canonicalEventName(y);s=new Ext.util.Event(q,y);if(Ext.isObject(c)){b=c;c=b.fn;a=b.scope||q;delete b.fn;delete b.scope}if(typeof c==="string"){c=a[c]}s.addListener(c,a,b);for(v=0;v<f;++v){g=j[v].hasListeners;if(g){g._incr_(y)}}m=p[y]||(p[y]={});m=m[u]||(m[u]={});w=m[o]||(m[o]={controller:q,list:[]});w.list.push(s)}}}},match:function(c,a){var b=this.idProperty;if(b){return a==="*"||c[b]===a}return false},monitor:function(c){var b=this,a=c.isInstance?c:c.prototype,d=a.doFireEvent;b.monitoredClasses.push(c);a.doFireEvent=function(h,g){var f=d.apply(this,arguments);if(f!==false&&!this.isSuspended(h)){f=b.dispatch(this,h,g)}return f}},unlisten:function(d){var q=this.bus,a=d,u=this.monitoredClasses,o=u.length,b,r,v,p,t,f,s,m,h,c,g;if(d.isController){a=d.getId()}for(r in q){r=Ext.canonicalEventName(r);if(q.hasOwnProperty(r)&&(s=q[r])){for(f in s){b=s[f];c=b[a];if(c){v=c.list;if(v){for(m=0,p=v.length;m<p;++m){t=v[m];t.clearListeners();for(h=0;h<o;++h){g=u[h].hasListeners;if(g){g._decr_(t.name)}}}delete b[a]}}}}}},destroy:function(){this.monitoredClasses=this.bus=null;this.callParent()}},1,0,0,0,0,0,[Ext.app,"EventDomain"],0));(Ext.cmd.derive("Ext.app.domain.Component",Ext.app.EventDomain,{singleton:true,type:"component",constructor:function(){this.callParent();this.monitor(Ext.Widget)},dispatch:function(g,d,c){var b=g.lookupController(false),f,a;while(b){f=b.compDomain;if(f){if(f.dispatch(g,d,c)===false){return false}}a=b.getView();b=a?a.lookupController(true):null}return this.callParent(arguments)},match:function(b,a){return b.is(a)}},1,0,0,0,0,0,[Ext.app.domain,"Component"],0));(Ext.cmd.derive("Ext.util.ProtoElement",Ext.Base,function(){var b=Ext.String.splitWords,a=Ext.Array.toMap;return{isProtoEl:true,clsProp:"cls",styleProp:"style",removedProp:"removed",styleIsText:false,constructor:function(d){var g=this,c,f;if(d){Ext.apply(g,d);c=g.cls;f=g.style;delete g.cls}g.classList=c?b(c):[];g.classMap=c?a(g.classList):{};if(f){if(typeof f==="string"){g.style=Ext.Element.parseStyles(f)}else{if(Ext.isFunction(f)){g.styleFn=f;delete g.style}else{g.style=Ext.apply({},f)}}}},flush:function(){this.flushClassList=[];this.removedClasses={};delete this.style;delete this.unselectableAttr},addCls:function(q){if(!q){return this}var o=this,p=(typeof q==="string")?b(q):q,f=p.length,j=o.classList,d=o.classMap,g=o.flushClassList,h=0,m;for(;h<f;++h){m=p[h];if(!d[m]){d[m]=true;j.push(m);if(g){g.push(m);delete o.removedClasses[m]}}}return o},hasCls:function(c){return c in this.classMap},removeCls:function(r){var q=this,o=q.classList,g=(q.classList=[]),j=a(b(r)),f=o.length,d=q.classMap,m=q.removedClasses,h,p;for(h=0;h<f;++h){p=o[h];if(j[p]){if(m){if(d[p]){m[p]=true;Ext.Array.remove(q.flushClassList,p)}}delete d[p]}else{g.push(p)}}return q},setStyle:function(g,f){var d=this,c=d.style||(d.style={});if(typeof g==="string"){if(arguments.length===1){d.setStyle(Ext.Element.parseStyles(g))}else{c[g]=f}}else{Ext.apply(c,g)}return d},unselectable:function(){this.addCls(Ext.dom.Element.unselectableCls);if(Ext.isOpera){this.unselectableAttr=true}},writeTo:function(h){var f=this,g=f.flushClassList||f.classList,d=f.removedClasses,c;if(f.styleFn){c=Ext.apply({},f.styleFn());Ext.apply(c,f.style)}else{c=f.style}h[f.clsProp]=g.join(" ");if(c){h[f.styleProp]=f.styleIsText?Ext.DomHelper.generateStyles(c,null,true):c}if(d){d=Ext.Object.getKeys(d);if(d.length){h[f.removedProp]=d.join(" ")}}if(f.unselectableAttr){h.unselectable="on"}return h}}},1,0,0,0,0,0,[Ext.util,"ProtoElement"],0));(Ext.cmd.derive("Ext.dom.CompositeElement",Ext.dom.CompositeElementLite,{alternateClassName:"Ext.CompositeElement",isLite:false,getElement:function(a){return a},transformElement:function(a){return Ext.get(a)}},0,0,0,0,0,0,[Ext.dom,"CompositeElement",Ext,"CompositeElement"],0));(Ext.cmd.derive("Ext.scroll.Scroller",Ext.Evented,{factoryConfig:{defaultType:"dom"},isScroller:true,_spacerCls:"x-domscroller-spacer",config:{direction:undefined,directionLock:false,disabled:null,element:undefined,indicators:null,maxPosition:{x:0,y:0},maxUserPosition:{x:0,y:0},minPosition:{x:0,y:0},minUserPosition:{x:0,y:0},momentumEasing:null,size:null,slotSnapSize:{x:0,y:0},x:true,y:true,spacerXY:null},statics:{create:function(a){return Ext.Factory.scroller(a,Ext.supports.Touch?"touch":"dom")}},constructor:function(a){var b=this;b.position={x:0,y:0};Ext.Evented.prototype.constructor.call(this,a);b.onDomScrollEnd=Ext.Function.createBuffered(b.onDomScrollEnd,100,b)},destroy:function(){var a=this;a.setX(Ext.emptyString);a.setY(Ext.emptyString);a.setElement(null);a.onDomScrollEnd=a._partners=a.component=null;Ext.Evented.prototype.destroy.call(this)},addPartner:function(d,b){var c=this,f=c._partners||(c._partners={}),a=d._partners||(d._partners={});f[d.getId()]={scroller:d,axis:b};a[c.getId()]={scroller:c,axis:b}},applyElement:function(b,a){var d=this,c,f;if(a){d.scrollListener.destroy()}if(b){if(b.isElement){c=b}else{c=Ext.get(b)}if(c.dom===document.body){c=Ext.get(document.scrollingElement||(Ext.isWebKit?document.body:document.documentElement));f=Ext.get(Ext.isIE9m?window:document)}else{f=c}d.scrollListener=f.on({scroll:d.onDomScroll,scope:d,destroyable:true});return c}},getClientSize:function(){var a=this.getElement().dom;return{x:a.clientWidth,y:a.clientHeight}},getScrollbarSize:function(){var g=this,b=0,o=0,f,d,m,j,h,c,a;if(g.isDomScroller||Ext.supports.touchScroll===1){f=g.getElement();if(f&&!f.destroyed){m=g.getX();j=g.getY();d=f.dom;if(m||j){a=Ext.getScrollbarSize()}if(m==="scroll"){h=true}else{if(m){h=d.scrollWidth>d.clientWidth}}if(j==="scroll"){c=true}else{if(j){c=d.scrollHeight>d.clientHeight}}if(h){o=a.height}if(c){b=a.width}}}return{width:b,height:o}},getPosition:function(){return this.position},updateDirectionLock:Ext.emptyFn,updateDisabled:Ext.emptyFn,updateIndicators:Ext.emptyFn,updateMaxPosition:Ext.emptyFn,updateMaxUserPosition:Ext.emptyFn,updateMinPosition:Ext.emptyFn,updateMinUserPosition:Ext.emptyFn,updateMomenumEasing:Ext.emptyFn,updateX:Ext.emptyFn,updateY:Ext.emptyFn,onPartnerScrollStart:Ext.emptyFn,onPartnerScrollEnd:Ext.emptyFn,refresh:function(){this.fireEvent("refresh",this);return this},removePartner:function(b){var c=this._partners,a=b._partners;if(c){delete c[b.getId()]}if(a){delete (a[this.getId()])}},scrollBy:function(c,b,d){var a=this.getPosition();if(c){if(c.length){d=b;b=c[1];c=c[0]}else{if(typeof c!=="number"){d=b;b=c.y;c=c.x}}}c=(typeof c==="number")?c+a.x:null;b=(typeof b==="number")?b+a.y:null;return this.doScrollTo(c,b,d)},scrollIntoView:function(d,f,b,h){var m=this,j=m.getPosition(),g,a,o,c=m.getElement();if(d){g=Ext.fly(d).getScrollIntoViewXY(c,j.x,j.y);a=(f===false)?j.x:g.x;o=g.y;if(h){m.on({scrollend:"doHighlight",scope:m,single:true,args:[d,h]})}m.doScrollTo(a,o,b)}},isInView:function(c){var d=this,a={x:false,y:false},f,g=d.getElement(),b;if(c&&g.contains(c)){b=g.getRegion();f=Ext.fly(c).getRegion();a.x=f.right>b.left&&f.left<b.right;a.y=f.bottom>b.top&&f.top<b.bottom}return a},scrollTo:function(a,d,b){var c;if(a){if(a.length){b=d;d=a[1];a=a[0]}else{if(typeof a!=="number"){b=d;d=a.y;a=a.x}}}if(a<0||d<0){c=this.getMaxPosition();if(a<0){a+=c.x}if(d<0){d+=c.y}}this.doScrollTo(a,d,b)},updateDirection:function(c){var b=this,a,d;if(!c){a=b.getX();d=b.getY();if(a&&d){c=(d==="scroll"&&a==="scroll")?"both":"auto"}else{if(d){c="vertical"}else{if(a){c="horizontal"}}}b._direction=c}else{if(c==="auto"){a=true;d=true}else{if(c==="vertical"){a=false;d=true}else{if(c==="horizontal"){a=true;d=false}else{if(c==="both"){a="scroll";d="scroll"}}}}b.setX(a);b.setY(d)}},updateSize:function(d){var f=this,c=f.getElement(),b,a,g;if(c){b=f.getSpacer();if(d==null){b.hide()}else{if(typeof d==="number"){a=d;g=d}else{a=d.x||0;g=d.y||0}if(a>0){a-=1}if(g>0){g-=1}f.setSpacerXY({x:a,y:g});b.show()}}},deprecated:{"5":{methods:{getScroller:function(){return this}}},"5.1.0":{methods:{scrollToTop:function(a){return this.scrollTo(0,0,a)},scrollToEnd:function(a){return this.scrollTo(Infinity,Infinity,a)}}}},privates:{getSpacer:function(){var c=this,a=c._spacer,b;if(!a){b=c.getElement();a=c._spacer=b.createChild({cls:c._spacerCls,role:"presentation"});a.setVisibilityMode(2);b.position()}return a},applySpacerXY:function(b,a){if(a&&b.x===a.x&&b.y===a.y){b=undefined}return b},updateSpacerXY:function(a){this.getSpacer().setLocalXY(a.x,a.y)},convertX:function(a){return a},doHighlight:function(b,a){if(a!==true){Ext.fly(b).highlight(a)}else{Ext.fly(b).highlight()}},fireScrollStart:function(a,d){var c=this,b=c.component;c.invokePartners("onPartnerScrollStart",a,d);if(c.hasListeners.scrollstart){c.fireEvent("scrollstart",c,a,d)}if(b&&b.onScrollStart){b.onScrollStart(a,d)}Ext.GlobalEvents.fireEvent("scrollstart",c,a,d)},fireScroll:function(a,d){var c=this,b=c.component;c.invokePartners("onPartnerScroll",a,d);if(c.hasListeners.scroll){c.fireEvent("scroll",c,a,d)}if(b&&b.onScrollMove){b.onScrollMove(a,d)}Ext.GlobalEvents.fireEvent("scroll",c,a,d)},fireScrollEnd:function(a,d){var c=this,b=c.component;c.invokePartners("onPartnerScrollEnd",a,d);if(c.hasListeners.scrollend){c.fireEvent("scrollend",c,a,d)}if(b&&b.onScrollEnd){b.onScrollEnd(a,d)}Ext.GlobalEvents.fireEvent("scrollend",c,a,d)},initXStyle:function(){var b=this.getElement(),a=this.getX();if(b&&b.dom){if(!a){a="hidden"}else{if(a===true){a="auto"}}b.setStyle("overflow-x",a)}},initYStyle:function(){var a=this.getElement(),b=this.getY();if(a&&a.dom){if(!b){b="hidden"}else{if(b===true){b="auto"}}a.setStyle("overflow-y",b)}},invokePartners:function(j,a,h){var c=this,f=c._partners,b,g,d=j==="onPartnerScrollEnd";if(!c.suspendSync&!c.isReflecting){for(g in f){b=f[g].scroller;b.isReflecting=true;b[j](c,a,h);if(d){b.isReflecting=false}}}},clearReflecting:function(){this.isReflecting=false},suspendPartnerSync:function(){this.suspendSync=(this.suspendSync||0)+1},resumePartnerSync:function(){if(this.suspendSync){this.suspendSync--}},updateDomScrollPosition:function(){var d=this,c=d.getElement(),b,a=d.position;if(c&&!c.destroyed){b=d.getElementScroll(c);a.x=b.left;a.y=b.top}d.positionDirty=false;return a},getElementScroll:function(a){return a.getScroll()},onDomScroll:function(){var d=this,b,a,f,c;if(d.isTouchScroller&&Ext.supports.touchScroll===2){c=d.getElement().dom;c.scrollTop=c.scrollLeft=0;return}b=d.updateDomScrollPosition();a=b.x;f=b.y;if(!d.isScrolling){d.isScrolling=Ext.isScrolling=true;d.fireScrollStart(a,f)}d.fireScroll(a,f);d.onDomScrollEnd()},onDomScrollEnd:function(){var c=this,b=c.getPosition(),a=b.x,d=b.y;c.isScrolling=Ext.isScrolling=false;c.trackingScrollLeft=a;c.trackingScrollTop=d;c.fireScrollEnd(a,d)},onPartnerScroll:function(c,a,d){var b=c._partners[this.getId()].axis;if(b){if(b==="x"){d=null}else{if(b==="y"){a=null}}}this.doScrollTo(a,d,false,true)},restoreState:function(){var b=this,a=b.getElement(),c;if(a){c=a.dom;if(b.trackingScrollTop!==undefined){c.scrollTop=b.trackingScrollTop;c.scrollLeft=b.trackingScrollLeft}}}}},1,0,0,0,["scroller.scroller"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.scroll,"Scroller"],0));(Ext.cmd.derive("Ext.fx.easing.Abstract",Ext.Base,{config:{startTime:0,startValue:0},isEasing:true,isEnded:false,constructor:function(a){this.initConfig(a);return this},applyStartTime:function(a){if(!a){a=Ext.Date.now()}return a},updateStartTime:function(a){this.reset()},reset:function(){this.isEnded=false},getValue:Ext.emptyFn},1,0,0,0,0,0,[Ext.fx.easing,"Abstract"],0));(Ext.cmd.derive("Ext.fx.easing.Momentum",Ext.fx.easing.Abstract,{config:{acceleration:30,friction:0,startVelocity:0},alpha:0,updateFriction:function(b){var a=Math.log(1-(b/10));this.theta=a;this.alpha=a/this.getAcceleration()},updateStartVelocity:function(a){this.velocity=a*this.getAcceleration()},updateAcceleration:function(a){this.velocity=this.getStartVelocity()*a;this.alpha=this.theta/a},getValue:function(){return this.getStartValue()-this.velocity*(1-this.getFrictionFactor())/this.theta},getFrictionFactor:function(){var a=Ext.Date.now()-this.getStartTime();return Math.exp(a*this.alpha)},getVelocity:function(){return this.getFrictionFactor()*this.velocity}},0,0,0,0,0,0,[Ext.fx.easing,"Momentum"],0));(Ext.cmd.derive("Ext.fx.easing.Bounce",Ext.fx.easing.Abstract,{config:{springTension:0.3,acceleration:30,startVelocity:0},getValue:function(){var b=Ext.Date.now()-this.getStartTime(),c=(b/this.getAcceleration()),a=c*Math.pow(Math.E,-this.getSpringTension()*c);return this.getStartValue()+(this.getStartVelocity()*a)}},0,0,0,0,0,0,[Ext.fx.easing,"Bounce"],0));(Ext.cmd.derive("Ext.fx.easing.BoundMomentum",Ext.fx.easing.Abstract,{config:{momentum:null,bounce:null,minMomentumValue:0,maxMomentumValue:0,minVelocity:0.01,startVelocity:0},applyMomentum:function(a,b){return Ext.factory(a,Ext.fx.easing.Momentum,b)},applyBounce:function(a,b){return Ext.factory(a,Ext.fx.easing.Bounce,b)},updateStartTime:function(a){this.getMomentum().setStartTime(a);Ext.fx.easing.Abstract.prototype.updateStartTime.apply(this,arguments)},updateStartVelocity:function(a){this.getMomentum().setStartVelocity(a)},updateStartValue:function(a){this.getMomentum().setStartValue(a)},reset:function(){this.lastValue=null;this.isBouncingBack=false;this.isOutOfBound=false;return Ext.fx.easing.Abstract.prototype.reset.apply(this,arguments)},getValue:function(){var a=this.getMomentum(),o=this.getBounce(),f=a.getStartVelocity(),g=f>0?1:-1,h=this.getMinMomentumValue(),d=this.getMaxMomentumValue(),c=(g==1)?d:h,j=this.lastValue,m,b;if(f===0){return this.getStartValue()}if(!this.isOutOfBound){m=a.getValue();b=a.getVelocity();if(Math.abs(b)<this.getMinVelocity()){this.isEnded=true}if(m>=h&&m<=d){return m}this.isOutOfBound=true;o.setStartTime(Ext.Date.now()).setStartVelocity(b).setStartValue(c)}m=o.getValue();if(!this.isEnded){if(!this.isBouncingBack){if(j!==null){if((g==1&&m<j)||(g==-1&&m>j)){this.isBouncingBack=true}}}else{if(Math.round(m)==c){this.isEnded=true}}}this.lastValue=m;return m}},0,0,0,0,0,0,[Ext.fx.easing,"BoundMomentum"],0));(Ext.cmd.derive("Ext.fx.easing.Linear",Ext.fx.easing.Abstract,{config:{duration:0,endValue:0},updateStartValue:function(a){this.distance=this.getEndValue()-a},updateEndValue:function(a){this.distance=a-this.getStartValue()},getValue:function(){var a=Ext.Date.now()-this.getStartTime(),b=this.getDuration();if(a>b){this.isEnded=true;return this.getEndValue()}else{return this.getStartValue()+((a/b)*this.distance)}}},0,0,0,0,["easing.linear"],0,[Ext.fx.easing,"Linear"],0));(Ext.cmd.derive("Ext.fx.easing.EaseOut",Ext.fx.easing.Linear,{config:{exponent:4,duration:1500},getValue:function(){var g=Ext.Date.now()-this.getStartTime(),d=this.getDuration(),b=this.getStartValue(),j=this.getEndValue(),a=this.distance,c=g/d,h=1-c,f=1-Math.pow(h,this.getExponent()),m=b+(f*a);if(g>=d){this.isEnded=true;return j}return m}},0,0,0,0,["easing.ease-out"],0,[Ext.fx.easing,"EaseOut"],0));(Ext.cmd.derive("Ext.util.translatable.Abstract",Ext.Evented,{config:{useWrapper:null,easing:null,easingX:null,easingY:null},x:0,y:0,activeEasingX:null,activeEasingY:null,isAnimating:false,isTranslatable:true,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.position={x:0,y:0}},factoryEasing:function(a){return Ext.factory(a,Ext.fx.easing.Linear,null,"easing")},applyEasing:function(a){if(!this.getEasingX()){this.setEasingX(this.factoryEasing(a))}if(!this.getEasingY()){this.setEasingY(this.factoryEasing(a))}},applyEasingX:function(a){return this.factoryEasing(a)},applyEasingY:function(a){return this.factoryEasing(a)},doTranslate:Ext.emptyFn,translate:function(a,c,b){if(b){return this.translateAnimated(a,c,b)}if(this.isAnimating){this.stopAnimation()}if(!isNaN(a)&&typeof a=="number"){this.x=a}if(!isNaN(c)&&typeof c=="number"){this.y=c}this.doTranslate(a,c)},translateAxis:function(b,d,c){var a,f;if(b=="x"){a=d}else{f=d}return this.translate(a,f,c)},getPosition:function(){var b=this,a=b.position;a.x=-b.x;a.y=-b.y;return a},animate:function(b,a){this.activeEasingX=b;this.activeEasingY=a;this.isAnimating=true;this.lastX=null;this.lastY=null;Ext.AnimationQueue.start(this.doAnimationFrame,this);this.fireEvent("animationstart",this,this.x,this.y);return this},translateAnimated:function(b,j,g){var f=this;if(!Ext.isObject(g)){g={}}if(f.isAnimating){f.stopAnimation()}f.callback=g.callback;f.callbackScope=g.scope;var d=Ext.Date.now(),h=g.easing,c=(typeof b=="number")?(g.easingX||h||f.getEasingX()||true):null,a=(typeof j=="number")?(g.easingY||h||f.getEasingY()||true):null;if(c){c=f.factoryEasing(c);c.setStartTime(d);c.setStartValue(f.x);c.setEndValue(b);if("duration" in g){c.setDuration(g.duration)}}if(a){a=f.factoryEasing(a);a.setStartTime(d);a.setStartValue(f.y);a.setEndValue(j);if("duration" in g){a.setDuration(g.duration)}}return f.animate(c,a)},doAnimationFrame:function(){var f=this,c=f.activeEasingX,b=f.activeEasingY,d=Date.now(),a,g;if(!f.isAnimating){return}f.lastRun=d;if(c===null&&b===null){f.stopAnimation();return}if(c!==null){f.x=a=Math.round(c.getValue());if(c.isEnded){f.activeEasingX=null;f.fireEvent("axisanimationend",f,"x",a)}}else{a=f.x}if(b!==null){f.y=g=Math.round(b.getValue());if(b.isEnded){f.activeEasingY=null;f.fireEvent("axisanimationend",f,"y",g)}}else{g=f.y}if(f.lastX!==a||f.lastY!==g){f.doTranslate(a,g);f.lastX=a;f.lastY=g}f.fireEvent("animationframe",f,a,g)},stopAnimation:function(){var a=this;if(!a.isAnimating){return}a.activeEasingX=null;a.activeEasingY=null;a.isAnimating=false;Ext.AnimationQueue.stop(a.doAnimationFrame,a);a.fireEvent("animationend",a,a.x,a.y);if(a.callback){a.callback.call(a.callbackScope);a.callback=null}},refresh:function(){this.translate(this.x,this.y)},destroy:function(){if(this.isAnimating){this.stopAnimation()}Ext.Evented.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.util.translatable,"Abstract"],0));(Ext.cmd.derive("Ext.util.translatable.Dom",Ext.util.translatable.Abstract,{config:{element:null},applyElement:function(a){if(!a){return}return Ext.get(a)},updateElement:function(){this.refresh()}},0,0,0,0,0,0,[Ext.util.translatable,"Dom"],0));(Ext.cmd.derive("Ext.util.translatable.CssTransform",Ext.util.translatable.Dom,{doTranslate:function(a,c){var b=this.getElement();if(!this.destroyed&&!b.destroyed){b.translate(a,c)}},destroy:function(){var a=this.getElement();if(a&&!a.destroyed){a.dom.style.webkitTransform=null}Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,"CssTransform"],0));(Ext.cmd.derive("Ext.util.translatable.ScrollPosition",Ext.util.translatable.Dom,{type:"scrollposition",config:{useWrapper:true},getWrapper:function(){var c=this.wrapper,b=this.getElement(),a;if(!c){a=b.getParent();if(!a){return null}if(a.hasCls("x-translatable-hboxfix")){a=a.getParent()}if(this.getUseWrapper()){c=b.wrap()}else{c=a}b.addCls("x-translatable");c.addCls("x-translatable-container");this.wrapper=c;c.on("painted",function(){if(!this.isAnimating){this.refresh()}},this);this.refresh()}return c},doTranslate:function(a,d){var c=this.getWrapper(),b;if(c){b=c.dom;if(typeof a=="number"){b.scrollLeft=500000-a}if(typeof d=="number"){b.scrollTop=500000-d}}},destroy:function(){var b=this,a=b.getElement(),c=b.wrapper;if(c){if(!a.destroyed){if(b.getUseWrapper()){c.doReplaceWith(a)}a.removeCls("x-translatable")}if(!c.destroyed){c.removeCls("x-translatable-container");c.un("painted","refresh",b)}delete b.wrapper;delete b._element}Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,"ScrollPosition"],0));(Ext.cmd.derive("Ext.util.translatable.ScrollParent",Ext.util.translatable.Dom,{isScrollParent:true,applyElement:function(a){var b=Ext.get(a);if(b){this.parent=b.parent()}return b},doTranslate:function(a,c){var b=this.parent;b.setScrollLeft(Math.round(-a));b.setScrollTop(Math.round(-c))},getPosition:function(){var c=this,a=c.position,b=c.parent;a.x=b.getScrollLeft();a.y=b.getScrollTop();return a}},0,0,0,0,0,0,[Ext.util.translatable,"ScrollParent"],0));(Ext.cmd.derive("Ext.util.translatable.CssPosition",Ext.util.translatable.Dom,{doTranslate:function(a,c){var b=this.getElement().dom.style;if(typeof a=="number"){b.left=a+"px"}if(typeof c=="number"){b.top=c+"px"}},destroy:function(){var a=this.getElement().dom.style;a.left=null;a.top=null;Ext.util.translatable.Dom.prototype.destroy.call(this)}},0,0,0,0,0,0,[Ext.util.translatable,"CssPosition"],0));(Ext.cmd.derive("Ext.util.Translatable",Ext.Base,{constructor:function(a){var b=Ext.util.translatable;switch(Ext.browser.getPreferredTranslationMethod(a)){case"scrollposition":return new b.ScrollPosition(a);case"scrollparent":return new b.ScrollParent(a);case"csstransform":return new b.CssTransform(a);case"cssposition":return new b.CssPosition(a)}}},1,0,0,0,0,0,[Ext.util,"Translatable"],0));(Ext.cmd.derive("Ext.scroll.Indicator",Ext.Widget,{config:{axis:null,hideAnimation:true,hideDelay:0,scroller:null,minLength:24},defaultHideAnimation:{to:{opacity:0},duration:300},names:{x:{side:"l",getSize:"getHeight",setLength:"setWidth",translate:"translateX"},y:{side:"t",getSize:"getWidth",setLength:"setHeight",translate:"translateY"}},oppositeAxis:{x:"y",y:"x"},cls:"x-scroll-indicator",applyHideAnimation:function(a){if(a){a=Ext.mergeIf({onEnd:this.onHideAnimationEnd,scope:this},this.defaultHideAnimation,a)}return a},constructor:function(a){var c=this,b;Ext.Widget.prototype.constructor.call(this,a);b=c.getAxis();c.names=c.names[b];c.element.addCls(c.cls+" "+c.cls+"-"+b)},hide:function(){var b=this,a=b.getHideDelay();if(a){b._hideTimer=Ext.defer(b.doHide,a,b)}else{b.doHide()}},setValue:function(r){var p=this,c=p.element,o=p.names,d=p.getAxis(),j=p.getScroller(),h=j.getMaxUserPosition()[d],s=j.getElementSize()[d],m=p.length,b=p.getMinLength(),a=m,g=s-m-p.sizeAdjust,t=Math.round,q=Math.max,f;if(r<0){a=t(q(m+(m*r/s),b));f=0}else{if(r>h){a=t(q(m-(m*(r-h)/s),b));f=g+m-a}else{f=t(r/h*g)}}p[o.translate](f);c[o.setLength](a)},show:function(){var b=this,a=b.element,c=a.getActiveAnimation();if(c){c.end()}if(!b._inDom){b.getScroller().getElement().appendChild(a);b._inDom=true;if(!b.size){b.cacheStyles()}}b.refreshLength();clearTimeout(b._hideTimer);a.setStyle("opacity","")},privates:{cacheStyles:function(){var b=this,a=b.element,c=b.names;b.size=a[c.getSize]();b.margin=a.getMargin(c.side)},doHide:function(){var b=this.getHideAnimation(),a=this.element;if(b){a.animate(b)}else{a.setStyle("opacity",0)}},hasOpposite:function(){return this.getScroller().isAxisEnabled(this.oppositeAxis[this.getAxis()])},onHideAnimationEnd:function(){this.element.setStyle("opacity","0")},refreshLength:function(){var m=this,j=m.names,d=m.getAxis(),g=m.getScroller(),a=g.getSize()[d],o=g.getElementSize()[d],h=o/a,c=m.margin*2,f=m.hasOpposite()?(c+m.size):c,b=Math.max(Math.round((o-f)*h),m.getMinLength());m.sizeAdjust=f;m.length=b;m.element[j.setLength](b)},translateX:function(a){this.element.translate(a)},translateY:function(a){this.element.translate(0,a)}}},1,["scrollindicator"],["widget","scrollindicator"],{widget:true,scrollindicator:true},["widget.scrollindicator"],0,[Ext.scroll,"Indicator"],0));(Ext.cmd.derive("Ext.scroll.TouchScroller",Ext.scroll.Scroller,{isTouchScroller:true,config:{autoRefresh:true,bounceEasing:{duration:400},elementSize:undefined,indicators:true,fps:"auto",maxAbsoluteVelocity:6,momentumEasing:{momentum:{acceleration:30,friction:0.5},bounce:{acceleration:30,springTension:0.3},minVelocity:1},outOfBoundRestrictFactor:0.5,innerElement:null,size:undefined,slotSnapEasing:{duration:150},slotSnapOffset:{x:0,y:0},startMomentumResetTime:300,translatable:{translationMethod:"auto",useWrapper:false}},cls:"x-scroll-container",scrollerCls:"x-scroll-scroller",dragStartTime:0,dragEndTime:0,isDragging:false,isAnimating:false,isMouseEvent:{mousedown:1,mousemove:1,mouseup:1},listenerMap:{touchstart:"onTouchStart",touchmove:"onTouchMove",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd"},refreshCounter:0,constructor:function(a){var b=this,c="onEvent";b.elementListeners={touchstart:c,touchmove:c,dragstart:c,drag:c,dragend:c,scope:b};b.minPosition={x:0,y:0};b.startPosition={x:0,y:0};b.velocity={x:0,y:0};b.isAxisEnabledFlags={x:false,y:false};b.flickStartPosition={x:0,y:0};b.flickStartTime={x:0,y:0};b.lastDragPosition={x:0,y:0};b.dragDirection={x:0,y:0};Ext.scroll.Scroller.prototype.constructor.call(this,a);b.refreshAxes();b.scheduleRefresh={idle:b.doRefresh,scope:b,single:true,destroyable:true}},applyBounceEasing:function(b){var a=Ext.fx.easing.EaseOut;return{x:Ext.factory(b,a),y:Ext.factory(b,a)}},applyElementSize:function(b){var c=this.getElement(),d,a,f;if(!c){return null}d=c.dom;if(!d){return}if(b==null){a=d.clientWidth;f=d.clientHeight}else{a=b.x;f=b.y}return{x:a,y:f}},applyIndicators:function(g,c){var f=this,b,d,a,h;if(g){if(g===true){b=d={}}else{a=g.x;h=g.y;if(a||h){b=(a==null||a===true)?{}:a;d=(a==null||h===true)?{}:h}else{b=d=g}}if(c){if(b){c.x.setConfig(b)}else{c.x.destroy();c.x=null}if(d){c.y.setConfig(d)}else{c.y.destroy();c.y=null}g=c}else{g={x:null,y:null};if(b){g.x=new Ext.scroll.Indicator(Ext.applyIf({axis:"x",scroller:f},b))}if(d){g.y=new Ext.scroll.Indicator(Ext.applyIf({axis:"y",scroller:f},d))}}}else{if(c){if(c.x){c.x.destroy()}if(c.y){c.y.destroy()}c.x=c.y=null}}return g},applyMomentumEasing:function(b){var a=Ext.fx.easing.BoundMomentum;return{x:Ext.factory(b,a),y:Ext.factory(b,a)}},applyInnerElement:function(a){if(a&&!a.isElement){a=Ext.get(a)}return a},applyMaxPosition:function(c,d){if(d&&c.x===d.x&&c.y===d.y){return}var a=this.getTranslatable(),b;if(a.isAnimating){b=a.activeEasingY;if(b&&b.getStartVelocity&&b.getStartVelocity()<0&&c.y<d.y){b.setMinMomentumValue(-c.y)}}return c},applyMaxUserPosition:function(b,a){if(a&&b.x===a.x&&b.y===a.y){return}return b},applySize:function(b){var c=this.getElement(),f,d,a,g;if(typeof b==="number"){a=b;g=b}else{if(b){a=b.x;g=b.y}}if(c&&(a==null||g==null)){f=c.dom;d=this.getInnerElement().dom;if(a==null){a=Math.max(d.scrollWidth,f.clientWidth)}if(g==null){g=Math.max(d.scrollHeight,f.clientHeight)}}return{x:a,y:g}},applySlotSnapOffset:function(a){if(typeof a==="number"){a={x:a,y:a}}return a},applySlotSnapSize:function(a){if(typeof a==="number"){a={x:a,y:a}}return a},applySlotSnapEasing:function(b){var a=Ext.fx.easing.EaseOut;return{x:Ext.factory(b,a),y:Ext.factory(b,a)}},applyTranslatable:function(b,a){return Ext.factory(b,Ext.util.Translatable,a)},destroy:function(){var c=this,b=c.getElement(),d=c.getInnerElement(),a=c.sizeMonitors;if(a){a.element.destroy();a.container.destroy()}if(b&&!b.destroyed){b.removeCls(c.cls)}if(d&&!d.destroyed){d.removeCls(c.scrollerCls)}if(c._isWrapped){if(!b.destroyed){c.unwrapContent()}d.destroy()}c.setElement(null);c.setInnerElement(null);c.setIndicators(null);Ext.destroy(c.getTranslatable());Ext.scroll.Scroller.prototype.destroy.call(this)},refresh:function(a,b){var c=this;++c.refreshCounter;if(a){c.doRefresh(b)}else{if(!c.refreshScheduled){c.scheduleRefresh.args=[b];c.refreshScheduled=Ext.on(c.scheduleRefresh)}}},updateAutoRefresh:function(a){this.toggleResizeListeners(a)},updateBounceEasing:function(a){this.getTranslatable().setEasingX(a.x).setEasingY(a.y)},updateElementSize:function(){if(!this.isConfiguring){this.refreshAxes()}},updateDisabled:function(a){if(!this.isConfiguring){if(a){this.detachListeners()}else{this.attachListeners()}}},updateElement:function(c,b){var f=this,g=f.getInnerElement(),d,a;if(!g){g=c.dom.firstChild;if(!g||g.nodeType!==1||!Ext.fly(g).hasCls(f.scrollerCls)){g=f.wrapContent(c)}f.setInnerElement(g)}c.addCls(f.cls);if(f.isConfiguring){if(!f.getTranslatable().isScrollParent){c.dom.style.overflowX=c.dom.style.overflowY="";d=f.elementListeners;d.mousewheel="onMouseWheel";d.scroll={fn:"onElementScroll",delegated:false,scope:f}}}if(!f.getDisabled()){f.attachListeners()}if(!f.isConfiguring){a=f.getAutoRefresh();if(a!==false){f.toggleResizeListeners(a);if(a){f.refresh()}else{if(a===null){f.setElementSize(null)}}}}},updateFps:function(a){if(a!=="auto"){this.getTranslatable().setFps(a)}},updateMaxUserPosition:function(){this.snapToBoundary()},updateMinUserPosition:function(){this.snapToBoundary()},updateInnerElement:function(a){if(a){a.addCls(this.scrollerCls)}this.getTranslatable().setElement(a)},updateSize:function(a){if(!this.isConfiguring){if(Ext.supports.touchScroll===1){Ext.scroll.Scroller.prototype.updateSize.call(this,a)}this.refreshAxes()}},updateTranslatable:function(a){a.setElement(this.getInnerElement());if(!a.isScrollParent){a.on({animationframe:"onAnimationFrame",animationend:"onAnimationEnd",scope:this})}},updateX:function(){if(!this.isConfiguring){this.refreshAxes()}},updateY:function(){if(!this.isConfiguring){this.refreshAxes()}},privates:{attachListeners:function(){this.getElement().on(this.elementListeners)},constrainX:function(a){return Math.min(this.getMaxPosition().x,Math.max(a,0))},constrainY:function(a){return Math.min(this.getMaxPosition().y,Math.max(a,0))},convertEasingConfig:function(a){return a},detachListeners:function(){this.getElement().un(this.elementListeners)},doRefresh:function(b){var d=this,c,a;if(d.refreshScheduled){d.refreshScheduled=d.refreshScheduled.destroy()}if(d.refreshCounter&&d.getElement()){d.stopAnimation();d.getTranslatable().refresh();if(b){c=b.size;a=b.elementSize}d.setSize(c);d.setElementSize(a);d.fireEvent("refresh",d);d.refreshCounter=0}},doScrollTo:function(o,m,b,g){var j=this,h=j.isDragging,p=j.getTranslatable().isScrollParent,a=!j.isReflecting&&!p;if(j.destroyed||!j.getElement()){return j}g=g||j.isDragging;var q=j.getTranslatable(),c=j.position,r=false,f,d;if(!h||j.isAxisEnabled("x")){if(isNaN(o)||typeof o!=="number"){o=c.x}else{if(!g){o=j.constrainX(o)}if(c.x!==o){c.x=o;r=true}}f=j.convertX(-o)}if(!h||j.isAxisEnabled("y")){if(isNaN(m)||typeof m!=="number"){m=c.y}else{if(!g){m=j.constrainY(m)}if(c.y!==m){c.y=m;r=true}}d=-m}if(r){if(a){j.onScrollStart()}if(b){q.translateAnimated(f,d,b)}else{if(!p){j.onScroll()}q.translate(f,d);if(a){j.onScrollEnd()}}}else{if(b&&b.callback){b.callback()}}return j},getAnimationEasing:function(h,o){if(!this.isAxisEnabled(h)){return null}var q=this,g=q.position[h],d=q.getMinUserPosition()[h],m=q.getMaxUserPosition()[h],b=q.getMaxAbsoluteVelocity(),f=null,c=q.dragEndTime,j=o.flick.velocity[h],r=h==="x",a,p;if(g<d){f=d}else{if(g>m){f=m}}if(r){g=q.convertX(g);f=q.convertX(f)}if(f!==null){p=q.getBounceEasing()[h];p.setConfig({startTime:c,startValue:-g,endValue:-f});return p}if(j===0){return null}if(j<-b){j=-b}else{if(j>b){j=b}}p=q.getMomentumEasing()[h];a={startTime:c,startValue:-g,startVelocity:j*1.5,minMomentumValue:-m,maxMomentumValue:0};if(r){q.convertEasingConfig(a)}p.setConfig(a);return p},getSnapPosition:function(c){var d=this,j=d.getSlotSnapSize()[c],f=null,a,h,g,b;if(j!==0&&d.isAxisEnabled(c)){a=d.position[c];h=d.getSlotSnapOffset()[c];g=d.getMaxUserPosition()[c];b=Math.floor((a-h)%j);if(b!==0){if(a!==g){if(Math.abs(b)>j/2){f=Math.min(g,a+((b>0)?j-b:b-j))}else{f=a-b}}else{f=a-b}}}return f},hideIndicators:function(){var c=this,d=c.getIndicators(),a,b;if(d){if(c.isAxisEnabled("x")){a=d.x;if(a){a.hide()}}if(c.isAxisEnabled("y")){b=d.y;if(b){b.hide()}}}},isAxisEnabled:function(a){this.getX();this.getY();return this.isAxisEnabledFlags[a]},onAnimationEnd:function(){this.snapToBoundary();this.onScrollEnd()},onAnimationFrame:function(c,b,d){var a=this.position;a.x=this.convertX(-b);a.y=-d;this.onScroll()},onAxisDrag:function(d,u){if(u&&this.isAxisEnabled(d)){var v=this,p=v.flickStartPosition,w=v.flickStartTime,m=v.lastDragPosition,r=v.dragDirection,a=v.position[d],s=v.getMinUserPosition()[d],t=v.getMaxUserPosition()[d],h=v.startPosition[d],o=m[d],q=h-u,j=r[d],g=v.getOutOfBoundRestrictFactor(),b=v.getStartMomentumResetTime(),c=Ext.Date.now(),f;if(q<s){q*=g}else{if(q>t){f=q-t;q=t+f*g}}if(q>o){r[d]=1}else{if(q<o){r[d]=-1}}if((j!==0&&(r[d]!==j))||(c-w[d])>b){p[d]=a;w[d]=c}m[d]=q;return true}},onDomScroll:function(){var b=this,c,a;if(b.getTranslatable().isScrollParent){c=b.getElement().dom;a=b.position;a.x=c.scrollLeft;a.y=c.scrollTop}Ext.scroll.Scroller.prototype.onDomScroll.call(this)},onDrag:function(c){var a=this,b=a.lastDragPosition;if(!a.isDragging){return}if(a.onAxisDrag("x",a.convertX(c.deltaX))|a.onAxisDrag("y",c.deltaY)){a.doScrollTo(b.x,b.y)}},onDragEnd:function(d){var c=this,b,a;if(!c.isDragging){return}c.dragEndTime=Ext.Date.now();c.onDrag(d);c.isDragging=false;b=c.getAnimationEasing("x",d);a=c.getAnimationEasing("y",d);if(b||a){c.getTranslatable().animate(b,a)}else{c.onScrollEnd()}},onDragStart:function(p){var q=this,t=q.getDirection(),g=p.absDeltaX,f=p.absDeltaY,o=q.getDirectionLock(),j=q.startPosition,d=q.flickStartPosition,m=q.flickStartTime,h=q.lastDragPosition,c=q.position,b=q.dragDirection,s=c.x,r=c.y,a=Ext.Date.now();if(o&&t!=="both"){if((t==="horizontal"&&g>f)||(t==="vertical"&&f>g)){p.stopPropagation()}else{return}}h.x=s;h.y=r;d.x=s;d.y=r;j.x=s;j.y=r;m.x=a;m.y=a;b.x=0;b.y=0;q.dragStartTime=a;q.isDragging=true;if(!q.isScrolling){q.onScrollStart()}},onElementResize:function(a,b){this.refresh(true,{elementSize:{x:b.contentWidth,y:b.contentHeight},size:this.getAutoRefresh()?null:this.getSize()})},onElementScroll:function(a,b){b.scrollTop=b.scrollLeft=0},onEvent:function(b){var a=this,c=b.browserEvent;if((!a.self.isTouching||a.isTouching)&&((!a.getTranslatable().isScrollParent)||(!a.isMouseEvent[c.type]&&c.pointerType!=="mouse"))&&(a.getY()||a.getX())){a[a.listenerMap[b.type]](b)}},onInnerElementResize:function(a,b){this.refresh(true,{size:{x:b.width,y:b.height}})},onMouseWheel:function(m){var o=this,q=m.getWheelDeltas(),d=-q.x,b=-q.y,g=o.position,f=o.getMaxUserPosition(),a=o.getMinUserPosition(),p=Math.max,c=Math.min,j=p(c(g.x+d,f.x),a.x),h=p(c(g.y+b,f.y),a.y);d=j-g.x;b=h-g.y;if(!d&&!b){return}m.stopEvent();o.onScrollStart();o.scrollBy(d,b);o.onScroll();o.onScrollEnd()},onPartnerScrollEnd:function(a,c){var b=this;if(!b.getTranslatable().isScrollParent){b.fireScrollEnd(a,c)}Ext.scroll.Scroller.prototype.onPartnerScrollEnd.call(this,a,c);b.isScrolling=false;b.hideIndicators()},onPartnerScrollStart:function(a,c){var b=this;b.isScrolling=true;if(!b.getTranslatable().isScrollParent){b.fireScrollStart(a,c)}b.showIndicators()},onScroll:function(){var f=this,c=f.position,b=c.x,h=c.y,g=f.getIndicators(),a,d;if(g){if(f.isAxisEnabled("x")){a=g.x;if(a){a.setValue(b)}}if(f.isAxisEnabled("y")){d=g.y;if(d){d.setValue(h)}}}f.fireScroll(b,h)},onScrollEnd:function(){var b=this,a=b.position;if(b.isScrolling&&!b.isTouching&&!b.snapToSlot()){b.hideIndicators();b.isScrolling=Ext.isScrolling=false;b.fireScrollEnd(a.x,a.y)}},onScrollStart:function(){var b=this,a=b.position;if(!b.isScrolling){b.showIndicators();b.isScrolling=Ext.isScrolling=true;b.fireScrollStart(a.x,a.y)}},onTouchEnd:function(){var a=this;a.isTouching=a.self.isTouching=false;if(!a.isDragging&&a.snapToSlot()){a.onScrollStart()}},onTouchMove:function(a){a.preventDefault()},onTouchStart:function(){var a=this;a.isTouching=a.self.isTouching=true;Ext.getDoc().on({touchend:"onTouchEnd",scope:a,single:true});a.stopAnimation()},refreshAxes:function(){var f=this,c=f.isAxisEnabledFlags,p=f.getSize(),o=f.getElementSize(),m=f.getIndicators(),b,a,j,h,d,g;if(!p||!o){return}b=Math.max(0,p.x-o.x);a=Math.max(0,p.y-o.y);j=f.getX();h=f.getY();f.setMaxPosition({x:b,y:a});if(j===true||j==="auto"){c.x=!!b}else{if(j===false){c.x=false;d=m&&m.x;if(d){d.hide()}}else{if(j==="scroll"){c.x=true}}}if(h===true||h==="auto"){c.y=!!a}else{if(h===false){c.y=false;g=m&&m.y;if(g){g.hide()}}else{if(h==="scroll"){c.y=true}}}f.setMaxUserPosition({x:c.x?b:0,y:c.y?a:0});if(Ext.supports.touchScroll===1){f.initXStyle();f.initYStyle()}},showIndicators:function(){var c=this,d=c.getIndicators(),a,b;if(d){if(c.isAxisEnabled("x")){a=d.x;if(a){a.show()}}if(c.isAxisEnabled("y")){b=d.y;if(b){b.show()}}}},snapToBoundary:function(){var j=this,h=j.getPosition();if(j.isConfiguring||!(h.x||h.y)){return}var c=j.getMinUserPosition(),g=j.getMaxUserPosition(),f=c.x,d=c.y,b=g.x,a=g.y,o=Math.round(h.x),m=Math.round(h.y);if(o<f){o=f}else{if(o>b){o=b}}if(m<d){m=d}else{if(m>a){m=a}}j.doScrollTo(o,m)},snapToSlot:function(){var a=this,c=a.getSnapPosition("x"),b=a.getSnapPosition("y"),d=a.getSlotSnapEasing();if(c!==null||b!==null){a.doScrollTo(c,b,{easingX:d.x,easingY:d.y});return true}return false},stopAnimation:function(){this.getTranslatable().stopAnimation()},toggleResizeListeners:function(a){var c=this,b=c.getElement(),g,f,d;if(b){d=c.getInnerElement();if(a){g=f="on"}else{if(a===null){g="on";f="un"}else{g=f="un"}}b[g]("resize","onElementResize",c);d[f]("resize","onInnerElementResize",c)}},unwrapContent:function(){var a=this.getInnerElement().dom,b=this.getElement().dom,c;while((c=a.firstChild)){b.insertBefore(c,a)}},wrapContent:function(a){var b=document.createElement("div"),c=a.dom,d;while(d=c.lastChild){b.insertBefore(d,b.firstChild)}c.appendChild(b);this.setInnerElement(b);this._isWrapped=true;return this.getInnerElement()}}},1,0,0,0,["scroller.touch"],0,[Ext.scroll,"TouchScroller"],0));(Ext.cmd.derive("Ext.scroll.DomScroller",Ext.scroll.Scroller,{isDomScroller:true,getMaxPosition:function(){var b=this.getElement(),a=0,d=0,c;if(b&&!b.destroyed){c=b.dom;a=c.scrollWidth-c.clientWidth;d=c.scrollHeight-c.clientHeight}return{x:a,y:d}},getMaxUserPosition:function(){var c=this,b=c.getElement(),a=0,f=0,d;if(b&&!b.destroyed){d=b.dom;if(c.getX()){a=d.scrollWidth-d.clientWidth}if(c.getY()){f=d.scrollHeight-d.clientHeight}}return{x:a,y:f}},getPosition:function(){var a=this;if(a.positionDirty){a.updateDomScrollPosition()}return a.position},getSize:function(){var b=this.getElement(),a,c;if(b&&!b.destroyed){c=b.dom;a={x:c.scrollWidth,y:c.scrollHeight}}else{a={x:0,y:0}}return a},updateElement:function(b,a){this.initXStyle();this.initYStyle()},updateX:function(a){this.initXStyle()},updateY:function(a){this.initYStyle()},privates:{doScrollTo:function(m,j,a){var h=this,d=h.getElement(),f,b,o,p,g,c;if(d&&!d.destroyed){b=d.dom;p=(m===Infinity);g=(j===Infinity);if(p||g){f=h.getMaxPosition();if(p){m=f.x}if(g){j=f.y}}m=h.convertX(m);if(a){o={};if(j!=null){o.scrollTop=j}if(m!=null){o.scrollLeft=m}d.animate(Ext.mergeIf({to:{scrollTop:j,scrollLeft:m}},a))}else{if(j!=null){b.scrollTop=j}if(m!=null){b.scrollLeft=m;if(Ext.isIE8){c=b.scrollLeft;b.scrollLeft=m}}}h.positionDirty=true}},getElementScroll:function(a){return a.getScroll()},stopAnimation:function(){var a=this.getElement().getActiveAnimation();if(a){a.end()}}}},0,0,0,0,["scroller.dom"],0,[Ext.scroll,"DomScroller"],function(a){Ext.onDocumentReady(function(){a.document=new a({x:true,y:true,element:document.body})})}));(Ext.cmd.derive("Ext.util.Floating",Ext.Base,{mixinId:"floating",focusOnToFront:true,shadow:"sides",animateShadow:false,constrain:false,config:{activeCounter:0,alwaysOnTop:false},preventDefaultAlign:false,_visModeMap:{visibility:1,display:2,offsets:3},constructor:function(){var d=this,c=d.el,f=d.shadow,a,b;if(f){b={mode:(f===true)?"sides":f};a=d.shadowOffset;if(a){b.offset=a}b.animate=d.animateShadow;b.fixed=d.fixed;c.enableShadow(b,false)}if(d.shim||Ext.useShims){c.enableShim({fixed:d.fixed},false)}c.setVisibilityMode(d._visModeMap[d.hideMode]);d.el.on({mousedown:d.onMouseDown,scope:d,capture:true});d.registerWithOwnerCt();d.initHierarchyEvents()},alignTo:function(c,a,g,d){var f=this,b;Ext.un("scroll",f.onAlignToScroll,f);if(c.isComponent){b=c.el}else{if(c.nodeType){b=Ext.fly(c)}else{b=c}}if(!b.contains(f.el)){Ext.on("scroll",f.onAlignToScroll,f)}f._lastAlignTarget=c;f._lastAlignToPos=a;f.mixins.positionable.alignTo.call(f,b,a,g,d)},initFloatConstrain:function(){var a=this,b=a.floatParent;if((a.constrain||a.constrainHeader)&&!a.constrainTo){a.constrainTo=b?b.getTargetEl():a.container}},initHierarchyEvents:function(){var b=this,a=this.syncHidden;if(!b.hasHierarchyEventListeners){b.mon(Ext.GlobalEvents,{hide:a,collapse:a,show:a,expand:a,added:a,scope:b});b.hasHierarchyEventListeners=true}},registerWithOwnerCt:function(){var c=this,b=c.ownerCt,a=c.zIndexParent;if(a){a.unregisterFloatingItem(c)}a=c.zIndexParent=c.up("[floating]");c.floatParent=b||a;c.initFloatConstrain();delete c.ownerCt;if(a){a.registerFloatingItem(c)}else{Ext.WindowManager.register(c)}},onMouseDown:function(f){var b=this,a=b.focusTask,c=f.pointerType==="touch",d,g,h;if(b.floating&&(!a||!a.id)){d=f.target;g=b.el.dom;while(!c&&d&&d!==g){if(Ext.fly(d).isFocusable()){c=true}d=d.parentNode}h=Ext.WindowManager.getActive()===b&&(d===g||c);if(!h){b.toFront(c)}}},onBeforeFloatLayout:function(){this.el.preventSync=true},onAfterFloatLayout:function(){var a=this.el;if(a.shadow||a.shim){a.setUnderlaysVisible(true);a.syncUnderlays()}},syncHidden:function(){var c=this,d=c.hidden||!c.rendered,a=c.hierarchicallyHidden=c.isHierarchicallyHidden(),b=c.pendingShow;if(d!==a){if(a){c.hide();c.pendingShow=true}else{if(b){delete c.pendingShow;if(b.length){c.show.apply(c,b)}else{c.show()}}}}},setZIndex:function(a){var b=this;b.el.setZIndex(a);a+=10;if(b.floatingDescendants){a=Math.floor(b.floatingDescendants.setBase(a)/100)*100+10000}return a},doConstrain:function(a){var b=this,c=b.calculateConstrainedPosition(a,null,true);if(c){b.setPosition(c)}},updateActiveCounter:function(a){var b=this.zIndexParent;if(b&&this.bringParentToFront!==false){b.setActiveCounter(++Ext.ZIndexManager.activeCounter)}b=this.zIndexManager;if(b){b.onComponentUpdate(this)}},updateAlwaysOnTop:function(a){var b=this.zIndexManager;if(b){b.onComponentUpdate(this)}},toFront:function(b){var a=this;if(a.zIndexManager.bringToFront(a,b||!a.focusOnToFront)){if(a.hasListeners.tofront){a.fireEvent("tofront",a,a.el.getZIndex())}}return a},setActive:function(d,b){var c=this,a;if(d){if(c.el.shadow&&!c.maximized){c.el.enableShadow(null,true)}if(b){a=Ext.ComponentManager.getActiveComponent();if(!a||!a.up(c)){c.focus()}}c.fireEvent("activate",c)}else{c.fireEvent("deactivate",c)}},toBack:function(){this.zIndexManager.sendToBack(this);return this},center:function(){var a=this,b;if(a.isVisible()){b=a.getAlignToXY(a.container,"c-c");a.setPagePosition(b)}else{a.needsCenter=true}return a},onFloatShow:function(){if(this.needsCenter){this.center()}delete this.needsCenter;if(this.toFrontOnShow){this.toFront()}},fitContainer:function(c){var g=this,f=g.floatParent,b=f?f.getTargetEl():g.container,a=b.getViewSize(),d=f||(b.dom!==document.body)?[0,0]:b.getXY();a.x=d[0];a.y=d[1];g.setBox(a,c)},privates:{onFloatDestroy:function(){this.clearAlignEl()},clearAlignEl:function(){var a=this;if(a._lastAlignTarget){Ext.un("scroll",a.onAlignToScroll,a);a._lastAlignPos=a._lastAlignTarget=null}},onAlignToScroll:function(a){var f=this,b=f._lastAlignTarget,c=b.isFloating,d,g;if(b){if(b.isComponent){d=b.destroyed;b=b.el}else{if(b.nodeType){b=Ext.fly(b)}g=b.dom;d=!g||Ext.isGarbage(g)}if(d){f.clearAlignEl()}else{if((a.getElement().contains(b)||c)&&!a.getElement().contains(f.el)){f.alignTo(b,f._lastAlignToPos)}}}}}},1,0,0,0,0,0,[Ext.util,"Floating"],0));(Ext.cmd.derive("Ext.util.ElementContainer",Ext.Base,{mixinId:"elementCt",config:{childEls:{$value:{},cached:true,lazy:true,merge:function(g,a,f,d){var c=a?Ext.Object.chain(a):{},b,h;if(g instanceof Array){for(b=g.length;b--;){h=g[b];if(!d||!(h in c)){if(typeof h==="string"){c[h]={name:h,itemId:h}}else{c[h.name]=h}}}}else{if(g){if(g.constructor===Object){for(b in g){if(!d||!(b in c)){h=g[b];if(h===true){c[b]={itemId:b}}else{if(typeof h==="string"){c[b]={itemId:h}}else{c[b]=h;if(!("itemId" in h)){h.itemId=b}}}c[b].name=b}}}else{if(!d||!(g in c)){c[g]={name:g,itemId:g}}}}}return c}}},destroy:function(){var c=this,b=c.getChildEls(),d,a;for(a in b){d=c[a];if(d){if(d.destroy){d.component=null;d.destroy()}c[a]=null}}},privates:{addChildEl:function(a){var c=this,b=c.getChildEls();if(!c.hasOwnProperty("childEls")){c.childEls=b=Ext.Object.chain(b)}if(typeof a==="string"){a={name:a,itemId:a}}b[a.name]=a},afterClassMixedIn:function(c){var b=c.prototype,a=b.childEls;if(a){delete b.childEls;c.getConfigurator().add({childEls:a})}},attachChildEls:function(d,c){var j=this,m=j.getChildEls(),h=c||j,r=h.id+"-",q=!h.frame,s,a,p,g,f,o,b;for(s in m){p=m[s];if(q&&p.frame){continue}f=p.select;if(f){o=d.select(f,true)}else{if(!(f=p.selectNode)){if(!(b=p.id)){b=r+p.itemId;o=Ext.cache[b]}else{o=Ext.cache[b]||d.getById(b)}}else{o=d.selectNode(f,false)}}if(o){if(o.isElement){o.component=h}else{if(o.isComposite&&!o.isLite){a=o.elements;for(g=a.length;g--;){a[g].component=h}}}}j[s]=o||null}}}},0,0,0,0,0,0,[Ext.util,"ElementContainer"],0));(Ext.cmd.derive("Ext.util.Renderable",Ext.Base,{mixinId:"renderable",frameCls:"x-frame",frameIdRegex:/[\-]frame\d+[TMB][LCR]$/,frameElNames:["TL","TC","TR","ML","MC","MR","BL","BC","BR","Table"],frameTpl:["{%this.renderDockedItems(out,values,0);%}",'<tpl if="top">','<tpl if="left"><div id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>",'<tpl if="left"><div id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</div>",'<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','<tpl if="bottom">','<tpl if="left"><div id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>","{%this.renderDockedItems(out,values,1);%}"],frameTableTpl:["{%this.renderDockedItems(out,values,0);%}",'<table id="{fgid}Table" data-ref="frameTable" class="{frameCls} ','x-table-plain" cellpadding="0" role="presentation">','<tpl if="top">','<tr role="presentation">','<tpl if="left"><td id="{fgid}TL" data-ref="frameTL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}TC" data-ref="frameTC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}TR" data-ref="frameTR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>",'<tr role="presentation">','<tpl if="left"><td id="{fgid}ML" data-ref="frameML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}Body" data-ref="frameBody" class="{frameBodyCls} {frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" style="{mcStyle}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</td>",'<tpl if="right"><td id="{fgid}MR" data-ref="frameMR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>",'<tpl if="bottom">','<tr role="presentation">','<tpl if="left"><td id="{fgid}BL" data-ref="frameBL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}BC" data-ref="frameBC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}BR" data-ref="frameBR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>","</table>","{%this.renderDockedItems(out,values,1);%}"],_renderState:0,ariaEl:"el",_layerCls:"x-layer",_fixedLayerCls:"x-fixed-layer",ariaStaticRoles:{presentation:true,article:true,definition:true,directory:true,document:true,img:true,heading:true,math:true,note:true,banner:true,complementary:true,contentinfo:true,navigation:true,search:true,"undefined":true,"null":true},statics:{makeRenderSetter:function(a,c){var b=a.name;return function(f){var d=this,h=(d.renderConfigs||(d.renderConfigs={})),g=h[c];if(d._renderState>=c){(a.setter||a.getSetter()).call(d,f)}else{if(!g){h[c]=g={}}if(!(b in g)){g[b]=d[b]}d[b]=f}return d}},processRenderConfig:function(a,p,c){var h=this.prototype,f=this.getConfigurator(),q=Ext.util.Renderable,o=q.makeRenderSetter,d=a[p],j,m,b,g;for(b in d){m=Ext.Config.get(b);if(!h[g=m.names.set]){j=(m.renderSetter||(m.renderSetter={}));h[g]=j[c]||(j[c]=o(m,c))}}delete a[p];f.add(d)}},onClassMixedIn:function(c){var a=c.override,f=this.processRenderConfig,d=function(g){if(g.beforeRenderConfig){this.processRenderConfig(g,"beforeRenderConfig",1)}if(g.renderConfig){this.processRenderConfig(g,"renderConfig",3)}a.call(this,g)},b=function(h,g){h.override=d;h.processRenderConfig=f;if(g.beforeRenderConfig){h.processRenderConfig(g,"beforeRenderConfig",1)}if(g.renderConfig){h.processRenderConfig(g,"renderConfig",3)}};b(c,c.prototype);c.onExtended(b)},afterRender:function(){var j=this,d={},b=j.protoEl,h=j.el,f,m,c,g,a;j.finishRenderChildren();j._renderState=4;if(j.contentEl){c="x-";g=c+"hidden-";a=j.contentEl=Ext.get(j.contentEl);a.component=j;a.removeCls([c+"hidden",g+"display",g+"offsets"]);j.getContentTarget().appendChild(a.dom)}b.writeTo(d);m=d.removed;if(m){h.removeCls(m)}m=d.cls;if(m.length){h.addCls(m)}m=d.style;if(d.style){h.setStyle(m)}j.protoEl=null;if(!j.ownerCt&&!j.skipLayout){j.updateLayout()}if(!(j.x&&j.y)&&(j.pageX||j.pageY)){j.setPagePosition(j.pageX,j.pageY)}if(j.disableOnRender){j.onDisable()}f=j.controller;if(f&&f.afterRender){f.afterRender(j)}},afterFirstLayout:function(d,p){var g=this,o=g.x,j=g.y,m=g.defaultAlign,b=g.alignOffset,f,c,a,h,q;if(!g.ownerLayout){c=o!==undefined;a=j!==undefined}if(g.floating&&!g.preventDefaultAlign&&(!c||!a)){if(g.floatParent){h=g.floatParent.getTargetEl().getViewRegion();q=g.el.getAlignToXY(g.alignTarget||g.floatParent.getTargetEl(),m,b);h.x=q[0]-h.x;h.y=q[1]-h.y}else{q=g.el.getAlignToXY(g.alignTarget||g.container,m,b);h=g.el.translateXY(q[0],q[1])}o=c?o:h.x;j=a?j:h.y;c=a=true}if(c||a){g.setPosition(o,j)}g.onBoxReady(d,p);f=g.controller;if(f&&f.boxReady){f.boxReady(g)}},beforeRender:function(){var d=this,f=d.floating,c=d.getComponentLayout(),b=d.userCls,a;d._renderState=1;d.ariaUsesMainElement=d.ariaEl==="el";a=d.controller;if(a&&a.beforeRender){a.beforeRender(d)}d.initBindable();if(d.renderConfigs){d.flushRenderConfigs()}if(d.reference){d.publishState()}if(b){d.addCls(b)}if(f){d.addCls(d.fixed?d._fixedLayerCls:d._layerCls);b=f.cls;if(b){d.addCls(b)}}d.frame=d.frame||d.alwaysFramed;if(!c.initialized){c.initLayout()}d.initOverflow();d.setUI(d.ui)},doApplyRenderTpl:function(c,a){var d=a.$comp,b;if(!d.rendered){b=d.initRenderTpl();b.applyOut(a.renderData,c)}},getElConfig:function(){var f=this,h=f.autoEl,d=f.getFrameInfo(),b={tag:"div",tpl:d?f.initFramingTpl(d.table):f.initRenderTpl()},j=f.layoutTargetCls,g=f.protoEl,a=f.ariaRole,c;f.initStyles(g);if(j&&!d){g.addCls(j)}g.writeTo(b);g.flush();if(h){if(Ext.isString(h)){b.tag=h}else{Ext.apply(b,h)}}if(a&&f.ariaUsesMainElement){b.role=a;if(!f.ariaStaticRoles[a]){b["aria-hidden"]=!!f.hidden;b["aria-disabled"]=!!f.disabled;if(f.ariaLabel&&!f.ariaLabelledBy){b["aria-label"]=f.ariaLabel}if(f.collapsible){b["aria-expanded"]=!f.collapsed}if(f.ariaRenderAttributes){Ext.apply(b,f.ariaRenderAttributes)}if(f.config.ariaAttributes){Ext.apply(b,f.getAriaAttributes())}}}b.id=f.id;if(b.tpl){if(d){b.tplData=c=f.getFrameRenderData();c.renderData=f.initRenderData()}else{b.tplData=f.initRenderData()}}f.ariaRenderAttributes=null;return b},getInsertPosition:function(a){if(a!==undefined){if(Ext.isNumber(a)){a=this.container.dom.childNodes[a]}else{a=Ext.getDom(a)}}return a},getRenderTree:function(){var b=this,a=null;if(!b.hasListeners.beforerender||b.fireEvent("beforerender",b)!==false){b._renderState=1;b.beforeRender();b.rendering=true;b._renderState=2;a=b.getElConfig();if(b.el){a.id=b.$pid=Ext.id(null,b.el.identifiablePrefix)}}return a},initRenderData:function(){var c=this,a=c.ariaRole,d,b;d=Ext.apply({$comp:c,id:c.id,ui:c.ui,uiCls:c.uiCls,baseCls:c.baseCls,componentCls:c.componentCls,frame:c.frame,renderScroller:c.touchScroll,scrollerCls:c.scrollerCls,childElCls:""},c.renderData);if(a&&!c.ariaUsesMainElement){b={role:a};if(!c.ariaStaticRoles[a]){b["aria-hidden"]=!!c.hidden;b["aria-disabled"]=!!c.disabled;if(c.ariaLabel&&!c.ariaLabelledBy){b["aria-label"]=c.ariaLabel}if(c.collapsible){b["aria-expanded"]=!c.collapsed}if(c.ariaRenderAttributes){Ext.apply(b,c.ariaRenderAttributes)}if(c.config.ariaAttributes){Ext.apply(b,c.getAriaAttributes())}}d.ariaAttributes=b}return d},onRender:function(d,f){var g=this,j=g.x,h=g.y,c=null,b=g.el,a,m;g.applyRenderSelectors();g.rendering=null;g.rendered=true;g._renderState=3;if(g.renderConfigs){g.flushRenderConfigs()}if(j!=null){c={x:j}}if(h!=null){(c=c||{}).y=h}if(!g.getFrameInfo()){a=g.width;m=g.height;if(typeof a==="number"){c=c||{};c.width=a}if(typeof m==="number"){c=c||{};c.height=m}}if(g.touchScroll===1){g.getOverflowEl().disableTouchScroll()}g.lastBox=b.lastBox=c},render:function(c,b){var f=this,d=f.el,j=f.ownerLayout,h,a,g;if(d&&!d.isElement){f.wrapPrimaryEl(d);d=f.el}if(!f.skipLayout){Ext.suspendLayouts()}c=f.initContainer(c);g=f.getInsertPosition(b);if(!d){a=f.getRenderTree();if(j&&j.transformItemRenderTree){a=j.transformItemRenderTree(a)}if(a){if(g){d=Ext.DomHelper.insertBefore(g,a)}else{d=Ext.DomHelper.append(c,a)}f.wrapPrimaryEl(d);f.cacheRefEls(d)}}else{if(!f.hasListeners.beforerender||f.fireEvent("beforerender",f)!==false){f.beforeRender();f.needsRenderTpl=f.rendering=true;f._renderState=2;f.initStyles(d);if(f.allowDomMove!==false){if(g){c.dom.insertBefore(d.dom,g)}else{c.dom.appendChild(d.dom)}}}else{h=true}}if(d&&!h){f.finishRender(b)}if(!f.skipLayout){Ext.resumeLayouts(!f.hidden&&!c.isDetachedBody)}},ensureAttachedToBody:function(c){var b=this,a;while(b.ownerCt){b=b.ownerCt}if(b.container.isDetachedBody){b.container=a=Ext.getBody();a.appendChild(b.el.dom);if(c){b.updateLayout()}if(typeof b.x==="number"||typeof b.y==="number"){b.setPosition(b.x,b.y)}}},privates:{applyRenderSelectors:function(){var d=this,b=d.renderSelectors,c=d.el,f,a;d.attachChildEls(c);d.ariaEl=d[d.ariaEl]||d.el;if(b){for(a in b){f=b[a];if(f){d[a]=c.selectNode(f,false)}}}},cacheRefEls:function(f){f=f||this.el;var c=Ext.cache,h=Ext.dom.Element,j=f.isElement?f.dom:f,b=j.querySelectorAll("[data-ref]"),a=b.length,g,d;for(d=0;d<a;d++){g=b[d];if(!c[g.id]){new h(g)}}},doAutoRender:function(){var a=this;if(!a.rendered){if(a.floating){a.render(a.renderTo||document.body)}else{a.render(Ext.isBoolean(a.autoRender)?Ext.getBody():a.autoRender)}}},doRenderContent:function(a,d){var b=d.$comp,c=b.data;if(b.html){Ext.DomHelper.generateMarkup(b.html,a);delete b.html}if(b.tpl){if(!b.tpl.isTemplate){b.tpl=new Ext.XTemplate(b.tpl)}if(c){b.data=c=c.isEntity?c.getData(true):c;b.tpl.applyOut(c,a)}}},doRenderFramingDockedItems:function(a,c,d){var b=c.$comp;if(!b.rendered&&b.doRenderDockedItems){c.renderData.$skipDockedItems=true;b.doRenderDockedItems.call(this,a,c,d)}},flushRenderConfigs:function(){var d=this,h=d.renderConfigs,g=d._renderState,j,c,b,a,f;if(h){for(c=0;c<=g;++c){j=h[c];if(j){h[c]=null;for(b in j){f=j[b];(a||(a={}))[b]=d[b];d[b]=f}}}if(a){d.setConfig(a)}}},finishRender:function(h){var o=this,a=Ext.cache,m,g,b,j,f,d,c;if(!o.el||o.$pid){if(o.container){c=a[o.id];d=c?c.dom:o.container.getById(o.id,true)}else{b=o.$pid||o.id;c=a[b];d=c?c.dom:Ext.getDom(b)}if(!o.el){o.wrapPrimaryEl(d)}else{delete o.$pid;if(!o.el.dom){o.wrapPrimaryEl(o.el)}d.parentNode.insertBefore(o.el.dom,d);m=d;d=o.el.dom;g=d.firstChild;while(m.firstChild){d.insertBefore(m.firstChild,g)}o.el.addCls(m.className);Ext.removeNode(m)}}else{if(o.needsRenderTpl){j=o.initRenderTpl();if(j){f=o.initRenderData();j.insertFirst(o.getTargetEl(),f)}o.cacheRefEls()}}o.el.component=o;if(!o.container){o.container=Ext.get(o.el.dom.parentNode)}if(o.ctCls){o.container.addCls(o.ctCls)}o.onRender(o.container,h);if(!o.overflowInited){o.initOverflow()}o.el.setVisibilityMode(Ext.Element[o.hideMode.toUpperCase()]);if(o.overCls){o.el.hover(o.addOverCls,o.removeOverCls,o)}if(o.hasListeners.render){o.fireEvent("render",o)}o.afterRender();if(o.hasListeners.afterrender){o.fireEvent("afterrender",o)}o.initEvents();if(o.hidden){o.el.hide()}},finishRenderChildren:function(){var a=this.getComponentLayout();a.finishRender()},getFrameRenderData:function(){var c=this,b=c.frameSize,a="";if(c._syncFrameHeight&&c.height){a="height:"+(c.height-b.height)+"px"}return{$comp:c,id:c.id,fgid:c.id+"-frame",ui:c.ui,uiCls:c.uiCls,frameCls:c.frameCls,frameBodyCls:c.layoutTargetCls||"",baseCls:c.baseCls,top:!!b.top,left:!!b.left,right:!!b.right,bottom:!!b.bottom,mcStyle:a,frameElCls:""}},getFrameInfo:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return false}var t=this,m=t.frameInfoCache,c=t.getFramingInfoCls()+"-frameInfo",u=m[c],j,p,h,v,d,f,o,w,s,b,q,a,g,r;if(u==null){j=Ext.fly(t.getStyleProxy(c),"frame-style-el");p=j.getStyle("font-family");if(p){p=p.split("-");h=parseInt(p[1],10);v=parseInt(p[2],10);d=parseInt(p[3],10);f=parseInt(p[4],10);o=parseInt(p[5],10);w=parseInt(p[6],10);s=parseInt(p[7],10);b=parseInt(p[8],10);q=parseInt(p[9],10);a=parseInt(p[10],10);g=parseInt(p[11],10);r=parseInt(p[12],10);u={table:p[0].charAt(0)==="t",vertical:p[0].charAt(1)==="v",top:h,right:v,bottom:d,left:f,width:f+v,height:h+d,border:{top:o,right:w,bottom:s,left:b,width:b+w,height:o+s},padding:{top:q,right:a,bottom:g,left:r,width:r+a,height:q+g}}}else{u=false}m[c]=u}t.frame=!!u;t.frameSize=u;return u},getFramingInfoCls:function(){return this.baseCls+"-"+this.ui},getStyleProxy:function(b){var a=this.styleProxyEl||(Ext.Component.prototype.styleProxyEl=Ext.getBody().createChild({role:"presentation",style:{position:"absolute",top:"-10000px"}},null,true));a.className=b;return a},getFrameTpl:function(a){return this.getTpl(a?"frameTableTpl":"frameTpl")},initContainer:function(a){var b=this;if(!a&&b.el){a=b.el.dom.parentNode;b.allowDomMove=false}b.container=a.dom?a:Ext.get(a);return b.container},initOverflow:function(){var d=this,a=d.getOverflowStyle(),g=d.scrollFlags,f=d.getOverflowEl(),c=(g.y||g.x),b=d.touchScroll=(c&&Ext.supports.touchScroll);if(!c||!f||!f.isElement){return}d.overflowInited=true;if(b===2){f.setStyle("overflow","hidden")}else{f.setStyle(a)}},doRenderPadding:function(a,c){var b=c.$comp;if(b.touchScroll){a.push("padding:",b.unitizeBox(b.padding))}},initFramingTpl:function(b){var a=this.getFrameTpl(b);if(a&&!a.applyRenderTpl){this.setupFramingTpl(a)}return a},initRenderTpl:function(){var a=this.getTpl("renderTpl");if(a&&!a.renderContent){this.setupRenderTpl(a)}return a},setupFramingTpl:function(a){a.applyRenderTpl=this.doApplyRenderTpl;a.renderDockedItems=this.doRenderFramingDockedItems},setupRenderTpl:function(a){a.renderBody=a.renderContent=this.doRenderContent;a.renderPadding=this.doRenderPadding},updateFrame:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return}var q=this,h=q.el.dom,p=q.frameTable,c=q.frameBody,s=c.dom,o=q.getFrameInfo(),t,g,b,f,m,u,v,d,j,a,r;b=document.createElement("div");u=q.getFrameRenderData();d=q.getFrameTpl(o.table);d.insertFirst(b,u);r=b.querySelectorAll("[data-ref]");a=b.querySelector('[data-ref="frameBody"]');for(m=s;m.parentNode!==h;){m=m.parentNode}while(b.firstChild){h.insertBefore(b.firstChild,m)}a.parentNode.replaceChild(s,a);s.className=a.className;c.setSize();t=q.getChildEls();if(p){p.destroy();q.frameTable=null}for(g in t){if(t[g].frame){f=q[g];if(f&&f!==c){f.destroy();q[g]=null}}}for(j=r.length;j--;){g=(v=r[j]).getAttribute("data-ref");if(g!=="frameBody"){q[g]=new Ext.dom.Element(v)}}},frameInfoCache:{}}},0,0,0,0,0,0,[Ext.util,"Renderable"],0));(Ext.cmd.derive("Ext.state.Provider",Ext.Base,{prefix:"ext-",constructor:function(a){var b=this;Ext.apply(b,a);b.state={};b.mixins.observable.constructor.call(b)},get:function(c,a){var b=this.state[c];return b===undefined?a:b},clear:function(a){var b=this;delete b.state[a];b.fireEvent("statechange",b,a,null)},set:function(a,c){var b=this;b.state[a]=c;b.fireEvent("statechange",b,a,c)},decodeValue:function(g){var c=this,o=/^(a|n|d|b|s|o|e)\:(.*)$/,b=o.exec(unescape(g)),h,d,a,m,f,j;if(!b||!b[1]){return}d=b[1];g=b[2];switch(d){case"e":return null;case"n":return parseFloat(g);case"d":return new Date(Date.parse(g));case"b":return(g==="1");case"a":h=[];if(g){m=g.split("^");f=m.length;for(j=0;j<f;j++){g=m[j];h.push(c.decodeValue(g))}}return h;case"o":h={};if(g){m=g.split("^");f=m.length;for(j=0;j<f;j++){g=m[j];a=g.split("=");h[a[0]]=c.decodeValue(a[1])}}return h;default:return g}},encodeValue:function(f){var g="",d=0,b,a,c;if(f==null){return"e:1"}else{if(typeof f==="number"){b="n:"+f}else{if(typeof f==="boolean"){b="b:"+(f?"1":"0")}else{if(Ext.isDate(f)){b="d:"+f.toUTCString()}else{if(Ext.isArray(f)){for(a=f.length;d<a;d++){g+=this.encodeValue(f[d]);if(d!==a-1){g+="^"}}b="a:"+g}else{if(typeof f==="object"){for(c in f){if(typeof f[c]!=="function"&&f[c]!==undefined){g+=c+"="+this.encodeValue(f[c])+"^"}}b="o:"+g.substring(0,g.length-1)}else{b="s:"+f}}}}}}return escape(b)}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.state,"Provider"],0));(Ext.cmd.derive("Ext.state.Manager",Ext.Base,{singleton:true,constructor:function(){this.provider=new Ext.state.Provider()},setProvider:function(a){this.provider=a},get:function(b,a){return this.provider.get(b,a)},set:function(a,b){this.provider.set(a,b)},clear:function(a){this.provider.clear(a)},getProvider:function(){return this.provider}},1,0,0,0,0,0,[Ext.state,"Manager"],0));(Ext.cmd.derive("Ext.state.Stateful",Ext.Base,{mixinId:"state",stateful:false,saveDelay:100,constructor:function(){var a=this;if(!a.stateEvents){a.stateEvents=[]}if(a.stateful!==false){a.addStateEvents(a.stateEvents);a.initState()}},addStateEvents:function(d){var g=this,c,f,b,a;if(g.stateful&&g.getStateId()){a=(typeof d==="string")?arguments:d;b=g.stateEventsByName||(g.stateEventsByName={});for(c=a.length;c--;){f=a[c];if(f&&!b[f]){b[f]=1;g.on(f,g.onStateChange,g)}}}},onStateChange:function(){var c=this,a=c.saveDelay,d,b;if(!c.stateful){return}if(a){if(!c.stateTask){d=Ext.state.Stateful;b=d.runner||(d.runner=new Ext.util.TaskRunner());c.stateTask=b.newTask({run:c.saveState,scope:c,interval:a,repeat:1,fireIdleEvent:false})}c.stateTask.start()}else{c.saveState()}},saveState:function(){var j=this,b=j.stateful&&j.getStateId(),h=j.hasListeners,c,f,d,g,a,m;if(b){a=j.getState()||{};c=j.getPlugins()||[];for(d=0,g=c.length;d<g;d++){f=c[d];if(f&&f.getState){m=f.getState(a);if(m&&!a[f.ptype]){a[f.ptype]=m}}}if(!h.beforestatesave||j.fireEvent("beforestatesave",j,a)!==false){Ext.state.Manager.set(b,a);if(h.statesave){j.fireEvent("statesave",j,a)}}}},getState:function(){return null},applyState:function(a){if(a){Ext.apply(this,a)}},getStateId:function(){var a=this;return a.stateId||(a.autoGenId?null:a.id)},initState:function(){var m=this,b=m.stateful&&m.getStateId(),j=m.hasListeners,a,o,f,h,d,g,c;if(b){o=Ext.state.Manager.get(b);if(o){a=Ext.apply({},o);if(!j.beforestaterestore||m.fireEvent("beforestaterestore",m,o)!==false){d=m.getPlugins()||[];for(f=0,h=d.length;f<h;f++){g=d[f];if(g){c=g.ptype;if(g.applyState){g.applyState(a[c],o)}delete a[c]}}m.applyState(a);if(j.staterestore){m.fireEvent("staterestore",m,o)}}}}},savePropToState:function(g,f,d){var b=this,c=b[g],a=b.initialConfig;if(b.hasOwnProperty(g)){if(!a||a[g]!==c){if(f){f[d||g]=c}return true}}return false},savePropsToState:function(f,c){var b=this,a,d;if(typeof f==="string"){b.savePropToState(f,c)}else{for(a=0,d=f.length;a<d;++a){b.savePropToState(f[a],c)}}return c},destroy:function(){var b=this,a=b.stateTask;if(a){a.destroy();b.stateTask=null}b.clearListeners()}},1,0,0,0,0,0,[Ext.state,"Stateful"],0));(Ext.cmd.derive("Ext.util.Focusable",Ext.Base,{mixinId:"focusable",hasFocus:false,focusable:false,focusCls:"focus",initFocusable:Ext.emptyFn,initFocusableEvents:function(){this.initFocusableElement()},getFocusClsEl:function(){return this.getFocusEl()},getFocusEl:function(){return this.element||this.el},destroyFocusable:function(){var a=this;Ext.destroy(a.focusListeners);a.focusListeners=a.focusEnterEvent=a.focusTask=null;a.focusEl=a.ariaEl=null},enableFocusable:Ext.emptyFn,disableFocusable:function(){var d=this,b,c=d.focusCls,a;if(d.hasFocus){b=d.findFocusTarget();if(b){b.focus()}}a=d.getFocusClsEl();if(c&&a){a.removeCls(d.removeClsWithUI(c,true))}},isFocusable:function(a){var c=this,b;if(!c.focusable&&(!c.isContainer||!a)){return false}b=c.getFocusEl();if(b&&c.canFocus()){return b.isFocusable(a)}return false},canFocus:function(b,d){var c=this,a;a=(c.isContainer||c.focusable)&&c.rendered&&!c.destroying&&!c.destroyed&&!c.disabled&&(b||c.isVisible(true));return a||(d&&!!c.findFocusTarget())},focus:function(g,c,j,d){var f=this,a,h,b;if((!f.focusable&&!f.isContainer)||f.destroyed||f.destroying){return}if(c){f.getFocusTask().delay(Ext.isNumber(c)?c:10,f.focus,f,[g,false,j,d]);return f}f.cancelFocus();if(f.canFocus()){if(a=f.getFocusEl()){if(a.isComponent){return a.focus(g,c,j,d)}h=a.dom;if(h){if(f.floating){b=f.container.dom.scrollTop}a.focus();if(g){if(Ext.isArray(g)){if(f.selectText){f.selectText.apply(f,g)}}else{if(h.select){h.select()}else{if(f.selectText){f.selectText()}}}}Ext.callback(j,d)}if(f.floating){if(b!==undefined){f.container.dom.scrollTop=b}}}}else{a=f.findFocusTarget();if(a){return a.focus(g,c,j,d)}}return f},cancelFocus:function(){var a=this.getFocusTask();if(a){a.cancel()}},beforeBlur:Ext.emptyFn,onBlur:function(f){var d=this,b=d.focusableContainer,c=d.focusCls,a;if(!d.focusable||d.destroying){return}d.beforeBlur(f);if(b){b.beforeFocusableChildBlur(d,f)}a=d.getFocusClsEl();if(c&&a){a.removeCls(d.removeClsWithUI(c,true))}if(d.validateOnBlur){d.validate()}d.hasFocus=false;d.fireEvent("blur",d,f);d.postBlur(f);if(b){b.afterFocusableChildBlur(d,f)}},postBlur:Ext.emptyFn,beforeFocus:Ext.emptyFn,onFocus:function(f){var d=this,b=d.focusableContainer,c=d.focusCls,a;if(!d.focusable){return}if(d.canFocus()){d.beforeFocus(f);if(b){b.beforeFocusableChildFocus(d,f)}a=d.getFocusClsEl();if(c&&a){a.addCls(d.addClsWithUI(c,true))}if(!d.hasFocus){d.hasFocus=true;d.fireEvent("focus",d,f)}d.postFocus(f);if(b){b.afterFocusableChildFocus(d,f)}}},postFocus:Ext.emptyFn,getTabIndex:function(){var c=this,b,a;if(!c.focusable){return}b=c.rendered&&c.getFocusEl();if(b){if(b.isComponent){a=b.getTabIndex()}else{if(b.isElement){a=b.getAttribute("tabIndex")}else{return}}c.tabIndex=a}else{a=c.tabIndex}return a-0},setTabIndex:function(d,a){var c=this,b;if(!c.focusable){return}c.tabIndex=d;if(!c.rendered){return}b=a||c.getFocusEl();if(b){if(b.isComponent){b.setTabIndex(d)}else{if(b.isElement){b.set({tabIndex:d})}}}},onFocusEnter:function(b){var a=this;if(a.floating&&a!==a.zIndexManager.getActive()){a.toFront(true)}a.focusEnterEvent=b;a.containsFocus=true;a.fireEvent("focusenter",a,b)},onFocusLeave:function(b){var a=this;a.focusEnterEvent=null;a.containsFocus=false;a.fireEvent("focusleave",a,b)},privates:{revertFocus:function(){var d=this,c=d.previousFocus,b=d.focusEnterEvent,a;d.previousFocus=null;if(d.preventRefocus||!d.el.contains(Ext.Element.getActiveElement())){return}a=c||(b&&b.fromComponent);if(a){if(a.canFocus&&a.canFocus(false,true)){a.focus();return}else{if(a.nodeType){a=Ext.fly(a)}if(a.isFocusable&&a.isFocusable()){a.focus();return}}}if(b){a=Ext.fly(b.relatedTarget);if(Ext.isIE8||(a.isFocusable&&a.isFocusable())){a.focus()}}},findFocusTarget:function(){var b=this,a,c;for(a=b.up(":not([disabled])");a;a=a.up(":not([disabled])")){c=Ext.ComponentQuery.query(":focusable:not([hasFocus])",a);if(c.length){return c[0]}if(a.isFocusable&&a.isFocusable()){return a}}},initFocusableElement:function(){var c=this,a=c.tabIndex,b=c.getFocusEl();if(b&&!b.isComponent){c.focusEl=b;if(a!=null&&c.canFocus(true)){c.setTabIndex(a,b)}b.dom.setAttribute("data-componentid",c.id);if(c.config.keyHandlers){c.initKeyHandlers(b)}}},getFocusTask:function(){if(!this.focusTask){this.focusTask=Ext.focusTask}return this.focusTask},handleFocusEvent:function(b){var a;if(this.isFocusing(b)){a=new Ext.event.Event(b.event);a.type="focus";a.relatedTarget=b.fromElement;a.target=b.toElement;this.onFocus(a)}},handleBlurEvent:function(b){var a;if(this.isBlurring(b)){a=new Ext.event.Event(b.event);a.type="blur";a.target=b.fromElement;a.relatedTarget=b.toElement;this.onBlur(a)}},isFocusing:function(b){var d=b.fromElement,c=b.toElement,a;if(this.focusable){a=this.getFocusEl();if(a){if(a.isComponent){return a.isFocusing(d,c)}else{return c===a.dom&&d!==c}}}return false},isBlurring:function(b){var d=b.fromElement,c=b.toElement,a;if(this.focusable){a=this.getFocusEl();if(a){if(a.isComponent){return a.isBlurring(d,c)}else{return d===a.dom&&d!==c}}}return false},blur:function(){var b=this,a;if(!b.focusable||!b.canFocus()){return}a=b.getFocusEl();if(a){b.blurring=true;a.blur();delete b.blurring}return b},disableTabbing:function(){var c=this,b=c.el,a;if(b){b.saveTabbableState()}a=c.getFocusEl();if(a){if(a.isComponent){a.disableTabbing()}else{if(a.isElement&&b&&!b.contains(a)){a.saveTabbableState()}}}},enableTabbing:function(){var c=this,b=c.el,a;a=c.getFocusEl();if(a){if(a.isComponent){a.enableTabbing()}else{if(a.isElement&&b&&!b.contains(a)){a.restoreTabbableState()}}}if(b){b.restoreTabbableState()}}}},0,0,0,0,0,0,[Ext.util,"Focusable"],function(){if(!Ext.focusTask){Ext.focusTask=new Ext.util.DelayedTask()}}));(Ext.cmd.derive("Ext.mixin.Accessible",Ext.Mixin,{mixinConfig:{id:"accessible"},config:{ariaAttributes:{$value:null,lazy:true}},privates:{getAriaLabelEl:function(c){var f=[],h,d,b,g,a;if(c){if(Ext.isFunction(c)){return c.call(this)}else{if(!Ext.isArray(c)){c=[c]}h=this.lookupReferenceHolder();if(h){for(d=0,b=c.length;d<b;d++){g=h.lookupReference(c[d]);if(g){f.push(g.ariaEl.id)}}}}}return f.length?f.join(" "):null}}},0,0,0,0,0,0,[Ext.mixin,"Accessible"],0));(Ext.cmd.derive("Ext.util.KeyboardInteractive",Ext.Mixin,{mixinConfig:{id:"keyboardinteractive"},config:{keyHandlers:{$value:null,lazy:true}},initKeyHandlers:function(b){var d=this,a=d.getKeyHandlers(),c;for(c in a){b.on("keydown",d.handleKeydown,d);d.keydownListenerAttached=true;break}},applyKeyHandlers:function(f){var h=this,c={},b,g,j,d,a;if(f){for(g in f){d=f[g];if(typeof d==="function"){c[g]=d}else{c[g]=h[d]}}if(h.focusable&&h.rendered&&!h.destroyed&&!h.destroying){b=h.getFocusEl();if(b&&!h.keydownListenerAttached){b.on("keydown",h.handleKeydown,h);h.keydownListenerAttached=true}}}return c},handleKeydown:function(d){var c=this,b,a;b=d.getKeyName();if(b){a=c.getKeyHandlers()[b];if(a){a.call(c,d)}}}},0,0,0,0,0,0,[Ext.util,"KeyboardInteractive"],0));(Ext.cmd.derive("Ext.Component",Ext.Base,{alternateClassName:"Ext.AbstractComponent",statics:{AUTO_ID:1000,pendingLayouts:null,layoutSuspendCount:0,DIRECTION_TOP:"top",DIRECTION_RIGHT:"right",DIRECTION_BOTTOM:"bottom",DIRECTION_LEFT:"left",VERTICAL_DIRECTION_Re:/^(?:top|bottom)$/,INVALID_ID_CHARS_Re:/[\.,\s]/g,ariaHighContrastModeCls:"x-aria-highcontrast",cancelLayout:function(a,c){var b=this.runningLayoutContext||this.pendingLayouts;if(b){b.cancelComponent(a,false,c)}},fromElement:function(c,b,a){return Ext.ComponentManager.fromElement(c,b,a)},flushLayouts:function(){var b=this,a=b.pendingLayouts;if(a&&a.invalidQueue.length){b.pendingLayouts=null;b.runningLayoutContext=a;Ext.override(a,{runComplete:function(){b.runningLayoutContext=null;var c=this.callParent();if(Ext.GlobalEvents.hasListeners.afterlayout){Ext.GlobalEvents.fireEvent("afterlayout")}return c}});a.run()}},resumeLayouts:function(a){if(this.layoutSuspendCount&&!--this.layoutSuspendCount){if(a){this.flushLayouts()}if(Ext.GlobalEvents.hasListeners.resumelayouts){Ext.GlobalEvents.fireEvent("resumelayouts")}}},suspendLayouts:function(){++this.layoutSuspendCount},updateLayout:function(b,f){var c=this,a=c.runningLayoutContext,d;if(a){a.queueInvalidate(b)}else{d=c.pendingLayouts||(c.pendingLayouts=new Ext.layout.Context());d.queueInvalidate(b);if(!f&&!c.layoutSuspendCount&&!b.isLayoutSuspended()){c.flushLayouts()}}}},$configPrefixed:false,$configStrict:false,config:{data:null,maxHeight:null,maxWidth:null,minHeight:null,minWidth:null,scrollable:null},defaultBindProperty:"html",alignTarget:null,autoRender:false,autoShow:false,baseCls:"x-component",childEls:{frameTable:{frame:true},frameTL:{frame:"tl"},frameTC:{frame:"tc"},frameTR:{frame:"tr"},frameML:{frame:"ml"},frameBody:{frame:"mc"},frameMR:{frame:"mr"},frameBL:{frame:"bl"},frameBC:{frame:"bc"},frameBR:{frame:"br"}},componentLayout:"autocomponent",defaultAlign:"c-c",disabled:false,disabledRe:/^(?:button|input|select|textarea|optgroup|option|fieldset)$/i,nonMaskableRe:(function(){var a=["input","select","textarea","optgroup","option","table"];if(Ext.isIE9m&&!(Ext.isIE9&&!Ext.isIEQuirks)){a.push("p")}return new RegExp("^(?:"+a.join("|")+")$","i")}()),disabledCls:"x-item-disabled",draggable:false,floating:false,hidden:false,hideMode:"display",maskElement:null,renderTpl:['<tpl if="renderScroller">','<div class="{scrollerCls}" style="{%this.renderPadding(out, values)%}">',"</tpl>","{%this.renderContent(out,values)%}",'<tpl if="renderScroller"></div></tpl>'],resizeHandles:"all",shrinkWrap:2,toFrontOnShow:true,synthetic:false,tplWriteMode:"overwrite",ui:"default",uiCls:[],userCls:null,weight:null,allowDomMove:true,autoGenId:false,borderBoxCls:"x-border-box",componentLayoutCounter:0,contentPaddingProperty:"padding",deferLayouts:false,frameSize:null,horizontalPosProp:"left",isComponent:true,_isLayoutRoot:false,layoutSuspendCount:0,liquidLayout:false,maskOnDisable:true,offsetsCls:"x-hidden-offsets",rendered:false,rootCls:"x-body",scrollerCls:"x-scroll-scroller",scrollerSelector:".x-scroll-scroller",_scrollFlags:{auto:{auto:{overflowX:"auto",overflowY:"auto",x:true,y:true,both:true},"false":{overflowX:"auto",overflowY:"hidden",x:true,y:false,both:false},scroll:{overflowX:"auto",overflowY:"scroll",x:true,y:true,both:true}},"false":{auto:{overflowX:"hidden",overflowY:"auto",x:false,y:true,both:false},"false":{overflowX:"hidden",overflowY:"hidden",x:false,y:false,both:false},scroll:{overflowX:"hidden",overflowY:"scroll",x:false,y:true,both:false}},scroll:{auto:{overflowX:"scroll",overflowY:"auto",x:true,y:true,both:true},"false":{overflowX:"scroll",overflowY:"hidden",x:true,y:false,both:false},scroll:{overflowX:"scroll",overflowY:"scroll",x:true,y:true,both:true}},none:{overflowX:"",overflowY:"",x:false,y:false,both:false}},_scrollableCfg:{x:{x:true,y:false},y:{x:false,y:true},horizontal:{x:true,y:false},vertical:{x:false,y:true},both:{x:true,y:true},"true":{x:true,y:true}},validIdRe:Ext.validIdRe,constructor:function(a){var h=this,c,g,j,f,o,d,b,m;a=a||{};if(a.initialConfig){if(a.isAction){h.baseAction=a}a=a.initialConfig}else{if(a.tagName||a.dom||Ext.isString(a)){a={applyTo:a,id:a.id||a}}}h.initialConfig=a;h.getId();h.protoEl=new Ext.util.ProtoElement();h.initConfig(a);if(h.scrollable==null){o=h.autoScroll;if(o){m=!!o}else{d=h.overflowX;b=h.overflowY;if(d||b){m={x:(d&&d!=="hidden")?d:false,y:(b&&b!=="hidden")?b:false}}}if(m){h.setScrollable(m)}}j=h.xhooks;if(j){delete h.xhooks;Ext.override(h,j)}h.mixins.elementCt.constructor.call(h);h.setupProtoEl();if(h.cls){h.initialCls=h.cls;h.protoEl.addCls(h.cls)}if(h.style){h.initialStyle=h.style;h.protoEl.setStyle(h.style)}h.renderData=h.renderData||{};h.initComponent();if(!h.preventRegister){Ext.ComponentManager.register(h)}h.mixins.state.constructor.call(h);h.addStateEvents("resize");f=h.getController();if(f){f.init(h)}if(h.plugins){for(c=0,g=h.plugins.length;c<g;c++){h.plugins[c]=h.initPlugin(h.plugins[c])}}h.loader=h.getLoader();if(h.disabled){h.disabled=false;h.disable(true)}if(h.renderTo){h.render(h.renderTo)}if(h.autoShow&&!h.$initParent){h.show()}if(h.baseAction){h.baseAction.addComponent(h)}},beforeInitConfig:function(){this.mixins.observable.constructor.call(this)},addCls:function(a){var c=this,b=c.rendered?c.el:c.protoEl;b.addCls.apply(b,arguments);return c},addClsWithUI:function(c,j){var h=this,g=[],f=0,d=h.uiCls=Ext.Array.clone(h.uiCls),b=h.activeUI,a,m;if(typeof c==="string"){c=(c.indexOf(" ")<0)?[c]:Ext.String.splitWords(c)}a=c.length;for(;f<a;f++){m=c[f];if(m&&!h.hasUICls(m)){d.push(m);if(b){g=g.concat(h.addUIClsToElement(m))}}}if(j!==true&&b){h.addCls(g)}return g},afterComponentLayout:function(d,b,c,g){var f=this,a;if(++f.componentLayoutCounter===1){a=f.scrollable;if(a){if(f.touchScroll&&a.isTouchScroller){a.setInnerElement(f.getScrollerEl())}a.setElement(f.getOverflowEl());if(Ext.isIE){Ext.on("show",f.onGlobalShow,f)}}f.afterFirstLayout(d,b)}if(d!==c||b!==g){f.onResize(d,b,c,g)}if(f.floating){f.onAfterFloatLayout()}},addPlugin:function(b){var a=this;b=a.constructPlugin(b);if(a.plugins){a.plugins.push(b)}else{a.plugins=[b]}if(a.pluginsInitialized){a.initPlugin(b)}return b},addPropertyToState:function(f,d,c){var b=this,a=arguments.length;if(a===3||b.hasOwnProperty(d)){if(a<3){c=b[d]}if(c!==b.initialConfig[d]){(f||(f={}))[d]=c}}return f},addUIClsToElement:function(j){var f=this,b=f.baseCls+"-"+f.ui+"-"+j,a=["x-"+j,f.baseCls+"-"+j,b],d,h,c,g;if(f.rendered&&f.frame&&!Ext.supports.CSS3BorderRadius){b+="-";d=f.getChildEls();for(h in d){g=d[h].frame;if(g&&g!==true){c=f[h];if(c){c.addCls(b+g)}}}}return a},removeUIClsFromElement:function(j){var f=this,b=f.baseCls+"-"+f.ui+"-"+j,a=["x-"+j,f.baseCls+"-"+j,b],d,h,c,g;if(f.rendered&&f.frame&&!Ext.supports.CSS3BorderRadius){b+="-";d=f.getChildEls();for(h in d){g=d[h].frame;if(g&&g!==true){c=f[h];if(c){c.removeCls(b+g)}}}}return a},adjustPosition:function(a,d){var b=this,c;if(b.isContainedFloater()){c=b.floatParent.getTargetEl().getViewRegion();a+=c.left;d+=c.top}return{x:a,y:d}},afterHide:function(a,c){var d=this,b=d.focusableContainer;d.hiddenByLayout=null;if(this.ownerLayout){this.updateLayout({isRoot:false})}Ext.callback(a,c||d);d.fireHierarchyEvent("hide");d.fireEvent("hide",d);if(b){b.onFocusableChildHide(d)}},afterSetPosition:function(a,c){var b=this;b.onPosition(a,c);if(b.hasListeners.move){b.fireEvent("move",b,a,c)}},afterShow:function(h,b,f){var g=this,j=g.el,a,c,d;h=g.getAnimateTarget(h);if(!g.ghost){h=null}if(h){c={x:j.getX(),y:j.getY(),width:j.dom.offsetWidth,height:j.dom.offsetHeight};a={x:h.getX(),y:h.getY(),width:h.dom.offsetWidth,height:h.dom.offsetHeight};j.addCls(g.offsetsCls);d=g.ghost();d.el.stopAnimation();d.setX(-10000);g.ghostBox=c;d.el.animate({from:a,to:c,listeners:{afteranimate:function(){delete d.componentLayout.lastComponentSize;g.unghost();delete g.ghostBox;j.removeCls(g.offsetsCls);g.onShowComplete(b,f)}}})}else{g.onShowComplete(b,f)}g.fireHierarchyEvent("show")},animate:function(c){var z=this,g,p,o,a,d,b,y,t,q,f,u,r,j,s,v,m;c=c||{};d=c.to||{};if(Ext.fx.Manager.hasFxBlock(z.id)){return z}g=Ext.isDefined(d.width);if(g){a=Ext.Number.constrain(d.width,z.minWidth,z.maxWidth)}p=Ext.isDefined(d.height);if(p){o=Ext.Number.constrain(d.height,z.minHeight,z.maxHeight)}if(!c.dynamic&&(g||p)){t=(c.from?c.from.width:undefined)||z.getWidth();q=t;f=(c.from?c.from.height:undefined)||z.getHeight();u=f;r=false;if(p&&o>f){u=o;r=true}if(g&&a>t){q=a;r=true}if(p||g){m=z.el.getStyle("overflow");if(m!=="hidden"){z.el.setStyle("overflow","hidden")}}if(r){b=!Ext.isNumber(z.width);y=!Ext.isNumber(z.height);z.setSize(q,u);z.el.setSize(t,f);if(b){delete z.width}if(y){delete z.height}}if(g){d.width=a}if(p){d.height=o}}j=z.constrain;s=z.constrainHeader;if(j||s){z.constrain=z.constrainHeader=false;v=c.callback;c.callback=function(){z.constrain=j;z.constrainHeader=s;if(v){v.call(c.scope||z,arguments)}if(m!=="hidden"){z.el.setStyle("overflow",m)}}}return z.mixins.animate.animate.apply(z,arguments)},applyScrollable:function(b,d){var a=this,g=a.rendered,f,c;if(b){if(b===true||typeof b==="string"){f=a._scrollableCfg[b];b=f}if(d){d.setConfig(b);b=d}else{b=Ext.Object.chain(b);if(g){b.element=a.getOverflowEl();c=a.getScrollerEl();if(c){b.innerElement=c}}b.autoRefresh=false;if(Ext.supports.touchScroll===1){b.translatable={translationMethod:"scrollparent"};b.indicators=false}b=Ext.scroll.Scroller.create(b);b.component=a}}else{if(d){d.setConfig({x:false,y:false});d.destroy();b=null}}if(a.rendered&&!a.destroying&&!a.destroyed){if(b){a.getOverflowStyle()}else{a.scrollFlags=a._scrollFlags.none}a.updateLayout()}return b},beforeComponentLayout:function(){return true},beforeDestroy:Ext.emptyFn,beforeLayout:function(){if(this.floating){this.onBeforeFloatLayout()}},beforeSetPosition:function(m,h,b){var g=this,j=null,d,c,a,f;if(m){if(Ext.isNumber(d=m[0])){b=h;h=m[1];m=d}else{if((d=m.x)!==undefined){b=h;h=m.y;m=d}}}if(g.constrain||g.constrainHeader){j=g.calculateConstrainedPosition(null,[m,h],true);if(j){m=j[0];h=j[1]}}c=(m!==undefined);a=(h!==undefined);if(c||a){g.x=m;g.y=h;f=g.adjustPosition(m,h);j={x:f.x,y:f.y,anim:b,hasX:c,hasY:a}}return j},beforeShow:Ext.emptyFn,bubble:function(c,b,a){var d=this;while(d){if(c.apply(b||d,a||[d])===false){break}d=d.getBubbleTarget()}return this},clearListeners:function(){var a=this;a.mixins.observable.clearListeners.call(a);a.mixins.componentDelegation.clearDelegatedListeners.call(a)},cloneConfig:function(c){c=c||{};var d=c.id||Ext.id(),a=Ext.applyIf(c,this.initialConfig),b;a.id=d;b=Ext.getClass(this);return new b(a)},destroy:function(){var g=this,c=g.renderSelectors,b=g.getConfig("viewModel",true),h=g.getConfig("session",true),a,f,d;if(!g.hasListeners.beforedestroy||g.fireEvent("beforedestroy",g)!==false){g.isDestroying=g.destroying=true;f=g.floatParent||g.ownerCt;if(g.floating){delete g.floatParent;if(g.zIndexManager){g.zIndexManager.unregister(g);g.zIndexManager=null}}g.removeBindings();g.beforeDestroy();g.destroyBindable();if(f&&f.remove){f.remove(g,false)}g.stopAnimation();g.onDestroy();Ext.destroy(g.plugins);if(g.rendered){Ext.Component.cancelLayout(g,true)}g.componentLayout=null;if(g.hasListeners.destroy){g.fireEvent("destroy",g)}if(!g.preventRegister){Ext.ComponentManager.unregister(g)}g.mixins.state.destroy.call(g);if(g.floating){g.onFloatDestroy()}g.clearListeners();if(g.rendered){if(!g.preserveElOnDestroy){g.el.destroy()}g.el.component=null;g.mixins.elementCt.destroy.call(g);if(c){for(a in c){if(c.hasOwnProperty(a)){d=g[a];if(d){delete g[a];d.destroy()}}}}g.data=g.el=g.frameBody=g.rendered=g.afterRenderEvents=null;g.tpl=g.renderTpl=g.renderData=null;g.focusableContainer=g.container=g.scrollable=null}g.isDestroying=g.destroying=false;g.callParent()}},disable:function(c,f){var d=this,b=d.focusableContainer,a=d.getInherited();if(!f){a.disabled=true;d.savedDisabled=true}if(d.maskOnDisable){a.disableMask=true}if(!d.disabled){if(b){b.beforeFocusableChildDisable(d)}d.addCls(d.disabledCls);if(d.rendered){d.onDisable()}else{d.disableOnRender=true}d.disabled=true;if(c!==true){d.fireEvent("disable",d)}if(b){b.onFocusableChildDisable(d)}}return d},doFireEvent:function(b,d,a){var f=this,c=f.mixins.observable.doFireEvent.call(f,b,d,a);if(c!==false){c=f.mixins.componentDelegation.doFireDelegatedEvent.call(f,b,d)}return c},enable:function(c,f){var d=this,b=d.focusableContainer,a=d.getInherited();if(!f){delete d.getInherited().disabled;d.savedDisabled=false}if(d.maskOnDisable){delete a.disableMask}if(d.disabled){if(!(f&&a.hasOwnProperty("disabled"))){if(b){b.beforeFocusableChildEnable(d)}d.disableOnRender=false;d.removeCls(d.disabledCls);if(d.rendered){d.onEnable()}d.disabled=false;if(c!==true){d.fireEvent("enable",d)}if(b){b.onFocusableChildEnable(d)}}}return d},findParentBy:function(a){var b;for(b=this.getRefOwner();b&&!a(b,this);b=b.getRefOwner()){}return b||null},findParentByType:function(a){return Ext.isFunction(a)?this.findParentBy(function(b){return b.constructor===a}):this.up(a)},findPlugin:function(d){var b,a=this.plugins,c=a&&a.length;for(b=0;b<c;b++){if(a[b].ptype===d){return a[b]}}},getAnimateTarget:function(a){a=a||this.animateTarget;if(a){a=a.isComponent?a.getEl():Ext.get(a)}return a||null},getBubbleTarget:function(){return this.getRefOwner()},getComponentLayout:function(){var a=this;if(!a.componentLayout||!a.componentLayout.isLayout){a.setComponentLayout(Ext.layout.Layout.create(a.componentLayout,"autocomponent"))}return a.componentLayout},getEl:function(){return this.el},getHeight:function(){return this.el.getHeight()},initInheritedState:function(a){var c=this,b=c.componentLayout;if(c.hidden){a.hidden=true}if(c.collapseImmune){a.collapseImmune=true}if(c.modelValidation!==undefined){a.modelValidation=c.modelValidation}if(c.savedDisabled){a.disabled=true}c.mixins.bindable.initInheritedState.call(c,a);if(b&&b.initInheritedState){b.initInheritedState(a)}},getId:function(){var a=this,b;if(!(a.id||(a.id=a.initialConfig.id))){b=a.getXType();if(b){b=b.replace(Ext.Component.INVALID_ID_CHARS_Re,"-")}else{b=Ext.name.toLowerCase()+"-comp"}a.id=b+"-"+a.getAutoId()}return a.id},getItemId:function(){return this.itemId||this.id},getLoader:function(){var b=this,a=b.loader;if(a){if(!a.isLoader){b.loader=new Ext.ComponentLoader(Ext.apply({target:b},a))}else{a.setTarget(b)}return b.loader}return null},getMaskTarget:function(){return this.maskElement?this[this.maskElement]:null},getPlugin:function(b){var c,a=this.plugins,d=a&&a.length;for(c=0;c<d;c++){if(a[c].pluginId===b){return a[c]}}return null},getPosition:function(a){var b=this,d,c=b.isContainedFloater(),f;if((a===true)&&!c){return[b.getLocalX(),b.getLocalY()]}d=b.getXY();if((a===true)&&c){f=b.floatParent.getTargetEl().getViewRegion();d[0]-=f.left;d[1]-=f.top}return d},getScrollX:function(){var a=this.getScrollable();return a?a.getPosition().x:0},getScrollY:function(){var a=this.getScrollable();return a?a.getPosition().y:0},getSize:function(a){return this.el.getSize(a)},getSizeModel:function(o){var s=this,a=Ext.layout.SizeModel,d=s.componentLayout.ownerContext,b=s.width,u=s.height,v,c,h,g,j,t,q,r,p,m,f=s.floating||s.floated;if(d){m=d.widthModel;j=d.heightModel}if(!m||!j){h=((v=typeof b)==="number");g=((c=typeof u)==="number");p=f||!(t=s.ownerLayout);if(p){q=Ext.layout.Layout.prototype.autoSizePolicy;r=f?3:s.shrinkWrap;if(h){m=a.configured}if(g){j=a.configured}}else{q=t.getItemSizePolicy(s,o);r=t.isItemShrinkWrap(s)}if(d){d.ownerSizePolicy=q}r=(r===true)?3:(r||0);if(p&&r){if(b&&v==="string"){r&=2}if(u&&c==="string"){r&=1}}if(r!==3){if(!o){o=s.ownerCt&&s.ownerCt.getSizeModel()}if(o){r|=(o.width.shrinkWrap?1:0)|(o.height.shrinkWrap?2:0)}}if(!m){if(!q.setsWidth){if(h){m=a.configured}else{m=(r&1)?a.shrinkWrap:a.natural}}else{if(q.readsWidth){if(h){m=a.calculatedFromConfigured}else{m=(r&1)?a.calculatedFromShrinkWrap:a.calculatedFromNatural}}else{m=a.calculated}}}if(!j){if(!q.setsHeight){if(g){j=a.configured}else{j=(r&2)?a.shrinkWrap:a.natural}}else{if(q.readsHeight){if(g){j=a.calculatedFromConfigured}else{j=(r&2)?a.calculatedFromShrinkWrap:a.calculatedFromNatural}}else{j=a.calculated}}}}return m.pairsByHeightOrdinal[j.ordinal]},getState:function(){var b=this,c=null,a=b.getSizeModel();if(a.width.configured){c=b.addPropertyToState(c,"width")}if(a.height.configured){c=b.addPropertyToState(c,"height")}return c},getUserCls:function(){return this.userCls},setUserCls:function(a){var b=this,c=b.userCls;if(a!==c){b.userCls=a;if(b.rendered){b.el.replaceCls(c,a)}}return c},getWidth:function(){return this.el.getWidth()},getXType:function(){return this.self.xtype},getXTypes:function(){var c=this.self,d,b,a;if(!c.xtypes){d=[];b=this;while(b){a=b.xtypes;if(a!==undefined){d.unshift.apply(d,a)}b=b.superclass}c.xtypeChain=d;c.xtypes=d.join("/")}return c.xtypes},hasCls:function(a){var b=this.rendered?this.el:this.protoEl;return b.hasCls.apply(b,arguments)},hasUICls:function(a){var b=this,c=b.uiCls||[];return Ext.Array.contains(c,a)},hide:function(d,a,b){var c=this;if(c.pendingShow){c.pendingShow=false}if(!(c.rendered&&!c.isVisible())){if(!c.hasListeners.beforehide||c.fireEvent("beforehide",c)!==false||c.hierarchicallyHidden){c.getInherited().hidden=c.hidden=true;c.fireHierarchyEvent("beforehide");if(c.rendered){c.onHide.apply(c,arguments)}}}return c},initComponent:function(){var c=this,b=c.width,a=c.height;if(c.plugins&&!c.plugins.processed){c.plugins=c.constructPlugins()}c.pluginsInitialized=true;if(b!=null||a!=null){c.setSize(b,a)}if(c.listeners){c.on(c.listeners);c.listeners=null}if(c.focusable){c.initFocusable()}},initEvents:function(){var f=this,h=f.afterRenderEvents,b,d,g,c,a;if(h){for(g in h){d=f[g];if(d&&d.on){b=h[g];for(c=0,a=b.length;c<a;++c){f.mon(d,b[c])}}}}if(f.focusable){f.initFocusableEvents()}},is:function(a){return Ext.ComponentQuery.is(this,a)},isDescendantOf:function(a){var b;for(b=this.getRefOwner();b&&b!==a;b=b.getRefOwner()){}return b||null},isAncestor:function(a){while(a){if(a.getRefOwner()===this){return true}a=a.getRefOwner()}},isDisabled:function(){return this.disabled},isDraggable:function(){return !!this.draggable},isDroppable:function(){return !!this.droppable},isFloating:function(){return this.floating},isHidden:function(){return this.hidden},isHierarchicallyHidden:function(){var d=this,c=false,a,b;for(;(a=d.ownerCt||d.floatParent);d=a){b=a.getInherited();if(b.hidden){c=true;break}if(d.getInherited().collapseImmune){if(a.collapsed&&!d.collapseImmune){c=true;break}}else{c=!!b.collapsed;break}}return c},isLayoutChild:function(a){return !this.floating&&!!this.up(a)},isLayoutRoot:function(){var a=this,b=a.ownerLayout;if(!b||a._isLayoutRoot||a.floating){return true}return b.isItemLayoutRoot(a)},isLayoutSuspended:function(){var a=this,b;while(a){if(a.layoutSuspendCount||a.suspendLayout){return true}b=a.ownerLayout;if(!b){break}a=b.owner}return false},isVisible:function(a){var b=this,c;if(b.hidden||!b.rendered||b.destroyed){c=true}else{if(a){c=b.isHierarchicallyHidden()}}return !c},isXType:function(b,a){return a?(Ext.Array.indexOf(this.xtypes,b)!==-1):!!this.xtypesMap[b]},isMasked:function(a){var b=this;return !!(b.masked||(b.loadMask&&b.loadMask.isVisible())||(a&&b.getInherited().masked))},setMasked:function(c){var b=this,a=b.focusableContainer;if(c){b.masked=true;b.getInherited().masked=c}else{b.masked=false;delete b.getInherited().masked}if(a){a.onFocusableChildMasked(b,c)}return b},mask:function(f,c,a){var b=this.lastBox,d=this.getMaskTarget()||this.el;if(b){a=b.height}d.mask(f,c,a);this.setMasked(true)},nextNode:function(d,j){var b=this,c=b.ownerCt,m,f,h,g,a;if(j&&b.is(d)){return b}if(c){for(f=c.items.items,g=Ext.Array.indexOf(f,b)+1,h=f.length;g<h;g++){a=f[g];if(a.is(d)){return a}if(a.down){m=a.down(d);if(m){return m}}}return c.nextNode(d)}return null},nextSibling:function(b){var g=this.ownerCt,d,f,a,h;if(g){d=g.items;a=d.indexOf(this)+1;if(a){if(b){for(f=d.getCount();a<f;a++){if((h=d.getAt(a)).is(b)){return h}}}else{if(a<d.getCount()){return d.getAt(a)}}}}return null},onAdded:function(b,d,a){var c=this;c.ownerCt=b;c.onInheritedAdd(c,a);if(c.hasListeners&&c.hasListeners.added){c.fireEvent("added",c,b,d)}if(Ext.GlobalEvents.hasListeners.added){c.fireHierarchyEvent("added")}},onRemoved:function(b){var a=this,c;if(Ext.GlobalEvents.hasListeners.removed){a.fireHierarchyEvent("removed")}if(a.hasListeners.removed){a.fireEvent("removed",a,a.ownerCt)}if(!b){a.removeBindings()}a.onInheritedRemove(b);a.ownerCt=a.ownerLayout=null},onBoxReady:function(c,a){var d=this,b;if(d.ariaLabelledBy||d.ariaDescribedBy){if(d.ariaLabelledBy){b=d.getAriaLabelEl(d.ariaLabelledBy);if(b){d.ariaEl.dom.setAttribute("aria-labelledby",b)}}if(d.ariaDescribedBy){b=d.getAriaLabelEl(d.ariaDescribedBy);if(b){d.ariaEl.dom.setAttribute("aria-describedby",b)}}}if(d.resizable){d.initResizable(d.resizable)}if(d.draggable){d.initDraggable()}if(d.hasListeners.boxready){d.fireEvent("boxready",d,c,a)}},onDestroy:function(){var b=this,a=b.focusableContainer;if(b.rendered){Ext.destroy(b.dd,b.resizer,b.proxy,b.proxyWrap,b.resizerComponent,b.scrollable,b.contentEl)}if(a){a.onFocusableChildDestroy(b)}if(b.focusable){b.destroyFocusable()}Ext.destroy(b.componentLayout,b.loadMask,b.floatingDescendants)},onDisable:function(){var a=this,b,c;if(a.focusable){a.disableFocusable()}if(!a.ariaStaticRoles[a.ariaRole]){a.ariaEl.dom.setAttribute("aria-disabled",true)}if(a.maskOnDisable&&!a.getInheritedConfig("disableMask",true)){b=a.el.dom;c=b.nodeName;if(a.disabledRe.test(c)){b.disabled=true}if(!a.nonMaskableRe.test(c)){a.mask()}}},onEnable:function(){var a=this,b,c;if(a.focusable){a.enableFocusable()}if(!a.ariaStaticRoles[a.ariaRole]){a.ariaEl.dom.setAttribute("aria-disabled",false)}if(a.maskOnDisable&&a.getInherited().hasOwnProperty("masked")){b=a.el.dom;c=b.nodeName;if(a.disabledRe.test(c)){b.disabled=false}if(!a.nonMaskableRe.test(c)){a.unmask()}}},onGlobalShow:function(a){if(this.up(a)){this.getScrollable().restoreState()}},onHide:function(h,a,f){var g=this,c,d,b;if(!g.ariaStaticRoles[g.ariaRole]){g.ariaEl.dom.setAttribute("aria-hidden",true)}g.revertFocus();h=g.getAnimateTarget(h);if(!g.ghost){h=null}if(h){b={x:h.getX(),y:h.getY(),width:h.dom.offsetWidth,height:h.dom.offsetHeight};c=g.ghost();c.el.stopAnimation();d=g.getSize();c.el.animate({to:b,listeners:{afteranimate:function(){delete c.componentLayout.lastComponentSize;c.el.hide();c.setHiddenState(true);c.el.setSize(d);g.afterHide(a,f)}}})}g.el.hide();if(!h){g.afterHide(a,f)}},onPosition:Ext.emptyFn,onResize:function(c,a,b,f){var d=this;if(d.floating&&d.constrain){d.doConstrain()}d.refreshScroll();if(d.hasListeners.resize){d.fireEvent("resize",d,c,a,b,f)}},onShow:function(){var a=this;if(!a.ariaStaticRoles[a.ariaRole]){a.ariaEl.dom.setAttribute("aria-hidden",false)}a.el.show();a.updateLayout({isRoot:false});if(a.floating){if(a.maximized){a.fitContainer()}else{if(a.constrain){a.doConstrain()}}}},onShowComplete:function(a,c){var d=this,b=d.focusableContainer;if(d.floating){d.onFloatShow()}Ext.callback(a,c||d);d.fireEvent("show",d);if(b){b.onFocusableChildShow(d)}delete d.hiddenByLayout},onShowVeto:Ext.emptyFn,previousNode:function(b,d){var j=this,h=j.ownerCt,a,g,f,c;if(d&&j.is(b)){return j}if(h){for(g=h.items.items,f=Ext.Array.indexOf(g,j)-1;f>-1;f--){c=g[f];if(c.query){a=c.query(b);a=a[a.length-1];if(a){return a}}if(c.is(b)){return c}}return h.previousNode(b,true)}return null},previousSibling:function(b){var f=this.ownerCt,d,a,g;if(f){d=f.items;a=d.indexOf(this);if(a!==-1){if(b){for(--a;a>=0;a--){if((g=d.getAt(a)).is(b)){return g}}}else{if(a){return d.getAt(--a)}}}}return null},registerFloatingItem:function(b){var a=this;if(!a.floatingDescendants){a.floatingDescendants=new Ext.ZIndexManager(a)}a.floatingDescendants.register(b)},removeCls:function(a){var c=this,b=c.rendered?c.el:c.protoEl;b.removeCls.apply(b,arguments);return c},removeClsWithUI:function(d,o){var m=this,j=[],g=0,a=Ext.Array,h=a.remove,f=m.uiCls=a.clone(m.uiCls),c=m.activeUI,b,p;if(typeof d==="string"){d=(d.indexOf(" ")<0)?[d]:Ext.String.splitWords(d)}b=d.length;for(g=0;g<b;g++){p=d[g];if(p&&m.hasUICls(p)){h(f,p);if(c){j=j.concat(m.removeUIClsFromElement(p))}}}if(o!==true&&c){m.removeCls(j)}return j},resumeLayouts:function(b){var a=this;if(!a.rendered){return}if(a.layoutSuspendCount&&!--a.layoutSuspendCount){a.suspendLayout=false;if(b&&!a.isLayoutSuspended()){a.updateLayout(b)}}},scrollBy:function(c,b,d){var a=this.getScrollable();if(a){a.scrollBy(c,b,d)}},scrollTo:function(b,d,c){var a=this.getScrollable();if(a){a.scrollTo(b,d,c)}},setAutoScroll:function(a){this.setScrollable(!!a);return this},setBorder:function(b,d){var c=this,a=!!d;if(c.rendered||a){if(!a){d=c.el}if(!b){b=0}else{if(b===true){b="1px"}else{b=this.unitizeBox(b)}}d.setStyle("border-width",b);if(!a){c.updateLayout()}}c.border=b},setDock:function(c){var b=this,a=b.ownerCt;if(c!==b.dock){if(a&&a.moveDocked){a.moveDocked(b,c)}else{b.dock=c}}return b},setDisabled:function(a){return this[a?"disable":"enable"]()},setFlex:function(a){this.flex=a},setHeight:function(a){return this.setSize(undefined,a)},setLoading:function(c,d){var b=this,a={target:b};if(b.rendered){if(c!==false){if(Ext.isString(c)){a.msg=c}else{Ext.apply(a,c)}if(!b.loadMask||!b.loadMask.isLoadMask){if(d&&a.useTargetEl==null){a.useTargetEl=true}b.loadMask=new Ext.LoadMask(a)}else{Ext.apply(b.loadMask,a)}if(b.loadMask.isVisible()){b.loadMask.syncMaskState()}else{b.loadMask.show()}}else{if(b.loadMask&&b.loadMask.isLoadMask){b.loadMask.hide()}}}return b.loadMask},setMargin:function(c,b){var a=this;if(a.rendered){if(!c&&c!==0){c=""}else{if(c===true){c=5}c=this.unitizeBox(c)}a.margin=c;a.margin$=null;a.getEl().setStyle("margin",c);if(!b){a.updateLayout(a._notAsLayoutRoot)}}else{a.margin=c}},setOverflowXY:function(b,a){this.setScrollable({x:(b&&b!=="hidden")?b:false,y:(a&&a!=="hidden")?a:false});return this},setPagePosition:function(a,g,b){var c=this,d,f;if(Ext.isArray(a)){g=a[1];a=a[0]}c.pageX=a;c.pageY=g;if(c.floating){if(c.isContainedFloater()){f=c.floatParent.getTargetEl().getViewRegion();if(Ext.isNumber(a)&&Ext.isNumber(f.left)){a-=f.left}if(Ext.isNumber(g)&&Ext.isNumber(f.top)){g-=f.top}}else{d=c.el.translateXY(a,g);a=d.x;g=d.y}c.setPosition(a,g,b)}else{d=c.el.translateXY(a,g);c.setPosition(d.x,d.y,b)}return c},setPosition:function(a,f,b){var c=this,d=c.beforeSetPosition.apply(c,arguments);if(d&&c.rendered){a=d.x;f=d.y;if(b){if(a!==c.getLocalX()||f!==c.getLocalY()){c.stopAnimation();c.animate(Ext.apply({duration:1000,listeners:{afteranimate:Ext.Function.bind(c.afterSetPosition,c,[a,f])},to:{left:a,top:f}},b))}}else{c.setLocalXY(a,f);c.afterSetPosition(a,f)}}return c},setScrollX:function(b,c){var a=this.getScrollable();if(a){a.scrollTo(b,null,c)}},setScrollY:function(c,b){var a=this.getScrollable();if(a){a.scrollTo(null,c,b)}},setSize:function(d,a){var f=this,b=f.width,h=f.height,g,c;if(d&&typeof d==="object"){a=d.height;d=d.width}if(typeof d==="number"){f.width=Ext.Number.constrain(d,f.minWidth,f.maxWidth)}else{if(d===null){delete f.width}else{if(typeof d==="string"){g=true;f.width=d}}}if(typeof a==="number"){f.height=Ext.Number.constrain(a,f.minHeight,f.maxHeight)}else{if(a===null){delete f.height}else{if(typeof a==="string"){c=true;f.height=a}}}if(f.rendered&&f.isVisible()){if(b!==f.width||h!==f.height){if(f.liquidLayout||g||c){f.el.setSize(f.width,f.height)}f.updateLayout(f._notAsLayoutRoot)}}return f},setStyle:function(c,b){var a=this.el||this.protoEl;a.setStyle(c,b);return this},setUI:function(c){var b=this,f=b.uiCls,d=b.activeUI,a;if(c===d){return}if(d){a=b.removeClsWithUI(f,true);if(a.length){b.removeCls(a)}b.removeUIFromElement()}else{b.uiCls=[]}b.ui=c;b.activeUI=c;b.addUIToElement();a=b.addClsWithUI(f,true);if(a.length){b.addCls(a)}if(b.rendered){b.updateLayout()}},setVisible:function(a){return this[a?"show":"hide"]()},setHidden:function(a){return this.setVisible(!a)},setWidth:function(a){return this.setSize(a)},show:function(d,a,b){var c=this,f=c.rendered;if(c.hierarchicallyHidden||(c.floating&&!f&&c.isHierarchicallyHidden())){if(!f){c.initHierarchyEvents()}if(arguments.length>1){arguments[0]=null;c.pendingShow=arguments}else{c.pendingShow=true}}else{if(f&&c.isVisible()){if(c.floating){c.onFloatShow()}}else{if(c.fireEvent("beforeshow",c)!==false){c.hidden=false;delete this.getInherited().hidden;Ext.suspendLayouts();if(!f&&(c.autoRender||c.floating)){c.doAutoRender();f=c.rendered}if(f){c.beforeShow();Ext.resumeLayouts();c.onShow.apply(c,arguments);c.afterShow.apply(c,arguments)}else{Ext.resumeLayouts(true)}}else{c.onShowVeto()}}}return c},showAt:function(a,d,b){var c=this;if(!c.rendered&&(c.autoRender||c.floating)){c.x=a;c.y=d;return c.show()}if(c.floating){c.setPosition(a,d,b)}else{c.setPagePosition(a,d,b)}return c.show()},showBy:function(b,d,c){var a=this;if(a.floating&&b){a.alignTarget=b;if(d){a.defaultAlign=d}if(c){a.alignOffset=c}a.show();if(!a.hidden){a.alignTo(b,d||a.defaultAlign,c||a.alignOffset)}}return a},suspendLayouts:function(){var a=this;if(!a.rendered){return}if(++a.layoutSuspendCount===1){a.suspendLayout=true}},unitizeBox:function(a){return Ext.Element.unitizeBox(a)},unmask:function(){(this.getMaskTarget()||this.el).unmask();this.setMasked(false)},unregisterFloatingItem:function(b){var a=this;if(a.floatingDescendants){a.floatingDescendants.unregister(b)}},up:function(d,f){var c=this.getRefOwner(),b=typeof f==="string",h=typeof f==="number",a=f&&f.isComponent,g=0;if(d){for(;c;c=c.getRefOwner()){g++;if(d.isComponent){if(c===d){return c}}else{if(Ext.ComponentQuery.is(c,d)){return c}}if(b&&c.is(f)){return}if(h&&g===f){return}if(a&&c===f){return}}}return c},update:function(d,h,o,b){var m=this,p=(m.tpl&&!Ext.isString(d)),j=m.getScrollable(),c=m.focusableContainer,g,a,f;if(p){m.data=(d&&d.isEntity)?d.getData(true):d}else{m.html=Ext.isObject(d)?Ext.DomHelper.markup(d):d}if(m.rendered){g=m.getSizeModel();a=g.width.shrinkWrap||g.height.shrinkWrap;if(m.isContainer){f=m.layout.getRenderTarget();a=a||m.items.items.length>0}else{f=m.touchScroll?m.getScrollerEl():m.getTargetEl()}if(p){m.tpl[m.tplWriteMode](f,m.data||{})}else{f.setHtml(m.html,h,o,b||m)}if(a){m.updateLayout()}if(j){j.refresh(true)}if(c){c.onFocusableChildUpdate(m)}}},setHtml:function(b,a,c){this.update(b,a,null,c)},applyData:function(a){this.update(a)},updateBox:function(a){this.setSize(a.width,a.height);this.setPagePosition(a.x,a.y);return this},_asLayoutRoot:{isRoot:true},_notAsLayoutRoot:{isRoot:false},updateLayout:function(c){var d=this,f,b=d.lastBox,a=c&&c.isRoot;if(b){b.invalid=true}if(!d.rendered||d.layoutSuspendCount||d.suspendLayout){return}if(d.hidden){Ext.Component.cancelLayout(d)}else{if(typeof a!=="boolean"){a=d.isLayoutRoot()}}if(a||!d.ownerLayout||!d.ownerLayout.onContentChange(d)){if(!d.isLayoutSuspended()){f=(c&&c.hasOwnProperty("defer"))?c.defer:d.deferLayouts;Ext.Component.updateLayout(d,f)}}},updateMaxHeight:function(b,a){this.changeConstraint(b,a,"min","max-height","height")},updateMaxWidth:function(b,a){this.changeConstraint(b,a,"min","max-width","width")},updateMinHeight:function(b,a){this.changeConstraint(b,a,"max","min-height","height")},updateMinWidth:function(a,b){this.changeConstraint(a,b,"max","min-width","width")},getAnchorToXY:function(d,a,c,b){return d.getAnchorXY(a,c,b)},getBorderPadding:function(){return this.el.getBorderPadding()},getLocalX:function(){return this.el.getLocalX()},getLocalXY:function(){return this.el.getLocalXY()},getLocalY:function(){return this.el.getLocalY()},getX:function(){return this.el.getX()},getXY:function(){return this.el.getXY()},getY:function(){return this.el.getY()},setLocalX:function(a){this.el.setLocalX(a)},setLocalXY:function(a,b){this.el.setLocalXY(a,b)},setLocalY:function(a){this.el.setLocalY(a)},setX:function(a,b){this.el.setX(a,b)},setXY:function(b,a){this.el.setXY(b,a)},setY:function(b,a){this.el.setY(b,a)},privates:{addOverCls:function(){var a=this;if(!a.disabled){a.el.addCls(a.overCls)}},addUIToElement:function(){var d=this,a=d.baseCls+"-"+d.ui,c,g,b,f;d.addCls(a);if(d.rendered&&d.frame&&!Ext.supports.CSS3BorderRadius){a+="-";c=d.getChildEls();for(g in c){f=c[g].frame;if(f&&f!==true){b=d[g];if(b){b.addCls(a+f)}}}}},changeConstraint:function(h,c,a,f,b){var g=this,d=g[b];if(h!=null&&typeof d==="number"){g[b]=Math[a](d,h)}if(g.liquidLayout){if(h!=null){g.setStyle(f,h+"px")}else{if(c){g.setStyle(f,"")}}}if(g.rendered){g.updateLayout()}},constructPlugin:function(b){var a=this;if(typeof b==="string"){b=Ext.PluginManager.create({},b,a)}else{b=Ext.PluginManager.create(b,null,a)}return b},constructPlugins:function(){var f=this,c=f.plugins,b,d,a;if(c){b=[];b.processed=true;if(!Ext.isArray(c)){c=[c]}for(d=0,a=c.length;d<a;d++){b[d]=f.constructPlugin(c[d])}}f.pluginsInitialized=true;return b},detachFromBody:function(){Ext.getDetachedBody().appendChild(this.el);Ext.Component.cancelLayout(this);this.isDetached=true},doAddListener:function(d,p,q,s,b,a,f){var o=this,m,h,c,r,g,j;if(Ext.isObject(p)||(s&&s.element)){if(s.element){r=s.element;m={};m[d]=p;if(q){m.scope=q}c=o.$elementEventOptions;for(h in s){if(c[h]){m[h]=s[h]}}}else{m=p;r=d}g=o[r];if(g&&g.isObservable){o.mon(g,m)}else{o.afterRenderEvents=o.afterRenderEvents||{};if(!o.afterRenderEvents[r]){o.afterRenderEvents[r]=[]}o.afterRenderEvents[r].push(m)}return}if(s){j=s.delegate;if(j){o.mixins.componentDelegation.addDelegatedListener.call(o,d,p,q,s,b,a,f);return}}o.mixins.observable.doAddListener.call(o,d,p,q,s,b,a,f)},doRemoveListener:function(a,c,b){var d=this;d.mixins.observable.doRemoveListener.call(d,a,c,b);d.mixins.componentDelegation.removeDelegatedListener.call(d,a,c,b)},fireHierarchyEvent:function(b){var a=Ext.GlobalEvents;if(a.hasListeners[b]){a.fireEvent(b,this)}},getActionEl:function(){return this.el},getAutoId:function(){this.autoGenId=true;return ++Ext.Component.AUTO_ID},getContentTarget:function(){return this.el},getDragEl:function(){return this.el},getOverflowEl:function(){return this.getTargetEl()},getOverflowStyle:function(){var d=this,b=d.getScrollable(),c=d._scrollFlags,a,g,f;if(b){a=b.getX();if(a===true){a="auto"}g=b.getY();if(g===true){g="auto"}f=c[a][g]}else{f=c.none}d.scrollFlags=f;return{overflowX:f.overflowX,overflowY:f.overflowY}},getPlugins:function(){var a=this.plugins;a=(a&&a.processed)?a:this.constructPlugins();return a||null},getProxy:function(){var a=this,b;if(!a.proxy){b=Ext.getBody();a.proxy=a.el.createProxy("x-proxy-el",b,true)}return a.proxy},getScrollerEl:function(){var a=this;return a.scrollerEl||(a.scrollerEl=a.componentLayout.getScrollerEl()||a.getOverflowEl().child(a.scrollerSelector))},getTargetEl:function(){return this.frameBody||this.el},getTdCls:function(){return"x-"+this.getTdType()+"-"+this.ui+"-cell"},getTdType:function(){return this.xtype},getTpl:function(a){return Ext.XTemplate.getTpl(this,a)},initCls:function(){var b=this,a=[b.baseCls],c=b.getComponentLayout().targetCls;if(c){a.push(c)}if(b.componentCls){a.push(b.componentCls)}else{b.componentCls=b.baseCls}return a},initDraggable:function(){var c=this,a=(c.resizer&&c.resizer.el!==c.el)?c.resizerComponent=new Ext.Component({el:c.resizer.el,rendered:true,container:c.container}):c,b=Ext.applyIf({el:a.getDragEl(),constrainTo:(c.constrain||c.draggable.constrain)?(c.constrainTo||(c.floatParent?c.floatParent.getTargetEl():c.container)):undefined},c.draggable);if(c.constrain||c.constrainDelegate){b.constrain=c.constrain;b.constrainDelegate=c.constrainDelegate}c.dd=new Ext.util.ComponentDragger(a,b)},initPadding:function(c){var a=this,b=a.padding;if(b!=null){if(a.touchScroll||(a.layout&&a.layout.managePadding&&a.contentPaddingProperty==="padding")){c.setStyle("padding",0)}else{c.setStyle("padding",this.unitizeBox((b===true)?5:b))}}},initPlugin:function(a){a.init(this);return a},initResizable:function(a){var b=this;a=Ext.apply({target:b,dynamic:false,constrainTo:(b.constrain||(a&&a.constrain))?(b.constrainTo||(b.floatParent?b.floatParent.getTargetEl():b.container)):undefined,handles:b.resizeHandles},a);a.target=b;b.resizer=new Ext.resizer.Resizer(a)},initStyles:function(o){var g=this,d=g.margin,f=g.border,p=g.cls,a=g.style,j=g.x,h=g.y,c=g.liquidLayout,b,m;g.initPadding(o);if(d!=null){o.setStyle("margin",this.unitizeBox((d===true)?5:d))}if(f!=null){g.setBorder(f,o)}if(p&&p!==g.initialCls){o.addCls(p);g.cls=g.initialCls=null}if(a&&a!==g.initialStyle){o.setStyle(a);g.style=g.initialStyle=null}if(j!=null){o.setStyle(g.horizontalPosProp,(typeof j==="number")?(j+"px"):j)}if(h!=null){o.setStyle("top",(typeof h==="number")?(h+"px"):h)}if(!g.ownerCt||g.floating){if(Ext.scopeCss){o.addCls(g.rootCls)}o.addCls(g.borderBoxCls)}if(c||!g.getFrameInfo()){b=g.width;m=g.height;if(b!=null){if(typeof b==="number"){o.setStyle("width",b+"px")}else{o.setStyle("width",b)}}if(m!=null){if(typeof m==="number"){o.setStyle("height",m+"px")}else{o.setStyle("height",m)}}}},isContainedFloater:function(){return(this.floating&&this.floatParent)},isDescendant:function(a){if(a.isContainer){for(var b=this.ownerCt;b;b=b.ownerCt){if(b===a){return true}}}return false},owns:function(b){var a=false,c;if(b.isEvent){b=b.target}else{if(b.isElement){b=b.dom}}c=Ext.Component.fromElement(b);if(c){a=(c===this)||(!!c.up(this))}return a},parseBox:function(a){return Ext.Element.parseBox(a)},reattachToBody:function(){this.isDetached=false},refreshScroll:function(){var a=this.getScrollable();if(a){a.refresh()}},removeManagedListenerItem:function(b,a,j,d,g,f){var h=this,c=a.options?a.options.element:null;if(c){c=h[c];if(c&&c.un){if(b||(a.item===j&&a.ename===d&&(!g||a.fn===g)&&(!f||a.scope===f))){c.un(a.ename,a.fn,a.scope);if(!b){Ext.Array.remove(h.managedListeners,a)}}}}else{return h.mixins.observable.removeManagedListenerItem.apply(h,arguments)}},removeOverCls:function(){this.el.removeCls(this.overCls)},removePlugin:function(a){Ext.Array.remove(this.plugins,a);a.destroy()},removeUIFromElement:function(){var d=this,a=d.baseCls+"-"+d.ui,c,g,b,f;d.removeCls(a);if(d.rendered&&d.frame&&!Ext.supports.CSS3BorderRadius){a+="-";c=d.getChildEls();for(g in c){f=c[g].frame;if(f&&f!==true){b=d[g];if(b){b.removeCls(a+f)}}}}},setComponentLayout:function(b){var a=this.componentLayout;if(a&&a.isLayout&&a!==b){a.setOwner(null)}this.componentLayout=b;b.setOwner(this)},setHiddenState:function(d){var c=this,b=c.getInherited(),a=c.zIndexManager;c.hidden=d;if(d){b.hidden=true}else{delete b.hidden}if(a){a.onComponentShowHide(c)}},setupProtoEl:function(){var a=this.initCls();this.protoEl.addCls(a)},wrapPrimaryEl:function(c){var b=this,a=b.el;if(!a||!a.isElement){b.el=Ext.get(c)}if(b.floating){this.mixins.floating.constructor.call(this)}}},deprecated:{5:{methods:{addClass:"addCls",doComponentLayout:function(){this.updateLayout();return this},removeClass:"removeCls",forceComponentLayout:"updateLayout",setDocked:"setDock"}}}},1,["component","box"],["component","box"],{component:true,box:true},["widget.box","widget.component"],[[Ext.mixin.Inheritable.prototype.mixinId||Ext.mixin.Inheritable.$className,Ext.mixin.Inheritable],[Ext.util.Floating.prototype.mixinId||Ext.util.Floating.$className,Ext.util.Floating],[Ext.util.Positionable.prototype.mixinId||Ext.util.Positionable.$className,Ext.util.Positionable],[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.mixin.ComponentDelegation.prototype.mixinId||Ext.mixin.ComponentDelegation.$className,Ext.mixin.ComponentDelegation],[Ext.mixin.Bindable.prototype.mixinId||Ext.mixin.Bindable.$className,Ext.mixin.Bindable],[Ext.util.Animate.prototype.mixinId||Ext.util.Animate.$className,Ext.util.Animate],[Ext.util.ElementContainer.prototype.mixinId||Ext.util.ElementContainer.$className,Ext.util.ElementContainer],[Ext.util.Renderable.prototype.mixinId||Ext.util.Renderable.$className,Ext.util.Renderable],[Ext.state.Stateful.prototype.mixinId||Ext.state.Stateful.$className,Ext.state.Stateful],[Ext.util.Focusable.prototype.mixinId||Ext.util.Focusable.$className,Ext.util.Focusable],[Ext.mixin.Accessible.prototype.mixinId||Ext.mixin.Accessible.$className,Ext.mixin.Accessible],[Ext.util.KeyboardInteractive.prototype.mixinId||Ext.util.KeyboardInteractive.$className,Ext.util.KeyboardInteractive]],[Ext,"Component",Ext,"AbstractComponent"],function(b){var a=b.prototype;(a.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1;(a.$eventOptions=Ext.Object.chain(a.$eventOptions)).delegate=1;b.createAlias({on:"addListener",prev:"previousSibling",next:"nextSibling"});Ext.resumeLayouts=function(c){b.resumeLayouts(c)};Ext.suspendLayouts=function(){b.suspendLayouts()};Ext.batchLayouts=function(d,c){b.suspendLayouts();d.call(c);b.resumeLayouts(true)};Ext.setGlyphFontFamily=function(c){Ext._glyphFontFamily=c};b.hierarchyEventSource=a.hierarchyEventSource=Ext.GlobalEvents;Ext.onReady(function(){if(Ext.supports.HighContrastMode){Ext.getBody().addCls(b.ariaHighContrastModeCls)}})}));Ext.define("Ext.layout.container.border.Region",{override:"Ext.Component",initBorderRegion:function(){var a=this;if(!a._borderRegionInited){a._borderRegionInited=true;a.addStateEvents(["changeregion","changeweight"]);Ext.override(a,{getState:function(){var b=a.callParent();b=a.addPropertyToState(b,"region");b=a.addPropertyToState(b,"weight");return b}})}},getOwningBorderContainer:function(){var a=this.getOwningBorderLayout();return a&&a.owner},getOwningBorderLayout:function(){var a=this.ownerLayout;return(a&&a.isBorderLayout)?a:null},setRegion:function(o){var m=this,c,d=m.region;if(o!==d){c=m.getOwningBorderLayout();if(c){var g=c.regionFlags[o],p=m.placeholder,a=m.splitter,b=c.owner,r=c.regionMeta,f=m.collapsed||m.floated,q,j,h;if(m.fireEventArgs("beforechangeregion",[m,o])===false){return d}Ext.suspendLayouts();m.region=o;Ext.apply(m,g);if(m.updateCollapseTool){m.updateCollapseTool()}if(a){Ext.apply(a,g);a.updateOrientation();j=b.items;h=j.indexOf(m);if(h>=0){q=r[o].splitterDelta;if(j.getAt(h+q)!==a){j.remove(a);h=j.indexOf(m);if(q>0){++h}j.insert(h,a)}}}if(p){if(f){m.expand(false)}b.remove(p);m.placeholder=null;if(f){m.collapse(null,false)}}b.updateLayout();Ext.resumeLayouts(true);m.fireEventArgs("changeregion",[m,d])}else{m.region=o}}return d},setWeight:function(d){var c=this,b=c.getOwningBorderContainer(),f=c.placeholder,a=c.weight;if(d!==a){if(c.fireEventArgs("beforechangeweight",[c,d])!==false){c.weight=d;if(f){f.weight=d}if(b){b.updateLayout()}c.fireEventArgs("changeweight",[c,a])}}return a}},function(a){var b=a.prototype;b.setBorderRegion=b.setRegion;b.setRegionWeight=b.setWeight});Ext.define("Ext.theme.neptune.Component",{override:"Ext.Component",initComponent:function(){arguments.callee.$previous.call(this);if(this.dock&&this.border===undefined){this.border=false}},privates:{initStyles:function(){var c=this,b=c.hasOwnProperty("border"),a=c.border;if(c.dock){c.border=null}arguments.callee.$previous.apply(this,arguments);if(b){c.border=a}else{delete c.border}}}},function(){Ext.namespace("Ext.theme.is").Neptune=true;Ext.theme.name="Neptune"});Ext.define("Ext.theme.triton.Component",{override:"Ext.Component"},function(){Ext.namespace("Ext.theme.is").Triton=true;Ext.theme.name="Triton"});Ext.define("Ext.overrides.app.domain.Component",{override:"Ext.app.domain.Component"},function(a){a.monitor(Ext.Component)});(Ext.cmd.derive("Ext.app.EventBus",Ext.Base,{singleton:true,constructor:function(){var b=this,a=Ext.app.EventDomain.instances;b.callParent();b.domains=a;b.bus=a.component.bus},control:function(b,a){return this.domains.component.listen(b,a)},listen:function(d,b){var a=this.domains,c;for(c in d){if(d.hasOwnProperty(c)){a[c].listen(d[c],b)}}},unlisten:function(c){var a=Ext.app.EventDomain.instances,b;for(b in a){a[b].unlisten(c)}}},1,0,0,0,0,0,[Ext.app,"EventBus"],0));(Ext.cmd.derive("Ext.app.domain.Global",Ext.app.EventDomain,{singleton:true,type:"global",constructor:function(){var a=this;a.callParent();a.monitor(Ext.GlobalEvents)},listen:function(b,a){this.callParent([{global:b},a])},match:Ext.returnTrue},1,0,0,0,0,0,[Ext.app.domain,"Global"],0));(Ext.cmd.derive("Ext.app.BaseController",Ext.Base,{isController:true,config:{id:null,control:null,listen:null,routes:null,before:null},constructor:function(a){var b=this;Ext.apply(b,a);delete b.control;delete b.listen;b.eventbus=Ext.app.EventBus;b.mixins.observable.constructor.call(b,a);b.ensureId()},applyListen:function(a){if(Ext.isObject(a)){a=Ext.clone(a)}return a},applyControl:function(a){if(Ext.isObject(a)){a=Ext.clone(a)}return a},updateControl:function(a){this.ensureId();if(a){this.control(a)}},updateListen:function(a){this.ensureId();if(a){this.listen(a)}},updateRoutes:function(b){if(b){var f=this,g=f.getBefore()||{},a=Ext.app.route.Router,d,c,h;for(d in b){c=b[d];if(Ext.isString(c)){c={action:c}}h=c.action;if(!c.before){c.before=g[h]}a.connect(d,c,f)}}},isActive:function(){return true},control:function(b,c,a){var d=this,f=a,g;if(Ext.isString(b)){g={};g[b]=c}else{g=b;f=c}d.eventbus.control(g,f||d)},listen:function(b,a){this.eventbus.listen(b,a||this)},destroy:function(){var b=this,a=b.eventbus;Ext.app.route.Router.disconnectAll(b);if(a){a.unlisten(b);b.eventbus=null}b.callParent()},redirectTo:function(b,c){if(b.isModel){b=b.toUrl()}if(!c){var a=Ext.util.History.getToken();if(a===b){return false}}else{Ext.app.route.Router.onStateChange(b)}Ext.util.History.add(b);return true}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.app,"BaseController"],0));(Ext.cmd.derive("Ext.app.Util",Ext.Base,{},0,0,0,0,0,0,[Ext.app,"Util"],function(){Ext.apply(Ext.app,{namespaces:{Ext:{}},addNamespaces:function(c){var d=Ext.app.namespaces,b,a;if(!Ext.isArray(c)){c=[c]}for(b=0,a=c.length;b<a;b++){d[c[b]]=true}},clearNamespaces:function(){Ext.app.namespaces={}},getNamespace:function(b){var d=Ext.apply({},Ext.ClassManager.paths,Ext.app.namespaces),a="",c;for(c in d){if(d.hasOwnProperty(c)&&c.length>a.length&&(c+"."===b.substring(0,c.length+1))){a=c}}return a===""?undefined:a},setupPaths:function(a,b,f){var d=Ext.manifest,c;if(a&&b!==null){d=d&&d.paths;if(!d||b!==undefined){Ext.Loader.setPath(a,(b===undefined)?"app":b)}}if(f){for(c in f){if(f.hasOwnProperty(c)){Ext.Loader.setPath(c,f[c])}}}}});Ext.getNamespace=Ext.app.getNamespace}));(Ext.cmd.derive("Ext.util.CollectionKey",Ext.Base,{isCollectionKey:true,observerPriority:-200,config:{collection:null,keyFn:null,property:null,rootProperty:null,unique:true},generation:0,map:null,mapRebuilds:0,constructor:function(a){this.initConfig(a)},get:function(a){var b=this.map||this.getMap();return b[a]||null},clear:function(){this.map=null},getRootProperty:function(){var b=this,a=(arguments.callee.$previous||Ext.Base.prototype.getRootProperty).call(this);return a!==null?a:b.getCollection().getRootProperty()},indexOf:function(m,f){var a=this.map||this.getMap(),o=a[m],g=this.getCollection(),b=g.length,d,h,j,c;if(!o){return -1}if(f===undefined){f=-1}if(o instanceof Array){j=o;h=b;for(c=j.length;c-->0;){d=g.indexOf(j[c]);if(d<h&&d>f){h=d}}if(h===b){return -1}}else{h=g.indexOf(o)}return(h>f)?h:-1},updateKey:function(c,f){var b=this,d=b.map,g,a;if(d){g=d[f];if(g instanceof Array){a=Ext.Array.indexOf(g,c);if(a>=0){if(g.length>2){g.splice(a,1)}else{d[f]=g[1-a]}}}else{if(g){delete d[f]}}b.add([c])}},onCollectionAdd:function(b,a){if(this.map){this.add(a.items)}},onCollectionItemChange:function(b,a){this.map=null},onCollectionRefresh:function(){this.map=null},onCollectionRemove:function(f,d){var h=this,a=h.map,g=d.items,b=g.length,c,m,j;if(a){if(h.getUnique()&&b<f.length/2){for(c=0;c<b;++c){j=h.getKey(m=g[c]);delete a[j]}}else{h.map=null}}},add:function(g){var h=this,a=h.map,b,f,m,j,c,d;c=g.length;d=h.getUnique();for(f=0;f<c;++f){j=h.getKey(m=g[f]);if(d||!(j in a)){a[j]=m}else{if(!((b=a[j]) instanceof Array)){a[j]=b=[b]}b.push(m)}}},applyKeyFn:function(a){if(Ext.isString(a)){this.getKey=function(b){return b[a]()}}else{this.getKey=a}},updateProperty:function(b){var a=this.getRootProperty();this.getKey=function(c){return(a?c[a]:c)[b]}},getMap:function(){var a=this,b=a.map;if(!b){a.map=b={};a.keysByItemKey={};++a.mapRebuilds;a.add(a.getCollection().items)}return b},updateCollection:function(a){a.addObserver(this)},clone:function(){return new Ext.util.CollectionKey(this.getCurrentConfig())}},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.util,"CollectionKey"],0));(Ext.cmd.derive("Ext.util.Grouper",Ext.util.Sorter,{isGrouper:true,config:{groupFn:null,sortProperty:null},constructor:function(a){Ext.util.Sorter.prototype.constructor.apply(this,arguments)},getGroupString:function(a){var b=this._groupFn(a);return(b!=null)?String(b):""},sortFn:function(d,c){var g=this,b=g._groupFn(d),f=g._groupFn(c),m=g._sortProperty,j=g._root,h=g._sorterFn,a=g._transform;if(b===f){return 0}if(m||h){if(h){return h.call(this,d,c)}if(j){d=d[j];c=c[j]}b=d[m];f=c[m];if(a){b=a(b);f=a(f)}}return(b>f)?1:(b<f?-1:0)},standardGroupFn:function(b){var a=this._root;return(a?b[a]:b)[this._property]},updateSorterFn:function(){},updateProperty:function(){if(!this.getGroupFn()){this.setGroupFn(this.standardGroupFn)}}},1,0,0,0,0,0,[Ext.util,"Grouper"],0));(Ext.cmd.derive("Ext.util.Collection",Ext.Base,{isCollection:true,config:{autoFilter:true,autoSort:true,autoGroup:true,decoder:null,extraKeys:null,filters:null,grouper:null,groups:null,rootProperty:null,sorters:null,multiSortLimit:3,defaultSortDirection:"ASC",source:null,trackGroups:true},generation:0,indices:null,indexRebuilds:0,updating:0,grouped:false,sorted:false,filtered:false,$endUpdatePriority:1001,constructor:function(a){var b=this;b.items=[];b.map={};b.length=0;if(a&&a.keyFn){b.getKey=a.keyFn}b.mixins.observable.constructor.call(b,a)},destroy:function(){var c=this,b=c._filters,d=c._sorters,a=c._groups;if(b){b.destroy();c._filters=null}if(d){d.destroy();c._sorters=null}if(a){a.destroy();c._groups=null}c.setSource(null);c.observers=c.items=c.map=null;c.callParent()},add:function(d){var c=this,a=c.decodeItems(arguments,0),b=a;if(a.length){c.requestedIndex=c.length;c.splice(c.length,0,a);delete c.requestedIndex;b=(a.length===1)?a[0]:a}return b},replaceAll:function(){var c=this,b,a;a=c.decodeItems(arguments,0);b=a;if(a.length){c.splice(0,c.length,a);b=(a.length===1)?a[0]:a}else{c.removeAll()}return b},aggregate:function(h,b,f,a,d){var g=this,c=Ext.Array.slice(arguments);c.unshift(g.items);return g.aggregateItems.apply(g,c)},aggregateByGroup:function(d,b,c){var a=this.getGroups();return this.aggregateGroups(a,d,b,c)},aggregateItems:function(o,u,d,a,f,v){var p=this,m=Ext.Number.clipIndices(o.length,[a,f]),b=(a!==0&&f!==o.length),h,g,c,q,s,t,r;a=m[0];f=m[1];if(!Ext.isFunction(d)){d=p._aggregators[d];return d.call(p,o,a,f,u,p.getRootProperty())}q=p.getRootProperty();t=new Array(c);r=b?new Array(c):o;for(h=a,g=0;h<f;++h,g++){if(b){r[g]=s=o[h]}t[g]=(q?s[q]:s)[u]}return d.call(v||p,o,t,0)},aggregateGroups:function(a,m,c,o){var h=a.items,g=h.length,b=!Ext.isFunction(c),d={},f,j,p;for(f=0;f<g;++f){j=h[f];if(!b){p=this.aggregateItems(j.items,m,c,null,null,o)}else{p=j[c](m)}d[j.getGroupKey()]=p}return d},beginUpdate:function(){if(!this.updating++){this.notify("beginupdate")}},clear:function(){var c=this,d=c.generation,a=d?c.items:[],b,f;if(d){c.items=[];c.length=0;c.map={};c.indices={};c.generation++;b=c.getExtraKeys();if(b){for(f in b){b[f].clear()}}}return a},clone:function(){var a=this,b=new a.self(a.initialConfig);b.add(a.items);return b},collect:function(o,g,j){var f=this.items,b=f.length,a={},d=[],c,h,m;for(c=0;c<b;++c){m=f[c];m=(g?m[g]:m)[o];h=String(m);if((j||!Ext.isEmpty(m))&&!a[h]){a[h]=1;d.push(m)}}return d},contains:function(c){var a=false,b;if(c!=null){b=this.getKey(c);a=this.map[b]===c}return a},containsKey:function(a){return a in this.map},createFiltered:function(r,q,f,m,d){var j=this,g=new j.self(j.initialConfig),p=j.getRootProperty(),h=j.items,b,c,a,o,s;if(Ext.isFunction(r)){o=r;s=q}else{if(Ext.isString(r)){a=[new Ext.util.Filter({property:r,value:q,root:p,anyMatch:f,caseSensitive:m,exactMatch:d})]}else{if(r instanceof Ext.util.Filter){a=[r];r.setRoot(p)}else{if(Ext.isArray(r)){a=r.slice(0);for(c=0,b=a.length;c<b;++c){a[c].setRoot(p)}}}}o=Ext.util.Filter.createFilterFn(a)}s=s||j;for(c=0,b=h.length;c<b;c++){if(o.call(s,h[c])){g.add(h[c])}}return g},filterBy:function(b,a){return this.createFiltered(b,a)},each:function(g,f){var b=this.items,a=b.length,d,c;if(a){f=f||this;b=b.slice(0);for(d=0;d<a;d++){c=g.call(f,b[d],d,a);if(c===false){break}}}return c},eachKey:function(g,m){var f=this,d=f.items,b=d.length,a,j,h,c;if(b){m=m||f;d=d.slice(0);for(a=0;a<b;a++){h=f.getKey(j=d[a]);c=g.call(m,h,j,a,b);if(c===false){break}}}return c},endUpdate:function(){if(!--this.updating){this.notify("endupdate")}},find:function(h,g,j,d,c,b){if(Ext.isEmpty(g,false)){return null}var f=Ext.String.createRegex(g,d,c,b),a=this.getRootProperty();return this.findBy(function(m){return m&&f.test((a?m[a]:m)[h])},null,j)},findBy:function(g,m,a){var f=this,d=f.items,c=d.length,b,j,h;m=m||f;for(b=a||0;b<c;b++){h=f.getKey(j=d[b]);if(g.call(m,j,h)){return d[b]}}return null},findIndex:function(g,f,h,c,b,a){var d=this.find(g,f,h,c,b,a);return d?this.indexOf(d):-1},findIndexBy:function(b,a,d){var c=this.findBy(b,a,d);return c?this.indexOf(c):-1},first:function(b){var a=b?this.getGroups():undefined;return a?this.aggregateGroups(a,null,"first"):this.items[0]},last:function(b){var a=b?this.getGroups():undefined;return a?this.aggregateGroups(a,null,"last"):this.items[this.length-1]},get:function(a){return this.map[a]},getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},getCount:function(){return this.length},getKey:function(a){var b=a.id;return(b===0||b)?b:((b=a._id)===0||b)?b:a.getId()},getRange:function(d,a){var c=this.items,f=c.length,b;if(!f){b=[]}else{b=Ext.Number.clipIndices(f,[d,a]);b=c.slice(b[0],b[1])}return b},getValues:function(m,h,a,b){var g=this.items,d=Ext.Number.clipIndices(g.length,[a,b]),f=[],c,j;for(c=d[0],b=d[1];c<b;++c){j=g[c];j=(h?j[h]:j)[m];f.push(j)}return f},indexOf:function(b){if(!b){return -1}var a=this.getKey(b);return this.indexOfKey(a)},indexOfKey:function(a){var b=this,c=b.indices;if(a in b.map){if(!c){c=b.getIndices()}return c[a]}return -1},insert:function(c,f){var d=this,a=d.decodeItems(arguments,1),b=a;if(a.length){d.requestedIndex=c;d.splice(c,0,a);delete d.requestedIndex;b=(a.length===1)?a[0]:a}return b},itemChanged:function(z,j,q,r){var A=this,c=q===0||!!q,m=A.filtered&&A.getAutoFilter(),f=false,d=0,t=A.items,p=A.length-1,a=A.sorted&&p>0&&A.getAutoSort(),v=A.getSource(),u=0,o=false,s=false,y,w,g,B,h,b;if(v&&!v.updating){v.itemChanged(z,j,q,r)}else{w=A.getKey(z);if(m){h=A.indexOfKey(c?q:w);s=(h<0);o=A.isItemFiltered(z);f=(s!==o)}if(f){if(o){u=[z];b=-1}else{B=[z];b=A.length}}else{if(a&&!o){if(!m){h=A.indexOfKey(c?q:w)}g=A.getSortFn();if(h!==-1){if(h&&g(t[h-1],t[h])>0){d=-1;b=Ext.Array.binarySearch(t,z,0,h,g)}else{if(h<p&&g(t[h],t[h+1])>0){d=1;b=Ext.Array.binarySearch(t,z,h+1,g)}}if(d){B=[z]}}}}y={item:z,key:w,index:b,filterChanged:f,keyChanged:c,indexChanged:!!d,filtered:o,oldIndex:h,newIndex:b,wasFiltered:s,meta:r};if(c){y.oldKey=q}if(j){y.modified=j}A.beginUpdate();A.notify("beforeitemchange",[y]);if(c){A.updateKey(z,q)}if(B||u){A.splice(b,u,B)}if(d>0){y.newIndex--}else{if(d<0){y.oldIndex++}}A.notify(o?"filtereditemchange":"itemchange",[y]);A.endUpdate()}},remove:function(d){var c=this,a=c.decodeRemoveItems(arguments,0),b=c.length;c.splice(0,a);return b-c.length},removeAll:function(){var b=this,a=b.length;if(b.generation&&a){b.splice(0,a)}return b},removeAt:function(j,h){var m=this,b=m.length,f=Ext.Number,d=f.clipIndices(b,[j,(h===undefined)?1:h],f.Clip.COUNT),c=d[0],a=d[1]-c,o=(a===1)&&m.getAt(c),g;m.splice(c,a);g=m.length-b;return(o&&g)?o:g},removeByKey:function(a){var b=this.getByKey(a);if(!b||!this.remove(b)){return false}return b},replace:function(b){var a=this.indexOf(b);if(a===-1){this.add(b)}else{this.insert(a,b)}},splice:function(G,p,E){var o=this,d=o.sorted&&o.getAutoSort(),C=o.map,t=o.items,r=o.length,y=(p instanceof Array)?o.decodeRemoveItems(p):null,z=!y,H=Ext.Number,f=H.clipIndices(r,[G,z?p:0],H.Clip.COUNT),h=f[0],m=f[1],N=m-h,v=o.decodeItems(arguments,2),M=v?v.length:0,F,A,w,c=h,b=o.indices||((M||y)?o.getIndices():null),s=null,j=N?[h]:null,g=null,u=o.getSource(),a,J,K,P,D,I,O,q,B,L,R,Q,m;if(u&&!u.updating){if(z){y=[];for(P=0;P<N;++P){y.push(t[h+P])}}if(h<r){P=u.indexOf(t[h])}else{P=u.length}u.splice(P,y,v);return o}if(M){F=v;g=[];A={};if(d){Q=o.getSorters();if(M>1){if(!F.$cloned){v=F=F.slice(0)}o.sortData(F)}}for(P=0;P<M;++P){q=o.getKey(D=v[P]);if((O=A[q])!==undefined){(R||(R={}))[O]=1}else{I=b[q];if(I<h||m<=I){(j||(j=[])).push(I)}}A[q]=P;g.push(q)}if(R){B=g;F=[];g=[];F.$cloned=true;for(P=0;P<M;++P){if(!R[P]){D=v[P];F.push(D);g.push(B[P])}}M=F.length}s={items:F,keys:g}}for(P=y?y.length:0;P-->0;){q=o.getKey(y[P]);if((I=b[q])!==undefined){(j||(j=[])).push(I)}}if(!s&&!j){return o}o.beginUpdate();if(j){a=null;K=[];w={};if(j.length>1){j.sort(Ext.Array.numericSortFn)}for(P=0,L=j.length;P<L;++P){q=o.getKey(D=t[I=j[P]]);if(!(q in C)){continue}delete C[q];if(!a||I>(a.at+J.length)){K.push(a={at:I,items:(J=[]),keys:(B=[]),map:w,next:a,replacement:s});if(s){s.replaced=a}}J.push(w[q]=D);B.push(q);if(I<c){--c}if(N>1&&I===h){--N;j[P--]=++h}}if(s){s.at=c}for(O=K.length;O-->0;){a=K[O];P=a.at;L=a.items.length;if(P+L<r){o.indices=b=null}o.length=r-=L;t.splice(P,L);if(b){B=a.keys;for(P=0;P<L;++P){delete b[B[P]]}}++o.generation;o.notify("remove",[a])}}if(s){if(d&&M>1&&r){o.spliceMerge(F,g)}else{if(d){if(M>1){c=0;o.indices=b=null}else{c=Q.findInsertionIndex(s.items[0],t,o.getSortFn())}}if(c===r){m=c;for(P=F.length-1;P>=0;--P){t[m+P]=F[P]}b=o.indices;if(b){for(P=0;P<M;++P){b[g[P]]=c+P}}}else{o.indices=null;Ext.Array.insert(t,c,F)}for(P=0;P<M;++P){C[g[P]]=F[P]}o.length+=M;s.at=c;s.atItem=c===0?null:t[c-1];++o.generation;o.notify("add",[s])}}o.endUpdate();return o},update:function(b,a){var c=this;c.beginUpdate();try{return b.call(a||c,c)}catch(d){throw d}finally{c.endUpdate()}},updateKey:function(b,f){var a=this,d=a.map,h=a.indices,c=a.getSource(),g;if(c&&!c.updating){c.updateKey(b,f)}else{if((g=a.getKey(b))!==f){if(d[f]===b&&!(g in d)){delete d[f];a.updating++;a.generation++;d[g]=b;if(h){h[g]=h[f];delete h[f]}a.notify("updatekey",[{item:b,newKey:g,oldKey:f}]);a.updating--}}}},findInsertIndex:function(d){var f=this.getSource(),g=f.items,b=f.indexOf(d)-1,c,a;while(b>-1){c=g[b];a=this.indexOf(c);if(a>-1){return a+1}--b}return 0},onCollectionAdd:function(a,b){var o=this,q=b.atItem,m=b.items,g=o.requestedIndex,j,h,c,f,p,d;if(!o.sorted){if(g!==undefined){h=g}else{if(q){h=o.indexOf(q);if(h===-1){h=o.findInsertIndex(m[0])}else{++h}}else{h=0}}}if(o.getAutoFilter()&&o.filtered){for(f=0,d=m.length;f<d;++f){p=m[f];if(o.isItemFiltered(p)){if(!c){c=m.slice(0,f)}if(!j){j=[]}j.push(p)}else{if(c){c.push(p)}}}}o.splice((h<0)?o.length:h,0,c||m);if(j){o.notify("filteradd",[j])}},onCollectionBeforeItemChange:function(b,a){this.onCollectionUpdateKey=null},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(b,a){delete this.onCollectionUpdateKey;this.itemChanged(a.item,a.modified,a.oldKey,a.meta)},onCollectionFilteredItemChange:null,onCollectionRefresh:function(a){var g=this,b={},j={},d,m,f,h,c;f=a.items;f=g.filtered&&g.getAutoFilter()?Ext.Array.filter(f,g.getFilterFn()):f.slice(0);if(g.sorted){g.sortData(f)}g.items=f;g.length=c=f.length;g.map=b;g.indices=j;for(d=0;d<c;++d){h=g.getKey(m=f[d]);b[h]=m;j[h]=d}g.notify("refresh")},onCollectionRemove:function(b,a){this.splice(0,a.items)},onCollectionUpdateKey:function(b,a){this.updateKey(a.item,a.oldKey)},_aggregators:{average:function(c,d,b,f,a){var g=b-d;return g&&this._aggregators.sum.call(this,c,d,b,f,a)/g},bounds:function(f,a,b,m,g){for(var j,h,c,d=a;d<b;++d){j=f[d];j=(g?j[g]:j)[m];if(!(j<h)){h=j}if(!(j>c)){c=j}}return[c,h]},count:function(a){return a.length},extremes:function(g,a,c,p,m){var h=null,b=null,f,q,j,d,o;for(f=a;f<c;++f){q=g[f];o=(m?q[m]:q)[p];if(!(o<j)){j=o;h=q}if(!(o>d)){d=o;b=q}}return[b,h]},max:function(f,g,d,h,c){var a=this._aggregators.bounds.call(this,f,g,d,h,c);return a[1]},maxItem:function(f,g,d,h,c){var a=this._aggregators.extremes.call(this,f,g,d,h,c);return a[1]},min:function(f,g,d,h,c){var a=this._aggregators.bounds.call(this,f,g,d,h,c);return a[0]},minItem:function(f,g,d,h,c){var a=this._aggregators.extremes.call(this,f,g,d,h,c);return a[0]},sum:function(c,g,b,j,a){for(var h,f=0,d=g;d<b;++d){h=c[d];h=(a?h[a]:h)[j];f+=h}return f}},_eventToMethodMap:{add:"onCollectionAdd",beforeitemchange:"onCollectionBeforeItemChange",beginupdate:"onCollectionBeginUpdate",endupdate:"onCollectionEndUpdate",itemchange:"onCollectionItemChange",filtereditemchange:"onCollectionFilteredItemChange",refresh:"onCollectionRefresh",remove:"onCollectionRemove",beforesort:"beforeCollectionSort",sort:"onCollectionSort",filter:"onCollectionFilter",filteradd:"onCollectionFilterAdd",updatekey:"onCollectionUpdateKey"},addObserver:function(a){var b=this,c=b.observers;if(!c){b.observers=c=[]}c.push(a);if(c.length>1){Ext.Array.sort(c,b.prioritySortFn)}},prioritySortFn:function(g,f){var d=g.observerPriority||0,c=f.observerPriority||0;return d-c},applyExtraKeys:function(f,a){var g=this,d=a||{},c,b,h;for(b in f){h=f[b];if(!h.isCollectionKey){c={collection:g};if(Ext.isString(h)){c.property=h}else{c=Ext.apply(c,h)}h=new Ext.util.CollectionKey(c)}else{h.setCollection(g)}d[b]=g[b]=h;h.name=b}return d},applyGrouper:function(a){if(a){a=this.getSorters().decodeSorter(a,"Ext.util.Grouper")}return a},decodeItems:function(d,c){var g=this,b=(c===undefined)?d:d[c],a,h,f;if(!b||!b.$cloned){a=d.length>c+1||!Ext.isIterable(b);if(a){b=Ext.Array.slice(d,c);if(b.length===1&&b[0]===undefined){b.length=0}}h=g.getDecoder();if(h){if(!a){b=b.slice(0);a=true}for(f=b.length;f-->0;){if((b[f]=h.call(g,b[f]))===false){b.splice(f,1)}}}if(a){b.$cloned=true}}return b},getIndices:function(){var d=this,f=d.indices,a=d.items,g=a.length,c,b;if(!f){d.indices=f={};++d.indexRebuilds;for(c=0;c<g;++c){b=d.getKey(a[c]);f[b]=c}}return f},notify:function(d,h){var j=this,c=j.observers,o=j._eventToMethodMap[d],m=0,f,b,a,g;h=h||[];if(c&&o){for(f=0,b=c.length;f<b;++f){a=(g=c[f])[o];if(a){if(!m++){h.unshift(j)}a.apply(g,h)}}}if(!j.hasListeners){return}if(j.hasListeners[d]){if(!m){h.unshift(j)}j.fireEventArgs(d,h)}},getFilterFn:function(){return this.getFilters().getFilterFn()},getFilters:function(b){var a=this._filters;if(!a&&b!==false){a=new Ext.util.FilterCollection();this.setFilters(a)}return a},isItemFiltered:function(a){return !this.getFilters().filterFn(a)},onFilterChange:function(f){var d=this,g=d.getSource(),c,b,a;if(!g){c=d.getExtraKeys();if(c){b={};for(a in c){b[a]=c[a].clone(d)}}g=new Ext.util.Collection({keyFn:d.getKey,extraKeys:b,rootProperty:d.getRootProperty()});if(d.length){g.add(d.items)}d.setSource(g);d.autoSource=g}else{if(g.length||d.length){d.onCollectionRefresh(g)}}d.notify("filter")},applyFilters:function(a,b){if(a==null||(a&&a.isFilterCollection)){return a}if(a){if(!b){b=this.getFilters()}b.splice(0,b.length,a)}return b},updateFilters:function(a,b){var c=this;if(b){b.un("endupdate","onEndUpdateFilters",c)}if(a){a.on({endupdate:"onEndUpdateFilters",scope:c,priority:c.$endUpdatePriority});a.$filterable=c}c.onEndUpdateFilters(a)},onEndUpdateFilters:function(c){var b=this,d=b.filtered,a=!!c&&(c.length>0);if(d||a){b.filtered=a;b.onFilterChange(c)}},getSortFn:function(){return this._sortFn||this.createSortFn()},getSorters:function(b){var a=this._sorters;if(!a&&b!==false){a=new Ext.util.SorterCollection();this.setSorters(a)}return a},onSortChange:function(){if(this.sorted){this.sortItems()}},sort:function(a,c,d){var b=this.getSorters();b.addSort.apply(b,arguments);return this},sortData:function(a){Ext.Array.sort(a,this.getSortFn());return a},sortItems:function(b){var a=this;if(a.sorted){b=a.getSortFn()}a.indices=null;a.notify("beforesort",[a.getSorters(false)]);if(a.length){Ext.Array.sort(a.items,b)}a.notify("sort")},sortBy:function(a){return this.sortItems(a)},findInsertionIndex:function(c,a,b){if(!a){a=this.items}if(!b){b=this.getSortFn()}return Ext.Array.binarySearch(a,c,b)},applySorters:function(a,b){if(a==null||(a&&a.isSorterCollection)){return a}if(a){if(!b){b=this.getSorters()}b.splice(0,b.length,a)}return b},createSortFn:function(){var c=this,a=c.getGrouper(),d=c.getSorters(false),b=d?d.getSortFn():null;if(!a){return b}return function(f,h){var g=a.sort(f,h);if(!g&&b){g=b(f,h)}return g}},updateGrouper:function(b){var c=this,a=c.getGroups(),f=c.getSorters(),d;c.onSorterChange();c.grouped=!!b;if(b){if(c.getTrackGroups()){if(!a){a=new Ext.util.GroupCollection({itemRoot:c.getRootProperty()});a.$groupable=c;c.setGroups(a)}a.setGrouper(b);d=true}}else{if(a){c.removeObserver(a);a.destroy()}c.setGroups(null)}if(!f.updating){c.onEndUpdateSorters(f)}if(d){a.onCollectionRefresh(c)}},updateSorters:function(a,b){var c=this;if(b){b.un("endupdate","onEndUpdateSorters",c)}if(a){a.on({endupdate:"onEndUpdateSorters",scope:c,priority:c.$endUpdatePriority});a.$sortable=c}c.onSorterChange();c.onEndUpdateSorters(a)},onSorterChange:function(){this._sortFn=null},onEndUpdateSorters:function(c){var b=this,d=b.sorted,a=(b.grouped&&b.getAutoGroup())||(c&&c.length>0);if(d||a){b.sorted=!!a;b.onSortChange(c)}},removeObserver:function(a){var b=this.observers;if(b){Ext.Array.remove(b,a)}},spliceMerge:function(m,v){var u=this,t=u.map,g=m.length,c=0,o=u.items,w=o.length,j=[],h=0,q=[],d=u.getSortFn(),p,b,r,f,s,a;u.items=q;for(a=0;a<g;a=b){f=m[a];for(;c<w;++c){if(d(f,s=o[c])<0){break}q.push(s)}if(c===w){j[h++]={at:q.length,itemAt:q[q.length-1],items:(p=[])};if(h>1){j[h-2].next=j[h-1]}for(;a<g;++a){p.push(f=m[a]);q.push(f)}break}j[h++]={at:q.length,itemAt:q[q.length-1],items:(p=[f])};if(h>1){j[h-2].next=j[h-1]}q.push(f);for(b=a+1;b<g;++b){if(d(f=m[b],s)>=0){break}q.push(f);p.push(f)}}for(;c<w;++c){q.push(o[c])}for(r=0;r<g;++r){t[v[r]]=m[r]}u.length=q.length;++u.generation;u.indices=null;for(r=0;r<h;++r){u.notify("add",[j[r]])}},getGroups:function(){return(arguments.callee.$previous||Ext.Base.prototype.getGroups).call(this)||null},updateAutoGroup:function(b){var a=this.getGroups();if(a){a.setAutoGroup(b)}this.onEndUpdateSorters(this._sorters)},updateGroups:function(a,b){if(b){this.removeObserver(b)}if(a){this.addObserver(a)}},updateSource:function(b,a){var c=this.autoSource;if(a){a.removeObserver(this);if(a===c){c.destroy();this.autoSource=null}}if(b){b.addObserver(this);if(b.length||this.length){this.onCollectionRefresh(b)}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,"Collection"],function(){var a=this.prototype;a.removeAtKey=a.removeByKey;a.decodeRemoveItems=a.decodeItems;Ext.Object.each(a._aggregators,function(b){a[b]=function(f,d,c){return this.aggregate(f,b,d,c)};a[b+"ByGroup"]=function(c){return this.aggregateByGroup(c,b)}})}));(Ext.cmd.derive("Ext.util.ObjectTemplate",Ext.Base,{isObjectTemplate:true,excludeProperties:{},valueRe:/^[{][a-z\.]+[}]$/i,statics:{create:function(b,a){return b.isObjectTemplate?b:new Ext.util.ObjectTemplate(b,a)}},constructor:function(b,a){Ext.apply(this,a);this.template=b},apply:function(a){var b=this;delete b.apply;b.apply=b.compile(b.template);return b.apply(a)},privates:{compile:function(f){var g=this,b=g.excludeProperties,h,c,a,d;if(Ext.isString(f)){if(f.indexOf("{")<0){d=function(){return f}}else{if(g.valueRe.test(f)){f=f.substring(1,f.length-1).split(".");d=function(o){for(var j=o,m=0;j&&m<f.length;++m){j=j[f[m]]}return j}}else{f=new Ext.XTemplate(f);d=function(j){return f.apply(j)}}}}else{if(!f||Ext.isPrimitive(f)||Ext.isFunction(f)){d=function(){return f}}else{if(f instanceof Array){h=[];for(c=0,a=f.length;c<a;++c){h[c]=g.compile(f[c])}d=function(o){var j=[],m;for(m=0;m<a;++m){j[m]=h[m](o)}return j}}else{h={};for(c in f){if(!b[c]){h[c]=g.compile(f[c])}}d=function(p){var m={},o,j;for(o in f){j=b[o]?f[o]:h[o](p);if(j!==undefined){m[o]=j}}return m}}}}return d}}},1,0,0,0,0,0,[Ext.util,"ObjectTemplate"],0));(Ext.cmd.derive("Ext.data.schema.Role",Ext.Base,{isRole:true,left:true,owner:false,side:"left",isMany:false,defaultReaderType:"json",_internalReadOptions:{recordsOnly:true,asRoot:true},constructor:function(b,c){var d=this,a=c.extra;Ext.apply(d,c);if(a){delete a.type;Ext.apply(d,a);delete d.extra}d.association=b;if(b.owner===d.side){b.owner=d;d.owner=true}},processUpdate:function(){Ext.raise('Only the "many" for an association may be processed. "'+this.role+'" is not valid.')},processLoad:function(b,c,a,d){return a},checkMembership:Ext.emptyFn,adoptAssociated:function(b,c){var a=this.getAssociatedItem(b);if(a){c.adopt(a)}},createAssociationStore:function(g,p,f,q){var j=this,d=j.association,h=d.getFieldName(),m=d.isManyToMany,b=j.storeConfig,a=p.getId(),c={asynchronousLoad:false,model:j.cls,role:j,session:g,associatedEntity:p,disableMetaChangeEvent:true,pageSize:null,remoteFilter:true,trackRemoved:!g},o;if(m){c.filters=[{property:j.inverse.field,value:a,exactMatch:true}]}else{if(h){c.filters=[{property:h,value:a,exactMatch:true}];c.foreignKeyName=h}}if(b){Ext.apply(c,b)}o=Ext.Factory.store(c);j.onStoreCreate(o,g,a);if(h||(m&&g)){o.on({scope:j,add:"onAddToMany",remove:"onRemoveFromMany",clear:"onRemoveFromMany"})}if(f){o.loadData(f);o.complete=!!q}return o},onStoreCreate:Ext.emptyFn,getAssociatedStore:function(s,g,b,u,w){var z=this,q=z.getStoreName(),h=s[q],a=s.session,o=g&&g.reload,r=s.$source,j=false,c,d,t,v,p,m,f,y;if(!h){if(a){if(!u&&r){r=r[q];if(r&&!r.isLoading()){f=r;u=[];p=r.getData().items;for(t=0,v=p.length;t<v;++t){m=p[t];u.push(a.getRecord(m.self,m.id))}j=!!r.complete;c=true}}if(!c){y=!!u;u=z.findRecords(a,s,u,w);if(!y&&(!u||!u.length)){u=null}j=y}}else{j=!!(u&&u.length>0)}h=z.createAssociationStore(a,s,u,j);h.$source=f;if(!u&&(z.autoLoad||g)){o=true}s[q]=h}if(g){if(o||h.isLoading()){h.on("load",function(C,B,D,A){d=[C,A];b=b||g.scope||s;if(D){Ext.callback(g.success,b,d)}else{Ext.callback(g.failure,b,d)}d.push(D);Ext.callback(g,b,d);Ext.callback(g.callback,b,d)},null,{single:true})}else{d=[h,null];b=b||g.scope||s;Ext.callback(g.success,b,d);d.push(true);Ext.callback(g,b,d);Ext.callback(g.callback,b,d)}}if(o&&!h.isLoading()){h.load()}return h},getAssociatedItem:function(b){var a=this.isMany?this.getStoreName():this.getInstanceName();return b[a]||null},onDrop:Ext.emptyFn,getReaderRoot:function(){var a=this;return a.associationKey||(a.associationKey=a.association.schema.getNamer().readerRoot(a.role))},getReader:function(){var c=this,a=c.reader,d=c.cls,f=!c.associationKey,b=this.getReaderRoot();if(a&&!a.isReader){if(Ext.isString(a)){a={type:a}}Ext.applyIf(a,{model:d,rootProperty:b,useSimpleAccessors:f,type:c.defaultReaderType});a=c.reader=Ext.createByAlias("reader."+a.type,a)}return a},getInstanceName:function(){var a=this;return a.instanceName||(a.instanceName=a.association.schema.getNamer().instanceName(a.role))},getOldInstanceName:function(){return this.oldInstanceName||(this.oldInstanceName="$old"+this.getInstanceName())},getStoreName:function(){var a=this;return a.storeName||(a.storeName=a.association.schema.getNamer().storeName(a.role))},constructReader:function(f){var g=this,a=g.getReader(),h=g.cls,j=!g.associationKey,b=g.getReaderRoot(),c,d;if(!a){d=h.getProxy();if(d){c=d.getReader();a=new c.self();a.copyFrom(c);a.setRootProperty(b)}else{a=new f.self({model:h,useSimpleAccessors:j,rootProperty:b})}g.reader=a}return a},read:function(c,g,d,f){var a=this.constructReader(d),b=a.getRoot(g);if(b){return a.readRecords(b,f,this._internalReadOptions)}},getCallbackOptions:function(a,b,c){if(typeof a==="function"){a={callback:a,scope:b||c}}else{if(a){a=Ext.apply({},a);a.scope=b||a.scope||c}}return a},doGetFK:function(b,r,p){var j=this,q=j.cls,f=j.association.getFieldName(),o=j.getInstanceName(),m=b[o],a=r&&r.reload,d=m!==undefined&&!a,h=b.session,c,g;if(!d){if(h){c=b.get(f);if(c||c===0){d=h.peekRecord(q,c,true)&&!a;m=h.getRecord(q,c,false)}else{d=true;b[o]=m=null}}else{if(f){c=b.get(f);if(!c&&c!==0){d=true;b[o]=m=null}else{if(!m){m=q.createWithId(c)}}}else{d=true}}}else{if(m){d=!m.isLoading()}}if(d){if(r){g=[m,null];p=p||r.scope||b;Ext.callback(r.success,p,g);g.push(true);Ext.callback(r,p,g);Ext.callback(r.callback,p,g)}}else{b[o]=m;r=j.getCallbackOptions(r,p,b);m.load(r)}return m},doSetFK:function(a,m,r,q){var j=this,g=j.association.getFieldName(),o=j.getInstanceName(),f=a[o],c=j.inverse,d=c.setterName,h=a.session,p,b;if(m&&m.isEntity){if(f!==m){b=j.getOldInstanceName();a[b]=f;a[o]=m;if(f&&f.isEntity){f[c.getInstanceName()]=undefined}if(g){a.set(g,m.getId())}delete a[b];if(d){m[d](a)}}}else{p=(a.changingKey&&!c.isMany)||a.set(g,m);if(p&&f&&f.isEntity&&!f.isEqual(f.getId(),m)){a[o]=undefined;if(!c.isMany){f[c.getInstanceName()]=undefined}}}if(r){if(Ext.isFunction(r)){r={callback:r,scope:q||a}}return a.save(r)}}},1,0,0,0,0,0,[Ext.data.schema,"Role"],0));(Ext.cmd.derive("Ext.data.schema.Association",Ext.Base,{isOneToOne:false,isManyToOne:false,isManyToMany:false,owner:null,field:null,constructor:function(a){var c=this,d,b;Ext.apply(c,a);c.left=d=new c.Left(c,c.left);c.right=b=new c.Right(c,c.right);d.inverse=b;b.inverse=d},hasField:function(){return !!this.field},getFieldName:function(){var a=this.field;return a?a.name:""}},1,0,0,0,0,0,[Ext.data.schema,"Association"],0));(Ext.cmd.derive("Ext.data.schema.OneToOne",Ext.data.schema.Association,{isOneToOne:true,isToOne:true,kind:"one-to-one",Left:Ext.define(null,{extend:"Ext.data.schema.Role",onDrop:function(a,b){var c=this.getAssociatedItem(a);a[this.getInstanceName()]=null;if(c){c[this.inverse.getInstanceName()]=null}},createGetter:function(){var a=this;return function(){return a.doGet(this)}},createSetter:function(){var a=this;return function(b){return a.doSet(this,b)}},doGet:function(a){var b=this.getInstanceName(),c=a[b],d=a.session;if(!c&&d){}return c||null},doSet:function(a,f){var b=this.getInstanceName(),d=a[b],c=this.inverse.setterName;if(d!==f){a[b]=f;if(c){f[c](a)}}return d},read:function(a,d,b,f){var c=this,g=c.callParent([a,d,b,f]),h;if(g){h=g[0];if(h){h[c.inverse.getInstanceName()]=a;a[c.getInstanceName()]=h;delete a.data[c.role]}}}}),Right:Ext.define(null,{extend:"Ext.data.schema.Role",left:false,side:"right",createGetter:function(){var a=this;return function(b,c){return a.doGetFK(this,b,c)}},createSetter:function(){var a=this;return function(d,b,c){return a.doSetFK(this,d,b,c)}},onDrop:function(g,d){var b=this,c=b.association.field,a=b.getAssociatedItem(g),f;if(b.inverse.owner){if(d){f=g.get(c.name);if(f||f===0){a=d.getEntry(b.cls,f).record;if(a){a.drop()}}}else{if(a){a.drop()}}}if(c){g.set(c.name,null)}g[b.getInstanceName()]=null;if(a){a[b.inverse.getInstanceName()]=null}},onValueChange:function(j,h,g){var f=this,a=j[f.getOldInstanceName()]||f.getAssociatedItem(j),d=g||g===0,c=f.getInstanceName(),b=f.cls;j.changingKey=true;f.doSetFK(j,g);if(!d){j[c]=null}else{if(h&&b){j[c]=h.peekRecord(b,g)||undefined}}if(f.inverse.owner&&a){f.association.schema.queueKeyCheck(a,f)}j.changingKey=false},checkKeyForDrop:function(a){var b=this.inverse.getAssociatedItem(a);if(!b){a.drop()}},read:function(d,f,t,g){var m=this,r=m.callParent([d,f,t,g]),o,q,s,j,p,b,c,a,h;if(r){o=r[0];q=m.association.field;if(q){s=q.name}j=d.session;h=d.data;if(o){if(j){p=j.getRefs(o,this.inverse,true);a=(p&&p[d.id])||(h[s]===undefined)}else{a=true}if(a){if(q){c=h[s];b=o.id;if(c!==b){h[s]=b;if(j){j.updateReference(d,q,b,c)}}}o[m.inverse.getInstanceName()]=d;d[m.getInstanceName()]=o}delete h[m.role]}}}})},0,0,0,0,0,0,[Ext.data.schema,"OneToOne"],0));(Ext.cmd.derive("Ext.data.schema.ManyToOne",Ext.data.schema.Association,{isManyToOne:true,isToOne:true,kind:"many-to-one",Left:Ext.define(null,{extend:"Ext.data.schema.Role",isMany:true,onDrop:function(h,f){var g=this,m=g.getAssociatedItem(h),b,d,c,j,a;if(m){b=m.removeAll();if(b&&g.inverse.owner){for(c=0,d=b.length;c<d;++c){b[c].drop()}}m.destroy();h[g.getStoreName()]=null}else{if(f){b=f.getRefs(h,g);if(b){for(a in b){b[a].drop()}}}}},processUpdate:function(g,b){var h=this,d=h.inverse.cls,f=b.R,a,j,m,c;if(f){for(a in f){j=g.peekRecord(d,a);if(j){c=g.getEntityList(h.cls,f[a]);m=h.getAssociatedItem(j);if(m){m.loadData(c);m.complete=true}else{j[h.getterName](null,null,c)}}else{g.onInvalidAssociationEntity(d,a)}}}},findRecords:function(j,m,d,r){var h=d,o=j.getRefs(m,this,true),p=this.association.field,q=p.name,c,b,f,g,a;if(!m.phantom){h=[];if(o||r){if(d){a={};for(f=0,g=d.length;f<g;++f){c=d[f];b=c.id;if(o&&o[b]){h.push(c)}else{if(r&&c.data[q]===undefined){h.push(c);c.data[q]=m.id;j.updateReference(c,p,m.id,undefined)}}a[b]=true}}if(o){for(b in o){if(!a||!a[b]){h.push(o[b])}}}}}return h},processLoad:function(b,a,f,d){var c=f;if(d){c=this.findRecords(d,a,f,true)}this.onLoadMany(a,c,d);return c},adoptAssociated:function(b,g){var c=this.getAssociatedItem(b),f,d,a;if(c){c.setSession(g);f=c.getData().items;for(d=0,a=f.length;d<a;++d){g.adopt(f[d])}}},createGetter:function(){var a=this;return function(b,c,d){return a.getAssociatedStore(this,b,c,d,a,true)}},createSetter:null,onAddToMany:function(a,b){this.syncFK(b,a.getAssociatedEntity(),false)},onLoadMany:function(o,f,m){var q=this.inverse.getInstanceName(),b=o.getId(),p=this.association.field,h,j,d,c,g,a;if(p){for(h=0,j=f.length;h<j;++h){d=f[h];d[q]=o;if(p){a=p.name;g=d.data;c=g[a];if(c!==b){g[a]=b;if(m){m.updateReference(d,p,b,c)}}}}}},onRemoveFromMany:function(a,b){this.syncFK(b,a.getAssociatedEntity(),true)},read:function(h,a,o,c){var g=this,m=g.inverse.getInstanceName(),b=g.callParent([h,a,o,c]),j,f,d;if(b){j=h[g.getterName](null,null,b);delete h.data[g.role];b=j.getData().items;for(d=0,f=b.length;d<f;++d){b[d][m]=h}}},syncFK:function(f,o,p){var m=this.association.getFieldName(),h=this.inverse,g=h.setterName,q=h.getInstanceName(),j=f.length,b=o.getId(),a,d,c;while(j-->0){d=f[j];a=!d.isEqual(b,d.get(m));c=p?null:o;if(a!==p){d.changingKey=true;d[g](c);d.changingKey=false}else{d[q]=c}}}}),Right:Ext.define(null,{extend:"Ext.data.schema.Role",left:false,side:"right",onDrop:function(c,b){var a=this.association.field;if(a){c.set(a.name,null)}c[this.getInstanceName()]=null},createGetter:function(){var a=this;return function(b,c){return a.doGetFK(this,b,c)}},createSetter:function(){var a=this;return function(b,c,d){return a.doSetFK(this,b,c,d)}},checkMembership:function(c,d){var b=this.association.field,a;a=this.getSessionStore(c,d.get(b.name));if(a&&!a.contains(d)){a.add(d)}},onValueChange:function(d,j,b,a){var m=this,q=m.getInstanceName(),s=m.cls,c,r,p,f,g,o,h;if(!d.changingKey){c=b||b===0;if(!c){d[q]=null}if(j){p=m.getSessionStore(j,a);if(p){p.remove(d)}if(c){p=m.getSessionStore(j,b);if(p&&!p.isLoading()){p.add(d)}if(s){h=j.peekRecord(s,b)}d[q]=h||undefined}}else{r=d.joined;if(r){for(f=0,g=r.length;f<g;++f){p=r[f];if(p.isStore){o=p.getAssociatedEntity();if(o&&o.self===m.cls&&o.getId()===a){p.remove(d)}}}}}}if(m.owner&&b===null){m.association.schema.queueKeyCheck(d,m)}},checkKeyForDrop:function(b){var a=this.association.field;if(b.get(a.name)===null){b.drop()}},getSessionStore:function(c,b){var a=this.cls,d;if(a){d=c.peekRecord(a,b);if(d){return this.inverse.getAssociatedItem(d)}}},read:function(g,c,b,f){var d=this.callParent([g,c,b,f]),a;if(d){a=d[0];if(a){g[this.getInstanceName()]=a;delete g.data[this.role]}}}})},0,0,0,0,0,0,[Ext.data.schema,"ManyToOne"],0));(Ext.cmd.derive("Ext.data.schema.ManyToMany",Ext.data.schema.Association,{isManyToMany:true,isToMany:true,kind:"many-to-many",Left:Ext.define(null,{extend:"Ext.data.schema.Role",isMany:true,digitRe:/^\d+$/,findRecords:function(o,p,d){var q=o.getMatrixSlice(this.inverse,p.id),f=q.members,m=[],r=this.cls,a,h,j,b,g,c;if(d){a={};for(h=0,j=d.length;h<j;++h){c=d[h];b=c.id;g=f[b];if(!(g&&g[2]===-1)){m.push(c)}a[b]=true}}for(b in f){g=f[b];if(!a||!a[b]&&(g&&g[2]!==-1)){c=o.peekRecord(r,b);if(c){m.push(c)}}}return m},processLoad:function(b,a,f,d){var c=f;if(d){c=this.findRecords(d,a,f);this.onAddToMany(b,c,true)}return c},processUpdate:function(g,b){var h=this,d=h.inverse.cls,f=b.R,a,j,m,c;if(f){for(a in f){j=g.peekRecord(d,a);if(j){c=g.getEntityList(h.cls,f[a]);m=h.getAssociatedItem(j);if(m){m.loadData(c);m.complete=true}else{j[h.getterName](null,null,c)}}else{g.onInvalidAssociationEntity(d,a)}}}h.processMatrixBlock(g,b.C,1);h.processMatrixBlock(g,b.D,-1)},checkMembership:function(j,m){var o=j.getMatrix(this.association,true),h,d,f,q,r,a,c,g,b,p;if(!o){return}h=this.left?o.right:o.left;d=h.inverse.role.cls;f=this.inverse;r=h.slices;if(r){q=r[m.id];if(q){c=q.members;for(a in c){g=c[a];if(g[2]!==-1){b=j.peekRecord(d,a);if(b){p=f.getAssociatedItem(b);if(p){p.matrixUpdate=1;p.add(m);p.matrixUpdate=0}}}}}}},onStoreCreate:function(b,d,f){var c=this,a;if(d){a=d.getMatrixSlice(c.inverse,f);a.attach(b);a.notify=c.onMatrixUpdate;a.scope=c}},processMatrixBlock:function(f,d,c){var a=this.inverse,b=this.digitRe,g,h;if(d){for(h in d){if(b.test(h)){h=parseInt(h,10)}g=f.getMatrixSlice(a,h);g.update(d[h],c)}}},createGetter:function(){var a=this;return function(b,c,d){return a.getAssociatedStore(this,b,c,d,false)}},onAddToMany:function(a,c,b){if(!a.matrixUpdate){a.matrixUpdate=1;a.matrix.update(c,b===true?0:1);a.matrixUpdate=0}},onRemoveFromMany:function(b,a){if(!b.matrixUpdate){b.matrixUpdate=1;b.matrix.update(a,-1);b.matrixUpdate=0}},read:function(a,d,b,f){var c=this,g=c.callParent([a,d,b,f]);if(g){a[c.getterName](null,null,g);delete a.data[c.role]}},onMatrixUpdate:function(f,h,d){var a=f.store,b,g,c;if(a&&!a.loading&&!a.matrixUpdate){a.matrixUpdate=1;b=a.indexOfId(h);if(d<0){if(b>=0){a.remove([b])}}else{if(b<0){c=a.getSession().getEntry(this.type,h);g=c&&c.record;if(g){a.add(g)}}}a.matrixUpdate=0}},adoptAssociated:function(b,g){var d=this.getAssociatedItem(b),c,f,a;if(d){d.setSession(g);this.onStoreCreate(d,g,b.getId());c=d.getData().items;for(f=0,a=c.length;f<a;++f){g.adopt(c[f])}}}},function(){var a=this;Ext.ClassManager.onCreated(function(){Ext.data.schema.ManyToMany.prototype.Right=Ext.define(null,{extend:a,left:false,side:"right"})},null,"Ext.data.schema.ManyToMany")})},0,0,0,0,0,0,[Ext.data.schema,"ManyToMany"],0));(Ext.cmd.derive("Ext.util.Inflector",Ext.Base,{singleton:true,plurals:[[(/(quiz)$/i),"$1zes"],[(/^(ox)$/i),"$1en"],[(/([m|l])ouse$/i),"$1ice"],[(/(matr|vert|ind)ix|ex$/i),"$1ices"],[(/(x|ch|ss|sh)$/i),"$1es"],[(/([^aeiouy]|qu)y$/i),"$1ies"],[(/(hive)$/i),"$1s"],[(/(?:([^f])fe|([lr])f)$/i),"$1$2ves"],[(/sis$/i),"ses"],[(/([ti])um$/i),"$1a"],[(/(buffal|tomat|potat)o$/i),"$1oes"],[(/(bu)s$/i),"$1ses"],[(/(alias|status|sex)$/i),"$1es"],[(/(octop|vir)us$/i),"$1i"],[(/(ax|test)is$/i),"$1es"],[(/^(p)erson$/i),"$1eople"],[(/^(m)an$/i),"$1en"],[(/(.*)(child)(ren)?$/i),"$1$2ren"],[(/s$/i),"s"],[(/$/),"s"]],singulars:[[(/(address)$/i),"$1"],[(/(quiz)zes$/i),"$1"],[(/(matr)ices$/i),"$1ix"],[(/(vert|ind)ices$/i),"$1ex"],[(/^(ox)en/i),"$1"],[(/(alias|status)es$/i),"$1"],[(/(octop|vir)i$/i),"$1us"],[(/(cris|ax|test)es$/i),"$1is"],[(/(shoe)s$/i),"$1"],[(/(o)es$/i),"$1"],[(/(bus)es$/i),"$1"],[(/([m|l])ice$/i),"$1ouse"],[(/(x|ch|ss|sh)es$/i),"$1"],[(/(m)ovies$/i),"$1ovie"],[(/(s)eries$/i),"$1eries"],[(/([^aeiouy]|qu)ies$/i),"$1y"],[(/([lr])ves$/i),"$1f"],[(/(tive)s$/i),"$1"],[(/(hive)s$/i),"$1"],[(/([^f])ves$/i),"$1fe"],[(/(^analy)ses$/i),"$1sis"],[(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i),"$1$2sis"],[(/([ti])a$/i),"$1um"],[(/(n)ews$/i),"$1ews"],[(/(p)eople$/i),"$1erson"],[(/s$/i),""]],uncountable:["sheep","fish","series","species","money","rice","information","equipment","grass","mud","offspring","deer","means"],singular:function(b,a){this.singulars.unshift([b,a])},plural:function(b,a){this.plurals.unshift([b,a])},clearSingulars:function(){this.singulars=[]},clearPlurals:function(){this.plurals=[]},isTransnumeral:function(a){return Ext.Array.indexOf(this.uncountable,a)!=-1},pluralize:function(g){if(this.isTransnumeral(g)){return g}var f=this.plurals,d=f.length,a,c,b;for(b=0;b<d;b++){a=f[b];c=a[0];if(c==g||(c.test&&c.test(g))){return g.replace(c,a[1])}}return g},singularize:function(g){if(this.isTransnumeral(g)){return g}var f=this.singulars,d=f.length,a,c,b;for(b=0;b<d;b++){a=f[b];c=a[0];if(c==g||(c.test&&c.test(g))){return g.replace(c,a[1])}}return g},classify:function(a){return Ext.String.capitalize(this.singularize(a))},ordinalize:function(d){var b=parseInt(d,10),c=b%10,a=b%100;if(11<=a&&a<=13){return d+"th"}else{switch(c){case 1:return d+"st";case 2:return d+"nd";case 3:return d+"rd";default:return d+"th"}}}},0,0,0,0,0,0,[Ext.util,"Inflector"],function(){var b={alumnus:"alumni",cactus:"cacti",focus:"foci",nucleus:"nuclei",radius:"radii",stimulus:"stimuli",ellipsis:"ellipses",paralysis:"paralyses",oasis:"oases",appendix:"appendices",index:"indexes",beau:"beaux",bureau:"bureaux",tableau:"tableaux",woman:"women",child:"children",man:"men",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",phenomenon:"phenomena",foot:"feet",goose:"geese",tooth:"teeth",antenna:"antennae",formula:"formulae",nebula:"nebulae",vertebra:"vertebrae",vita:"vitae"},a;for(a in b){if(b.hasOwnProperty(a)){this.plural(a,b[a]);this.singular(b[a],a)}}}));(Ext.cmd.derive("Ext.data.schema.Namer",Ext.Base,{isNamer:true,capitalize:function(a){return Ext.String.capitalize(a)},fieldRole:function(b){var a=b.match(this.endsWithIdRe,"");if(a){b=b.substr(0,b.length-(a[1]||a[2]).length)}return this.apply("uncapitalize",b)},idField:function(a){return this.apply("uncapitalize,singularize",a)+"Id"},instanceName:function(a){return this.apply("underscore",a)},multiRole:function(a){return this.apply("undotted,uncapitalize,pluralize",a)},pluralize:function(a){return Ext.util.Inflector.pluralize(a)},readerRoot:function(a){return this.apply("uncapitalize",a)},singularize:function(a){return Ext.util.Inflector.singularize(a)},storeName:function(a){return this.apply("underscore",a)},uncapitalize:function(a){return Ext.String.uncapitalize(a)},underscore:function(a){return"_"+a},uniRole:function(a){return this.apply("undotted,uncapitalize,singularize",a)},undotted:function(b){if(b.indexOf(".")<0){return b}var c=b.split("."),a=c.length;while(a-->1){c[a]=this.apply("capitalize",c[a])}return c.join("")},getterName:function(b){var a=b.role;if(b&&b.isMany){return a}return"get"+this.apply("capitalize",a)},inverseFieldRole:function(h,j,f,b){var g=this,a=g.apply(j?"uniRole":"multiRole",h),d=g.apply("pluralize",f),c=g.apply("undotted,pluralize",b);if(d.toLowerCase()!==c.toLowerCase()){a=f+g.apply("capitalize",a)}return a},manyToMany:function(f,d,a){var c=this,b=c.apply("undotted,capitalize,singularize",d)+c.apply("undotted,capitalize,pluralize",a);if(f){b=c.apply("capitalize",f+b)}return b},manyToOne:function(d,b,a,c){return this.apply("capitalize,singularize",a)+this.apply("capitalize",b)},matrixRole:function(c,b){var a=this.apply(c?"multiRole,capitalize":"multiRole",b);return c?c+a:a},oneToOne:function(d,b,a,c){return this.apply("undotted,capitalize,singularize",a)+this.apply("capitalize",b)},setterName:function(a){return"set"+this.apply("capitalize",a.role)},endsWithIdRe:/(?:(_id)|[^A-Z](Id))$/,cache:{},apply:function(f,c){var j=this,b=j.cache,m=b[c]||(b[c]={}),h=m[f],g,d,a;if(!h){if(f.indexOf(",")<0){h=j[f](c)}else{d=(a=f.split(",")).length;h=c;for(g=0;g<d;++g){h=j.apply(a[g],h)}}m[f]=h}return h}},0,0,0,0,["namer.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.schema,"Namer"],0));(Ext.cmd.derive("Ext.data.schema.Schema",Ext.Base,{aliasPrefix:"schema.",isSchema:true,type:"default",statics:{instances:{},get:function(d){var g=this,c=g.instances,h="default",b=d&&Ext.isString(d),a,f;if(d){if(d.isSchema){return d}h=b?d:(d.id||h)}if(!(a=c[h])){c[h]=a=g.create(d);a.id=h}else{if(d&&!b){f=Ext.merge({},a.config);Ext.merge(f,d);a.setConfig(f);a.config=f}}return a},lookupEntity:function(a){var d=null,g=this.instances,c,b,f;if(a){if(a.isEntity){d=a.self}else{if(Ext.isFunction(a)){d=a}else{if(Ext.isString(a)){d=Ext.ClassManager.get(a);if(d&&(!d.prototype||!d.prototype.isEntity)){d=null}if(!d){for(b in g){f=g[b];c=f.getEntity(a);if(c){if(d){Ext.raise('Ambiguous entity name "'+a+'". Defined by schema "'+d.schema.type+'" and "'+b+'"')}d=c}}}if(!d){Ext.raise('No such Entity "'+a+'".')}}}}}return d}},assocCount:0,entityCount:0,config:{defaultIdentifier:null,keyCheckDelay:10,namer:"default",namespace:null,proxy:{type:"ajax",url:"{prefix}/{entityName}"},urlPrefix:""},onClassExtended:function(a,c){var b=c.alias;if(b&&!c.type){if(!Ext.isString(b)){b=b[0]}a.prototype.type=b.substring(this.prototype.aliasPrefix.length)}},constructor:function(a){this.initConfig(a);this.clear()},applyDefaultIdentifier:function(a){return a&&Ext.Factory.dataIdentifier(a)},applyNamer:function(b){var a=Ext.data.schema.Namer.create(b);a.schema=this;return a},applyNamespace:function(b){if(b){var a=b.length-1;if(b.charAt(a)!=="."){b+="."}}return b},applyProxy:function(a){return Ext.util.ObjectTemplate.create(a)},eachAssociation:function(d,c){var b=this.associations,a;for(a in b){if(b.hasOwnProperty(a)){if(d.call(c,a,b[a])===false){break}}}},eachEntity:function(c,b){var d=this.entities,a;for(a in d){if(d.hasOwnProperty(a)){if(c.call(b,a,d[a].cls)===false){break}}}},getAssociation:function(a){var b=this.associations[a];return b||null},getEntity:function(a){var b=this.entityClasses[a]||this.entities[a];return(b&&b.cls)||null},getEntityName:function(a){var d=this.getNamespace(),c,b;if(typeof a==="string"){b=a}else{b=a.$className||null}if(b){if(d){c=d.length;if(b.substring(0,c)!==d){return b}}if(c){b=b.substring(c)}}return b},hasAssociations:function(a){a=a.entityName||a;return !!this.associationEntityMap[a]},hasEntity:function(a){var b=this.getEntityName(a);return !!(this.entities[b]||this.entityClasses[b])},addMatrix:function(r,h,d,c,v){var w=this,p=w.getNamer(),t=w.associations,a=w.entities,g=c.type,u=v.type,f=c.field||p.apply("idField",g),m=v.field||p.apply("idField",u),b=c.role||p.matrixRole(d,g),q=v.role||p.matrixRole(d,u),s,j,o;j=a[g]||(a[g]={cls:null,name:g,associations:{}});o=a[u]||(a[u]={cls:null,name:u,associations:{}});++w.assocCount;t[h]=s=new Ext.data.schema.ManyToMany({name:h,schema:w,definedBy:r,left:{cls:j.cls,type:g,role:b,field:f,associationKey:c.associationKey},right:{cls:o.cls,type:u,role:q,field:m,associationKey:v.associationKey}});j.associations[s.right.role]=s.right;o.associations[s.left.role]=s.left;if(j.cls){w.associationEntityMap[j.cls.entityName]=true}if(o.cls){w.associationEntityMap[o.cls.entityName]=true}w.decorateModel(s)},addReference:function(v,a,t,b){var z=this,r=z.getNamer(),d=z.entities,w=z.associations,q=v.entityName,f=t.association,u=!!t.legacy,m=t.child,p=t.parent,s=t.role,y=t.type||p||m,o=t.inverse,j=Ext.isString(o)?{role:o}:o,h=j&&j.role,c,g;if(!s){if(u){s=r.apply("uncapitalize",y)}else{s=r.apply("fieldRole",a.name)}}if(!h){h=r.inverseFieldRole(q,b,s,y)}if(!f){if(b){f=r.oneToOne(v,h,y,s)}else{f=r.manyToOne(v,h,y,s)}}c=d[y]||(d[y]={cls:null,name:y,associations:{}});g=b?Ext.data.schema.OneToOne:Ext.data.schema.ManyToOne;f=new g({name:f,owner:m?"left":(p?"right":null),definedBy:v,schema:z,field:a,nullable:a?!!a.allowBlank:true,legacy:t.legacy,left:{cls:v,type:q,role:h,extra:j},right:{cls:c.cls,type:y,role:s,extra:t}});v.associations[s]=f.right;c.associations[h]=f.left;if(a){a.reference=f.right;v.references.push(a)}++z.assocCount;z.associationEntityMap[q]=true;if(c.cls){z.associationEntityMap[c.cls.entityName]=true}w[f.name]=f;if(f.right.cls){z.decorateModel(f)}},privates:{addEntity:function(d){var j=this,h=j.entities,o=d.entityName,p=h[o],g=d.fields,c,m,f,b,a;if(!p){h[o]=p={name:o,associations:{}}}else{c=p.associations;for(a in c){c[a].inverse.cls=d;j.associationEntityMap[o]=true;j.decorateModel(c[a].association)}}p.cls=d;d.prototype.associations=d.associations=p.associations;j.entityClasses[d.$className]=p;++j.entityCount;for(f=0,b=g.length;f<b;++f){m=g[f];if(m.reference){j.addReferenceDescr(d,m)}}},addMatrices:function(g,a){var f=this,b,d,c;if(Ext.isString(a)){f.addMatrixDescr(g,null,a)}else{if(a[0]){for(b=0,d=a.length;b<d;++b){f.addMatrixDescr(g,null,a[b])}}else{for(c in a){f.addMatrixDescr(g,c,a[c])}}}},addMatrixDescr:function(f,a,g){var h=this,m=f.entityName,d=h.associations,j=h.getNamer(),c=g.left,p=g.right,o,b;if(Ext.isString(g)){if(g.charAt(0)==="#"){c={type:m};p={type:g.substring(1)}}else{if(g.charAt(o=g.length-1)==="#"){c={type:g.substring(0,o)};p={type:m}}else{if(j.apply("multiRole",m)<j.apply("multiRole",g)){c={type:m};p={type:g}}else{c={type:g};p={type:m}}}}}else{b=g.relation;if(c||(!p&&j.apply("multiRole",m)<j.apply("multiRole",g.type))){if(!c||c===true){c={type:m}}else{c=Ext.apply({type:m},c)}p=g}else{if(!p||p===true){p={type:m}}else{p=Ext.apply({type:m},p)}c=g}}if(!a){a=j.manyToMany(b,c.type,p.type)}if(!(a in d)){h.addMatrix(f,a,b,c,p)}},addReferenceDescr:function(b,d){var a=this,c=d.$reference;if(Ext.isString(c)){c={type:c}}else{c=Ext.apply({},c)}if(c.legacy){if(c.single){a.addLegacySingle(b,c)}else{a.addLegacyHasMany(b,c)}}else{a.addReference(b,d,c,d.unique)}},addPending:function(a,c,f,b){var d=this.pending;if(!d[a]){d[a]=[]}d[a].push([c,f,b])},addLegacyBelongsTo:function(a,b){this.addLegacySingle(a,b)},addLegacyHasOne:function(a,b){this.addLegacySingle(a,b)},addLegacySingle:function(c,f){var b,a,d;f=this.constructLegacyAssociation(c,f);f.single=true;a=f.type;b=f.foreignKey||(a.toLowerCase()+"_id");d=c.getField(b);if(d){d.$reference=f}this.addReference(c,d,f,true)},addLegacyHasMany:function(d,m){var o=this,g=o.entities,c=o.pending,a=m.associationKey,q,b,p,j,h,f;m=this.constructLegacyAssociation(d,m);b=m.type;j=g[b];if(j&&j.cls){m.type=d.entityName;h=m.foreignKey||(m.type.toLowerCase()+"_id");q=j.cls;p=q.getField(h);m.inverse=m||{};f=m.name;if(f||a){if(f){m.inverse.role=f}if(a){m.inverse.associationKey=a}}if(p){p.$reference=m}o.addReference(q,p,m,false)}else{if(!c[b]){c[b]=[]}c[b].push([d,m])}},constructLegacyAssociation:function(b,c){if(Ext.isString(c)){c={model:c}}c.legacy=true;c.type=this.getEntityName(c.model);var a=c.associatedName||c.name;if(a){c.role=a}return c},afterLegacyAssociations:function(b){var g=this.pending,c=b.entityName,f=g[c],d,a;if(f){for(d=0,a=f.length;d<a;++d){this.addLegacyHasMany.apply(this,f[d])}delete g[c]}},clear:function(b){var a=this,c=a.timer;delete a.setConfig;if(c){window.clearTimeout(c);a.timer=null}a.associations={};a.associationEntityMap={};a.entities={};a.entityClasses={};a.pending={};a.assocCount=a.entityCount=0;if(b){a.setNamespace(null)}},constructProxy:function(d){var b=this,c=Ext.Object.chain(d),a=b.getProxy();c.schema=b;c.prefix=b.getUrlPrefix();return a.apply(c)},applyDecoration:function(h){var f=this,a=h.inverse.cls,g=f.getNamer(),c,b,d;if(a&&!h.decorated){h.decorated=true;d=a.prototype;if(!(c=h.getterName)){h.getterName=c=g.getterName(h)}d[c]=h.createGetter();if(h.createSetter){if(!(b=h.setterName)){h.setterName=b=g.setterName(h)}d[b]=h.createSetter()}}},decorateModel:function(a){this.applyDecoration(a.left);this.applyDecoration(a.right)},processKeyChecks:function(d){var g=this,b=g.keyCheckQueue,h=g.timer,a,c,f;if(h){window.clearTimeout(h);g.timer=null}if(!b){return}do{b=g.keyCheckQueue;g.keyCheckQueue=[];for(c=0,a=b.length;c<a;++c){f=b[c];f.role.checkKeyForDrop(f.record)}}while(d&&g.keyCheckQueue.length)},queueKeyCheck:function(a,f){var c=this,b=c.keyCheckQueue,d=c.timer;if(!b){c.keyCheckQueue=b=[]}b.push({record:a,role:f});if(!d){c.timer=d=Ext.Function.defer(c.processKeyChecks,c.getKeyCheckDelay(),c)}},rankEntities:function(){var f=this,g=f.entities,a=Ext.Object.getKeys(g),d=a.length,c,b;f.nextRank=1;a.sort();for(b=0;b<d;++b){c=g[a[b]].cls;if(!c.rank){f.rankEntity(c)}}},rankEntity:function(c){var b=c.associations,f,d,a;for(a in b){d=b[a];if(!d.left&&d.association.field){f=d.cls;if(!f.rank){this.rankEntity(f)}}}c.rank=this.nextRank++}}},1,0,0,0,["schema.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.schema,"Schema"],0));(Ext.cmd.derive("Ext.data.AbstractStore",Ext.Base,{factoryConfig:{defaultType:"store",type:"store"},$configPrefixed:false,$configStrict:false,config:{filters:null,autoDestroy:undefined,storeId:null,statefulFilters:false,sorters:null,remoteSort:{lazy:true,$value:false},remoteFilter:{lazy:true,$value:false},groupField:undefined,groupDir:"ASC",grouper:null,pageSize:25},currentPage:1,loading:false,isStore:true,updating:0,constructor:function(b){var c=this,a;c.isInitializing=true;c.mixins.observable.constructor.call(c,b);c.isInitializing=false;a=c.getStoreId();if(!a&&(b&&b.id)){c.setStoreId(a=b.id)}if(a){Ext.data.StoreManager.register(c)}},getCount:function(){return this.getData().getCount()},rangeCached:function(b,a){return this.getData().getCount()>=Math.max(b,a)},find:function(g,f,h,j,a,d){var c=!j,b=!!(c&&d);return this.getData().findIndex(g,f,h,c,b,!a)},findRecord:function(){var b=this,a=b.find.apply(b,arguments);return a!==-1?b.getAt(a):null},findExact:function(b,a,c){return this.getData().findIndexBy(function(d){return d.isEqual(d.get(b),a)},this,c)},findBy:function(b,a,c){return this.getData().findIndexBy(b,a,c)},getAt:function(a){return this.getData().getAt(a)||null},getRange:function(d,b,c){var a=this.getData().getRange(d,Ext.isNumber(b)?b+1:b);if(c&&c.callback){c.callback.call(c.scope||this,a,d,b,c)}return a},getFilters:function(b){var a=(arguments.callee.$previous||Ext.Base.prototype.getFilters).call(this);if(!a&&b!==false){this.setFilters([]);a=(arguments.callee.$previous||Ext.Base.prototype.getFilters).call(this)}return a},applyFilters:function(b,a){var c;if(!a){a=this.createFiltersCollection();c=true}a.add(b);if(c){this.onRemoteFilterSet(a,this.getRemoteFilter())}return a},getSorters:function(b){var a=(arguments.callee.$previous||Ext.Base.prototype.getSorters).call(this);if(!a&&b!==false){this.setSorters([]);a=(arguments.callee.$previous||Ext.Base.prototype.getSorters).call(this)}return a},applySorters:function(b,a){var c;if(!a){a=this.createSortersCollection();c=true}a.add(b);if(c){this.onRemoteSortSet(a,this.getRemoteSort())}return a},filter:function(b,c,a){if(Ext.isString(b)){b={property:b,value:c}}this.suppressNextFilter=!!a;this.getFilters().add(b);this.suppressNextFilter=false},removeFilter:function(a,d){var c=this,b=c.getFilters();c.suppressNextFilter=!!d;if(a instanceof Ext.util.Filter){b.remove(a)}else{b.removeByKey(a)}c.suppressNextFilter=false},updateRemoteSort:function(a){this.onRemoteSortSet(this.getSorters(false),a)},updateRemoteFilter:function(a){this.onRemoteFilterSet(this.getFilters(false),a)},addFilter:function(b,a){this.suppressNextFilter=!!a;this.getFilters().add(b);this.suppressNextFilter=false},filterBy:function(b,a){this.getFilters().add({filterFn:b,scope:a||this})},clearFilter:function(c){var b=this,a=b.getFilters(false);if(!a||a.getCount()===0){return}b.suppressNextFilter=!!c;a.removeAll();b.suppressNextFilter=false},isFiltered:function(){return this.getFilters().getCount()>0},isSorted:function(){var a=this.getSorters(false);return !!(a&&a.length>0)||this.isGrouped()},addFieldTransform:function(f){if(f.getTransform()){return}var d=f.getProperty(),c=this.getModel(),a,b;if(c){a=c.getField(d);b=a?a.getSortType():null}if(b&&b!==Ext.identityFn){f.setTransform(b)}},beginUpdate:function(){if(!this.updating++){this.fireEvent("beginupdate")}},endUpdate:function(){if(this.updating&&!--this.updating){this.fireEvent("endupdate");this.onEndUpdate()}},getState:function(){var f=this,g=[],d=f.getFilters(),b=f.getGrouper(),h,c,a;f.getSorters().each(function(j){g[g.length]=j.getState();c=true});if(f.statefulFilters&&f.saveStatefulFilters){c=true;h=[];d.each(function(j){h[h.length]=j.getState()})}if(b){c=true}if(c){a={};if(g.length){a.sorters=g}if(h){a.filters=h}if(b){a.grouper=b.getState()}}return a},applyState:function(f){var c=this,b=f.sorters,a=f.filters,d=f.grouper;if(b){c.getSorters().replaceAll(b)}if(a){c.saveStatefulFilters=true;c.getFilters().replaceAll(a)}if(d){c.setGrouper(d)}},hasPendingLoad:Ext.emptyFn,isLoaded:Ext.emptyFn,isLoading:Ext.emptyFn,destroy:function(){var a=this;if(a.getStoreId()){Ext.data.StoreManager.unregister(a)}a.callParent();a.onDestroy()},sort:function(c,b,d){var a=this;if(arguments.length===0){if(a.getRemoteSort()){a.load()}else{a.forceLocalSort()}}else{a.getSorters().addSort(c,b,d)}},onBeforeCollectionSort:function(a,b){if(b){this.fireEvent("beforesort",this,b.getRange())}},onSorterEndUpdate:function(){var a=this,b;b=a.getSorters(false);if(a.settingGroups||!b){return}b=b.getRange();if(b.length){if(a.getRemoteSort()){a.load({callback:function(){a.fireEvent("sort",a,b)}})}else{a.fireEvent("datachanged",a);a.fireEvent("refresh",a);a.fireEvent("sort",a,b)}}else{a.fireEvent("sort",a,b)}},onFilterEndUpdate:function(){var b=this,a=b.suppressNextFilter;if(b.getRemoteFilter()){b.currentPage=1;if(!a){b.load()}}else{if(!a){b.fireEvent("datachanged",b);b.fireEvent("refresh",b)}}if(b.trackStateChanges){b.saveStatefulFilters=true}b.fireEvent("filterchange",b,b.getFilters().getRange())},updateGroupField:function(a){if(a){this.setGrouper({property:a,direction:this.getGroupDir()})}else{this.setGrouper(null)}},getGrouper:function(){return this.getData().getGrouper()},group:function(a,d){var b=this,c=b.getSorters(false),f=a||(c&&c.length);if(a&&typeof a==="string"){a={property:a,direction:d||b.getGroupDir()}}b.settingGroups=true;b.getData().setGrouper(a);delete b.settingGroups;if(f){if(b.getRemoteSort()){b.load({scope:b,callback:b.fireGroupChange})}else{b.fireEvent("datachanged",b);b.fireEvent("refresh",b);b.fireGroupChange()}}else{b.fireGroupChange()}},fireGroupChange:function(){if(!this.destroyed){this.fireEvent("groupchange",this,this.getGrouper())}},clearGrouping:function(){this.group(null)},getGroupField:function(){var a=this.getGrouper(),b="";if(a){b=a.getProperty()}return b},isGrouped:function(){return !!this.getGrouper()},applyGrouper:function(a){this.group(a);return this.getData().getGrouper()},getGroups:function(){return this.getData().getGroups()},onEndUpdate:Ext.emptyFn,privates:{loadsSynchronously:Ext.privateFn,onRemoteFilterSet:function(a,b){if(a){a[b?"on":"un"]("endupdate",this.onFilterEndUpdate,this)}},onRemoteSortSet:function(b,c){var a=this;if(b){b[c?"on":"un"]("endupdate",a.onSorterEndUpdate,a);a.getData()[c?"un":"on"]("beforesort",a.onBeforeCollectionSort,a)}}},deprecated:{5:{methods:{destroyStore:function(){this.destroy()}}}}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data,"AbstractStore"],0));(Ext.cmd.derive("Ext.data.Error",Ext.Base,{isError:true,$configPrefixed:false,config:{field:null,message:""},constructor:function(a){this.initConfig(a);this.msg=this.message}},1,0,0,0,0,0,[Ext.data,"Error"],0));(Ext.cmd.derive("Ext.data.ErrorCollection",Ext.util.MixedCollection,{alternateClassName:"Ext.data.Errors",init:function(g){var m=this,h=g.fields,d=g.data,p,o,q,f,j,c,b,a;for(f=0,j=h.length;f<j;++f){o=h[f];a=o.name;b=d[a];if(o.validate&&!o.validate.$nullFn){p=m.length;c=o.validate(b,null,m,g);if(p===m.length&&c!==true){m.add(a,c)}}}return m},add:function(b,d){var c=this,a=Ext.data.field.Field.defaultInvalidMessage,g=b,f;if(Ext.isString(b)){g=new Ext.data.Error({field:b,message:d||a})}else{if(!(g.isError)){g=new Ext.data.Error({field:g.field||g.name,message:g.error||g.message||g.msg||a})}b=g.field}f=c.get(b);if(f){if(Ext.isArray(f)){f.push(g);return f}c.removeAtKey(b);g=[f,g];g.field=b;g=[g]}return Ext.util.MixedCollection.prototype.add.call(this,g)},getKey:function(a){return a.field},isValid:function(){return this.length===0},getByField:function(b){var a=this.get(b);if(a&&!Ext.isArray(a)){a=[a]}return a||[]}},0,0,0,0,0,0,[Ext.data,"ErrorCollection",Ext.data,"Errors"],0));(Ext.cmd.derive("Ext.data.operation.Operation",Ext.Base,{alternateClassName:"Ext.data.Operation",isOperation:true,config:{synchronous:false,url:"",params:undefined,callback:undefined,scope:undefined,resultSet:null,response:null,request:null,records:null,id:undefined,proxy:null,batch:null,recordCreator:null,internalCallback:null,internalScope:null},order:0,foreignKeyDirection:1,started:false,running:false,complete:false,success:undefined,exception:false,error:undefined,idPrefix:"ext-operation-",constructor:function(a){var b=a&&a.scope;this.initConfig(a);if(a){a.scope=b}if(b){this.setScope(b);this.initialConfig.scope=b}this._internalId=Ext.id(this,this.idPrefix)},getAction:function(){return this.action},execute:function(){var b=this,a;delete b.error;delete b.success;b.complete=b.exception=false;b.setStarted();b.request=a=b.doExecute();if(a){a.setOperation(b)}return a},doExecute:Ext.emptyFn,abort:function(){var b=this,a=b.request;if(b.running&&a){b.getProxy().abort(a);b.request=null}},process:function(b,d,a,f){var c=this;f=f!==false;c.setResponse(a);c.setResultSet(b);if(b.getSuccess()){c.doProcess(b,d,a);c.setSuccessful(f)}else{if(f){c.setException(b.getMessage())}}},_commitSetOptions:{convert:true,commit:true},doProcess:function(q,g,f){var o=this,d=o._commitSetOptions,a=o.getRecords(),c=a.length,r=a[0].clientIdProperty,s=q.getRecords(),m=s?s.length:0,p,j,b,h;if(m&&r){p=Ext.Array.toValueMap(a,"id");for(h=0;h<m;++h){j=s[h];b=p[j[r]];if(b){delete p[b.id];delete j[r];b.set(j,d)}}for(h in p){p[h].commit()}}else{for(h=0;h<c;++h){b=a[h];if(m===0||!(j=s[h])){b.commit()}else{b.set(j,d)}}}},setStarted:function(){this.started=this.running=true},setCompleted:function(){var b=this,a=b.getProxy();b.complete=true;b.running=false;b.triggerCallbacks();if(a){a.completeOperation(b)}},setSuccessful:function(a){this.success=true;if(a){this.setCompleted()}},setException:function(a){var b=this;b.exception=true;b.success=b.running=false;b.error=a;b.setCompleted()},triggerCallbacks:function(){var a=this,b=a.getInternalCallback();if(b){b.call(a.getInternalScope()||a,a);a.setInternalCallback(null);a.setInternalScope(null)}if(b=a.getCallback()){b.call(a.getScope()||a,a.getRecords(),a,a.wasSuccessful());a.setCallback(null);a.setScope(null)}},hasException:function(){return this.exception},getError:function(){return this.error},getRecords:function(){var a;return this._records||((a=this.getResultSet())?a.getRecords():null)},isStarted:function(){return this.started},isRunning:function(){return this.running},isComplete:function(){return this.complete},wasSuccessful:function(){return this.isComplete()&&this.success===true},allowWrite:function(){return true}},1,0,0,0,0,0,[Ext.data.operation,"Operation",Ext.data,"Operation"],0));(Ext.cmd.derive("Ext.data.operation.Create",Ext.data.operation.Operation,{action:"create",isCreateOperation:true,order:10,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().create(this)}},0,0,0,0,["data.operation.create"],0,[Ext.data.operation,"Create"],0));(Ext.cmd.derive("Ext.data.operation.Destroy",Ext.data.operation.Operation,{action:"destroy",isDestroyOperation:true,order:30,foreignKeyDirection:-1,doProcess:function(){var c=this.getRecords(),a=c.length,b;for(b=0;b<a;++b){c[b].setErased()}},doExecute:function(){return this.getProxy().erase(this)},getRecordData:function(a,c){var f={},d=a.idField,b=this.getNameProperty()||"name";f[d[b]]=a.id;return f}},0,0,0,0,["data.operation.destroy"],0,[Ext.data.operation,"Destroy"],0));(Ext.cmd.derive("Ext.data.operation.Read",Ext.data.operation.Operation,{action:"read",isReadOperation:true,config:{filters:undefined,sorters:undefined,grouper:undefined,start:undefined,limit:undefined,page:undefined,addRecords:false},doExecute:function(){return this.getProxy().read(this)},doProcess:Ext.emptyFn,allowWrite:function(){return false}},0,0,0,0,["data.operation.read"],0,[Ext.data.operation,"Read"],0));(Ext.cmd.derive("Ext.data.operation.Update",Ext.data.operation.Operation,{action:"update",isUpdateOperation:true,order:20,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().update(this)}},0,0,0,0,["data.operation.update"],0,[Ext.data.operation,"Update"],0));(Ext.cmd.derive("Ext.data.SortTypes",Ext.Base,{singleton:true,none:Ext.identityFn,stripCommasRe:/,/g,stripTagsRE:/<\/?[^>]+>/gi,asText:function(a){return(a!=null)?String(a).replace(this.stripTagsRe,""):"\x00"},asUCText:function(a){return(a!=null)?String(a).toUpperCase().replace(this.stripTagsRe,""):"\x00"},asUCString:function(a){return(a!=null)?String(a).toUpperCase():"\x00"},asDate:function(a){if(!a){return 0}if(Ext.isDate(a)){return a.getTime()}return Date.parse(String(a))},asFloat:function(a){var b=parseFloat(String(a).replace(this.stripCommasRe,""));return isNaN(b)?0:b},asInt:function(a){var b=parseInt(String(a).replace(this.stripCommasRe,""),10);return isNaN(b)?0:b}},0,0,0,0,0,0,[Ext.data,"SortTypes"],0));(Ext.cmd.derive("Ext.data.validator.Validator",Ext.Base,{isValidator:true,type:"base",statics:{all:{},register:function(b,a){var c=this.all;c[b.toUpperCase()]=c[b.toLowerCase()]=c[b]=a.prototype}},onClassExtended:function(a,b){if(b.type){Ext.data.validator.Validator.register(b.type,a)}},constructor:function(a){if(typeof a==="function"){this.fnOnly=true;this.validate=a}else{this.initConfig(a)}},validate:function(){return true},clone:function(){var a=this;if(a.fnOnly){return new Ext.data.validator.Validator(a.validate)}return new a.self(a.getCurrentConfig())}},1,0,0,0,["data.validator.base"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.validator,"Validator"],function(){this.register(this.prototype.type,this)}));(Ext.cmd.derive("Ext.data.field.Field",Ext.Base,{alternateClassName:"Ext.data.Field",aliasPrefix:"data.field.",type:"auto",factoryConfig:{defaultProperty:"name"},isDataField:true,isField:true,allowBlank:true,allowNull:false,critical:false,defaultInvalidMessage:"This field is invalid",defaultValue:undefined,definedBy:null,depends:null,dependents:null,mapping:null,name:null,ordinal:undefined,persist:null,reference:null,unique:false,rank:null,stripRe:/[\$,%]/g,calculated:false,evil:false,identifier:false,onClassExtended:function(c,f){var g=f.sortType,d=c.prototype,a=d.validators,b=f.validators;if(g&&Ext.isString(g)){d.sortType=Ext.data.SortTypes[g]}if(b){if(!Ext.isArray(b)){b=[b]}delete f.validators;if(a){b=a.concat(b)}d.validators=b}},argumentNamesRe:/^function\s*\(\s*([^,\)\s]+)/,calculateRe:/[^\.a-z0-9_]([a-z_][a-z_0-9]*)\.([a-z_][a-z_0-9]*)/gi,constructor:function(d){var p=this,r=p.calculateRe,h,s,q,j,c,a,m,b,o,f,g;if(d){if(Ext.isString(d)){p.name=d}else{g=d.validators;if(g){delete d.validators;p.instanceValidators=g}Ext.apply(p,d)}}if(!p.allowNull){p.allowNull=!!p.reference}h=p.calculate;c=p.depends;if(h){p.convert=p.doCalculate;if(!c){if(!(c=h.$depends)){a={};o=h.toString();h.$depends=c=[];m=p.argumentNamesRe.exec(o);b=m?m[1]:"data";while((m=r.exec(o))){if(b===m[1]&&!a[f=m[2]]){a[f]=1;c.push(f)}}}p.depends=c}}q=p.defaultValue;if(p.convert){p.calculated=s=p.convert.length>1;p.evil=s&&!c}if(p.persist===null){p.persist=!h}j=p.sortType;if(!p.sortType){p.sortType=Ext.data.SortTypes.none}else{if(Ext.isString(j)){p.sortType=Ext.data.SortTypes[j]}}if(c&&typeof c==="string"){p.depends=[c]}p.cloneDefaultValue=q!==undefined&&(Ext.isDate(q)||Ext.isArray(q)||Ext.isObject(q))},setModelValidators:function(a){this._validators=null;this.modelValidators=a},compileValidators:function(){var a=this;a._validators=[];a.constructValidators(a.validators);a.constructValidators(a.modelValidators);a.constructValidators(a.instanceValidators)},constructValidators:function(a){if(a){if(!(a instanceof Array)){a=[a]}var f=a.length,c=this._validators,b,d;for(b=0;b<f;++b){d=a[b];if(d.fn){d=d.fn}c.push(Ext.Factory.dataValidator(d))}}},collate:function(c,b){var d=this,a=c,f=b;if(d.sortType){a=d.sortType(a);f=d.sortType(f)}return(a===f)?0:((a<f)?-1:1)},compare:function(b,a){return(b===a)?0:((b<a)?-1:1)},isEqual:function(b,a){return this.compare(b,a)===0},convert:null,serialize:null,validate:function(o,f,m,g){var j=this,h="",p,a,c,b,d;if(!j._validators){j.compileValidators()}c=j._validators;for(d=0,b=c.length;d<b;++d){a=c[d];p=a.validate(o,g);if(p!==true){p=p||j.defaultInvalidMessage;if(m){m.add(j.name,p);h=h||p}else{if(f){if(h){h+=f}h+=p}else{h=p;break}}}}return h||true},doCalculate:function(a,b){return b?this.calculate(b.data):a},getName:function(){return this.name},getAllowBlank:function(){return this.allowBlank},getAllowNull:function(){return this.allowNull},getConvert:function(){return this.convert},getDefaultValue:function(){return this.defaultValue},getDepends:function(){return this.depends},getMapping:function(){return this.mapping},hasMapping:function(){var a=this.mapping;return !!(a||a===0)},getPersist:function(){return this.persist},getSortType:function(){return this.sortType},getType:function(){return"auto"},deprecated:{5.1:{methods:{getSortDir:function(){return this.sortDir}}}}},1,0,0,0,["data.field.auto"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.field,"Field",Ext.data,"Field"],0));(Ext.cmd.derive("Ext.data.field.Boolean",Ext.data.field.Field,{isBooleanField:true,trueRe:/^\s*(?:true|yes|on|1)\s*$/i,convert:function(a){if(typeof a==="boolean"){return a}if(this.allowNull&&(a===undefined||a===null||a==="")){return null}return this.trueRe.test(String(a))},getType:function(){return"bool"}},0,0,0,0,["data.field.bool","data.field.boolean"],0,[Ext.data.field,"Boolean"],0));(Ext.cmd.derive("Ext.data.field.Date",Ext.data.field.Field,{sortType:"asDate",isDateField:true,dateFormat:null,dateReadFormat:null,dateWriteFormat:null,compare:function(b,f){var d=b instanceof Date,c=f instanceof Date,a;if(c&&d){a=b.getTime()-f.getTime();if(a===0){a=0}else{a=a<0?-1:1}}else{if(d===c){a=0}else{a=d?1:-1}}return a},convert:function(c){if(!c){return null}if(c instanceof Date){return c}var a=this.dateReadFormat||this.dateFormat,b;if(a){return Ext.Date.parse(c,a)}b=Date.parse(c);return b?new Date(b):null},serialize:function(b){var a=null,c;if(Ext.isDate(b)){c=this.getDateWriteFormat();a=c?Ext.Date.format(b,c):b}return a},getDateFormat:function(){return this.dateFormat},getDateReadFormat:function(){return this.dateReadFormat},getDateWriteFormat:function(){var a=this;if(a.hasOwnProperty("dateWriteFormat")){return a.dateWriteFormat}if(a.hasOwnProperty("dateFormat")){return a.dateFormat}return a.dateWriteFormat||a.dateFormat||"timestamp"},getType:function(){return"date"}},0,0,0,0,["data.field.date"],0,[Ext.data.field,"Date"],0));(Ext.cmd.derive("Ext.data.field.Integer",Ext.data.field.Field,{isNumeric:true,isIntegerField:true,numericType:"int",convert:function(b){if(typeof b==="number"){return this.getNumber(b)}var d=b===undefined||b===null||b==="",a=this.allowNull,c;if(d){c=a?null:0}else{c=this.parse(b);if(a&&isNaN(c)){c=null}}return c},getNumber:function(a){return parseInt(a,10)},getType:function(){return this.numericType},parse:function(a){return parseInt(String(a).replace(this.stripRe,""),10)},sortType:function(a){if(a==null){a=Infinity}return a}},0,0,0,0,["data.field.int","data.field.integer"],0,[Ext.data.field,"Integer"],0));(Ext.cmd.derive("Ext.data.field.Number",Ext.data.field.Integer,{isIntegerField:false,isNumberField:true,numericType:"float",getNumber:Ext.identityFn,parse:function(a){return parseFloat(String(a).replace(this.stripRe,""))}},0,0,0,0,["data.field.float","data.field.number"],0,[Ext.data.field,"Number"],0));(Ext.cmd.derive("Ext.data.field.String",Ext.data.field.Field,{sortType:"asUCString",isStringField:true,convert:function(b){var a=this.allowNull?null:"";return(b===undefined||b===null)?a:String(b)},getType:function(){return"string"}},0,0,0,0,["data.field.string"],0,[Ext.data.field,"String"],0));(Ext.cmd.derive("Ext.data.identifier.Generator",Ext.Base,{"abstract":true,factoryConfig:{defaultType:"sequential"},isGenerator:true,config:{id:null},constructor:function(b){var c=this,a,d;c.initConfig(b);d=c.getId();if(d){a=(b&&b.cache)||Ext.data.identifier.Generator.all;a[d]=c}},privates:{clone:function(b){var a=this.getInitialConfig();a=b?Ext.apply({},b,a):a;return new this.self(a)},statics:{all:{}}}},1,0,0,0,["data.identifier.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.identifier,"Generator"],function(){var c=this,a=Ext.Factory,b=a.dataIdentifier;a.dataIdentifier=function(d){var g=Ext.isString(d)?d:(d&&d.id),f=g&&((d&&d.cache)||c.all)[g];return f||b(d)}}));(Ext.cmd.derive("Ext.data.identifier.Sequential",Ext.data.identifier.Generator,{config:{increment:1,prefix:null,seed:1},generate:function(){var b=this,a=b._seed,c=b._prefix;b._seed+=b._increment;return(c!==null)?c+a:a}},0,0,0,0,["data.identifier.sequential"],0,[Ext.data.identifier,"Sequential"],0));(Ext.cmd.derive("Ext.data.Model",Ext.Base,{alternateClassName:"Ext.data.Record",isEntity:true,isModel:true,validIdRe:null,erasing:false,observableType:"record",constructor:function(f,p){var q=this,t=q.self,o=t.identifier,c=Ext.data.Model,r=c.identifier,s=q.idField.name,m,a,b,j,h,d,g;q.data=q.data=f||(f={});q.session=p||null;q.internalId=j=r.generate();if((m=f) instanceof Array){q.data=f={};g=q.getFields();h=Math.min(g.length,m.length);for(d=0;d<h;++d){f[g[d].name]=m[d]}}if(!(b=t.initializeFn)){t.initializeFn=b=c.makeInitializeFn(t)}if(!b.$nullFn){t.initializeFn(q)}if(!(q.id=a=f[s])&&a!==0){if(p){o=p.getIdentifier(t);a=o.generate()}else{if(r===o){a=j}else{a=o.generate()}}f[s]=q.id=a;q.phantom=true}if(p){p.add(q)}if(q.init&&Ext.isFunction(q.init)){q.init()}},editing:false,dirty:false,session:null,dropped:false,erased:false,clientIdProperty:null,evented:false,phantom:false,idProperty:"id",manyToMany:null,identifier:null,previousValues:undefined,proxy:undefined,schema:"default",versionProperty:null,generation:1,validationSeparator:null,convertOnSet:true,beginEdit:function(){var c=this,b=c.modified,a=c.previousValues;if(!c.editing){c.editing=true;c.editMemento={dirty:c.dirty,data:Ext.apply({},c.data),generation:c.generation,modified:b&&Ext.apply({},b),previousValues:a&&Ext.apply({},a)}}},cancelEdit:function(){var b=this,a=b.editMemento;if(a){b.editing=false;Ext.apply(b,a);b.editMemento=null}},endEdit:function(b,d){var c=this,a=c.editMemento;if(a){c.editing=false;c.editMemento=null;c.previousValues=a.previousValues;if(!b){if(!d){d=c.getModifiedFieldNames(a.data)}if(c.dirty||(d&&d.length)){c.callJoined("afterEdit",[d])}}}},getField:function(a){return this.self.getField(a)},getFields:function(){return this.self.getFields()},getFieldsMap:function(){return this.fieldsMap},getIdProperty:function(){return this.idProperty},getId:function(){return this.id},getObservableId:function(){return this.internalId},setId:function(b,a){this.set(this.idProperty,b,a)},getPrevious:function(b){var a=this.previousValues;return a&&a[b]},isModified:function(b){var a=this.modified;return !!(a&&a.hasOwnProperty(b))},getModified:function(b){var a;if(this.isModified(b)){a=this.modified[b]}return a},get:function(a){return this.data[a]},_singleProp:{},_rejectOptions:{convert:false,silent:true},set:function(g,z,h){var L=this,d=L.self,M=L.data,r=L.modified,A=L.previousValues,a=L.session,K=Ext.isString(g),b=(K?h:z),u=b?b.convert!==false:L.convertOnSet,m=L.fieldsMap,I=b&&b.silent,v=b&&b.commit,t=!(b&&b.refs===false)&&a,s=!(b&&b.dirty===false&&!v),F=null,w,c,H,O,N,C,j,q,B,G,D=0,J,y,p,o,E,f;if(K){f=L._singleProp;f[g]=z}else{f=g}if(!(p=d.rankedFields)){p=d.rankFields()}J=p.length;do{for(N in f){E=f[N];w=M[N];j=L;c=m[N];if(c){if(u&&c.convert){E=c.convert(E,L)}j=c;o=c.reference}else{o=null}if(j.isEqual(w,E)){continue}M[N]=E;(F||(F=[])).push(N);(A||(L.previousValues=A={}))[N]=w;if(o&&o.cls){if(t){a.updateReference(L,c,E,w)}o.onValueChange(L,a,E,w)}G=(B=c&&c.dependents)&&B.length;while(G-->0){(q=B[G]).dirty=true;D=D?Math.min(D,q.rank):q.rank}if(!c||c.persist){if(r&&r.hasOwnProperty(N)){if(!s||j.isEqual(r[N],E)){delete r[N];L.dirty=-1}}else{if(s){if(!r){L.modified=r={}}L.dirty=true;r[N]=w}}}if(N===L.idField.name){H=true;C=w;y=E}}if(!D){break}c=p[D-1];c.dirty=false;if(K){delete f[g]}else{f=L._singleProp;K=true}g=c.name;f[g]=M[g];u=true;for(;D<J;++D){if(p[D].dirty){break}}if(D<J){++D}else{D=0}}while(1);if(L.dirty<0){L.dirty=false;for(O in r){if(r.hasOwnProperty(O)){L.dirty=true;break}}}if(K){delete f[g]}++L.generation;if(H){L.id=y;L.callJoined("onIdChanged",[C,y])}if(v){L.commit(I,F)}else{if(!I&&!L.editing&&F){L.callJoined("afterEdit",[F])}}return F},reject:function(a){var c=this,b=c.modified;if(b){c.set(b,c._rejectOptions)}c.dropped=false;c.clearState();if(!a){c.callJoined("afterReject")}},commit:function(b,d){var c=this,g=c.versionProperty,f=c.data,a;c.clearState();if(g&&!c.phantom&&!isNaN(f[g])){++f[g]}c.phantom=false;if(c.dropped){c.erased=a=true}if(!b){if(a){c.callJoined("afterErase")}else{c.callJoined("afterCommit",[d])}}},clearState:function(){var a=this;a.dirty=a.editing=false;a.editMemento=a.modified=null},drop:function(b){var d=this,c=d.associations,f=d.session,a;if(d.erased||d.dropped){return}d.dropped=true;if(c&&b!==false){for(a in c){c[a].onDrop(d,f)}}d.callJoined("afterDrop");if(d.phantom){d.setErased()}},join:function(b){var a=this,c=a.joined;if(!c){c=a.joined=[b]}else{if(!c.length){c[0]=b}else{Ext.Array.include(c,b)}}if(b.isStore&&!a.store){a.store=b}},unjoin:function(f){var d=this,g=d.joined,a=g&&g.length,b=d.store,c;if(a===1&&g[0]===f){g.length=0}else{if(a){Ext.Array.remove(g,f)}}if(b===f){b=null;if(g){for(c=0,a=g.length;c<a;++c){f=g[c];if(f.isStore){b=f;break}}}d.store=b}},clone:function(d){var c=this,b=c.modified,a=c.copy(c.id,d);if(b){a.modified=Ext.apply({},b)}a.dirty=c.dirty;a.dropped=c.dropped;a.phantom=c.phantom;return a},copy:function(c,g){var d=this,f=Ext.apply({},d.data),b=d.idProperty,a=d.self;if(c||c===0){f[b]=c}else{if(c===null){delete f[b]}}return new a(f,g)},getProxy:function(){return this.self.getProxy()},getValidation:function(b){var c=this,a=c.validation;if(!a){c.validation=a=new Ext.data.Validation();a.attach(c)}if(b===true||(b!==false&&a.syncGeneration!==c.generation)){a.refresh(b)}return a},validate:function(){return new Ext.data.ErrorCollection().init(this)},isValid:function(){return this.getValidation().isValid()},toUrl:function(){var b=this.$className.split("."),a=b[b.length-1].toLowerCase();return a+"/"+this.getId()},erase:function(a){var b=this;b.erasing=true;b.drop();b.erasing=false;return b.save(a)},setErased:function(){this.erased=true;this.callJoined("afterErase")},getChanges:function(){return this.getData(this._getChangesOptions)},getCriticalFields:function(){var a=this.self,b=a.criticalFields;if(!b){a.rankFields();b=a.criticalFields}return b},getAssociatedData:function(u,t){var p=this,c=p.associations,r,h,s,o,d,b,m,g,f,a,j,q;u=u||{};p.$gathering=1;if(t){t=Ext.Object.chain(t)}for(f in c){g=c[f];s=g.getAssociatedItem(p);if(!s||s.$gathering){continue}if(s.isStore){s.$gathering=1;o=s.getData().items;b=o.length;d=[];for(h=0;h<b;++h){m=o[h];r=!m.$gathering;m.$gathering=1;if(t){q=t.associated;if(q===undefined){t.associated=r;j=true}else{if(!r){t.associated=false;j=true}}a=t}else{a=r?p._getAssociatedOptions:p._getNotAssociatedOptions}d.push(m.getData(a));if(j){t.associated=q;j=false}delete m.$gathering}delete s.$gathering}else{a=t||p._getAssociatedOptions;if(t&&t.associated===undefined){a.associated=true}d=s.getData(a)}u[f]=d}delete p.$gathering;return u},getData:function(v){var o=this,m={},a=(v===true)?o._getAssociatedOptions:(v||m),f=o.data,p=a.associated,s=a.changes,r=s&&a.critical,j=s?o.modified:f,h=o.fieldsMap,g=a.persist,u=a.serialize,c,q,d,b,t;if(j){for(b in j){t=f[b];q=h[b];if(q){if(g&&!q.persist){continue}if(u&&q.serialize){t=q.serialize(t,o)}}m[b]=t}}if(r){c=o.self.criticalFields||o.getCriticalFields();for(d=c.length;d-->0;){b=(q=c[d]).name;if(!(b in m)){t=f[b];if(u&&q.serialize){t=q.serialize(t,o)}m[b]=t}}}if(p){o.getAssociatedData(m,a)}return m},getTransientFields:function(){var a=this.self,b=a.transientFields;if(!b){a.rankFields();b=a.transientFields}return b},isLoading:function(){return !!this.loadOperation},abort:function(){var a=this.loadOperation;if(a){a.abort()}},load:function(b){b=Ext.apply({},b);var g=this,f=b.scope||g,c=g.getProxy(),j=b.callback,a=g.loadOperation,h=g.getId(),d;if(a){d=a.extraCalls;if(!d){d=a.extraCalls=[]}d.push(b);return a}b.id=h;b.recordCreator=function(p,m,o){var q=g.session;if(o){o.recordCreator=q?q.recordCreator:null}g.set(p,g._commitOptions);return g};b.internalCallback=function(p){var t=p.wasSuccessful()&&p.getRecords().length>0,u=g.loadOperation,r=u.extraCalls,o=[g,p],s=[g,p,t],q,m;g.loadOperation=null;if(t){Ext.callback(b.success,f,o)}else{Ext.callback(b.failure,f,o)}Ext.callback(j,f,s);if(r){for(q=0,m=r.length;q<m;++q){b=r[q];if(t){Ext.callback(b.success,f,o)}else{Ext.callback(b.failure,f,o)}Ext.callback(b.callback,f,s)}}g.callJoined("afterLoad")};delete b.callback;g.loadOperation=a=c.createOperation("read",b);a.execute();return a},save:function(m){m=Ext.apply({},m);var g=this,d=g.phantom,a=g.dropped,c=a?"destroy":(d?"create":"update"),j=m.scope||g,h=m.callback,f=g.getProxy(),b;m.records=[g];m.internalCallback=function(o){var p=[g,o],q=o.wasSuccessful();if(q){Ext.callback(m.success,j,p)}else{Ext.callback(m.failure,j,p)}p.push(q);Ext.callback(h,j,p)};delete m.callback;b=f.createOperation(c,m);if(a&&d){b.setResultSet(Ext.data.reader.Reader.prototype.nullResultSet);g.setErased();b.setSuccessful(true)}else{b.execute()}return b},inheritableStatics:{addFields:function(a){this.replaceFields(a)},replaceFields:function(q,m){var r=this,f=r.prototype,j=Ext.data.field.Field,g=r.fields,p=r.fieldsMap,c=r.fieldOrdinals,s,d,b,h,a,o;if(m===true){g.length=0;r.fieldsMap=p={};r.fieldOrdinals=c={}}else{if(m){for(d=m.length;d-->0;){a=m[d];if(a in c){delete c[a];delete p[a]}}for(d=0,h=g.length;d<h;++d){a=(s=g[d]).name;if(a in c){c[a]=d}else{g.splice(d,1);--d;--h}}}}for(d=0,h=q?q.length:0;d<h;d++){a=(s=q[d]).name;if(!(a in c)){c[a]=o=g.length;g.push(s=j.create(s));p[a]=s;s.ordinal=o;s.definedBy=s.owner=this}}r.idField=f.idField=b=p[f.idProperty];b.allowNull=b.critical=b.identifier=true;b.defaultValue=null;r.initializeFn=r.rankedFields=r.transientFields=r.criticalFields=null},removeFields:function(a){this.replaceFields(null,a)},getIdFromData:function(c){var b=this,a=b.idField,d=a.calculated?(new b(c)).id:c[a.name];return d},createWithId:function(g,b,c){var f=b,a=this;if(g||g===0){f={};if(b){Ext.apply(f,b)}f[a.idField.name]=g}return new a(f,c)},getFields:function(){return this.fields},getFieldsMap:function(){return this.fieldsMap},getField:function(a){return this.fieldsMap[a]||null},getProxy:function(){var b=this,a=b.proxy,d=b.defaultProxy,c;if(!a){a=b.proxyConfig;if(!a&&d){a=d}if(!a||!a.isProxy){if(typeof a==="string"){a={type:a}}c=b.schema.constructProxy(b);a=a?Ext.merge(c,a):c}a=b.setProxy(a)}return a},setProxy:function(b){var c=this,a;if(b){if(!b.isProxy){b=Ext.Factory.proxy(b)}else{a=b.getModel();if(a&&a!==c){b=b.clone()}}b.setModel(c)}return(c.prototype.proxy=c.proxy=b)},load:function(f,a,c){var b={},d;b[this.prototype.idProperty]=f;d=new this(b,c);d.load(a);return d}},deprecated:{5:{methods:{hasId:null,markDirty:null,setDirty:null,eachStore:function(g,d){var f=this,b=f.stores,a=b.length,c;for(c=0;c<a;++c){g.call(d,b[c])}},join:function(c){var b=this,a=b.stores,d=b.joined;if(!d){d=b.joined=[c]}else{d.push(c)}if(c.isStore){b.store=b.store||c;if(!a){a=b.stores=[]}a.push(c)}},unjoin:function(c){var b=this,a=b.stores,d=b.joined;if(d.length===1){d.length=0}else{Ext.Array.remove(d,c)}if(c.isStore){Ext.Array.remove(a,c);b.store=a[0]||null}}},properties:{persistenceProperty:null},inheritableStatics:{methods:{setFields:null}}}},privates:{_commitOptions:{commit:true},_getChangesOptions:{changes:true},_getAssociatedOptions:{associated:true},_getNotAssociatedOptions:{associated:false},copyFrom:function(j){var h=this,f=h.fields,p=f.length,b=[],m,c=0,g,d,q=h.idProperty,a,o;if(j){g=h.data;d=j.data;for(;c<p;c++){m=f[c];a=m.name;if(a!==q){o=d[a];if(o!==undefined&&!h.isEqual(g[a],o)){g[a]=o;b.push(a)}}}if(h.phantom&&!j.phantom){h.beginEdit();h.setId(j.getId());h.endEdit(true);h.commit(true)}}return b},callJoined:function(d,c){var g=this,j=g.joined,f=g.session,a,b,h,m;if(!j&&!f){return}if(c){c.unshift(g)}else{c=[g]}if(j){for(a=0,b=j.length;a<b;++a){m=j[a];if(m&&(h=m[d])){h.apply(m,c)}}}h=f&&f[d];if(h){h.apply(f,c)}},setSession:function(a){this.session=a;if(a){a.add(this)}},getModifiedFieldNames:function(a){var d=this,f=d.data,b=[],g=a||d.editMemento.data,c;for(c in f){if(f.hasOwnProperty(c)){if(!d.isEqual(f[c],g[c],c)){b.push(c)}}}return b},isEqual:function(a,d,c){var b;if(c){b=c.isField?c:this.fieldsMap[c];if(b){return b.isEqual(a,d)}}if(a instanceof Date&&d instanceof Date){return a.getTime()===d.getTime()}return a===d},statics:{EDIT:"edit",REJECT:"reject",COMMIT:"commit",defaultProxy:"memory",rankFields:function(){var m=this,j=m.prototype,d=m.fields,b=d.length,g=[],a=[],f=[],o,h,c;m.rankedFields=j.rankedFields=g;m.criticalFields=j.criticalFields=a;m.transientFields=j.transientFields=f;for(c=0;c<b;++c){h=d[c];if(h.critical){a.push(h)}if(!h.persist){f.push(h)}if(h.evil){(o||(o=[])).push(h)}else{if(!h.depends){g.push(h);h.rank=g.length}}}for(c=0;c<b;++c){if(!(h=d[c]).rank&&!h.evil){m.topoAdd(h)}}if(o){for(c=0,b=o.length;c<b;++c){g.push(h=o[c]);h.rank=g.length}}return g},topoAdd:function(h){var b=this,g=h.depends,a=g?g.length:0,d=b.rankedFields,c,f;for(c=0;c<a;++c){f=b.fieldsMap[g[c]];(f.dependents||(f.dependents=[])).push(h);if(!f.rank){b.topoAdd(f)}}d.push(h);h.rank=d.length},initFields:function(A,b,s){var m=Ext.data.field.Field,d=A.fields,t=[],o={},g={},a=[],z=s.fields,p=A.versionProperty||s.versionProperty,q=b.idProperty,h,c,w,f,B,v,j,y,u,r;b.fields=s.fields=t;b.fieldOrdinals=s.fieldOrdinals=o;b.fieldsMap=s.fieldsMap=g;b.references=s.references=a;if(z){for(w=0,f=z.length;w<f;++w){t[w]=c=Ext.Object.chain(z[w]);c.dependents=null;c.owner=b;o[B=c.name]=w;g[B]=c;c.rank=null;if(c.generated){y=c;u=c.name}}}if(d){delete A.fields;for(w=0,f=d.length;w<f;++w){c=d[w];j=c.reference;if(j&&typeof j!=="string"){j=Ext.merge({},j)}c.$reference=j;c=m.create(d[w]);B=c.name;v=o[B];if(v===undefined){o[B]=v=t.length}g[B]=c;t[v]=c;c.definedBy=c.owner=b;c.ordinal=v;if(B===q){r=c}}}h=g[q];if(!h){if(y&&y.generated){v=y.ordinal}else{v=t.length}delete g[u];delete o[u];h=new m(q);t[v]=h;o[q]=v;g[q]=h;h.definedBy=b;h.ordinal=v;h.generated=true}else{if(r&&y&&y.generated){Ext.Array.remove(t,y);delete g[u];delete o[u];g[q]=r;for(w=0,f=t.length;w<f;++w){c=t[w];t.ordinal=w;o[c.name]=w}}}h.allowNull=h.critical=h.identifier=true;h.defaultValue=null;b.idField=s.idField=h;if(p){c=g[p];if(!c){v=t.length;c=new m({name:p,type:"int"});t[v]=c;o[p]=v;g[p]=c;c.definedBy=b;c.ordinal=v;c.generated=true}c.defaultValue=1;c.critical=true}},initValidators:function(h,s,m){var q=m.validators,f,p,c,o,g,d,j,b,a,r;if(q){f={};for(p in q){f[p]=Ext.Array.clone(q[p])}}o=h.validators||h.validations;if(o){delete h.validators;f=f||{};if(Ext.isArray(o)){c={};for(g=0,d=o.length;g<d;++g){r=o[g];b=r.field;if(!c[b]){c[b]=[]}r=r.fn||r;c[b].push(r)}o=c}for(b in o){j=o[b];if(!Ext.isArray(j)){j=[j]}a=f[b];if(f[b]){Ext.Array.push(a,j)}else{f[b]=j}}}if(f){for(b in f){p=s.getField(b);if(p){p.setModelValidators(f[b])}}}s.validators=m.validators=f},initAssociations:function(c,g,o){var b=g.associations,d=g.belongsTo,j=g.hasMany,p=g.hasOne,m=g.manyToMany,f,a,h;delete g.manyToMany;if(m){c.addMatrices(o,m)}delete g.associations;delete g.belongsTo;delete g.hasMany;delete g.hasOne;if(b){b=Ext.isArray(b)?b:[b];for(f=0,a=b.length;f<a;++f){h=b[f];switch(h.type){case"belongsTo":c.addLegacyBelongsTo(o,h);break;case"hasMany":c.addLegacyHasMany(o,h);break;case"hasOne":c.addLegacyHasOne(o,h);break}}}if(d){d=Ext.isArray(d)?d:[d];for(f=0,a=d.length;f<a;++f){c.addLegacyBelongsTo(o,d[f])}}if(j){j=Ext.isArray(j)?j:[j];for(f=0,a=j.length;f<a;++f){c.addLegacyHasMany(o,j[f])}}if(p){p=Ext.isArray(p)?p:[p];for(f=0,a=p.length;f<a;++f){c.addLegacyHasOne(o,p[f])}}c.afterLegacyAssociations(o)},initIdentifier:function(g,a,f){var b=g.identifier||g.idgen,d=f.identifier||a.schema._defaultIdentifier,c;if(b){delete g.identifier;delete g.idgen;b=Ext.Factory.dataIdentifier(b)}else{if(d){if(d.clone&&!d.getId()){b=d.clone()}else{if(d.isGenerator){b=d}else{b=Ext.Factory.dataIdentifier(d)}}}}a.identifier=f.identifier=b;if(!b){c=a.entityName;if(!c){c=Ext.id(null,"extModel")}a.identifier=Ext.Factory.dataIdentifier({type:"sequential",prefix:c+"-"})}},findValidator:function(c,d,b){var g=b.type||b,j=c[d],a,f,h;if(j){for(f=0,a=j.length;f<a;++f){h=j[f];if(h.type===g){return h}}}return null},makeInitializeFn:function(u){var a=["var "],j=["\nreturn function (e) {\n    var data = e.data, v;\n"],f=[],r=0,o,m,p,t,d,q,h,g,s,c,b;if(!(h=u.rankedFields)){h=u.rankFields()}for(c=0,b=h.length;c<b;++c){q=h[c];f[c]=g="f"+c;p=q.convert;if(c){a.push(",  \n    ")}a.push(g," = $fields["+c+"]");if((s=(q.defaultValue!==undefined))||p){t='data["'+q.name+'"]';++r;o=m="";if(q.cloneDefaultValue){o="Ext.clone(";m=")"}j.push("\n");if(p&&s){j.push("    v = ",t,";\n    if (v !== undefined) {\n        v = ",g,".convert(v, e);\n    }\n    if (v === undefined) {\n        v = ",o,g,".defaultValue",m,";\n    }\n    ",t," = v;")}else{if(p){j.push("    v = ",g,".convert(",t,",e);\n    if (v !== undefined) {\n        ",t," = v;\n    }\n")}else{if(s){j.push("    if (",t," === undefined) {\n        ",t," = ",o,g,".defaultValue",m,";\n    }\n")}}}}}if(!r){return Ext.emptyFn}a.push(";\n");a.push.apply(a,j);a.push("}");a=a.join("");d=new Function("$fields","Ext",a);return d(h,Ext)}}}},1,0,0,0,0,0,[Ext.data,"Model",Ext.data,"Record"],function(){var d=this,c=d.prototype,b=Ext.data.schema.Schema,a;d.proxyConfig=c.proxy;delete c.proxy;d.fields=[];d.fieldsMap=c.fieldsMap={};d.schema=c.schema=b.get(c.schema);c.idField=new Ext.data.field.Field(c.idProperty);d.identifier=new Ext.data.identifier.Sequential();d.onExtended(function(f,o){var m=f.prototype,q=o.schema,p=m.superclass.self,j,h,g;f.idProperty=o.idProperty||m.idProperty;if(q){delete o.schema;j=b.get(q)}else{if(!(j=m.schema)){j=a||(a=b.get("default"))}}f.rankFields=d.rankFields;f.topoAdd=d.topoAdd;m.schema=f.schema=j;if(!(h=o.entityName)){m.entityName=h=j.getEntityName(f)}f.entityName=h;f.fieldExtractors={};d.initIdentifier(o,f,m);d.initFields(o,f,m);d.initValidators(o,f,m);f.fields.items=f.fields;if(h){j.addEntity(f);d.initAssociations(j,o,f)}g=o.proxy;if(g){delete o.proxy}else{if(p!==d){g=p.proxyConfig||p.proxy}}f.proxyConfig=g})}));(Ext.cmd.derive("Ext.data.ResultSet",Ext.Base,{isResultSet:true,$configPrefixed:false,config:{loaded:true,count:null,total:null,success:false,records:null,message:null},constructor:function(a){this.initConfig(a)},getCount:function(){var b=(arguments.callee.$previous||Ext.Base.prototype.getCount).call(this),a;if(!b){a=this.getRecords();if(a){b=a.length}}return b}},1,0,0,0,0,0,[Ext.data,"ResultSet"],0));(Ext.cmd.derive("Ext.data.reader.Reader",Ext.Base,{alternateClassName:["Ext.data.Reader","Ext.data.DataReader"],factoryConfig:{defaultType:null},config:{totalProperty:"total",successProperty:"success",rootProperty:"",messageProperty:"",typeProperty:"",implicitIncludes:true,readRecordsOnFailure:true,model:null,proxy:null,transform:null,keepRawData:null},isReader:true,constructor:function(a){if(a&&a.hasOwnProperty("root")){a=Ext.apply({},a);a.rootProperty=a.root;delete a.root}var b=this;b.duringInit=1;b.mixins.observable.constructor.call(b,a);--b.duringInit;b.buildExtractors()},applyModel:function(a){return Ext.data.schema.Schema.lookupEntity(a)},applyTransform:function(a){if(a){if(Ext.isFunction(a)){a={fn:a}}else{if(a.charAt){a={fn:this[a]}}}return a.fn.bind(a.scope||this)}return a},forceBuildExtractors:function(){if(!this.duringInit){this.buildExtractors(true)}},updateTotalProperty:function(){this.forceBuildExtractors()},updateMessageProperty:function(){this.forceBuildExtractors()},updateSuccessProperty:function(){this.forceBuildExtractors()},read:function(b,d){var c,a;if(b){if(b.responseText){a=this.getResponseData(b);if(a&&a.__$isError){return new Ext.data.ResultSet({total:0,count:0,records:[],success:false,message:a.msg})}else{c=this.readRecords(a,d)}}else{c=this.readRecords(b,d)}}return c||this.nullResultSet},getNullResultSet:function(){return this.nullResultSet},createReadError:function(a){return{__$isError:true,msg:a}},readRecords:function(f,c,h){var j=this,g=h&&h.recordsOnly,q=h&&h.asRoot,r,d,b,o,m,p,s,a;a=this.getTransform();if(a){f=a(f)}j.buildExtractors();if(j.getKeepRawData()){j.rawData=f}if(j.hasListeners.rawdata){j.fireEventArgs("rawdata",[f])}f=j.getData(f);r=true;d=0;b=[];if(j.getSuccessProperty()){p=j.getSuccess(f);if(p===false||p==="false"){r=false}}if(j.getMessageProperty()){s=j.getMessage(f)}if(r||j.getReadRecordsOnFailure()){o=(q||Ext.isArray(f))?f:j.getRoot(f);if(o){m=o.length}if(j.getTotalProperty()){p=parseInt(j.getTotal(f),10);if(!isNaN(p)){m=p}}if(o){b=j.extractData(o,c);d=b.length}}return g?b:new Ext.data.ResultSet({total:m||d,count:d,records:b,success:r,message:s})},extractData:function(s,g){var q=this,h=g&&g.model?Ext.data.schema.Schema.lookupEntity(g.model):q.getModel(),d=h.schema,t=d.hasAssociations(h)&&q.getImplicitIncludes(),r=q.getFieldExtractorInfo(h.fieldExtractors),a=s.length,c=new Array(a),o=q.getTypeProperty(),p,b,f,m,j;if(!a&&Ext.isObject(s)){s=[s];a=1}for(j=0;j<a;j++){m=s[j];if(!m.isModel){b=m;if(o&&(f=q.getChildType(d,b,o))){p=f.getProxy().getReader();m=p.extractRecord(b,g,f,d.hasAssociations(f)&&p.getImplicitIncludes(),p.getFieldExtractorInfo(f.fieldExtractors))}else{m=q.extractRecord(b,g,h,t,r)}if(m.isModel&&m.isNode){m.raw=b}}if(m.onLoad){m.onLoad()}c[j]=m}return c},getChildType:function(b,c,d){var a;switch(typeof d){case"string":return b.getEntity(c[d]);case"object":a=d.namespace;return b.getEntity((a?a+".":"")+c[d.name]);case"function":return b.getEntity(d(c))}},extractRecordData:function(c,d){var b=d&&d.model?Ext.data.schema.Schema.lookupEntity(d.model):this.getModel(),a=this.getFieldExtractorInfo(b.fieldExtractors);return this.extractRecord(c,d,b,false,a)},extractRecord:function(a,b,c,m,h){var g=this,f=(b&&b.recordCreator)||g.defaultRecordCreator,j,d;j=g.extractModelData(a,h);d=f.call(g,j,c||g.getModel(),b);if(m&&d.isModel){g.readAssociated(d,a,b)}return d},getFieldExtractorInfo:function(c){if(!c){return}var a=this.$className,b=c[a];if(b===undefined){c[a]=b=this.buildFieldExtractors()}return b},buildFieldExtractors:function(){var h=this.getFields(),j=h.length,f=[],o=[],d=null,b=0,m,a,g,c;for(g=0;g<j;++g){m=h[g];c=this.createFieldAccessor(m);if(c){a=m.name;f.push("val = extractors["+b+"](raw); if (val !== undefined) { data['"+a+"'] = val; }");o.push(c);++b}}if(f.length){d={extractors:o,fn:new Function("raw","data","extractors","var val;"+f.join(""))}}return d},defaultRecordCreator:function(b,c){var a=new c(b);a.phantom=false;return a},getModelData:function(a){return{}},extractModelData:function(b,a){var d=this.getModelData(b),c;if(a){c=a.fn;c(b,d,a.extractors)}return d},readAssociated:function(a,f,d){var c=a.associations,b,g;for(b in c){if(c.hasOwnProperty(b)){g=c[b];if(g.cls){g.read(a,f,this,d)}}}},getFields:function(){return this.getModel().fields},getData:Ext.identityFn,getRoot:Ext.identityFn,getResponseData:function(a){},onMetaChange:function(h){var g=this,b=h.fields,c,f,a,d;g.metaData=h;if(h.root){g.setRootProperty(h.root)}if(h.totalProperty){g.setTotalProperty(h.totalProperty)}if(h.successProperty){g.setSuccessProperty(h.successProperty)}if(h.messageProperty){g.setMessageProperty(h.messageProperty)}a=h.clientIdProperty;if(b){f=Ext.define(null,{extend:"Ext.data.Model",fields:b,clientIdProperty:a});g.setModel(f);d=g.getProxy();if(d){d.setModel(f)}}else{if(a){c=g.getModel();if(c){c.self.prototype.clientIdProperty=a}}}},buildExtractors:function(d){var b=this,c,a,f;if(d||!b.hasExtractors){c=b.getTotalProperty();a=b.getSuccessProperty();f=b.getMessageProperty();if(c){b.getTotal=b.getAccessor(c)}if(a){b.getSuccess=b.getAccessor(a)}if(f){b.getMessage=b.getAccessor(f)}b.hasExtractors=true;return true}},getAccessor:function(f){var d=this,a=d.extractorCache,b,c;if(typeof f==="string"){c=d.getAccessorKey(f);b=a.get(c);if(!b){b=d.createAccessor(f);a.add(c,b)}}else{b=d.createAccessor(f)}return b},getAccessorKey:function(a){return this.$className+a},createAccessor:Ext.emptyFn,createFieldAccessor:Ext.emptyFn,destroy:function(){var a=this;a.model=a.getTotal=a.getSuccess=a.getMessage=a.rawData=null;a.onMetaChange=null;a.transform=null;a.callParent()},privates:{copyFrom:function(a){var b=this;a.buildExtractors();b.getTotal=a.getTotal;b.getSuccess=a.getSuccess;b.getMessage=a.getMessage;++b.duringInit;b.setConfig(a.getConfig());--b.duringInit;b.hasExtractors=true}}},1,0,0,0,["reader.base"],[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.reader,"Reader",Ext.data,"Reader",Ext.data,"DataReader"],function(b){var a=b.prototype;Ext.apply(a,{nullResultSet:new Ext.data.ResultSet({total:0,count:0,records:[],success:true,message:""})});a.extractorCache=new Ext.util.LruCache()}));(Ext.cmd.derive("Ext.data.writer.Writer",Ext.Base,{factoryConfig:{defaultType:null},alternateClassName:["Ext.data.DataWriter","Ext.data.Writer"],config:{clientIdProperty:null,allDataOptions:{persist:true},partialDataOptions:{changes:true,critical:true},writeAllFields:false,dateFormat:null,nameProperty:"name",writeRecordId:true,transform:null},isWriter:true,constructor:function(a){this.initConfig(a)},applyTransform:function(a){if(a){if(Ext.isFunction(a)){a={fn:a}}return a.fn.bind(a.scope||this)}return a},write:function(f){var c=f.getOperation(),b=c.getRecords()||[],a=b.length,g=[],d;for(d=0;d<a;d++){g.push(this.getRecordData(b[d],c))}return this.writeRecords(f,g)},writeRecords:Ext.emptyFn,getRecordData:function(m,h){var q=this,f=q.getNameProperty(),a=f!=="name",c=m.self.idField,u=c[f]||c.name,t=m.id,d=q.getWriteAllFields(),p,b,g,v,s,o,j,r;if(c.serialize){t=c.serialize(t)}if(!d&&h&&h.isDestroyOperation){p={};p[u]=t}else{b=q.getDateFormat();g=m.phantom;v=(g||d)?q.getAllDataOptions():q.getPartialDataOptions();s=g&&q.getClientIdProperty();o=m.getFieldsMap();v.serialize=false;j=m.getData(v);p=a?{}:j;if(s){p[s]=t;delete j[u]}else{if(!q.getWriteRecordId()){delete j[u]}}for(u in j){t=j[u];if(!(r=o[u])){if(a){p[u]=t}}else{if(r.isDateField&&b&&Ext.isDate(t)){t=Ext.Date.format(t,b)}else{if(r.serialize){t=r.serialize(t,m)}}if(a){u=r[f]||u}p[u]=t}}}return p}},1,0,0,0,["writer.base"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.data.writer,"Writer",Ext.data,"DataWriter",Ext.data,"Writer"],0));(Ext.cmd.derive("Ext.data.proxy.Proxy",Ext.Base,{$configPrefixed:false,alternateClassName:["Ext.data.DataProxy","Ext.data.Proxy"],config:{batchOrder:"create,update,destroy",batchActions:true,model:undefined,reader:{type:"json"},writer:{type:"json"}},isProxy:true,isSynchronous:false,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.pendingOperations={}},applyModel:function(a){return Ext.data.schema.Schema.lookupEntity(a)},updateModel:function(b){if(b){var a=this.getReader();if(a&&!a.getModel()){a.setModel(b)}}},applyReader:function(a){if(this.isSynchronous){a=a||{};a.keepRawData=true}return Ext.Factory.reader(a)},updateReader:function(a){if(a){var c=this,b=c.getModel();if(!b){b=a.getModel();if(b){c.setModel(b)}}else{a.setModel(b)}if(a.onMetaChange){a.onMetaChange=Ext.Function.createSequence(a.onMetaChange,c.onMetaChange,c)}}},applyWriter:function(b){var a=this.getReader();b=Ext.Factory.writer(b);if(b.getRecord&&!b.getRecord()&&a&&a.getRecord){a=a.getRecord();if(a){b.setRecord(a)}}return b},abort:Ext.emptyFn,onMetaChange:function(a){this.fireEvent("metachange",this,a)},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,erase:Ext.emptyFn,batch:function(t,p){var o=this,m=o.getBatchActions(),h,c,g,d,f,q,b,s,j;if(t.operations===undefined){t={operations:t,listeners:p}}if(t.batch){if(Ext.isDefined(t.batch.runOperation)){h=Ext.applyIf(t.batch,{proxy:o,listeners:{}})}}else{t.batch={proxy:o,listeners:t.listeners||{}}}if(!h){h=new Ext.data.Batch(t.batch)}h.on("complete",Ext.bind(o.onBatchComplete,o,[t],0));g=o.getBatchOrder().split(",");d=g.length;for(q=0;q<d;q++){f=g[q];c=t.operations[f];if(c){if(m){h.add(o.createOperation(f,{records:c,params:t.params}))}else{s=c.length;for(b=0;b<s;b++){j=c[b];h.add(o.createOperation(f,{records:[j],params:t.params}))}}}}h.start();return h},onBatchComplete:function(a,b){var c=a.scope||this;if(b.hasException()){if(Ext.isFunction(a.failure)){Ext.callback(a.failure,c,[b,a])}}else{if(Ext.isFunction(a.success)){Ext.callback(a.success,c,[b,a])}}if(Ext.isFunction(a.callback)){Ext.callback(a.callback,c,[b,a])}},createOperation:function(c,b){var a=Ext.createByAlias("data.operation."+c,b);a.setProxy(this);this.pendingOperations[a._internalId]=a;return a},completeOperation:function(a){delete this.pendingOperations[a._internalId]},clone:function(){return new this.self(this.getInitialConfig())},destroy:function(){var b=this.pendingOperations,a,c;for(a in b){c=b[a];if(c&&c.isRunning()){c.abort()}}this.pendingOperations=null}},1,0,0,0,["proxy.proxy"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.data.proxy,"Proxy",Ext.data,"DataProxy",Ext.data,"Proxy"],0));(Ext.cmd.derive("Ext.data.proxy.Client",Ext.data.proxy.Proxy,{alternateClassName:"Ext.data.ClientProxy",isSynchronous:true,clear:function(){}},0,0,0,0,0,0,[Ext.data.proxy,"Client",Ext.data,"ClientProxy"],0));(Ext.cmd.derive("Ext.data.proxy.Memory",Ext.data.proxy.Client,{alternateClassName:"Ext.data.MemoryProxy",isMemoryProxy:true,config:{enablePaging:false,data:{$value:null,merge:function(d,a,c,b){if(Ext.isArray(d)){return Ext.Array.clone(d)}else{return Ext.clone(d)}}}},finishOperation:function(b){var c=0,d=b.getRecords(),a=d.length;for(c;c<a;c++){d[c].commit()}b.setSuccessful(true)},create:function(a){this.finishOperation(a)},update:function(a){this.finishOperation(a)},erase:function(a){this.finishOperation(a)},read:function(g){var j=this,m=j.getReader().read(j.getData()),d=m.getRecords(),h=g.getSorters(),a=g.getGrouper(),c=g.getFilters(),b=g.getStart(),f=g.getLimit();if(g.process(m,null,null,false)!==false){if(c&&c.length){m.setRecords(d=Ext.Array.filter(d,Ext.util.Filter.createFilterFn(c)));m.setTotal(d.length)}if(a){h=h?h.concat(a):h}if(h&&h.length){m.setRecords(d=Ext.Array.sort(d,Ext.util.Sortable.createComparator(h)))}if(j.getEnablePaging()&&b!==undefined&&f!==undefined){if(b>=m.getTotal()){m.setConfig({success:false,records:[],total:0})}else{m.setRecords(Ext.Array.slice(d,b,b+f))}}g.setCompleted()}},clear:Ext.emptyFn},0,0,0,0,["proxy.memory"],0,[Ext.data.proxy,"Memory",Ext.data,"MemoryProxy"],0));(Ext.cmd.derive("Ext.data.ProxyStore",Ext.data.AbstractStore,{config:{model:undefined,fields:null,proxy:undefined,autoLoad:undefined,autoSync:false,batchUpdateMode:"operation",sortOnLoad:true,trackRemoved:true,asynchronousLoad:undefined},onClassExtended:function(b,d,a){var c=d.model,f;if(typeof c==="string"){f=a.onBeforeCreated;a.onBeforeCreated=function(){var h=this,g=arguments;Ext.require(c,function(){f.apply(h,g)})}}},implicitModel:"Ext.data.Model",autoSyncSuspended:0,constructor:function(a){var b=this;b.removed=[];Ext.data.AbstractStore.prototype.constructor.apply(this,arguments);if(b.getAsynchronousLoad()===false){b.flushLoad()}},applyAsynchronousLoad:function(a){if(a==null){a=!this.loadsSynchronously()}return a},updateAutoLoad:function(a){this.getData();if(a){this.load(Ext.isObject(a)?a:undefined)}},getTotalCount:function(){return this.totalCount||0},applyFields:function(a){if(a){this.createImplicitModel(a)}},applyModel:function(a){if(a){a=Ext.data.schema.Schema.lookupEntity(a)}else{this.getFields();a=this.getModel()||this.createImplicitModel()}return a},applyProxy:function(b){var a=this.getModel();if(b!==null){if(b){if(b.isProxy){b.setModel(a)}else{if(Ext.isString(b)){b={type:b,model:a}}else{if(!b.model){b=Ext.apply({model:a},b)}}b=Ext.createByAlias("proxy."+b.type,b);b.autoCreated=true}}else{if(a){b=a.getProxy()}}if(!b){b=Ext.createByAlias("proxy.memory");b.autoCreated=true}}return b},applyState:function(b){var a=this;Ext.data.AbstractStore.prototype.applyState.call(this,b);if(a.getAutoLoad()||a.isLoaded()){a.load()}},updateProxy:function(b,a){this.proxyListeners=Ext.destroy(this.proxyListeners)},updateTrackRemoved:function(a){this.cleanRemoved();this.removed=a?[]:null},onMetaChange:function(a,b){this.fireEvent("metachange",this,b)},create:function(f,c){var d=this,g=d.getModel(),a=new g(f),b;c=Ext.apply({},c);if(!c.records){c.records=[a]}c.internalScope=d;c.internalCallback=d.onProxyWrite;b=d.createOperation("create",c);return b.execute()},read:function(){return this.load.apply(this,arguments)},update:function(b){var c=this,a;b=Ext.apply({},b);if(!b.records){b.records=c.getUpdatedRecords()}b.internalScope=c;b.internalCallback=c.onProxyWrite;a=c.createOperation("update",b);return a.execute()},onProxyWrite:function(b){var c=this,d=b.wasSuccessful(),a=b.getRecords();switch(b.getAction()){case"create":c.onCreateRecords(a,b,d);break;case"update":c.onUpdateRecords(a,b,d);break;case"destroy":c.onDestroyRecords(a,b,d);break}if(d){c.fireEvent("write",c,b);c.fireEvent("datachanged",c)}},onCreateRecords:Ext.emptyFn,onUpdateRecords:Ext.emptyFn,onDestroyRecords:function(b,a,c){if(c){this.cleanRemoved()}},erase:function(b){var c=this,a;b=Ext.apply({},b);if(!b.records){b.records=c.getRemovedRecords()}b.internalScope=c;b.internalCallback=c.onProxyWrite;a=c.createOperation("destroy",b);return a.execute()},onBatchOperationComplete:function(b,a){return this.onProxyWrite(a)},onBatchComplete:function(c,a){var g=this,b=c.operations,f=b.length,d;if(g.batchUpdateMode!=="operation"){g.suspendEvents();for(d=0;d<f;d++){g.onProxyWrite(b[d])}g.resumeEvents()}g.isSyncing=false;g.fireEvent("datachanged",g)},onBatchException:function(b,a){},filterNew:function(a){return a.phantom===true&&a.isValid()},getNewRecords:function(){return[]},getUpdatedRecords:function(){return[]},getModifiedRecords:function(){return[].concat(this.getNewRecords(),this.getUpdatedRecords())},filterUpdated:function(a){return a.dirty===true&&a.phantom!==true&&a.isValid()},getRemovedRecords:function(){var a=this.getRawRemovedRecords();return a?Ext.Array.clone(a):a},sync:function(c){var f=this,b={},g=f.getNewRecords(),d=f.getUpdatedRecords(),a=f.getRemovedRecords(),h=false;f.needsSync=false;if(g.length>0){b.create=g;h=true}if(d.length>0){b.update=d;h=true}if(a.length>0){b.destroy=a;h=true}if(h&&f.fireEvent("beforesync",b)!==false){f.isSyncing=true;c=c||{};f.proxy.batch(Ext.apply(c,{operations:b,listeners:f.getBatchListeners()}))}return f},getBatchListeners:function(){var b=this,a={scope:b,exception:b.onBatchException,complete:b.onBatchComplete};if(b.batchUpdateMode==="operation"){a.operationcomplete=b.onBatchOperationComplete}return a},save:function(){return this.sync.apply(this,arguments)},load:function(a){var b=this;if(typeof a==="function"){a={callback:a}}else{a=a?Ext.Object.chain(a):{}}b.pendingLoadOptions=a;if(b.getAsynchronousLoad()){if(!b.loadTimer){b.loadTimer=Ext.asap(b.flushLoad,b)}}else{b.flushLoad()}return b},flushLoad:function(){var c=this,b=c.pendingLoadOptions,a;c.clearLoadTask();if(!b){return}c.setLoadOptions(b);if(c.getRemoteSort()&&b.sorters){c.fireEvent("beforesort",c,b.sorters)}a=Ext.apply({internalScope:c,internalCallback:c.onProxyLoad,scope:c},b);c.lastOptions=a;a=c.createOperation("read",a);if(c.fireEvent("beforeload",c,a)!==false){c.onBeforeLoad(a);c.loading=true;a.execute()}},reload:function(a){var b=Ext.apply({},a,this.lastOptions);return this.load(b)},onEndUpdate:function(){var a=this;if(a.needsSync&&a.autoSync&&!a.autoSyncSuspended){a.sync()}},afterReject:function(a){var b=this;if(b.contains(a)){b.onUpdate(a,Ext.data.Model.REJECT,null);b.fireEvent("update",b,a,Ext.data.Model.REJECT,null)}},afterCommit:function(a,c){var b=this;if(!c){c=null}if(b.contains(a)){b.onUpdate(a,Ext.data.Model.COMMIT,c);b.fireEvent("update",b,a,Ext.data.Model.COMMIT,c)}},afterErase:function(a){this.onErase(a)},onErase:Ext.emptyFn,onUpdate:Ext.emptyFn,onDestroy:function(){var b=this,a=b.getProxy();b.clearLoadTask();b.getData().destroy();b.data=null;b.setProxy(null);if(a.autoCreated){a.destroy()}b.setModel(null)},hasPendingLoad:function(){return !!this.pendingLoadOptions||this.isLoading()},isLoading:function(){return !!this.loading},isLoaded:function(){return this.loadCount>0},suspendAutoSync:function(){++this.autoSyncSuspended},resumeAutoSync:function(b){var a=this;if(a.autoSyncSuspended&&!--a.autoSyncSuspended){if(b){a.sync()}}},removeAll:Ext.emptyFn,clearData:Ext.emptyFn,privates:{getRawRemovedRecords:function(){return this.removed},onExtraParamsChanged:function(){},clearLoadTask:function(){Ext.asapCancel(this.loadTimer);this.pendingLoadOptions=this.loadTimer=null},cleanRemoved:function(){var c=this.getRawRemovedRecords(),a,b;if(c){for(b=0,a=c.length;b<a;++b){c[b].unjoin(this)}c.length=0}},createOperation:function(d,a){var f=this,b=f.getProxy(),c;if(!f.proxyListeners){c={scope:f,destroyable:true,beginprocessresponse:f.beginUpdate,endprocessresponse:f.endUpdate};if(!f.disableMetaChangeEvent){c.metachange=f.onMetaChange}f.proxyListeners=b.on(c)}return b.createOperation(d,a)},createImplicitModel:function(a){var f=this,b={extend:f.implicitModel,statics:{defaultProxy:"memory"}},d,c;if(a){b.fields=a}c=Ext.define(null,b);f.setModel(c);d=f.getProxy();if(d){c.setProxy(d)}else{f.setProxy(c.getProxy())}},loadsSynchronously:function(){return this.getProxy().isSynchronous},onBeforeLoad:Ext.privateFn,removeFromRemoved:function(a){var b=this.getRawRemovedRecords();if(b){Ext.Array.remove(b,a);a.unjoin(this)}},setLoadOptions:function(a){var c=this,b,d;if(c.getRemoteFilter()){b=c.getFilters(false);if(b&&b.getCount()){a.filters=b.getRange()}}if(c.getRemoteSort()){d=c.getSorters(false);if(d&&d.getCount()){a.sorters=d.getRange()}}}}},1,0,0,0,0,0,[Ext.data,"ProxyStore"],0));(Ext.cmd.derive("Ext.data.LocalStore",Ext.Mixin,{mixinConfig:{id:"localstore"},config:{extraKeys:null},applyExtraKeys:function(a){var c,b=this.getData();b.setExtraKeys(a);a=b.getExtraKeys();for(c in a){this[c]=a[c]}},add:function(a){return this.insert(this.getCount(),arguments.length===1?a:arguments)},constructDataCollection:function(){return new Ext.util.Collection({rootProperty:"data"})},createModel:function(a){var b=this.getSession(),c;if(!a.isModel){c=this.getModel();a=new c(a,b)}return a},createFiltersCollection:function(){return this.getData().getFilters()},createSortersCollection:function(){var a=this.getData().getSorters();a.setSorterConfigure(this.addFieldTransform,this);return a},onCollectionSort:function(){this.onSorterEndUpdate()},onCollectionFilter:function(){this.onFilterEndUpdate()},notifySorterChange:function(){this.getData().onSorterChange()},forceLocalSort:function(){this.getData().onSortChange()},contains:function(a){return this.indexOf(a)>-1},each:function(f,d){var g=this.data.items,a=g.length,b,c;for(c=0;c<a;++c){b=g[c];if(f.call(d||b,b,c,a)===false){break}}},collect:function(b,a,c){var d=this,f=d.getData();if(c===true&&f.filtered){f=f.getSource()}return f.collect(b,"data",a)},getById:function(b){var a=this.getData();if(a.filtered){a=a.getSource()}return a.get(b)||null},getByInternalId:function(a){var c=this.getData(),b;if(c.filtered){if(!c.$hasExtraKeys){b=this.makeInternalKeyCfg();c.setExtraKeys(b);c.$hasExtraKeys=true}c=c.getSource()}if(!c.$hasExtraKeys){c.setExtraKeys(b||this.makeInternalKeyCfg());c.$hasExtraKeys=true}return c.byInternalId.get(a)||null},getDataSource:function(){var a=this.getData();return a.getSource()||a},indexOf:function(a){return this.getData().indexOf(a)},indexOfId:function(a){return this.indexOf(this.getById(a))},insert:function(c,b){var f=this,a,d;if(b){if(!Ext.isIterable(b)){b=[b]}else{b=Ext.Array.clone(b)}a=b.length}if(!a){return[]}for(d=0;d<a;++d){b[d]=f.createModel(b[d])}f.getData().insert(c,b);return b},queryBy:function(b,a){var c=this.getData();return(c.getSource()||c).createFiltered(b,a)},query:function(f,d,g,a,b){var c=this.getData();return(c.getSource()||c).createFiltered(f,d,g,a,b)},first:function(a){return this.getData().first(a)||null},last:function(a){return this.getData().last(a)||null},sum:function(c,a){var b=this.getData();return(a&&this.isGrouped())?b.sumByGroup(c):b.sum(c)},count:function(a){var b=this.getData();return(a&&this.isGrouped())?b.countByGroup():b.count()},min:function(c,a){var b=this.getData();return(a&&this.isGrouped())?b.minByGroup(c):b.min(c)},max:function(c,a){var b=this.getData();return(a&&this.isGrouped())?b.maxByGroup(c):b.max(c)},average:function(c,a){var b=this.getData();return(a&&this.isGrouped())?b.averageByGroup(c):b.average(c)},aggregate:function(h,o,f,j){var g=this,a,d,b,m,c;if(f&&g.isGrouped()){a=g.getGroups().items;d=a.length;b={};for(c=0;c<d;++c){m=a[c];b[m.getGroupKey()]=g.getAggregate(h,o||g,m.items,j)}return b}else{return g.getAggregate(h,o,g.getData().items,j)}},getAggregate:function(g,f,c,h){var b=[],a=c.length,d;for(d=0;d<a;++d){b[d]=c[d].get(h)}return g.call(f||this,c,b)},addObserver:function(a){var b=this.observers;if(!b){this.observers=b=new Ext.util.Collection()}b.add(a)},removeObserver:function(a){var b=this.observers;if(b){b.remove(a)}},callObservers:function(h,d){var j=this.observers,a,c,f,b,g;if(j){c=j.items;if(d){d.unshift(this)}else{d=[this]}for(f=0,a=c.length;f<a;++f){g=c[f];b="onSource"+h;if(g[b]){g[b].apply(g,d)}}}},queryRecordsBy:function(f,d){var h=this.getData(),g=[],a,c,b;h=(h.getSource()||h).items;d=d||this;for(c=0,a=h.length;c<a;++c){b=h[c];if(f.call(d,b)===true){g.push(b)}}return g},queryRecords:function(h,g){var f=this.getData(),d=[],a,c,b;f=(f.getSource()||f).items;for(c=0,a=f.length;c<a;++c){b=f[c];if(b.get(h)===g){d.push(b)}}return d},privates:{isLast:function(a){return a===this.last()},makeInternalKeyCfg:function(){return{byInternalId:{property:"internalId",rootProperty:""}}}}},0,0,0,0,0,0,[Ext.data,"LocalStore"],0));(Ext.cmd.derive("Ext.data.proxy.Server",Ext.data.proxy.Proxy,{alternateClassName:"Ext.data.ServerProxy",isRemote:true,config:{url:"",pageParam:"page",startParam:"start",limitParam:"limit",groupParam:"group",groupDirectionParam:"groupDir",sortParam:"sort",filterParam:"filter",directionParam:"dir",idParam:"id",simpleSortMode:false,simpleGroupMode:false,noCache:true,cacheString:"_dc",timeout:30000,api:{create:undefined,read:undefined,update:undefined,destroy:undefined},extraParams:{}},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},erase:function(){return this.doRequest.apply(this,arguments)},setExtraParam:function(a,b){var c=this.getExtraParams();c[a]=b;this.fireEvent("extraparamschanged",c)},updateExtraParams:function(b,a){this.fireEvent("extraparamschanged",b)},buildRequest:function(a){var g=this,b=Ext.apply({},a.getParams()),h=Ext.applyIf(b,g.getExtraParams()||{}),f,d,c;Ext.applyIf(h,g.getParams(a));d=a.getId();c=g.getIdParam();if(d!==undefined&&h[c]===undefined){h[c]=d}f=new Ext.data.Request({params:h,action:a.getAction(),records:a.getRecords(),url:a.getUrl(),operation:a,proxy:g});f.setUrl(g.buildUrl(f));a.setRequest(f);return f},processResponse:function(j,c,h,b){var g=this,d,a,f;g.fireEvent("beginprocessresponse",g,b,c);if(j===true){a=g.getReader();if(b.status===204){f=a.getNullResultSet()}else{f=a.read(g.extractResponseData(b),{recordCreator:c.getRecordCreator()})}c.process(f,h,b);d=!c.wasSuccessful()}else{g.setException(c,b);d=true}if(d){g.fireEvent("exception",g,b,c)}g.afterRequest(h,j);g.fireEvent("endprocessresponse",g,b,c)},setException:function(b,a){b.setException({status:a.status,statusText:a.statusText,response:a})},extractResponseData:Ext.identityFn,applyEncoding:function(a){return Ext.encode(a)},encodeSorters:function(f,c){var a=[],d=f.length,b;for(b=0;b<d;b++){a[b]=f[b].serialize()}return this.applyEncoding(c?a[0]:a)},encodeFilters:function(d){var a=[],c=d.length,b,f;for(b=0;b<c;b++){a[b]=d[b].serialize()}return this.applyEncoding(a)},getParams:function(t){if(!t.isReadOperation){return{}}var A=this,z={},w=t.getGrouper(),a=t.getSorters(),r=t.getFilters(),j=t.getPage(),h=t.getStart(),y=t.getLimit(),p=A.getSimpleSortMode(),d=A.getSimpleGroupMode(),v=A.getPageParam(),f=A.getStartParam(),b=A.getLimitParam(),c=A.getGroupParam(),q=A.getGroupDirectionParam(),g=A.getSortParam(),u=A.getFilterParam(),s=A.getDirectionParam(),o,m;if(v&&j){z[v]=j}if(f&&(h||h===0)){z[f]=h}if(b&&y){z[b]=y}o=c&&w;if(o){if(d){z[c]=w.getProperty();z[q]=w.getDirection()}else{z[c]=A.encodeSorters([w],true)}}if(g&&a&&a.length>0){if(p){m=0;if(a.length>1&&o){m=1}z[g]=a[m].getProperty();z[s]=a[m].getDirection()}else{z[g]=A.encodeSorters(a)}}if(u&&r&&r.length>0){z[u]=A.encodeFilters(r)}return z},buildUrl:function(c){var b=this,a=b.getUrl(c);if(b.getNoCache()){a=Ext.urlAppend(a,Ext.String.format("{0}={1}",b.getCacheString(),Ext.Date.now()))}return a},getUrl:function(b){var a;if(b){a=b.getUrl()||this.getApi()[b.getAction()]}return a?a:(arguments.callee.$previous||Ext.data.proxy.Proxy.prototype.getUrl).call(this)},doRequest:function(a){},afterRequest:Ext.emptyFn,destroy:function(){Ext.data.proxy.Proxy.prototype.destroy.call(this);Ext.destroy(this.getReader(),this.getWriter());this.reader=this.writer=null}},0,0,0,0,["proxy.server"],0,[Ext.data.proxy,"Server",Ext.data,"ServerProxy"],0));(Ext.cmd.derive("Ext.data.proxy.Ajax",Ext.data.proxy.Server,{alternateClassName:["Ext.data.HttpProxy","Ext.data.AjaxProxy"],isAjaxProxy:true,defaultActionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},config:{binary:false,headers:undefined,paramsAsJson:false,withCredentials:false,useDefaultXhrHeader:true,username:null,password:null,actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"}},doRequest:function(a){var d=this,f=d.getWriter(),c=d.buildRequest(a),h=d.getMethod(c),b,g;if(f&&a.allowWrite()){c=f.write(c)}c.setConfig({binary:d.getBinary(),headers:d.getHeaders(),timeout:d.getTimeout(),scope:d,callback:d.createRequestCallback(c,a),method:h,useDefaultXhrHeader:d.getUseDefaultXhrHeader(),disableCaching:false});if(h.toUpperCase()!=="GET"&&d.getParamsAsJson()){g=c.getParams();if(g){b=c.getJsonData();if(b){b=Ext.Object.merge({},b,g)}else{b=g}c.setJsonData(b);c.setParams(undefined)}}if(d.getWithCredentials()){c.setWithCredentials(true);c.setUsername(d.getUsername());c.setPassword(d.getPassword())}return d.sendRequest(c)},sendRequest:function(a){a.setRawRequest(Ext.Ajax.request(a.getCurrentConfig()));this.lastRequest=a;return a},abort:function(a){a=a||this.lastRequest;if(a){Ext.Ajax.abort(a.getRawRequest())}},getMethod:function(a){var c=this.getActionMethods(),b=a.getAction(),d;if(c){d=c[b]}return d||this.defaultActionMethods[b]},createRequestCallback:function(c,a){var b=this;return function(f,g,d){if(c===b.lastRequest){b.lastRequest=null}b.processResponse(g,a,c,d)}},destroy:function(){this.lastRequest=null;Ext.data.proxy.Server.prototype.destroy.call(this)}},0,0,0,0,["proxy.ajax"],0,[Ext.data.proxy,"Ajax",Ext.data,"HttpProxy",Ext.data,"AjaxProxy"],0));(Ext.cmd.derive("Ext.data.reader.Json",Ext.data.reader.Reader,{alternateClassName:"Ext.data.JsonReader",config:{record:null,metaProperty:"metaData",useSimpleAccessors:false,preserveRawData:false},updateRootProperty:function(){this.forceBuildExtractors()},updateMetaProperty:function(){this.forceBuildExtractors()},readRecords:function(d,c,a){var b=this,f;if(b.getMeta){f=b.getMeta(d);if(f){b.onMetaChange(f)}}else{if(d.metaData){b.onMetaChange(d.metaData)}}return Ext.data.reader.Reader.prototype.readRecords.call(this,d,c,a)},getResponseData:function(a){var b;try{return Ext.decode(a.responseText)}catch(c){b=this.createReadError(c.message);Ext.Logger.warn("Unable to parse the JSON returned by the server");this.fireEvent("exception",this,a,b);return b}},buildExtractors:function(){var c=this,a,b;if(Ext.data.reader.Reader.prototype.buildExtractors.apply(this,arguments)){a=c.getMetaProperty();b=c.getRootProperty();if(b){c.getRoot=c.getAccessor(b)}else{c.getRoot=Ext.identityFn}if(a){c.getMeta=c.getAccessor(a)}}},extractData:function(a,f){var g=this.getRecord(),d=[],c,b;if(g){c=a.length;if(!c&&Ext.isObject(a)){c=1;a=[a]}for(b=0;b<c;b++){d[b]=a[b][g]}}else{d=a}return Ext.data.reader.Reader.prototype.extractData.call(this,d,f)},getModelData:function(a){return this.getPreserveRawData()?Ext.apply({},a):a},createAccessor:(function(){var a=/[\[\.]/;return function(u){var q=this,b=q.getUseSimpleAccessors(),f,y,m,g,d,t,w,s,r,o,p,h,v,j;if(!(u||u===0)){return}if(typeof u==="function"){return u}if(!b){f=String(u).search(a)}if(b===true||f<0){y=function(c){return c[u]}}else{m="raw";g=[];d="";t=0;j=u.length;for(h=0;h<=j;++h){p=u[h];w=p===".";s=p==="[";r=p==="]";o=w||s||r||!p;if(!o||t>1||(t&&!r)){d+=p}else{if(o){v=false;if(s){++t}else{if(r){--t;v=true}}if(d){if(v){d="["+d+"]"}else{d="."+d}m+=d;g.push(""+m);d=""}}}}y=g.join(" && ");y=Ext.functionFactory("raw","return "+y)}return y}}()),createFieldAccessor:function(f){var b=this,a=f.mapping,c=a||a===0,d=c?a:f.name;if(c){if(typeof d==="function"){return function(g){return f.mapping(g,b)}}else{return b.createAccessor(d)}}},getAccessorKey:function(b){var a=this.getUseSimpleAccessors()?"simple":"";return this.$className+a+b},privates:{copyFrom:function(a){Ext.data.reader.Reader.prototype.copyFrom.call(this,a);this.getRoot=a.getRoot}}},0,0,0,0,["reader.json"],0,[Ext.data.reader,"Json",Ext.data,"JsonReader"],0));(Ext.cmd.derive("Ext.data.writer.Json",Ext.data.writer.Writer,{alternateClassName:"Ext.data.JsonWriter",config:{rootProperty:undefined,encode:false,allowSingle:true,expandData:false},getExpandedData:function(d){var b=d.length,f=0,m,a,g,c,h,o=function(j,p){var q={};q[j]=p;return q};for(;f<b;f++){m=d[f];for(a in m){if(m.hasOwnProperty(a)){g=a.split(".");c=g.length-1;if(c>0){h=m[a];for(;c>0;c--){h=o(g[c],h)}m[g[0]]=m[g[0]]||{};Ext.Object.merge(m[g[0]],h);delete m[a]}}}}return d},writeRecords:function(f,g){var d=this,a=d.getRootProperty(),c,h,b;if(d.getExpandData()){g=d.getExpandedData(g)}if(d.getAllowSingle()&&g.length===1){g=g[0];h=true}b=this.getTransform();if(b){g=b(g,f)}if(d.getEncode()){if(a){f.setParam(a,Ext.encode(g))}else{}}else{if(h||(g&&g.length)){c=f.getJsonData()||{};if(a){c[a]=g}else{c=g}f.setJsonData(c)}}return f}},0,0,0,0,["writer.json"],0,[Ext.data.writer,"Json",Ext.data,"JsonWriter"],0));(Ext.cmd.derive("Ext.util.Group",Ext.util.Collection,{config:{groupKey:null},$endUpdatePriority:2001},0,0,0,0,0,0,[Ext.util,"Group"],0));(Ext.cmd.derive("Ext.util.SorterCollection",Ext.util.Collection,{isSorterCollection:true,$sortable:null,sortFn:null,config:{sorterOptionsFn:null,sorterOptionsScope:null},constructor:function(a){var b=this;b.sortFn=Ext.util.Sorter.createComparator(b);Ext.util.Collection.prototype.constructor.call(this,a);b.setDecoder(b.decodeSorter)},addSort:function(m,j,c){var h=this,d,f,b,p,a,o,g;if(!m){h.beginUpdate();h.endUpdate()}else{p=h.getOptions();if(m instanceof Array){g=m;c=j;j=null}else{if(Ext.isString(m)){if(!(o=h.get(m))){g=[{property:m,direction:j||p.getDefaultSortDirection()}]}else{g=[o]}}else{if(Ext.isFunction(m)){g=[{sorterFn:m,direction:j||p.getDefaultSortDirection()}]}else{g=[m];c=j;j=null}}}c=h._sortModes[c||"replace"];a=h.getAt(0);d=h.length;f=c.append?d:0;h.beginUpdate();h.splice(f,c.replace?d:0,g);if(c.multi){d=h.length;b=p.getMultiSortLimit();if(d>b){h.removeAt(b,d)}}if(o&&j){o.setDirection(j)}else{if(f===0&&a&&a===h.getAt(0)){a.toggle()}}h.endUpdate()}},clear:function(){this.beginUpdate();Ext.util.Collection.prototype.clear.call(this);this.endUpdate(this.items)},getSortFn:function(){return this.sortFn},getByProperty:function(f){var b=this.items,a=b.length,c,d;for(c=0;c<a;++c){d=b[c];if(d.getProperty()===f){return d}}return null},_sortModes:{append:{append:1},multi:{multi:1},prepend:{prepend:1},replace:{replace:1}},decodeSorter:function(j,a){var g=this,m=g.getOptions(),h=m.getRootProperty(),b=g.getSorterOptionsFn(),c,f,d;if(j.isSorter){if(!j.getRoot()){j.setRoot(h)}}else{f={direction:m.getDefaultSortDirection(),root:h};d=typeof j;if(d==="string"){c=g.get(j);if(c){return c}f.property=j}else{if(d==="function"){f.sorterFn=j}else{f=Ext.apply(f,j);if(f.fn){f.sorterFn=f.fn;delete f.fn}}}j=Ext.create(a||"Ext.util.Sorter",f)}if(b){b.call(g.getSorterOptionsScope()||g,j)}return j},setSorterConfigure:function(b,a){this.setSorterOptionsFn(b);this.setSorterOptionsScope(a)},decodeRemoveItems:function(h,d){var m=this,f=(d===undefined)?h:h[d];if(!f||!f.$cloned){if(h.length>d+1||!Ext.isIterable(f)){f=Ext.Array.slice(h,d)}var o=m.items,g=f.length,c=[],b,p,a,q,j;for(b=0;b<g;b++){q=f[b];if(q&&q.isSorter){c.push(q)}else{j=typeof q;if(j==="string"){q=m.get(q);if(q){c.push(q)}}else{if(j==="function"){for(a=o.length;a-->0;){p=o[a];if(p.getSorterFn()===q){c.push(p)}}}}}}f=c;f.$cloned=true}return f},getOptions:function(){return this.$sortable||this}},1,0,0,0,0,0,[Ext.util,"SorterCollection"],0));(Ext.cmd.derive("Ext.util.FilterCollection",Ext.util.Collection,{isFilterCollection:true,$filterable:null,filterFn:null,constructor:function(a){var b=this;b.filterFn=Ext.util.Filter.createFilterFn(b);Ext.util.Collection.prototype.constructor.call(this,a);b.setDecoder(b.decodeFilter)},filterData:function(a){return this.filtered?Ext.Array.filter(a,this.filterFn):a},getFilterFn:function(){return this.filterFn},isItemFiltered:function(a){return !this.filterFn(a)},decodeFilter:function(c){var b=this.getOptions(),a=b.getRootProperty(),d;if(c.isFilter){if(!c.getRoot()){c.setRoot(a)}}else{d={root:a};if(Ext.isFunction(c)){d.filterFn=c}else{d=Ext.apply(d,c);if(d.fn){d.filterFn=d.fn;delete d.fn}if(Ext.util.Filter.isInvalid(d)){return false}}c=new Ext.util.Filter(d)}return c},decodeRemoveItems:function(r,m){var t=this,o=(m===undefined)?r:r[m];if(!o.$cloned){if(r.length>m+1||!Ext.isIterable(o)){o=Ext.Array.slice(r,m)}var f=t.items,q=o.length,h=[],b,g,c,p,a,u,j,d,s;for(g=0;g<q;g++){b=o[g];if(b&&b.isFilter){h.push(b)}else{s=typeof b;c=s==="function";p=b.property!==undefined&&b.value!==undefined;a=s==="string";for(d=f.length;d-->0;){u=f[d];j=false;if(a){j=u.getProperty()===b}else{if(c){j=u.getFilterFn()===b}else{if(p){j=u.getProperty()===b.property&&u.getValue()===b.value}}}if(j){h.push(u)}}}}o=h;o.$cloned=true}return o},getOptions:function(){return this.$filterable||this}},1,0,0,0,0,0,[Ext.util,"FilterCollection"],0));(Ext.cmd.derive("Ext.util.GroupCollection",Ext.util.Collection,{isGroupCollection:true,config:{grouper:null,itemRoot:null},observerPriority:-100,onCollectionAdd:function(b,a){this.addItemsToGroups(b,a.items)},onCollectionBeforeItemChange:function(b,a){this.changeDetails=a},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(c,a){var b=a.item;if(!a.indexChanged){this.syncItemGrouping(c,b,c.getKey(b),a.oldKey,a.oldIndex)}this.changeDetails=null},onCollectionRefresh:function(a){this.removeAll();this.addItemsToGroups(a,a.items)},onCollectionRemove:function(a,b){var h=this,o=h.changeDetails,g,j,m,f,c,d,p;if(o){p=o.item;m=h.findGroupForItem(p);g=[];if(m){g.push({group:m,items:[p]})}}else{g=h.groupItems(a,b.items,false)}for(f=0,c=g.length;f<c;++f){m=(j=g[f]).group;if(m){m.remove(j.items);if(!m.length){(d||(d=[])).push(m)}}}if(d){h.remove(d)}},onCollectionSort:function(f){var d=this,h=f.getSorters(false),a,c,b,g;if(h){a=d.items;c=d.length;for(b=0;b<c;++b){g=a[b];if(g.getSorters()!==h){g.setSorters(h)}}}},onCollectionUpdateKey:function(d,b){var a=b.index,c=b.item;if(!b.indexChanged){a=d.indexOf(c);this.syncItemGrouping(d,c,b.newKey,b.oldKey,a)}},addItemsToGroups:function(b,a){this.groupItems(b,a,true)},groupItems:function(b,o,d){var p=this,a={},j=[],c=b.getGrouper(),r=p.itemGroupKeys,q,s,u,h,t,f,m,g;for(h=0,m=o.length;h<m;++h){u=c.getGroupString(t=o[h]);f=b.getKey(t);if(d){(r||(p.itemGroupKeys=r={}))[f]=u}else{if(r){delete r[f]}}if(!(q=a[u])){if(!(s=p.getByKey(u))&&d){(g||(g=[])).push(s=p.createGroup(b,u))}j.push(a[u]=q={group:s,items:[]})}q.items.push(t)}for(h=0,m=j.length;h<m;++h){q=j[h];q.group.add(q.items)}if(g){p.add(g)}return j},syncItemGrouping:function(a,t,g,m,b){var r=this,o=r.itemGroupKeys||(r.itemGroupKeys={}),c=a.getGrouper(),u=c.getGroupString(t),h=0,q=-1,p,s,f,j,d;if(m){j=o[m];delete o[m]}else{j=o[g]}o[g]=u;if(!(s=r.get(u))){s=r.createGroup(a,u);p=[s]}if(s.get(g)!==t){if(s.getCount()>0&&a.getSorters().getCount()===0){d=a.indexOf(s.items[0]);if(b<d){q=0}else{q=b-d}}if(q===-1){s.add(t)}else{s.insert(q,t)}}else{s.itemChanged(t)}if(u!==j&&(j===0||j)){f=r.get(j);if(f){f.remove(t);if(!f.length){h=[f]}}}if(p){r.splice(0,h,p)}else{if(h){r.splice(0,h)}}},createGroup:function(b,a){var c=new Ext.util.Group({groupKey:a,rootProperty:this.getItemRoot(),sorters:b.getSorters()});return c},getKey:function(a){return a.getGroupKey()},createSortFn:function(){var c=this,a=c.getGrouper(),b=c.getSorters().getSortFn();if(!a){return b}return function(d,f){return a.sort(d.items[0],f.items[0])||b(d,f)}},updateGrouper:function(a){var b=this;b.grouped=!!(a&&b.$groupable.getAutoGroup());b.onSorterChange();b.onEndUpdateSorters(b.getSorters())},destroy:function(){this.$groupable=null;Ext.util.Collection.prototype.destroy.call(this)},privates:{findGroupForItem:function(d){var b=this.items,a=b.length,c,f;for(c=0;c<a;++c){f=b[c];if(f.contains(d)){return f}}}}},0,0,0,0,0,0,[Ext.util,"GroupCollection"],0));(Ext.cmd.derive("Ext.data.Store",Ext.data.ProxyStore,{config:{data:0,clearRemovedOnLoad:true,clearOnPageLoad:true,associatedEntity:null,role:null,session:null},addRecordsOptions:{addRecords:true},loadCount:0,complete:false,moveMapCount:0,constructor:function(a){var b=this,c;if(a){if(a.buffered){return new Ext.data.BufferedStore(a)}}Ext.data.ProxyStore.prototype.constructor.call(this,a);b.getData().addObserver(b);c=b.inlineData;if(c){delete b.inlineData;b.loadInlineData(c)}},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},applyData:function(c,a){var b=this;b.getFields();b.getModel();if(c&&c.isCollection){a=c}else{if(!a){a=b.constructDataCollection()}if(c){if(b.isInitializing){b.inlineData=c}else{b.loadData(c)}}}return a},loadInlineData:function(c){var b=this,a=b.getProxy();if(a&&a.isMemoryProxy){a.setData(c);b.suspendEvents();b.read();b.resumeEvents()}else{b.removeAll(true);b.suspendEvents();b.loadData(c);b.resumeEvents()}},onCollectionAdd:function(b,a){this.onCollectionAddItems(b,a.items,a)},onCollectionFilterAdd:function(b,a){this.onCollectionAddItems(b,a)},onCollectionAddItems:function(g,b,a){var o=this,j=b.length,q=a?!a.next:false,h=o.removed,f=o.ignoreCollectionAdd,m=o.getSession(),s=a&&a.replaced,c,p,d,r;for(c=0;c<j;++c){d=b[c];if(m){m.adopt(d)}if(!f){d.join(o);if(h&&h.length){Ext.Array.remove(h,d)}p=p||d.phantom||d.dirty}}if(f){return}if(s){r=[];do{Ext.Array.push(r,s.items);s=s.next}while(s);o.setMoving(r,true)}if(a){if(a.replaced){if(q){o.fireEvent("refresh",o)}}else{o.fireEvent("add",o,b,a.at);if(q){o.fireEvent("datachanged",o)}}}if(r){o.setMoving(r,false)}o.needsSync=o.needsSync||p},onCollectionFilteredItemChange:function(){this.onCollectionItemChange.apply(this,arguments)},onCollectionItemChange:function(g,f){var d=this,a=f.item,c=f.modified||null,b=f.meta;if(d.fireChangeEvent(a)){d.onUpdate(a,b,c,f);d.fireEvent("update",d,a,b,c,f)}},fireChangeEvent:function(a){return this.getDataSource().contains(a)},afterChange:function(a,c,b){this.getData().itemChanged(a,c||null,undefined,b)},afterCommit:function(a,b){this.afterChange(a,b,Ext.data.Model.COMMIT)},afterEdit:function(a,b){this.needsSync=this.needsSync||a.dirty;this.afterChange(a,b,Ext.data.Model.EDIT)},afterReject:function(a){this.afterChange(a,null,Ext.data.Model.REJECT)},afterDrop:function(a){this.getData().remove(a)},afterErase:function(a){this.removeFromRemoved(a)},addSorted:function(a){var c=this,f=c.getRemoteSort(),d=c.getData(),b;if(f){d.setSorters(c.getSorters())}b=d.findInsertionIndex(a);if(f){d.setSorters(null)}return c.insert(b,a)},remove:function(b,m,h){var j=this,c=j.getDataSource(),g,d,a,f;if(b){if(b.isModel){if(c.indexOf(b)>-1){a=[b];g=1}else{g=0}}else{a=[];for(d=0,g=b.length;d<g;++d){f=b[d];if(f&&f.isEntity){if(!c.contains(f)){continue}}else{if(!(f=c.getAt(f))){continue}}a.push(f)}g=a.length}}if(!g){return[]}j.removeIsMove=m===true;j.removeIsSilent=h;c.remove(a);j.removeIsSilent=false;return a},onCollectionRemove:function(h,a){var q=this,j=q.removed,c=a.items,o=c.length,m=a.at,b=a.replacement,s=q.removeIsMove||(b&&Ext.Array.equals(c,b.items)),p=q.removeIsSilent,r=!a.next,f=q.getDataSource(),d,g;if(q.ignoreCollectionRemove){return}if(b){q.setMoving(b.items,true)}for(d=0;d<o;++d){g=c[d];if(!f.contains(g)){if(j&&!s&&!g.phantom&&!g.erasing){g.removedFrom=m+d;j.push(g);q.needsSync=true}else{g.unjoin(q)}}}if(!p){if(!b||!b.items.length){q.fireEvent("remove",q,c,m,s);if(r){q.fireEvent("datachanged",q)}}}if(b){q.setMoving(b.items,false)}},onFilterEndUpdate:function(){Ext.data.ProxyStore.prototype.onFilterEndUpdate.apply(this,arguments);this.callObservers("Filter")},removeAt:function(a,b){var c=this.getData();a=Math.max(a,0);if(a<c.length){if(arguments.length===1){b=1}else{if(!b){return}}c.removeAt(a,b)}},removeAll:function(b){var c=this,d=c.getData(),f=c.hasListeners.clear,a=d.getRange();if(d.length){c.removeIsSilent=true;c.callObservers("BeforeRemoveAll");d.removeAll();c.removeIsSilent=false;if(!b){c.fireEvent("clear",c,a);c.fireEvent("datachanged",c)}c.callObservers("AfterRemoveAll",[!!b])}return a},setRecords:function(a){var b=this.getCount();++this.loadCount;if(b){this.getData().splice(0,b,a)}else{this.add(a)}},splice:function(a,c,b){return this.getData().splice(a,c,b)},onProxyLoad:function(b){var d=this,c=b.getResultSet(),a=b.getRecords(),f=b.wasSuccessful();if(d.destroyed){return}if(c){d.totalCount=c.getTotal()}if(f){a=d.processAssociation(a);d.loadRecords(a,b.getAddRecords()?{addRecords:true}:undefined)}else{d.loading=false}if(d.hasListeners.load){d.fireEvent("load",d,a,f,b)}d.callObservers("AfterLoad",[a,f,b])},filterDataSource:function(f){var g=this.getDataSource(),b=g.items,a=b.length,c=[],d;for(d=0;d<a;d++){if(f.call(g,b[d])){c.push(b[d])}}return c},getNewRecords:function(){return this.filterDataSource(this.filterNew)},getRejectRecords:function(){return this.filterDataSource(this.filterRejects)},getUpdatedRecords:function(){return this.filterDataSource(this.filterUpdated)},loadData:function(g,a){var f=this,d=g.length,c=[],b;for(b=0;b<d;b++){c.push(f.createModel(g[b]))}c=f.processAssociation(c);f.loadRecords(c,a?f.addRecordsOptions:undefined)},loadRawData:function(f,b){var d=this,g=d.getSession(),a=d.getProxy().getReader().read(f,g?{recordCreator:g.recordCreator}:undefined),c=a.getRecords(),h=a.getSuccess();if(h){d.totalCount=a.getTotal();d.loadRecords(c,b?d.addRecordsOptions:undefined)}return h},loadRecords:function(a,c){var h=this,g=a.length,j=h.getData(),f,d,b;if(c){f=c.addRecords}if(!h.getRemoteSort()&&!h.getSortOnLoad()){b=true;j.setAutoSort(false)}if(!f){h.clearData(true)}h.loading=false;h.ignoreCollectionAdd=true;h.callObservers("BeforePopulate");j.add(a);h.ignoreCollectionAdd=false;if(b){j.setAutoSort(true)}for(d=0;d<g;d++){a[d].join(h)}++h.loadCount;h.complete=true;h.fireEvent("datachanged",h);h.fireEvent("refresh",h);h.callObservers("AfterPopulate")},loadPage:function(d,a){var c=this,b=c.getPageSize();c.currentPage=d;a=Ext.apply({page:d,start:(d-1)*b,limit:b,addRecords:!c.getClearOnPageLoad()},a);c.read(a)},nextPage:function(a){this.loadPage(this.currentPage+1,a)},previousPage:function(a){this.loadPage(this.currentPage-1,a)},clearData:function(c){var m=this,h=m.removed,d=m.getDataSource(),j=m.getClearRemovedOnLoad(),o=h&&c&&!j,a,f,b,g;if(d){a=d.items;for(b=0,g=a.length;b<g;++b){f=a[b];if(o&&Ext.Array.contains(h,f)){continue}f.unjoin(m)}m.ignoreCollectionRemove=true;m.callObservers("BeforeClear");d.removeAll();m.ignoreCollectionRemove=false;m.callObservers("AfterClear")}if(h&&(!c||j)){h.length=0}},onIdChanged:function(c,b,a){this.getData().updateKey(c,b);this.fireEvent("idchanged",this,c,b,a)},commitChanges:function(){var c=this,d=c.getModifiedRecords(),a=d.length,b=0;Ext.suspendLayouts();c.beginUpdate();for(;b<a;b++){d[b].commit()}c.cleanRemoved();c.endUpdate();Ext.resumeLayouts(true)},filterNewOnly:function(a){return a.phantom===true},filterRejects:function(a){return a.phantom||a.dirty},rejectChanges:function(){var j=this,m=j.getRejectRecords(),g=m.length,d,b,a,h,c,f;Ext.suspendLayouts();j.beginUpdate();for(d=0;d<g;d++){b=m[d];if(b.phantom){a=a||[];a.push(b)}else{b.reject()}}if(a){j.remove(a);for(d=0,g=a.length;d<g;++d){a[d].reject()}}m=j.getRawRemovedRecords();if(m){g=m.length;h=!j.getRemoteSort()&&j.isSorted();if(h){c=j.getData();f=c.getAutoSort();c.setAutoSort(false)}for(d=g-1;d>=0;d--){b=m[d];b.reject();if(!h){j.insert(b.removedFrom||0,b)}}if(h){c.setAutoSort(f);j.add(m)}m.length=0}j.endUpdate();Ext.resumeLayouts(true)},onDestroy:function(){var b=this,a=b.loadTask,d=b.getData(),c=d.getSource();b.clearData();Ext.data.ProxyStore.prototype.onDestroy.call(this);b.setSession(null);b.observers=null;if(a){a.cancel();b.loadTask=null}if(c){c.destroy()}},privates:{fetch:function(b){b=Ext.apply({},b);this.setLoadOptions(b);var a=this.createOperation("read",b);a.execute()},onBeforeLoad:function(a){this.callObservers("BeforeLoad",[a])},onRemoteFilterSet:function(a,b){if(a){this.getData().setFilters(b?null:a)}Ext.data.ProxyStore.prototype.onRemoteFilterSet.call(this,a,b)},onRemoteSortSet:function(b,c){var a=this.getData();if(b){a.setSorters(c?null:b)}a.setAutoGroup(!c);Ext.data.ProxyStore.prototype.onRemoteSortSet.call(this,b,c)},isMoving:function(c,f){var g=this.moveMap,b=0,a,d;if(g){if(c){if(Ext.isArray(c)){for(d=0,a=c.length;d<a;++d){b+=g[c[d].id]?1:0}}else{if(g[c.id]){++b}}}else{b=f?g:this.moveMapCount}}return b},setLoadOptions:function(c){var d=this,a=d.getPageSize(),f,b;if(d.getRemoteSort()&&!c.grouper){b=d.getGrouper();if(b){c.grouper=b}}if(a||"start" in c||"limit" in c||"page" in c){c.page=c.page!=null?c.page:d.currentPage;c.start=(c.start!==undefined)?c.start:(c.page-1)*a;c.limit=c.limit!=null?c.limit:a;d.currentPage=c.page}c.addRecords=c.addRecords||false;if(!c.recordCreator){f=d.getSession();if(f){c.recordCreator=f.recordCreator}}Ext.data.ProxyStore.prototype.setLoadOptions.call(this,c)},setMoving:function(b,g){var d=this,f=d.moveMap||(d.moveMap={}),a=b.length,c,h;for(c=0;c<a;++c){h=b[c].id;if(g){if(f[h]){++f[h]}else{f[h]=1;++d.moveMapCount}}else{if(--f[h]===0){delete f[h];--d.moveMapCount}}}if(d.moveMapCount===0){d.moveMap=null}},processAssociation:function(a){var c=this,b=c.getAssociatedEntity();if(b){a=c.getRole().processLoad(c,b,a,c.getSession())}return a}}},1,0,0,0,["store.store"],[[Ext.data.LocalStore.prototype.mixinId||Ext.data.LocalStore.$className,Ext.data.LocalStore]],[Ext.data,"Store"],0));(Ext.cmd.derive("Ext.data.reader.Array",Ext.data.reader.Json,{alternateClassName:"Ext.data.ArrayReader",config:{totalProperty:undefined,successProperty:undefined},createFieldAccessor:function(d){var b=d.mapping,c=d.hasMapping()?b:d.ordinal,a;d.mapping=c;a=Ext.data.reader.Json.prototype.createFieldAccessor.apply(this,arguments);d.mapping=b;return a},getModelData:function(a){return{}}},0,0,0,0,["reader.array"],0,[Ext.data.reader,"Array",Ext.data,"ArrayReader"],0));(Ext.cmd.derive("Ext.data.ArrayStore",Ext.data.Store,{alternateClassName:["Ext.data.SimpleStore"],config:{proxy:{type:"memory",reader:"array"}},loadData:function(f,a){if(this.expandData){var d=[],b=0,c=f.length;for(;b<c;b++){d[d.length]=[f[b]]}f=d}Ext.data.Store.prototype.loadData.call(this,f,a)}},0,0,0,0,["store.array"],0,[Ext.data,"ArrayStore",Ext.data,"SimpleStore"],0));(Ext.cmd.derive("Ext.data.StoreManager",Ext.util.MixedCollection,{alternateClassName:["Ext.StoreMgr","Ext.data.StoreMgr","Ext.StoreManager"],singleton:true,register:function(){for(var a=0,b;(b=arguments[a]);a++){this.add(b)}},unregister:function(){for(var a=0,b;(b=arguments[a]);a++){this.remove(this.lookup(b))}},lookup:function(c,h){if(Ext.isArray(c)){var b=["field1"],f=!Ext.isArray(c[0]),g=c,d,a;if(f){g=[];for(d=0,a=c.length;d<a;++d){g.push([c[d]])}}else{for(d=2,a=c[0].length;d<=a;++d){b.push("field"+d)}}return new Ext.data.ArrayStore({data:g,fields:b,autoDestroy:true,autoCreated:true,expanded:f})}if(Ext.isString(c)){return this.get(c)}else{return Ext.Factory.store(c,h)}},getKey:function(a){return a.storeId}},0,0,0,0,0,0,[Ext.data,"StoreManager",Ext,"StoreMgr",Ext.data,"StoreMgr",Ext,"StoreManager"],function(){Ext.regStore=function(d,c){var b;if(Ext.isObject(d)){c=d}else{if(Ext.data.StoreManager.containsKey(d)){return Ext.data.StoreManager.lookup(d)}c.storeId=d}if(c instanceof Ext.data.Store){b=c}else{b=new Ext.data.Store(c)}Ext.data.StoreManager.register(b);return b};Ext.getStore=function(b){return Ext.data.StoreManager.lookup(b)};var a=Ext.regStore("ext-empty-store",{proxy:"memory",useModelWarning:false});a.isEmptyStore=true}));(Ext.cmd.derive("Ext.app.domain.Store",Ext.app.EventDomain,{singleton:true,type:"store",prefix:"store.",idMatchRe:/^\#/,constructor:function(){var a=this;a.callParent();a.monitor(Ext.data.AbstractStore)},match:function(d,b){var a=false,c=d.alias;if(b==="*"){a=true}else{if(this.idMatchRe.test(b)){a=d.getStoreId()===b.substring(1)}else{if(c){a=Ext.Array.indexOf(c,this.prefix+b)>-1}}}return a}},1,0,0,0,0,0,[Ext.app.domain,"Store"],0));(Ext.cmd.derive("Ext.app.route.Queue",Ext.Base,{queue:null,token:null,constructor:function(a){Ext.apply(this,a);this.queue=new Ext.util.MixedCollection()},queueAction:function(a,b){this.queue.add({route:a,args:b})},clearQueue:function(){this.queue.removeAll()},runQueue:function(){var a=this.queue,c=a.removeAt(0),b;if(c){b=c&&c.route;b.execute(this.token,c.args,this.onActionExecute,this)}},onActionExecute:function(a){if(a){this.clearQueue()}else{this.runQueue()}}},1,0,0,0,0,0,[Ext.app.route,"Queue"],0));(Ext.cmd.derive("Ext.app.route.Route",Ext.Base,{action:null,conditions:null,controller:null,allowInactive:false,url:null,before:null,caseInsensitive:false,matcherRegex:null,paramMatchingRegex:null,paramsInMatchString:null,constructor:function(b){var c=this,a;Ext.apply(c,b,{conditions:{}});a=c.url;c.paramMatchingRegex=new RegExp(/:([0-9A-Za-z\_]*)/g);c.paramsInMatchString=a.match(c.paramMatchingRegex)||[];c.matcherRegex=c.createMatcherRegex(a)},recognize:function(c){var d=this,a=d.controller,f,b;if((d.allowInactive||a.isActive())&&d.recognizes(c)){f=d.matchesFor(c);b=c.match(d.matcherRegex);b.shift();return Ext.applyIf(f,{controller:a,action:d.action,historyUrl:c,args:b})}return false},recognizes:function(a){return this.matcherRegex.test(a)},execute:function(c,h,j,d){var b=h.args||[],g=this.before,a=this.controller,f=this.createCallback(h,j,d);if(g){b.push(f);if(Ext.isString(g)){g=this.before=a[g]}if(g){g.apply(a,b)}}else{f.resume()}},matchesFor:function(c){var g={},f=this.paramsInMatchString,b=c.match(this.matcherRegex),d=0,a=f.length;b.shift();for(;d<a;d++){g[f[d].replace(":","")]=b[d]}return g},createMatcherRegex:function(a){var c=this.paramsInMatchString,j=this.conditions,d=0,g=c.length,m=Ext.util.Format.format,o=this.caseInsensitive?"i":"",b,h,f;for(;d<g;d++){b=c[d];h=j[b];f=m("{0}",h||"([%a-zA-Z0-9\\-\\_\\s,]+)");a=a.replace(new RegExp(b),f)}return new RegExp("^"+a+"$",o)},createCallback:function(a,d,b){var c=this;b=b||c;return{resume:function(){var f=c.controller,h=c.action,g;if(Ext.isString(h)){h=f[h]}a=a&&a.args?a.args:[];g=a.pop();if(g&&!Ext.isObject(g)){a.push(g)}if(h){c.action=h;h.apply(f,a)}if(d){d.call(b)}},stop:function(f){if(d){d.call(b,f)}}}}},1,0,0,0,0,0,[Ext.app.route,"Route"],0));(Ext.cmd.derive("Ext.util.History",Ext.Base,{singleton:true,alternateClassName:"Ext.History",useTopWindow:false,constructor:function(){var a=this;a.hiddenField=null;a.ready=false;a.currentToken=null;a.mixins.observable.constructor.call(a)},getHash:function(){return this.win.location.hash.substr(1)},setHash:function(b){try{this.win.location.hash=b;this.currentToken=b}catch(a){}},handleStateChange:function(a){this.currentToken=a;this.fireEvent("change",a)},startUp:function(){var a=this;a.currentToken=a.getHash();if(Ext.supports.Hashchange){Ext.get(a.win).on("hashchange",a.onHashChange,a)}else{Ext.TaskManager.start({fireIdleEvent:false,run:a.onHashChange,interval:50,scope:a})}a.ready=true;a.fireEvent("ready",a)},onHashChange:function(){var b=this,a=b.getHash();if(a!==b.hash){b.hash=a;b.handleStateChange(a)}},init:function(c,a){var b=this;if(b.ready){Ext.callback(c,a,[b]);return}if(!Ext.isReady){Ext.onInternalReady(function(){b.init(c,a)});return}b.win=b.useTopWindow?window.top:window;b.hash=b.getHash();if(c){b.on("ready",c,a,{single:true})}b.startUp()},add:function(a,b){var c=this,d=false;if(b===false||c.getToken()!==a){c.setHash(a);d=true}return d},back:function(){var a=this.useTopWindow?window.top:window;a.history.go(-1)},forward:function(){var a=this.useTopWindow?window.top:window;a.history.go(1)},getToken:function(){return this.ready?this.currentToken:this.getHash()}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.util,"History",Ext,"History"],0));(Ext.cmd.derive("Ext.app.route.Router",Ext.Base,{singleton:true,multipleToken:"|",queueRoutes:true,constructor:function(){var a=Ext.util.History;if(!a.ready){a.init()}a.on("change",this.onStateChange,this);this.clear()},onStateChange:function(d){var o=this,c=o.application,q=o.routes,h=q.length,s=o.queueRoutes,m=d.split(o.multipleToken),r=0,b=m.length,f,g,p,j,a;for(;r<b;r++){d=m[r];a=false;if(s){g=new Ext.app.route.Queue({token:d})}for(f=0;f<h;f++){p=q[f];j=p.recognize(d);if(j){a=true;if(s){g.queueAction(p,j)}else{p.execute(d,j)}}}if(s){g.runQueue()}if(!a&&c){c.fireEvent("unmatchedroute",d)}}},connect:function(c,d,a){var b={url:c,action:d,controller:a};if(Ext.isObject(d)){Ext.merge(b,d)}this.routes.push(new Ext.app.route.Route(b))},disconnectAll:function(c){var b=this.routes,a=b.length,f=[],g,d;for(g=0;g<a;++g){d=b[g];if(d.controller!==c){f.push(d)}}this.routes=f},recognize:function(f){var b=this.routes||[],g=0,a=b.length,c,d;for(;g<a;g++){c=b[g];d=c.recognize(f);if(d){return{route:c,args:d}}}return false},draw:function(a){a.call(this,this)},clear:function(){this.routes=[]}},1,0,0,0,0,0,[Ext.app.route,"Router"],0));(Ext.cmd.derive("Ext.app.Controller",Ext.app.BaseController,{statics:{strings:{model:{getter:"getModel",upper:"Model"},view:{getter:"getView",upper:"View"},controller:{getter:"getController",upper:"Controller"},store:{getter:"getStore",upper:"Store"},profile:{getter:"getProfile",upper:"Profiles"}},controllerRegex:/^(.*)\.controller\./,profileRegex:/^(.*)\.profile\./,createGetter:function(a,b){return function(){return this[a](b)}},getGetterName:function(c,a){var d="get",f=c.split("."),g=f.length,b;for(b=0;b<g;b++){d+=Ext.String.capitalize(f[b])}d+=a;return d},resolveNamespace:function(a,g){var h=Ext.app.Controller,f=a.prototype.isProfile?h.profileRegex:h.controllerRegex,d,c,b;d=Ext.getClassName(a);c=g.$namespace||g.namespace||Ext.app.getNamespace(d)||((b=f.exec(d))&&b[1]);return c},processDependencies:function(v,w,d,f,p,b){if(!p||!p.length){return}var q=this,u=q.strings[f],c,t,s,a,g,h,r,m;if(!Ext.isArray(p)){p=[p]}for(g=0,h=p.length;g<h;g++){a=p[g];c=q.getFullName(a,f,d,b);p[g]=t=c.absoluteName;s=c.shortName;w.push(t);r=q.getGetterName(s,u.upper);if(!v[r]){v[r]=m=q.createGetter(u.getter,a)}if(m&&f!=="controller"){m["Ext.app.getter"]=true}}},getFullName:function(c,g,f,d){var a=c,b,h;if((b=c.indexOf("@"))>0){a=c.substring(0,b);h=c.substring(b+1)+"."+a}else{if(c.indexOf(".")>0&&(Ext.ClassManager.isCreated(c)||this.hasRegisteredPrefix(c))){h=c}else{if(f){h=f+"."+g+"."+(d?d+"."+c:c);a=c}else{h=c}}}return{absoluteName:h,shortName:a}},hasRegisteredPrefix:function(a){var c=Ext.ClassManager,b=c.getPrefix(a);return b&&b!==a}},models:null,views:null,stores:null,controllers:null,config:{application:null,refs:null,active:true,moduleClassName:null},onClassExtended:function(b,c,a){var d=a.onBeforeCreated;a.onBeforeCreated=function(f,m){var o=Ext.app.Controller,h=[],g,j;j=f.prototype;g=o.resolveNamespace(f,m);if(g){j.$namespace=g}o.processDependencies(j,h,g,"model",m.models);o.processDependencies(j,h,g,"view",m.views);o.processDependencies(j,h,g,"store",m.stores);o.processDependencies(j,h,g,"controller",m.controllers);Ext.require(h,Ext.Function.pass(d,arguments,this))}},constructor:function(a){this.initAutoGetters();Ext.app.BaseController.prototype.constructor.apply(this,arguments)},normalizeRefs:function(b){var c=this,a=[];if(b){if(Ext.isObject(b)){Ext.Object.each(b,function(d,f){if(Ext.isString(f)){f={selector:f}}f.ref=d;a.push(f)})}else{if(Ext.isArray(b)){a=Ext.Array.merge(a,b)}}}b=c.refs;if(b){c.refs=null;b=c.normalizeRefs(b);if(b){a=Ext.Array.merge(a,b)}}return a},getRefMap:function(){var g=this,c=g._refMap,a,f,d,b;if(!c){a=g.getRefs();c=g._refMap={};if(a){for(b=0,d=a.length;b<d;b++){f=a[b];c[f.ref]=f.selector}}}return c},applyRefs:function(a){return this.normalizeRefs(Ext.clone(a))},updateRefs:function(a){if(a){this.ref(a)}},initAutoGetters:function(){var b=this.self.prototype,c,a;for(c in b){a=b[c];if(a&&a["Ext.app.getter"]){a.call(this)}}},doInit:function(b){var a=this;if(!a._initialized){a.init(b);a._initialized=true}},finishInit:function(g){var d=this,f=d.controllers,b,c,a;if(d._initialized&&f&&f.length){for(c=0,a=f.length;c<a;c++){b=d.getController(f[c]);b.finishInit(g)}}},init:Ext.emptyFn,onLaunch:Ext.emptyFn,activate:function(){this.setActive(true)},deactivate:function(){this.setActive(false)},isActive:function(){return this.getActive()},ref:function(a){var g=this,b=0,f=a.length,h,d,c;a=Ext.Array.from(a);g.references=g.references||[];for(;b<f;b++){h=a[b];d=h.ref;c="get"+Ext.String.capitalize(d);if(!g[c]){g[c]=Ext.Function.pass(g.getRef,[d,h],g)}g.references.push(d.toLowerCase())}},addRef:function(a){this.ref(a)},getRef:function(d,g,a){var c=this,f=c.refCache||(c.refCache={}),b=f[d];g=g||{};a=a||{};Ext.apply(g,a);if(g.forceCreate){return Ext.ComponentManager.create(g,"component")}if(!b){if(g.selector){f[d]=b=Ext.ComponentQuery.query(g.selector)[0]}if(!b&&g.autoCreate){f[d]=b=Ext.ComponentManager.create(g,"component")}if(b){b.on("beforedestroy",function(){f[d]=null})}}return b},hasRef:function(b){var a=this.references;return a&&Ext.Array.indexOf(a,b.toLowerCase())!==-1},getController:function(b){var a=this.getApplication();if(b===this.getId()){return this}return a&&a.getController(b)},getStore:function(c){var a,b;a=(c.indexOf("@")===-1)?c:c.split("@")[0];b=Ext.StoreManager.get(a);if(!b){c=Ext.app.Controller.getFullName(c,"store",this.$namespace);if(c){b=Ext.create(c.absoluteName,{id:a})}}return b},getModel:function(c){var b=Ext.app.Controller.getFullName(c,"model",this.$namespace),a=Ext.ClassManager.get(b.absoluteName);if(!a){a=Ext.data.schema.Schema.lookupEntity(c)}return a},getProfile:function(a){a=Ext.app.Controller.getFullName(a,"profile",this.$namespace);return a},getView:function(a){var b=Ext.app.Controller.getFullName(a,"view",this.$namespace);return b&&Ext.ClassManager.get(b.absoluteName)},ensureId:function(){var a=this.getId();if(!a){this.setId(this.getModuleClassName(this.$className,"controller"))}},destroy:function(a,b){var d=this,g=d.application,f,c;if(!b&&g){g.unregister(d)}d.application=null;if(a){f=d.refCache;for(c in f){if(f.hasOwnProperty(c)){Ext.destroy(f[c])}}}Ext.app.BaseController.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.app,"Controller"],0));(Ext.cmd.derive("Ext.app.domain.View",Ext.app.EventDomain,{isInstance:true,constructor:function(a){Ext.app.EventDomain.prototype.constructor.apply(this,arguments);this.controller=a;this.monitoredClasses=[Ext.Component]},match:function(d,a,b){var c=false;if(a==="#"){c=b===d.getController()}else{c=d.is(a)}return c},destroy:function(){this.controller=null;Ext.app.EventDomain.prototype.destroy.call(this)}},1,0,0,0,0,0,[Ext.app.domain,"View"],0));(Ext.cmd.derive("Ext.app.ViewController",Ext.app.BaseController,{isViewController:true,factoryConfig:{type:"controller"},config:{closeViewAction:"destroy"},view:null,constructor:function(){this.compDomain=new Ext.app.domain.View(this);Ext.app.BaseController.prototype.constructor.apply(this,arguments)},beforeInit:Ext.emptyFn,init:Ext.emptyFn,initViewModel:Ext.emptyFn,destroy:function(){var a=this,b=a.compDomain;if(b){b.unlisten(a);b.destroy()}a.compDomain=a.view=null;Ext.app.BaseController.prototype.destroy.call(this)},closeView:function(){var a=this.getView(),b;if(a){b=this.getCloseViewAction();a[b]()}},control:function(a,b){var c=a;if(Ext.isString(a)){c={};c[a]=b}this.compDomain.listen(c,this)},listen:function(c,a){var b=c.component;if(b){c=Ext.apply({},c);delete c.component;this.control(b)}this.callParent([c,a])},getReferences:function(){var a=this.view;return a&&a.getReferences()},getView:function(){return this.view},lookup:function(b){var a=this.view;return a&&a.lookup(b)},lookupReference:function(a){return this.lookup(a)},getSession:function(){var a=this.view;return a&&a.lookupSession()},getViewModel:function(){var a=this.view;return a&&a.lookupViewModel()},getStore:function(b){var a=this.getViewModel();return a?a.getStore(b):null},fireViewEvent:function(d,b){var c=this.view,a=false,f=arguments;if(c){if(c!==b){f=Ext.Array.slice(f);f.splice(1,0,c)}a=c.fireEvent.apply(c,f)}return a},privates:{view:null,ensureId:function(){var a=this.getId();if(!a){this.setId(Ext.id(null,"controller-"))}},attachReference:function(b){var a=this.view;if(a){a.attachReference(b)}},clearReference:function(b){var a=this.view;if(a){a.clearReference(b)}},clearReferences:function(){var a=this.view;if(a){a.clearReferences()}},setView:function(a){this.view=a;if(!this.beforeInit.$nullFn){this.beforeInit(a)}}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.app,"ViewController"],0));(Ext.cmd.derive("Ext.util.Bag",Ext.Base,{isBag:true,constructor:function(){this.items=[];this.map={}},generation:0,length:0,add:function(f){var d=this,h=d.getKey(f),g=d.map,c=d.items,a=g[h],b;if(a===undefined){c.push(f);g[h]=d.length++;b=f}else{b=c[a];c[a]=f}++d.generation;return b},clear:function(){var c=this,b=c.generation||c.length,a=b?c.items:[];if(b){c.items=[];c.length=0;c.map={};++c.generation}return a},clone:function(){var c=this,b=new c.self(),a=c.length;if(a){Ext.apply(b.map,c.map);b.items=c.items.slice();b.length=c.length}return b},contains:function(c){var a=false,d=this.map,b;if(c!=null){b=this.getKey(c);if(b in d){a=this.items[d[b]]===c}}return a},containsKey:function(a){return a in this.map},destroy:function(){this.items=this.map=null;this.callParent()},getAt:function(b){var a=null;if(b<this.length){a=this.items[b]}return a},getByKey:function(b){var c=this.map,a=null;if(b in c){a=this.items[c[b]]}return a},getCount:function(){return this.length},getKey:function(a){return a.id||a.getId()},remove:function(g){var f=this,h=f.map,c=f.items,b=null,a,j,d;if(f.length){a=h[j=f.getKey(g)];if(a!==undefined){delete h[j];b=c[a];d=c.pop();if(a<--f.length){c[a]=d;h[f.getKey(d)]=a}++f.generation}}return b},removeByKey:function(a){var b=this.getByKey(a);if(b){this.remove(b)}return b||null},sort:function(b){var d=this,a=d.items,f=a.length,c;if(f){Ext.Array.sort(a,b);d.map={};while(f-->0){c=a[f];d.map[d.getKey(c)]=f}++d.generation}}},1,0,0,0,0,0,[Ext.util,"Bag"],0));(Ext.cmd.derive("Ext.util.Scheduler",Ext.Base,{busyCounter:0,lastBusyCounter:0,destroyed:false,firing:null,notifyIndex:-1,nextId:0,orderedItems:null,passes:0,scheduledCount:0,validIdRe:null,config:{cycleLimit:5,preSort:null,tickDelay:5},suspendOnNotify:true,constructor:function(a){this.mixins.observable.constructor.call(this,a);this.items=new Ext.util.Bag()},destroy:function(){var a=this,b=a.timer;if(b){window.clearTimeout(b);a.timer=null}a.items.destroy();a.items=a.orderedItems=null;a.callParent()},add:function(c){var b=this,a=b.items;if(a===b.firing){b.items=a=a.clone()}c.id=c.id||++b.nextId;c.scheduler=b;a.add(c);if(!b.sortMap){b.orderedItems=null}},remove:function(c){var b=this,a=b.items;if(b.destroyed){return}if(a===b.firing){b.items=a=a.clone()}if(c.scheduled){b.unscheduleItem(c);c.scheduled=false}a.remove(c);b.orderedItems=null},sort:function(){var d=this,a=d.items,f={},g=d.getPreSort(),b,c;d.orderedItems=[];d.sortMap=f;if(g){a.sort(g)}a=a.items;for(b=0;b<a.length;++b){c=a[b];if(!f[c.id]){d.sortItem(c)}}d.sortMap=null},sortItem:function(c){var b=this,d=b.sortMap,a=b.orderedItems,f;if(!c.scheduler){b.add(c)}f=c.id;if(!(f in d)){d[f]=0;if(!c.sort.$nullFn){c.sort()}d[f]=1;c.order=b.orderedItems.length;a.push(c)}return b},sortItems:function(a){var b=this,c=b.sortItem;if(a){if(a instanceof Array){Ext.each(a,c,b)}else{Ext.Object.eachValue(a,c,b)}}return b},applyPreSort:function(h){if(typeof h==="function"){return h}var g=h.split(","),f=[],d=g.length,j,a,b;for(a=0;a<d;++a){f[a]=1;b=g[a];if((j=b.charAt(0))==="-"){f[a]=-1}else{if(j!=="+"){j=0}}if(j){g[a]=b.substring(1)}}return function(c,s){var m=0,o,r,q,p;for(o=0;!m&&o<d;++o){r=g[o];q=c[r];p=s[r];m=f[o]*((q<p)?-1:((p<q)?1:0))}return m}},notify:function(){var m=this,b=m.timer,d=m.getCycleLimit(),c=Ext.GlobalEvents,h=m.suspendOnNotify,p,f,o,j,g,a;if(b){window.clearTimeout(b);m.timer=null}if(h){Ext.suspendLayouts()}while(m.scheduledCount){if(d){--d}else{m.firing=null;break}if(!a){a=true;if(c.hasListeners.beforebindnotify){c.fireEvent("beforebindnotify",m)}}++m.passes;if(!(g=m.orderedItems)){m.sort();g=m.orderedItems}j=g.length;if(j){m.firing=m.items;for(f=0;f<j;++f){o=g[f];if(o.scheduled){o.scheduled=false;--m.scheduledCount;m.notifyIndex=f;o.react();if(!m.scheduledCount){break}}}}}m.firing=null;m.notifyIndex=-1;if(h){Ext.resumeLayouts(true)}if((p=m.busyCounter)!==m.lastBusyCounter){if(!(m.lastBusyCounter=p)){m.fireEvent("idle",m)}}},onTick:function(){this.timer=null;this.notify()},scheduleItem:function(b){var a=this;++a.scheduledCount;if(!a.timer&&!a.firing){a.scheduleTick()}},scheduleTick:function(){var a=this;if(!a.destroyed&&!a.timer){a.timer=Ext.Function.defer(a.onTick,a.getTickDelay(),a)}},unscheduleItem:function(a){if(this.scheduledCount){--this.scheduledCount}},adjustBusy:function(a){var b=this,c=b.busyCounter+a;b.busyCounter=c;if(c){if(!b.lastBusyCounter){b.lastBusyCounter=c;b.fireEvent("busy",b)}}else{if(b.lastBusyCounter&&!b.timer){b.scheduleTick()}}},isBusy:function(){return !this.isIdle()},isIdle:function(){return !(this.busyCounter+this.lastBusyCounter)}},1,0,0,0,0,[[Ext.mixin.Observable.prototype.mixinId||Ext.mixin.Observable.$className,Ext.mixin.Observable]],[Ext.util,"Scheduler"],0));(Ext.cmd.derive("Ext.data.Batch",Ext.Base,{config:{pauseOnException:false},current:-1,total:0,running:false,complete:false,exception:false,constructor:function(a){var b=this;b.mixins.observable.constructor.call(b,a);b.operations=[];b.exceptions=[]},add:function(b){var d=this,c,a;if(Ext.isArray(b)){for(c=0,a=b.length;c<a;++c){d.add(b[c])}}else{d.total++;b.setBatch(d);d.operations.push(b)}return d},sort:function(){this.operations.sort(this.sortFn)},sortFn:function(c,a){var b=c.order-a.order;if(b){return b}var g=c.entityType,d=a.entityType,f;if(!g||!d){return 0}if(!(f=g.rank)){g.schema.rankEntities();f=g.rank}return(f-d.rank)*c.foreignKeyDirection},start:function(a){var b=this;if(!b.operations.length||b.running){return b}b.exceptions.length=0;b.exception=false;b.running=true;return b.runOperation(Ext.isDefined(a)?a:b.current+1)},retry:function(){return this.start(this.current)},runNextOperation:function(){var a=this;if(a.running){a.runOperation(a.current+1)}return a},pause:function(){this.running=false;return this},getOperations:function(){return this.operations},getExceptions:function(){return this.exceptions},getCurrent:function(){var a=null,b=this.current;if(!(b===-1||this.complete)){a=this.operations[b]}return a},getTotal:function(){return this.total},isRunning:function(){return this.running},isComplete:function(){return this.complete},hasException:function(){return this.exception},runOperation:function(c){var d=this,b=d.operations,a=b[c];if(a===undefined){d.running=false;d.complete=true;d.fireEvent("complete",d,b[b.length-1])}else{d.current=c;a.setInternalCallback(d.onOperationComplete);a.setInternalScope(d);a.execute()}return d},onOperationComplete:function(a){var c=this,b=a.hasException();if(b){c.exception=true;c.exceptions.push(a);c.fireEvent("exception",c,a)}if(b&&c.getPauseOnException()){c.pause()}else{c.fireEvent("operationcomplete",c,a);c.runNextOperation()}}},1,0,0,0,0,[["observable",Ext.mixin.Observable]],[Ext.data,"Batch"],0));(Ext.cmd.derive("Ext.data.matrix.Slice",Ext.Base,{constructor:function(a,b){this.id=b;this.side=a;this.members={}},attach:function(a){var b=this;b.store=a;a.matrix=b;a.on("load",b.onStoreLoad,b,{single:true})},commit:function(){var a=this.members,b;for(b in a){a[b][2]=0}},onStoreLoad:function(a){this.update(a.getData().items,0)},update:function(q,g){var w=this,j=Ext.data.matrix.Slice,c=w.side,m=c.index,f=q.length,p=w.id,v=w.members,b=c.inverse,u=b.slices,h,s,r,t,a,o,d;for(r=0;r<f;++r){s=d=null;t=q[r];a=t.isEntity?(d=t).id:t;h=v[a];if(g<0&&h&&h[2]===1){delete v[a];o=u[a];if(o){delete o.members[p]}s=1}else{if(!h){h=[a,a,g];h[m]=p;v[a]=h;o=u[a];if(!o){u[a]=o=new j(b,a)}o.members[p]=h;s=1}else{if(g!==h[2]&&g!==0){h[2]=g;o=u[a];s=1}}}if(s){if(w.notify){w.notify.call(w.scope,w,a,g)}if(o&&o.notify){o.notify.call(o.scope,o,p,g)}}}},updateId:function(b){var m=this,a=m.id,j=m.side,q=j.slices,p=q[a],c=p.members,g=j.index,d=j.inverse.slices,h,f,o;m.id=b;q[b]=p;delete q[a];for(f in c){h=c[f];h[g]=b;o=d[f].members;o[b]=o[a];delete o[a]}},destroy:function(){var b=this,a=b.store;if(a){a.matrix=null;a.un("load",b.onStoreLoad,b)}b.notify=b.scope=b.store=b.side=b.members=null;b.callParent()}},1,0,0,0,0,0,[Ext.data.matrix,"Slice"],0));(Ext.cmd.derive("Ext.data.matrix.Side",Ext.Base,{constructor:function(a,b,d){var c=this;c.matrix=a;c.index=b;c.role=d;c.slices={}},commit:function(){var a=this.slices,b;for(b in a){a[b].commit()}},get:function(b,a){var c=this,f=c.slices,d=f[b]||(f[b]=new Ext.data.matrix.Slice(c,b));return(a||a===0)?d.members[a]:d},update:function(b,a,c){var d=this.get(b);return d.update(a,c)},updateId:function(c,a){var b=this.get(c);if(b){b.updateId(a)}},destroy:function(){var a=this,b=a.slices,c;for(c in b){b[c].destroy()}a.inverse=a.matrix=a.role=a.slices=null;a.callParent()}},1,0,0,0,0,0,[Ext.data.matrix,"Side"],0));(Ext.cmd.derive("Ext.data.matrix.Matrix",Ext.Base,{constructor:function(h,c){var f=this,b=c.isManyToMany?c:h.getSchema().getAssociation(c),a=Ext.data.matrix.Side,g=new a(f,0,b.left),d=new a(f,1,b.right);f.association=b;f.session=h;f.left=g;f.right=d;g.inverse=d;d.inverse=g},commit:function(){this.left.commit();this.right.commit()},update:function(b,a,c){return this.left.update(b,a,c)},updateId:function(a,h,c){var b=a.self,g=this.left,d=this.right,f;if(b===g.role.cls){f=g}if(b===d.role.cls){f=d}if(f){f.updateId(h,c)}},destroy:function(){var a=this;a.left.destroy();a.right.destroy();a.association=a.session=a.left=a.right=null;a.callParent()}},1,0,0,0,0,0,[Ext.data.matrix,"Matrix"],0));(Ext.cmd.derive("Ext.data.session.ChangesVisitor",Ext.Base,{constructor:function(c){var a=this,b;a.session=c;b=c.getCrudProperties();a.result=null;a.writerOptions={};a.createKey=b.create;a.readKey=b.read;a.updateKey=b.update;a.dropKey=b.drop},onDirtyRecord:function(g){var m=this,q=m.crud,f=g.phantom,c=g.dropped,h=!f&&!c,o=g.$className,b=(f||c)?"allDataOptions":"partialDataOptions",j=m.writerOptions,a=g.entityName,s,d,p,r;if(f&&c){return false}q=f?m.createKey:(c?m.dropKey:m.updateKey);j=j[o]||(j[o]={});if(c){if(!(s=j.drop)){j.drop=s={all:g.getProxy().getWriter().getWriteAllFields()}}if(!s.all){p=g.id}}if(!p){if(!(s=j[b])){s=g.getProxy().getWriter().getConfig(b);j[b]=s=Ext.Object.chain(s);m.setupOptions(s)}p=g.getData(s)}r=m.result||(m.result={});d=r[a]||(r[a]={});d=d[q]||(d[q]=[]);d.push(p)},setupOptions:function(a){a.serialize=true},onMatrixChange:function(d,m,j,a){var h=this,b=d.left.type,g=d.right.role,f=a<0?h.dropKey:h.createKey,c,o;o=h.result||(h.result={});c=o[b]||(o[b]={});c=c[g]||(c[g]={});c=c[f]||(c[f]={});c=c[m]||(c[m]=[]);c.push(j)}},1,0,0,0,0,0,[Ext.data.session,"ChangesVisitor"],0));(Ext.cmd.derive("Ext.data.session.ChildChangesVisitor",Ext.data.session.ChangesVisitor,{constructor:function(){this.seen={};Ext.data.session.ChangesVisitor.prototype.constructor.apply(this,arguments)},setupOptions:function(a){Ext.data.session.ChangesVisitor.prototype.setupOptions.call(this,a);a.serialize=false},onDirtyRecord:function(a){if(Ext.data.session.ChangesVisitor.prototype.onDirtyRecord.apply(this,arguments)!==false){if(!a.$source&&(a.dropped||!a.phantom)){this.readEntity(a)}}},readEntity:function(g){var h=this,f=h.readKey,b=g.entityName,c=g.id,a=h.seen,j=b+c,m,d;if(a[j]){return}a[j]=true;m=h.result||(h.result={});d=m[b]||(m[b]={});d=d[f]||(d[f]=[]);d.push(Ext.apply({},g.modified,g.data))}},1,0,0,0,0,0,[Ext.data.session,"ChildChangesVisitor"],0));(Ext.cmd.derive("Ext.data.session.BatchVisitor",Ext.Base,{map:null,constructor:function(a){this.batch=a},getBatch:function(g){var h=this.map,d=this.batch,j,b,c,a,f;if(h){if(!d){d=new Ext.data.Batch()}for(c in h){j=h[c];b=j.entity;f=b.getProxy();delete j.entity;for(a in j){a=f.createOperation(a,{records:j[a]});a.entityType=b;d.add(a)}}}if(d&&g!==false){d.sort()}return d},onDirtyRecord:function(a){var d=this,b=a.phantom?"create":(a.dropped?"destroy":"update"),c=a.$className,f=(d.map||(d.map={})),g=(f[c]||(f[c]={entity:a.self}));g=g[b]||(g[b]=[]);g.push(a)}},1,0,0,0,0,0,[Ext.data.session,"BatchVisitor"],0));(Ext.cmd.derive("Ext.data.Session",Ext.Base,{isSession:true,config:{schema:"default",parent:null,autoDestroy:true,crudProperties:{create:"C",read:"R",update:"U",drop:"D"}},destroyed:false,crudOperations:[{type:"R",entityMethod:"readEntities"},{type:"C",entityMethod:"createEntities"},{type:"U",entityMethod:"updateEntities"},{type:"D",entityMethod:"dropEntities"}],crudKeys:{C:1,R:1,U:1,D:1},constructor:function(a){var b=this;b.data={};b.matrices={};b.identifierCache={};b.recordCreator=b.recordCreator.bind(b);b.initConfig(a)},destroy:function(){var d=this,b=d.matrices,f=d.data,c,g,a,h;for(h in b){b[h].destroy()}for(c in f){g=f[c];for(h in g){a=g[h].record;if(a){a.$source=a.session=null}}}d.recordCreator=d.matrices=d.data=null;d.setSchema(null);d.callParent()},adopt:function(b){var d=this,c=b.associations,a;if(b.session!==d){b.session=d;d.add(b);if(c){for(a in c){c[a].adoptAssociated(b,d)}}}},commit:function(){var d=this.data,b=this.matrices,c,f,g,a;for(c in d){f=d[c];for(g in f){a=f[g].record;if(a){a.commit()}}}for(g in b){b[g].commit()}},createRecord:function(b,c){var d=b.$isClass?b:this.getSchema().getEntity(b),a=this.getParent(),f;if(c&&a){f=d.getIdFromData(c);if(a.peekRecord(d,f)){Ext.raise("A parent session already contains an entry for "+d.entityName+": "+f)}}return new d(c,this)},getChanges:function(){var a=new Ext.data.session.ChangesVisitor(this);this.visitData(a);return a.result},getChangesForParent:function(){var a=new Ext.data.session.ChildChangesVisitor(this);this.visitData(a);return a.result},getRecord:function(j,a,c){var h=this,b=j.isModel,g,d,m,f;if(b){b=j;a=j.id;j=j.self}g=h.peekRecord(j,a);if(!g){d=j.$isClass?j:h.getSchema().getEntity(j);m=h.getParent();if(m){f=m.peekRecord(d,a)}if(f){if(f.isLoading()){b=false}else{g=f.copy(undefined,h);g.$source=f}}if(!g){if(b){g=b;h.adopt(g)}else{g=d.createWithId(a,null,h);if(c!==false){g.load(Ext.isObject(c)?c:undefined)}}}}return g},getSaveBatch:function(a){var b=new Ext.data.session.BatchVisitor();this.visitData(b);return b.getBatch(a)},onInvalidAssociationEntity:function(a,b){Ext.raise("Unable to read association entity: "+this.getModelIdentifier(a,b))},onInvalidEntityCreate:function(a,b){Ext.raise("Cannot create, record already not exists: "+this.getModelIdentifier(a,b))},onInvalidEntityDrop:function(a,b){Ext.raise("Cannot drop, record does not exist: "+this.getModelIdentifier(a,b))},onInvalidEntityRead:function(a,b){Ext.raise("Cannot read, record already not exists: "+this.getModelIdentifier(a,b))},onInvalidEntityUpdate:function(a,c,b){if(b){Ext.raise("Cannot update, record dropped: "+this.getModelIdentifier(a,c))}else{Ext.raise("Cannot update, record does not exist: "+this.getModelIdentifier(a,c))}},peekRecord:function(f,j,a){var h=f.$isClass?f:this.getSchema().getEntity(f),c=h.entityName,g=this.data[c],b,d;g=g&&g[j];b=g&&g.record;if(!b&&a){d=this.getParent();b=d&&d.peekRecord(f,j,a)}return b||null},save:function(){var a=new Ext.data.session.ChildChangesVisitor(this);this.visitData(a);this.getParent().update(a.result)},spawn:function(){return new this.self({schema:this.getSchema(),parent:this})},update:function(m){var p=this,f=p.getSchema(),a=p.crudOperations,o=a.length,q=p.crudKeys,r,g,t,j,d,u,c,s,h,b;p.getSchema().processKeyChecks(true);for(r in m){g=f.getEntity(r);t=m[r];for(j=0;j<o;++j){d=a[j];u=t[d.type];if(u){p[d.entityMethod](g,u)}}}for(r in m){g=f.getEntity(r);c=g.associations;t=m[r];for(s in t){if(q[s]){continue}h=c[s];b=t[h.role];h.processUpdate(p,b)}}},privates:{add:function(b){var f=this,g=b.id,d=f.getEntry(b.self,g),c,a;d.record=b;f.registerReferences(b);c=b.associations;for(a in c){c[a].checkMembership(f,b)}},afterErase:function(a){this.evict(a)},applySchema:function(a){return Ext.data.schema.Schema.get(a)},createEntities:function(d,b){var a=b.length,c,f,g,h;for(c=0;c<a;++c){f=b[c];h=d.getIdFromData(f);g=this.peekRecord(d,h);if(!g){g=this.createRecord(d,f)}else{this.onInvalidEntityCreate(d,h)}g.phantom=true}},dropEntities:function(f,d){var b=d.length,c,g,h,a;if(b){a=Ext.isObject(d[0])}for(c=0;c<b;++c){h=d[c];if(a){h=f.getIdFromData(h)}g=this.peekRecord(f,h);if(g){g.drop()}else{this.onInvalidEntityDrop(f,h)}}},evict:function(a){var b=a.entityName,d=this.data[b],f=a.id,c;if(d){delete d[f]}},getEntityList:function(d,c){var a=c.length,b,h,g,f;for(b=0;b<a;++b){h=c[b];g=this.peekRecord(d,h);if(g){c[b]=g}else{f=true;c[b]=null;this.onInvalidAssociationEntity(d,h)}}if(f){c=Ext.Array.clean(c)}return c},getEntry:function(b,g){if(b.isModel){g=b.getId();b=b.self}var d=b.$isClass?b:this.getSchema().getEntity(b),a=d.entityName,f=this.data,c;c=f[a]||(f[a]={});c=c[g]||(c[g]={});return c},getRefs:function(d,c,j){var g=this.getEntry(d),f=g&&g.refs&&g.refs[c.role],h=j&&this.getParent(),m,a,b;if(h){m=h.getRefs(d,c);if(m){for(a in m){b=m[a];if((!f||!f[a])){this.getRecord(b.self,b.id)}}f=g&&g.refs&&g.refs[c.role]}}return f||null},getIdentifier:function(g){var f=this.getParent(),a,c,d,b;if(f){b=f.getIdentifier(g)}else{a=this.identifierCache;c=g.identifier;d=c.id||g.entityName;b=a[d];if(!b){if(c.clone){b=c.clone({cache:a})}else{b=c}a[d]=b}}return b},getMatrix:function(a,f){var d=a.isManyToMany?a.name:a,c=this.matrices,b;b=c[d];if(!b&&!f){b=c[d]=new Ext.data.matrix.Matrix(this,a)}return b||null},getMatrixSlice:function(d,c){var a=this.getMatrix(d.association),b=a[d.side];return b.get(c)},getModelIdentifier:function(a,b){return b+"@"+a.entityName},onIdChanged:function(g,q,j){var v=this,b=v.matrices,m=g.entityName,r=g.id,z=v.data[m],c=z[q],u=g.associations,d=c.refs,a=v._setNoRefs,h,f,t,o,y,p,s,w;delete z[q];z[j]=c;for(w in b){b[w].updateId(g,q,j)}if(d){for(p in d){s=d[p];y=u[p];h=y.association;if(!h.isManyToMany){f=h.field.name;for(o in s){s[o].set(f,r,a)}}}}v.registerReferences(g,q)},processManyBlock:function(d,f,h,b){var j=this,a,g,c,m;if(h){for(a in h){g=j.peekRecord(d,a);if(g){c=j.getEntityList(f.cls,h[a]);m=f.getAssociatedItem(g);j[b](f,m,g,c)}else{j.onInvalidAssociationEntity(d,a)}}}},processManyCreate:function(d,c,a,b){if(c){c.add(b)}else{a[d.getterName](null,null,b)}},processManyDrop:function(d,c,a,b){if(c){c.remove(b)}},processManyRead:function(d,c,a,b){if(c){c.setRecords(b)}else{a[d.getterName](null,null,b)}},readEntities:function(d,b){var a=b.length,c,f,g,h;for(c=0;c<a;++c){f=b[c];h=d.getIdFromData(f);g=this.peekRecord(d,h);if(!g){g=this.createRecord(d,f)}else{this.onInvalidEntityRead(d,h)}g.phantom=false}},recordCreator:function(c,d){var b=this,f=d.getIdFromData(c),a=b.peekRecord(d,f,true);if(!a){a=new d(c,b)}else{a=b.getRecord(d,f)}return a},registerReferences:function(j,c){var p=j.entityName,b=j.id,a=j.data,h=c||c===0,q,g,s,m,d,r,o,f;m=(r=j.references).length;for(g=0;g<m;++g){d=r[g];s=a[d.name];if(s||s===0){d=d.reference;p=d.type;f=d.inverse.role;q=this.getEntry(d.cls,s);o=q.refs||(q.refs={});o=o[f]||(o[f]={});o[b]=j;if(h){delete o[c]}}}},updateEntities:function(f,b){var a=b.length,d,g,h,j,c;if(Ext.isArray(b)){for(d=0;d<a;++d){g=b[d];j=f.getIdFromData(g);h=this.peekRecord(f,j);if(h){h.set(g)}else{this.onInvalidEntityUpdate(f,j)}}}else{for(j in b){g=b[j];h=this.peekRecord(f,j);if(h&&!h.dropped){c=h.set(g)}else{this.onInvalidEntityUpdate(f,j,!!h)}}}},updateReference:function(g,j,c,a){var d=j.reference,m=d.type,f=d.inverse.role,b=g.id,o,h;if(a||a===0){h=this.getEntry(m,a).refs[f];delete h[b]}if(c||c===0){o=this.getEntry(m,c);h=o.refs||(o.refs={});h=h[f]||(h[f]={});h[b]=g}},visitData:function(h){var m=this,f=m.data,r=m.matrices,q,j,c,t,o,d,b,g,p,s,a;m.getSchema().processKeyChecks(true);for(b in f){q=f[b];for(c in q){g=q[c].record;if(g){if(g.phantom||g.dirty||g.dropped){if(h.onDirtyRecord){h.onDirtyRecord(g)}}else{if(h.onCleanRecord){h.onCleanRecord(g)}}}}}if(h.onMatrixChange){for(b in r){o=r[b].left;s=o.slices;j=o.role.association;for(c in s){p=s[c];d=p.members;for(t in d){a=(g=d[t])[2];if(a){h.onMatrixChange(j,g[0],g[1],a)}}}}}return h},_setNoRefs:{refs:false}}},1,0,0,0,0,0,[Ext.data,"Session"],0));(Ext.cmd.derive("Ext.util.Schedulable",Ext.Base,{"abstract":true,isSchedulable:true,scheduled:false,constructor:function(){this.getScheduler().add(this)},destroy:function(){var b=this,a=b.getScheduler();if(a){a.remove(b)}b.scheduler=null;b.schedule=b.react=Ext.emptyFn;b.callParent()},getFullName:function(){return this.name||this.id},privates:{getScheduler:function(){return this.scheduler},schedule:function(){var b=this,a;if(!b.scheduled){a=b.getScheduler();if(a){b.scheduled=true;if(b.onSchedule){b.onSchedule()}a.scheduleItem(b)}}},unschedule:function(){var b=this,a;if(b.scheduled){a=b.getScheduler();if(a){a.unscheduleItem(b)}b.scheduled=false}},sort:function(){}}},1,0,0,0,0,0,[Ext.util,"Schedulable"],0));(Ext.cmd.derive("Ext.app.bind.BaseBinding",Ext.util.Schedulable,{calls:0,kind:20,defaultOptions:{},lastValue:undefined,constructor:function(a,f,c,b){var d=this;d.options=b;d.owner=a;d.scope=c;d.callback=f;d.lateBound=Ext.isString(f);if(b&&b.deep){d.deep=true}Ext.util.Schedulable.prototype.constructor.call(this)},destroy:function(){var b=this,a=b.owner;Ext.util.Schedulable.prototype.destroy.call(this);if(a){a.onBindDestroy(b)}b.scope=b.callback=b.owner=null},isReadOnly:function(){return true},privates:{getScheduler:function(){var a=this.owner;return a&&a.getScheduler()},getSession:function(){var a=this.owner;return a.isSession?a:a.getSession()},notify:function(d){var c=this,a=c.options||c.defaultOptions,b=c.lastValue;if(!c.calls||c.deep||b!==d||Ext.isArray(d)){++c.calls;c.lastValue=d;if(c.lateBound){c.scope[c.callback](d,b,c)}else{c.callback.call(c.scope,d,b,c)}if(a.single){c.destroy()}}}}},1,0,0,0,0,0,[Ext.app.bind,"BaseBinding"],0));(Ext.cmd.derive("Ext.app.bind.Binding",Ext.app.bind.BaseBinding,{constructor:function(d,f,b,a){var c=this;Ext.app.bind.BaseBinding.prototype.constructor.call(this,d.owner,f,b,a);c.stub=d;c.depth=d.depth;if(!d.isLoading()&&!d.scheduled){c.schedule()}},destroy:function(c){var a=this,b=a.stub;if(b&&!c){b.unbind(a);a.stub=null}Ext.app.bind.BaseBinding.prototype.destroy.call(this)},bindValidation:function(c,a){var b=this.stub;return b&&b.bindValidation(c,a)},bindValidationField:function(c,a){var b=this.stub;return b&&b.bindValidationField(c,a)},getFullName:function(){return this.fullName||(this.fullName="@("+this.stub.getFullName()+")")},getValue:function(){var b=this,c=b.stub,a=c&&c.getValue();if(b.transform){a=b.transform(a)}return a},isLoading:function(){var a=this.stub;return a&&a.isLoading()},isReadOnly:function(){var b=this.stub,a=this.options;if(!(a&&a.twoWay===false)){if(b){return b.isReadOnly()}}return true},refresh:function(){},setValue:function(a){this.stub.set(a)},privates:{getDataObject:function(){var a=this.stub;return a&&a.getDataObject()},getRawValue:function(){var b=this,c=b.stub,a=c&&c.getRawValue();if(b.transform){a=b.transform(a)}return a},isDescendantOf:function(a){var b=this.stub;return b?(a===b)||b.isDescendantOf(a):false},react:function(){this.notify(this.getValue())},schedule:function(){if(!this.stub.scheduled){Ext.app.bind.BaseBinding.prototype.schedule.call(this)}},sort:function(){var a=this.stub;a.scheduler.sortItem(a)}}},1,0,0,0,0,0,[Ext.app.bind,"Binding"],0));(Ext.cmd.derive("Ext.app.bind.AbstractStub",Ext.util.Schedulable,{children:null,depth:0,generation:1,kind:10,parent:null,constructor:function(a,b){var c=this;c.owner=a;c.name=b;Ext.util.Schedulable.prototype.constructor.call(this)},destroy:function(){var f=this,d=f.children,g=f.bindings,a,c,b;if(g){for(c=0,a=g.length;c<a;++c){g[c].destroy(true)}}for(b in d){d[b].destroy()}Ext.util.Schedulable.prototype.destroy.call(this);f.bindings=f.children=f.owner=null},add:function(b){var a=this;(a.children||(a.children={}))[b.name]=b;b.depth=a.depth+1;b.parent=a},getChild:function(b){var a=Ext.isString(b)?b.split("."):b;if(a&&a.length){return this.descend(a,0)}return this},getFullName:function(){var d=this,a=d.fullName,c=d.parent,b;if(!a){a=d.name||d.id;if(c&&(b=c.getFullName())){a=((b.charAt(b.length-1)!==":")?b+".":b)+a}d.fullName=a}return a},getSession:function(){var a=this.owner;return a.isSession?a:a.getSession()},bind:function(g,b,a){var c=this,d=new Ext.app.bind.Binding(c,g,b,a),f=(c.bindings||(c.bindings=[]));d.depth=c.depth;f.push(d);return d},getValue:function(){return this.isLoading()?null:this.getRawValue()},graft:function(c){var d=this,f=d.bindings,a=d.name,b;d.parent=d.bindings=null;d.destroy();c.depth=d.depth;c.bindings=f;c.generation=d.generation+1;c.name=a;c.id=d.id;c.path=d.path;if(f){for(b=f.length;b-->0;){f[b].stub=c}}return c},isDescendantOf:function(b){for(var a=this;a=a.parent;){if(a===b){return true}}return false},onSchedule:function(){for(var b,a,d,f,c=this.parent;c;c=c.parent){f=c.bindings;if(f){for(b=0,a=f.length;b<a;++b){d=f[b];if(d.deep&&!d.scheduled){d.schedule()}}}}},react:function(){var d=this.bindings,c,b,a;if(d){for(b=0,a=d.length;b<a;++b){c=d[b];if(!c.scheduled){c.schedule()}}}},unbind:function(a){var b=this.bindings;if(b&&b.length){Ext.Array.remove(b,a)}},privates:{collect:function(){var c=this.children,g=this.bindings,a=0,d=0,f,b;if(c){for(b in c){f=c[b];d=f.collect();if(d===0){f.destroy();delete c[b]}a+=d}}if(g){a+=g.length}return a},getScheduler:function(){var a=this.owner;return a&&a.getScheduler()},sort:function(){var a=this.parent;if(a){this.scheduler.sortItem(a)}}}},1,0,0,0,0,0,[Ext.app.bind,"AbstractStub"],0));(Ext.cmd.derive("Ext.app.bind.Stub",Ext.app.bind.AbstractStub,{isStub:true,dirty:true,formula:null,validationKey:"validation",statics:{trackHadValue:function(f,a,h,g){var c=g&&g.children,j,b,d;d=f!==undefined;if(!a.hadValue[h]){a.hadValue[h]=d}if(g){g.hadValue=d}if(f&&(f.constructor===Object||f.isModel)){if(f.isModel){f=f.data}for(b in f){Ext.app.bind.Stub.trackHadValue(f[b],a,h+"."+b,c&&c[b])}}}},constructor:function(a,b,c){var d=this,f=b;Ext.app.bind.AbstractStub.prototype.constructor.call(this,a,b);d.boundValue=null;if(c){c.add(d);if(!c.isRootStub){f=c.path+"."+b}}d.hadValue=a.hadValue[f];d.path=f},destroy:function(){var c=this,d=c.formula,a=c.parent,b=c.storeBinding;if(d){d.destroy()}if(b){b.destroy()}c.detachBound();c.parentValue=c.formula=c.storeBinding=null;Ext.app.bind.AbstractStub.prototype.destroy.call(this)},bindValidation:function(c,b){var a=this.parent;return a&&a.descend([this.validationKey,this.name]).bind(c,b)},bindValidationField:function(g,d){var c=this.parent,b=this.name,f=typeof g==="string",a;if(c){a=c.bind(function(h){var j=null;if(h&&h.isModel){j=h.getField(b)}if(f){d[g](j,null,this)}else{g.call(d,j,null,this)}})}return a||null},descend:function(g,c){var f=this,d=f.children||(f.children={}),h=c||0,b=g[h++],a;if(!(a=d[b])){a=new Ext.app.bind.Stub(f.owner,b,f)}if(h<g.length){a=a.descend(g,h)}return a},getChildValue:function(a){var d=this,c=d.name,b;if(!a&&!Ext.isString(a)){b=d.hadValue?null:undefined}else{b=d.inspectValue(a);if(!b){if(a.isEntity){b=a.data[c]}else{b=a[c]}}}return b},getDataObject:function(){var g=this,b=g.parent.getDataObject(),d=g.name,c=b?b[d]:null,f,a;if(!c&&b&&b.isEntity){f=b.associations;if(f&&d in f){c=b[f[d].getterName]()}}if(!c||!(c.$className||Ext.isObject(c))){b[d]=c={};g.hadValue=g.owner.hadValue[g.path]=true;g.invalidate(true,true)}return c},getRawValue:function(){return this.getChildValue(this.getParentValue())},graft:function(f){var g=this,d=g.parent,c=g.children,a=g.name,b;f.parent=d;f.children=c;if(d){d.children[a]=f}if(c){for(b in c){c[b].parent=f}}g.children=null;return Ext.app.bind.AbstractStub.prototype.graft.call(this,f)},isLoading:function(){var d=this,c=d.parent,h=false,b,g,f,a;if(c&&!(h=c.isLoading())){g=d.getParentValue();f=d.inspectValue(g);if(f){h=f.isLoading()}else{if(g&&g.isModel){b=g.associations;if(!(b&&d.name in b)){h=false;a=true}}if(!a){h=!d.hadValue&&d.getRawValue()===undefined}}}return h},invalidate:function(b,a){var f=this,d=f.children,c;f.dirty=true;if(!a&&!f.isLoading()){if(!f.scheduled){f.schedule()}}if(b&&d){for(c in d){d[c].invalidate(b,a)}}},isReadOnly:function(){var a=this.formula;return !!(a&&!a.set)},set:function(j){var h=this,m=h.parent,a=h.name,f=h.formula,g,c,b,d;if(f&&!f.settingValue&&f.set){f.setValue(j);return}else{if(h.isLinkStub){d=h.getLinkFormulaStub();f=d?d.formula:null;if(f){f.setValue(j);return}}}g=m.getDataObject();if(g.isEntity){c=g.associations;if(c&&(a in c)){b=c[a];g[b.setterName](j);h.invalidate(true)}else{g.set(a,j)}}else{if((j&&j.constructor===Object)||j!==g[a]){if(!h.setByLink(j)){if(j===undefined){delete g[a]}else{g[a]=j;Ext.app.bind.Stub.trackHadValue(j,h.owner,h.path,h)}h.inspectValue(g);h.invalidate(true)}}}},onStoreLoad:function(){this.invalidate(true)},afterLoad:function(a){this.invalidate(true)},afterCommit:function(a){this.afterEdit(a,null)},afterEdit:function(h,f){var c=this.children,j=f&&f.length,d=h.associations,m,g,b,a;if(c){if(j){for(g=0;g<j;++g){b=c[f[g]];if(b){b.invalidate()}}}else{for(m in c){if(!(d&&m in d)){c[m].invalidate()}}}}this.invalidate()},afterReject:function(a){this.afterEdit(a,null)},setByLink:function(d){var c=this,h=0,a,b,g,f;for(f=c;f;f=f.parent){if(f.isLinkStub){b=f;if(h){for(g=[],a=0,f=c;f!==b;f=f.parent){++a;g[h-a]=f.name}}break}++h}if(!b||!(f=b.getTargetStub())){return false}if(g){f=f.descend(g)}f.set(d);return true},setFormula:function(c){var a=this,b=a.formula;if(b){b.destroy()}a.formula=new Ext.app.bind.Formula(a,c)},react:function(){var c=this,b=this.boundValue,a=c.children,d;if(b){if(b.isValidation){b.refresh();d=b.generation;if(c.lastValidationGeneration===d){return}c.lastValidationGeneration=d}else{if(b.isModel){if(a&&a[c.validationKey]){b.isValid()}}else{if(b.isStore){if(b.isLoading()&&!b.loadCount){return}}}}}Ext.app.bind.AbstractStub.prototype.react.call(this)},privates:{collect:function(){var c=this,a=Ext.app.bind.AbstractStub.prototype.collect.call(this),b=c.storeBinding?1:0,d=c.formula?1:0;return a+b+d},getLinkFormulaStub:function(){var a=this;while(a.isLinkStub){a=a.binding.stub}return a.formula?a:null},getParentValue:function(){var a=this;if(a.dirty){a.parentValue=a.parent.getValue();a.dirty=false}return a.parentValue},setStore:function(a){this.storeBinding=a},inspectValue:function(h){var j=this,a=j.name,f=j.boundValue,b=null,c,m,d,g;if(h&&h.isEntity){c=h.associations;if(c&&(a in c)){b=h[c[a].getterName]();if(b&&b.isStore){b.$associatedStore=true}}else{if(a===j.validationKey){b=h.getValidation();j.lastValidationGeneration=null}}}else{if(h){m=h[a];if(m&&(m.isModel||m.isStore)){b=m}}}d=f!==b;if(d){if(f){j.detachBound()}if(b){if(b.isModel){b.join(j)}else{g=b.associatedEntity;if(g&&!g.phantom&&!b.complete&&!b.hasPendingLoad()){b.load()}b.on("load",j.onStoreLoad,j,{single:true})}}j.boundValue=b}return b},detachBound:function(){var a=this,b=a.boundValue;if(b){if(b.isModel){b.unjoin(a)}else{b.un("load",a.onStoreLoad,a)}}},sort:function(){var c=this,d=c.formula,a=c.scheduler,b=c.storeBinding;Ext.app.bind.AbstractStub.prototype.sort.call(this);if(b){a.sortItem(b)}if(d){a.sortItem(d)}}}},1,0,0,0,0,0,[Ext.app.bind,"Stub"],0));(Ext.cmd.derive("Ext.app.bind.LinkStub",Ext.app.bind.Stub,{isLinkStub:true,binding:null,destroy:function(){var b=this,c=b.binding,a=b.owner;if(c){b.binding=null;c.destroy();if(a){delete a.linkData[b.name]}}b.target=null;Ext.app.bind.Stub.prototype.destroy.call(this)},getFullName:function(){var a=this;return a.fullName||(a.fullName="("+Ext.app.bind.Stub.prototype.getFullName.call(this)+" -> "+a.binding.getFullName()+")")},getDataObject:function(){var a=this.binding;return a&&a.getDataObject()},getRawValue:function(){var a=this.binding;return a&&a.getRawValue()},getValue:function(){var a=this.binding;return a&&a.getValue()},getTargetStub:function(){var a=this.binding;return a&&a.stub},isLoading:function(){var a=this.binding;return a?a.isLoading():false},link:function(d,b){var a=this,c=a.binding;if(c){c.destroy()}b=a.target=b||a.owner;a.linkDescriptor=d;a.binding=b.bind(d,a.onChange,a);a.binding.deep=true},onChange:function(){this.invalidate(true)},react:function(){var b=this,a=b.owner.linkData;a[b.name]=b.getValue();Ext.app.bind.Stub.prototype.react.call(this)},privates:{collect:function(){var b=this,a=Ext.app.bind.Stub.prototype.collect.call(this),c=b.binding?1:0;return a+c},sort:function(){var a=this.binding;if(a){this.scheduler.sortItem(a)}}}},0,0,0,0,0,0,[Ext.app.bind,"LinkStub"],0));(Ext.cmd.derive("Ext.app.bind.RootStub",Ext.app.bind.AbstractStub,{isRootStub:true,depth:0,createRootChild:function(a,f){var m=this,b=m.owner,g=b.getData(),c=m.children,j=c&&c[a],h=j?null:m,o,d;if(f||g.hasOwnProperty(a)||!(o=b.getParent())){d=new Ext.app.bind.Stub(b,a,h)}else{d=new Ext.app.bind.LinkStub(b,a,j?null:h);d.link("{"+a+"}",o)}if(j){j.graft(d)}return d},createStubChild:function(a){return this.createRootChild(a,true)},descend:function(g,c){var f=this,d=f.children,h=c||0,b=g[h++],a=(d&&d[b])||f.createRootChild(b);if(h<g.length){a=a.descend(g,h)}return a},getFullName:function(){return this.fullName||(this.fullName=this.owner.id+":")},getDataObject:function(){return this.owner.data},getRawValue:function(){return this.owner.data},getValue:function(){return this.owner.data},isDescendantOf:function(){return false},isLoading:function(){return false},set:function(h){var g=this,b=g.children||(g.children={}),a=g.owner,d=a.data,o=a.getParent(),f,c,m,j;for(j in h){if((m=h[j])!==undefined){if(!(c=b[j])){c=new Ext.app.bind.Stub(a,j,g)}else{if(c.isLinkStub){if(!c.getLinkFormulaStub()){f=c;c=new Ext.app.bind.Stub(a,j);f.graft(c)}}}c.set(m)}else{if(d.hasOwnProperty(j)){delete d[j];c=b[j];if(c&&!c.isLinkStub&&o){c=g.createRootChild(j)}c.invalidate(true)}}}},schedule:Ext.emptyFn,unschedule:Ext.emptyFn},0,0,0,0,0,0,[Ext.app.bind,"RootStub"],0));(Ext.cmd.derive("Ext.app.bind.Multi",Ext.app.bind.BaseBinding,{isMultiBinding:true,missing:1,deep:true,constructor:function(f,a,h,c,b){var d=this,g=b&&b.trackStatics;Ext.app.bind.BaseBinding.prototype.constructor.call(this,a,h,c,b);d.bindings=[];d.literal=f.$literal;if(f.constructor===Object){if(g){d.staticKeys=[]}d.addObject(f,d.lastValue={},d.staticKeys)}else{d.addArray(f,d.lastValue=[])}if(!--d.missing&&!d.scheduled){d.schedule()}},destroy:function(){var a=this;a.bindings=Ext.destroy(a.bindings);Ext.app.bind.BaseBinding.prototype.destroy.call(this)},add:function(b,g,m){var j=this,d=j.owner,c=j.bindings,a=j.literal?(b.reference?"bindEntity":"bindExpression"):"bind",h,f;++j.missing;h=d[a](b,function(o){g[m]=o;if(h.calls===1){--j.missing}if(!j.missing&&!j.scheduled){j.schedule()}},j,null);f=h.depth;if(!c.length||f<j.depth){j.depth=f}c.push(h);return !this.isBindingStatic(h)},addArray:function(c,m){var g=this,j=c.length,d=false,h,a,f;for(f=0;f<j;++f){a=c[f];if(a&&(a.reference||Ext.isString(a))){h=g.add(a,m,f)}else{if(Ext.isArray(a)){h=g.addArray(a,m[f]=[])}else{if(a&&a.constructor===Object){h=g.addObject(a,m[f]={})}else{m[f]=a;h=false}}}d=d||h}return d},addObject:function(c,g,j){var h=this,f=false,m,a,d;for(d in c){a=c[d];if(a&&(a.reference||Ext.isString(a))){m=h.add(a,g,d)}else{if(Ext.isArray(a)){m=h.addArray(a,g[d]=[])}else{if(a&&a.constructor===Object){m=h.addObject(a,g[d]={})}else{g[d]=a;m=false}}}if(j&&!m){j.push(d)}f=f||m}return f},getFullName:function(){var c=this,d=c.fullName,f=c.bindings,b=f.length,a;if(!d){d="@[";for(a=0;a<b;++a){if(a){d+=","}d+=f[a].getFullName()}d+="]";c.fullName=d}return d},getRawValue:function(){return this.lastValue},isDescendantOf:function(){return false},isLoading:function(){for(var b=this.bindings,a=b.length;a-->0;){if(b[a].isLoading()){return true}}return false},isBindingStatic:function(a){return a.isTemplateBinding&&a.isStatic},isStatic:function(){var d=this.bindings,a=d.length,b,c;for(b=0;b<a;++b){c=d[b];if(!this.isBindingStatic(c)){return false}}return true},pruneStaticKeys:function(){var d=Ext.apply({},this.lastValue),c=this.staticKeys,a=c.length,b;for(b=0;b<a;++b){delete d[c[b]]}return d},react:function(){this.notify(this.lastValue)},refresh:function(){},privates:{sort:function(){this.scheduler.sortItems(this.bindings)}}},1,0,0,0,0,0,[Ext.app.bind,"Multi"],0));(Ext.cmd.derive("Ext.app.bind.Formula",Ext.util.Schedulable,{statics:{getFormulaParser:function(b){var a=this.formulaCache,d,c;if(!a){a=this.formulaCache=new Ext.util.LruCache({maxSize:20})}d=a.get(b);if(!d){c="[^\\.a-z0-9_]"+b+"\\(\\s*(['\"])(.*?)\\1\\s*\\)";d=new RegExp(c,"gi");a.add(b,d)}return d}},isFormula:true,calculation:null,explicit:false,set:null,single:false,argumentNamesRe:/^function\s*\(\s*([^,\)\s]+)/,constructor:function(h,j){var g=this,b=h.owner,d,f,a,c;g.owner=b;g.stub=h;Ext.util.Schedulable.prototype.constructor.call(this);if(j instanceof Function){g.get=a=j}else{g.get=a=j.get;g.set=j.set;f=j.bind;if(j.single){g.single=j.single}if(f){d=f.bindTo;if(d){c=Ext.apply({},f);delete c.bindTo;f=d}}}if(f){g.explicit=true}else{f=a.$expressions||g.parseFormula(a)}g.binding=b.bind(f,g.onChange,g,c)},destroy:function(){var a=this,c=a.binding,b=a.stub;if(c){c.destroy();a.binding=null}if(b){b.formula=null}Ext.util.Schedulable.prototype.destroy.call(this);a.getterFn=a.owner=null},getFullName:function(){return this.fullName||(this.fullName=this.stub.getFullName()+"="+Ext.util.Schedulable.prototype.getFullName.call(this)+")")},getRawValue:function(){return this.calculation},onChange:function(){if(!this.scheduled){this.schedule()}},parseFormula:function(h){var g=h.toString(),d={$literal:true},c,b,a,f;c=this.argumentNamesRe.exec(g);b=c?c[1]:"get";a=Ext.app.bind.Formula.getFormulaParser(b);while((c=a.exec(g))){f=c[2];d[f]=f}d.$literal=true;h.$expressions=d;return d},react:function(){var c=this,b=c.owner,d=c.binding.lastValue,f=c.getterFn,a;if(c.explicit){a=d}else{a=b.getFormulaFn(d)}c.settingValue=true;c.stub.set(c.calculation=c.get.call(b,a));c.settingValue=false;if(c.single){c.destroy()}},setValue:function(a){this.set.call(this.stub.owner,a)},privates:{getScheduler:function(){var a=this.owner;return a&&a.getScheduler()},sort:function(){var a=this,b=a.binding;if(!b.destroyed){a.scheduler.sortItem(b)}}}},1,0,0,0,0,0,[Ext.app.bind,"Formula"],0));(Ext.cmd.derive("Ext.app.bind.Template",Ext.Base,{numberRe:/^(?:\d+(?:\.\d*)?)$/,stringRe:/^(?:["][^"]*["])$/,tokenRe:/\{[!]?(?:(?:(\d+)|([a-z_][\w\-\.]*))(?::([a-z_\.]+)(?:\(([^\)]*?)?\))?)?)\}/gi,formatRe:/^([a-z_]+)(?:\(([^\)]*?)?\))?$/i,buffer:null,slots:null,tokens:null,constructor:function(d){var c=this,b=c._initters,a;c.text=d;for(a in b){c[a]=b[a]}},_initters:{apply:function(a,b){return this.parse().apply(a,b)},getTokens:function(){return this.parse().getTokens()}},apply:function(j,m){var f=this,d=f.slots,b=f.buffer,a=d.length,c,h,g;for(c=0;c<a;++c){h=d[c];if(h){if((g=j[h.pos])==null){g=""}if(h.not){g=!g}if(h.format){g=h.format(g,m)}b[c]=g}}return b.join("")},getTokens:function(){return this.tokens},parse:function(){var o=this,u=o.text,f=[],j=[],m=[],t={},r=0,d=o.tokenRe,p=0,b,g,a,h,v,q,c;for(g in o._initters){delete o[g]}o.buffer=f;o.slots=j;o.tokens=m;while((h=d.exec(u))){a=h.index-r;if(a){f[p++]=u.substring(r,r+a);r+=a}r+=(v=h[0]).length;q={fmt:(b=h[3]||null),index:h[1]?parseInt(h[1],10):null,not:v.charAt(1)==="!",token:h[2]||null};c=q.token||String(q.index);if(c in t){q.pos=t[c]}else{t[c]=q.pos=m.length;m.push(c)}if(b){if(b.substring(0,5)==="this."){q.fmt=b.substring(5)}else{q.scope=Ext.util.Format}o.parseArgs(h[4],q)}j[p++]=q}if(r<u.length){f[p++]=u.substring(r)}return o},parseArgs:function(g,h){var f=this,b=f.numberRe,j=f.stringRe,m,d,c,a;if(!g){d=[]}else{if(g.indexOf(",")<0){d=[g]}else{d=g.split(",")}}h=h||{};a=d.length;h.args=d;for(c=0;c<a;++c){m=d[c];if(m==="true"){d[c]=true}else{if(m==="false"){d[c]=false}else{if(m==="null"){d[c]=null}else{if(b.test(m)){d[c]=parseFloat(m)}else{if(j.test(m)){d[c]=m.substring(1,m.length-1)}else{h.fn=Ext.functionFactory("return ["+g+"];");h.format=f._formatEval;break}}}}}}if(!h.format){d.unshift(0);h.format=f._formatArgs}return h},parseFormat:function(a){var d=this,c=d.formatRe.exec(a),f={fmt:a,scope:Ext.util.Format},b;b=c[2];if(b){f.fmt=c[1];d.parseArgs(b,f)}else{f.args=[0];f.format=d._formatArgs}return f},_formatArgs:function(b,a){a=this.scope||a;this.args[0]=b;return a[this.fmt].apply(a,this.args)},_formatEval:function(c,b){var a=this.fn();a.unshift(c);b=this.scope||b;return b[this.fmt].apply(b,a)}},1,0,0,0,0,0,[Ext.app.bind,"Template"],0));(Ext.cmd.derive("Ext.app.bind.TemplateBinding",Ext.app.bind.BaseBinding,{isTemplateBinding:true,lastValue:undefined,value:undefined,constructor:function(f,a,j,d,c){var g=this,b=new Ext.app.bind.Template(f),h=b.getTokens();Ext.app.bind.BaseBinding.prototype.constructor.call(this,a,j,d,c);g.tpl=b;g.tokens=h;h.$literal=true;if(h.length){g.multiBinding=new Ext.app.bind.Multi(h,a,g.onBindData,g)}else{g.isStatic=true;g.onData(b.text)}},destroy:function(){var a=this;Ext.destroy(a.multiBinding);a.tpl=a.multiBinding=null;Ext.app.bind.BaseBinding.prototype.destroy.call(this)},getFullName:function(){var a=this.multiBinding;return this.fullName||(this.fullName="$"+(a?a.getFullName():Ext.app.bind.BaseBinding.prototype.getFullName.call(this)))},getRawValue:function(){return this.value},getTemplateScope:function(){return null},isDescendantOf:function(){return false},isLoading:function(){var a=this.multiBinding;return a?a.isLoading():false},onBindData:function(a){this.onData(this.tpl.apply(a,this.getTemplateScope()))},onData:function(c){var b=this,a=b.value;if(a!==(b.value=c)){b.lastValue=a;b.schedule()}},react:function(){this.notify(this.value)},refresh:function(){var a=this.multiBinding;if(a){a.refresh()}},privates:{sort:function(){var a=this.multiBinding;if(a){this.scheduler.sortItem(a)}}}},1,0,0,0,0,0,[Ext.app.bind,"TemplateBinding"],0));(Ext.cmd.derive("Ext.data.ChainedStore",Ext.data.AbstractStore,{config:{source:null,remoteFilter:false,remoteSort:false},constructor:function(){Ext.data.AbstractStore.prototype.constructor.apply(this,arguments);this.getData().addObserver(this)},remove:function(){var a=this.getSource();return a.remove.apply(a,arguments)},removeAll:function(){var a=this.getSource();return a.removeAll()},getData:function(){var a=this,b=a.data;if(!b){a.data=b=a.constructDataCollection()}return b},getSession:function(){return this.getSource().getSession()},applySource:function(a){if(a){a=Ext.data.StoreManager.lookup(a)}return a},updateSource:function(d,b){var a=this,c;if(b){b.removeObserver(a)}if(d){c=a.getData();c.setSource(d.getData());if(!a.isInitializing){a.fireEvent("refresh",a);a.fireEvent("datachanged",a)}d.addObserver(a)}},getModel:function(){return this.getSource().getModel()},getProxy:function(){return null},onCollectionAdd:function(d,c){var b=this,a=c.items,f=!c.next;if(b.ignoreCollectionAdd){return}b.fireEvent("add",b,a,c.at);if(f){b.fireEvent("datachanged",b)}},onCollectionItemChange:function(g,f){var d=this,a=f.item,c=f.modified||null,b=f.meta;d.onUpdate(a,b,c,f);d.fireEvent("update",d,a,b,c,f)},onUpdate:Ext.emptyFn,onCollectionRemove:function(d,c){var b=this,a=c.items,f=!c.next;if(b.ignoreCollectionRemove){return}b.fireEvent("remove",b,a,c.at,false);if(f){b.fireEvent("datachanged",b)}},onSourceBeforeLoad:function(b,a){this.fireEvent("beforeload",this,a)},onSourceAfterLoad:function(c,b,d,a){this.fireEvent("load",this,b,d,a)},onFilterEndUpdate:function(){Ext.data.AbstractStore.prototype.onFilterEndUpdate.apply(this,arguments);this.callObservers("Filter")},onSourceBeforePopulate:function(){this.ignoreCollectionAdd=true;this.callObservers("BeforePopulate")},onSourceAfterPopulate:function(){var a=this;a.ignoreCollectionAdd=false;a.fireEvent("datachanged",a);a.fireEvent("refresh",a);this.callObservers("AfterPopulate")},onSourceBeforeClear:function(){this.ignoreCollectionRemove=true;this.callObservers("BeforeClear")},onSourceAfterClear:function(){this.ignoreCollectionRemove=false;this.callObservers("AfterClear")},onSourceBeforeRemoveAll:function(){this.ignoreCollectionRemove=true;this.callObservers("BeforeRemoveAll")},onSourceAfterRemoveAll:function(c,a){var b=this;b.ignoreCollectionRemove=false;if(!a){b.fireEvent("clear",b);b.fireEvent("datachanged",b)}this.callObservers("AfterRemoveAll",[a])},onSourceFilter:function(){var a=this;a.fireEvent("refresh",a);a.fireEvent("datachanged",a)},hasPendingLoad:function(){return this.getSource().hasPendingLoad()},isLoaded:function(){return this.getSource().isLoaded()},isLoading:function(){return this.getSource().isLoading()},onDestroy:function(){var a=this;a.observers=null;a.setSource(null);a.getData().destroy(true);a.data=null},privates:{isMoving:function(){var a=this.getSource();return a.isMoving?a.isMoving.apply(a,arguments):false},loadsSynchronously:function(){return this.getSource().loadsSynchronously()}}},1,0,0,0,["store.chained"],[[Ext.data.LocalStore.prototype.mixinId||Ext.data.LocalStore.$className,Ext.data.LocalStore]],[Ext.data,"ChainedStore"],0));(Ext.cmd.derive("Ext.app.ViewModel",Ext.Base,{isViewModel:true,factoryConfig:{name:"viewModel"},collectTimeout:100,expressionRe:/^(?:\{[!]?(?:(\d+)|([a-z_][\w\-\.]*))\})$/i,$configStrict:false,config:{data:true,formulas:{$value:null,merge:function(d,a,c,b){return this.mergeNew(d,a,c,b)}},links:null,parent:null,root:true,scheduler:null,schema:"default",session:null,stores:null,view:null},constructor:function(a){this.hadValue={};this.bindings={};this.initConfig(a)},destroy:function(){var g=this,d=g._scheduler,o=g.storeInfo,j=g.getParent(),c=g.collectTask,b=g.children,a=g.bindings,m,h,f;g.destroying=true;if(c){c.cancel();g.collectTask=null}if(b){for(m in b){b[m].destroy()}}if(o){for(m in o){h=o[m];f=h.autoDestroy;if(f||(!h.$wasInstance&&f!==false)){h.destroy()}Ext.destroy(h.$binding)}}if(j){j.unregisterChild(g)}g.getRoot().destroy();for(m in a){a[m].destroy()}if(d&&d.$owner===g){d.$owner=null;d.destroy()}g.hadValue=g.children=g.storeInfo=g._session=g._view=g._scheduler=g.bindings=g._root=g._parent=g.formulaFn=g.$formulaData=null;g.destroying=false;g.callParent()},bind:function(f,h,c,b){var d=this,g,a;c=c||d;if(!b&&f.bindTo!==undefined&&!Ext.isString(f)){b=f;f=b.bindTo}if(!Ext.isString(f)){g=new Ext.app.bind.Multi(f,d,h,c,b);a=true}else{if(d.expressionRe.test(f)){f=f.substring(1,f.length-1);g=d.bindExpression(f,h,c,b)}else{g=new Ext.app.bind.TemplateBinding(f,d,h,c,b);a=true}}if(a){d.bindings[g.id]=g}return g},getSession:function(){var b=this,c=b._session,a;if(!c&&(a=b.getParent())){b.setSession(c=a.getSession())}return c||null},getStore:function(b){var c=this.storeInfo,a;if(c){a=c[b]}return a||null},linkTo:function(m,d){var j=this,c,g,a,b,h,f;if(d.isModel){d={type:d.entityName,id:d.id}}b=d.type||d.reference;g=d.create;if(b){a=d.id;if(g){a=undefined}f=j.getRecord(b,a);if(Ext.isObject(g)){f.set(g);f.commit();f.phantom=true}c=j.getRoot().createStubChild(m);c.set(f)}else{c=j.getStub(m);if(!c.isLinkStub){h=new Ext.app.bind.LinkStub(j,c.name);c.graft(h);c=h}c.link(d)}},notify:function(){this.getScheduler().notify()},get:function(a){return this.getStub(a).getValue()},set:function(f,b){var a=this,d,c;a.getData();if(b===undefined&&f&&f.constructor===Object){c=a.getRoot();b=f}else{if(f&&f.indexOf(".")<0){d={};d[f]=b;b=d;c=a.getRoot()}else{c=a.getStub(f)}}c.set(b)},privates:{registerChild:function(b){var a=this.children;if(!a){this.children=a={}}a[b.getId()]=b},unregisterChild:function(b){var a=this.children;if(!this.destroying&&a){delete a[b.getId()]}},getRecord:function(b,g){var d=this.getSession(),f=b,c=g!==undefined,a;if(d){if(c){a=d.getRecord(b,g)}else{a=d.createRecord(b)}}else{if(!f.$isClass){f=this.getSchema().getEntity(f)}if(c){a=f.createWithId(g);a.load()}else{a=new f()}}return a},notFn:function(a){return !a},bindExpression:function(b,g,h,m){var a=b.charAt(0),d=(a==="!"),j=d?b.substring(1):b,c=this.getStub(j),f;f=c.bind(g,h,m);if(d){f.transform=this.notFn}return f},applyScheduler:function(a){if(a&&!a.isInstance){a=new Ext.util.Scheduler(a);a.$owner=this}return a},getScheduler:function(){var c=this,a=c._scheduler,b;if(!a){if(!(b=c.getParent())){a=new Ext.util.Scheduler({preSort:"kind,-depth"});a.$owner=c}else{a=b.getScheduler()}c.setScheduler(a)}return a},getStub:function(b){var a=this.getRoot();return b?a.getChild(b):a},collect:function(){var c=this,b=c.getParent(),a=c.collectTask;if(b){b.collect();return}if(!a){a=c.collectTask=new Ext.util.DelayedTask(c.doCollect,c)}if(c.collectTimeout===0){c.doCollect()}else{a.delay(c.collectTimeout)}},doCollect:function(){var b=this.children,a;if(b){for(a in b){b[a].doCollect()}}this.getRoot().collect()},onBindDestroy:function(d,a){var c=this,b;if(c.destroying){return}if(!a){delete c.bindings[d.id]}b=c.getParent();if(b){b.onBindDestroy(d,true)}else{c.collect()}},applyData:function(c,f){var d=this,a,b;d.getSession();if(!f){b=d.getParent();d.linkData=a=b?Ext.Object.chain(b.getData()):{};d.data=d._data=Ext.Object.chain(a)}if(c&&c.constructor===Object){d.getRoot().set(c)}},applyParent:function(a){if(a){a.registerChild(this)}return a},applyStores:function(m){var d=this,g=d.getRoot(),j,c,a,b,f,h;d.storeInfo={};d.listenerScopeFn=function(){return d.getView().getInheritedConfig("defaultListenerScope")};for(j in m){c=m[j];if(c.isStore){c.$wasInstance=true;d.setupStore(c,j);continue}else{if(Ext.isString(c)){c={source:c}}else{c=Ext.apply({},c)}}f=c.listeners;delete c.listeners;a=d.bind(c,d.onStoreBind,d,{trackStatics:true});if(a.isStatic()){a.destroy();d.createStore(j,c,f)}else{a.$storeKey=j;a.$listeners=f;b=g.createStubChild(j);b.setStore(a)}}},onStoreBind:function(a,c,h){var g=this.storeInfo,f=h.$storeKey,b=g[f],d;if(!b){this.createStore(f,a,h.$listeners,h)}else{a=Ext.merge({},h.pruneStaticKeys());d=a.proxy;delete a.type;delete a.model;delete a.fields;delete a.proxy;delete a.listeners;if(d){delete d.reader;delete d.writer;b.getProxy().setConfig(d)}b.setConfig(a)}},createStore:function(c,a,d,g){var f=this.getSession(),b;a=Ext.apply({},a);if(a.session){a.session=f}if(a.source){a.type=a.type||"chained"}a.listeners=d;b=Ext.Factory.store(a);b.$binding=g;this.setupStore(b,c)},setupStore:function(a,b){a.resolveListenerScope=this.listenerScopeFn;this.storeInfo[b]=a;this.set(b,a)},applyFormulas:function(c){var d=this,a=d.getRoot(),b,f;d.getData();for(b in c){a.createStubChild(b);f=d.getStub(b);f.setFormula(c[b])}return c},applyLinks:function(a){for(var b in a){this.linkTo(b,a[b])}},applySchema:function(a){return Ext.data.schema.Schema.get(a)},applyRoot:function(){var a=new Ext.app.bind.RootStub(this),b=this.getParent();if(b){a.depth=b.getRoot().depth-1000}return a},getFormulaFn:function(c){var b=this,a=b.formulaFn;if(!a){a=b.formulaFn=function(d){return b.$formulaData[d]}}b.$formulaData=c;return a}}},1,0,0,0,["viewmodel.default"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.app,"ViewModel"],0));(Ext.cmd.derive("Ext.app.domain.Controller",Ext.app.EventDomain,{singleton:true,type:"controller",prefix:"controller.",idMatchRe:/^\#/,constructor:function(){var a=this;a.callParent();a.monitor(Ext.app.BaseController)},match:function(d,b){var a=false,c=d.alias;if(b==="*"){a=true}else{if(b==="#"){a=!!d.isApplication}else{if(this.idMatchRe.test(b)){a=d.getId()===b.substring(1)}else{if(c){a=Ext.Array.indexOf(c,this.prefix+b)>-1}}}}return a}},1,0,0,0,0,0,[Ext.app.domain,"Controller"],0));(Ext.cmd.derive("Ext.data.PageMap",Ext.util.LruCache,{config:{store:null,pageSize:0,rootProperty:""},clear:function(a){var b=this;b.pageMapGeneration=(b.pageMapGeneration||0)+1;b.indexMap={};Ext.util.LruCache.prototype.clear.call(this,a)},forEach:function(o,q){var h=this,d=Ext.Object.getKeys(h.map),a=d.length,m=h.getPageSize(),c,b,p,g,f;for(c=0;c<a;c++){d[c]=+d[c]}Ext.Array.sort(d,Ext.Array.numericSortFn);q=q||h;for(c=0;c<a;c++){p=d[c];g=h.getPage(p);f=g.length;for(b=0;b<f;b++){if(o.call(q,g[b],(p-1)*m+b)===false){return}}}},findBy:function(c,b){var d=this,a=null;b=b||d;d.forEach(function(g,f){if(c.call(b,g,f)){a=g;return false}});return a},findIndexBy:function(c,b){var d=this,a=-1;b=b||d;d.forEach(function(g,f){if(c.call(b,g)){a=f;return false}});return a},find:function(h,g,j,d,c,b){if(Ext.isEmpty(g,false)){return null}var f=Ext.String.createRegex(g,d,c,b),a=this.getRootProperty();return this.findBy(function(m){return m&&f.test((a?m[a]:m)[h])},null,j)},findIndex:function(h,g,j,d,c,b){if(Ext.isEmpty(g,false)){return null}var f=Ext.String.createRegex(g,d,c,b),a=this.getRootProperty();return this.findIndexBy(function(m){return m&&f.test((a?m[a]:m)[h])},null,j)},getPageFromRecordIndex:function(a){return Math.floor(a/this.getPageSize())+1},addAll:function(a){this.addPage(1,a)},addPage:function(p,a){var m=this,o=m.getPageSize(),c=p+Math.floor((a.length-1)/o),j=(p-1)*o,g=m.indexMap,f,b,d,h;for(h=0;p<=c;p++,h+=o){f=Ext.Array.slice(a,h,h+o);for(b=0,d=f.length;b<d;b++){g[f[b].internalId]=j++}m.add(p,f);m.fireEvent("pageadd",m,p,f)}},getCount:function(){var a=Ext.util.LruCache.prototype.getCount.call(this);if(a){a=(a-1)*this.getPageSize()+this.last.value.length}return a},getByInternalId:function(a){var b=this.indexMap[a];if(b!=null){return this.getAt(b)}},indexOf:function(b){var a=-1;if(b){a=this.indexMap[b.internalId];if(a==null){a=-1}}return a},insert:function(){},remove:function(){},removeAt:function(){},removeAtKey:function(g){var f=this,c=f.getPage(g),b,d,a;if(c){if(f.fireEvent("beforepageremove",f,g,c)!==false){b=c.length;for(d=0;d<b;d++){delete f.indexMap[c[d].internalId]}a=Ext.util.LruCache.prototype.removeAtKey.apply(this,arguments);f.fireEvent("pageremove",f,g,c);c.length=0}}return a},getPage:function(a){return this.get(a)},hasRange:function(f,b){var c=this,a=c.getPageFromRecordIndex(f),d=c.getPageFromRecordIndex(b);for(;a<=d;a++){if(!c.hasPage(a)){return false}}return(d-1)*c._pageSize+c.getPage(d).length>b},hasPage:function(a){return !!this.get(a)},peekPage:function(a){return this.map[a]},getAt:function(a){return this.getRange(a,a+1)[0]},getRange:function(a,b){b--;if(!this.hasRange(a,b)){Ext.raise("PageMap asked for range which it does not have")}var h=this,d=Ext.Array,j=h.getPageSize(),p=h.getPageFromRecordIndex(a),f=h.getPageFromRecordIndex(b),c=(p-1)*j,r=(f*j)-1,m=p,s=[],q,g,o;for(;m<=f;m++){if(m===p){q=a-c;o=q>0}else{q=0;o=false}if(m===f){g=j-(r-b);o=o||g<j}if(o){d.push(s,d.slice(h.getPage(m),q,g))}else{d.push(s,h.getPage(m))}}return s},destroy:function(){Ext.util.LruCache.prototype.destroy.call(this);this.indexMap={}}},0,0,0,0,0,0,[Ext.data,"PageMap"],0));(Ext.cmd.derive("Ext.data.BufferedStore",Ext.data.ProxyStore,{isBufferedStore:true,buffered:true,config:{data:0,pageSize:25,remoteSort:true,remoteFilter:true,sortOnLoad:false,purgePageCount:5,trailingBufferZone:25,leadingBufferZone:200,defaultViewSize:100,viewSize:0,trackRemoved:false},applyData:function(b){var a=this.data||(this.data=this.createDataCollection());return a},applyProxy:function(a){a=Ext.data.ProxyStore.prototype.applyProxy.call(this,a);if(a&&a.setEnablePaging){a.setEnablePaging(true)}return a},createFiltersCollection:function(){return new Ext.util.FilterCollection()},createSortersCollection:function(){return new Ext.util.SorterCollection()},updateGroupField:function(a){this.group(a)},getGrouper:function(){return this.grouper},isGrouped:function(){return !!this.grouper},createDataCollection:function(){var b=this,a=new Ext.data.PageMap({store:b,rootProperty:"data",pageSize:b.getPageSize(),maxSize:b.getPurgePageCount(),listeners:{clear:b.onPageMapClear,scope:b}});b.relayEvents(a,["beforepageremove","pageadd","pageremove"]);b.pageRequests={};return a},removeAll:function(a){var b=this,c=b.getData();if(c){if(a){b.suspendEvent("clear")}c.clear();if(a){b.resumeEvent("clear")}}},flushLoad:function(){var b=this,a=b.pendingLoadOptions;b.clearLoadTask();if(!a){return}b.getData().clear();a.page=1;a.start=0;a.limit=b.getViewSize()||b.getDefaultViewSize();a.loadCallback=a.callback;a.callback=null;return b.loadToPrefetch(a)},reload:function(q){var h=this,f=h.getData(),m=Number.MAX_VALUE,j,b,g,p,d,a,o,c;if(!q){q={}}if(h.loading||h.fireEvent("beforeload",h,q)===false){return}a=function(){var s=h.totalCount,r=b-j;if(b>=s){b=s-1;j=Math.max(b-r,0)}if(h.rangeCached(j,Math.min(b,h.totalCount))){h.loading=false;f.un("pageadd",a);c=f.getRange(j,b+1);h.fireEvent("load",h,c,true);h.fireEvent("refresh",h)}};o=Math.ceil((h.getLeadingBufferZone()+h.getTrailingBufferZone())/2);if(h.lastRequestStart&&h.preserveScrollOnReload){j=h.lastRequestStart;b=h.lastRequestEnd;m=h.getTotalCount()}else{j=q.start||0;b=j+(q.count||h.getPageSize())-1}f.clear(true);delete h.totalCount;j=Math.max(j-o,0);b=Math.min(b+o,m);g=h.getPageFromRecordIndex(j);p=h.getPageFromRecordIndex(b);h.loading=true;q.waitForReload=a;f.on("pageadd",a);for(d=g;d<=p;d++){h.prefetchPage(d,q)}},filter:function(){Ext.data.ProxyStore.prototype.filter.apply(this,arguments)},filterBy:function(b,a){},loadData:function(b,a){},loadPage:function(c,a){var b=this;a=a||{};a.page=b.currentPage=c;a.start=(c-1)*b.getPageSize();a.limit=b.getViewSize()||b.getDefaultViewSize();a.loadCallback=a.callback;a.callback=null;return b.loadToPrefetch(a)},clearData:function(c){var a=this,b=a.getData();if(b){b.clear()}},getCount:function(){return this.totalCount||0},getRange:function(d,h,q){var p=this,f=p.totalCount-1,g=p.lastRequestStart,r=[],j=p.getData(),c,o,b,a,m;q=Ext.apply({prefetchStart:d,prefetchEnd:h},q);h=(h>=p.totalCount)?f:h;o=d===0?0:d-1;b=h===f?h:h+1;p.lastRequestStart=d;p.lastRequestEnd=h;if(p.rangeCached(o,b)){p.onRangeAvailable(q);r=j.getRange(d,h+1)}else{p.fireEvent("cachemiss",p,d,h);a=p.getPageFromRecordIndex(o);m=p.getPageFromRecordIndex(b);c=function(s,u,t){if(u>=a&&u<=m&&p.rangeCached(o,b)){p.fireEvent("cachefilled",p,d,h);j.un("pageadd",c);p.onRangeAvailable(q)}};j.on("pageadd",c);p.prefetchRange(d,h)}p.primeCache(d,h,d<g?-1:1);return r},getById:function(b){var a=this.data.findBy(function(c){return c.getId()===b});return a},getAt:function(a){var b=this.getData();if(b.hasRange(a,a)){return b.getAt(a)}},getByInternalId:function(a){return this.data.getByInternalId(a)},contains:function(a){return this.indexOf(a)>-1},indexOf:function(a){return this.getData().indexOf(a)},indexOfId:function(a){return this.indexOf(this.getById(a))},group:function(b,d){var c=this,a;if(b&&typeof b==="string"){a=c.grouper;if(!a){c.grouper=new Ext.util.Grouper({property:b,direction:d||"ASC",root:"data"})}else{if(d===undefined){a.toggle()}else{a.setDirection(d)}}}else{c.grouper=b?c.getSorters().decodeSorter(b,"Ext.util.Grouper"):null}c.getData().clear();c.loadPage(1,{callback:function(){c.fireEvent("groupchange",c,c.getGrouper())}})},getPageFromRecordIndex:function(a){return Math.floor(a/this.getPageSize())+1},calculatePageCacheSize:function(a){var c=this,b=c.getPurgePageCount();return b?Math.max(c.getData().getMaxSize()||0,Math.ceil((a+c.getTrailingBufferZone()+c.getLeadingBufferZone())/c.getPageSize())*2+b):0},loadToPrefetch:function(v){var p=this,c=v,h,b,r,q=v.start,a=v.start+v.limit-1,u=(p.getViewSize()||v.limit),j=Math.min(a,v.start+u-1),m=p.getPageFromRecordIndex(Math.max(q-p.getTrailingBufferZone(),0)),t=p.getPageFromRecordIndex(a+p.getLeadingBufferZone()),g=p.getData(),o=function(){b=b||[];if(v.loadCallback){v.loadCallback.call(v.scope||p,b,f,true)}if(v.callback){v.callback.call(v.scope||p,b,q||0,a||0,v)}},s=function(){p.fireEvent("datachanged",p);p.fireEvent("refresh",p);p.fireEvent("load",p,b,true)},d=function(){if(p.rangeCached(q,j)){p.loading=false;b=g.getRange(q,j+1);g.un("pageadd",d);if(p.hasListeners.guaranteedrange){p.guaranteeRange(q,j,v.callback,v.scope)}o();s()}},f;g.setMaxSize(p.calculatePageCacheSize(u));if(p.fireEvent("beforeload",p,v)!==false){delete p.totalCount;p.loading=true;if(v.callback){c=Ext.apply({},v);delete c.callback}p.on("prefetch",function(y,w,A,z){f=z;if(A){if((r=p.getTotalCount())){g.on("pageadd",d);j=Math.min(j,r-1);t=p.getPageFromRecordIndex(Math.min(j+p.getLeadingBufferZone(),r-1));for(h=m+1;h<=t;++h){p.prefetchPage(h,c)}}else{o();s()}}else{p.loading=false;o();p.fireEvent("load",p,w,false)}},null,{single:true});p.prefetchPage(m,c)}},prefetch:function(d){var f=this,b=f.getPageSize(),g=f.getData(),c,a;if(b){if(f.lastPageSize&&b!=f.lastPageSize){Ext.raise("pageSize cannot be dynamically altered")}if(!g.getPageSize()){g.setPageSize(b)}}else{f.pageSize=g.setPageSize(b=d.limit)}f.lastPageSize=b;if(!d.page){d.page=f.getPageFromRecordIndex(d.start);d.start=(d.page-1)*b;d.limit=Math.ceil(d.limit/b)*b}a=f.pageRequests[d.page];if(!a||a.getOperation().pageMapGeneration!==g.pageMapGeneration){d=Ext.apply({action:"read",filters:f.getFilters().items,sorters:f.getSorters().items,grouper:f.getGrouper(),internalCallback:f.onProxyPrefetch,internalScope:f},d);c=f.createOperation("read",d);c.pageMapGeneration=g.pageMapGeneration;if(f.fireEvent("beforeprefetch",f,c)!==false){f.pageRequests[d.page]=c.execute();if(f.getProxy().isSynchronous){delete f.pageRequests[d.page]}}}return f},onPageMapClear:function(){var c=this,b=c.wasLoading,a=c.pageRequests,f=c.getData(),d;f.clearListeners();f.on("clear",c.onPageMapClear,c);c.relayEvents(f,["beforepageremove","pageadd","pageremove"]);c.loading=true;c.totalCount=0;for(d in a){if(a.hasOwnProperty(d)){a[d].getOperation().abort()}}c.fireEvent("clear",c);c.loading=b},prefetchPage:function(f,b){var d=this,a=d.getPageSize(),g=(f-1)*a,c=d.totalCount;if(c!==undefined&&d.data.getCount()===c){return}d.prefetch(Ext.applyIf({page:f,start:g,limit:a},b))},onProxyPrefetch:function(d){if(this.destroyed){return}var j=this,m=d.getResultSet(),c=d.getRecords(),g=d.wasSuccessful(),h=d.getPage(),b=d.waitForReload,p=j.totalCount,a=j.pageRequests,o,f;if(d.pageMapGeneration===j.getData().pageMapGeneration){if(m){j.totalCount=m.getTotal();if(j.totalCount!==p){j.fireEvent("totalcountchange",j.totalCount)}}if(h!==undefined){delete j.pageRequests[h]}j.loading=false;j.fireEvent("prefetch",j,c,g,d);if(g){if(j.totalCount===0){if(b){for(o in a){f=a[o].getOperation();if(f.waitForReload===b){delete f.waitForReload}}j.getData().un("pageadd",b);j.fireEvent("load",j,[],true);j.fireEvent("refresh",j)}}else{j.cachePage(c,d.getPage())}}Ext.callback(d.getCallback(),d.getScope()||j,[c,d,g])}},cachePage:function(b,f){var d=this,a=b.length,c;if(!Ext.isDefined(d.totalCount)){d.totalCount=b.length;d.fireEvent("totalcountchange",d.totalCount)}for(c=0;c<a;c++){b[c].join(d)}d.getData().addPage(f,b)},rangeCached:function(b,a){return this.getData().hasRange(b,a)},pageCached:function(a){return this.getData().hasPage(a)},pagePending:function(a){return !!this.pageRequests[a]},rangeSatisfied:function(b,a){return this.rangeCached(b,a)},onRangeAvailable:function(d){var f=this,b=f.getTotalCount(),g=d.prefetchStart,a=(d.prefetchEnd>b-1)?b-1:d.prefetchEnd,c;a=Math.max(0,a);c=f.getData().getRange(g,a+1);if(d.fireEvent!==false){f.fireEvent("guaranteedrange",c,g,a,d)}if(d.callback){d.callback.call(d.scope||f,c,g,a,d)}},guaranteeRange:function(f,a,d,c,b){b=Ext.apply({callback:d,scope:c},b);this.getRange(f,a+1,b)},prefetchRange:function(h,b){var d=this,c,a,g,f=d.getData();if(!d.rangeCached(h,b)){c=d.getPageFromRecordIndex(h);a=d.getPageFromRecordIndex(b);f.setMaxSize(d.calculatePageCacheSize(b-h+1));for(g=c;g<=a;g++){if(!d.pageCached(g)){d.prefetchPage(g)}}}},primeCache:function(j,c,h){var g=this,f=g.getLeadingBufferZone(),d=g.getTrailingBufferZone(),b=g.getPageSize(),a=g.totalCount;if(h===-1){j=Math.max(j-f,0);c=Math.min(c+d,a-1)}else{if(h===1){j=Math.max(Math.min(j-d,a-b),0);c=Math.min(c+f,a-1)}else{j=Math.min(Math.max(Math.floor(j-((f+d)/2)),0),a-g.pageSize);c=Math.min(Math.max(Math.ceil(c+((f+d)/2)),0),a-1)}}g.prefetchRange(j,c)},sort:function(b,a,c){if(arguments.length===0){this.clearAndLoad()}else{this.getSorters().addSort(b,a,c)}},onSorterEndUpdate:function(){var a=this,b=a.getSorters().getRange();if(b.length){a.fireEvent("beforesort",a,b);a.clearAndLoad({callback:function(){a.fireEvent("sort",a,b)}})}else{a.fireEvent("sort",a,b)}},clearAndLoad:function(a){this.getData().clear();this.loadPage(1,a)},privates:{isLast:function(a){return this.indexOf(a)===this.getTotalCount()-1},isMoving:function(){return false}}},0,0,0,0,["store.buffered"],0,[Ext.data,"BufferedStore"],0));(Ext.cmd.derive("Ext.mixin.Queryable",Ext.Base,{mixinId:"queryable",isQueryable:true,query:function(a){a=a||"*";return Ext.ComponentQuery.query(a,this.getQueryRoot())},queryBy:function(g,f){var c=[],b=this.getQueryRoot().getRefItems(true),d=0,a=b.length,h;for(;d<a;++d){h=b[d];if(g.call(f||h,h)!==false){c.push(h)}}return c},queryById:function(a){return this.down(Ext.makeIdSelector(a))},child:function(a){var b=this.getQueryRoot().getRefItems();if(a&&a.isComponent){return this.matchById(b,a.getItemId())}if(a){b=Ext.ComponentQuery.query(a,b)}if(b.length){return b[0]}return null},down:function(a){if(a&&a.isComponent){return this.matchById(this.getRefItems(true),a.getItemId())}a=a||"";return this.query(a)[0]||null},visitPreOrder:function(a,d,c,b){Ext.ComponentQuery._visit(true,a,this.getQueryRoot(),d,c,b)},visitPostOrder:function(a,d,c,b){Ext.ComponentQuery._visit(false,a,this.getQueryRoot(),d,c,b)},getRefItems:function(){return[]},getQueryRoot:function(){return this},privates:{matchById:function(b,f){var a=b.length,c,d;for(c=0;c<a;++c){d=b[c];if(d.getItemId()===f){return d}}return null}}},0,0,0,0,0,0,[Ext.mixin,"Queryable"],0));(Ext.cmd.derive("Ext.data.Request",Ext.Base,{config:{action:undefined,params:undefined,method:"GET",url:null,operation:null,proxy:null,disableCaching:false,headers:{},callbackKey:null,rawRequest:null,jsonData:undefined,xmlData:undefined,withCredentials:false,username:null,password:null,binary:false,callback:null,scope:null,timeout:30000,records:null,directFn:null,args:null,useDefaultXhrHeader:null},constructor:function(a){this.initConfig(a)},getParam:function(a){var c=this.getParams(),b;if(c){return c[a]}return b},setParam:function(a,b){var c=this.getParams()||{};c[a]=b;this.setParams(c)}},1,0,0,0,0,0,[Ext.data,"Request"],0));(Ext.cmd.derive("Ext.data.Validation",Ext.data.Model,{isValidation:true,syncGeneration:0,attach:function(a){this.record=a;delete this.data.id},getValidation:function(){return null},isValid:function(){var a=this;if(a.syncGeneration!==a.record.generation){a.refresh()}return !a.dirty},refresh:function(b){var y=this,z=y.data,d=y.record,o=d.fields,r=d.generation,w=d.data,m=d.validationSeparator,c=null,f,h,p,a,u,s,q,v,t,g,B,A;if(b||y.syncGeneration!==r){y.syncGeneration=r;for(s=0,t=o.length;s<t;++s){a=o[s];A=a.name;B=w[A];f=a.defaultInvalidMessage;p=0;if(!(A in z)){z[A]=h=true}else{h=z[A]}if(a.validate!==Ext.emptyFn){g=a.validate(B,m,null,d);if(g!==true){p=g||f}}if(!p){p=true}if(p!==h){(c||(c={}))[A]=p}}if(c){y.set(c)}}}},0,0,0,0,0,0,[Ext.data,"Validation"],0));(Ext.cmd.derive("Ext.dom.Helper",Ext.Base,function(){var a="afterbegin",g="afterend",h="beforebegin",d="beforeend",j=["BeforeBegin","previousSibling"],f=["AfterEnd","nextSibling"],c={beforebegin:j,afterend:f},b={beforebegin:j,afterend:f,afterbegin:["AfterBegin","firstChild"],beforeend:["BeforeEnd","lastChild"]};return{singleton:true,alternateClassName:["Ext.DomHelper","Ext.core.DomHelper"],emptyTags:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,confRe:/^(?:tag|children|cn|html|tpl|tplData)$/i,endRe:/end/i,attributeTransform:{cls:"class",htmlFor:"for"},closeTags:{},detachedDiv:document.createElement("div"),decamelizeName:function(){var p=/([a-z])([A-Z])/g,o={};function m(q,s,r){return s+"-"+r.toLowerCase()}return function(q){return o[q]||(o[q]=q.replace(p,m))}}(),generateMarkup:function(u,o){var t=this,s=typeof u,r,m,v,q,p;if(s==="string"||s==="number"){o.push(u)}else{if(Ext.isArray(u)){for(q=0;q<u.length;q++){if(u[q]){t.generateMarkup(u[q],o)}}}else{v=u.tag||"div";o.push("<",v);for(r in u){if(u.hasOwnProperty(r)){m=u[r];if(m!==undefined&&!t.confRe.test(r)){if(typeof m==="object"){o.push(" ",r,'="');t.generateStyles(m,o,true).push('"')}else{o.push(" ",t.attributeTransform[r]||r,'="',m,'"')}}}}if(t.emptyTags.test(v)){o.push("/>")}else{o.push(">");if((m=u.tpl)){m.applyOut(u.tplData,o)}if((m=u.html)){o.push(m)}if((m=u.cn||u.children)){t.generateMarkup(m,o)}p=t.closeTags;o.push(p[v]||(p[v]="</"+v+">"))}}}return o},generateStyles:function(r,o,q){var m=o||[],p,s;for(p in r){if(r.hasOwnProperty(p)){s=r[p];p=this.decamelizeName(p);if(q&&Ext.String.hasHtmlCharacters(s)){s=Ext.String.htmlEncode(s)}m.push(p,":",s,";")}}return o||m.join("")},markup:function(m){if(typeof m==="string"){return m}var o=this.generateMarkup(m,[]);return o.join("")},applyStyles:function(m,o){Ext.fly(m).applyStyles(o)},createContextualFragment:function(o){var r=this.detachedDiv,m=document.createDocumentFragment(),p,q;r.innerHTML=o;q=r.childNodes;p=q.length;while(p--){m.appendChild(q[0])}return m},createDom:function(r,m){var q=this,p=q.markup(r),t=q.detachedDiv,s;t.innerHTML=p;s=t.firstChild;return Ext.supports.ChildContentClearedWhenSettingInnerHTML?s.cloneNode(true):s},insertHtml:function(q,m,r){var v=this,o,s,p,u,w;q=q.toLowerCase();if(m.insertAdjacentHTML){if(v.ieInsertHtml){w=v.ieInsertHtml(q,m,r);if(w){return w}}o=b[q];if(o){m.insertAdjacentHTML(o[0],r);return m[o[1]]}}else{if(m.nodeType===3){q=q===a?h:q;q=q===d?g:q}s=Ext.supports.CreateContextualFragment?m.ownerDocument.createRange():undefined;u="setStart"+(this.endRe.test(q)?"After":"Before");if(c[q]){if(s){s[u](m);w=s.createContextualFragment(r)}else{w=this.createContextualFragment(r)}m.parentNode.insertBefore(w,q===h?m:m.nextSibling);return m[(q===h?"previous":"next")+"Sibling"]}else{p=(q===a?"first":"last")+"Child";if(m.firstChild){if(s){try{s[u](m[p]);w=s.createContextualFragment(r)}catch(t){w=this.createContextualFragment(r)}}else{w=this.createContextualFragment(r)}if(q===a){m.insertBefore(w,m.firstChild)}else{m.appendChild(w)}}else{m.innerHTML=r}return m[p]}}},insertBefore:function(m,q,p){return this.doInsert(m,q,p,h)},insertAfter:function(m,q,p){return this.doInsert(m,q,p,g)},insertFirst:function(m,q,p){return this.doInsert(m,q,p,a)},append:function(m,q,p){return this.doInsert(m,q,p,d)},overwrite:function(p,o,r){var q=this,m;p=Ext.getDom(p);o=q.markup(o);if(q.ieOverwrite){m=q.ieOverwrite(p,o)}if(!m){p.innerHTML=o;m=p.firstChild}return r?Ext.get(m):m},doInsert:function(q,t,s,m){var r=this,p;q=q.dom||Ext.getDom(q);if("innerHTML" in q){p=r.insertHtml(m,q,r.markup(t))}else{p=r.createDom(t,null);if(q.nodeType===3){m=m===a?h:m;m=m===d?g:m}if(c[m]){q.parentNode.insertBefore(p,m===h?q:q.nextSibling)}else{if(q.firstChild&&m===a){q.insertBefore(p,q.firstChild)}else{q.appendChild(p)}}}return s?Ext.get(p):p},createTemplate:function(p){var m=this.markup(p);return new Ext.Template(m)},createHtml:function(m){return this.markup(m)}}},0,0,0,0,0,0,[Ext.dom,"Helper",Ext,"DomHelper",Ext.core,"DomHelper"],0));Ext.define("Ext.overrides.dom.Helper",(function(){var c=/^(?:table|thead|tbody|tr|td)$/i,h=/td|tr|tbody|thead/i,g="<table>",j="</table>",b=g+"<tbody>",f="</tbody>"+j,a=b+"<tr>",d="</tr>"+f;return{override:"Ext.dom.Helper",ieInsertHtml:function(m,p,o){var q=null;if(Ext.isIE9m&&c.test(p.tagName)){q=this.insertIntoTable(p.tagName.toLowerCase(),m,p,o)}return q},ieOverwrite:function(o,m){if(Ext.isIE9m&&c.test(o.tagName)){while(o.firstChild){o.removeChild(o.firstChild)}if(m){return this.insertHtml("afterbegin",o,m)}}},ieTable:function(t,o,u,s){var p=-1,r=this.detachedDiv,q,m;r.innerHTML=[o,u,s].join("");while(++p<t){r=r.firstChild}q=r.nextSibling;if(q){q=r;r=document.createDocumentFragment();while(q){m=q.nextSibling;r.appendChild(q);q=m}}return r},insertIntoTable:function(w,p,o,q){var m,t,s=p==="beforebegin",v=p==="afterbegin",r=p==="beforeend",u=p==="afterend";if(w==="td"&&(v||r)||!h.test(w)&&(s||u)){return null}t=s?o:u?o.nextSibling:v?o.firstChild:null;if(s||u){o=o.parentNode}if(w==="td"||(w==="tr"&&(r||v))){m=this.ieTable(4,a,q,d)}else{if(((w==="tbody"||w==="thead")&&(r||v))||(w==="tr"&&(s||u))){m=this.ieTable(3,b,q,f)}else{m=this.ieTable(2,g,q,j)}}o.insertBefore(m,t);return m}}})());(Ext.cmd.derive("Ext.dom.GarbageCollector",Ext.Base,{singleton:true,interval:30000,constructor:function(){var a=this;a.collect=Ext.Function.bind(a.collect,a);a.lastTime=Ext.now();a.resume()},collect:function(){var j=this,a=Ext.cache,b,f,c,m,g,d;for(b in a){if(!a.hasOwnProperty(b)){continue}c=a[b];if(c.skipGarbageCollection){continue}f=c.dom;try{g=Ext.isGarbage(f)}catch(h){delete a[b];continue}if(g){if(c&&c.dom){c.collect()}}}if(Ext.isIE9m){m={};for(b in a){if(a.hasOwnProperty(b)){m[b]=a[b]}}Ext.cache=Ext.dom.Element.cache=m}j.lastTime=Ext.now()},pause:function(){clearTimeout(this.timerId)},resume:function(){var a=this,b=a.lastTime;if(Ext.enableGarbageCollector&&(Ext.now()-b>a.interval)){a.collect()}a.timerId=Ext.interval(a.collect,a.interval)}},1,0,0,0,0,0,[Ext.dom,"GarbageCollector"],0));(Ext.cmd.derive("Ext.event.gesture.Recognizer",Ext.Base,{priority:0,handledEvents:[],config:{onRecognized:Ext.emptyFn,callbackScope:null},constructor:function(a){this.initConfig(a);Ext.event.publisher.Gesture.instance.registerRecognizer(this)},onStart:Ext.emptyFn,onEnd:Ext.emptyFn,onTouchStart:Ext.emptyFn,onTouchMove:Ext.emptyFn,onTouchEnd:Ext.emptyFn,onTouchCancel:Ext.emptyFn,fail:function(){return false},fire:function(){this.getOnRecognized().apply(this.getCallbackScope(),arguments)},reset:Ext.emptyFn},1,0,0,0,0,[[Ext.mixin.Identifiable.prototype.mixinId||Ext.mixin.Identifiable.$className,Ext.mixin.Identifiable]],[Ext.event.gesture,"Recognizer"],0));(Ext.cmd.derive("Ext.event.gesture.SingleTouch",Ext.event.gesture.Recognizer,{inheritableStatics:{NOT_SINGLE_TOUCH:"Not Single Touch",TOUCH_MOVED:"Touch Moved",EVENT_CANCELED:"Event Canceled"},onTouchStart:function(a){if(a.touches.length>1){return this.fail(this.self.NOT_SINGLE_TOUCH)}},onTouchCancel:function(){return false}},0,0,0,0,0,0,[Ext.event.gesture,"SingleTouch"],0));(Ext.cmd.derive("Ext.event.gesture.DoubleTap",Ext.event.gesture.SingleTouch,{priority:300,inheritableStatics:{DIFFERENT_TARGET:"Different Target"},config:{moveDistance:8,tapDistance:24,maxDuration:300},handledEvents:["singletap","doubletap"],singleTapTimer:null,startTime:0,lastTapTime:0,onTouchStart:function(c){var b=this,a;if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){return false}a=b.lastStartPoint=c.changedTouches[0].point;b.startPoint=b.startPoint||a;b.startTime=c.time;clearTimeout(b.singleTapTimer)},onTouchMove:function(c){var b=this,a=c.changedTouches[0].point;if(Math.abs(a.getDistanceTo(b.lastStartPoint))>=b.getMoveDistance()){b.startPoint=null;return b.fail(b.self.TOUCH_MOVED)}},onTouchEnd:function(f){var h=this,d=h.getMaxDuration(),a=f.time,g=f.target,j=h.lastTapTime,b=h.lastTarget,m=f.changedTouches[0].point,c;h.lastTapTime=a;h.lastTarget=g;if(j){c=a-j;if(c<=d&&Math.abs(m.getDistanceTo(h.startPoint))<=h.getTapDistance()){if(g!==b){return h.fail(h.self.DIFFERENT_TARGET)}h.lastTarget=null;h.lastTapTime=0;h.fire("doubletap",f,{touch:f.changedTouches[0],duration:c});h.startPoint=null;return}}if(a-h.startTime>d){h.fireSingleTap(f)}else{h.setSingleTapTimer(f)}},setSingleTapTimer:function(b){var a=this;a.singleTapTimer=Ext.defer(function(){a.fireSingleTap(b)},a.getMaxDuration())},fireSingleTap:function(a,b){this.fire("singletap",a,{touch:b});this.startPoint=null},reset:function(){var a=this;a.startTime=a.lastTapTime=0;a.lastStartPoint=a.startPoint=a.singleTapTimer=null}},0,0,0,0,0,0,[Ext.event.gesture,"DoubleTap"],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.doubleTap)}));(Ext.cmd.derive("Ext.event.gesture.Drag",Ext.event.gesture.SingleTouch,{priority:100,isStarted:false,startPoint:null,previousPoint:null,lastPoint:null,handledEvents:["dragstart","drag","dragend","dragcancel"],config:{minDistance:8},constructor:function(){Ext.event.gesture.SingleTouch.prototype.constructor.apply(this,arguments);this.initInfo()},initInfo:function(){this.info={touch:null,previous:{x:0,y:0},x:0,y:0,delta:{x:0,y:0},absDelta:{x:0,y:0},flick:{velocity:{x:0,y:0}},direction:{x:0,y:0},time:0,previousTime:{x:0,y:0}}},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){if(this.isStarted&&this.lastMoveEvent!==null){this.lastMoveEvent.isStopped=false;this.onTouchEnd(this.lastMoveEvent)}return false}this.startTime=a.time;this.startPoint=a.changedTouches[0].point},tryDragStart:function(d){var b=this.startPoint,g=d.changedTouches[0],a=g.point,f=this.getMinDistance(),c=this.info;if(Math.abs(a.getDistanceTo(b))>=f){this.isStarted=true;this.previousPoint=this.lastPoint=a;this.resetInfo("x",d,g);this.resetInfo("y",d,g);c.time=d.time;this.fire("dragstart",d,c)}},onTouchMove:function(b){if(!this.isStarted){this.tryDragStart(b)}if(!this.isStarted){return}var c=b.changedTouches[0],a=c.point;if(this.lastPoint){this.previousPoint=this.lastPoint}this.lastPoint=a;this.lastMoveEvent=b;this.updateInfo("x",b,c);this.updateInfo("y",b,c);this.info.time=b.time;this.fire("drag",b,this.info)},onAxisDragEnd:function(a,c){var b=c.time-c.previousTime[a];if(b>0){c.flick.velocity[a]=(c[a]-c.previous[a])/b}},resetInfo:function(c,g,j){var d=this.lastPoint[c],b=this.startPoint[c],h=d-b,a=c.toUpperCase(),f=this.info;f.touch=j;f.delta[c]=h;f.absDelta[c]=Math.abs(h);f.previousTime[c]=this.startTime;f.previous[c]=b;f[c]=d;f.direction[c]=0;f["start"+a]=this.startPoint[c];f["previous"+a]=f.previous[c];f["page"+a]=f[c];f["delta"+a]=f.delta[c];f["absDelta"+a]=f.absDelta[c];f["previousDelta"+a]=0;f.startTime=this.startTime},updateInfo:function(d,j,h){var m=this,p=m.lastPoint[d],f=m.previousPoint[d],a=m.startPoint[d],q=p-a,c=m.info,o=c.direction,g=d.toUpperCase(),b=c.previous[d];c.touch=h;c.delta[d]=q;c.absDelta[d]=Math.abs(q);if(p!==b&&p!==c[d]){c.previous[d]=c[d];c.previousTime[d]=c.time}c[d]=p;if(p>f){o[d]=1}else{if(p<f){o[d]=-1}}c["start"+g]=a;c["previous"+g]=c.previous[d];c["page"+g]=c[d];c["delta"+g]=c.delta[d];c["absDelta"+g]=c.absDelta[d];c["previousDelta"+g]=c.previous[d]-a;c.startTime=m.startTime},onTouchEnd:function(a){this.doEnd(a)},onTouchCancel:function(a){this.doEnd(a,true);return false},doEnd:function(d,b){if(!this.isStarted){this.tryDragStart(d)}if(this.isStarted){var f=d.changedTouches[0],a=f.point,c=this.info;this.isStarted=false;this.lastPoint=a;this.updateInfo("x",d,f);this.updateInfo("y",d,f);c.time=d.time;this.onAxisDragEnd("x",c);this.onAxisDragEnd("y",c);this.fire(b?"dragcancel":"dragend",d,c);this.startPoint=null;this.previousPoint=null;this.lastPoint=null;this.lastMoveEvent=null}},reset:function(){var a=this;a.isStarted=a.lastPoint=a.startPoint=a.previousPoint=a.lastPoint=a.lastMoveEvent=null;a.initInfo()}},1,0,0,0,0,0,[Ext.event.gesture,"Drag"],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.drag)}));(Ext.cmd.derive("Ext.event.gesture.Swipe",Ext.event.gesture.SingleTouch,{priority:500,handledEvents:["swipestart","swipe","swipecancel"],inheritableStatics:{MAX_OFFSET_EXCEEDED:"Max Offset Exceeded",MAX_DURATION_EXCEEDED:"Max Duration Exceeded",DISTANCE_NOT_ENOUGH:"Distance Not Enough"},config:{minDistance:80,maxOffset:35,maxDuration:1000},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){return false}var b=a.changedTouches[0];this.startTime=a.time;this.isHorizontal=true;this.isVertical=true;this.startX=b.pageX;this.startY=b.pageY},onTouchMove:function(m){var j=m.changedTouches[0],q=j.pageX,o=j.pageY,h=q-this.startX,g=o-this.startY,d=Math.abs(q-this.startX),c=Math.abs(o-this.startY),f=m.time-this.startTime,r=this.getMinDistance(),b=m.time,p,a;if(b-this.startTime>this.getMaxDuration()){return this.fail(this.self.MAX_DURATION_EXCEEDED)}if(this.isHorizontal&&c>this.getMaxOffset()){this.isHorizontal=false}if(this.isVertical&&d>this.getMaxOffset()){this.isVertical=false}if(!this.isVertical||!this.isHorizontal){if(this.isHorizontal&&d<r){p=(h<0)?"left":"right";a=d}else{if(this.isVertical&&c<r){p=(g<0)?"up":"down";a=c}}}if(p&&!this.started){this.started=true;this.fire("swipestart",m,{touch:j,direction:p,distance:a,duration:f})}if(!this.isHorizontal&&!this.isVertical){return this.fail(this.self.MAX_OFFSET_EXCEEDED)}},onTouchEnd:function(j){if(this.onTouchMove(j)===false){return false}var h=j.changedTouches[0],p=h.pageX,m=h.pageY,g=p-this.startX,f=m-this.startY,c=Math.abs(g),b=Math.abs(f),q=this.getMinDistance(),d=j.time-this.startTime,o,a;if(this.isVertical&&b<q){this.isVertical=false}if(this.isHorizontal&&c<q){this.isHorizontal=false}if(this.isHorizontal){o=(g<0)?"left":"right";a=c}else{if(this.isVertical){o=(f<0)?"up":"down";a=b}else{return this.fail(this.self.DISTANCE_NOT_ENOUGH)}}this.started=false;this.fire("swipe",j,{touch:h,direction:o,distance:a,duration:d})},onTouchCancel:function(a){this.fire("swipecancel",a);return false},reset:function(){var a=this;a.startTime=a.isHorizontal=a.isVertical=a.startX=a.startY=null}},0,0,0,0,0,0,[Ext.event.gesture,"Swipe"],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.swipe)}));(Ext.cmd.derive("Ext.event.gesture.EdgeSwipe",Ext.event.gesture.Swipe,{priority:800,handledEvents:["edgeswipe","edgeswipestart","edgeswipeend","edgeswipecancel"],inheritableStatics:{NOT_NEAR_EDGE:"Not Near Edge"},config:{minDistance:60},onTouchStart:function(a){if(Ext.event.gesture.Swipe.prototype.onTouchStart.apply(this,arguments)===false){return false}var b=a.changedTouches[0];this.started=false;this.direction=null;this.isHorizontal=true;this.isVertical=true;this.startX=b.pageX;this.startY=b.pageY},onTouchMove:function(o){var j=o.changedTouches[0],s=j.pageX,p=j.pageY,h=s-this.startX,g=p-this.startY,b=Math.abs(p-this.startY),c=Math.abs(s-this.startX),t=this.getMinDistance(),f=this.getMaxOffset(),d=o.time-this.startTime,r=Ext.Viewport&&Ext.Element.getViewportWidth(),m=Ext.Viewport&&Ext.Element.getViewportHeight(),q,a;if(this.isVertical&&c>f){this.isVertical=false}if(this.isHorizontal&&b>f){this.isHorizontal=false}if(this.isVertical&&this.isHorizontal){if(b>c){this.isHorizontal=false}else{this.isVertical=false}}if(this.isHorizontal){q=(h<0)?"left":"right";a=h}else{if(this.isVertical){q=(g<0)?"up":"down";a=g}}q=this.direction||(this.direction=q);if(q==="up"){a=g*-1}else{if(q==="left"){a=h*-1}}this.distance=a;if(!a){return this.fail(this.self.DISTANCE_NOT_ENOUGH)}if(!this.started){if(q==="right"&&this.startX>t){return this.fail(this.self.NOT_NEAR_EDGE)}else{if(q==="down"&&this.startY>t){return this.fail(this.self.NOT_NEAR_EDGE)}else{if(q==="left"&&(r-this.startX)>t){return this.fail(this.self.NOT_NEAR_EDGE)}else{if(q==="up"&&(m-this.startY)>t){return this.fail(this.self.NOT_NEAR_EDGE)}}}}this.started=true;this.startTime=o.time;this.fire("edgeswipestart",o,{touch:j,direction:q,distance:a,duration:d})}else{this.fire("edgeswipe",o,{touch:j,direction:q,distance:a,duration:d})}},onTouchEnd:function(b){var a;if(this.onTouchMove(b)!==false){a=b.time-this.startTime;this.fire("edgeswipeend",b,{touch:b.changedTouches[0],direction:this.direction,distance:this.distance,duration:a})}},onTouchCancel:function(a){this.fire("edgeswipecancel",a,{touch:a.changedTouches[0]});return false},reset:function(){var a=this;a.started=a.direction=a.isHorizontal=a.isVertical=a.startX=a.startY=a.startTime=a.distance=null}},0,0,0,0,0,0,[Ext.event.gesture,"EdgeSwipe"],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.edgeSwipe)}));(Ext.cmd.derive("Ext.event.gesture.LongPress",Ext.event.gesture.SingleTouch,{priority:400,inheritableStatics:{DURATION_NOT_ENOUGH:"Duration Not Enough"},config:{moveDistance:8,minDuration:1000},handledEvents:["longpress","taphold"],fireLongPress:function(a){this.fire("longpress",a,{touch:a.changedTouches[0],duration:this.getMinDuration()});this.isLongPress=true},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.apply(this,arguments)===false){return false}this.startPoint=a.changedTouches[0].point;this.isLongPress=false;this.setLongPressTimer(a)},setLongPressTimer:function(b){var a=this;a.timer=Ext.defer(function(){a.fireLongPress(b)},a.getMinDuration())},onTouchMove:function(b){var a=b.changedTouches[0].point;if(Math.abs(a.getDistanceTo(this.startPoint))>=this.getMoveDistance()){return this.fail(this.self.TOUCH_MOVED)}},onTouchEnd:function(){if(!this.isLongPress){return this.fail(this.self.DURATION_NOT_ENOUGH)}},fail:function(){clearTimeout(this.timer);return Ext.event.gesture.SingleTouch.prototype.fail.apply(this,arguments)},reset:function(){this.isLongPress=this.startPoint=null},fire:function(a){if(a==="longpress"){var b=Array.prototype.slice.call(arguments);b[0]="taphold";this.fire.apply(this,b)}return Ext.event.gesture.SingleTouch.prototype.fire.apply(this,arguments)}},0,0,0,0,0,0,[Ext.event.gesture,"LongPress"],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.longPress)}));(Ext.cmd.derive("Ext.event.gesture.MultiTouch",Ext.event.gesture.Recognizer,{requiredTouchesCount:2,isTracking:false,isStarted:false,onTouchStart:function(d){var a=this.requiredTouchesCount,c=d.touches,b=c.length;if(b===a){this.start(d)}else{if(b>a){this.end(d)}}},onTouchEnd:function(a){this.end(a)},onTouchCancel:function(a){this.end(a,true);return false},start:function(){if(!this.isTracking){this.isTracking=true;this.isStarted=false}},end:function(b,a){if(this.isTracking){this.isTracking=false;if(this.isStarted){this.isStarted=false;this[a?"fireCancel":"fireEnd"](b)}}},reset:function(){this.isTracking=this.isStarted=false}},0,0,0,0,0,0,[Ext.event.gesture,"MultiTouch"],0));(Ext.cmd.derive("Ext.event.gesture.Pinch",Ext.event.gesture.MultiTouch,{priority:600,handledEvents:["pinchstart","pinch","pinchend","pinchcancel"],startDistance:0,lastTouches:null,onTouchMove:function(c){if(!this.isTracking){return}var b=c.touches,d,a,f;d=b[0].point;a=b[1].point;f=d.getDistanceTo(a);if(f===0){return}if(!this.isStarted){this.isStarted=true;this.startDistance=f;this.fire("pinchstart",c,{touches:b,distance:f,scale:1})}else{this.fire("pinch",c,{touches:b,distance:f,scale:f/this.startDistance})}},fireEnd:function(a){this.fire("pinchend",a)},fireCancel:function(a){this.fire("pinchcancel",a)},fail:function(){return Ext.event.gesture.MultiTouch.prototype.fail.apply(this,arguments)},reset:function(){this.lastTouches=null;this.startDistance=0;Ext.event.gesture.MultiTouch.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,"Pinch"],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.pinch)}));(Ext.cmd.derive("Ext.event.gesture.Rotate",Ext.event.gesture.MultiTouch,{priority:700,handledEvents:["rotatestart","rotate","rotateend","rotatecancel"],startAngle:0,lastTouches:null,lastAngle:null,onTouchMove:function(h){if(!this.isTracking){return}var g=h.touches,b=this.lastAngle,d,f,c,a,j,m;d=g[0].point;f=g[1].point;c=d.getAngleTo(f);if(b!==null){m=Math.abs(b-c);a=c+360;j=c-360;if(Math.abs(a-b)<m){c=a}else{if(Math.abs(j-b)<m){c=j}}}this.lastAngle=c;if(!this.isStarted){this.isStarted=true;this.startAngle=c;this.fire("rotatestart",h,{touches:g,angle:c,rotation:0})}else{this.fire("rotate",h,{touches:g,angle:c,rotation:c-this.startAngle})}this.lastTouches=Ext.Array.clone(g)},fireEnd:function(a){this.lastAngle=null;this.fire("rotateend",a)},fireCancel:function(a){this.lastAngle=null;this.fire("rotatecancel",a)},reset:function(){var a=this;a.lastTouches=a.lastAngle=a.startAngle=null;Ext.event.gesture.MultiTouch.prototype.reset.call(this)}},0,0,0,0,0,0,[Ext.event.gesture,"Rotate"],function(a){var b=Ext.manifest.gestures;a.instance=new a(b&&b.rotate)}));(Ext.cmd.derive("Ext.event.gesture.Tap",Ext.event.gesture.SingleTouch,{priority:200,handledEvents:["tap","tapcancel"],config:{moveDistance:8},onTouchStart:function(a){if(Ext.event.gesture.SingleTouch.prototype.onTouchStart.call(this,a)===false){return false}this.startPoint=a.changedTouches[0].point},onTouchMove:function(b){var c=b.changedTouches[0],a=c.point;if(Math.abs(a.getDistanceTo(this.startPoint))>=this.getMoveDistance()){this.fire("tapcancel",b,{touch:c});return this.fail(this.self.TOUCH_MOVED)}},onTouchEnd:function(a){this.fire("tap",a,{touch:a.changedTouches[0]})},onTouchCancel:function(a){this.fire("tapcancel",a,{touch:a.changedTouches[0]});return false},reset:function(){this.startPoint=null}},0,0,0,0,0,0,[Ext.event.gesture,"Tap"],function(b){var a=Ext.manifest.gestures;b.instance=new b(a&&a.tap)}));(Ext.cmd.derive("Ext.event.publisher.Focus",Ext.event.publisher.Dom,{type:"focus",handledEvents:["focusenter","focusleave","focusmove"],handledDomEvents:["focusin","focusout"],doDelegatedEvent:function(d,c){var b=this,a;d=Ext.event.publisher.Dom.prototype.doDelegatedEvent.call(this,d,false);if(d){if(d.type==="focusout"){if(d.relatedTarget==null){b.processFocusIn(d,d.target,document.body,c)}}else{a=d.relatedTarget;b.processFocusIn(d,(a==null||!a.tagName)?document.body:a,d.target,c)}}},processFocusIn:function(j,m,c,p){var o=this,q,b,h=[],a,g,f,d;f=Ext.fly(m);d=Ext.fly(c);if((f&&f.isFocusSuspended())||(d&&d.isFocusSuspended())){return}for(b=m,q=Ext.dom.Element.getCommonAncestor(c,m,true);b&&b!==q;b=b.parentNode){h.push(b)}if(h.length){a=o.createSyntheticEvent("focusleave",j,m,c);o.publish("focusleave",h,a);if(a.isStopped){return}}h.length=0;for(b=c;b!==q;b=b.parentNode){h.push(b)}g=o.createSyntheticEvent("focusenter",j,c,m);if(h.length){o.publish("focusenter",h,g);if(g.isStopped){return}}h=o.getPropagatingTargets(q);if(h.length){a=o.createSyntheticEvent("focusmove",j,c,m);o.publish("focusmove",h,a);if(a.isStopped){return}}if(p){o.afterEvent(j)}Ext.GlobalEvents.fireEvent("focus",{event:g,toElement:c,fromElement:m})},createSyntheticEvent:function(b,f,d,a){var c=new Ext.event.Event(f);c.type=b;c.relatedTarget=a;c.target=d;return c}},0,0,0,0,0,0,[Ext.event.publisher,"Focus"],function(b){var a;b.instance=new b();if(!Ext.supports.FocusinFocusoutEvents){this.override({handledDomEvents:["focus","blur"],doDelegatedEvent:function(g,f){var d=this;g=d.callSuper([g,false]);if(g){clearTimeout(a);a=0;if(g.type==="blur"){var c=g.target===window?document.body:g.target;a=setTimeout(function(){a=0;d.processFocusIn(g,c,document.body,f);b.previousActiveElement=null},0);if(g.target===window||g.target===document){b.previousActiveElement=null}else{b.previousActiveElement=g.target}}else{d.processFocusIn(g,b.previousActiveElement||document.body,g.target===window?document.body:g.target,f)}}}})}}));(Ext.cmd.derive("Ext.fx.State",Ext.Base,{isAnimatable:{"background-color":true,"background-image":true,"background-position":true,"border-bottom-color":true,"border-bottom-width":true,"border-color":true,"border-left-color":true,"border-left-width":true,"border-right-color":true,"border-right-width":true,"border-spacing":true,"border-top-color":true,"border-top-width":true,"border-width":true,bottom:true,color:true,crop:true,"font-size":true,"font-weight":true,height:true,left:true,"letter-spacing":true,"line-height":true,"margin-bottom":true,"margin-left":true,"margin-right":true,"margin-top":true,"max-height":true,"max-width":true,"min-height":true,"min-width":true,opacity:true,"outline-color":true,"outline-offset":true,"outline-width":true,"padding-bottom":true,"padding-left":true,"padding-right":true,"padding-top":true,right:true,"text-indent":true,"text-shadow":true,top:true,"vertical-align":true,visibility:true,width:true,"word-spacing":true,"z-index":true,zoom:true,transform:true},constructor:function(a){this.data={};this.set(a)},setConfig:function(a){this.set(a);return this},setRaw:function(a){this.data=a;return this},clear:function(){return this.setRaw({})},setTransform:function(c,h){var g=this.data,a=Ext.isArray(h),b=g.transform,f,d;if(!b){b=g.transform={translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,rotate:0,rotateX:0,rotateY:0,rotateZ:0,skewX:0,skewY:0}}if(typeof c=="string"){switch(c){case"translate":if(a){f=h.length;if(f==0){break}b.translateX=h[0];if(f==1){break}b.translateY=h[1];if(f==2){break}b.translateZ=h[2]}else{b.translateX=h}break;case"rotate":if(a){f=h.length;if(f==0){break}b.rotateX=h[0];if(f==1){break}b.rotateY=h[1];if(f==2){break}b.rotateZ=h[2]}else{b.rotate=h}break;case"scale":if(a){f=h.length;if(f==0){break}b.scaleX=h[0];if(f==1){break}b.scaleY=h[1];if(f==2){break}b.scaleZ=h[2]}else{b.scaleX=h;b.scaleY=h}break;case"skew":if(a){f=h.length;if(f==0){break}b.skewX=h[0];if(f==1){break}b.skewY=h[1]}else{b.skewX=h}break;default:b[c]=h}}else{for(d in c){if(c.hasOwnProperty(d)){h=c[d];this.setTransform(d,h)}}}},set:function(a,d){var c=this.data,b;if(typeof a!="string"){for(b in a){d=a[b];if(b==="transform"){this.setTransform(d)}else{c[b]=d}}}else{if(a==="transform"){this.setTransform(d)}else{c[a]=d}}return this},unset:function(a){var b=this.data;if(b.hasOwnProperty(a)){delete b[a]}return this},getData:function(){return this.data}},1,0,0,0,0,0,[Ext.fx,"State"],0));(Ext.cmd.derive("Ext.fx.animation.Abstract",Ext.Evented,{isAnimation:true,config:{name:"",element:null,before:null,from:{},to:{},after:null,states:{},duration:300,easing:"linear",iteration:1,direction:"normal",delay:0,onBeforeStart:null,callback:null,onEnd:null,onBeforeEnd:null,scope:null,reverse:null,preserveEndState:false,replacePrevious:true},STATE_FROM:"0%",STATE_TO:"100%",DIRECTION_UP:"up",DIRECTION_DOWN:"down",DIRECTION_LEFT:"left",DIRECTION_RIGHT:"right",stateNameRegex:/^(?:[\d\.]+)%$/,constructor:function(){this.states={};Ext.Evented.prototype.constructor.apply(this,arguments);return this},applyElement:function(a){return Ext.get(a)},applyBefore:function(a,b){if(a){return Ext.factory(a,Ext.fx.State,b)}},applyAfter:function(b,a){if(b){return Ext.factory(b,Ext.fx.State,a)}},setFrom:function(a){return this.setState(this.STATE_FROM,a)},setTo:function(a){return this.setState(this.STATE_TO,a)},getFrom:function(){return this.getState(this.STATE_FROM)},getTo:function(){return this.getState(this.STATE_TO)},setStates:function(a){var c=this.stateNameRegex,b;for(b in a){if(c.test(b)){this.setState(b,a[b])}}return this},getStates:function(){return this.states},updateCallback:function(a){if(a){this.setOnEnd(a)}},end:function(){this.stop()},stop:function(){this.fireEvent("stop",this)},destroy:function(){this.stop();Ext.Evented.prototype.destroy.call(this)},setState:function(b,d){var a=this.getStates(),c;c=Ext.factory(d,Ext.fx.State,a[b]);if(c){a[b]=c}return this},getState:function(a){return this.getStates()[a]},getData:function(){var h=this,q=h.getStates(),f={},j=h.getBefore(),c=h.getAfter(),m=q[h.STATE_FROM],o=q[h.STATE_TO],p=m.getData(),g=o.getData(),d,b,a;for(b in q){if(q.hasOwnProperty(b)){a=q[b];d=a.getData();f[b]=d}}return{before:j?j.getData():{},after:c?c.getData():{},states:f,from:p,to:g,duration:h.getDuration(),iteration:h.getIteration(),direction:h.getDirection(),easing:h.getEasing(),delay:h.getDelay(),onEnd:h.getOnEnd(),onBeforeEnd:h.getOnBeforeEnd(),onBeforeStart:h.getOnBeforeStart(),scope:h.getScope(),preserveEndState:h.getPreserveEndState(),replacePrevious:h.getReplacePrevious()}}},1,0,0,0,0,0,[Ext.fx.animation,"Abstract"],0));(Ext.cmd.derive("Ext.fx.animation.Slide",Ext.fx.animation.Abstract,{alternateClassName:"Ext.fx.animation.SlideIn",config:{direction:"left",out:false,offset:0,easing:"auto",containerBox:"auto",elementBox:"auto",isElementBoxFit:true,useCssTransform:true},reverseDirectionMap:{up:"down",down:"up",left:"right",right:"left"},applyEasing:function(a){if(a==="auto"){return"ease-"+((this.getOut())?"in":"out")}return a},getContainerBox:function(){var a=this._containerBox;if(a==="auto"){a=this.getElement().getParent().getBox()}return a},getElementBox:function(){var a=this._elementBox;if(this.getIsElementBoxFit()){return this.getContainerBox()}if(a==="auto"){a=this.getElement().getBox()}return a},getData:function(){var u=this.getElementBox(),c=this.getContainerBox(),h=u?u:c,s=this.getFrom(),t=this.getTo(),g=this.getOut(),f=this.getOffset(),r=this.getDirection(),b=this.getUseCssTransform(),j=this.getReverse(),d=0,a=0,q,o,p,m;if(j){r=this.reverseDirectionMap[r]}switch(r){case this.DIRECTION_UP:if(g){a=c.top-h.top-h.height-f}else{a=c.bottom-h.bottom+h.height+f}break;case this.DIRECTION_DOWN:if(g){a=c.bottom-h.bottom+h.height+f}else{a=c.top-h.height-h.top-f}break;case this.DIRECTION_RIGHT:if(g){d=c.right-h.right+h.width+f}else{d=c.left-h.left-h.width-f}break;case this.DIRECTION_LEFT:if(g){d=c.left-h.left-h.width-f}else{d=c.right-h.right+h.width+f}break}q=(g)?0:d;o=(g)?0:a;if(b){s.setTransform({translateX:q,translateY:o})}else{s.set("left",q);s.set("top",o)}p=(g)?d:0;m=(g)?a:0;if(b){t.setTransform({translateX:p,translateY:m})}else{t.set("left",p);t.set("top",m)}return Ext.fx.animation.Abstract.prototype.getData.apply(this,arguments)}},0,0,0,0,["animation.slide","animation.slideIn"],0,[Ext.fx.animation,"Slide",Ext.fx.animation,"SlideIn"],0));(Ext.cmd.derive("Ext.fx.animation.SlideOut",Ext.fx.animation.Slide,{config:{out:true}},0,0,0,0,["animation.slideOut"],0,[Ext.fx.animation,"SlideOut"],0));(Ext.cmd.derive("Ext.fx.animation.Fade",Ext.fx.animation.Abstract,{alternateClassName:"Ext.fx.animation.FadeIn",config:{out:false,before:{display:null,opacity:0},after:{opacity:null},reverse:null},updateOut:function(a){var c=this.getTo(),b=this.getFrom();if(a){b.set("opacity",1);c.set("opacity",0)}else{b.set("opacity",0);c.set("opacity",1)}}},0,0,0,0,["animation.fade","animation.fadeIn"],0,[Ext.fx.animation,"Fade",Ext.fx.animation,"FadeIn"],0));(Ext.cmd.derive("Ext.fx.animation.FadeOut",Ext.fx.animation.Fade,{config:{out:true,before:{}}},0,0,0,0,["animation.fadeOut"],0,[Ext.fx.animation,"FadeOut"],0));(Ext.cmd.derive("Ext.fx.animation.Flip",Ext.fx.animation.Abstract,{config:{easing:"ease-in",direction:"right",half:false,out:null},getData:function(){var h=this,m=h.getFrom(),o=h.getTo(),j=h.getDirection(),b=h.getOut(),r=h.getHalf(),c=r?90:180,f=1,a=1,q=0,p=0,g=0,d=0;if(b){a=0.8}else{f=0.8}switch(j){case this.DIRECTION_UP:if(b){g=c}else{q=-c}break;case this.DIRECTION_DOWN:if(b){g=-c}else{q=c}break;case this.DIRECTION_RIGHT:if(b){d=c}else{p=-c}break;case this.DIRECTION_LEFT:if(b){d=-c}else{p=c}break}m.setTransform({rotateX:q,rotateY:p,scale:f});o.setTransform({rotateX:g,rotateY:d,scale:a});return Ext.fx.animation.Abstract.prototype.getData.call(this)}},0,0,0,0,["animation.flip"],0,[Ext.fx.animation,"Flip"],0));(Ext.cmd.derive("Ext.fx.animation.Pop",Ext.fx.animation.Abstract,{alternateClassName:"Ext.fx.animation.PopIn",config:{out:false,before:{display:null,opacity:0},after:{opacity:null}},getData:function(){var c=this.getTo(),b=this.getFrom(),a=this.getOut();if(a){b.set("opacity",1);b.setTransform({scale:1});c.set("opacity",0);c.setTransform({scale:0})}else{b.set("opacity",0);b.setTransform({scale:0});c.set("opacity",1);c.setTransform({scale:1})}return Ext.fx.animation.Abstract.prototype.getData.apply(this,arguments)}},0,0,0,0,["animation.pop","animation.popIn"],0,[Ext.fx.animation,"Pop",Ext.fx.animation,"PopIn"],0));(Ext.cmd.derive("Ext.fx.animation.PopOut",Ext.fx.animation.Pop,{config:{out:true,before:{}}},0,0,0,0,["animation.popOut"],0,[Ext.fx.animation,"PopOut"],0));(Ext.cmd.derive("Ext.fx.Animation",Ext.Base,{constructor:function(b){var a=Ext.fx.animation.Abstract,c;if(typeof b=="string"){c=b;b={}}else{if(b&&b.type){c=b.type}}if(c){a=Ext.ClassManager.getByAlias("animation."+c)}return Ext.factory(b,a)}},1,0,0,0,0,0,[Ext.fx,"Animation"],0));(Ext.cmd.derive("Ext.fx.runner.Css",Ext.Evented,{prefixedProperties:{transform:true,"transform-origin":true,perspective:true,"transform-style":true,transition:true,"transition-property":true,"transition-duration":true,"transition-timing-function":true,"transition-delay":true,animation:true,"animation-name":true,"animation-duration":true,"animation-iteration-count":true,"animation-direction":true,"animation-timing-function":true,"animation-delay":true},lengthProperties:{top:true,right:true,bottom:true,left:true,width:true,height:true,"max-height":true,"max-width":true,"min-height":true,"min-width":true,"margin-bottom":true,"margin-left":true,"margin-right":true,"margin-top":true,"padding-bottom":true,"padding-left":true,"padding-right":true,"padding-top":true,"border-bottom-width":true,"border-left-width":true,"border-right-width":true,"border-spacing":true,"border-top-width":true,"border-width":true,"outline-width":true,"letter-spacing":true,"line-height":true,"text-indent":true,"word-spacing":true,"font-size":true,translate:true,translateX:true,translateY:true,translateZ:true,translate3d:true},durationProperties:{"transition-duration":true,"transition-delay":true,"animation-duration":true,"animation-delay":true},angleProperties:{rotate:true,rotateX:true,rotateY:true,rotateZ:true,skew:true,skewX:true,skewY:true},lengthUnitRegex:/([a-z%]*)$/,DEFAULT_UNIT_LENGTH:"px",DEFAULT_UNIT_ANGLE:"deg",DEFAULT_UNIT_DURATION:"ms",formattedNameCache:{},transformMethods3d:["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","skewX","skewY","scaleX","scaleY","scaleZ"],transformMethodsNo3d:["translateX","translateY","rotate","skewX","skewY","scaleX","scaleY"],constructor:function(){var a=this;a.transformMethods=Ext.feature.has.Css3dTransforms?a.transformMethods3d:a.transformMethodsNo3d;a.vendorPrefix=Ext.browser.getStyleDashPrefix();a.ruleStylesCache={};Ext.Evented.prototype.constructor.call(this)},getStyleSheet:function(){var c=this.styleSheet,a,b;if(!c){a=document.createElement("style");a.type="text/css";(document.head||document.getElementsByTagName("head")[0]).appendChild(a);b=document.styleSheets;this.styleSheet=c=b[b.length-1]}return c},applyRules:function(m){var h=this.getStyleSheet(),p=this.ruleStylesCache,o=h.cssRules,c,f,j,b,d,a,g;for(c in m){f=m[c];j=p[c];if(j===undefined){d=o.length;h.insertRule(c+"{}",d);j=p[c]=o.item(d).style}b=j.$cache;if(!b){b=j.$cache={}}for(a in f){g=this.formatValue(f[a],a);a=this.formatName(a);if(b[a]!==g){b[a]=g;if(g===null){j.removeProperty(a)}else{j.setProperty(a,g,"important")}}}}return this},applyStyles:function(d){var h,c,g,b,a,f;for(h in d){if(d.hasOwnProperty(h)){c=document.getElementById(h);if(!c){continue}g=c.style;b=d[h];for(a in b){if(b.hasOwnProperty(a)){f=this.formatValue(b[a],a);a=this.formatName(a);if(f===null){g.removeProperty(a)}else{g.setProperty(a,f,"important")}}}}}return this},formatName:function(b){var a=this.formattedNameCache,c=a[b];if(!c){if((Ext.os.is.Tizen||!Ext.feature.has.CssTransformNoPrefix)&&this.prefixedProperties[b]){c=this.vendorPrefix+b}else{c=b}a[b]=c}return c},formatValue:function(m,b){var h=typeof m,p=this.DEFAULT_UNIT_LENGTH,f,a,d,g,c,o,j;if(m===null){return""}if(h=="string"){if(this.lengthProperties[b]){j=m.match(this.lengthUnitRegex)[1];if(j.length>0){}else{return m+p}}return m}else{if(h=="number"){if(m==0){return"0"}if(this.lengthProperties[b]){return m+p}if(this.angleProperties[b]){return m+this.DEFAULT_UNIT_ANGLE}if(this.durationProperties[b]){return m+this.DEFAULT_UNIT_DURATION}}else{if(b==="transform"){f=this.transformMethods;c=[];for(d=0,g=f.length;d<g;d++){a=f[d];c.push(a+"("+this.formatValue(m[a],a)+")")}return c.join(" ")}else{if(Ext.isArray(m)){o=[];for(d=0,g=m.length;d<g;d++){o.push(this.formatValue(m[d],b))}return(o.length>0)?o.join(", "):"none"}}}}return m}},1,0,0,0,0,0,[Ext.fx.runner,"Css"],0));(Ext.cmd.derive("Ext.fx.runner.CssTransition",Ext.fx.runner.Css,{alternateClassName:"Ext.Animator",singleton:true,listenersAttached:false,constructor:function(){this.runningAnimationsData={};return this.callParent(arguments)},attachListeners:function(){this.listenersAttached=true;Ext.getWin().on("transitionend","onTransitionEnd",this)},onTransitionEnd:function(b){var a=b.target,c=a.id;if(c&&this.runningAnimationsData.hasOwnProperty(c)){this.refreshRunningAnimationsData(Ext.get(a),[b.browserEvent.propertyName])}},onAnimationEnd:function(h,g,d,m,r){var c=h.getId(),o=this.runningAnimationsData[c],s={},q={},b,j,f,p,a;d.un("stop","onAnimationStop",this);if(o){b=o.nameMap}s[c]=q;if(g.onBeforeEnd){g.onBeforeEnd.call(g.scope||this,h,m)}d.fireEvent("animationbeforeend",d,h,m);this.fireEvent("animationbeforeend",this,d,h,m);if(r||(!m&&!g.preserveEndState)){j=g.toPropertyNames;for(f=0,p=j.length;f<p;f++){a=j[f];if(b&&!b.hasOwnProperty(a)){q[a]=null}}}if(g.after){Ext.merge(q,g.after)}this.applyStyles(s);if(g.onEnd){g.onEnd.call(g.scope||this,h,m)}d.fireEvent("animationend",d,h,m);this.fireEvent("animationend",this,d,h,m);Ext.AnimationQueue.stop(Ext.emptyFn,d)},onAllAnimationsEnd:function(b){var c=b.getId(),a={};delete this.runningAnimationsData[c];a[c]={"transition-property":null,"transition-duration":null,"transition-timing-function":null,"transition-delay":null};this.applyStyles(a);this.fireEvent("animationallend",this,b)},hasRunningAnimations:function(a){var c=a.getId(),b=this.runningAnimationsData;return b.hasOwnProperty(c)&&b[c].sessions.length>0},refreshRunningAnimationsData:function(d,o,y,t){var h=d.getId(),u=this.runningAnimationsData,a=u[h];if(!a){return}var q=a.nameMap,w=a.nameList,b=a.sessions,g,m,f,z,p,c,v,s,r=false;y=Boolean(y);t=Boolean(t);if(!b){return this}g=b.length;if(g===0){return this}if(t){a.nameMap={};w.length=0;for(p=0;p<g;p++){c=b[p];this.onAnimationEnd(d,c.data,c.animation,y,t)}b.length=0}else{for(p=0;p<g;p++){c=b[p];v=c.map;s=c.list;for(m=0,f=o.length;m<f;m++){z=o[m];if(v[z]){delete v[z];Ext.Array.remove(s,z);c.length--;if(--q[z]==0){delete q[z];Ext.Array.remove(w,z)}}}if(c.length==0){b.splice(p,1);p--;g--;r=true;this.onAnimationEnd(d,c.data,c.animation,y)}}}if(!t&&!y&&b.length==0&&r){this.onAllAnimationsEnd(d)}},getRunningData:function(b){var a=this.runningAnimationsData;if(!a.hasOwnProperty(b)){a[b]={nameMap:{},nameList:[],sessions:[]}}return a[b]},getTestElement:function(){var c=this.testElement,b,d,a;if(!c){b=document.createElement("iframe");b.setAttribute("tabIndex",-1);a=b.style;a.setProperty("visibility","hidden","important");a.setProperty("width","0px","important");a.setProperty("height","0px","important");a.setProperty("position","absolute","important");a.setProperty("border","0px","important");a.setProperty("zIndex","-1000","important");document.body.appendChild(b);d=b.contentDocument;d.open();d.writeln("</body>");d.close();this.testElement=c=d.createElement("div");c.style.setProperty("position","absolute","important");d.body.appendChild(c);this.testElementComputedStyle=window.getComputedStyle(c)}return c},getCssStyleValue:function(b,f){var d=this.getTestElement(),a=this.testElementComputedStyle,c=d.style;c.setProperty(b,f);if(Ext.browser.is.Firefox){d.offsetHeight}f=a.getPropertyValue(b);c.removeProperty(b);return f},run:function(u){var L=this,m=L.lengthProperties,D={},K={},M={},d,y,E,f,A,O,B,v,w,a,r,G,F,t,H,p,z,h,I,N,o,g,C,s,c,J,b,q;if(!L.listenersAttached){L.attachListeners()}u=Ext.Array.from(u);for(G=0,t=u.length;G<t;G++){H=u[G];H=Ext.factory(H,Ext.fx.Animation);d=H.getElement();Ext.AnimationQueue.start(Ext.emptyFn,H);h=window.getComputedStyle(d.dom);y=d.getId();M=Ext.merge({},H.getData());if(H.onBeforeStart){H.onBeforeStart.call(H.scope||L,d)}H.fireEvent("animationstart",H);L.fireEvent("animationstart",L,H);M[y]=M;A=M.before;E=M.from;f=M.to;M.fromPropertyNames=O=[];M.toPropertyNames=B=[];for(N in f){if(f.hasOwnProperty(N)){f[N]=o=L.formatValue(f[N],N);I=L.formatName(N);s=m.hasOwnProperty(N);if(!s){o=L.getCssStyleValue(I,o)}if(E.hasOwnProperty(N)){E[N]=C=L.formatValue(E[N],N);if(!s){C=L.getCssStyleValue(I,C)}if(o!==C){O.push(I);B.push(I)}}else{g=h.getPropertyValue(I);if(o!==g){B.push(I)}}}}p=B.length;if(p===0){L.onAnimationEnd(d,M,H);continue}a=L.getRunningData(y);b=a.sessions;if(b.length>0){L.refreshRunningAnimationsData(d,Ext.Array.merge(O,B),true,M.replacePrevious)}c=a.nameMap;J=a.nameList;z={};for(F=0;F<p;F++){N=B[F];z[N]=true;if(!c.hasOwnProperty(N)){c[N]=1;J.push(N)}else{c[N]++}}q={element:d,map:z,list:B.slice(),length:p,data:M,animation:H};b.push(q);H.on("stop","onAnimationStop",L);r=Ext.apply({},A);Ext.apply(r,E);if(J.length>0){O=Ext.Array.difference(J,O);B=Ext.Array.merge(O,B);r["transition-property"]=O}D[y]=r;K[y]=Ext.apply({},f);K[y]["transition-property"]=B;K[y]["transition-duration"]=M.duration;K[y]["transition-timing-function"]=M.easing;K[y]["transition-delay"]=M.delay;H.startTime=Date.now()}w=L.$className;L.applyStyles(D);v=function(j){if(j.data===w&&j.source===window){window.removeEventListener("message",v,false);L.applyStyles(K)}};if(window.requestAnimationFrame){window.requestAnimationFrame(function(){window.addEventListener("message",v,false);window.postMessage(w,"*")})}else{Ext.defer(function(){window.addEventListener("message",v,false);window.postMessage(w,"*")},1)}},onAnimationStop:function(d){var g=this.runningAnimationsData,j,a,h,b,c,f;for(j in g){if(g.hasOwnProperty(j)){a=g[j];h=a.sessions;for(b=0,c=h.length;b<c;b++){f=h[b];if(f.animation===d){this.refreshRunningAnimationsData(f.element,f.list.slice(),false)}}}}}},1,0,0,0,0,0,[Ext.fx.runner,"CssTransition",Ext,"Animator"],0));(Ext.cmd.derive("Ext.mixin.Container",Ext.Mixin,{mixinConfig:{id:"container"},isContainer:true,config:{referenceHolder:false},getReferences:function(){Ext.ComponentManager.fixReferences();return this.refs||null},lookup:function(b){var a=this.getReferences();return(a&&a[b])||null},lookupReference:function(a){return this.lookup(a)},privates:{attachReference:function(b){var d=this,c,a;if(d.destroying||d.destroyed){return}a=d.refs||(d.refs={});c=b.referenceKey;a[c]=b},clearReference:function(b){var a=this.refs,c=b.referenceKey;if(a&&c){b.viewModelKey=b.referenceKey=a[c]=null}},containerOnAdded:function(b,a){if(a){Ext.ComponentManager.markReferencesDirty()}},containerOnRemoved:function(a){var b;if(!a){b=this.lookupReferenceHolder();if(b){Ext.ComponentManager.markReferencesDirty();b.clearReferences()}}},clearReferences:function(){this.refs=null},initContainerInheritedState:function(f,c){var h=this,b=h.getController(),j=h.getSession(),d=h.getConfig("viewModel",true),a=h.getReference(),g=h.getReferenceHolder();if(b){f.referenceHolder=b;g=true}else{if(g){f.referenceHolder=h}}if(g){f.referencePath=""}else{if(a&&h.isParentReference){f.referencePath=h.referenceKey+"."}}if(j){f.session=j}if(d){f.viewModelPath=""}else{if(a&&h.isParentReference){f.viewModelPath=h.viewModelKey+"."}}},setupReference:function(b){var a;if(b&&b.charAt(a=b.length-1)===">"){this.isParentReference=true;b=b.substring(0,a)}return b}}},0,0,0,0,0,0,[Ext.mixin,"Container"],0));(Ext.cmd.derive("Ext.perf.Accumulator",Ext.Base,function(){var c=null,h=Ext.global.chrome,d,b=function(){b=Ext.now;var o,p;if(Ext.isChrome&&h&&h.Interval){o=new h.Interval();o.start();b=function(){return o.microseconds()/1000}}else{if(window.ActiveXObject){try{p=new ActiveXObject("SenchaToolbox.Toolbox");Ext.senchaToolbox=p;b=function(){return p.milliseconds}}catch(q){}}}Ext.perf.getTimestamp=Ext.perf.Accumulator.getTimestamp=b;return b()};function j(p,o){p.sum+=o;p.min=Math.min(p.min,o);p.max=Math.max(p.max,o)}function f(r){var p=r?r:(b()-this.time),q=this,o=q.accum;++o.count;if(!--o.depth){j(o.total,p)}j(o.pure,p-q.childTime);c=q.parent;if(c){++c.accum.childCount;c.childTime+=p}}function a(){return{min:Number.MAX_VALUE,max:0,sum:0}}function m(p,o){return function(){var r=p.enter(),q=o.apply(this,arguments);r.leave();return q}}function g(q,p,o,s){var r={avg:0,min:s.min,max:s.max,sum:0};if(q){o=o||0;r.sum=s.sum-p*o;r.avg=r.sum/q}return r}return{constructor:function(o){var p=this;p.count=p.childCount=p.depth=p.maxDepth=0;p.pure=a();p.total=a();p.name=o},statics:{getTimestamp:b},format:function(o){if(!d){d=new Ext.XTemplate(["{name} - {count} call(s)",'<tpl if="count">','<tpl if="childCount">'," ({childCount} children)","</tpl>",'<tpl if="depth - 1">'," ({depth} deep)","</tpl>",'<tpl for="times">',", {type}: {[this.time(values.sum)]} msec (","avg={[this.time(values.sum / parent.count)]}",")","</tpl>","</tpl>"].join(""),{time:function(q){return Math.round(q*100)/100}})}var p=this.getData(o);p.name=this.name;p.pure.type="Pure";p.total.type="Total";p.times=[p.pure,p.total];return d.apply(p)},getData:function(o){var p=this;return{count:p.count,childCount:p.childCount,depth:p.maxDepth,pure:g(p.count,p.childCount,o,p.pure),total:g(p.count,p.childCount,o,p.total)}},enter:function(){var o=this,p={accum:o,leave:f,childTime:0,parent:c};++o.depth;if(o.maxDepth<o.depth){o.maxDepth=o.depth}c=p;p.time=b();return p},monitor:function(q,p,o){var r=this.enter();if(o){q.apply(p,o)}else{q.call(p)}r.leave()},report:function(){Ext.log(this.format())},tap:function(w,z){var y=this,r=typeof z==="string"?[z]:z,v,A,t,s,q,p,o,u;u=function(){if(typeof w==="string"){v=Ext.global;s=w.split(".");for(t=0,q=s.length;t<q;++t){v=v[s[t]]}}else{v=w}for(t=0,q=r.length;t<q;++t){p=r[t];A=p.charAt(0)==="!";if(A){p=p.substring(1)}else{A=!(p in v.prototype)}o=A?v:v.prototype;o[p]=m(y,o[p])}};Ext.ClassManager.onCreated(u,y,w);return y}}},1,0,0,0,0,0,[Ext.perf,"Accumulator"],function(){Ext.perf.getTimestamp=this.getTimestamp}));(Ext.cmd.derive("Ext.perf.Monitor",Ext.Base,{singleton:true,alternateClassName:"Ext.Perf",constructor:function(){this.accumulators=[];this.accumulatorsByName={}},calibrate:function(){var b=new Ext.perf.Accumulator("$"),g=b.total,c=Ext.perf.Accumulator.getTimestamp,f=0,h,a,d;d=c();do{h=b.enter();h.leave();++f}while(g.sum<100);a=c();return(a-d)/f},get:function(b){var c=this,a=c.accumulatorsByName[b];if(!a){c.accumulatorsByName[b]=a=new Ext.perf.Accumulator(b);c.accumulators.push(a)}return a},enter:function(a){return this.get(a).enter()},monitor:function(a,c,b){this.get(a).monitor(c,b)},report:function(){var c=this,b=c.accumulators,a=c.calibrate();b.sort(function(f,d){return(f.name<d.name)?-1:((d.name<f.name)?1:0)});c.updateGC();Ext.log("Calibration: "+Math.round(a*100)/100+" msec/sample");Ext.each(b,function(d){Ext.log(d.format(a))})},getData:function(c){var b={},a=this.accumulators;Ext.each(a,function(d){if(c||d.count){b[d.name]=d.getData()}});return b},reset:function(){Ext.each(this.accumulators,function(a){var b=a;b.count=b.childCount=b.depth=b.maxDepth=0;b.pure={min:Number.MAX_VALUE,max:0,sum:0};b.total={min:Number.MAX_VALUE,max:0,sum:0}})},updateGC:function(){var a=this.accumulatorsByName.GC,b=Ext.senchaToolbox,c;if(a){a.count=b.garbageCollectionCounter||0;if(a.count){c=a.pure;a.total.sum=c.sum=b.garbageCollectionMilliseconds;c.min=c.max=c.sum/a.count;c=a.total;c.min=c.max=c.sum/a.count}}},watchGC:function(){Ext.perf.getTimestamp();var a=Ext.senchaToolbox;if(a){this.get("GC");a.watchGarbageCollector(false)}},setup:function(c){if(!c){c={render:{"Ext.Component":"render"},layout:{"Ext.layout.Context":"run"}}}this.currentConfig=c;var d,g,b,f,a;for(d in c){if(c.hasOwnProperty(d)){g=c[d];b=Ext.Perf.get(d);for(f in g){if(g.hasOwnProperty(f)){a=g[f];b.tap(f,a)}}}}this.watchGC()},setupLog:function(c){var f,a,b,g,d;for(f in c){if(c.hasOwnProperty(f)){a=Ext.ClassManager.get(f);if(a){b=c[f];d={};for(g in b){d[g]=(function(h,j){return function(){var p,q,r,o,m;p=+Date.now();m=this.callParent(arguments);q=+Date.now()-p;if(window.console&&q>0){o=j==="this"?this:typeof j==="string"?this[j]:typeof j==="number"?arguments[j]:null;if(o){r=o.id}if(r!=null){console.log(h+" for "+r+": "+q+"ms")}else{console.log(h+" for unknown: "+q+"ms")}if(console.trace){console.trace()}}return m}})(g,b[g])}Ext.override(a,d)}}}}},1,0,0,0,0,0,[Ext.perf,"Monitor",Ext,"Perf"],0));(Ext.cmd.derive("Ext.util.ItemCollection",Ext.util.MixedCollection,{alternateClassName:"Ext.ItemCollection",getKey:function(a){return a.getItemId&&a.getItemId()},has:function(a){return this.map.hasOwnProperty(a.getId())}},0,0,0,0,0,0,[Ext.util,"ItemCollection",Ext,"ItemCollection"],0));(Ext.cmd.derive("Ext.util.TaskManager",Ext.util.TaskRunner,{alternateClassName:["Ext.TaskManager"],singleton:true},0,0,0,0,0,0,[Ext.util,"TaskManager",Ext,"TaskManager"],0));(Ext.cmd.derive("Ext.util.TextMetrics",Ext.Base,{statics:{shared:null,measure:function(a,d,f){var b=this,c=b.shared;if(!c){c=b.shared=new b(a,f)}c.bind(a);c.setFixedWidth(f||"auto");return c.getSize(d)},destroy:function(){var a=this;Ext.destroy(a.shared);a.shared=null}},constructor:function(a,d){var c=this,b=Ext.getBody().createChild({role:"presentation",cls:"x-textmetrics"});b.setVisibilityMode(1);c.measure=b;if(a){c.bind(a)}b.position("absolute");b.setLocalXY(-1000,-1000);b.hide();if(d){b.setWidth(d)}},getSize:function(c){var b=this.measure,a;b.setHtml(c);a=b.getSize();b.setHtml("");return a},bind:function(a){var b=this;b.el=Ext.get(a);b.measure.setStyle(b.el.getStyle(["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing","word-break"]))},setFixedWidth:function(a){this.measure.setWidth(a)},getWidth:function(a){this.measure.dom.style.width="auto";return this.getSize(a).width},getHeight:function(a){return this.getSize(a).height},destroy:function(){var a=this;a.el=a.measure=Ext.destroy(a.measure);a.callParent()}},1,0,0,0,0,0,[Ext.util,"TextMetrics"],function(){Ext.Element.override({getTextWidth:function(c,b,a){return Ext.Number.constrain(Ext.util.TextMetrics.measure(this.dom,Ext.valueFrom(c,this.dom.innerHTML,true)).width,b||0,a||1000000)}})}));(Ext.cmd.derive("Ext.ElementLoader",Ext.Base,{statics:{Renderer:{Html:function(a,b,c){a.getTarget().setHtml(b.responseText,c.scripts===true,c.rendererScope);return true}}},url:null,params:null,baseParams:null,autoLoad:false,target:null,loadMask:false,ajaxOptions:null,scripts:false,isLoader:true,constructor:function(b){var c=this,a;c.mixins.observable.constructor.call(c,b);c.setTarget(c.target);if(c.autoLoad){a=c.autoLoad;if(a===true){a=null}c.load(a)}},setTarget:function(b){var a=this;b=Ext.get(b);if(a.target&&a.target!==b){a.abort()}a.target=b},getTarget:function(){return this.target||null},abort:function(){var a=this.active;if(a!==undefined){Ext.Ajax.abort(a.request);if(a.mask){this.removeMask()}delete this.active}},removeMask:function(){this.target.unmask()},addMask:function(a){this.target.mask(a===true?null:a)},load:function(c){c=Ext.apply({},c);var f=this,a=Ext.isDefined(c.loadMask)?c.loadMask:f.loadMask,g=Ext.apply({},c.params),b=Ext.apply({},c.ajaxOptions),h=c.callback||f.callback,d=c.scope||f.scope||f;Ext.applyIf(b,f.ajaxOptions);Ext.applyIf(c,b);Ext.applyIf(g,f.params);Ext.apply(g,f.baseParams);Ext.applyIf(c,{url:f.url});Ext.apply(c,{scope:f,params:g,callback:f.onComplete});if(f.fireEvent("beforeload",f,c)===false){return}if(a){f.addMask(a)}f.active={options:c,mask:a,scope:d,callback:h,success:c.success||f.success,failure:c.failure||f.failure,renderer:c.renderer||f.renderer,scripts:Ext.isDefined(c.scripts)?c.scripts:f.scripts};f.active.request=Ext.Ajax.request(c);f.setOptions(f.active,c)},setOptions:function(b,a){b.rendererScope=a.rendererScope||this.rendererScope||this},onComplete:function(b,g,a){var d=this,f=d.active,h,c;if(f){c=f.scope;h=f.rendererScope;if(g){g=d.getRenderer(f.renderer).call(h,d,a,f)!==false}if(g){Ext.callback(f.success,c,[d,a,b]);d.fireEvent("load",d,a,b)}else{Ext.callback(f.failure,c,[d,a,b]);d.fireEvent("exception",d,a,b)}Ext.callback(f.callback,c,[d,g,a,b]);if(f.mask){d.removeMask()}}delete d.active},getRenderer:function(a){if(Ext.isFunction(a)){return a}return this.statics().Renderer.Html},startAutoRefresh:function(a,b){var c=this;c.stopAutoRefresh();c.autoRefresh=Ext.interval(function(){c.load(b)},a)},stopAutoRefresh:function(){clearInterval(this.autoRefresh);delete this.autoRefresh},isAutoRefreshing:function(){return Ext.isDefined(this.autoRefresh)},destroy:function(){var a=this;a.stopAutoRefresh();delete a.target;a.abort();a.callParent()}},1,0,0,0,0,[[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable]],[Ext,"ElementLoader"],0));(Ext.cmd.derive("Ext.ComponentLoader",Ext.ElementLoader,{statics:{Renderer:{Data:function(a,b,d){var f=true;try{a.getTarget().update(Ext.decode(b.responseText))}catch(c){f=false}return f},Component:function(a,c,g){var h=true,f=a.getTarget(),b=[];try{b=Ext.decode(c.responseText)}catch(d){h=false}if(h){f.suspendLayouts();if(g.removeAll){f.removeAll()}f.add(b);f.resumeLayouts(true)}return h}}},target:null,loadOnRender:false,loadMask:false,renderer:"html",setTarget:function(b){var a=this;if(Ext.isString(b)){b=Ext.getCmp(b)}if(a.target&&a.target!==b){a.abort()}a.target=b;if(b&&a.loadOnRender){if(b.rendered){a.doLoadOnRender()}else{a.mon(b,"render",a.doLoadOnRender,a)}}},doLoadOnRender:function(){var a=this.loadOnRender;this.load(Ext.isObject(a)?a:null)},removeMask:function(){this.target.setLoading(false)},addMask:function(a){this.target.setLoading(a)},setOptions:function(b,a){b.removeAll=Ext.isDefined(a.removeAll)?a.removeAll:this.removeAll;b.rendererScope=a.rendererScope||this.rendererScope||this.target},getRenderer:function(b){if(Ext.isFunction(b)){return b}var a=this.statics().Renderer;switch(b){case"component":return a.Component;case"data":return a.Data;default:return Ext.ElementLoader.Renderer.Html}}},0,0,0,0,0,0,[Ext,"ComponentLoader"],0));(Ext.cmd.derive("Ext.layout.SizeModel",Ext.Base,{constructor:function(c){var f=this,d=f.self,a=d.sizeModelsArray,b;Ext.apply(f,c);f[b=f.name]=true;f.fixed=!(f.auto=f.natural||f.shrinkWrap);a[f.ordinal=a.length]=d[b]=d.sizeModels[b]=f},statics:{sizeModelsArray:[],sizeModels:{}},calculated:false,configured:false,constrainedMax:false,constrainedMin:false,natural:false,shrinkWrap:false,calculatedFromConfigured:false,calculatedFromNatural:false,calculatedFromShrinkWrap:false,names:null},1,0,0,0,0,0,[Ext.layout,"SizeModel"],function(){var f=this,a=f.sizeModelsArray,c,b,h,g,d;new f({name:"calculated"});new f({name:"configured",names:{width:"width",height:"height"}});new f({name:"natural"});new f({name:"shrinkWrap"});new f({name:"calculatedFromConfigured",configured:true,calculatedFrom:true,names:{width:"width",height:"height"}});new f({name:"calculatedFromNatural",natural:true,calculatedFrom:true});new f({name:"calculatedFromShrinkWrap",shrinkWrap:true,calculatedFrom:true});new f({name:"constrainedMax",configured:true,constrained:true,names:{width:"maxWidth",height:"maxHeight"}});new f({name:"constrainedMin",configured:true,constrained:true,names:{width:"minWidth",height:"minHeight"}});new f({name:"constrainedDock",configured:true,constrained:true,constrainedByMin:true,names:{width:"dockConstrainedWidth",height:"dockConstrainedHeight"}});for(c=0,h=a.length;c<h;++c){d=a[c];d.pairsByHeightOrdinal=g=[];for(b=0;b<h;++b){g.push({width:d,height:a[b]})}}}));(Ext.cmd.derive("Ext.layout.Layout",Ext.Base,{factoryConfig:{type:"layout"},isLayout:true,initialized:false,running:false,needsItemSize:true,setsItemSize:true,autoSizePolicy:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},$configPrefixed:false,$configStrict:false,constructor:function(a){var b=this;b.id=Ext.id(null,b.type+"-");b.initConfig(a);delete b.type;b.layoutCount=0},beginLayout:Ext.emptyFn,beginLayoutCycle:function(c){var b=this,a=b.context,d;if(b.lastWidthModel!==c.widthModel){if(b.lastWidthModel){d=true}b.lastWidthModel=c.widthModel}if(b.lastHeightModel!==c.heightModel){if(b.lastWidthModel){d=true}b.lastHeightModel=c.heightModel}if(d){(a=c.context).clearTriggers(b,false);a.clearTriggers(b,true);b.triggerCount=0}},finishedLayout:function(a){this.lastWidthModel=a.widthModel;this.lastHeightModel=a.heightModel;this.ownerContext=null},redoLayout:Ext.emptyFn,undoLayout:Ext.emptyFn,getAnimatePolicy:function(){return this.animatePolicy},getItemSizePolicy:function(a){return this.autoSizePolicy},getScrollerEl:Ext.emptyFn,isItemBoxParent:function(a){return false},isItemLayoutRoot:function(d){var c=d.getSizeModel(),b=c.width,a=c.height;if(!d.componentLayout.lastComponentSize&&(b.calculated||a.calculated)){return false}return !b.shrinkWrap&&!a.shrinkWrap},isItemShrinkWrap:function(a){return a.shrinkWrap},isRunning:function(){return !!this.ownerContext},getItemsRenderTree:function(d,b){var h=d.length,f,g,c,a;if(h){a=[];for(f=0;f<h;++f){g=d[f];if(!g.rendered){if(b&&(b[g.id]!==undefined)){c=b[g.id]}else{this.configureItem(g);c=g.getRenderTree();if(b){b[g.id]=c}}if(c){a.push(c)}}}}return a},finishRender:Ext.emptyFn,finishRenderItems:function(f,a){var d=a.length,b,c;for(b=0;b<d;b++){c=a[b];if(c.rendering){c.finishRender(b)}}},renderChildren:function(){var b=this,a=b.getLayoutItems(),c=b.getRenderTarget();b.renderItems(a,c)},renderItems:function(a,g){var f=this,d=a.length,b=0,c;if(d){Ext.suspendLayouts();for(;b<d;b++){c=a[b];if(c&&!c.rendered){f.renderItem(c,g,b)}else{if(!f.isValidParent(c,g,b)){f.moveItem(c,g,b)}else{f.configureItem(c)}}}Ext.resumeLayouts(true)}},isValidParent:function(d,f,a){var c=(f&&f.dom)||f,b=this.getItemLayoutEl(d);if(b&&c){if(typeof a==="number"){a=this.getPositionOffset(a);return b===c.childNodes[a]}return b.parentNode===c}return false},getItemLayoutEl:function(c){var d=c.el?c.el.dom:Ext.getDom(c),a=d.parentNode,b;if(a){b=a.className;if(b&&b.indexOf("x-resizable-wrap")!==-1){d=d.parentNode}}return d},getPositionOffset:function(a){return a},configureItem:function(a){a.ownerLayout=this},renderItem:function(c,d,a){var b=this;if(!c.rendered){b.configureItem(c);c.render(d,a)}},moveItem:function(b,c,a){c=c.dom||c;if(typeof a==="number"){a=c.childNodes[a]}c.insertBefore(b.el.dom,a||null);b.container=Ext.get(c);this.configureItem(b)},onContentChange:function(){this.owner.updateLayout();return true},initLayout:function(){this.initialized=true},setOwner:function(a){this.owner=a},getLayoutItems:function(){return[]},onAdd:function(a){a.ownerLayout=this},onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,afterRemove:function(f){var d=this,c=f.el,b=d.owner,a;if(f.rendered){a=[].concat(d.itemCls||[]);if(b.itemCls){a=Ext.Array.push(a,b.itemCls)}if(a.length){c.removeCls(a)}}delete f.ownerLayout},afterCollapse:function(a,b){if(b){this.onContentChange(a)}},afterExpand:function(a,b){if(b){this.onContentChange(a)}},destroy:function(){var a=this,b;if(a.targetCls){b=a.getTarget();if(b){b.removeCls(a.targetCls)}}a.onDestroy();a.callParent()},sortWeightedItems:function(a,d){for(var b=0,c=a.length;b<c;++b){a[b].$i=b}Ext.Array.sort(a,function(g,f){var h=f.weight-g.weight;if(!h){h=g.$i-f.$i;if(g[d]){h=-h}}return h});for(b=0;b<c;++b){delete a[b].$i}}},1,0,0,0,0,[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.layout,"Layout"],function(){var a=this;a.prototype.sizeModels=a.sizeModels=Ext.layout.SizeModel.sizeModels}));(Ext.cmd.derive("Ext.layout.container.Container",Ext.layout.Layout,{alternateClassName:"Ext.layout.ContainerLayout",type:"container",beginCollapse:Ext.emptyFn,beginExpand:Ext.emptyFn,animatePolicy:null,activeItemCount:0,renderTpl:["{%this.renderBody(out,values)%}"],usesContainerHeight:true,usesContainerWidth:true,usesHeight:true,usesWidth:true,constructor:function(){Ext.layout.Layout.prototype.constructor.apply(this,arguments);this.mixins.elementCt.constructor.call(this)},destroy:function(){Ext.layout.Layout.prototype.destroy.call(this);this.mixins.elementCt.destroy.call(this)},beginLayout:function(a){Ext.layout.Layout.prototype.beginLayout.apply(this,arguments);a.targetContext=a.paddingContext=a.getEl("getTarget",this);this.cacheChildItems(a)},beginLayoutCycle:function(c,a){var b=this;Ext.layout.Layout.prototype.beginLayoutCycle.apply(this,arguments);if(a){if(b.usesContainerHeight){++c.consumersContainerHeight}if(b.usesContainerWidth){++c.consumersContainerWidth}}},cacheChildItems:function(g){var f=this,c,h,a,d,b;if(f.needsItemSize||f.setsItemSize){c=g.context;h=g.childItems=[];a=g.visibleItems=f.getVisibleItems();d=a.length;for(b=0;b<d;++b){h.push(c.getCmp(a[b]))}}},cacheElements:function(){var a=this.owner;this.attachChildEls(a.el,a)},calculate:function(c){var b=c.props,a=c.el;if(c.widthModel.shrinkWrap&&isNaN(b.width)){c.setContentWidth(a.getWidth())}if(c.heightModel.shrinkWrap&&isNaN(b.height)){c.setContentHeight(a.getHeight())}},configureItem:function(d){var c=this,f=c.itemCls,b=c.owner.itemCls,a,g;d.ownerLayout=c;if(f){if(typeof f==="string"){g=[f]}else{g=f;a=!!g}}if(b){if(a){g=Ext.Array.clone(g)}g=Ext.Array.push(g||[],b)}if(g){d.addCls(g)}},doRenderBody:function(a,b){this.renderItems(a,b);this.renderContent(a,b)},doRenderContainer:function(b,f){var c=f.$comp.layout,a=c.getRenderTpl(),d=c.getRenderData();a.applyOut(d,b)},doRenderItems:function(b,d){var c=d.$layout,a=c.getRenderTree();if(a){Ext.DomHelper.generateMarkup(a,b)}},finishRender:function(){var b=this,c,a;Ext.layout.Layout.prototype.finishRender.call(this);b.cacheElements();c=b.getRenderTarget();a=b.getLayoutItems();b.finishRenderItems(c,a)},notifyOwner:function(){this.owner.afterLayout(this)},getContainerSize:function(b,g){var c=b.targetContext,f=c.getFrameInfo(),m=b.paddingContext.getPaddingInfo(),j=0,o=0,d,h,a,p;if(!b.widthModel.shrinkWrap){++o;a=g?c.getDomProp("width"):c.getProp("width");d=(typeof a==="number");if(d){++j;a-=f.width+m.width;if(a<0){a=0}}}if(!b.heightModel.shrinkWrap){++o;p=g?c.getDomProp("height"):c.getProp("height");h=(typeof p==="number");if(h){++j;p-=f.height+m.height;if(p<0){p=0}}}return{width:a,height:p,needed:o,got:j,gotAll:j===o,gotWidth:d,gotHeight:h}},getPositionOffset:function(a){if(!this.createsInnerCt){var b=this.owner.itemNodeOffset;if(b){a+=b}}return a},getLayoutItems:function(){var a=this.owner,b=a&&a.items;return(b&&b.items)||[]},getRenderData:function(){var a=this.owner;return{$comp:a,$layout:this,ownerId:a.id}},getRenderedItems:function(){var f=this,h=f.getRenderTarget(),a=f.getLayoutItems(),d=a.length,g=[],b,c;for(b=0;b<d;b++){c=a[b];if(c.rendered&&f.isValidParent(c,h,b)){g.push(c)}}return g},getRenderTarget:function(){return this.owner.getTargetEl()},getElementTarget:function(){return this.getRenderTarget()},getRenderTpl:function(){var a=this,b=Ext.XTemplate.getTpl(this,"renderTpl");if(!b.renderContent){a.owner.setupRenderTpl(b)}return b},getRenderTree:function(){var a,c=this.owner.items,d,b={};do{d=c.generation;a=this.getItemsRenderTree(this.getLayoutItems(),b)}while(c.generation!==d);return a},renderChildren:function(){var b=this,c=b.owner.items,f=b.getRenderTarget(),d,a;do{d=c.generation;a=b.getLayoutItems();b.renderItems(a,f)}while(c.generation!==d)},getScrollbarsNeeded:function(c,j,b,h){var a=Ext.getScrollbarSize(),f=typeof c==="number",m=typeof j==="number",g=0,d=0;if(!a.width){return 0}if(m&&j<h){d=2;c-=a.width}if(f&&c<b){g=1;if(!d&&m){j-=a.height;if(j<h){d=2}}}return d+g},getTarget:function(){return this.owner.getTargetEl()},getVisibleItems:function(){var g=this.getRenderTarget(),b=this.getLayoutItems(),f=b.length,a=[],c,d;for(c=0;c<f;c++){d=b[c];if(d.rendered&&this.isValidParent(d,g,c)&&d.hidden!==true&&!d.floated){a.push(d)}}return a},getMoveAfterIndex:function(a){return this.owner.items.indexOf(a)+1},moveItemBefore:function(d,f){var a=this.owner,b=a.items,c=b.indexOf(d),g;if(d===f){return d}if(f){g=b.indexOf(f);if(c>-1&&c<g){--g}}else{g=b.length}return a.insert(g,d)},setupRenderTpl:function(a){a.renderBody=this.doRenderBody;a.renderContainer=this.doRenderContainer;a.renderItems=this.doRenderItems},getContentTarget:function(){return this.owner.getDefaultContentTarget()},onAdd:function(a){if(!a.liquidLayout){++this.activeItemCount}Ext.layout.Layout.prototype.onAdd.call(this,a)},onRemove:function(b,a){if(!b.liquidLayout){--this.activeItemCount}Ext.layout.Layout.prototype.onRemove.call(this,b,a)}},1,0,0,0,["layout.container"],[[Ext.util.ElementContainer.prototype.mixinId||Ext.util.ElementContainer.$className,Ext.util.ElementContainer]],[Ext.layout.container,"Container",Ext.layout,"ContainerLayout"],0));(Ext.cmd.derive("Ext.layout.container.Auto",Ext.layout.container.Container,{type:"autocontainer",childEls:["outerCt","innerCt"],reserveScrollbar:false,managePadding:true,manageOverflow:false,needsItemSize:false,setsItemSize:false,lastOverflowAdjust:{width:0,height:0},outerCtCls:"x-autocontainer-outerCt",innerCtCls:"x-autocontainer-innerCt",renderTpl:['<div id="{ownerId}-outerCt" data-ref="outerCt" class="{outerCtCls}" role="presentation">','<div id="{ownerId}-innerCt" data-ref="innerCt" style="{%this.renderPadding(out, values)%}" ','<tpl if="!$comp.html">role="presentation"</tpl>','class="{innerCtCls}">',"{%this.renderBody(out,values)%}","</div>","</div>"],beginLayout:function(a){Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);this.initContextItems(a)},beforeLayoutCycle:function(d){var b=this.owner,c=b.inheritedState,a=b.inheritedStateInner;if(!c||c.invalid){c=b.getInherited();a=b.inheritedStateInner}if(d.widthModel.shrinkWrap){a.inShrinkWrapTable=true}else{delete a.inShrinkWrapTable}},beginLayoutCycle:function(d){var m=this,b=m.outerCt,h=m.lastOuterCtWidth||"",g=m.lastOuterCtHeight||"",o=m.lastOuterCtTableLayout||"",a=d.state,p,f,q,c,j;Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments);f=q=c="";if(!d.widthModel.shrinkWrap){f="100%";j=m.owner.inheritedStateInner;p=m.getOverflowXStyle(d);c=(j.inShrinkWrapTable||p==="auto"||p==="scroll")?"":"fixed"}if(!d.heightModel.shrinkWrap&&!Ext.supports.PercentageHeightOverflowBug){q="100%"}if((f!==h)||m.hasOuterCtPxWidth){b.setStyle("width",f);m.lastOuterCtWidth=f;m.hasOuterCtPxWidth=false}if(c!==o){b.setStyle("table-layout",c);m.lastOuterCtTableLayout=c}if((q!==g)||m.hasOuterCtPxHeight){b.setStyle("height",q);m.lastOuterCtHeight=q;m.hasOuterCtPxHeight=false}if(m.hasInnerCtPxHeight){m.innerCt.setStyle("height","");m.hasInnerCtPxHeight=false}a.overflowAdjust=a.overflowAdjust||m.lastOverflowAdjust},calculate:function(c){var a=this,b=c.state,f=a.getContainerSize(c,true),d=b.calculatedItems||(b.calculatedItems=a.calculateItems?a.calculateItems(c,f):true);a.setCtSizeIfNeeded(c,f);if(d&&c.hasDomProp("containerChildrenSizeDone")){a.calculateContentSize(c);if(f.gotAll){if(a.manageOverflow&&!c.state.secondPass&&!a.reserveScrollbar){a.calculateOverflow(c,f)}return}}a.done=false},calculateContentSize:function(g){var f=this,a=((g.widthModel.shrinkWrap?1:0)|(g.heightModel.shrinkWrap?2:0)),c=(a&1)||undefined,h=(a&2)||undefined,d=0,b=g.props;if(c){if(isNaN(b.contentWidth)){++d}else{c=undefined}}if(h){if(isNaN(b.contentHeight)){++d}else{h=undefined}}if(d){if(c&&!g.setContentWidth(f.measureContentWidth(g))){f.done=false}if(h&&!g.setContentHeight(f.measureContentHeight(g))){f.done=false}}},calculateOverflow:function(c){var h=this,b,m,a,g,f,d,j;f=(h.getOverflowXStyle(c)==="auto");d=(h.getOverflowYStyle(c)==="auto");if(f||d){a=Ext.getScrollbarSize();j=c.overflowContext.el.dom;g=0;if(j.scrollWidth>j.clientWidth){g|=1}if(j.scrollHeight>j.clientHeight){g|=2}b=(d&&(g&2))?a.width:0;m=(f&&(g&1))?a.height:0;if(b!==h.lastOverflowAdjust.width||m!==h.lastOverflowAdjust.height){h.done=false;c.invalidate({state:{overflowAdjust:{width:b,height:m},overflowState:g,secondPass:true}})}}},completeLayout:function(a){this.lastOverflowAdjust=a.state.overflowAdjust},doRenderBody:function(c,f){var d=f.$layout,a=Ext.XTemplate,g=d.beforeBodyTpl,b=d.afterBodyTpl;if(g){a.getTpl(d,"beforeBodyTpl").applyOut(f,c)}this.renderItems(c,f);this.renderContent(c,f);if(b){a.getTpl(d,"afterBodyTpl").applyOut(f,c)}},doRenderPadding:function(b,d){var c=d.$layout,a=d.$layout.owner,f=a[a.contentPaddingProperty];if(c.managePadding&&f){b.push("padding:",a.unitizeBox(f))}},finishedLayout:function(b){var a=this.innerCt;Ext.layout.container.Container.prototype.finishedLayout.apply(this,arguments);if(Ext.isIE8){a.repaint()}if(Ext.isOpera){a.setStyle("position","relative");a.dom.scrollWidth;a.setStyle("position","")}},getContainerSize:function(b,c){var a=Ext.layout.container.Container.prototype.getContainerSize.apply(this,arguments),d=b.state.overflowAdjust;if(d){a.width-=d.width;a.height-=d.height}return a},getRenderData:function(){var a=this,b=Ext.layout.container.Container.prototype.getRenderData.call(this);b.innerCtCls=a.innerCtCls;b.outerCtCls=a.outerCtCls;return b},getRenderTarget:function(){return this.innerCt},getElementTarget:function(){return this.innerCt},getOverflowXStyle:function(a){return a.overflowXStyle||(a.overflowXStyle=this.owner.scrollFlags.overflowX||a.overflowContext.getStyle("overflow-x"))},getOverflowYStyle:function(a){return a.overflowYStyle||(a.overflowYStyle=this.owner.scrollFlags.overflowY||a.overflowContext.getStyle("overflow-y"))},initContextItems:function(b){var a=this,d=b.target,c=a.owner.getOverflowEl();b.outerCtContext=b.getEl("outerCt",a);b.innerCtContext=b.getEl("innerCt",a);b.overflowContext=(c===b.el)?b:b.getEl(c);if(d[d.contentPaddingProperty]!==undefined){b.paddingContext=b.innerCtContext}},initLayout:function(){var c=this,b=Ext.getScrollbarSize().width,a=c.owner;Ext.layout.container.Container.prototype.initLayout.call(this);if(b&&c.manageOverflow&&!c.hasOwnProperty("lastOverflowAdjust")){if(a.scrollable||c.reserveScrollbar){c.lastOverflowAdjust={width:b,height:0}}}},measureContentHeight:function(b){var a=this.outerCt.getHeight(),c=b.target;if(this.managePadding&&(c[c.contentPaddingProperty]===undefined)){a+=b.targetContext.getPaddingInfo().height}return a},measureContentWidth:function(d){var g,c,b,a,f;if(this.chromeCellMeasureBug){g=this.innerCt.dom;c=g.style;b=c.display;if(b==="table-cell"){c.display="";g.offsetWidth;c.display=b}}if(Ext.isSafari){g=this.outerCt.dom;c=g.style;c.display="table-cell";g.offsetWidth;g.style.display=""}a=this.outerCt.getWidth();f=d.target;if(this.managePadding&&(f[f.contentPaddingProperty]===undefined)){a+=d.targetContext.getPaddingInfo().width}return a},setCtSizeIfNeeded:function(d,b){var f=this,p=b.height,h=d.paddingContext.getPaddingInfo(),m=f.getTarget(),o=f.getOverflowXStyle(d),c=(o==="auto"||o==="scroll"),a=Ext.getScrollbarSize(),g,j;if(p&&!d.heightModel.shrinkWrap){if(Ext.supports.PercentageHeightOverflowBug){g=true}if(Ext.isIE8){j=true}if((g||j)&&c&&(m.dom.scrollWidth>m.dom.clientWidth)){p=Math.max(p-a.height,0)}if(g){d.outerCtContext.setProp("height",p+h.height);f.hasOuterCtPxHeight=true}if(j){d.innerCtContext.setProp("height",p);f.hasInnerCtPxHeight=true}}},setupRenderTpl:function(a){Ext.layout.container.Container.prototype.setupRenderTpl.apply(this,arguments);a.renderPadding=this.doRenderPadding},getContentTarget:function(){return this.innerCt},getScrollerEl:function(){return this.outerCt}},0,0,0,0,["layout.auto","layout.autocontainer"],0,[Ext.layout.container,"Auto"],function(){this.prototype.chromeCellMeasureBug=Ext.isChrome&&Ext.chromeVersion>=26}));(Ext.cmd.derive("Ext.ZIndexManager",Ext.Base,{alternateClassName:"Ext.WindowGroup",statics:{zBase:9000,activeCounter:0},constructor:function(a){var b=this;b.id=Ext.id(null,"zindex-mgr-");b.zIndexStack=new Ext.util.Collection({sorters:{sorterFn:function(f,d){var c=(f.alwaysOnTop||0)-(d.alwaysOnTop||0);if(!c){c=f.getActiveCounter()-d.getActiveCounter()}return c}},filters:{filterFn:function(c){return c.isVisible()}}});b.zIndexStack.addObserver(b);b.front=null;b.globalListeners=Ext.GlobalEvents.on({beforehide:b.onComponentShowHide,show:b.onComponentShowHide,scope:b,destroyable:true});if(a){if(a.isContainer){a.on("resize",b.onContainerResize,b);b.zseed=Ext.Number.from(b.rendered?a.getEl().getStyle("zIndex"):undefined,b.getNextZSeed());b.targetEl=a.getTargetEl();b.container=a}else{Ext.on("resize",b.onContainerResize,b);b.zseed=b.getNextZSeed();b.targetEl=Ext.get(a)}}else{b.zseed=b.getNextZSeed();Ext.onInternalReady(function(){Ext.on("resize",b.onContainerResize,b);b.targetEl=Ext.getBody()})}},getId:function(){return this.id},getNextZSeed:function(){return(Ext.ZIndexManager.zBase+=10000)},setBase:function(a){this.zseed=a;return this.onCollectionSort()},onCollectionSort:function(){var m=this,f=m.front,j=f&&f.containsFocus,o=m.zseed,p=m.zIndexStack.getRange(),h=p.length,d,g,c,b,q=false;for(d=0;d<h;d++){g=p[d];o=g.setZIndex(o);if(!g.hidden){b=g;if(g.modal){c=g}}}if(b!==f){if(f&&!f.destroying){f.setActive(false)}if(b){q=b.isFocusable(true)&&(b.modal||(b.focusOnToFront&&!b.preventFocusOnActivate));b.setActive(true,q)}}m.front=b;if(c){m.showModalMask(c)}else{m.hideModalMask()}return o},onComponentUpdate:function(a){if(this.zIndexStack.contains(a)){this.zIndexStack.sort()}},onComponentRender:function(a){this.zIndexStack.itemChanged(a,"hidden")},onComponentShowHide:function(a){var b=this.zIndexStack;if(a.isFloating()&&!this.hidingAll&&(b.getSource()||b).contains(a)){b.itemChanged(a,"hidden");b.sort()}},register:function(a){var b=this;if(a.zIndexManager){a.zIndexManager.unregister(a)}a.zIndexManager=b;if(!a.rendered){a.on("render",b.onComponentRender,b,{single:true})}b.zIndexStack.add(a)},unregister:function(a){var b=this;delete a.zIndexManager;a.un("render",b.onComponentRender,b);b.zIndexStack.remove(a);b.onCollectionSort()},get:function(a){return a.isComponent?a:this.zIndexStack.get(a)},bringToFront:function(b,f){var c=this,h=c.zIndexStack,a=h.last(),d,g;b=c.get(b);if(!b||h.find("alwaysOnTop",true)){return false}g=b.preventFocusOnActivate;b.preventFocusOnActivate=f;b.setActiveCounter(++Ext.ZIndexManager.activeCounter);b.preventFocusOnActivate=g;d=h.last();return(d===b&&d!==a)},sendToBack:function(a){a=this.get(a);if(a){a.setActiveCounter(0)}return a||null},hideAll:function(){var c=this.zIndexStack.getRange(),a=c.length,b;this.hidingAll=true;for(b=0;b<a;b++){c[b].hide()}this.hidingAll=false},hide:function(){var g=this,f=Ext.Element.getActiveElement(),d=g.tempHidden=g.zIndexStack.getRange(),a=d.length,c,b;g.focusRestoreElement=null;for(c=0;c<a;c++){b=d[c];if(b.el.contains(f)){g.focusRestoreElement=f}b.el.hide();b.hidden=true}},show:function(){var d=this,c,f=d.tempHidden,a=f?f.length:0,b;for(c=0;c<a;c++){b=f[c];b.el.show();b.hidden=false;b.setPosition(b.x,b.y)}d.tempHidden=null;if(d.focusRestoreElement){d.focusRestoreElement.focus()}},getActive:function(){return this.zIndexStack.last()},getBy:function(b,a){return this.zIndexStack.filterBy(b,a).getRange()},each:function(b,a){this.zIndexStack.each(b,a)},eachBottomUp:function(g,f){var b=this.zIndexStack.getRange(),d,a=b.length,c;for(d=0;d<a;d++){c=b[d];if(c.isComponent&&g.call(f||c,c)===false){return}}},eachTopDown:function(f,d){var a=this.zIndexStack.getRange(),c,b;for(c=a.length;c-->0;){b=a[c];if(b.isComponent&&f.call(d||b,b)===false){return}}},destroy:function(){var d=this,b=d.zIndexStack.getRange(),a=b.length,c;for(c=0;c<a;c++){Ext.destroy(b[c])}if(d.container){d.container.un("resize",d.onContainerResize,d)}else{if(d.targetEl){Ext.un("resize",d.onContainerResize,d)}}Ext.destroy(d.mask,d.maskShim,d.zIndexStack,d.globalListeners);d.zIndexStack=d.container=d.targetEl=d.globalListeners=null;d.callParent()},privates:{getMaskBox:function(){var a=this.mask.maskTarget;if(a.dom===document.body){return{height:Math.max(document.body.scrollHeight,Ext.dom.Element.getDocumentHeight()),width:Math.max(document.body.scrollWidth,document.documentElement.clientWidth),x:0,y:0}}else{return a.getBox()}},onContainerResize:function(){var c=this,b=c.mask,a=c.maskShim,d;if(b&&b.isVisible()){b.hide();if(a){a.hide()}d=c.getMaskBox();if(a){a.setSize(d);a.show()}b.setSize(d);b.show()}},onMaskClick:function(){if(this.front){this.front.focus()}},showModalMask:function(b){var d=this,j=b.el,h=j.getStyle("zIndex")-4,c=b.floatParent?b.floatParent.getTargetEl():b.container,a=d.mask,g=d.maskShim,f;if(!a){d.mask=a=Ext.getBody().createChild({role:"presentation",cls:"x-mask x-border-box",style:"height:0;width:0"});a.setVisibilityMode(Ext.Element.DISPLAY);a.on("click",d.onMaskClick,d)}else{d.hideModalMask()}a.maskTarget=c;f=d.getMaskBox();if(g){g.setStyle("zIndex",h);g.show();g.setBox(f)}a.setStyle("zIndex",h);c.saveTabbableState({excludeRoot:j});a.show();a.setBox(f)},hideModalMask:function(){var b=this.mask,a=this.maskShim;if(b&&b.isVisible()){b.maskTarget.restoreTabbableState();b.maskTarget=undefined;b.hide();if(a){a.hide()}}}}},1,0,0,0,0,0,[Ext,"ZIndexManager",Ext,"WindowGroup"],function(){Ext.WindowManager=Ext.WindowMgr=new this()}));(Ext.cmd.derive("Ext.container.Container",Ext.Component,{alternateClassName:["Ext.Container","Ext.AbstractContainer"],renderTpl:"{%this.renderContainer(out,values)%}",autoDestroy:true,defaultType:"panel",detachOnRemove:true,items:undefined,layout:"auto",suspendLayout:false,_applyDefaultsOptions:{defaults:true,strict:false},ariaRole:"presentation",baseCls:"x-container",layoutCounter:0,add:function(){var o=this,h=Ext.Array.slice(arguments),f=(typeof h[0]==="number")?h.shift():-1,c=o.getLayout(),d=false,q,j,b,a,r,p,g,m;if(h.length===1&&Ext.isArray(h[0])){j=h[0];q=true}else{j=h}if(o.rendered){Ext.suspendLayouts()}g=j=o.prepareItems(j,true);a=j.length;if(!q&&a===1){g=j[0]}for(b=0;b<a;b++){r=j[b];p=(f<0)?o.items.length:(f+b);m=!!r.instancedCmp;delete r.instancedCmp;if(r.floating){(o.floatingItems||(o.floatingItems=new Ext.util.ItemCollection())).add(r);r.onAdded(o,p,m);delete r.$initParent;if(o.hasListeners.add){o.fireEvent("add",o,r,p)}}else{if((!o.hasListeners.beforeadd||o.fireEvent("beforeadd",o,r,p)!==false)&&o.onBeforeAdd(r)!==false){o.items.insert(p,r);r.onAdded(o,p,m);delete r.$initParent;o.onAdd(r,p);c.onAdd(r,p);d=true;if(o.hasListeners.add){o.fireEvent("add",o,r,p)}}}}if(d){o.updateLayout()}if(o.rendered){Ext.resumeLayouts(true)}return g},onAdded:function(b,c,a){Ext.Component.prototype.onAdded.call(this,b,c,a);this.containerOnAdded(b,a)},onRemoved:function(a){this.containerOnRemoved(a);Ext.Component.prototype.onRemoved.apply(this,arguments)},afterComponentLayout:function(){var b=this.floatingItems,a,d,c;Ext.Component.prototype.afterComponentLayout.apply(this,arguments);if(b){b=b.items;a=b.length;for(d=0;d<a;d++){c=b[d];if(!c.rendered&&c.autoShow){c.show()}}}},afterLayout:function(c){var b=this,a=b.getScrollable();++b.layoutCounter;if(a&&b.layoutCounter>1){a.refresh()}if(b.hasListeners.afterlayout){b.fireEvent("afterlayout",b,c)}},beforeDestroy:function(){var b=this,a=b.items,d=b.floatingItems,f;if(a){while((f=a.first())){b.doRemove(f,true)}}if(d){while((f=d.first())){b.doRemove(f,true)}}Ext.destroy(b.layout);Ext.Component.prototype.beforeDestroy.call(this)},destroy:function(){var a=this;Ext.Component.prototype.destroy.call(this);if(a.items){a.items.destroy()}if(a.floatingItems){a.floatingItems.destroy()}a.refs=a.items=a.floatingItems=a.layout=null},beforeRender:function(){var b=this,a=b.getLayout(),c;b.preventChildDisable=true;Ext.Component.prototype.beforeRender.call(this);b.preventChildDisable=false;if(!a.initialized){a.initLayout()}c=a.targetCls;if(c){b.applyTargetCls(c)}},cascade:function(o,p,a){var m=this,f=m.items?m.items.items:[],g=f.length,d=0,j,h=a?a.concat(m):[m],b=h.length-1;if(o.apply(p||m,h)!==false){for(;d<g;d++){j=f[d];if(j.cascade){j.cascade(o,p,a)}else{h[b]=j;o.apply(p||j,h)}}}return this},contains:function(c,b){var a=false;if(b){this.cascade(function(d){if(d.contains&&d.contains(c)){a=true;return false}});return a}else{return this.items.contains(c)||(this.floatingItems&&this.floatingItems.contains(c))}},disable:function(b,h){var f=this,d=f.disabled,g,a,c;Ext.Component.prototype.disable.call(this,b,h);if(!h&&!f.preventChildDisable&&!d){g=f.getChildItemsToDisable();a=g.length;for(c=0;c<a;c++){g[c].disable(b,true)}}return f},enable:function(b,h){var f=this,d=f.disabled,g,a,c;Ext.Component.prototype.enable.call(this,b,h);if(d){g=f.getChildItemsToDisable();a=g.length;for(c=0;c<a;c++){g[c].enable(b,true)}}return f},getChildByElement:function(f,a){var h,c,b=0,d=this.getRefItems(),g=d.length;f=Ext.getDom(f);for(;b<g;b++){h=d[b];c=h.getEl();if(c&&((c.dom===f)||c.contains(f))){return(a&&h.getChildByElement)?h.getChildByElement(f,a):h}}return null},getComponent:function(b){if(Ext.isObject(b)){b=b.getItemId()}var d=this.items.get(b),a=this.floatingItems;if(!d&&a&&typeof b!=="number"){d=a.get(b)}return d},getFocusEl:function(){var a=this.getDefaultFocus();if(a){return a}else{if(this.focusable){return this.getTargetEl()}}return undefined},getLayout:function(){var b=this,a=b.layout;if(!a||!a.isLayout){b.setLayout(a)}return b.layout},getRefItems:function(c){var h=this,d=h.items.items,b=d.length,f=0,g,a=[];for(;f<b;f++){g=d[f];a[a.length]=g;if(c&&g.getRefItems){a.push.apply(a,g.getRefItems(true))}}if(h.floatingItems){d=h.floatingItems.items;b=d.length;for(f=0;f<b;f++){g=d[f];a[a.length]=g;if(c&&g.getRefItems){a.push.apply(a,g.getRefItems(true))}}}return a},getDefaultFocus:function(){var b=this.defaultFocus,a;if(b){a=this.down(b)}return a},initComponent:function(){var a=this;Ext.Component.prototype.initComponent.call(this);a.getLayout();a.constructing=true;a.initItems();if(a.disabled){a.disabled=false;a.disable(true)}delete a.constructing},initItems:function(){var b=this,a=b.items;if(!a||!a.isMixedCollection){b.items=new Ext.util.ItemCollection();if(a){if(!Ext.isArray(a)){a=[a]}b.add(a)}}},initInheritedState:function(j,c){var h=this,d=h.controller,f=h.layout,g=h.session,m=h.viewModel,b=h.reference,a=h.referenceHolder;Ext.Component.prototype.initInheritedState.call(this,j,c);if(h.collapsed){j.collapsed=true}h.initContainerInheritedState(j,c);if(f&&f.initInheritedState){f.initInheritedState(j,c)}},insert:function(c,b){var a;if(b&&b.isComponent){a=this.items.indexOf(b);if(a!==-1){return this.move(a,c)}}return this.add(c,b)},lookupComponent:function(a){if(!a.isComponent){if(typeof a==="string"){a=Ext.ComponentManager.get(a)}else{a=Ext.ComponentManager.create(a,this.defaultType)}}return a},move:function(b,f){var d=this,a=d.items,c;if(b.isComponent){b=a.indexOf(b)}c=a.getAt(b);if(b!==f){c=a.removeAt(b);if(c===false){return false}f=Math.min(f,a.getCount());a.insert(f,c);d.onMove(c,b,f);if(d.hasListeners.childmove){d.fireEvent("childmove",d,c,b,f)}d.updateLayout()}return c},moveBefore:function(a,b){if(a!==b){a=this.layout.moveItemBefore(a,b)}return a},moveAfter:function(c,d){var b=this.layout,a;if(c!==d){a=d?b.getMoveAfterIndex(d):0;c=b.moveItemBefore(c,this.items.getAt(a))}return c},nextChild:function(j,c){var g=this,d=g.items,h=d.indexOf(j),f=0,b=d.length,a;if(h!==-1){if(c){for(;f<b;f++){a=d.getAt(h+f);if(!a||Ext.ComponentQuery.is(a,c)){break}}}else{a=d.getAt(h+1)}}return a||null},onAdd:Ext.emptyFn,onBeforeAdd:function(b){var a=b.ownerCt;if(a&&a!==this){a.remove(b,false)}},onMove:Ext.emptyFn,onRemove:Ext.emptyFn,onPosition:function(){Ext.Component.prototype.onPosition.apply(this,arguments);this.repositionFloatingItems()},onResize:function(){Ext.Component.prototype.onResize.apply(this,arguments);this.repositionFloatingItems()},prevChild:function(j,c){var g=this,d=g.items,h=d.indexOf(j),f=0,b=d.length,a;if(h!==-1){if(c){for(;f<b;f++){a=d.getAt(h-f);if(!a||Ext.ComponentQuery.is(a,c)){break}}}else{a=d.getAt(h-1)}}return a||null},remove:function(b,a){var d=this,f;if(d.destroyed||d.destroying){return}f=d.getComponent(b);if(f&&(!d.hasListeners.beforeremove||d.fireEvent("beforeremove",d,f)!==false)){d.doRemove(f,a);if(d.hasListeners.remove){d.fireEvent("remove",d,f)}if(!d.destroying&&!f.floating){d.updateLayout()}}return f},removeAll:function(d){var j=this,g,b=j.floatingItems,c=[],f=0,a,h;if(b){g=j.items.items.concat(b.items)}else{g=j.items.items.slice()}a=g.length;Ext.suspendLayouts();j.removingAll=true;for(;f<a;f++){h=g[f];j.remove(h,d);if(h.ownerCt!==j){c.push(h)}}j.removingAll=false;Ext.resumeLayouts(!!a);return c},setLayout:function(f){var d=this,b=d.layout,g=b&&b.isLayout,a,c;if(typeof f==="string"){f={type:f}}c=f.type;if(g&&(!c||(c===b.type))){delete f.type;b.setConfig(f)}else{if(g){b.setOwner(null)}a=d.self.prototype.layout;if(typeof a==="string"){f.type=c||a}else{Ext.merge(Ext.merge({},a),f)}f=this.layout=Ext.Factory.layout(f);f.setOwner(this)}if(d.rendered){d.updateLayout()}},setActiveItem:function(a){return this.getLayout().setActiveItem(a)},privates:{applyDefaults:function(a){var b=this,c=b.defaults;if(c){if(Ext.isFunction(c)){c=c.call(b,a)}if(Ext.isString(a)){a=Ext.ComponentManager.get(a)}if(a.isComponent){a.setConfig(c,null,b._applyDefaultsOptions)}else{a=b.getConfigurator().merge(b,Ext.Object.fork(c),a)}}return a},applyReference:function(a){return this.setupReference(a)},applyTargetCls:function(a){this.layoutTargetCls=a},detachComponent:function(a){Ext.getDetachedBody().appendChild(a.getEl())},doRemove:function(c,b){b=b===true||(b!==false&&this.autoDestroy);var g=this,f=g.layout,a=f&&g.rendered,d=c.destroying||b,h=c.floating;if(h){g.floatingItems.remove(c)}else{g.items.remove(c)}if(a&&!h){if(f.running){Ext.Component.cancelLayout(c,d)}f.onRemove(c,d)}c.onRemoved(d);g.onRemove(c,d);if(b){c.destroy()}else{if(a&&!h){f.afterRemove(c)}if(g.detachOnRemove&&c.rendered){g.detachComponent(c)}}},finishRenderChildren:function(){Ext.Component.prototype.finishRenderChildren.call(this);var a=this.getLayout();if(a){a.finishRender()}},getChildItemsToDisable:function(){return this.query("[isFormField],[isFocusableContainer],button")},getContentTarget:function(){return this.getLayout().getContentTarget()},getDefaultContentTarget:function(){return this.el},getScrollerEl:function(){return this.layout.getScrollerEl()||Ext.Component.prototype.getScrollerEl.call(this)},prepareItems:function(b,d){if(Ext.isArray(b)){b=b.slice()}else{b=[b]}var g=this,c=0,a=b.length,f;for(;c<a;c++){f=b[c];if(f==null){Ext.Array.erase(b,c,1);--c;--a}else{if(d){f=this.applyDefaults(f)}f.$initParent=g;if(f.isComponent){f.instancedCmp=true}b[c]=g.lookupComponent(f);delete f.$initParent}}return b},repositionFloatingItems:function(){var b=this.floatingItems,a,d,c;if(b){b=b.items;a=b.length;for(d=0;d<a;d++){c=b[d];if(c.el&&!c.hidden){c.setPosition(c.x,c.y)}}}},_noMargin:{"margin-top":"","margin-right":"","margin-bottom":"","margin-left":""},resetItemMargins:function(){var a=this.items.items,c=a.length,b=this._noMargin,d;while(c--){d=a[c];d.margin$=null;d.el.setStyle(b)}},setupRenderTpl:function(a){Ext.Component.prototype.setupRenderTpl.apply(this,arguments);this.getLayout().setupRenderTpl(a)}}},0,["container"],["component","box","container"],{component:true,box:true,container:true},["widget.container"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable],[Ext.mixin.Container.prototype.mixinId||Ext.mixin.Container.$className,Ext.mixin.Container]],[Ext.container,"Container",Ext,"Container",Ext,"AbstractContainer"],0));(Ext.cmd.derive("Ext.util.StoreHolder",Ext.Base,{mixinId:"storeholder",bindStore:function(b,c,a){a=a||"store";var d=this,f=c?null:d[a];if(b!==f){if(f){d.onUnbindStore(f,c,a);if(d.isComponent&&a==="store"&&f.autoDestroy){f.destroy()}else{d.unbindStoreListeners(f)}}if(b){d[a]=b=Ext.data.StoreManager.lookup(b);d.bindStoreListeners(b);d.onBindStore(b,f)}else{d[a]=null}}return d},getStore:function(){return this.store},setStore:function(a){this.bindStore(a)},unbindStoreListeners:function(a){var b=this.storeListeners;if(b){a.un(b)}},bindStoreListeners:function(a){var b=this.getStoreListeners(a);if(b){b=Ext.apply({},b);if(!b.scope){b.scope=this}this.storeListeners=b;a.on(b)}},getStoreListeners:Ext.emptyFn,onUnbindStore:Ext.emptyFn,onBindStore:Ext.emptyFn},0,0,0,0,0,0,[Ext.util,"StoreHolder"],0));(Ext.cmd.derive("Ext.LoadMask",Ext.Component,{isLoadMask:true,msg:"Loading...",msgCls:"x-mask-loading",msgWrapCls:"x-mask-msg",useMsg:true,useTargetEl:false,cls:"x-mask",componentCls:"x-border-box",ariaRole:"status",focusable:true,tabIndex:0,autoEl:{tag:"div",role:"status"},childEls:["msgWrapEl","msgEl","msgTextEl"],renderTpl:['<div id="{id}-msgWrapEl" data-ref="msgWrapEl" class="{[values.$comp.msgWrapCls]}">','<div id="{id}-msgEl" data-ref="msgEl" class="{[values.$comp.msgCls]} ',"x-",'mask-msg-inner {childElCls}">','<div id="{id}-msgTextEl" data-ref="msgTextEl" class="',"x-","mask-msg-text",'{childElCls}">{msg}</div>',"</div>","</div>"],maskOnDisable:false,skipLayout:true,constructor:function(b){var c=this,a;if(arguments.length===2){a=c.target=b;b=arguments[1]}else{a=b.target}Ext.Component.prototype.constructor.call(this,b);if(a.isComponent){c.ownerCt=a;c.hidden=true;c.renderTo=c.getMaskTarget();c.external=c.renderTo===Ext.getBody();c.bindComponent(a)}else{a=Ext.get(a);c.isElement=true;c.renderTo=c.target}c.render(c.renderTo);if(c.store){c.bindStore(c.store,true)}},initRenderData:function(){var a=Ext.Component.prototype.initRenderData.apply(this,arguments);a.msg=this.msg||"";return a},onRender:function(){Ext.Component.prototype.onRender.apply(this,arguments);this.maskEl=this.el},bindComponent:function(a){var c=this,b={scope:this,resize:c.sizeMask};if(c.external){b.added=c.onComponentAdded;b.removed=c.onComponentRemoved;if(a.floating){b.move=c.sizeMask;c.activeOwner=a}else{if(a.ownerCt){c.onComponentAdded(a.ownerCt)}}}c.mon(a,b);if(c.external){c.mon(Ext.GlobalEvents,{show:c.onContainerShow,hide:c.onContainerHide,expand:c.onContainerExpand,collapse:c.onContainerCollapse,scope:c})}},onComponentAdded:function(a){var b=this;delete b.activeOwner;b.floatParent=a;if(!a.floating){a=a.up("[floating]")}if(a){b.activeOwner=a;b.mon(a,"move",b.sizeMask,b);b.mon(a,"tofront",b.onOwnerToFront,b)}else{b.preventBringToFront=true}a=b.floatParent.ownerCt;if(b.rendered&&b.isVisible()&&a){b.floatOwner=a;b.mon(a,"afterlayout",b.sizeMask,b,{single:true})}},onComponentRemoved:function(a){var c=this,d=c.activeOwner,b=c.floatOwner;if(d){c.mun(d,"move",c.sizeMask,c);c.mun(d,"tofront",c.onOwnerToFront,c)}if(b){c.mun(b,"afterlayout",c.sizeMask,c)}delete c.activeOwner;delete c.floatOwner},afterRender:function(){var a=this;Ext.Component.prototype.afterRender.apply(this,arguments);if(Ext.isIE){a.el.on("mousedown",a.onMouseDown,a)}this.el.skipGarbageCollection=true},onMouseDown:function(b){var a=this.el;if(b.within(a)){b.preventDefault();a.focus()}},onOwnerToFront:function(a,b){this.el.setStyle("zIndex",b+1)},onContainerShow:function(a){if(!this.isHierarchicallyHidden()){this.onComponentShow()}},onContainerHide:function(a){if(this.isHierarchicallyHidden()){this.onComponentHide()}},onContainerExpand:function(a){if(!this.isHierarchicallyHidden()){this.onComponentShow()}},onContainerCollapse:function(a){if(this.isHierarchicallyHidden()){this.onComponentHide()}},onComponentHide:function(){var a=this;if(a.rendered&&a.isVisible()){a.hide();a.showNext=true}},onComponentShow:function(){if(this.showNext){this.show()}delete this.showNext},sizeMask:function(){var b=this,c=b.activeOwner||b.target,a=b.external?b.getOwner().el:b.getMaskTarget();if(b.rendered&&b.isVisible()){if(b.external){if(!b.isElement&&c.floating){b.onOwnerToFront(c,c.el.getZIndex())}b.el.setSize(a.getSize()).alignTo(a,"tl-tl")}b.msgWrapEl.center(b.el)}},bindStore:function(a,b){var c=this;Ext.destroy(c.proxyListeners);c.mixins.storeholder.bindStore.apply(c,arguments);a=c.store;if(a){while(a.getSource){a=a.getSource()}if(!a.loadsSynchronously()){c.proxyListeners=a.getProxy().on({exception:c.onLoad,scope:c,destroyable:true})}if(a.isLoading()){c.onBeforeLoad()}}},getStoreListeners:function(b){var d=this.onLoad,c=this.onBeforeLoad,a={cachemiss:c,cachefilled:{fn:d,buffer:100}};if(!b.loadsSynchronously()){a.beforeload=c;a.load=d}return a},onDisable:function(){Ext.Component.prototype.onDisable.apply(this,arguments);if(this.loading){this.onLoad()}},getOwner:function(){return this.ownerCt||this.ownerCmp||this.floatParent},getMaskTarget:function(){var a=this.getOwner();if(this.isElement){return this.target}return this.useTargetEl?a.getTargetEl():(a.getMaskTarget()||Ext.getBody())},onBeforeLoad:function(){var c=this,a=c.getOwner(),b;if(!c.disabled){c.loading=true;if(a.componentLayoutCounter){c.maybeShow()}else{b=a.afterComponentLayout;a.afterComponentLayout=function(){a.afterComponentLayout=b;b.apply(a,arguments);c.maybeShow()}}}},maybeShow:function(){var b=this,a=b.getOwner();if(!a.isVisible(true)){b.showNext=true}else{if(b.loading&&a.rendered){b.show()}}},hide:function(){var b=this,a=b.ownerCt;if(b.isElement){a.unmask();b.fireEvent("hide",this);return}if(a){a.enableTabbing();a.setMasked(false)}delete b.showNext;return Ext.Component.prototype.hide.apply(this,arguments)},show:function(){var a=this;if(a.isElement){a.ownerCt.mask(this.useMsg?this.msg:"",this.msgCls);a.fireEvent("show",this);return}return Ext.Component.prototype.show.apply(this,arguments)},afterShow:function(){var b=this,a=b.ownerCt;b.loading=true;Ext.Component.prototype.afterShow.apply(this,arguments);a.disableTabbing();a.setMasked(true);b.el.restoreTabbableState();b.syncMaskState()},syncMaskState:function(){var c=this,b=c.ownerCt,a=c.el;if(c.isVisible()){if(c.hasOwnProperty("msgWrapCls")){a.dom.className=c.msgWrapCls}if(c.useMsg){c.msgTextEl.setHtml(c.msg)}else{c.msgEl.hide()}if(c.shim||Ext.useShims){a.enableShim(null,true)}else{a.disableShim()}if(b.el.contains(Ext.Element.getActiveElement())){c.focus()}c.sizeMask()}},onLoad:function(){this.loading=false;this.hide()},beforeDestroy:function(){this.ownerCt=null;this.bindStore(null);Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var a=this;if(a.isElement){a.ownerCt.unmask()}Ext.Component.prototype.onDestroy.call(this)}},1,["loadmask"],["component","box","loadmask"],{component:true,box:true,loadmask:true},["widget.loadmask"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext,"LoadMask"],0));(Ext.cmd.derive("Ext.layout.component.Component",Ext.layout.Layout,{type:"component",isComponentLayout:true,nullBox:{},usesContentHeight:true,usesContentWidth:true,usesHeight:true,usesWidth:true,widthCache:{},heightCache:{},beginLayoutCycle:function(d,u){var p=this,c=p.owner,h=d.ownerCtContext,j=d.heightModel,m=d.widthModel,o=c.el.dom===document.body,g=c.lastBox||p.nullBox,r=c.el.lastBox||p.nullBox,a=!o,f=d.isTopLevel,q,s,b,t;Ext.layout.Layout.prototype.beginLayoutCycle.call(this,d,u);if(u){if(p.usesContentWidth){++d.consumersContentWidth}if(p.usesContentHeight){++d.consumersContentHeight}if(p.usesWidth){++d.consumersWidth}if(p.usesHeight){++d.consumersHeight}if(h&&!h.hasRawContent){q=c.ownerLayout;if(q){if(q.usesWidth){++d.consumersWidth}if(q.usesHeight){++d.consumersHeight}}}}if(m.configured){b=c[m.names.width];if(f&&m.calculatedFrom){b=g.width}if(!o){a=p.setWidthInDom||(u?b!==r.width:m.constrained)}d.setWidth(b,a)}else{if(f){if(m.calculated){s=g.width;d.setWidth(s,s!==r.width)}s=g.x;d.setProp("x",s,s!==r.x)}}if(j.configured){t=c[j.names.height];if(f&&j.calculatedFrom){t=g.height}if(!o){a=u?t!==r.height:j.constrained}d.setHeight(t,a)}else{if(f){if(j.calculated){s=g.height;d.setHeight(s,s!==r.height)}s=g.y;d.setProp("y",s,s!==r.y)}}},finishedLayout:function(b){var h=this,m=b.children,a=h.owner,f,c,j,d,g;if(m){f=m.length;for(c=0;c<f;c++){j=m[c];j.el.lastBox=j.props}}b.previousSize=h.lastComponentSize;h.lastComponentSize=a.el.lastBox=g=b.props;d=a.lastBox||(a.lastBox={});d.x=g.x;d.y=g.y;d.width=g.width;d.height=g.height;d.invalid=false;Ext.layout.Layout.prototype.finishedLayout.call(this,b)},notifyOwner:function(c){var b=this,a=b.lastComponentSize,d=c.previousSize;b.owner.afterComponentLayout(a.width,a.height,d?d.width:undefined,d?d.height:undefined)},getTarget:function(){return this.owner.el},getRenderTarget:function(){return this.owner.el},cacheTargetInfo:function(b){var a=this,d=a.targetInfo,c;if(!d){c=b.getEl("getTarget",a);a.targetInfo=d={padding:c.getPaddingInfo(),border:c.getBorderInfo()}}return d},measureAutoDimensions:function(q,j){var z=this,a=z.owner,v=a.layout,d=q.heightModel,h=q.widthModel,c=q.boxParent,s=q.isBoxParent,A=q.target,b=q.props,m,B={gotWidth:false,gotHeight:false,isContainer:(m=!q.hasRawContent)},y=j||3,u,f,o=0,g=0,p,t,w,C,r;if(h.shrinkWrap&&q.consumersContentWidth){++o;u=!(y&1);if(m){if(u){B.contentWidth=0;B.gotWidth=true;++g}else{if((B.contentWidth=q.getProp("contentWidth"))!==undefined){B.gotWidth=true;++g}}}else{t=b.contentWidth;if(typeof t==="number"){B.contentWidth=t;B.gotWidth=true;++g}else{if(u){p=true}else{if(!q.hasDomProp("containerChildrenSizeDone")){p=false}else{if(s||!c||c.widthModel.shrinkWrap){p=true}else{p=c.hasDomProp("width")}}}if(p){if(u){w=0}else{if(v&&v.measureContentWidth){w=v.measureContentWidth(q)}else{if(A.cacheWidth){C=A.xtype+"-"+A.ui;r=z.widthCache;w=r[C]||(r[C]=z.measureContentWidth(q))}else{w=z.measureContentWidth(q)}}}if(!isNaN(B.contentWidth=w)){q.setContentWidth(w,true);B.gotWidth=true;++g}}}}}else{if(h.natural&&q.consumersWidth){++o;t=b.width;if(typeof t==="number"){B.width=t;B.gotWidth=true;++g}else{if(s||!c){p=true}else{p=c.hasDomProp("width")}if(p){if(!isNaN(B.width=z.measureOwnerWidth(q))){q.setWidth(B.width,false);B.gotWidth=true;++g}}}}}if(d.shrinkWrap&&q.consumersContentHeight){++o;f=!(y&2);if(m){if(f){B.contentHeight=0;B.gotHeight=true;++g}else{if((B.contentHeight=q.getProp("contentHeight"))!==undefined){B.gotHeight=true;++g}}}else{t=b.contentHeight;if(typeof t==="number"){B.contentHeight=t;B.gotHeight=true;++g}else{if(f){p=true}else{if(!q.hasDomProp("containerChildrenSizeDone")){p=false}else{if(a.noWrap){p=true}else{if(!h.shrinkWrap){p=(q.bodyContext||q).hasDomProp("width")}else{if(s||!c||c.widthModel.shrinkWrap){p=true}else{p=c.hasDomProp("width")}}}}}if(p){if(f){w=0}else{if(v&&v.measureContentHeight){w=v.measureContentHeight(q)}else{if(A.cacheHeight){C=A.xtype+"-"+A.ui;r=z.heightCache;w=r[C]||(r[C]=z.measureContentHeight(q))}else{w=z.measureContentHeight(q)}}}if(!isNaN(B.contentHeight=w)){q.setContentHeight(w,true);B.gotHeight=true;++g}}}}}else{if(d.natural&&q.consumersHeight){++o;t=b.height;if(typeof t==="number"){B.height=t;B.gotHeight=true;++g}else{if(s||!c){p=true}else{p=c.hasDomProp("width")}if(p){if(!isNaN(B.height=z.measureOwnerHeight(q))){q.setHeight(B.height,false);B.gotHeight=true;++g}}}}}if(c){q.onBoxMeasured()}B.gotAll=g===o;return B},measureContentWidth:function(a){return a.el.getWidth()-a.getFrameInfo().width},measureContentHeight:function(a){return a.el.getHeight()-a.getFrameInfo().height},measureOwnerHeight:function(a){return a.el.getHeight()},measureOwnerWidth:function(a){return a.el.getWidth()}},0,0,0,0,0,0,[Ext.layout.component,"Component"],0));(Ext.cmd.derive("Ext.layout.component.Auto",Ext.layout.component.Component,{type:"autocomponent",setHeightInDom:false,setWidthInDom:false,waitForOuterHeightInDom:false,waitForOuterWidthInDom:false,beginLayoutCycle:function(d,a){var c=this,g=c.lastWidthModel,f=c.lastHeightModel,b=c.owner.el;Ext.layout.component.Component.prototype.beginLayoutCycle.apply(this,arguments);if(g&&g.fixed&&d.widthModel.shrinkWrap){b.setWidth(null)}if(f&&f.fixed&&d.heightModel.shrinkWrap){b.setHeight(null)}},calculate:function(h){var g=this,f=g.measureAutoDimensions(h),b=h.heightModel,c=h.widthModel,d,a;if(f.gotWidth){if(c.shrinkWrap){g.publishOwnerWidth(h,f.contentWidth)}else{if(g.publishInnerWidth){g.publishInnerWidth(h,f.width)}}}else{if(!c.auto&&g.publishInnerWidth){d=g.waitForOuterWidthInDom?h.getDomProp("width"):h.getProp("width");if(d===undefined){g.done=false}else{g.publishInnerWidth(h,d)}}}if(f.gotHeight){if(b.shrinkWrap){g.publishOwnerHeight(h,f.contentHeight)}else{if(g.publishInnerHeight){g.publishInnerHeight(h,f.height)}}}else{if(!b.auto&&g.publishInnerHeight){a=g.waitForOuterHeightInDom?h.getDomProp("height"):h.getProp("height");if(a===undefined){g.done=false}else{g.publishInnerHeight(h,a)}}}if(!f.gotAll){g.done=false}},calculateOwnerHeightFromContentHeight:function(b,a){return a+b.getFrameInfo().height},calculateOwnerWidthFromContentWidth:function(b,a){return a+b.getFrameInfo().width},publishOwnerHeight:function(j,g){var f=this,b=f.owner,a=f.calculateOwnerHeightFromContentHeight(j,g),h,d,c;if(isNaN(a)){f.done=false}else{h=Ext.Number.constrain(a,b.minHeight,b.maxHeight);if(h===a){d=f.setHeightInDom}else{c=f.sizeModels[(h<a)?"constrainedMax":"constrainedMin"];a=h;if(j.heightModel.calculatedFromShrinkWrap){j.heightModel=c}else{j.invalidate({heightModel:c})}}j.setHeight(a,d)}},publishOwnerWidth:function(h,b){var g=this,a=g.owner,f=g.calculateOwnerWidthFromContentWidth(h,b),j,d,c;if(isNaN(f)){g.done=false}else{j=Ext.Number.constrain(f,a.minWidth,a.maxWidth);if(j===f){d=g.setWidthInDom}else{c=g.sizeModels[(j<f)?"constrainedMax":"constrainedMin"];f=j;if(h.widthModel.calculatedFromShrinkWrap){h.widthModel=c}else{h.invalidate({widthModel:c})}}h.setWidth(f,d)}}},0,0,0,0,["layout.autocomponent"],0,[Ext.layout.component,"Auto"],0));(Ext.cmd.derive("Ext.layout.component.ProgressBar",Ext.layout.component.Auto,{type:"progressbar",beginLayout:function(d){var b=this,a,c;Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);if(!d.textEls){c=b.owner.textEl;if(c.isComposite){d.textEls=[];c=c.elements;for(a=c.length;a--;){d.textEls[a]=d.getEl(Ext.get(c[a]))}}else{d.textEls=[d.getEl("textEl")]}}},calculate:function(f){var c=this,a,d,b;Ext.layout.component.Auto.prototype.calculate.apply(this,arguments);if(Ext.isNumber(b=f.getProp("width"))){b-=f.getBorderInfo().width;d=f.textEls;for(a=d.length;a--;){d[a].setWidth(b)}}else{c.done=false}}},0,0,0,0,["layout.progressbar"],0,[Ext.layout.component,"ProgressBar"],0));(Ext.cmd.derive("Ext.ProgressBar",Ext.Component,{baseCls:"x-progress",animate:false,text:"",waitTimer:null,childEls:["bar"],defaultBindProperty:"value",renderTpl:['<tpl if="internalText">','<div class="{baseCls}-text {baseCls}-text-back">{text}</div>',"</tpl>",'<div id="{id}-bar" data-ref="bar" class="{baseCls}-bar {baseCls}-bar-{ui}" role="presentation" style="width:{percentage}%">','<tpl if="internalText">','<div class="{baseCls}-text">',"<div>{text}</div>","</div>","</tpl>","</div>"],componentLayout:"progressbar",ariaRole:"progressbar",initRenderData:function(){var a=this,b=a.value||0;return Ext.apply(Ext.Component.prototype.initRenderData.call(this),{internalText:!a.hasOwnProperty("textEl"),text:a.text||"&#160;",percentage:b*100})},onRender:function(){var a=this;Ext.Component.prototype.onRender.apply(this,arguments);if(a.textEl){a.textEl=Ext.get(a.textEl);a.updateText(a.text)}else{a.textEl=a.el.select("."+a.baseCls+"-text")}},updateValue:function(a){this.updateProgress(a,Math.round(a*100)+"%")},updateProgress:function(f,g,a){f=f||0;var d=this,b=d.value,c=d.getTextTpl();d.value=f||(f=0);if(g!=null){d.updateText(g)}else{if(c){d.updateText(c.apply({value:f,percent:f*100}))}}if(d.rendered&&!d.destroyed){if(a===true||(a!==false&&d.animate)){d.bar.stopAnimation();d.bar.animate(Ext.apply({from:{width:(b*100)+"%"},to:{width:(f*100)+"%"}},d.animate))}else{d.bar.setStyle("width",(f*100)+"%")}}d.fireEvent("update",d,f,g);return d},updateText:function(b){var a=this;a.text=b;if(a.rendered){a.textEl.setHtml(a.text)}return a},applyText:function(a){this.updateText(a)},getText:function(){return this.text},wait:function(c){var b=this,a;if(!b.waitTimer){a=b;c=c||{};b.updateText(c.text);b.waitTimer=Ext.TaskManager.start({run:function(d){var f=c.increment||10;d-=1;b.updateProgress(((((d+f)%f)+1)*(100/f))*0.01,null,c.animate)},interval:c.interval||1000,duration:c.duration,onStop:function(){if(c.fn){c.fn.apply(c.scope||b)}b.reset()},scope:a})}return b},isWaiting:function(){return this.waitTimer!==null},reset:function(a){var b=this;b.updateProgress(0);b.clearTimer();if(a===true){b.hide()}return b},clearTimer:function(){var a=this;if(a.waitTimer){a.waitTimer.onStop=null;Ext.TaskManager.stop(a.waitTimer);a.waitTimer=null}},onDestroy:function(){var b=this,a=b.bar;b.clearTimer();if(b.rendered){if(b.textEl.isComposite){b.textEl.clear()}Ext.destroyMembers(b,"textEl","progressBar");if(a&&b.animate){a.stopAnimation()}}Ext.Component.prototype.onDestroy.call(this)}},0,["progressbar"],["component","box","progressbar"],{component:true,box:true,progressbar:true},["widget.progressbar"],[[Ext.ProgressBase.prototype.mixinId||Ext.ProgressBase.$className,Ext.ProgressBase]],[Ext,"ProgressBar"],0));(Ext.cmd.derive("Ext.dom.ButtonElement",Ext.dom.Element,{setSize:function(d,a,b){var f=this,c=f.component;Ext.dom.Element.prototype.setSize.call(this,d,a,b);c.btnWrap.setStyle("table-layout",(!d||d==="auto")?"":"fixed");c.btnEl.setStyle("height",(!a||a==="auto")?"":"auto");return f},setStyle:function(g,f){var d=this,b=d.component,c,a;Ext.dom.Element.prototype.setStyle.call(this,g,f);if(g){if(g==="width"||(typeof g!=="string"&&"width" in g)){c=f||g.width;b.btnWrap.setStyle("table-layout",(!c||c==="auto")?"":"fixed")}if(g==="height"||(typeof g!=="string"&&"height" in g)){a=f||g.height;b.btnEl.setStyle("height",(!a||a==="auto")?"":"auto")}}return d},setHeight:function(a,b){Ext.dom.Element.prototype.setHeight.call(this,a,b);this.component.btnEl.setStyle("height",(!a||a==="auto")?"":"auto");return this},setWidth:function(b,a){Ext.dom.Element.prototype.setWidth.call(this,b,a);this.component.btnWrap.setStyle("table-layout",(!b||b==="auto")?"":"fixed");return this}},0,0,0,0,0,0,[Ext.dom,"ButtonElement"],0));(Ext.cmd.derive("Ext.button.Manager",Ext.Base,{singleton:true,alternateClassName:"Ext.ButtonToggleManager",groups:{},pressedButton:null,init:function(){var a=this;if(!a.initialized){Ext.getDoc().on({mouseup:a.onDocumentMouseUp,scope:a});a.initialized=true}},onButtonMousedown:function(a,c){var b=this.pressedButton;if(b){b.onMouseUp(c)}this.pressedButton=a},onDocumentMouseUp:function(b){var a=this.pressedButton;if(a){a.onMouseUp(b);this.pressedButton=null}},toggleGroup:function(b,f){if(f){var d=this.groups[b.toggleGroup],c=d.length,a;for(a=0;a<c;a++){if(d[a]!==b){d[a].toggle(false)}}}},register:function(b){var c=this,a=this.groups,d=a[b.toggleGroup];c.init();if(!b.toggleGroup){return}if(!d){d=a[b.toggleGroup]=[]}d.push(b);b.on("toggle",c.toggleGroup,c)},unregister:function(a){if(!a.toggleGroup){return}var b=this,c=b.groups[a.toggleGroup];if(c){Ext.Array.remove(c,a);a.un("toggle",b.toggleGroup,b)}},getPressed:function(d){var c=this.groups[d],b=0,a;if(c){for(a=c.length;b<a;b++){if(c[b].pressed===true){return c[b]}}}return null}},0,0,0,0,0,0,[Ext.button,"Manager",Ext,"ButtonToggleManager"],0));(Ext.cmd.derive("Ext.menu.Manager",Ext.Base,{singleton:true,alternateClassName:"Ext.menu.MenuMgr",groups:{},visible:[],constructor:function(){var a=this;a.onShow=function(){delete a.onShow;Ext.on("mousedown",a.checkActiveMenus,a);return a.onShow.apply(a,arguments)}},checkActiveMenus:function(d){var g=this.visible,a=g.length,b,f,c=Ext.Component.fromElement(d.target);if(a){g=g.slice();for(b=0;b<a;++b){f=g[b];if(!(f.owns(d)||(c&&c.isMenuCheckItem&&c.menu===f))){f.hide()}}}},onShow:function(a){if(a.floating){Ext.Array.include(this.visible,a)}},onHide:function(a){if(a.floating){Ext.Array.remove(this.visible,a)}},hideAll:function(){var d=this.visible,b=d.length,a=false,c;if(b){d=d.slice();for(c=0;c<b;c++){d[c].hide();a=true}}return a},get:function(c,b){var a;if(typeof c==="string"){a=Ext.getCmp(c);if(a instanceof Ext.menu.Menu){c=a}}else{if(Ext.isArray(c)){b=Ext.apply({items:c},b);c=new Ext.menu.Menu(b)}else{if(!c.isComponent){b=Ext.apply({},c,b);c=Ext.ComponentManager.create(b,"menu")}}}return c},registerCheckable:function(c){var a=this.groups,b=c.group;if(b){if(!a[b]){a[b]=[]}a[b].push(c)}},unregisterCheckable:function(c){var a=this.groups,b=c.group;if(b){Ext.Array.remove(a[b],c)}},onCheckChange:function(d,g){var a=this.groups,c=d.group,b=0,j,f,h;if(c&&g){j=a[c];f=j.length;for(;b<f;b++){h=j[b];if(h!==d){h.setChecked(false)}}}}},1,0,0,0,0,0,[Ext.menu,"Manager",Ext.menu,"MenuMgr"],0));(Ext.cmd.derive("Ext.util.ClickRepeater",Ext.util.Observable,{constructor:function(b,a){var c=this;c.el=Ext.get(b);c.el.unselectable();Ext.apply(c,a);Ext.util.Observable.prototype.constructor.call(this);if(!c.disabled){c.disabled=true;c.enable()}if(c.handler){c.on("click",c.handler,c.scope||c)}},interval:20,delay:250,preventDefault:true,stopDefault:false,timer:0,enable:function(){if(this.disabled){this.el.on("mousedown",this.handleMouseDown,this);if(Ext.isIE8){this.el.on("dblclick",this.handleDblClick,this)}if(this.preventDefault||this.stopDefault){this.el.on("click",this.eventOptions,this)}}this.disabled=false},disable:function(a){if(a||!this.disabled){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}Ext.getDoc().un("mouseup",this.handleMouseUp,this);this.el.clearListeners()}this.disabled=true},setDisabled:function(a){this[a?"disable":"enable"]()},eventOptions:function(a){if(this.preventDefault){a.preventDefault()}if(this.stopDefault){a.stopEvent()}},destroy:function(){this.disable(true);Ext.util.Observable.prototype.destroy.call(this)},handleDblClick:function(a){clearTimeout(this.timer);this.fireEvent("mousedown",this,a);this.fireEvent("click",this,a)},handleMouseDown:function(a){clearTimeout(this.timer);if(this.pressedCls){this.el.addCls(this.pressedCls)}this.mousedownTime=new Date();Ext.getDoc().on("mouseup",this.handleMouseUp,this);this.el.on("mouseout",this.handleMouseOut,this);this.fireEvent("mousedown",this,a);this.fireEvent("click",this,a);if(this.accelerate){this.delay=400}this.timer=Ext.defer(this.click,this.delay||this.interval,this,[a]);if(this.mousedownPreventDefault){a.preventDefault()}if(this.mousedownStopEvent){a.stopEvent()}},click:function(a){this.fireEvent("click",this,a);this.timer=Ext.defer(this.click,this.accelerate?this.easeOutExpo(Ext.Date.getElapsed(this.mousedownTime),400,-390,12000):this.interval,this,[a])},easeOutExpo:function(f,a,h,g){return(f===g)?a+h:h*(-Math.pow(2,-10*f/g)+1)+a},handleMouseOut:function(){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(a){this.el.un("mouseover",this.handleMouseReturn,this);if(this.pressedCls){this.el.addCls(this.pressedCls)}this.click(a)},handleMouseUp:function(a){clearTimeout(this.timer);this.el.un("mouseover",this.handleMouseReturn,this);this.el.un("mouseout",this.handleMouseOut,this);Ext.getDoc().un("mouseup",this.handleMouseUp,this);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.fireEvent("mouseup",this,a)}},1,0,0,0,0,0,[Ext.util,"ClickRepeater"],0));(Ext.cmd.derive("Ext.button.Button",Ext.Component,{alternateClassName:"Ext.Button",config:{iconAlign:"left",text:null,textAlign:"center",arrowVisible:true},isButton:true,_syncFrameHeight:true,liquidLayout:true,hidden:false,disabled:false,pressed:false,tabIndex:0,enableToggle:false,menuAlign:"tl-bl?",showEmptyMenu:false,clickEvent:"click",preventDefault:true,handleMouseEvents:true,tooltipType:"qtip",baseCls:"x-btn",hrefTarget:"_blank",destroyMenu:true,focusable:true,ariaRole:"button",keyHandlers:{SPACE:"onEnterKey",ENTER:"onEnterKey",DOWN:"onDownKey"},defaultBindProperty:"text",childEls:["btnEl","btnWrap","btnInnerEl","btnIconEl","arrowEl"],publishes:{pressed:1},_btnWrapCls:"x-btn-wrap",_btnCls:"x-btn-button",_baseIconCls:"x-btn-icon-el",_glyphCls:"x-btn-glyph",_innerCls:"x-btn-inner",_textCls:"x-btn-text",_noTextCls:"x-btn-no-text",_hasIconCls:"x-btn-icon",_pressedCls:"x-btn-pressed",overCls:"x-btn-over",_disabledCls:"x-btn-disabled",_menuActiveCls:"x-btn-menu-active",_arrowElCls:"x-btn-arrow-el",_focusCls:"x-btn-focus",_arrowFocusCls:"x-arrow-focus",renderTpl:'<span id="{id}-btnWrap" data-ref="btnWrap" role="presentation" unselectable="on" style="{btnWrapStyle}" class="{btnWrapCls} {btnWrapCls}-{ui} {splitCls}{childElCls}"><span id="{id}-btnEl" data-ref="btnEl" role="presentation" unselectable="on" style="{btnElStyle}" class="{btnCls} {btnCls}-{ui} {textCls} {noTextCls} {hasIconCls} {iconAlignCls} {textAlignCls} {btnElAutoHeightCls}{childElCls}"><tpl if="iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl><span id="{id}-btnInnerEl" data-ref="btnInnerEl" unselectable="on" class="{innerCls} {innerCls}-{ui}{childElCls}">{text}</span><tpl if="!iconBeforeText">{[values.$comp.renderIcon(values)]}</tpl></span></span>{[values.$comp.getAfterMarkup ? values.$comp.getAfterMarkup(values) : ""]}<tpl if="closable"><span id="{id}-closeEl" data-ref="closeEl" class="{baseCls}-close-btn"><tpl if="closeText"> {closeText}</tpl></span></tpl><tpl if="split"><span id="{id}-arrowEl" class="{arrowElCls}" data-ref="arrowEl" role="button" hidefocus="on" unselectable="on"<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl><tpl foreach="arrowElAttributes"> {$}="{.}"</tpl>>{arrowElText}</span></tpl>',iconTpl:'<span id="{id}-btnIconEl" data-ref="btnIconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}{childElCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></span>',scale:"small",allowedScales:["small","medium","large"],arrowAlign:"right",arrowCls:"arrow",maskOnDisable:false,shrinkWrap:3,frame:true,autoEl:{tag:"a",hidefocus:"on",unselectable:"on"},hasFrameTable:function(){return this.href&&this.frameTable},frameTableListener:function(){if(!this.disabled){this.doNavigate()}},doNavigate:function(){if(this.hrefTarget==="_blank"){window.open(this.getHref(),this.hrefTarget)}else{location.href=this.getHref()}},_triggerRegion:{},initComponent:function(){var a=this;a.addCls("x-unselectable");Ext.Component.prototype.initComponent.call(this);if(a.menu){a.split=true;a.setMenu(a.menu,false,true)}if(a.url){a.href=a.url}a.configuredWithPreventDefault=a.hasOwnProperty("preventDefault");if(a.href&&!a.configuredWithPreventDefault){a.preventDefault=false}if(Ext.isString(a.toggleGroup)&&a.toggleGroup!==""){a.enableToggle=true}if(a.html&&!a.text){a.text=a.html;delete a.html}},getElConfig:function(){var c=this,b=Ext.Component.prototype.getElConfig.call(this),a=c.getHref(),d=c.hrefTarget;if(b.tag==="a"){if(!c.disabled){b.tabIndex=c.tabIndex}if(a){if(!c.disabled){b.href=a;if(d){b.target=d}}}}if(!c.ariaStaticRoles[c.ariaRole]){if(c.menu&&!c.isSplitButton){b["aria-haspopup"]=true}if(c.enableToggle){b["aria-pressed"]=!!c.pressed}}return b},beforeRender:function(){Ext.Component.prototype.beforeRender.call(this);if(this.pressed){this.addCls(this._pressedCls)}},initRenderData:function(){return Ext.apply(Ext.Component.prototype.initRenderData.call(this),this.getTemplateArgs())},getMenu:function(){return this.menu||null},setMenu:function(j,h,f){var g=this,b=g.menu,a=g.isSplitButton?g.arrowEl&&g.arrowEl.dom:g.ariaEl.dom,c,d;if(b&&!f){if(h!==false&&g.destroyMenu){b.destroy()}b.ownerCmp=null}if(j){c=j.isMenu;j=Ext.menu.Manager.get(j,{ownerCmp:g});j.setOwnerCmp(g,c);j.menuClickBuffer=250;g.mon(j,{scope:g,show:g.onMenuShow,hide:g.onMenuHide});if(!b&&g.getArrowVisible()){g.split=true;if(g.rendered){g._addSplitCls();g.updateLayout()}}g.menu=j;if(a){a.setAttribute("aria-haspopup",true);a.setAttribute("aria-owns",j.id)}else{d=g.isSplitButton?(g.ariaArrowElAttributes||(g.ariaArrowElAttributes={})):(g.ariaRenderAttributes||(g.ariaRenderAttributes={}));d["aria-haspopup"]=true;d["aria-owns"]=j.id}}else{if(g.rendered){a.removeAttribute("aria-haspopup");a.removeAttribute("aria-owns");g._removeSplitCls();g.updateLayout()}else{d=g.isSplitButton?g.ariaArrowElAttributes:g.ariaRenderAttributes;if(d){delete d["aria-haspopup"];delete d["aria-owns"]}}g.split=false;g.menu=null}},onRender:function(){var c=this,d,a,b;Ext.Component.prototype.onRender.apply(this,arguments);a=c.el;if(c.tooltip){c.setTooltip(c.tooltip,true)}if(c.handleMouseEvents){b={scope:c,mouseover:c.onMouseOver,mouseout:c.onMouseOut,mousedown:c.onMouseDown};if(c.split){b.mousemove=c.onMouseMove}}else{b={scope:c}}if(Ext.supports.Touch){b.touchstart=c.onTouchStart}if(c.repeat){c.mon(new Ext.util.ClickRepeater(a,Ext.isObject(c.repeat)?c.repeat:{}),"click",c.onRepeatClick,c)}else{if(b[c.clickEvent]){d=true}else{b[c.clickEvent]=c.onClick}}c.mon(a,b);if(c.hasFrameTable()){c.mon(c.frameTable,"click",c.frameTableListener,c)}if(d){c.mon(a,c.clickEvent,c.onClick,c)}Ext.button.Manager.register(c)},onFocusLeave:function(a){Ext.Component.prototype.onFocusLeave.call(this,a);if(this.menu){this.menu.hide()}},getTemplateArgs:function(){var j=this,c=j._btnCls,f=j._baseIconCls,a=j.getIconAlign(),m=j.glyph,h=Ext._glyphFontFamily,o=j.text,d=j._hasIcon(),g=j._hasIconCls,b;if(typeof m==="string"){b=m.split("@");m=b[0];h=b[1]}return{split:j.isSplitButton,innerCls:j._innerCls,splitCls:j.getArrowVisible()?j.getSplitCls():"",iconUrl:j.icon,iconCls:j.iconCls,glyph:m,glyphCls:m?j._glyphCls:"",glyphFontFamily:h,text:o||"&#160;",closeText:j.closeText,textCls:o?j._textCls:"",noTextCls:o?"":j._noTextCls,hasIconCls:d?g:"",btnWrapCls:j._btnWrapCls,btnWrapStyle:j.width?"table-layout:fixed;":"",btnElStyle:j.height?"height:auto;":"",btnCls:c,baseIconCls:f,iconBeforeText:a==="left"||a==="top",iconAlignCls:d?(g+"-"+a):"",textAlignCls:c+"-"+j.getTextAlign(),arrowElCls:j._arrowElCls,tabIndex:j.tabIndex}},renderIcon:function(a){return this.getTpl("iconTpl").apply(a)},setHref:function(a){var b=this,d=b.hrefTarget,c;b.href=a;if(!b.configuredWithPreventDefault){b.preventDefault=!a}if(b.rendered){c=b.el.dom;if(!a||b.disabled){c.removeAttribute("href");c.removeAttribute("hrefTarget")}else{c.href=b.getHref();if(d){c.target=d}}}},getHref:function(){var b=this,a=b.href;return a?Ext.urlAppend(a,Ext.Object.toQueryString(Ext.apply({},b.params,b.baseParams))):false},setParams:function(c){var a=this,b;a.params=c;if(a.rendered){b=a.el.dom;if(a.disabled){b.removeAttribute("href")}else{b.href=a.getHref()||""}}},getSplitCls:function(){var a=this;return a.split?(a.baseCls+"-"+a.arrowCls)+" "+(a.baseCls+"-"+a.arrowCls+"-"+a.arrowAlign):""},setIcon:function(b){b=b||"";var c=this,a=c.btnIconEl,d=c.icon||"";c.icon=b;if(b!==d){if(a){a.setStyle("background-image",b?"url("+b+")":"");c._syncHasIconCls();if(c.didIconStateChange(d,b)){c.updateLayout()}}c.fireEvent("iconchange",c,d,b)}return c},setIconCls:function(b){b=b||"";var d=this,a=d.btnIconEl,c=d.iconCls||"";d.iconCls=b;if(c!==b){if(a){a.removeCls(c);a.addCls(b);d._syncHasIconCls();if(d.didIconStateChange(c,b)){d.updateLayout()}}d.fireEvent("iconchange",d,c,b)}return d},setGlyph:function(g){g=g||0;var f=this,b=f.btnIconEl,c=f.glyph,h=f._glyphCls,a,d;f.glyph=g;if(b){if(typeof g==="string"){d=g.split("@");g=d[0];a=d[1]||Ext._glyphFontFamily}if(!g){b.dom.innerHTML="";b.removeCls(h)}else{if(c!==g){b.dom.innerHTML="&#"+g+";";b.addCls(h)}}if(a){b.setStyle("font-family",a)}f._syncHasIconCls();if(f.didIconStateChange(c,g)){f.updateLayout()}}f.fireEvent("glyphchange",f,f.glyph,c);return f},setTooltip:function(c,a){var b=this;if(b.rendered){if(!a||!c){b.clearTip()}if(c){if(Ext.quickTipsActive&&Ext.isObject(c)){Ext.tip.QuickTipManager.register(Ext.apply({target:b.el.id},c));b.tooltip=c}else{b.el.dom.setAttribute(b.getTipAttr(),c)}}}else{b.tooltip=c}return b},updateIconAlign:function(g,d){var c=this,b,a,f;if(c.rendered){b=c.btnEl;a=c.btnIconEl;f=c._hasIconCls;if(d){b.removeCls(f+"-"+d)}b.addCls(f+"-"+g);if(g==="top"||g==="left"){b.insertFirst(a)}else{b.appendChild(a)}c.updateLayout()}},updateTextAlign:function(f,d){var c=this,b=c.btnEl,a=c._btnCls;if(c.rendered){b.removeCls(a+"-"+d);b.addCls(a+"-"+f)}},getTipAttr:function(){return this.tooltipType==="qtip"?"data-qtip":"title"},getRefItems:function(a){var c=this.menu,b;if(c){b=c.getRefItems(a);b.unshift(c)}return b||[]},clearTip:function(){var b=this,a=b.el;if(Ext.quickTipsActive&&Ext.isObject(b.tooltip)){Ext.tip.QuickTipManager.unregister(a)}else{a.dom.removeAttribute(b.getTipAttr())}},beforeDestroy:function(){var a=this;if(a.rendered){a.clearTip()}Ext.destroy(a.repeater);Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var a=this,b=a.menu;if(a.rendered){Ext.destroy(a.keyMap);delete a.keyMap}if(b&&a.destroyMenu){a.menu=Ext.destroy(b)}Ext.button.Manager.unregister(a);Ext.Component.prototype.onDestroy.call(this)},setHandler:function(b,a){this.handler=b;if(arguments.length>1){this.scope=a}return this},updateText:function(d,a){d=d==null?"":String(d);a=a||"";var c=this,f=c.btnInnerEl,b=c.btnEl;if(c.rendered){f.setHtml(d||"&#160;");b[d?"addCls":"removeCls"](c._textCls);b[d?"removeCls":"addCls"](c._noTextCls);c.updateLayout()}c.fireEvent("textchange",c,a,d)},didIconStateChange:function(a,c){var b=Ext.isEmpty(c);return Ext.isEmpty(a)?!b:b},click:function(a){return this.onClick(a)},setPressed:function(a){return this.toggle(a!==false)},toggle:function(d,b){var c=this,a=c.ariaEl.dom;d=d===undefined?!c.pressed:!!d;if(c.fireEvent("beforetoggle",c,d)!==false){if(d!==c.pressed){c[d?"addCls":"removeCls"](c._pressedCls);c.pressed=d;if(a){a.setAttribute("aria-pressed",d)}if(!b){c.fireEvent("toggle",c,d);Ext.callback(c.toggleHandler,c.scope,[c,d],0,c);if(c.reference&&c.publishState){c.publishState("pressed",d)}}}}return c},maybeShowMenu:function(a){if(this.menu){this.showMenu(a)}},showMenu:function(a){var c=this,d=c.menu,b=!a||a.pointerType;if(d&&c.rendered){if(c.tooltip&&Ext.quickTipsActive&&c.getTipAttr()!=="title"){Ext.tip.QuickTipManager.getQuickTip().cancelShow(c.el)}if(d.isVisible()){if(b){d.hide()}else{d.focus()}}else{if(!a||c.showEmptyMenu||d.items.getCount()>0){d.autoFocus=!b;d.showBy(c.el,c.menuAlign)}}}return c},hideMenu:function(){if(this.hasVisibleMenu()){this.menu.hide()}return this},hasVisibleMenu:function(){var a=this.menu;return a&&a.rendered&&a.isVisible()},onRepeatClick:function(a,b){this.onClick(b)},onTouchStart:function(a){this.doPreventDefault(a)},onEnterKey:function(a){this.onClick(a);a.stopEvent();return false},onClick:function(b){var a=this;a.doPreventDefault(b);if(b.type!=="keydown"&&b.button){return}if(!a.disabled){a.doToggle();a.maybeShowMenu(b);a.fireHandler(b)}},doPreventDefault:function(a){if(a&&(this.preventDefault||(this.disabled&&this.getHref()))){a.preventDefault()}},fireHandler:function(b){var a=this;if(a.fireEvent("click",a,b)!==false&&!a.destroyed){Ext.callback(a.handler,a.scope,[a,b],0,a)}},doToggle:function(){var a=this;if(a.enableToggle&&(a.allowDepress!==false||!a.pressed)){a.toggle()}},onMouseOver:function(b){var a=this;if(!a.disabled&&!b.within(a.el,true,true)){a.onMouseEnter(b)}},onMouseOut:function(b){var a=this;if(!b.within(a.el,true,true)){if(a.overMenuTrigger){a.onMenuTriggerOut(b)}a.onMouseLeave(b)}},onMouseMove:function(c){var a=this,b=a.overMenuTrigger;if(a.split){if(a.isWithinTrigger(c)){if(!b){a.onMenuTriggerOver(c)}}else{if(b){a.onMenuTriggerOut(c)}}}},isWithinTrigger:function(d){var c=this,b=c.el,f,a;f=(c.arrowAlign==="right")?d.getX()-c.getX():d.getY()-b.getY();a=c.getTriggerRegion();return f>a.begin&&f<a.end},getTriggerRegion:function(){var d=this,f=d._triggerRegion,c=d.arrowAlign==="right",b=c?"getRight":"getBottom",a=c?d.getWidth():d.getHeight();f.begin=a-(d.el[b]()-d.btnEl[b]());f.end=a;return f},onMouseEnter:function(a){this.fireEvent("mouseover",this,a)},onMouseLeave:function(a){this.fireEvent("mouseout",this,a)},onMenuTriggerOver:function(c){var b=this,a=b.arrowTooltip;b.overMenuTrigger=true;if(b.split&&a){b.btnWrap.dom.setAttribute(b.getTipAttr(),a)}b.fireEvent("menutriggerover",b,b.menu,c)},onMenuTriggerOut:function(b){var a=this;delete a.overMenuTrigger;if(a.split&&a.arrowTooltip){a.btnWrap.dom.setAttribute(a.getTipAttr(),"")}a.fireEvent("menutriggerout",a,a.menu,b)},onEnable:function(){var b=this,a=b.href,d=b.hrefTarget,c=b.el.dom;Ext.Component.prototype.onEnable.call(this);b.removeCls(b._disabledCls);c.setAttribute("tabIndex",b.tabIndex);if(a){c.href=a}if(d){c.target=d}},onDisable:function(){var a=this,b=a.el.dom;Ext.Component.prototype.onDisable.call(this);a.addCls(a._disabledCls);a.removeCls(a.overCls);b.removeAttribute("tabIndex");if(a.href){b.removeAttribute("href")}if(a.hrefTarget){b.removeAttribute("target")}},setScale:function(c){var a=this,b=a.ui.replace("-"+a.scale,"");if(!Ext.Array.contains(a.allowedScales,c)){throw ("#setScale: scale must be an allowed scale ("+a.allowedScales.join(", ")+")")}a.scale=c;a.setUI(b)},setUI:function(b){var a=this;if(a.scale&&!b.match(a.scale)){b=b+"-"+a.scale}Ext.Component.prototype.setUI.call(this,b)},onMouseDown:function(b){var a=this;if(Ext.isIE||b.pointerType==="touch"){Ext.defer(function(){var c=a.getFocusEl();if(c&&!b.defaultPrevented){c.focus()}},1)}if(!a.disabled&&b.button===0){Ext.button.Manager.onButtonMousedown(a,b);a.addCls(a._pressedCls)}},onMouseUp:function(b){var a=this;if(!a.destroyed&&b.button===0){if(!a.pressed){a.removeCls(a._pressedCls)}}},onMenuShow:function(){var a=this;a.addCls(a._menuActiveCls);a.fireEvent("menushow",a,a.menu)},onMenuHide:function(b){var a=this;a.removeCls(a._menuActiveCls);a.fireEvent("menuhide",a,a.menu)},onDownKey:function(b){var a=this;if(a.menu&&!a.disabled){a.showMenu(b);b.stopEvent();return false}},updateArrowVisible:function(b){var a=this;if(a.rendered){if(b){if(a.menu||a.isSplitButton){a.split=true;a._addSplitCls()}}else{a._removeSplitCls();a.split=false}}return b},privates:{addOverCls:function(){if(!this.disabled){this.addCls(this.overCls)}},_addSplitCls:function(){var a=this;a.btnWrap.addCls(a.getSplitCls())},getTdCls:function(){return"x-button-"+this.ui+"-"+this.scale+"-cell"},removeOverCls:function(){this.removeCls(this.overCls)},_removeSplitCls:function(){var a=this;a.btnWrap.removeCls(a.getSplitCls())},_syncHasIconCls:function(){var b=this,a=b.btnEl,c=b._hasIconCls;if(a){a[b._hasIcon()?"addCls":"removeCls"]([c,c+"-"+b.iconAlign])}},_hasIcon:function(){return !!(this.icon||this.iconCls||this.glyph)},wrapPrimaryEl:function(a){this.el=new Ext.dom.ButtonElement(a);Ext.Component.prototype.wrapPrimaryEl.call(this,a)}}},0,["button"],["component","box","button"],{component:true,box:true,button:true},["widget.button"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable],[Ext.util.KeyboardInteractive.prototype.mixinId||Ext.util.KeyboardInteractive.$className,Ext.util.KeyboardInteractive]],[Ext.button,"Button",Ext,"Button"],0));(Ext.cmd.derive("Ext.panel.Bar",Ext.container.Container,{vertical:false,_verticalSides:{left:1,right:1},initComponent:function(){var b=this,a=b.vertical;b.dock=b.dock||(a?"left":"top");b.layout=Ext.apply(a?{type:"vbox",align:"middle",alignRoundingMethod:"ceil"}:{type:"hbox",align:"middle",alignRoundingMethod:"floor"},b.layout);Ext.container.Container.prototype.initComponent.call(this)},onAdded:function(b,c,a){this.initOrientation();Ext.container.Container.prototype.onAdded.call(this,b,c,a)},onRemoved:function(a){this.removeClsWithUI(this.uiCls);Ext.container.Container.prototype.onRemoved.call(this,a)},beforeRender:function(){var a=this;if(a.forceOrientation||!a.ownerCt){a.initOrientation()}Ext.container.Container.prototype.beforeRender.call(this)},setDock:function(d){var c=this,b,a;if(d!==c.dock){Ext.suspendLayouts();c.clearOrientation();Ext.container.Container.prototype.setDock.call(this,d);c.initOrientation();a=c.vertical;b=c.layout;b.setVertical(a);b.setAlignRoundingMethod(a?"ceil":"floor");Ext.resumeLayouts(true)}},privates:{clearOrientation:function(){this.removeClsWithUI([this.vertical?"vertical":"horizontal",this.getDockName()])},getDockName:function(){return this.dock},initOrientation:function(){var c=this,b=c.dock,a=(c.vertical=(b?b in c._verticalSides:c.vertical));c.addClsWithUI([a?"vertical":"horizontal",c.getDockName()])}}},0,0,["component","box","container"],{component:true,box:true,container:true},0,0,[Ext.panel,"Bar"],0));(Ext.cmd.derive("Ext.panel.Title",Ext.Component,{isTitle:true,noWrap:true,textAlign:"left",iconAlign:"left",rotation:0,text:"&#160;",beforeRenderConfig:{textAlign:null,text:null,glyph:null,icon:null,iconAlign:null,iconCls:null,rotation:null},autoEl:{role:"presentation",unselectable:"on"},textElRole:"presentation",tabIndex:0,childEls:["textEl","iconEl","iconWrapEl"],renderTpl:'<tpl if="iconMarkup && iconBeforeTitle">{iconMarkup}</tpl><div id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {itemCls}{childElCls}" unselectable="on"<tpl if="textElRole"> role="{textElRole}"</tpl>>{text}</div><tpl if="iconMarkup && !iconBeforeTitle">{iconMarkup}</tpl>',iconTpl:'<div id="{id}-iconWrapEl" data-ref="iconWrapEl" role="presentation" class="{iconWrapCls} {iconWrapCls}-{ui} {iconAlignCls} {itemCls}{childElCls}"<tpl if="iconWrapStyle"> style="{iconWrapStyle}"</tpl>><div id="{id}-iconEl" data-ref="iconEl" role="presentation" unselectable="on" class="{baseIconCls} {baseIconCls}-{ui} {iconCls} {glyphCls}" style="<tpl if="iconUrl">background-image:url({iconUrl});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></div></div>',_textAlignClasses:{left:"x-title-align-left",center:"x-title-align-center",right:"x-title-align-right"},_iconAlignClasses:{top:"x-title-icon-top",right:"x-title-icon-right",bottom:"x-title-icon-bottom",left:"x-title-icon-left"},_rotationClasses:{0:"x-title-rotate-none",1:"x-title-rotate-right",2:"x-title-rotate-left"},_rotationAngles:{1:90,2:270},baseCls:"x-title",_titleSuffix:"-title",_glyphCls:"x-title-glyph",_iconWrapCls:"x-title-icon-wrap",_baseIconCls:"x-title-icon",_itemCls:"x-title-item",_textCls:"x-title-text",afterComponentLayout:function(){var d=this,b=d.getRotation(),a,f,c;if(b&&!Ext.isIE8){c=d.el;a=d.lastBox;f=a.x;c.setStyle(d._getVerticalAdjustDirection(),(f+((b===1)?a.width:-a.height))+"px")}Ext.Component.prototype.afterComponentLayout.call(this)},onRender:function(){var c=this,a=c.getRotation(),b=c.el;Ext.Component.prototype.onRender.call(this);if(a){b.setVertical(c._rotationAngles[a])}if(Ext.supports.FixedTableWidthBug){b._needsTableWidthFix=true}},applyText:function(a){if(!a){a="&#160;"}return a},beforeRender:function(){var a=this;Ext.Component.prototype.beforeRender.call(this);a.addCls(a._rotationClasses[a.getRotation()]);a.addCls(a._textAlignClasses[a.getTextAlign()])},getIconMarkup:function(){return this.getTpl("iconTpl").apply(this.getIconRenderData())},getIconRenderData:function(){var g=this,c=g.getIcon(),b=g.getIconCls(),f=g.getGlyph(),h=Ext._glyphFontFamily,a=g.getIconAlign(),d;if(typeof f==="string"){d=f.split("@");f=d[0];h=d[1]}return{id:g.id,ui:g.ui,itemCls:g._itemCls,iconUrl:c,iconCls:b,iconWrapCls:g._iconWrapCls,baseIconCls:g._baseIconCls,iconAlignCls:g._iconAlignClasses[a],glyph:f,glyphCls:f?g._glyphCls:"",glyphFontFamily:h}},initRenderData:function(){var b=this,a,c;c=Ext.apply({text:b.getText(),textElRole:b.textElRole,id:b.id,ui:b.ui,itemCls:b._itemCls,textCls:b._textCls,iconMarkup:null,iconBeforeTitle:null},Ext.Component.prototype.initRenderData.call(this));if(b._hasIcon()){a=b.getIconAlign();c.iconMarkup=b.getIconMarkup();c.iconBeforeTitle=(a==="top"||a==="left")}return c},onAdded:function(b,g,a){var d=this,f=d._titleSuffix,c=b.baseCls;d.addCls([c+f,c+f+"-"+b.ui]);Ext.Component.prototype.onAdded.call(this,b,g,a)},updateGlyph:function(g,c){g=g||0;var f=this,h=f._glyphCls,b,a,d;f.glyph=g;if(f.rendered){f._syncIconVisibility();b=f.iconEl;if(typeof g==="string"){d=g.split("@");g=d[0];a=d[1]||Ext._glyphFontFamily}if(!g){b.dom.innerHTML="";b.removeCls(h)}else{if(c!==g){b.dom.innerHTML="&#"+g+";";b.addCls(h)}}if(a){b.setStyle("font-family",a)}if(f._didIconStateChange(c,g)){f.updateLayout()}}},updateIcon:function(b,d){b=b||"";var c=this,a;if(c.rendered&&b!==d){c._syncIconVisibility();a=c.iconEl;a.setStyle("background-image",b?"url("+b+")":"");if(c._didIconStateChange(d,b)){c.updateLayout()}}},updateIconAlign:function(g,c){var b=this,f=b.iconWrapEl,a,d;if(b.iconWrapEl){a=b.el;d=b._iconAlignClasses;if(c){f.removeCls(d[c])}f.addCls(d[g]);if(g==="top"||g==="left"){a.insertFirst(f)}else{a.appendChild(f)}b.updateLayout()}},updateIconCls:function(b,c){b=b||"";var d=this,a;if(d.rendered&&c!==b){d._syncIconVisibility();a=d.iconEl;if(c){a.removeCls(c)}a.addCls(b);if(d._didIconStateChange(c,b)){d.updateLayout()}}},updateRotation:function(b,a){var d=this,c,f;if(d.rendered){c=d.el;f=d._rotationClasses;d.removeCls(f[a]);d.addCls(f[b]);c.setHorizontal();if(b){c.setVertical(d._rotationAngles[b])}c.setStyle({right:"",left:"",top:"",height:"",width:""});d.lastBox=null;d.updateLayout()}},updateText:function(a){if(this.rendered){this.textEl.setHtml(a);this.updateLayout()}},updateTextAlign:function(d,b){var a=this,c=a._textAlignClasses;if(a.rendered){if(b){a.removeCls(c[b])}a.addCls(c[d]);a.updateLayout()}},privates:{_getVerticalAdjustDirection:function(){return"left"},_didIconStateChange:function(a,c){var b=Ext.isEmpty(c);return Ext.isEmpty(a)?!b:b},_hasIcon:function(){return !!(this.getIcon()||this.getIconCls()||this.getGlyph())},_syncIconVisibility:function(){var f=this,d=f.el,a=f._hasIcon(),g=f.iconWrapEl,c,b;if(a&&!g){b=f.iconAlign;c=(b==="left"||b==="top");d.dom.insertAdjacentHTML(c?"afterbegin":"beforeend",f.getIconMarkup());g=f.iconWrapEl=d[c?"first":"last"]();f.iconEl=g.first()}if(g){g.setDisplayed(a)}}}},0,["title"],["component","box","title"],{component:true,box:true,title:true},["widget.title"],0,[Ext.panel,"Title"],0));(Ext.cmd.derive("Ext.panel.Tool",Ext.Component,{isTool:true,baseCls:"x-tool",disabledCls:"x-tool-disabled",toolPressedCls:"x-tool-pressed",toolOverCls:"x-tool-over",childEls:["toolEl"],renderTpl:['<div id="{id}-toolEl" data-ref="toolEl" class="{baseCls}-img {baseCls}-{type}{childElCls}" role="presentation"></div>'],toolOwner:null,tooltipType:"qtip",stopEvent:true,ariaRole:"button",focusable:true,tabIndex:0,keyHandlers:{SPACE:"onClick",ENTER:"onClick"},cacheHeight:true,cacheWidth:true,initComponent:function(){var a=this;a.type=a.type||a.id;Ext.applyIf(a.renderData,{baseCls:a.baseCls,type:a.type});a.tooltip=a.tooltip||a.qtip;Ext.Component.prototype.initComponent.call(this)},afterRender:function(){var a=this,b;Ext.Component.prototype.afterRender.apply(this,arguments);a.el.on({click:a.onClick,mousedown:a.onMouseDown,mouseover:a.onMouseOver,mouseout:a.onMouseOut,scope:a});b=a.tooltip;if(b){a.setTooltip(b)}},tipAttrs:{qtip:"data-qtip"},setTooltip:function(h,d){var f=this,b=f.tooltip,g=f.tooltipType,j=f.id,c=f.el,a;if(b&&Ext.quickTipsActive&&Ext.isObject(b)){Ext.tip.QuickTipManager.unregister(j)}f.tooltip=h;if(d){f.tooltipType=d}if(h){if(Ext.quickTipsActive&&Ext.isObject(h)){Ext.tip.QuickTipManager.register(Ext.apply({target:j},h))}else{if(c){if(d&&g&&d!==g){a=f.tipAttrs[g]||"title";c.dom.removeAttribute(a)}a=f.tipAttrs[d||g]||"title";c.dom.setAttribute(a,h)}}if(a!=="title"&&f.ariaRole&&f.ariaRole!=="presentation"){if(c){c.dom.setAttribute("aria-label",h)}else{f.ariaRenderAttributes=f.ariaRenderAttributes||{};f.ariaRenderAttributes["aria-label"]=h}}}},setType:function(a){var b=this,c=b.type;b.type=a;if(b.rendered){if(c){b.toolEl.removeCls(b.baseCls+"-"+c)}b.toolEl.addCls(b.baseCls+"-"+a)}else{b.renderData.type=a}return b},onDestroy:function(){var a=this,b=a.keyMap;a.setTooltip(null);delete a.toolOwner;Ext.Component.prototype.onDestroy.call(this)},privates:{onClick:function(c,b){var a=this;if(a.disabled){return false}if(c.type!=="keydown"){a.el.removeCls(a.toolPressedCls+" "+a.toolOverCls)}if(a.stopEvent!==false){c.stopEvent()}if(a.handler){Ext.callback(a.handler,a.scope,[c,b,a.ownerCt,a],0,a)}else{if(a.callback){Ext.callback(a.callback,a.scope,[a.toolOwner||a.ownerCt,a,c],0,a)}}a.fireEvent("click",a,c,a.toolOwner||a.ownerCt);return true},onMouseDown:function(a){a.preventDefault();if(this.disabled){return false}this.el.addCls(this.toolPressedCls)},onMouseOver:function(){if(this.disabled){return false}this.el.addCls(this.toolOverCls)},onMouseOut:function(){this.el.removeCls(this.toolOverCls)}}},0,["tool"],["component","box","tool"],{component:true,box:true,tool:true},["widget.tool"],0,[Ext.panel,"Tool"],0));(Ext.cmd.derive("Ext.util.KeyMap",Ext.Base,{alternateClassName:"Ext.KeyMap",eventName:"keydown",constructor:function(a){var b=this;if((arguments.length!==1)||(typeof a==="string")||a.dom||a.tagName||a===document||a.isComponent){b.legacyConstructor.apply(b,arguments);return}Ext.apply(b,a);b.bindings=[];if(!b.target.isComponent){b.target=Ext.get(b.target)}if(b.binding){b.addBinding(b.binding)}else{if(a.key){b.addBinding(a)}}b.enable()},legacyConstructor:function(b,d,a){var c=this;Ext.apply(c,{target:Ext.get(b),eventName:a||c.eventName,bindings:[]});if(d){c.addBinding(d)}c.enable()},addBinding:function(f){var c=this,d=f.key,b,a;if(c.processing){c.bindings=c.bindings.slice(0)}if(Ext.isArray(f)){for(b=0,a=f.length;b<a;b++){c.addBinding(f[b])}return}c.bindings.push(Ext.apply({keyCode:c.processKeys(d)},f))},removeBinding:function(g){var f=this,h=f.bindings,a=h.length,b,d,c;if(f.processing){f.bindings=h.slice(0)}c=f.processKeys(g.key);for(b=0;b<a;++b){d=h[b];if((d.fn||d.handler)===(g.fn||g.handler)&&d.scope===g.scope){if(g.alt===d.alt&&g.crtl===d.crtl&&g.shift===d.shift){if(Ext.Array.equals(d.keyCode,c)){Ext.Array.erase(f.bindings,b,1);return}}}}},processKeys:function(g){var h=false,d,f,b,a,c;if(g.test){return g}if(Ext.isString(g)){f=[];b=g.toUpperCase();for(c=0,a=b.length;c<a;++c){f.push(b.charCodeAt(c))}g=f;h=true}if(!Ext.isArray(g)){g=[g]}if(!h){for(c=0,a=g.length;c<a;++c){d=g[c];if(Ext.isString(d)){g[c]=d.toUpperCase().charCodeAt(0)}}}return g},handleTargetEvent:function(f){var d=this,g,c,b,a;if(d.enabled){g=d.bindings;c=0;b=g.length;f=d.processEvent.apply(d.processEventScope||d,arguments);if(f){d.lastKeyEvent=f;if(d.ignoreInputFields&&Ext.fly(f.target).isInputField()){return}if(!f.getKey){return f}d.processing=true;for(;c<b;++c){a=d.processBinding(g[c],f);if(a===false){d.processing=false;return a}}d.processing=false}}},processEvent:Ext.identityFn,processBinding:function(f,a){if(this.checkModifiers(f,a)){var g=a.getKey(),j=f.fn||f.handler,m=f.scope||this,h=f.keyCode,b=f.defaultEventAction,c,d,o;if(h.test){if(h.test(String.fromCharCode(a.getCharCode()))){o=j.call(m,g,a);if(o!==true&&b){a[b]()}if(o===false){return o}}}else{if(h.length){for(c=0,d=h.length;c<d;++c){if(g===h[c]){o=j.call(m,g,a);if(o!==true&&b){a[b]()}if(o===false){return o}break}}}}}},checkModifiers:function(h,f){var d=["shift","ctrl","alt"],c=0,a=d.length,g,b;for(;c<a;++c){b=d[c];g=h[b];if(!(g===undefined||(g===f[b+"Key"]))){return false}}return true},on:function(b,d,c){var h,a,f,g;if(Ext.isObject(b)&&!Ext.isArray(b)){h=b.key;a=b.shift;f=b.ctrl;g=b.alt}else{h=b}this.addBinding({key:h,shift:a,ctrl:f,alt:g,fn:d,scope:c})},un:function(b,d,c){var h,a,f,g;if(Ext.isObject(b)&&!Ext.isArray(b)){h=b.key;a=b.shift;f=b.ctrl;g=b.alt}else{h=b}this.removeBinding({key:h,shift:a,ctrl:f,alt:g,fn:d,scope:c})},isEnabled:function(){return this.enabled},enable:function(){var a=this;if(!a.enabled){a.target.on(a.eventName,a.handleTargetEvent,a,{capture:a.capture,priority:a.priority});a.enabled=true}},disable:function(){var a=this;if(a.enabled){a.target.removeListener(a.eventName,a.handleTargetEvent,a);a.enabled=false}},setDisabled:function(a){if(a){this.disable()}else{this.enable()}},destroy:function(c){var a=this,b=a.target;a.bindings=[];a.disable();if(c){b.destroy()}delete a.target;a.callParent()}},1,0,0,0,0,0,[Ext.util,"KeyMap",Ext,"KeyMap"],0));(Ext.cmd.derive("Ext.util.KeyNav",Ext.Base,{alternateClassName:"Ext.KeyNav",disabled:false,defaultEventAction:false,forceKeyDown:false,eventName:"keypress",statics:{keyOptions:{left:37,right:39,up:38,down:40,space:32,pageUp:33,pageDown:34,del:46,backspace:8,home:36,end:35,enter:13,esc:27,tab:9}},constructor:function(a){var b=this;if(arguments.length===2){b.legacyConstructor.apply(b,arguments);return}b.doConstruction(a)},legacyConstructor:function(b,a){this.doConstruction(Ext.apply({target:b},a))},doConstruction:function(a){var c=this,b={target:a.target,ignoreInputFields:a.ignoreInputFields,eventName:c.getKeyEvent("forceKeyDown" in a?a.forceKeyDown:c.forceKeyDown,a.eventName),capture:a.capture},d;if(c.map){c.map.destroy()}c.initConfig(a);if(a.processEvent){b.processEvent=a.processEvent;b.processEventScope=a.processEventScope||c}if(a.priority){b.priority=a.priority}if(a.keyMap){d=c.map=a.keyMap}else{d=c.map=new Ext.util.KeyMap(b);c.destroyKeyMap=true}this.addBindings(a);d.disable();if(!a.disabled){d.enable()}},addBindings:function(j){var c=this,b,g,f=c.map,a=Ext.util.KeyNav.keyOptions,d,h=j.scope||c;for(b in j){g=j[b];d=a[b];if(d!=null){b=d}if(g&&(b.length===1||!isNaN(b=parseInt(b,10)))){if(typeof g==="function"){g={handler:g,defaultEventAction:(j.defaultEventAction!==undefined)?j.defaultEventAction:c.defaultEventAction}}f.addBinding({key:b,ctrl:g.ctrl,shift:g.shift,alt:g.alt,handler:Ext.Function.bind(c.handleEvent,g.scope||h,[g.handler||g.fn,c],true),defaultEventAction:(g.defaultEventAction!==undefined)?g.defaultEventAction:c.defaultEventAction})}}},handleEvent:function(d,c,b,a){a.lastKeyEvent=c;return b.call(this,c)},destroy:function(b){var a=this;if(a.destroyKeyMap){a.map.destroy(b)}delete a.map;a.callParent()},enable:function(){if(this.map){this.map.enable();this.disabled=false}},disable:function(){if(this.map){this.map.disable()}this.disabled=true},setDisabled:function(a){this.map.setDisabled(a);this.disabled=a},getKeyEvent:function(b,a){if(b||(Ext.supports.SpecialKeyDownRepeat&&!a)){return"keydown"}else{return a||this.eventName}}},1,0,0,0,0,0,[Ext.util,"KeyNav",Ext,"KeyNav"],0));(Ext.cmd.derive("Ext.util.FocusableContainer",Ext.Mixin,{mixinConfig:{id:"focusablecontainer",before:{onAdd:"onFocusableChildAdd",onRemove:"onFocusableChildRemove",destroy:"destroyFocusableContainer",onFocusEnter:"onFocusEnter"},after:{afterRender:"initFocusableContainer",onFocusLeave:"onFocusLeave",afterShow:"activateFocusableContainerEl"}},isFocusableContainer:true,enableFocusableContainer:true,activeChildTabIndex:0,inactiveChildTabIndex:-1,privates:{initFocusableContainer:function(c){var b,d,a;if(this.enableFocusableContainer){c=c!=null?c:true;this.doInitFocusableContainer(c)}else{b=this.getFocusables();for(d=0,a=b.length;d<a;d++){b[d].focusableContainer=null}}},doInitFocusableContainer:function(a){var c=this,b,d;b=c.getFocusableContainerEl();if(a){c.clearFocusables()}d=c.findNextFocusableChild({step:1,beforeRender:true});if(d){c.activateFocusableContainerEl(b)}c.focusableContainerMouseListener=c.mon(b,"mousedown",c.onFocusableContainerMousedown,c);c.focusableKeyNav=c.createFocusableContainerKeyNav(b)},createFocusableContainerKeyNav:function(a){var b=this;return new Ext.util.KeyNav(a,{eventName:"keydown",ignoreInputFields:true,scope:b,tab:b.onFocusableContainerTabKey,enter:b.onFocusableContainerEnterKey,space:b.onFocusableContainerSpaceKey,up:b.onFocusableContainerUpKey,down:b.onFocusableContainerDownKey,left:b.onFocusableContainerLeftKey,right:b.onFocusableContainerRightKey})},destroyFocusableContainer:function(){if(this.enableFocusableContainer){this.doDestroyFocusableContainer()}},doDestroyFocusableContainer:function(){var a=this;if(a.keyNav){a.keyNav.destroy()}if(a.focusableContainerMouseListener){a.focusableContainerMouseListener.destroy()}a.focusableKeyNav=a.focusableContainerMouseListener=null},getFocusables:function(){return this.items.items},initDefaultFocusable:function(m){var g=this,j=g.activeChildTabIndex,c=false,f,h,b,d,a;f=g.getFocusables();d=f.length;if(!d){return}for(b=0;b<d;b++){h=f[b];if(h.focusable&&!h.disabled){c=true;a=h.getTabIndex();if(a!=null&&a>=j){return h}}}if(!c){return}h=g.findNextFocusableChild({beforeRender:m,items:f,step:true});if(h){g.activateFocusable(h)}return h},clearFocusables:function(){var f=this,b=f.getFocusables(),a=b.length,d,c;for(c=0;c<a;c++){d=b[c];if(d.focusable&&!d.disabled){f.deactivateFocusable(d)}}},activateFocusable:function(c,b){var a=b!=null?b:this.activeChildTabIndex;c.setTabIndex(a)},deactivateFocusable:function(c,b){var a=b!=null?b:this.inactiveChildTabIndex;c.setTabIndex(a)},onFocusableContainerTabKey:function(){return true},onFocusableContainerEnterKey:function(){return true},onFocusableContainerSpaceKey:function(){return true},onFocusableContainerUpKey:function(a){a.preventDefault();return this.moveChildFocus(a,false)},onFocusableContainerDownKey:function(a){a.preventDefault();return this.moveChildFocus(a,true)},onFocusableContainerLeftKey:function(a){a.preventDefault();return this.moveChildFocus(a,false)},onFocusableContainerRightKey:function(a){a.preventDefault();return this.moveChildFocus(a,true)},getFocusableFromEvent:function(a){var b=Ext.Component.fromElement(a.getTarget());return b},moveChildFocus:function(b,a){var c=this.getFocusableFromEvent(b);return this.focusChild(c,a,b)},focusChild:function(c,a){var b=this.findNextFocusableChild({child:c,step:a});if(b){b.focus()}return b},findNextFocusableChild:function(m){var j=m.beforeRender,f,h,a,b,g,c,d;f=m.items||this.getFocusables();b=m.step!=null?m.step:1;a=m.child;g=Ext.Array.indexOf(f,a);b=b===true?1:b===false?-1:b;d=f.length;c=b>0?(g<d?g+b:0):(g>0?g+b:d-1);for(;;c+=b){if(g<0&&(c>=d||c<0)){return null}else{if(c>=d){c=-1;continue}else{if(c<0){c=d;continue}else{if(c===g){return null}}}}h=f[c];if(!h||!h.focusable||h.disabled){continue}if(j||(h.isFocusable&&h.isFocusable())){return h}}return null},getFocusableContainerEl:function(){return this.el},onFocusableChildAdd:function(a){if(this.enableFocusableContainer){return this.doFocusableChildAdd(a)}},activateFocusableContainerEl:function(a){a=a||this.getFocusableContainerEl();if(a){a.set({tabIndex:this.activeChildTabIndex})}},deactivateFocusableContainerEl:function(a){a=a||this.getFocusableContainerEl();if(a){a.set({tabIndex:undefined})}},isFocusableContainerActive:function(){var d=this,c=false,b,f,a;b=d.getFocusableContainerEl();if(b&&b.isTabbable&&b.isTabbable()){c=true}else{f=d.lastFocusedChild;a=f&&f.getFocusEl&&f.getFocusEl();if(a&&a.isTabbable&&a.isTabbable()){c=true}}return c},doFocusableChildAdd:function(a){if(a.focusable){a.focusableContainer=this}},onFocusableChildRemove:function(a){if(this.enableFocusableContainer){return this.doFocusableChildRemove(a)}a.focusableContainer=null},doFocusableChildRemove:function(a){if(a===this.lastFocusedChild){this.lastFocusedChild=null;this.activateFocusableContainerEl()}},onFocusableContainerMousedown:function(c,b){var a=Ext.Component.fromElement(b);this.mousedownTimestamp=a===this?Ext.Date.now():0;if(a===this){c.preventDefault()}},onFocusEnter:function(c){var a=this,b=c.toComponent,d=a.mousedownTimestamp,g=50,f;if(!a.enableFocusableContainer){return null}a.mousedownTimestamp=0;if(b===a){if(!d||Ext.Date.now()-d>g){f=a.initDefaultFocusable();if(f){a.deactivateFocusableContainerEl();f.focus()}}}else{a.deactivateFocusableContainerEl()}return b},onFocusLeave:function(c){var b=this,a=b.lastFocusedChild;if(!b.enableFocusableContainer){return}if(!b.destroyed&&!b.destroying){b.clearFocusables();if(a&&!a.disabled){b.activateFocusable(a)}else{b.activateFocusableContainerEl()}}},beforeFocusableChildBlur:Ext.privateFn,afterFocusableChildBlur:Ext.privateFn,beforeFocusableChildFocus:function(b){var a=this;if(!a.enableFocusableContainer){return}a.clearFocusables();a.activateFocusable(b);if(b.needArrowKeys){a.guardFocusableChild(b)}},guardFocusableChild:function(d){var c=this,a=c.activeChildTabIndex,b;b=c.findNextFocusableChild({child:d,step:-1});if(b){b.setTabIndex(a)}b=c.findNextFocusableChild({child:d,step:1});if(b){b.setTabIndex(a)}},afterFocusableChildFocus:function(a){if(!this.enableFocusableContainer){return}this.lastFocusedChild=a},beforeFocusableChildEnable:Ext.privateFn,onFocusableChildEnable:function(b){var a=this;if(!a.enableFocusableContainer){return}if(b!==a.lastFocusedChild){a.deactivateFocusable(b);if(!a.isFocusableContainerActive()){a.activateFocusableContainerEl()}}},beforeFocusableChildDisable:function(c){var b=this,a;if(!b.enableFocusableContainer||b.destroying||b.destroyed){return}if(c.hasFocus){a=b.findNextFocusableChild({child:c})||c.findFocusTarget();if(a){a.focus()}}},onFocusableChildDisable:function(d){var c=this,a=c.lastFocusedChild,b;if(!c.enableFocusableContainer||c.destroying||c.destroyed){return}if(d===a){c.activateFocusableContainerEl()}b=c.findNextFocusableChild({step:1});if(!b){c.deactivateFocusableContainerEl()}},onFocusableChildShow:Ext.privateFn,onFocusableChildHide:Ext.privateFn,onFocusableChildMasked:Ext.privateFn,onFocusableChildDestroy:Ext.privateFn,onFocusableChildUpdate:Ext.privateFn}},0,0,0,0,0,0,[Ext.util,"FocusableContainer"],0));(Ext.cmd.derive("Ext.panel.Header",Ext.panel.Bar,{isHeader:true,defaultType:"tool",indicateDrag:false,weight:-1,shrinkWrap:3,iconAlign:"left",titleAlign:"left",titlePosition:0,titleRotation:"default",autoEl:{role:"presentation"},beforeRenderConfig:{glyph:null,icon:null,iconCls:null,iconAlign:null,title:{$value:{xtype:"title",flex:1},merge:function(b,a){if(typeof b!=="object"){b={text:b}}return Ext.merge(a?Ext.Object.chain(a):{},b)}},titleAlign:null,titlePosition:null,titleRotation:null},headerCls:"x-header",initComponent:function(){var d=this,c=d.items,b=d.itemPosition,a=[d.headerCls];d.tools=d.tools||[];d.items=c=(c?c.slice():[]);if(b!==undefined){d._userItems=c.slice();d.items=c=[]}d.indicateDragCls=d.headerCls+"-draggable";if(d.indicateDrag){a.push(d.indicateDragCls)}d.addCls(a);d.syncNoBorderCls();d.enableFocusableContainer=!d.isAccordionHeader&&d.tools.length>0;if(d.enableFocusableContainer){d.ariaRole="toolbar"}Ext.Array.push(c,d.tools);d.tools.length=0;Ext.panel.Bar.prototype.initComponent.call(this);d.on({dblclick:d.onDblClick,click:d.onClick,element:"el",scope:d})},addTool:function(a){var b=this;b.add(Ext.ComponentManager.create(a,"tool"));if(!b.isAccordionHeader&&b.tools.length>0&&!b.enableFocusableContainer){b.enableFocusableContainer=true;b.ariaRole="toolbar";if(b.rendered){b.ariaEl.dom.setAttribute("role","toolbar");b.initFocusableContainer(true)}}},afterLayout:function(){var b=this,f,a,c,d;if(b.vertical){a=b.frameTR;if(a){f=b.frameBR;c=b.frameTL;d=(b.getWidth()-a.getPadding("r")-((c)?c.getPadding("l"):b.el.getBorderWidth("l")))+"px";f.setStyle("background-position-x",d);a.setStyle("background-position-x",d)}}Ext.panel.Bar.prototype.afterLayout.call(this)},applyTitle:function(f,c){var d=this,a,b;f=f||"";a=typeof f==="string";if(a){f={text:f}}if(c){Ext.suspendLayouts();c.setConfig(f);Ext.resumeLayouts(true);f=c}else{if(a){f.xtype="title"}f.ui=d.ui;b=("rotation" in f);f.id=d.id+"-title";if(d.isAccordionHeader){f.ariaRole="tab";f.textElRole=null;f.focusable=true}f=Ext.create(f);if(!b&&d.vertical&&d.titleRotation==="default"){f.rotation=1}}return f},applyTitlePosition:function(b){var a=this.items.getCount();if(this._titleInItems){--a}return Math.max(Math.min(b,a),0)},beforeLayout:function(){Ext.panel.Bar.prototype.beforeLayout.call(this);this.syncBeforeAfterTitleClasses()},beforeRender:function(){var b=this,a=b.itemPosition;b.protoEl.unselectable();Ext.panel.Bar.prototype.beforeRender.call(this);if(a!==undefined){b.insert(a,b._userItems)}},getTools:function(){return this.tools.slice()},onAdd:function(b,a){var c=this.tools;Ext.panel.Bar.prototype.onAdd.call(this,b,a);if(b.isTool){c.push(b);c[b.type]=b}},onAdded:function(b,c,a){this.syncNoBorderCls();Ext.panel.Bar.prototype.onAdded.call(this,b,c,a)},onRemoved:function(b,c,a){this.syncNoBorderCls();Ext.panel.Bar.prototype.onRemoved.call(this,b,c,a)},setDock:function(c){var b=this,f=b.getTitle(),a=b.getTitleRotation(),d=f.getRotation();Ext.suspendLayouts();Ext.panel.Bar.prototype.setDock.call(this,c);if(a==="default"){a=(b.vertical?1:0);if(a!==d){f.setRotation(a)}if(b.rendered){b.resetItemMargins()}}Ext.resumeLayouts(true)},updateGlyph:function(a){this.getTitle().setGlyph(a)},updateIcon:function(a){this.getTitle().setIcon(a)},updateIconAlign:function(b,a){this.getTitle().setIconAlign(b)},updateIconCls:function(a){this.getTitle().setIconCls(a)},updateTitle:function(b,a){if(!a){this.insert(this.getTitlePosition(),b);this._titleInItems=true}this.titleCmp=b},updateTitleAlign:function(b,a){this.getTitle().setTextAlign(b)},updateTitlePosition:function(a){this.insert(a,this.getTitle())},updateTitleRotation:function(a){if(a==="default"){a=(this.vertical?1:0)}this.getTitle().setRotation(a)},privates:{fireClickEvent:function(a,c){var b="."+Ext.panel.Tool.prototype.baseCls;if(!c.getTarget(b)){this.fireEvent(a,this,c)}},getFramingInfoCls:function(){var c=this,b=Ext.panel.Bar.prototype.getFramingInfoCls.call(this),a=c.ownerCt;if(!c.expanding&&a&&(a.collapsed||c.isCollapsedExpander)){b+="-"+a.collapsedCls}return b+"-"+c.dock},onClick:function(a){this.fireClickEvent("click",a)},onDblClick:function(a){this.fireClickEvent("dblclick",a)},onFocusableContainerMousedown:function(c,b){var a=Ext.Component.fromElement(b);if(a===this){c.preventDefault()}else{this.mixins.focusablecontainer.onFocusableContainerMousedown.apply(this,arguments)}},syncBeforeAfterTitleClasses:function(c){var m=this,j=m.items,g=j.items,b=m.getTitlePosition(),a=g.length,h=j.generation,o=m.syncBeforeAfterGen,q,f,d,p;if(!c&&(o===h)){return}m.syncBeforeAfterGen=h;for(d=0;d<a;++d){p=g[d];q=p.afterTitleCls||(p.afterTitleCls=p.baseCls+"-after-title");f=p.beforeTitleCls||(p.beforeTitleCls=p.baseCls+"-before-title");if(!m.title||d<b){if(o){p.removeCls(q)}p.addCls(f)}else{if(d>b){if(o){p.removeCls(f)}p.addCls(q)}}}},syncNoBorderCls:function(){var b=this,a=this.ownerCt,c=b.headerCls+"-noborder";if(a?(a.border===false&&!a.frame):b.border===false){b.addCls(c)}else{b.removeCls(c)}}}},0,["header"],["component","box","container","header"],{component:true,box:true,container:true,header:true},["widget.header"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.panel,"Header"],0));(Ext.cmd.derive("Ext.layout.container.boxOverflow.None",Ext.Base,{alternateClassName:"Ext.layout.boxOverflow.None",factoryConfig:{defaultType:"none"},isBoxOverflowHandler:true,$configPrefixed:false,$configStrict:false,constructor:function(a){this.initConfig(a)},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn,beginLayout:Ext.emptyFn,beginLayoutCycle:Ext.emptyFn,calculate:function(b){var a=this,c=b.state.boxPlan,d;if(c&&c.tooNarrow){d=a.handleOverflow(b);if(d){if(d.reservedSpace){a.layout.publishInnerCtSize(b,d.reservedSpace)}}}else{a.clearOverflow()}},completeLayout:Ext.emptyFn,finishedLayout:function(d){var c=this,a=c.layout.owner,b,f;if(a.hasListeners.overflowchange){b=a.query(">[hidden]");f=b.length;if(f!==c.lastHiddenCount){a.fireEvent("overflowchange",c.lastHiddenCount,f,b);c.lastHiddenCount=f}}},onRemove:Ext.emptyFn,getItem:function(a){return this.layout.owner.getComponent(a)},getOwnerType:function(a){var b;if(a.isToolbar){b="toolbar"}else{if(a.isTabBar){b="tab-bar"}else{if(a.isMenu){b="menu"}else{if(a.isBreadcrumb){b="breadcrumb"}else{b=a.getXType()}}}}return b},getPrefixConfig:Ext.emptyFn,getSuffixConfig:Ext.emptyFn,getOverflowCls:function(){return""},setVertical:function(){var b=this,a=b.layout,c=a.innerCt;c.removeCls(b.getOverflowCls(a.oppositeDirection));c.addCls(b.getOverflowCls(a.direction))}},1,0,0,0,["box.overflow.None","box.overflow.none"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.layout.container.boxOverflow,"None",Ext.layout.boxOverflow,"None"],0));(Ext.cmd.derive("Ext.layout.container.boxOverflow.Scroller",Ext.layout.container.boxOverflow.None,{alternateClassName:"Ext.layout.boxOverflow.Scroller",animateScroll:false,scrollIncrement:20,wheelIncrement:10,scrollRepeatInterval:60,scrollDuration:400,scrollerCls:"x-box-scroller",beforeSuffix:"-before-scroller",afterSuffix:"-after-scroller",constructor:function(a){var b=this;b.mixins.observable.constructor.call(b,a);b.scrollPosition=0;b.scrollSize=0},getPrefixConfig:function(){return{role:"presentation",id:this.layout.owner.id+this.beforeSuffix,cls:this.createScrollerCls("beforeX"),style:"display:none"}},getSuffixConfig:function(){return{role:"presentation",id:this.layout.owner.id+this.afterSuffix,cls:this.createScrollerCls("afterX"),style:"display:none"}},createScrollerCls:function(f){var h=this,g=h.layout,b=g.owner,d=h.getOwnerType(b),a=h.scrollerCls,c=a+" "+a+"-"+g.names[f]+" "+a+"-"+d+" "+a+"-"+d+"-"+b.ui;if(b.plain){c+=" "+a+"-plain"}return c},getOverflowCls:function(a){return this.scrollerCls+"-body-"+a},beginLayout:function(a){a.innerCtScrollPos=this.getScrollPosition();Ext.layout.container.boxOverflow.None.prototype.beginLayout.apply(this,arguments)},finishedLayout:function(d){var c=this,g=d.state.boxPlan,b=c.layout,f=b.names,h=Math.min(c.getMaxScrollPosition(),d.innerCtScrollPos),a;if(g&&g.tooNarrow){a=d.childItems[d.childItems.length-1].props;c.scrollSize=a[f.x]+a[f.width];c.updateScrollButtons();b.innerCt[f.setScrollLeft](h)}Ext.layout.container.boxOverflow.None.prototype.finishedLayout.call(this,d)},handleOverflow:function(b){var h=this,g=h.layout.names,j=g.getWidth,m=g.parallelMargins,c,f,d,a;h.showScrollers();d=h.getBeforeScroller();a=h.getAfterScroller();c=d[j]()+a[j]()+d.getMargin(m)+a.getMargin(m);f=b.targetContext.getPaddingInfo()[g.width];return{reservedSpace:Math.max(c-f,0)}},getBeforeScroller:function(){var a=this;return a._beforeScroller||(a._beforeScroller=a.createScroller(a.beforeSuffix,"beforeRepeater","scrollLeft"))},getAfterScroller:function(){var a=this;return a._afterScroller||(a._afterScroller=a.createScroller(a.afterSuffix,"afterRepeater","scrollRight"))},createScroller:function(g,d,h){var f=this,c=f.layout.owner,b=f.scrollerCls,a;a=c.el.getById(c.id+g);a.addClsOnOver(b+"-hover");a.addClsOnClick(b+"-pressed");a.setVisibilityMode(Ext.Element.DISPLAY);f[d]=new Ext.util.ClickRepeater(a,{interval:f.scrollRepeatInterval,handler:h,scope:f});return a},createWheelListener:function(){var a=this;a.wheelListener=a.layout.innerCt.on("mousewheel",a.onMouseWheel,a,{destroyable:true})},onMouseWheel:function(a){a.stopEvent();this.scrollBy(this.getWheelDelta(a)*this.wheelIncrement*-1,false)},getWheelDelta:function(a){return a.getWheelDelta()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){var a=this;if(!a.wheelListener){a.createWheelListener()}a.getBeforeScroller().show();a.getAfterScroller().show();a.layout.owner.addClsWithUI(a.layout.direction==="vertical"?"vertical-scroller":"scroller")},hideScrollers:function(){var b=this,c=b.getBeforeScroller(),a=b.getAfterScroller();if(c){c.hide();a.hide();b.layout.owner.removeClsWithUI(b.layout.direction==="vertical"?"vertical-scroller":"scroller")}},destroy:function(){Ext.destroyMembers(this,"beforeRepeater","afterRepeater","_beforeScroller","_afterScroller","wheelListener");this.callParent()},scrollBy:function(b,a){this.scrollTo(this.getScrollPosition()+b,a)},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){var b=this,d=b.getBeforeScroller(),a=b.getAfterScroller(),c;if(!d||!a){return}c=b.scrollerCls+"-disabled";d[b.atExtremeBefore()?"addCls":"removeCls"](c);a[b.atExtremeAfter()?"addCls":"removeCls"](c);b.scrolling=false},scrollLeft:function(){this.scrollBy(-this.scrollIncrement,false)},scrollRight:function(){this.scrollBy(this.scrollIncrement,false)},getScrollPosition:function(){var c=this,b=c.layout,a;if(isNaN(c.scrollPosition)){a=b.innerCt[b.names.getScrollLeft]()}else{a=c.scrollPosition}return a},getMaxScrollPosition:function(){var b=this,a=b.layout,c=b.scrollSize-a.innerCt.lastBox[a.names.width];return(c<0)?0:c},atExtremeBefore:function(){return !this.getScrollPosition()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollPosition()},setVertical:function(){var c=this,d=c.getBeforeScroller(),b=c.getAfterScroller(),f=c.layout.names,a=c.scrollerCls;d.removeCls(a+"-"+f.beforeY);b.removeCls(a+"-"+f.afterY);d.addCls(a+"-"+f.beforeX);b.addCls(a+"-"+f.afterX);Ext.layout.container.boxOverflow.None.prototype.setVertical.call(this)},scrollTo:function(a,b){var g=this,f=g.layout,h=f.names,d=g.getScrollPosition(),c=Ext.Number.constrain(a,0,g.getMaxScrollPosition());if(c!==d&&!g.scrolling){g.scrollPosition=NaN;if(b===undefined){b=g.animateScroll}f.innerCt[h.scrollTo](h.beforeScrollX,c,b?g.getScrollAnim():false);if(b){g.scrolling=true}else{g.updateScrollButtons()}g.fireEvent("scroll",g,c,b?g.getScrollAnim():false)}},scrollToItem:function(o,c){var m=this,g=m.layout,d=g.owner,j=g.names,b=g.innerCt,a,f,h;o=m.getItem(o);if(o!==undefined){if(o===d.items.first()){h=0}else{if(o===d.items.last()){h=m.getMaxScrollPosition()}else{a=m.getItemVisibility(o);if(!a.fullyVisible){f=o.getBox(false,true);h=f[j.x];if(a.hiddenEnd){h-=(b[j.getWidth]()-f[j.width])}}}}if(h!==undefined){m.scrollTo(h,c)}}},getItemVisibility:function(m){var h=this,b=h.getItem(m).getBox(true,true),c=h.layout,g=c.names,f=b[g.x],d=f+b[g.width],a=h.getScrollPosition(),j=a+c.innerCt[g.getWidth]();return{hiddenStart:f<a,hiddenEnd:d>j,fullyVisible:f>=a&&d<=j}}},1,0,0,0,["box.overflow.Scroller","box.overflow.scroller"],[["observable",Ext.mixin.Observable]],[Ext.layout.container.boxOverflow,"Scroller",Ext.layout.boxOverflow,"Scroller"],0));(Ext.cmd.derive("Ext.dd.DragDropManager",Ext.Base,{singleton:true,alternateClassName:["Ext.dd.DragDropMgr","Ext.dd.DDM"],ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,init:function(){this.initialized=true},POINT:0,INTERSECT:1,mode:0,notifyOccluded:false,dragCls:"x-dd-drag-current",_execOnAll:function(c,b){var f=this.ids,d,a,h,g;for(d in f){if(f.hasOwnProperty(d)){g=f[d];for(a in g){if(g.hasOwnProperty(a)){h=g[a];if(!this.isTypeOfDD(h)){continue}h[c].apply(h,b)}}}}},addListeners:function(){var a=this;a.init();Ext.getDoc().on({mouseup:a.handleMouseUp,mousemove:{fn:a.handleMouseMove,capture:false},dragstart:a.preventDrag,drag:a.preventDrag,dragend:a.preventDrag,capture:true,scope:a});Ext.getWin().on({unload:a._onUnload,resize:a._onResize,scope:a})},preventDrag:function(a){if(this.isMouseDown){a.stopPropagation()}},_onResize:function(a){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},locationCache:{},useCache:true,clickPixelThresh:8,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,regDragDrop:function(b,a){if(!this.initialized){this.init()}if(!this.ids[a]){this.ids[a]={}}this.ids[a][b.id]=b},removeDDFromGroup:function(c,a){if(!this.ids[a]){this.ids[a]={}}var b=this.ids[a];if(b&&b[c.id]){delete b[c.id]}},_remove:function(h,b){var f=this,c=f.ids,a=h.groups,d;if(f.clearingAll){return}if(f.dragCurrent===h){f.dragCurrent=null}for(d in a){if(a.hasOwnProperty(d)){if(b){delete c[d]}else{if(c[d]){delete c[d][h.id]}}}}delete f.handleIds[h.id];delete f.locationCache[h.id]},regHandle:function(b,a){if(!this.handleIds[b]){this.handleIds[b]={}}this.handleIds[b][a]=a},isDragDrop:function(a){return(this.getDDById(a))?true:false},getRelated:function(g,b){var f=[],d,c,a;for(d in g.groups){for(c in this.ids[d]){a=this.ids[d][c];if(!this.isTypeOfDD(a)){continue}if(!b||a.isTarget){f[f.length]=a}}}return f},isLegalTarget:function(f,d){var b=this.getRelated(f,true),c,a;for(c=0,a=b.length;c<a;++c){if(b[c].id===d.id){return true}}return false},isTypeOfDD:function(a){return(a&&a.__ygDragDrop)},isHandle:function(b,a){return(this.handleIds[b]&&this.handleIds[b][a])},getDDById:function(d,c){var b,a;for(b in this.ids){a=this.ids[b][d];if(a instanceof Ext.dd.DDTarget||c){return a}}return null},handleMouseDown:function(f,d){var b=this,c,a;b.isMouseDown=true;if(Ext.quickTipsActive){Ext.tip.QuickTipManager.ddDisable()}b.currentPoint=f.getPoint();if(b.dragCurrent){b.handleMouseUp(f)}b.mousedownEvent=f;b.currentTarget=f.getTarget();b.dragCurrent=d;a=d.getEl();Ext.fly(a).setCapture();c=f.getXY();b.startX=c[0];b.startY=c[1];b.offsetX=b.offsetY=0;b.deltaX=b.startX-a.offsetLeft;b.deltaY=b.startY-a.offsetTop;b.dragThreshMet=false},startDrag:function(b,f){var c=this,d=c.dragCurrent,a;clearTimeout(c.clickTimeout);if(d){d.b4StartDrag(b,f);d.startDrag(b,f);a=d.getDragEl();if(a){Ext.fly(a).addCls(c.dragCls)}}c.dragThreshMet=true},handleMouseUp:function(b){var a=this;a.isMouseDown=false;if(Ext.quickTipsActive){Ext.tip.QuickTipManager.ddEnable()}if(!a.dragCurrent){return}if(Ext.isIE&&document.releaseCapture){document.releaseCapture()}clearTimeout(a.clickTimeout);if(a.dragThreshMet){a.fireEvents(b,true)}a.stopDrag(b);a.stopEvent(b);a.mousedownEvent=a.currentTarget=null},stopEvent:function(a){if(this.stopPropagation){a.stopPropagation()}if(this.preventDefault){a.preventDefault()}},stopDrag:function(d){var b=this,c=b.dragCurrent,a;if(c){if(b.dragThreshMet){a=c.getDragEl();if(a){Ext.fly(a).removeCls(b.dragCls)}c.b4EndDrag(d);c.endDrag(d)}b.dragCurrent.onMouseUp(d)}b.dragCurrent=null;b.dragOvers={}},handleMouseMove:function(j){var g=this,h=g.dragCurrent,a=g.currentPoint=j.getPoint(),d=a.x,b=a.y,f,c;g.offsetX=d-g.startX;g.offsetY=b-g.startY;if(!h){return true}if(!g.dragThreshMet){f=Math.abs(g.offsetX);c=Math.abs(g.offsetY);if(f>g.clickPixelThresh||c>g.clickPixelThresh){g.startDrag(g.startX,g.startY)}}if(g.dragThreshMet){h.b4Drag(j);h.onDrag(j);if(!h.moveOnly){g.fireEvents(j,false)}}g.stopEvent(j);return true},fireEvents:function(A,p){var C=this,q=Ext.supports.Touch,g=C.dragCurrent,y=C.currentPoint,t=y.x,s=y.y,r=[],h=[],m=[],b=[],B=[],z=[],a=q?document.documentElement.clientWidth/window.innerWidth:1,d,f,o,c,v,w,u,j;if(!g||g.isLocked()){return}j=!(g.deltaX<0||g.deltaY<0);if(q||(!C.notifyOccluded&&(!Ext.supports.CSSPointerEvents||Ext.isIE10m||Ext.isOpera)&&j)){d=g.getDragEl();if(j){d.style.visibility="hidden"}A.target=document.elementFromPoint(t/a,s/a);if(j){d.style.visibility="visible"}}for(v in C.dragOvers){f=C.dragOvers[v];delete C.dragOvers[v];if(!C.isTypeOfDD(f)||f.destroyed){continue}if(C.notifyOccluded){if(!this.isOverTarget(y,f,C.mode)){m.push(f)}}else{if(!A.within(f.getEl())){m.push(f)}}h[v]=true}for(u in g.groups){if("string"!==typeof u){continue}for(v in C.ids[u]){f=C.ids[u][v];if(C.isTypeOfDD(f)&&(o=f.getEl())&&(f.isTarget)&&(!f.isLocked())&&(Ext.fly(o).isVisible(true))&&((f!==g)||(g.ignoreSelf===false))){if(C.notifyOccluded){if((f.zIndex=C.getZIndex(o))!==-1){c=true}r.push(f)}else{if(A.within(f.getEl())){r.push(f);break}}}}}if(c){Ext.Array.sort(r,C.byZIndex)}for(v=0,w=r.length;v<w;v++){f=r[v];if(C.isOverTarget(y,f,C.mode)){if(p){B.push(f)}else{if(!h[f.id]){z.push(f)}else{b.push(f)}C.dragOvers[f.id]=f}if(!C.notifyOccluded){break}}}if(C.mode){if(m.length){g.b4DragOut(A,m);g.onDragOut(A,m)}if(z.length){g.onDragEnter(A,z)}if(b.length){g.b4DragOver(A,b);g.onDragOver(A,b)}if(B.length){g.b4DragDrop(A,B);g.onDragDrop(A,B)}}else{for(v=0,w=m.length;v<w;++v){g.b4DragOut(A,m[v].id);g.onDragOut(A,m[v].id)}for(v=0,w=z.length;v<w;++v){g.onDragEnter(A,z[v].id)}for(v=0,w=b.length;v<w;++v){g.b4DragOver(A,b[v].id);g.onDragOver(A,b[v].id)}for(v=0,w=B.length;v<w;++v){g.b4DragDrop(A,B[v].id);g.onDragDrop(A,B[v].id)}}if(p&&!B.length){g.onInvalidDrop(A)}},getZIndex:function(b){var a=document.body,c,d=-1;b=Ext.getDom(b);while(b!==a){if(!isNaN(c=Number(Ext.fly(b).getStyle("zIndex")))){d=c}b=b.parentNode}return d},byZIndex:function(b,a){return b.zIndex<a.zIndex},getBestMatch:function(c){var f=null,b=c.length,d,a;if(b===1){f=c[0]}else{for(d=0;d<b;++d){a=c[d];if(a.cursorIsOver){f=a;break}else{if(!f||f.overlap.getArea()<a.overlap.getArea()){f=a}}}}return f},refreshCache:function(b){var a,c,d,f;for(a in b){if("string"!==typeof a){continue}for(c in this.ids[a]){d=this.ids[a][c];if(this.isTypeOfDD(d)){f=this.getLocation(d);if(f){this.locationCache[d.id]=f}else{delete this.locationCache[d.id]}}}}},verifyEl:function(a){return Ext.getBody().contains(a)},getLocation:function(h){if(!this.isTypeOfDD(h)){return null}if(h.getRegion){return h.getRegion()}var f=h.getEl(),o,d,c,q,p,s,a,m,g;try{o=Ext.fly(f).getXY()}catch(j){}if(!o){return null}d=o[0];c=d+f.offsetWidth;q=o[1];p=q+f.offsetHeight;s=q-h.padding[0];a=c+h.padding[1];m=p+h.padding[2];g=d-h.padding[3];return new Ext.util.Region(s,a,m,g)},isOverTarget:function(m,a,c){var f=this.locationCache[a.id],j,g,b,d,h;if(!f||!this.useCache){f=this.getLocation(a);this.locationCache[a.id]=f}if(!f){return false}a.cursorIsOver=f.contains(m);j=this.dragCurrent;if(!j||!j.getTargetCoord||(!c&&!j.constrainX&&!j.constrainY)){return a.cursorIsOver}a.overlap=null;g=j.getTargetCoord(m.x,m.y);b=j.getDragEl();d=new Ext.util.Region(g.y,g.x+b.offsetWidth,g.y+b.offsetHeight,g.x);h=d.intersect(f);if(h){a.overlap=h;return(c)?true:a.cursorIsOver}else{return false}},_onUnload:function(b,a){Ext.dd.DragDropManager.unregAll()},unregAll:function(){var c=this,a=c.elementCache,b;if(c.dragCurrent){c.stopDrag();c.dragCurrent=null}c.clearingAll=true;c._execOnAll("unreg",[]);delete c.clearingAll;for(b in a){delete a[b]}c.elementCache={};c.ids={};c.handleIds={}},elementCache:{},getElWrapper:function(b){var a=this.elementCache[b];if(!a||!a.el){a=this.elementCache[b]=new this.ElementWrapper(Ext.getDom(b))}return a},getElement:function(a){return Ext.getDom(a)},getCss:function(b){var a=Ext.getDom(b);return(a)?a.style:null},ElementWrapper:function(a){this.el=a||null;this.id=this.el&&a.id;this.css=this.el&&a.style},getPosX:function(a){return Ext.fly(a).getX()},getPosY:function(a){return Ext.fly(a).getY()},swapNode:function(c,a){if(c.swapNode){c.swapNode(a)}else{var d=a.parentNode,b=a.nextSibling;if(b===c){d.insertBefore(c,a)}else{if(a===c.nextSibling){d.insertBefore(a,c)}else{c.parentNode.replaceChild(a,c);d.insertBefore(c,b)}}}},getScroll:function(){var d=window.document,f=d.documentElement,a=d.body,c=0,b=0;if(f&&(f.scrollTop||f.scrollLeft)){c=f.scrollTop;b=f.scrollLeft}else{if(a){c=a.scrollTop;b=a.scrollLeft}}return{top:c,left:b}},getStyle:function(b,a){return Ext.fly(b).getStyle(a)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(a,c){var b=Ext.fly(c).getXY();Ext.fly(a).setXY(b)},numericSort:function(d,c){return(d-c)},handleWasClicked:function(a,c){if(this.isHandle(c,a.id)){return true}else{var b=a.parentNode;while(b){if(this.isHandle(c,b.id)){return true}else{b=b.parentNode}}}return false}},0,0,0,0,0,0,[Ext.dd,"DragDropManager",Ext.dd,"DragDropMgr",Ext.dd,"DDM"],function(a){Ext.onInternalReady(function(){a.addListeners()})}));(Ext.cmd.derive("Ext.resizer.Splitter",Ext.Component,{childEls:["collapseEl"],renderTpl:['<tpl if="collapsible===true">','<div id="{id}-collapseEl" data-ref="collapseEl" role="presentation" class="',"x-","collapse-el ","x-",'layout-split-{collapseDir}{childElCls}">',"</div>","</tpl>"],isSplitter:true,baseCls:"x-splitter",collapsedClsInternal:"x-splitter-collapsed",canResize:true,collapsible:null,collapseOnDblClick:true,defaultSplitMin:40,defaultSplitMax:1000,collapseTarget:"next",horizontal:false,vertical:false,size:5,tracker:null,ariaRole:"separator",focusable:true,tabIndex:0,getTrackerConfig:function(){return Ext.apply({xclass:"Ext.resizer.SplitterTracker",el:this.el,splitter:this},this.tracker)},beforeRender:function(){var c=this,d=c.getCollapseTarget(),b=c.collapsible,a;Ext.Component.prototype.beforeRender.call(this);if(d.collapsed){c.addCls(c.collapsedClsInternal)}if(!c.canResize){c.addCls(c.baseCls+"-noresize")}Ext.applyIf(c.renderData,{collapseDir:c.getCollapseDirection(),collapsible:(b!==null)?b:d.collapsible});c.ariaRenderAttributes=c.ariaRenderAttributes||{};c.ariaRenderAttributes["aria-orientation"]=c.orientation;c.protoEl.unselectable()},onRender:function(){var b=this,a;Ext.Component.prototype.onRender.apply(this,arguments);if(b.performCollapse!==false){if(b.renderData.collapsible){b.mon(b.collapseEl,"click",b.toggleTargetCmp,b)}if(b.collapseOnDblClick){b.mon(b.el,"dblclick",b.toggleTargetCmp,b)}}b.getCollapseTarget().on({collapse:b.onTargetCollapse,expand:b.onTargetExpand,beforeexpand:b.onBeforeTargetExpand,beforecollapse:b.onBeforeTargetCollapse,scope:b});if(b.canResize){b.tracker=Ext.create(b.getTrackerConfig());b.relayEvents(b.tracker,["beforedragstart","dragstart","dragend"])}a=b.collapseEl;if(a){a.lastCollapseDirCls=b.collapseDirProps[b.collapseDirection].cls}},getCollapseDirection:function(){var g=this,c=g.collapseDirection,f,a,b,d;if(!c){f=g.collapseTarget;if(f.isComponent){c=f.collapseDirection}if(!c){d=g.ownerCt.layout.type;if(f.isComponent){b=g.ownerCt.items;a=Number(b.indexOf(f)===b.indexOf(g)-1)<<1|Number(d==="hbox")}else{a=Number(g.collapseTarget==="prev")<<1|Number(d==="hbox")}c=["bottom","right","top","left"][a]}g.collapseDirection=c}g.setOrientation((c==="top"||c==="bottom")?"horizontal":"vertical");return c},getCollapseTarget:function(){var a=this;return a.collapseTarget.isComponent?a.collapseTarget:a.collapseTarget==="prev"?a.previousSibling():a.nextSibling()},setCollapseEl:function(b){var a=this.collapseEl;if(a){a.setDisplayed(b)}},onBeforeTargetExpand:function(a){this.setCollapseEl("none")},onBeforeTargetCollapse:function(){this.setCollapseEl("none")},onTargetCollapse:function(b){var a=this;if(b===a.getCollapseTarget()&&b[a.orientation==="vertical"?"collapsedHorizontal":"collapsedVertical"]()){a.el.addCls(a.collapsedClsInternal+" "+(a.collapsedCls||""))}a.setCollapseEl("")},onTargetExpand:function(b){var a=this;a.el.removeCls(a.collapsedClsInternal+" "+(a.collapsedCls||""));a.setCollapseEl("")},collapseDirProps:{top:{cls:"x-layout-split-top"},right:{cls:"x-layout-split-right"},bottom:{cls:"x-layout-split-bottom"},left:{cls:"x-layout-split-left"}},orientationProps:{horizontal:{opposite:"vertical",fixedAxis:"height",stretchedAxis:"width"},vertical:{opposite:"horizontal",fixedAxis:"width",stretchedAxis:"height"}},applyCollapseDirection:function(){var c=this,b=c.collapseEl,d=c.collapseDirProps[c.collapseDirection],a;if(b){a=b.lastCollapseDirCls;if(a){b.removeCls(a)}b.addCls(b.lastCollapseDirCls=d.cls)}},applyOrientation:function(){var f=this,c=f.orientation,d=f.orientationProps[c],g=f.size,b=d.fixedAxis,h=d.stretchedAxis,a=f.baseCls+"-";f[c]=true;f[d.opposite]=false;if(!f.hasOwnProperty(b)||f[b]==="100%"){f[b]=g}if(!f.hasOwnProperty(h)||f[h]===g){f[h]="100%"}f.removeCls(a+d.opposite);f.addCls(a+c)},setOrientation:function(a){var b=this;if(b.orientation!==a){b.orientation=a;b.applyOrientation()}},updateOrientation:function(){delete this.collapseDirection;this.getCollapseDirection();this.applyCollapseDirection()},toggleTargetCmp:function(d,b){var c=this.getCollapseTarget(),f=c.placeholder,a;if(Ext.isFunction(c.expand)&&Ext.isFunction(c.collapse)){if(f&&!f.hidden){a=true}else{a=!c.hidden}if(a){if(c.collapsed){c.expand()}else{if(c.collapseDirection){c.collapse()}else{c.collapse(this.renderData.collapseDir)}}}}},setSize:function(){var a=this;Ext.Component.prototype.setSize.apply(this,arguments);if(Ext.isIE&&a.el){a.el.repaint()}},beforeDestroy:function(){Ext.destroy(this.tracker);Ext.Component.prototype.beforeDestroy.call(this)}},0,["splitter"],["component","box","splitter"],{component:true,box:true,splitter:true},["widget.splitter"],0,[Ext.resizer,"Splitter"],0));Ext.define("Ext.theme.neptune.resizer.Splitter",{override:"Ext.resizer.Splitter",size:8});Ext.define("Ext.theme.triton.resizer.Splitter",{override:"Ext.resizer.Splitter",size:10});(Ext.cmd.derive("Ext.layout.container.Box",Ext.layout.container.Container,{alternateClassName:"Ext.layout.BoxLayout",type:"box",config:{align:"begin",constrainAlign:false,enableSplitters:true,overflowHandler:{$value:null,merge:function(b,a){if(typeof b==="string"){b={type:b}}return Ext.merge(a?Ext.Object.chain(a):{},b)}},padding:0,pack:"start",stretchMaxPartner:undefined,vertical:false,alignRoundingMethod:"round"},itemCls:"x-box-item",targetCls:"x-box-layout-ct",targetElCls:"x-box-target",innerCls:"x-box-inner",manageMargins:true,createsInnerCt:true,childEls:["innerCt","targetEl"],renderTpl:['{%var oc,l=values.$comp.layout,oh=l.overflowHandler;if (oh && oh.getPrefixConfig!==Ext.emptyFn) {if(oc=oh.getPrefixConfig())dh.generateMarkup(oc, out)}%}<div id="{ownerId}-innerCt" data-ref="innerCt" role="presentation" class="{[l.innerCls]}{[oh ? (" " + oh.getOverflowCls(l.direction)) : ""]}"><div id="{ownerId}-targetEl" data-ref="targetEl" class="{targetElCls}" role="presentation">{%this.renderBody(out, values)%}</div></div>{%if (oh && oh.getSuffixConfig!==Ext.emptyFn) {if(oc=oh.getSuffixConfig())dh.generateMarkup(oc, out)}%}',{disableFormats:true,definitions:"var dh=Ext.DomHelper;"}],constructor:function(a){var c=this,b;Ext.layout.container.Container.prototype.constructor.apply(this,arguments);c.setVertical(c.vertical);c.flexSortFn=c.flexSort.bind(c);b=typeof c.padding;if(b==="string"||b==="number"){c.padding=Ext.util.Format.parseBox(c.padding);c.padding.height=c.padding.top+c.padding.bottom;c.padding.width=c.padding.left+c.padding.right}},_beginRe:/^(?:begin|left|top)$/,_centerRe:/^(?:center|middle)$/,_endRe:/^(?:end|right|bottom)$/,_percentageRe:/^\s*(\d+(?:\.\d*)?)\s*[%]\s*$/,getItemSizePolicy:function(u,v){var p=this,m=p.sizePolicy,h=p.align,g=u.flex,s=h,o=p.names,j=o.height,r=o.width,b=u[r],t=u[j],d=p._percentageRe,c=d.test(b),f=(h==="stretch"),a=(h==="stretchmax"),q=p.constrainAlign;if(!v&&(f||g||c||(q&&!a))){v=p.owner.getSizeModel()}if(f){if(!d.test(t)&&v[j].shrinkWrap){s="stretchmax"}}else{if(!a){if(d.test(t)){s="stretch"}else{if(q&&!v[j].shrinkWrap){s="stretchmax"}else{s=""}}}}if(g||c){if(!v[r].shrinkWrap){m=m.flex}}return m[s]},flexSort:function(s,r){var p=this.names.maxWidth,f=this.names.minWidth,q=Infinity,o=s.target,v=r.target,j=o.flex,h=v.flex,w=0,c,t,m,d,u,g;m=o[p]||q;d=v[p]||q;c=o[f]||0;t=v[f]||0;u=isFinite(c)||isFinite(t);g=isFinite(m)||isFinite(d);if(u||g){if(g){w=m-d}if(w===0&&u){w=t-c}if(w===0){if(g){w=h-j}else{w=j-h}}}return w},isItemBoxParent:function(a){return true},isItemShrinkWrap:function(a){return true},roundFlex:function(a){return Math.floor(a)},beginCollapse:function(b){var a=this;if(a.direction==="vertical"&&b.collapsedVertical()){b.collapseMemento.capture(["flex"]);delete b.flex}else{if(a.direction==="horizontal"&&b.collapsedHorizontal()){b.collapseMemento.capture(["flex"]);delete b.flex}}},beginExpand:function(a){a.collapseMemento.restore(["flex"])},beginLayout:function(f){var j=this,b=j.owner,d=b.stretchMaxPartner,a=j.innerCt.dom.style,h=j.names,g=j.overflowHandler,m=b.getScrollable(),c;f.boxNames=h;if(g){g.beginLayout(f)}if(typeof d==="string"){d=Ext.getCmp(d)||b.query(d)[0]}f.stretchMaxPartner=d&&f.context.getCmp(d);Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);f.innerCtContext=f.getEl("innerCt",j);f.targetElContext=f.getEl("targetEl",j);if(m){f.ownerScrollable=m;c=m.getPosition();if(c.x||c.y){f.scrollRestore=c}}a.width=a.height=""},beginLayoutCycle:function(d,r){var o=this,a=d.state,p=d.ownerScrollable,j=o.align,m=d.boxNames,q=o.pack,c=o._centerRe,f=o.overflowHandler,b=d.state.canScroll,h,g;if(f){f.beginLayoutCycle(d,r)}Ext.layout.container.Container.prototype.beginLayoutCycle.apply(this,arguments);d.parallelSizeModel=h=d[m.widthModel];d.perpendicularSizeModel=g=d[m.heightModel];d.boxOptions={align:j={stretch:j==="stretch",stretchmax:j==="stretchmax",center:c.test(j),bottom:o._endRe.test(j)},pack:q={center:c.test(q),end:q==="end"}};if(p){if(!b){a.canScroll={parallel:!h.shrinkWrap&&p[m.getX](),perpendicular:!g.shrinkWrap&&p[m.getY]()}}if(!a.actualScroll){a.actualScroll={parallel:false,perpendicular:false}}}if(j.stretch&&g.shrinkWrap){j.stretchmax=true;j.stretch=false}j.nostretch=!(j.stretch||j.stretchmax);if(h.shrinkWrap){q.center=q.end=false}o.cacheFlexes(d);o.targetEl.setWidth(20000)},cacheFlexes:function(p){var F=this,q=p.boxNames,a=q.widthModel,h=q.heightModel,c=p.boxOptions.align.nostretch,w=0,b=p.childItems,z=b.length,D=[],r=0,A=0,v=0,o=q.minWidth,C=q.minHeight,j=F._percentageRe,B=0,E=0,g,t,y,m,d,f,u,s;while(z--){t=b[z];g=t.target;f=t[a];if(f.calculated){t.flex=y=g.flex;if(y){w+=y;D.push(t);r+=g[o]||0}else{m=j.exec(g[q.width]);t.percentageParallel=parseFloat(m[1])/100;++B}}if(f.configured){u=g[q.width]}else{u=g[o]||0}v+=u;d=t[h];if(c&&d.calculated){m=j.exec(g[q.height]);t.percentagePerpendicular=parseFloat(m[1])/100;++E}if(d.configured){s=g[q.height]}else{s=g[C]||0}if(s>A){A=s}}p.flexedItems=D;p.flexedMinWidth=r;p.smallestWidth=v;p.smallestHeight=A;p.totalFlex=w;p.percentageWidths=B;p.percentageHeights=E;Ext.Array.sort(D,F.flexSortFn)},calculate:function(c){var h=this,g=c.boxNames,a=c.state,f=a.actualScroll,m=a.needsScroll,b=a.canScroll,j=a.boxPlan||(a.boxPlan={}),d=h.overflowHandler;j.targetSize=h.getContainerSize(c);if(b&&!m){a.needsScroll=m={parallel:b.parallel&&j.targetSize[g.width]<c.smallestWidth,perpendicular:b.perpendicular&&j.targetSize[g.height]<c.smallestHeight}}if(!a.parallelDone){a.parallelDone=h.calculateParallel(c,g,j)}if(!a.perpendicularDone){a.perpendicularDone=h.calculatePerpendicular(c,g,j)}if(a.parallelDone&&a.perpendicularDone){if(b&&!a.scrollPass){if(m.parallel!==f.parallel||m.perpendicular!==f.perpendicular){c.invalidate({state:{scrollPass:true,canScroll:b,needsScroll:f}});h.done=false;return}}h.publishInnerCtSize(c);if(h.done&&c.boxOptions.align.stretchmax&&!a.stretchMaxDone){h.calculateStretchMax(c,g,j);a.stretchMaxDone=true}if(d){d.calculate(c)}}else{h.done=false}},calculateParallel:function(B,P,G){var u=this,r=B.parallelSizeModel.shrinkWrap,H=P.width,h=B.childItems,w=P.beforeX,L=P.afterX,o=P.setWidth,E=h.length,A=B.flexedItems,K=A.length,t=B.boxOptions.pack,M=u.padding,b=G.targetSize,s=b[H],Q=B.state,D=Q.needsScroll,v=Q.canScroll,F=0,j=M[w],J=j+M[L],y=Ext.getScrollbarSize(),f=y[P.width],a=y[P.height],N,C,g,p,q,m,c,O,I,z,d;if(!r&&!b[P.gotWidth]){return false}for(N=0;N<E;++N){q=h[N];C=q.marginInfo||q.getMarginInfo();F+=C[H];if(!q[P.widthModel].calculated){I=q.getProp(H);J+=I;if(isNaN(J)){return false}}}J+=F;if(B.percentageWidths){z=s-F;if(isNaN(z)){return false}for(N=0;N<E;++N){q=h[N];if(q.percentageParallel){I=Math.ceil(z*q.percentageParallel);I=q.setWidth(I);J+=I}}}if(r){d=0;G.tooNarrow=false}else{d=s-J;if(D&&D.perpendicular){d-=a}G.tooNarrow=d<B.flexedMinWidth;if(G.tooNarrow&&v&&v.parallel){Q.actualScroll.parallel=true}}O=J;g=d;p=B.totalFlex;for(N=0;N<K;N++){q=A[N];m=q.flex;c=u.roundFlex((m/p)*g);c=q[o](c);O+=c;g=Math.max(0,g-c);p-=m}if(t.center){j+=g/2;if(j<0){j=0}}else{if(t.end){j+=g}}for(N=0;N<E;++N){q=h[N];C=q.marginInfo;j+=C[w];q.setProp(P.x,j);j+=C[L]+q.props[H]}O+=B.targetContext.getPaddingInfo()[H];B.state.contentWidth=O;if(D&&D.perpendicular){if(r){O+=f}B[P.hasOverflowY]=true;B.target.componentLayout[P.setWidthInDom]=true;B[P.invalidateScrollY]=Ext.isIE8}B[P.setContentWidth](O);return true},calculatePerpendicular:function(z,Q,F){var w=this,U=z.state,B=U.needsScroll,y=U.canScroll,d=z.perpendicularSizeModel.shrinkWrap,b=F.targetSize,j=z.childItems,E=j.length,p=Math.max,o=Q.height,q=Q.setHeight,h=Q.beforeY,v=Q.y,N=w.padding,m=N[h],r=b[o]-m-N[Q.afterY],K=z.boxOptions.align,s=K.stretch,t=K.stretchmax,T=K.center,S=K.bottom,M=w.constrainAlign,L=0,H=0,J=w.onBeforeConstrainInvalidateChild,G=w.onAfterConstrainInvalidateChild,a=Ext.getScrollbarSize().height,D,O,I,A,C,c,u,f,R,P,g;if(!d&&!b[Q.gotHeight]){return false}if(s||((T||S)&&!d)){if(isNaN(r)){return false}}if(B&&B.parallel){if(d){P=true}else{r-=a;F.targetSize[o]-=a}}if(s){c=r;L=p(c,z.smallestHeight)}else{for(O=0;O<E;O++){u=j[O];A=(u.marginInfo||u.getMarginInfo())[o];if(!(g=u.percentagePerpendicular)){I=u.getProp(o)}else{++H;if(d){continue}else{I=g*r-A;I=u[Q.setHeight](I)}}if(!d&&M&&u[Q.heightModel].shrinkWrap&&I>r){u.invalidate({before:J,after:G,layout:w,childHeight:r,names:Q});z.state.parallelDone=false}if(isNaN(L=p(L,I+A,u.target[Q.minHeight]||0))){return false}}}if(P){L+=a;z[Q.hasOverflowX]=true;z.target.componentLayout[Q.setHeightInDom]=true;z[Q.invalidateScrollX]=Ext.isIE8}f=z.stretchMaxPartner;if(f){z.setProp("maxChildHeight",L);R=f.childItems;if(R&&R.length){L=p(L,f.getProp("maxChildHeight"));if(isNaN(L)){return false}}}z[Q.setContentHeight](L+w.padding[o]+z.targetContext.getPaddingInfo()[o]);if(P){L-=a}if(L>b[o]&&y&&y.perpendicular){U.actualScroll.perpendicular=true}F.maxSize=L;if(t){c=L}else{if(T||S||H){if(M){c=d?L:r}else{c=d?L:p(r,L)}c-=z.innerCtContext.getBorderInfo()[o]}}for(O=0;O<E;O++){u=j[O];A=u.marginInfo||u.getMarginInfo();D=m+A[h];if(s){u[q](c-A[o])}else{g=u.percentagePerpendicular;if(d&&g){A=u.marginInfo||u.getMarginInfo();I=g*c-A[o];I=u.setHeight(I)}if(T){C=c-u.props[o];if(C>0){D=m+Math[w.alignRoundingMethod](C/2)}}else{if(S){D=p(0,c-D-u.props[o])}}}u.setProp(v,D)}return true},onBeforeConstrainInvalidateChild:function(b,a){var c=a.names.heightModel;if(!b[c].constrainedMin){b[c]=Ext.layout.SizeModel.calculated}},onAfterConstrainInvalidateChild:function(b,a){var c=a.names;b.setProp(c.beforeY,0);if(b[c.heightModel].calculated){b[c.setHeight](a.childHeight)}},calculateStretchMax:function(c,m,p){var o=this,h=m.height,q=m.width,g=c.childItems,a=g.length,s=p.maxSize,r=o.onBeforeStretchMaxInvalidateChild,f=o.onAfterStretchMaxInvalidateChild,t,j,d,b;for(d=0;d<a;++d){t=g[d];j=t.props;b=s-t.getMarginInfo()[h];if(b!==j[h]||t[m.heightModel].constrained){t.invalidate({before:r,after:f,layout:o,childWidth:j[q],childHeight:b,childX:j.x,childY:j.y,names:m})}}},onBeforeStretchMaxInvalidateChild:function(b,a){var c=a.names.heightModel;if(!b[c].constrainedMax){b[c]=Ext.layout.SizeModel.calculated}},onAfterStretchMaxInvalidateChild:function(d,c){var f=c.names,a=c.childHeight,b=c.childWidth;d.setProp("x",c.childX);d.setProp("y",c.childY);if(d[f.heightModel].calculated){d[f.setHeight](a)}if(d[f.widthModel].calculated){d[f.setWidth](b)}},completeLayout:function(b){var m=this,j=b.invalidateScrollX,h=b.invalidateScrollY,c=m.overflowHandler,o=b.scrollRestore,f,a,g,d,p;if(c){c.completeLayout(b)}if(j||h){a=m.getTarget();f=a.dom;p=f.style;if(j){g=a.getStyle("overflowX");if(g==="auto"){g=p.overflowX;p.overflowX="scroll"}else{j=false}}if(h){d=a.getStyle("overflowY");if(d==="auto"){d=p.overflowY;p.overflowY="scroll"}else{h=false}}if(j||h){f.scrollWidth;if(j){p.overflowX=g}if(h){p.overflowY=d}}}if(o){b.ownerScrollable.scrollTo(o.x,o.y)}},finishedLayout:function(b){var a=this.overflowHandler;if(a){a.finishedLayout(b)}Ext.layout.container.Container.prototype.finishedLayout.apply(this,arguments)},getLayoutItems:function(){var j=Ext.layout.container.Container.prototype.getLayoutItems.call(this),b=j.length,f,d,c,m,h,g,a;for(c=0;c<b;++c){if((m=j[c]).isSplitter){continue}a=m.splitter;if(m.hidden){if(a){if(!a.hidden){a.hidden=true;if(a.el){a.el.hide()}}}continue}if(a){g=a.collapseTarget==="next"}else{g=false}d=null;if(f&&h){if(h.hidden){h.hidden=false;if(h.el){h.el.show()}}if(g){d=true}}else{if(g){d=!f}}if(d!==null&&a.hidden!==d){a.hidden=d;if(a.el){a.el.setVisible(!d)}}h=!g&&a;f=m}if(f&&h&&!h.hidden){h.hidden=true;if(h.el){h.el.hide()}}return j},getScrollerEl:function(){return this.innerCt},insertSplitter:function(d,c,g,b){var f={xtype:"splitter",id:d.id+"-splitter",hidden:g,splitterFor:d,synthetic:true},a=c+((b.collapseTarget==="prev")?1:0);f[this.names.height]="100%";if(b){Ext.apply(f,b)}d.splitter=this.owner.add(a,f)},publishInnerCtSize:function(b,d){d=d||0;var m=this,a=b.state,j=b.boxNames,h=j.height,p=j.width,g=b.boxOptions.align,r=m.padding,o=a.boxPlan,f=o.targetSize,t=o.maxSize,q=a.needsScroll,u=b.innerCtContext,c,s;if(b.parallelSizeModel.shrinkWrap||(o.tooNarrow&&a.canScroll)){c=a.contentWidth-b.targetContext.getPaddingInfo()[p]}else{c=f[p];if(q&&q.perpendicular){c-=Ext.getScrollbarSize()[p]}}c-=d;m.owner.tooNarrow=o.tooNarrow;if(g.stretch){s=t}else{s=o.maxSize+r[j.beforeY]+r[j.afterY]+u.getBorderInfo()[h];if(!b.perpendicularSizeModel.shrinkWrap&&(g.center||g.bottom)){s=Math.max(f[h],s)}}u[j.setWidth](c);u[j.setHeight](s);b.targetElContext.setWidth(b.innerCtContext.props.width-(m.vertical?0:(d||0)));if(isNaN(c+s)){m.done=false}},onAdd:function(d,a){var c=this,b=c.enableSplitters&&d.split&&!d.isButton;Ext.layout.container.Container.prototype.onAdd.apply(this,arguments);if(b){if(b===true){b={collapseTarget:"next"}}else{if(Ext.isString(b)){b={collapseTarget:b==="before"?"next":"prev"}}else{b=Ext.apply({collapseTarget:b.side==="before"?"next":"prev"},b)}}c.insertSplitter(d,a,!!d.hidden,b)}},onRemove:function(b,f){var g=this,j=g.names,a=g.owner,h=b.splitter,c=g.overflowHandler,d;Ext.layout.container.Container.prototype.onRemove.apply(this,arguments);if(h&&a.contains(h)){a.doRemove(h,true);b.splitter=null}if(c){c.onRemove(b)}if(b.layoutMarginCap===g.id){delete b.layoutMarginCap}if(!a.destroying&&!f&&b.rendered){d=b.getEl();if(d){d.setStyle(j.beforeY,"");d.setStyle(j.beforeX,"");d.setStyle("margin","")}}},applyOverflowHandler:function(b,a){var c;if(typeof b==="string"){b={type:b}}c=b.type;if(a&&a.type===b.type){delete b.type;a.setConfig(b);return a}b.layout=this;return Ext.Factory.boxOverflow(b)},getRenderTarget:function(){return this.targetEl},getElementTarget:function(){return this.innerCt},destroy:function(){var a=this;Ext.destroy(a.innerCt,a.overflowHandler);a.flexSortFn=a.innerCt=null;Ext.layout.container.Container.prototype.destroy.call(this)},getRenderData:function(){var a=Ext.layout.container.Container.prototype.getRenderData.call(this);a.targetElCls=this.targetElCls;return a},updateVertical:function(b){var f=this,c=f.overflowHandler,a=f.owner,d=f._props;Ext.apply(f,b?d.vbox:d.hbox);if(c&&a&&a.rendered){c.setVertical(b)}},_props:{hbox:{direction:"horizontal",oppositeDirection:"vertical",horizontal:true,vertical:false,names:{beforeX:"left",beforeScrollX:"left",leftCap:"Left",afterX:"right",width:"width",contentWidth:"contentWidth",minWidth:"minWidth",maxWidth:"maxWidth",widthCap:"Width",widthModel:"widthModel",widthIndex:0,x:"x",getX:"getX",setX:"setX",scrollLeft:"scrollLeft",overflowX:"overflowX",hasOverflowX:"hasOverflowX",invalidateScrollX:"invalidateScrollX",parallelMargins:"lr",center:"middle",beforeY:"top",afterY:"bottom",height:"height",contentHeight:"contentHeight",minHeight:"minHeight",maxHeight:"maxHeight",heightCap:"Height",heightModel:"heightModel",heightIndex:1,y:"y",getY:"getY",setY:"setY",overflowY:"overflowY",hasOverflowY:"hasOverflowY",invalidateScrollY:"invalidateScrollY",perpendicularMargins:"tb",getWidth:"getWidth",getHeight:"getHeight",setWidth:"setWidth",setHeight:"setHeight",gotWidth:"gotWidth",gotHeight:"gotHeight",setContentWidth:"setContentWidth",setContentHeight:"setContentHeight",setWidthInDom:"setWidthInDom",setHeightInDom:"setHeightInDom",getScrollLeft:"getScrollLeft",setScrollLeft:"setScrollLeft",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:1}}},vbox:{direction:"vertical",oppositeDirection:"horizontal",horizontal:false,vertical:true,names:{beforeX:"top",beforeScrollX:"top",leftCap:"Top",afterX:"bottom",width:"height",contentWidth:"contentHeight",minWidth:"minHeight",maxWidth:"maxHeight",widthCap:"Height",widthModel:"heightModel",widthIndex:1,x:"y",getX:"getY",setX:"setY",scrollLeft:"scrollTop",overflowX:"overflowY",hasOverflowX:"hasOverflowY",invalidateScrollX:"invalidateScrollY",parallelMargins:"tb",center:"center",beforeY:"left",afterY:"right",height:"width",contentHeight:"contentWidth",minHeight:"minWidth",maxHeight:"maxWidth",heightCap:"Width",heightModel:"widthModel",heightIndex:0,y:"x",getY:"getX",setY:"setX",overflowY:"overflowX",hasOverflowY:"hasOverflowX",invalidateScrollY:"invalidateScrollX",perpendicularMargins:"lr",getWidth:"getHeight",getHeight:"getWidth",setWidth:"setHeight",setHeight:"setWidth",gotWidth:"gotHeight",gotHeight:"gotWidth",setContentWidth:"setContentHeight",setContentHeight:"setContentWidth",setWidthInDom:"setHeightInDom",setHeightInDom:"setWidthInDom",getScrollLeft:"getScrollTop",setScrollLeft:"setScrollTop",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:0,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:1,setsHeight:0}}}}},1,0,0,0,["layout.box"],0,[Ext.layout.container,"Box",Ext.layout,"BoxLayout"],0));(Ext.cmd.derive("Ext.layout.container.HBox",Ext.layout.container.Box,{alternateClassName:"Ext.layout.HBoxLayout",type:"hbox",vertical:false},0,0,0,0,["layout.hbox"],0,[Ext.layout.container,"HBox",Ext.layout,"HBoxLayout"],0));(Ext.cmd.derive("Ext.layout.container.VBox",Ext.layout.container.Box,{alternateClassName:"Ext.layout.VBoxLayout",type:"vbox",vertical:true},0,0,0,0,["layout.vbox"],0,[Ext.layout.container,"VBox",Ext.layout,"VBoxLayout"],0));(Ext.cmd.derive("Ext.toolbar.Toolbar",Ext.container.Container,{alternateClassName:"Ext.Toolbar",isToolbar:true,baseCls:"x-toolbar",ariaRole:"toolbar",defaultType:"button",layout:undefined,vertical:undefined,enableOverflow:false,overflowHandler:null,defaultButtonUI:"default-toolbar",defaultFieldUI:"default",defaultFooterButtonUI:"default",defaultFooterFieldUI:"default",trackMenus:true,itemCls:"x-toolbar-item",statics:{shortcuts:{"-":"tbseparator"," ":"tbspacer"},shortcutsHV:{0:{"->":{xtype:"tbfill",height:0}},1:{"->":{xtype:"tbfill",width:0}}}},initComponent:function(){var c=this,b=c.layout,a=c.vertical;if(a===undefined){c.vertical=a=c.dock==="right"||c.dock==="left"}c.layout=b=Ext.applyIf(Ext.isString(b)?{type:b}:b||{},{type:a?"vbox":"hbox",align:a?"stretchmax":"middle"});if(c.overflowHandler){b.overflowHandler=c.overflowHandler}else{if(c.enableOverflow){b.overflowHandler="menu"}}if(a){c.addClsWithUI("vertical")}if(c.ui==="footer"){c.ignoreBorderManagement=true}Ext.container.Container.prototype.initComponent.call(this)},getRefItems:function(a){var f=this,b=Ext.container.Container.prototype.getRefItems.apply(this,arguments),d=f.layout,c;if(a&&(f.enableOverflow||(f.overflowHandler==="menu"))){c=d.overflowHandler;if(c&&c.menu){b=b.concat(c.menu.getRefItems(a))}}return b},lookupComponent:function(f){var d=arguments,a,b;if(typeof f==="string"){b=Ext.toolbar.Toolbar;a=b.shortcutsHV[this.vertical?1:0][f]||b.shortcuts[f];if(typeof a==="string"){f={xtype:a}}else{if(a){f=Ext.apply({},a)}else{f={xtype:"tbtext",text:f}}}this.applyDefaults(f);d=[f]}return Ext.container.Container.prototype.lookupComponent.apply(this,d)},onBeforeAdd:function(b){var c=this,d=c.ui==="footer",a=d?c.defaultFooterButtonUI:c.defaultButtonUI;if(b.isSegmentedButton){if(b.getDefaultUI()==="default"&&!b.config.hasOwnProperty("defaultUI")){b.setDefaultUI(a)}}else{if(b.ui==="default"&&!b.hasOwnProperty("ui")){if(b.isButton){b.ui=a}else{if(b.isFormField){b.ui=d?c.defaultFooterFieldUI:c.defaultFieldUI}}}}if(b instanceof Ext.toolbar.Separator){b.setUI(c.vertical?"vertical":"horizontal")}Ext.container.Container.prototype.onBeforeAdd.apply(this,arguments)},onAdd:function(a){if(a.needArrowKeys&&this.enableFocusableContainer){this.enableFocusableContainer=false}Ext.container.Container.prototype.onAdd.apply(this,arguments);this.trackMenu(a)},onRemove:function(a){Ext.container.Container.prototype.onRemove.apply(this,arguments);this.trackMenu(a,true)},privates:{applyDefaults:function(a){if(!Ext.isString(a)){a=Ext.container.Container.prototype.applyDefaults.apply(this,arguments)}return a},trackMenu:function(c,a){var b=this;if(b.trackMenus&&c.menu){c[a?"un":"on"]({mouseover:b.onButtonOver,menushow:b.onButtonMenuShow,menuhide:b.onButtonMenuHide,scope:b})}},getChildItemsToDisable:function(){return this.items.getRange()},onButtonOver:function(b,c){var a=this.activeMenuBtn;if(a&&a!==b){a.hideMenu();b.focus();b.showMenu(c);this.activeMenuBtn=b}},onButtonMenuShow:function(a){this.activeMenuBtn=a},onButtonMenuHide:function(a){this.activeMenuBtn=null}}},0,["toolbar"],["component","box","container","toolbar"],{component:true,box:true,container:true,toolbar:true},["widget.toolbar"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.toolbar,"Toolbar",Ext,"Toolbar"],0));Ext.define("Ext.theme.neptune.toolbar.Toolbar",{override:"Ext.toolbar.Toolbar",usePlainButtons:false,border:false});(Ext.cmd.derive("Ext.dd.DragDrop",Ext.Base,{constructor:function(c,a,b){if(c){this.init(c,a,b)}},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},moveOnly:false,unlock:function(){this.locked=false},isTarget:true,padding:null,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,triggerEvent:"mousedown",b4StartDrag:function(a,b){},startDrag:function(a,b){},b4Drag:function(a){},onDrag:function(a){},onDragEnter:function(a,b){},b4DragOver:function(a){},onDragOver:function(a,b){},b4DragOut:function(a){},onDragOut:function(a,b){},b4DragDrop:function(a){},onDragDrop:function(a,b){},onInvalidDrop:function(a){},b4EndDrag:function(a){},endDrag:function(a){},b4MouseDown:function(a){},onMouseDown:function(a){},onMouseUp:function(a){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(f,b,p){if(Ext.isNumber(b)){b={left:b,right:b,top:b,bottom:b}}b=b||this.defaultPadding;var h=Ext.get(this.getEl()).getBox(),q=Ext.get(f),o=q.getScroll(),g,j=q.dom,m,d,a;if(j===document.body){g={x:o.left,y:o.top,width:Ext.Element.getViewportWidth(),height:Ext.Element.getViewportHeight()}}else{m=q.getXY();g={x:m[0],y:m[1],width:j.clientWidth,height:j.clientHeight}}d=h.y-g.y;a=h.x-g.x;this.resetConstraints();this.setXConstraint(a-(b.left||0),g.width-a-h.width-(b.right||0),this.xTickSize);this.setYConstraint(d-(b.top||0),g.height-d-h.height-(b.bottom||0),this.yTickSize)},getEl:function(){if(!this._domRef){this._domRef=Ext.getDom(this.id)}return this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(d,a,b){var c=this;c.el=c.el||Ext.get(d);c.initTarget(d,a,b);Ext.get(c.id).on(c.triggerEvent,c.handleMouseDown,c)},initTarget:function(c,a,b){this.config=b||{};this.DDMInstance=Ext.dd.DragDropManager;this.groups={};if(typeof c!=="string"){c=Ext.id(c)}this.id=c;this.addToGroup((a)?a:"default");this.handleElId=c;this.setDragElId(c);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false)},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(c,a,d,b){if(!a&&0!==a){this.padding=[c,c,c,c]}else{if(!d&&0!==d){this.padding=[c,a,c,a]}else{this.padding=[c,a,d,b]}}},setInitPosition:function(d,c){var f=this.getEl(),b,a,g;if(!this.DDMInstance.verifyEl(f)){return}b=d||0;a=c||0;g=Ext.fly(f).getXY();this.initPageX=g[0]-b;this.initPageY=g[1]-a;this.lastPageX=g[0];this.lastPageY=g[1];this.setStartPosition(g)},setStartPosition:function(b){var a=b||Ext.fly(this.getEl()).getXY();this.deltaSetXY=null;this.startPageX=a[0];this.startPageY=a[1]},addToGroup:function(a){this.groups[a]=true;this.DDMInstance.regDragDrop(this,a)},removeFromGroup:function(a){if(this.groups[a]){delete this.groups[a]}this.DDMInstance.removeDDFromGroup(this,a)},setDragElId:function(a){this.dragElId=a},setHandleElId:function(a){if(typeof a!=="string"){a=Ext.id(a)}this.handleElId=a;this.DDMInstance.regHandle(this.id,a)},setOuterHandleElId:function(a){if(typeof a!=="string"){a=Ext.id(a)}Ext.get(a).on(this.triggerEvent,this.handleMouseDown,this);this.setHandleElId(a);this.hasOuterHandles=true},unreg:function(){var b=this,a;if(b._domRef){a=Ext.fly(b.id);if(a){a.un(b.triggerEvent,b.handleMouseDown,b)}}b._domRef=null;b.DDMInstance._remove(b,b.autoGroup)},destroy:function(){this.unreg();this.callParent()},isLocked:function(){return(this.DDMInstance.isLocked()||this.locked)},handleMouseDown:function(c,b){var a=this;if((a.primaryButtonOnly&&c.button)||a.isLocked()){return}a.DDMInstance.refreshCache(a.groups);if(a.hasOuterHandles||a.DDMInstance.isOverTarget(c.getPoint(),a)){if(a.clickValidator(c)){a.setStartPosition();a.b4MouseDown(c);a.onMouseDown(c);a.DDMInstance.handleMouseDown(c,a);a.DDMInstance.stopEvent(c)}}},clickValidator:function(b){var a=b.getTarget();return(this.isValidHandleChild(a)&&(this.id===this.handleElId||this.DDMInstance.handleWasClicked(a,this.id)))},addInvalidHandleType:function(a){var b=a.toUpperCase();this.invalidHandleTypes[b]=b},addInvalidHandleId:function(a){if(typeof a!=="string"){a=Ext.id(a)}this.invalidHandleIds[a]=a},addInvalidHandleClass:function(a){this.invalidHandleClasses.push(a)},removeInvalidHandleType:function(a){var b=a.toUpperCase();delete this.invalidHandleTypes[b]},removeInvalidHandleId:function(a){if(typeof a!=="string"){a=Ext.id(a)}delete this.invalidHandleIds[a]},removeInvalidHandleClass:function(b){var d=this.invalidHandleClasses,a=d.length,c;for(c=0;c<a;++c){if(d[c]===b){delete d[c]}}},isValidHandleChild:function(d){var c=true,g,b,a;try{g=d.nodeName.toUpperCase()}catch(f){g=d.nodeName}c=c&&!this.invalidHandleTypes[g];c=c&&!this.invalidHandleIds[d.id];for(b=0,a=this.invalidHandleClasses.length;c&&b<a;++b){c=!Ext.fly(d).hasCls(this.invalidHandleClasses[b])}return c},setXTicks:function(d,a){this.xTicks=[];this.xTickSize=a;var c={},b;for(b=this.initPageX;b>=this.minX;b=b-a){if(!c[b]){this.xTicks[this.xTicks.length]=b;c[b]=true}}for(b=this.initPageX;b<=this.maxX;b=b+a){if(!c[b]){this.xTicks[this.xTicks.length]=b;c[b]=true}}Ext.Array.sort(this.xTicks,this.DDMInstance.numericSort)},setYTicks:function(d,a){this.yTicks=[];this.yTickSize=a;var c={},b;for(b=this.initPageY;b>=this.minY;b=b-a){if(!c[b]){this.yTicks[this.yTicks.length]=b;c[b]=true}}for(b=this.initPageY;b<=this.maxY;b=b+a){if(!c[b]){this.yTicks[this.yTicks.length]=b;c[b]=true}}Ext.Array.sort(this.yTicks,this.DDMInstance.numericSort)},setXConstraint:function(c,b,a){this.leftConstraint=c;this.rightConstraint=b;this.minX=this.initPageX-c;this.maxX=this.initPageX+b;if(a){this.setXTicks(this.initPageX,a)}this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(a,c,b){this.topConstraint=a;this.bottomConstraint=c;this.minY=this.initPageY-a;this.maxY=this.initPageY+c;if(b){this.setYTicks(this.initPageY,b)}this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var b=(this.maintainOffset)?this.lastPageX-this.initPageX:0,a=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(b,a)}else{this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(h,d){if(!d){return h}else{if(d[0]>=h){return d[0]}else{var b,a,c,g,f;for(b=0,a=d.length;b<a;++b){c=b+1;if(d[c]&&d[c]>=h){g=h-d[b];f=d[c]-h;return(f>g)?d[b]:d[c]}}return d[d.length-1]}}},toString:function(){return("DragDrop "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DragDrop"],0));(Ext.cmd.derive("Ext.dd.DD",Ext.dd.DragDrop,{constructor:function(c,a,b){if(c){this.init(c,a,b)}},scroll:true,autoOffset:function(c,b){var a=c-this.startPageX,d=b-this.startPageY;this.setDelta(a,d)},setDelta:function(b,a){this.deltaX=b;this.deltaY=a},setDragElPos:function(c,b){var a=this.getDragEl();this.alignElWithMouse(a,c,b)},alignElWithMouse:function(b,f,c){var g=this.getTargetCoord(f,c),d=b.dom?b:Ext.fly(b,"_dd"),p=d.getSize(),j=Ext.Element,m,a,o,h;if(!this.deltaSetXY){m=this.cachedViewportSize={width:j.getDocumentWidth(),height:j.getDocumentHeight()};a=[Math.max(0,Math.min(g.x,m.width-p.width)),Math.max(0,Math.min(g.y,m.height-p.height))];d.setXY(a);o=this.getLocalX(d);h=d.getLocalY();this.deltaSetXY=[o-g.x,h-g.y]}else{m=this.cachedViewportSize;this.setLocalXY(d,Math.max(0,Math.min(g.x+this.deltaSetXY[0],m.width-p.width)),Math.max(0,Math.min(g.y+this.deltaSetXY[1],m.height-p.height)))}this.cachePosition(g.x,g.y);this.autoScroll(g.x,g.y,b.offsetHeight,b.offsetWidth);return g},cachePosition:function(b,a){if(b){this.lastPageX=b;this.lastPageY=a}else{var c=Ext.fly(this.getEl()).getXY();this.lastPageX=c[0];this.lastPageY=c[1]}},autoScroll:function(p,o,f,q){if(this.scroll){var r=Ext.Element.getViewportHeight(),b=Ext.Element.getViewportWidth(),t=this.DDMInstance.getScrollTop(),d=this.DDMInstance.getScrollLeft(),m=f+o,s=q+p,j=(r+t-o-this.deltaY),g=(b+d-p-this.deltaX),c=40,a=(document.all)?80:30;if(m>r&&j<c){window.scrollTo(d,t+a)}if(o<t&&t>0&&o-t<c){window.scrollTo(d,t-a)}if(s>b&&g<c){window.scrollTo(d+a,t)}if(p<d&&d>0&&p-d<c){window.scrollTo(d-a,t)}}},getTargetCoord:function(c,b){var a=c-this.deltaX,d=b-this.deltaY;if(this.constrainX){if(a<this.minX){a=this.minX}if(a>this.maxX){a=this.maxX}}if(this.constrainY){if(d<this.minY){d=this.minY}if(d>this.maxY){d=this.maxY}}a=this.getTick(a,this.xTicks);d=this.getTick(d,this.yTicks);return{x:a,y:d}},applyConfig:function(){Ext.dd.DragDrop.prototype.applyConfig.call(this);this.scroll=(this.config.scroll!==false)},b4MouseDown:function(b){var a=b.getXY();this.autoOffset(a[0],a[1])},b4Drag:function(b){var a=b.getXY();this.setDragElPos(a[0],a[1])},toString:function(){return("DD "+this.id)},getLocalX:function(a){return a.getLocalX()},setLocalXY:function(b,a,c){b.setLocalXY(a,c)}},3,0,0,0,0,0,[Ext.dd,"DD"],0));(Ext.cmd.derive("Ext.dd.DDProxy",Ext.dd.DD,{statics:{dragElId:"ygddfdiv"},constructor:function(c,a,b){if(c){this.init(c,a,b);this.initFrame()}},resizeFrame:true,centerFrame:false,createFrame:function(){var b=this,a=document.body,d,c;if(!a||!a.firstChild){Ext.defer(function(){b.createFrame()},50);return}d=this.getDragEl();if(!d){d=document.createElement("div");d.id=this.dragElId;d.setAttribute("role","presentation");c=d.style;c.position="absolute";c.visibility="hidden";c.cursor="move";c.border="2px solid #aaa";c.zIndex=999;a.insertBefore(d,a.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DD.prototype.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(f,d){var c=this,a=c.getDragEl(),b=a.style;c._resizeProxy();if(c.centerFrame){c.setDelta(Math.round(parseInt(b.width,10)/2),Math.round(parseInt(b.height,10)/2))}c.setDragElPos(f,d);Ext.fly(a).show()},_resizeProxy:function(){if(this.resizeFrame){var a=this.getEl();Ext.fly(this.getDragEl()).setSize(a.offsetWidth,a.offsetHeight)}},b4MouseDown:function(c){var b=c.getXY(),a=b[0],d=b[1];this.autoOffset(a,d);this.setDragElPos(a,d)},b4StartDrag:function(a,b){this.showFrame(a,b)},b4EndDrag:function(a){Ext.fly(this.getDragEl()).hide()},endDrag:function(c){var b=this.getEl(),a=this.getDragEl();a.style.visibility="";this.beforeMove();b.style.visibility="hidden";Ext.dd.DDM.moveToEl(b,a);a.style.visibility="hidden";b.style.visibility="";this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return("DDProxy "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DDProxy"],0));(Ext.cmd.derive("Ext.dd.StatusProxy",Ext.Component,{animRepair:false,childEls:["ghost"],renderTpl:['<div class="x-dd-drop-icon" role="presentation"></div><div id="{id}-ghost" data-ref="ghost" class="x-dd-drag-ghost" role="presentation"></div>'],repairCls:"x-dd-drag-repair",ariaRole:"presentation",skipLayout:true,constructor:function(a){var b=this;a=a||{};Ext.apply(b,{hideMode:"visibility",hidden:true,floating:true,id:b.id||Ext.id(),cls:"x-dd-drag-proxy "+this.dropNotAllowed,shadow:a.shadow||false,renderTo:Ext.getDetachedBody()});Ext.Component.prototype.constructor.apply(this,arguments);this.dropStatus=this.dropNotAllowed},dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",setStatus:function(a){a=a||this.dropNotAllowed;if(this.dropStatus!==a){this.el.replaceCls(this.dropStatus,a);this.dropStatus=a}},reset:function(b){var c=this,a="x-dd-drag-proxy ";c.el.replaceCls(a+c.dropAllowed,a+c.dropNotAllowed);c.dropStatus=c.dropNotAllowed;if(b){c.ghost.setHtml("")}},update:function(a){if(typeof a==="string"){this.ghost.setHtml(a)}else{this.ghost.setHtml("");a.style.margin="0";this.ghost.dom.appendChild(a)}var b=this.ghost.dom.firstChild;if(b){Ext.fly(b).setStyle("float","none")}},getGhost:function(){return this.ghost},hide:function(a){Ext.Component.prototype.hide.call(this);if(a){this.reset(true)}},stop:function(){if(this.anim&&this.anim.isAnimated&&this.anim.isAnimated()){this.anim.stop()}},sync:function(){this.el.syncUnderlays()},repair:function(c,d,a){var b=this;b.callback=d;b.scope=a;if(c&&b.animRepair!==false){b.el.addCls(b.repairCls);b.el.setUnderlaysVisible(false);b.anim=b.el.animate({duration:b.repairDuration||500,easing:"ease-out",to:{x:c[0],y:c[1]},stopAnimation:true,callback:b.afterRepair,scope:b})}else{b.afterRepair()}},afterRepair:function(){var a=this;a.hide(true);a.el.removeCls(a.repairCls);if(typeof a.callback==="function"){a.callback.call(a.scope||a)}delete a.callback;delete a.scope}},1,0,["component","box"],{component:true,box:true},0,0,[Ext.dd,"StatusProxy"],0));(Ext.cmd.derive("Ext.dd.DragSource",Ext.dd.DDProxy,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",animRepair:true,repairHighlightColor:"c3daf9",constructor:function(b,a){this.el=Ext.get(b);if(!this.dragData){this.dragData={}}Ext.apply(this,a);if(!this.proxy){this.proxy=new Ext.dd.StatusProxy({id:this.el.id+"-drag-status-proxy",animRepair:this.animRepair})}Ext.dd.DDProxy.prototype.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:false,isTarget:false,scroll:this.scroll===true});this.dragging=false},getDragData:function(a){return this.dragData},onDragEnter:function(c,d){var b=Ext.dd.DragDropManager.getDDById(d),a;this.cachedTarget=b;if(this.beforeDragEnter(b,c,d)!==false){if(b.isNotifyTarget){a=b.notifyEnter(this,c,this.dragData);this.proxy.setStatus(a)}else{this.proxy.setStatus(this.dropAllowed)}if(this.afterDragEnter){this.afterDragEnter(b,c,d)}}},beforeDragEnter:function(b,a,c){return true},onDragOver:function(c,d){var b=this.cachedTarget||Ext.dd.DragDropManager.getDDById(d),a;if(this.beforeDragOver(b,c,d)!==false){if(b.isNotifyTarget){a=b.notifyOver(this,c,this.dragData);this.proxy.setStatus(a)}if(this.afterDragOver){this.afterDragOver(b,c,d)}}},beforeDragOver:function(b,a,c){return true},onDragOut:function(b,c){var a=this.cachedTarget||Ext.dd.DragDropManager.getDDById(c);if(this.beforeDragOut(a,b,c)!==false){if(a.isNotifyTarget){a.notifyOut(this,b,this.dragData)}this.proxy.reset();if(this.afterDragOut){this.afterDragOut(a,b,c)}}this.cachedTarget=null},beforeDragOut:function(b,a,c){return true},onDragDrop:function(b,c){var a=this.cachedTarget||Ext.dd.DragDropManager.getDDById(c);if(this.beforeDragDrop(a,b,c)!==false){if(a.isNotifyTarget){if(a.notifyDrop(this,b,this.dragData)!==false){this.onValidDrop(a,b,c)}else{this.onInvalidDrop(a,b,c)}}else{this.onValidDrop(a,b,c)}if(this.afterDragDrop){this.afterDragDrop(a,b,c)}}delete this.cachedTarget},beforeDragDrop:function(b,a,c){return true},onValidDrop:function(b,a,c){this.hideProxy();if(this.afterValidDrop){this.afterValidDrop(b,a,c)}},getRepairXY:function(b,a){return this.el.getXY()},onInvalidDrop:function(c,b,d){var a=this;if(!b){b=c;c=null;d=b.getTarget().id}if(a.beforeInvalidDrop(c,b,d)!==false){if(a.cachedTarget){if(a.cachedTarget.isNotifyTarget){a.cachedTarget.notifyOut(a,b,a.dragData)}a.cacheTarget=null}a.proxy.repair(a.getRepairXY(b,a.dragData),a.afterRepair,a);if(a.afterInvalidDrop){a.afterInvalidDrop(b,d)}}},afterRepair:function(){var a=this;if(Ext.enableFx){a.el.highlight(a.repairHighlightColor)}a.dragging=false},beforeInvalidDrop:function(b,a,c){return true},handleMouseDown:function(b){if(this.dragging){return}var a=this.getDragData(b);if(a&&this.onBeforeDrag(a,b)!==false){this.dragData=a;this.proxy.stop();Ext.dd.DDProxy.prototype.handleMouseDown.apply(this,arguments)}},onBeforeDrag:function(a,b){return true},onStartDrag:Ext.emptyFn,alignElWithMouse:function(){this.proxy.ensureAttachedToBody(true);return Ext.dd.DDProxy.prototype.alignElWithMouse.apply(this,arguments)},startDrag:function(a,b){this.proxy.reset();this.proxy.hidden=false;this.dragging=true;this.proxy.update("");this.onInitDrag(a,b);this.proxy.show()},onInitDrag:function(a,c){var b=this.el.dom.cloneNode(true);b.id=Ext.id();this.proxy.update(b);this.onStartDrag(a,c);return true},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide();this.proxy.reset(true);this.dragging=false},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(a){},endDrag:function(a){this.onEndDrag(this.dragData,a)},onEndDrag:function(a,b){},autoOffset:function(a,b){this.setDelta(-12,-20)},destroy:function(){Ext.dd.DDProxy.prototype.destroy.call(this);Ext.destroy(this.proxy)}},1,0,0,0,0,0,[Ext.dd,"DragSource"],0));(Ext.cmd.derive("Ext.panel.Proxy",Ext.Base,{alternateClassName:"Ext.dd.PanelProxy",moveOnDrag:true,constructor:function(a,b){var c=this;c.panel=a;c.id=c.panel.id+"-ddproxy";Ext.apply(c,b)},insertProxy:true,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost.el},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){var a=this;if(a.ghost){if(a.proxy){a.proxy.destroy();delete a.proxy}a.panel.unghost(null,a.moveOnDrag);delete a.ghost}},show:function(){var b=this,a;if(!b.ghost){a=b.panel.getSize();b.panel.el.setVisibilityMode(Ext.Element.DISPLAY);b.ghost=b.panel.ghost();if(b.insertProxy){b.proxy=b.panel.el.insertSibling({role:"presentation",cls:"x-panel-dd-spacer"});b.proxy.setSize(a)}}},repair:function(b,c,a){this.hide();Ext.callback(c,a||this)},moveProxy:function(a,b){if(this.proxy){a.insertBefore(this.proxy.dom,b)}}},1,0,0,0,0,0,[Ext.panel,"Proxy",Ext.dd,"PanelProxy"],0));(Ext.cmd.derive("Ext.panel.DD",Ext.dd.DragSource,{constructor:function(b,a){var c=this;c.panel=b;c.dragData={panel:b};c.panelProxy=new Ext.panel.Proxy(b,a);c.proxy=c.panelProxy.proxy;Ext.dd.DragSource.prototype.constructor.call(this,b.el,a);c.setupEl(b)},setupEl:function(a){var c=this,d=a.header,b=a.body;if(d){c.setHandleElId(d.id);b=d.el}if(b){b.setStyle("cursor","move");c.scroll=false}else{a.on("boxready",c.setupEl,c,{single:true})}},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(a,b){this.panelProxy.show()},b4MouseDown:function(c){var b=c.getXY(),a=b[0],d=b[1];this.autoOffset(a,d)},onInitDrag:function(a,b){this.onStartDrag(a,b);return true},createFrame:Ext.emptyFn,getDragEl:function(b){var a=this.panelProxy.ghost;if(a){return a.el.dom}},endDrag:function(a){this.panelProxy.hide();this.panel.saveState()},autoOffset:function(a,b){a-=this.startPageX;b-=this.startPageY;this.setDelta(a,b)},onInvalidDrop:function(c,b,d){var a=this;if(a.beforeInvalidDrop(c,b,d)!==false){if(a.cachedTarget){if(a.cachedTarget.isNotifyTarget){a.cachedTarget.notifyOut(a,b,a.dragData)}a.cacheTarget=null}if(a.afterInvalidDrop){a.afterInvalidDrop(b,d)}}}},1,0,0,0,0,0,[Ext.panel,"DD"],0));(Ext.cmd.derive("Ext.layout.component.Dock",Ext.layout.component.Component,{alternateClassName:"Ext.layout.component.AbstractDock",type:"dock",horzAxisProps:{name:"horz",oppositeName:"vert",dockBegin:"left",dockEnd:"right",horizontal:true,marginBegin:"margin-left",maxSize:"maxWidth",minSize:"minWidth",pos:"x",setSize:"setWidth",shrinkWrapDock:"shrinkWrapDockWidth",size:"width",sizeModel:"widthModel"},vertAxisProps:{name:"vert",oppositeName:"horz",dockBegin:"top",dockEnd:"bottom",horizontal:false,marginBegin:"margin-top",maxSize:"maxHeight",minSize:"minHeight",pos:"y",setSize:"setHeight",shrinkWrapDock:"shrinkWrapDockHeight",size:"height",sizeModel:"heightModel"},initializedBorders:-1,horizontalCollapsePolicy:{width:true,x:true},verticalCollapsePolicy:{height:true,y:true},finishRender:function(){var b=this,c,a;Ext.layout.component.Component.prototype.finishRender.call(this);c=b.getRenderTarget();a=b.getDockedItems();b.finishRenderItems(c,a)},isItemBoxParent:function(a){return true},isItemShrinkWrap:function(a){return true},noBorderClasses:["x-docked-noborder-top","x-docked-noborder-right","x-docked-noborder-bottom","x-docked-noborder-left"],noBorderClassesSides:{top:"x-docked-noborder-top",right:"x-docked-noborder-right",bottom:"x-docked-noborder-bottom",left:"x-docked-noborder-left"},borderWidthProps:{top:"border-top-width",right:"border-right-width",bottom:"border-bottom-width",left:"border-left-width"},_itemCls:"x-docked",handleItemBorders:function(){var p=this,a=p.owner,o,t,h=p.lastDockedItems,g=p.borders,b=a.dockedItems.generation,c=p.noBorderClassesSides,q=p.borderWidthProps,f,m,s,r,j,d=p.collapsed;if(p.initializedBorders===b||(a.border&&!a.manageBodyBorders)||(a.collapsed&&a.collapseMode==="mini")){return}p.initializedBorders=b;p.collapsed=false;p.lastDockedItems=t=p.getLayoutItems();p.collapsed=d;o={top:[],right:[],bottom:[],left:[]};for(f=0,m=t.length;f<m;f++){s=t[f];r=s.dock;if(s.ignoreBorderManagement){continue}if(!o[r].satisfied){o[r].push(s);o[r].satisfied=true}if(!o.top.satisfied&&r!=="bottom"){o.top.push(s)}if(!o.right.satisfied&&r!=="left"){o.right.push(s)}if(!o.bottom.satisfied&&r!=="top"){o.bottom.push(s)}if(!o.left.satisfied&&r!=="right"){o.left.push(s)}}if(h){for(f=0,m=h.length;f<m;f++){s=h[f];if(!s.destroyed&&!s.ignoreBorderManagement&&!a.manageBodyBorders){s.removeCls(p.noBorderClasses)}}}if(g){for(j in g){if(a.manageBodyBorders&&g[j].satisfied){a.setBodyStyle(q[j],"")}}}for(j in o){m=o[j].length;if(!a.manageBodyBorders){for(f=0;f<m;f++){o[j][f].addCls(c[j])}if((!o[j].satisfied&&!a.bodyBorder)||a.bodyBorder===false){a.addBodyCls(c[j])}else{a.removeBodyCls(c[j])}}else{if(o[j].satisfied){a.setBodyStyle(q[j],"1px")}}}p.borders=o},beforeLayoutCycle:function(g){var c=this,b=c.owner,h=c.sizeModels.shrinkWrap,f=b.shrinkWrapDock,d,a;if(b.collapsed){if(b.collapsedVertical()){a=true;g.measureDimensions=1}else{d=true;g.measureDimensions=2}}g.collapsedVert=a;g.collapsedHorz=d;if(a){g.heightModel=h}else{if(d){g.widthModel=h}}f=f===true?3:(f||0);g.shrinkWrapDockHeight=(f&1)&&g.heightModel.shrinkWrap;g.shrinkWrapDockWidth=(f&2)&&g.widthModel.shrinkWrap},beginLayout:function(d){var o=this,c=o.owner,s=o.getLayoutItems(),b=d.context,g=s.length,m=o.lastCollapsedState,p,j,r,a,f,h,q;Ext.layout.component.Component.prototype.beginLayout.apply(this,arguments);h=c.getCollapsed();if(h!==m&&m!==undefined){if(o.owner.collapsed){d.isCollapsingOrExpanding=1;c.addClsWithUI(c.collapsedCls)}else{d.isCollapsingOrExpanding=2;c.removeClsWithUI(c.collapsedCls);d.lastCollapsedState=o.lastCollapsedState}}o.lastCollapsedState=h;d.dockedItems=p=[];for(j=0;j<g;j++){r=s[j];if(r.rendered){q=r.dock;a=b.getCmp(r);a.dockedAt={x:0,y:0};a.offsets=f=Ext.Element.parseBox(r.offsets||0);a.horizontal=q==="top"||q==="bottom";f.width=f.left+f.right;f.height=f.top+f.bottom;p.push(a)}}d.bodyContext=d.getEl("body")},beginLayoutCycle:function(b){var f=this,o=b.dockedItems,d=o.length,a=f.owner,g=a.frameBody,m=f.lastHeightModel,c,j,h;Ext.layout.component.Component.prototype.beginLayoutCycle.apply(this,arguments);if(f.owner.manageHeight){if(f.lastBodyDisplay){a.body.dom.style.display=f.lastBodyDisplay=""}}else{if(f.lastBodyDisplay!=="inline-block"){a.body.dom.style.display=f.lastBodyDisplay="inline-block"}if(m&&m.shrinkWrap&&!b.heightModel.shrinkWrap){a.body.dom.style.marginBottom=""}}if(b.widthModel.auto){if(b.widthModel.shrinkWrap){a.el.setWidth(null)}a.body.setWidth(null);if(g){g.setWidth(null)}}if(b.heightModel.auto){a.body.setHeight(null);if(g){g.setHeight(null)}}if(b.collapsedVert){b.setContentHeight(0)}else{if(b.collapsedHorz){b.setContentWidth(0)}}for(c=0;c<d;c++){j=o[c].target;h=j.dock;if(h==="right"){j.setLocalX(0)}else{if(h!=="left"){continue}}}},calculate:function(d){var p=this,c=p.measureAutoDimensions(d,d.measureDimensions),b=d.state,o=b.horzDone,f=b.vertDone,g=d.bodyContext,m,a,j,h,q;d.borderInfo||d.getBorderInfo();d.paddingInfo||d.getPaddingInfo();d.frameInfo||d.getFrameInfo();g.borderInfo||g.getBorderInfo();g.paddingInfo||g.getPaddingInfo();if(!d.frameBorder){if(!(m=d.framing)){d.frameBorder=d.borderInfo;d.framePadding=d.paddingInfo}else{d.frameBorder=m.border;d.framePadding=m.padding}}a=!o&&p.createAxis(d,c.contentWidth,d.widthModel,p.horzAxisProps,d.collapsedHorz);j=!f&&p.createAxis(d,c.contentHeight,d.heightModel,p.vertAxisProps,d.collapsedVert);for(h=0,q=d.dockedItems.length;q--;++h){if(a){p.dockChild(d,a,q,h)}if(j){p.dockChild(d,j,q,h)}}if(a&&p.finishAxis(d,a)){b.horzDone=o=a}if(j&&p.finishAxis(d,j)){b.vertDone=f=j}if(o&&f&&p.finishConstraints(d,o,f)){p.finishPositions(d,o,f)}else{p.done=false}},createAxis:function(t,m,f,q,d){var z=this,y=0,b=z.owner,g=b[q.maxSize],c=b[q.minSize]||0,r=q.dockBegin,j=q.dockEnd,v=q.pos,p=q.size,o=g!=null,s=f.shrinkWrap,a,w,u,h;if(s){if(d){h=0}else{a=t.bodyContext;h=m+a.borderInfo[p]}}else{w=t.frameBorder;u=t.framePadding;y=w[r]+u[r];h=t.getProp(p)-(w[j]+u[j])}return{shrinkWrap:f.shrinkWrap,sizeModel:f,initialBegin:y,begin:y,end:h,collapsed:d,horizontal:q.horizontal,ignoreFrameBegin:null,ignoreFrameEnd:null,initialSize:h-y,maxChildSize:0,hasMinMaxConstraints:(c||o)&&f.shrinkWrap,minSize:c,maxSize:o?g:1000000000,bodyPosProp:z.owner.manageHeight?v:q.marginBegin,dockBegin:r,dockEnd:j,posProp:v,sizeProp:p,setSize:q.setSize,shrinkWrapDock:t[q.shrinkWrapDock],sizeModelName:q.sizeModel,dockedPixelsEnd:0}},dockChild:function(b,c,p,f){var g=this,a=b.dockedItems[c.shrinkWrap?p:f],j=a.target,m=j.dock,d=c.sizeProp,h,o;if(j.ignoreParentFrame&&b.isCollapsingOrExpanding){a.clearMarginCache()}if(!a.marginInfo){a.getMarginInfo()}if(m===c.dockBegin){if(c.shrinkWrap){h=g.dockOutwardBegin(b,a,j,c)}else{h=g.dockInwardBegin(b,a,j,c)}}else{if(m===c.dockEnd){if(c.shrinkWrap){h=g.dockOutwardEnd(b,a,j,c)}else{h=g.dockInwardEnd(b,a,j,c)}}else{if(c.shrinkWrapDock){o=a.getProp(d)+a.marginInfo[d];c.maxChildSize=Math.max(c.maxChildSize,o);h=0}else{h=g.dockStretch(b,a,j,c)}}}a.dockedAt[c.posProp]=h},dockInwardBegin:function(b,a,m,d){var g=d.begin,f=d.sizeProp,c=m.ignoreParentFrame,h,o,j;if(c){d.ignoreFrameBegin=a;j=m.dock;h=b.frameBorder[j];g-=h+b.framePadding[j]}if(!m.overlay){o=a.getProp(f)+a.marginInfo[f];d.begin+=o;if(c){d.begin-=h}}return g},dockInwardEnd:function(f,d,c,b){var j=b.sizeProp,a=d.getProp(j)+d.marginInfo[j],h=b.end-a,g;if(!c.overlay){b.end=h}if(c.ignoreParentFrame){b.ignoreFrameEnd=d;g=f.frameBorder[c.dock];h+=g+f.framePadding[c.dock];b.end+=g}return h},dockOutwardBegin:function(f,d,c,b){var h=b.begin,g=b.sizeProp,a;if(b.collapsed){b.ignoreFrameBegin=b.ignoreFrameEnd=d}else{if(c.ignoreParentFrame){b.ignoreFrameBegin=d}}if(!c.overlay){a=d.getProp(g)+d.marginInfo[g];h-=a;b.begin=h}return h},dockOutwardEnd:function(f,d,c,b){var h=b.end,g=b.sizeProp,a;a=d.getProp(g)+d.marginInfo[g];if(b.collapsed){b.ignoreFrameBegin=b.ignoreFrameEnd=d}else{if(c.ignoreParentFrame){b.ignoreFrameEnd=d}}if(!c.overlay){b.end=h+a;b.dockedPixelsEnd+=a}return h},dockStretch:function(c,b,q,d){var r=q.dock,m=d.sizeProp,a=r==="top"||r==="bottom",j=c.frameBorder,f=b.offsets,p=c.framePadding,h=a?"right":"bottom",t=a?"left":"top",o=d.begin+f[t],g,s;if(q.stretch!==false){s=d.end-o-f[h];if(q.ignoreParentFrame){o-=p[t]+j[t];s+=p[m]+j[m]}g=b.marginInfo;s-=g[m];b[d.setSize](s)}return o},finishAxis:function(q,f){if(isNaN(f.maxChildSize)){return false}var d=f.begin,t=f.end-d,h=f.collapsed,B=f.setSize,o=f.dockBegin,z=f.dockEnd,s=q.framePadding,v=q.frameBorder,g=v[o],w=q.framing,r=w&&w[o],b=h?0:s[o],m=f.sizeProp,y=f.ignoreFrameBegin,u=f.ignoreFrameEnd,a=q.bodyContext,p=Math.max(g+b-r,0),c,C,A,j;if(f.shrinkWrap){C=f.initialSize;if(w){A=-d+g+b;c=A-r-p}else{c=-d;A=c+b}if(!h){t+=s[m]}if(y){A-=g;c-=g;y.dockedAt[f.posProp]-=b}else{t+=g}if(h){}else{if(u){u.dockedAt[f.posProp]+=s[z]}else{t+=v[z]}}f.size=t;if(!f.horizontal&&!this.owner.manageHeight){j=false}}else{if(w){A=0;c=d-r-p}else{A=-g;c=d-b-g}C=t}f.delta=A;a[B](C,j);a.setProp(f.bodyPosProp,c);return !isNaN(t)},beforeInvalidateShrinkWrapDock:function(c,b){var a=b.axis.sizeModelName;if(!c[a].constrainedMin){c[a]=Ext.layout.SizeModel.calculated}},afterInvalidateShrinkWrapDock:function(d,a){var b=a.axis,c=a.layout,f;if(d[b.sizeModelName].calculated){f=c.dockStretch(a.ownerContext,d,d.target,b);d.setProp(b.posProp,b.delta+f)}},finishConstraints:function(o,c,t){var w=this,v=w.sizeModels,s=c.shrinkWrap,u=t.shrinkWrap,a=w.owner,j,q,r,g,h,p,b,d,f,m;if(s){p=c.size;b=c.collapsed?0:c.minSize;d=c.maxSize;f=c.maxChildSize;m=Math.max(p,f);if(m>d){h=v.constrainedMax;r=d}else{if(m<b){h=v.constrainedMin;r=b}else{if(p<f){h=v.constrainedDock;a.dockConstrainedWidth=r=f}else{r=p}}}}if(u){p=t.size;b=t.collapsed?0:t.minSize;d=t.maxSize;f=t.maxChildSize;m=Math.max(p,f+p-t.initialSize);if(m>d){g=v.constrainedMax;q=d}else{if(m<b){g=v.constrainedMin;q=b}else{if(p<f){g=v.constrainedDock;a.dockConstrainedHeight=q=f}else{if(!o.collapsedVert&&!a.manageHeight){j=false;o.bodyContext.setProp("margin-bottom",t.dockedPixelsEnd)}q=p}}}}if(h||g){if(h&&g&&h.constrainedMax&&g.constrainedByMin){o.invalidate({widthModel:h});return false}if(!o.widthModel.calculatedFromShrinkWrap&&!o.heightModel.calculatedFromShrinkWrap){o.invalidate({widthModel:h,heightModel:g});return false}}else{w.invalidateAxes(o,c,t)}if(s){o.setWidth(r);if(h){o.widthModel=h}}if(u){o.setHeight(q,j);if(g){o.heightModel=g}}return true},invalidateAxes:function(g,a,o){var s=this.beforeInvalidateShrinkWrapDock,b=this.afterInvalidateShrinkWrapDock,f=a.end-a.begin,v=o.initialSize,c=a.shrinkWrapDock&&a.maxChildSize<=f,p=o.shrinkWrapDock&&o.maxChildSize<=v,t,q,m,d,u,r,h,j;if(c||p){if(p){o.begin=o.initialBegin;o.end=o.begin+o.initialSize}t=g.dockedItems;for(m=0,q=t.length;m<q;++m){d=t[m];r=d.horizontal;h=null;if(c&&r){j=a.sizeProp;u=f;h=a}else{if(p&&!r){j=o.sizeProp;u=v;h=o}}if(h){u-=d.getMarginInfo()[j];if(u!==d.props[j]){d.invalidate({before:s,after:b,axis:h,ownerContext:g,layout:this})}}}}},finishPositions:function(d,a,h){var m=d.dockedItems,c=m.length,g=a.delta,f=h.delta,j,b;for(j=0;j<c;++j){b=m[j];b.setProp("x",g+b.dockedAt.x);b.setProp("y",f+b.dockedAt.y)}},finishedLayout:function(b){var a=this,c=b.target;Ext.layout.component.Component.prototype.finishedLayout.apply(this,arguments);if(!b.animatePolicy){if(b.isCollapsingOrExpanding===1){c.afterCollapse(false)}else{if(b.isCollapsingOrExpanding===2){c.afterExpand(false)}}}},getAnimatePolicy:function(c){var b=this,a,d;if(c.isCollapsingOrExpanding===1){a=b.lastCollapsedState}else{if(c.isCollapsingOrExpanding===2){a=c.lastCollapsedState}}if(a==="left"||a==="right"){d=b.horizontalCollapsePolicy}else{if(a==="top"||a==="bottom"){d=b.verticalCollapsePolicy}}return d},getDockedItems:function(c,q){var j=this,f=(c==="visual"),m=f?Ext.ComponentQuery.query("[rendered]",j.owner.dockedItems.items):j.owner.dockedItems.items,h=m&&m.length&&c!==false,b,p,o,g,d,a;if(q==null){o=h&&!f?m.slice():m}else{o=[];for(g=0,a=m.length;g<a;++g){p=m[g].dock;d=(p==="top"||p==="left");if(q?d:!d){o.push(m[g])}}h=h&&o.length}if(h){b=(c=c||"render")==="render";Ext.Array.sort(o,function(s,r){var t,u;if(b&&((t=j.owner.dockOrder[s.dock])!==(u=j.owner.dockOrder[r.dock]))){if(!(t+u)){return t-u}}t=j.getItemWeight(s,c);u=j.getItemWeight(r,c);if((t!==undefined)&&(u!==undefined)){return t-u}return 0})}return o||[]},getItemWeight:function(b,a){var c=b.weight||this.owner.defaultDockWeights[b.dock];return c[a]||c},getLayoutItems:function(){var f=this,b,g,d,c,a;if(f.owner.collapsed){a=f.owner.getCollapsedDockedItems()}else{b=f.getDockedItems("visual");g=b.length;a=[];for(c=0;c<g;c++){d=b[c];if(!d.hidden){a.push(d)}}}return a},measureContentWidth:function(a){var b=a.bodyContext;return b.el.getWidth()-b.getBorderInfo().width},measureContentHeight:function(a){var b=a.bodyContext;return b.el.getHeight()-b.getBorderInfo().height},redoLayout:function(c){var b=this,a=b.owner;if(c.isCollapsingOrExpanding===1){if(a.reExpander){a.reExpander.el.show()}a.addClsWithUI(a.collapsedCls);c.redo(true)}else{if(c.isCollapsingOrExpanding===2){a.removeClsWithUI(a.collapsedCls);c.bodyContext.redo()}}},renderChildren:function(){var b=this,a=b.getDockedItems(),c=b.getRenderTarget();b.handleItemBorders();b.renderItems(a,c)},renderItems:function(h,v){var u=this,a=u.owner,d={},s=h.length,f=a.body,b=!!a.frameSize,r=a.bodyContainer,g,c,m,q,j,p,t,w,o;if(s){for(p=0;p<s;p++){t=h[p];d[t.id]=t}c=u.getRenderTarget().dom.childNodes;m=c.length;j=0;for(p=0;p<m;++p){q=c[p];if(b){o=q===f.dom||q===r;if(!o&&Ext.fly(q).contains(f)){o=true;a.bodyContainer=q}}else{o=q===f.dom}if(o){g=p;break}if(d[q.id]){++j}}g-=j;for(p=0;p<s;++p){t=h[p];w=g+p;if(t.dock==="right"||t.dock==="bottom"){++w}if(!t.rendered){u.renderItem(t,v,w)}else{if(!u.isValidParent(t,v,w)){u.moveItem(t,v,w)}}}}},undoLayout:function(c){var b=this,a=b.owner;if(c.isCollapsingOrExpanding===1){if(a.reExpander){a.reExpander.el.hide()}a.removeClsWithUI(a.collapsedCls);c.undo(true)}else{if(c.isCollapsingOrExpanding===2){a.addClsWithUI(a.collapsedCls);c.bodyContext.undo()}}},sizePolicy:{nostretch:{setsWidth:0,setsHeight:0},horz:{shrinkWrap:{setsWidth:1,setsHeight:0,readsWidth:1},stretch:{setsWidth:1,setsHeight:0}},vert:{shrinkWrap:{setsWidth:0,setsHeight:1,readsHeight:1},stretch:{setsWidth:0,setsHeight:1}},stretchV:{setsWidth:0,setsHeight:1},autoStretchH:{readsWidth:1,setsWidth:1,setsHeight:0},autoStretchV:{readsHeight:1,setsWidth:0,setsHeight:1}},getItemSizePolicy:function(d,g){var c=this,h=c.sizePolicy,f=c.owner.shrinkWrapDock,b,a;if(d.stretch===false){return h.nostretch}b=d.dock;a=(b==="left"||b==="right");f=f===true?3:(f||0);if(a){h=h.vert;f=f&1}else{h=h.horz;f=f&2}if(f){if(!g){g=c.owner.getSizeModel()}if(g[a?"height":"width"].shrinkWrap){return h.shrinkWrap}}return h.stretch},configureItem:function(a,b){Ext.layout.component.Component.prototype.configureItem.apply(this,arguments);a.addCls(this._itemCls);if(!a.ignoreBorderManagement){a.addClsWithUI(this.getDockCls(a.dock))}},getDockCls:function(a){return"docked-"+a},afterRemove:function(a){var b;Ext.layout.component.Component.prototype.afterRemove.apply(this,arguments);a.removeCls(this._itemCls);if(!a.ignoreBorderManagement){a.removeClsWithUI(this.getDockCls(a.dock))}b=a.el.dom;if(!a.destroying&&b){b.parentNode.removeChild(b)}this.childrenChanged=true},borderCollapseMap:{},getBorderCollapseTable:function(){var d=this,g=d.borderCollapseMap,a=d.owner,b=a.baseCls,f=a.ui,c;g=g[b]||(g[b]={});c=g[f];if(!c){b+="-"+f+"-outer-border-";g[f]=c=[0,b+"l",b+"b",b+"bl",b+"r",b+"rl",b+"rb",b+"rbl",b+"t",b+"tl",b+"tb",b+"tbl",b+"tr",b+"trl",b+"trb",b+"trbl"]}return c}},0,0,0,0,["layout.dock"],0,[Ext.layout.component,"Dock",Ext.layout.component,"AbstractDock"],0));Ext.define("Ext.theme.neptune.layout.component.Dock",{override:"Ext.layout.component.Dock",noBorderClassTable:[0,"x-noborder-l","x-noborder-b","x-noborder-bl","x-noborder-r","x-noborder-rl","x-noborder-rb","x-noborder-rbl","x-noborder-t","x-noborder-tl","x-noborder-tb","x-noborder-tbl","x-noborder-tr","x-noborder-trl","x-noborder-trb","x-noborder-trbl"],edgeMasks:{top:8,right:4,bottom:2,left:1},handleItemBorders:function(){var D=this,g=0,E=8,F=4,p=2,f=1,a=D.owner,w=a.bodyBorder,r=a.border,m=D.collapsed,t=D.edgeMasks,o=D.noBorderClassTable,C=a.dockedItems.generation,B,d,A,j,v,q,z,s,h,u,y,c;if(D.initializedBorders===C){return}y=[];c=[];d=D.getBorderCollapseTable();o=D.getBorderClassTable?D.getBorderClassTable():o;D.initializedBorders=C;D.collapsed=false;A=D.getDockedItems("visual");D.collapsed=m;for(v=0,q=A.length;v<q;v++){z=A[v];if(z.ignoreBorderManagement){continue}s=z.dock;u=j=0;y.length=0;c.length=0;if(s!=="bottom"){if(g&E){B=z.border}else{B=r;if(B!==false){j+=E}}if(B===false){u+=E}}if(s!=="left"){if(g&F){B=z.border}else{B=r;if(B!==false){j+=F}}if(B===false){u+=F}}if(s!=="top"){if(g&p){B=z.border}else{B=r;if(B!==false){j+=p}}if(B===false){u+=p}}if(s!=="right"){if(g&f){B=z.border}else{B=r;if(B!==false){j+=f}}if(B===false){u+=f}}if((h=z.lastBorderMask)!==u){z.lastBorderMask=u;if(h){c[0]=o[h]}if(u){y[0]=o[u]}}if((h=z.lastBorderCollapse)!==j){z.lastBorderCollapse=j;if(h){c[c.length]=d[h]}if(j){y[y.length]=d[j]}}if(c.length){z.removeCls(c)}if(y.length){z.addCls(y)}g|=t[s]}u=j=0;y.length=0;c.length=0;if(g&E){B=w}else{B=r;if(B!==false){j+=E}}if(B===false){u+=E}if(g&F){B=w}else{B=r;if(B!==false){j+=F}}if(B===false){u+=F}if(g&p){B=w}else{B=r;if(B!==false){j+=p}}if(B===false){u+=p}if(g&f){B=w}else{B=r;if(B!==false){j+=f}}if(B===false){u+=f}if((h=D.lastBodyBorderMask)!==u){D.lastBodyBorderMask=u;if(h){c[0]=o[h]}if(u){y[0]=o[u]}}if((h=D.lastBodyBorderCollapse)!==j){D.lastBodyBorderCollapse=j;if(h){c[c.length]=d[h]}if(j){y[y.length]=d[j]}}if(c.length){a.removeBodyCls(c)}if(y.length){a.addBodyCls(y)}},onRemove:function(d){var c=this,b=d.lastBorderMask,a=d.lastBorderCollapse;if(!d.destroyed&&!d.ignoreBorderManagement){if(b){d.lastBorderMask=0;d.removeCls(c.noBorderClassTable[b])}if(a){d.lastBorderCollapse=0;d.removeCls(c.getBorderCollapseTable()[a])}}(arguments.callee.$previous||Ext.layout.component.Component.prototype.onRemove).call(this,d)}});(Ext.cmd.derive("Ext.util.Memento",Ext.Base,(function(){function d(j,h,m,g){j[g?g+m:m]=h[m]}function c(h,g,j){delete h[j]}function f(o,m,p,j){var g=j?j+p:p,h=o[g];if(h||o.hasOwnProperty(g)){a(m,p,h)}}function a(h,j,g){if(Ext.isDefined(g)){h[j]=g}else{delete h[j]}}function b(h,r,q,j,m){if(r){if(Ext.isArray(j)){var o,g=j.length;for(o=0;o<g;o++){h(r,q,j[o],m)}}else{h(r,q,j,m)}}}return{data:null,target:null,constructor:function(h,g){this.data={};if(h){this.target=h;if(g){this.capture(g)}}},capture:function(g,m,j){var h=this;b(d,h.data||(h.data={}),m||h.target,g,j)},remove:function(g){b(c,this.data,null,g)},restore:function(h,g,m,j){b(f,this.data,m||this.target,h,j);if(g!==false){this.remove(h)}},restoreAll:function(g,o){var j=this,h=o||this.target,m=j.data,p;g=g!==false;for(p in m){if(m.hasOwnProperty(p)){a(h,p,m[p]);if(g){delete m[p]}}}}}}()),1,0,0,0,0,0,[Ext.util,"Memento"],0));(Ext.cmd.derive("Ext.container.DockingContainer",Ext.Base,{isDockingContainer:true,defaultDockWeights:{top:{render:1,visual:1},left:{render:3,visual:5},right:{render:5,visual:7},bottom:{render:7,visual:3}},dockOrder:{top:-1,left:-1,right:1,bottom:1},horizontalDocks:0,tabGuard:false,tabGuardTpl:'<div id="{id}-{tabGuardEl}" data-ref="{tabGuardEl}" tabIndex="0" class="x-tab-guard x-tab-guard-{tabGuard}" ></div>',addDocked:function(g,m){var j=this,b=j.rendered,c=0,o=j.dockedItems,d=o.getCount(),f,h,p,a;g=j.prepareItems(g);a=g.length;if(b){Ext.suspendLayouts()}if(m===undefined){m=d}else{m=Math.min(m,d)}for(;c<a;c++){p=g[c];p.dock=p.dock||"top";if(p.dock==="left"||p.dock==="right"){j.horizontalDocks++}f=m+c;o.insert(f,p);h=!!p.instancedCmp;delete p.instancedCmp;p.onAdded(j,f,h);delete p.$initParent;if(j.onDockedAdd!==Ext.emptyFn){j.onDockedAdd(p)}if(j.hasListeners.dockedadd){j.fireEvent("dockedadd",j,p,f)}}if(j.rendered){j.updateLayout();Ext.resumeLayouts(true)}return g},destroyDockedItems:function(){var a=this.dockedItems,b;if(a){while((b=a.first())){this.removeDocked(b,true)}}},doRenderDockedItems:function(d,h,j){var g=h.$comp,f=g.componentLayout,c=g.tabGuard&&g.getTpl("tabGuardTpl"),b,a;if(f.getDockedItems&&!h.$skipDockedItems){if(c&&!j){h.tabGuard="before";g.addChildEl(h.tabGuardEl="tabGuardBeforeEl");c.applyOut(h,d)}b=f.getDockedItems("render",!j);a=b&&f.getItemsRenderTree(b);if(a){Ext.DomHelper.generateMarkup(a,d)}if(c&&j){h.tabGuard="after";g.addChildEl(h.tabGuardEl="tabGuardAfterEl");c.applyOut(h,d)}}},getDockedComponent:function(a){if(Ext.isObject(a)){a=a.getItemId()}return this.dockedItems.get(a)},getDockedItems:function(a,c){var b=this.getComponentLayout().getDockedItems("render",c);if(a&&b.length){b=Ext.ComponentQuery.query(a,b)}return b},getDockingRefItems:function(b,f){var a=b&&"*,* *",d=this.getDockedItems(a,true),c;d.push.apply(d,f);c=this.getDockedItems(a,false);d.push.apply(d,c);return d},initDockingItems:function(){var b=this,a=b.dockedItems;if(!a||!a.isMixedCollection){b.dockedItems=new Ext.util.ItemCollection();if(a){b.addDocked(a)}}},insertDocked:function(b,a){this.addDocked(a,b)},onDockedAdd:Ext.emptyFn,onDockedRemove:Ext.emptyFn,removeDocked:function(f,b){var d=this,c,a;b=b===true||(b!==false&&d.autoDestroy);if(!d.dockedItems.contains(f)){return f}if(f.dock==="left"||f.dock==="right"){d.horizontalDocks--}c=d.componentLayout;a=c&&d.rendered;if(a){c.onRemove(f)}d.dockedItems.remove(f);f.onRemoved(f.destroying||b);d.onDockedRemove(f);if(b){f.destroy()}else{if(a){c.afterRemove(f)}}if(d.hasListeners.dockedremove){d.fireEvent("dockedremove",d,f)}if(!d.destroying){d.updateLayout()}return f},moveDocked:function(c,a){var b=this;if(b.rendered){Ext.suspendLayouts()}b.removeDocked(c,false);c.dock=a;b.addDocked(c);if(b.rendered){if(c.frame){Ext.getDetachedBody().appendChild(c.el);c.updateFrame()}Ext.resumeLayouts(true)}},setupDockingRenderTpl:function(a){a.renderDockedItems=this.doRenderDockedItems}},0,0,0,0,0,0,[Ext.container,"DockingContainer"],0));(Ext.cmd.derive("Ext.panel.Panel",Ext.container.Container,{alternateClassName:"Ext.Panel",childEls:["body"],renderTpl:['<tpl if="headingText">','<div id="{id}-headingEl" data-ref="headingEl" role="heading"',' class="',"x-",'hidden-clip" style="height:0">',"{headingText}","</div>","</tpl>","{% this.renderDockedItems(out,values,0); %}",'<div id="{id}-body" data-ref="body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>',' {baseCls}-body-{ui}<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>{childElCls}"','<tpl if="bodyAriaAttributes">','<tpl foreach="bodyAriaAttributes"> {$}="{.}"</tpl>',"<tpl else>",' role="presentation"',"</tpl>",'<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>","{% this.renderDockedItems(out,values,1); %}"],headerPosition:"top",iconAlign:"left",titleAlign:"left",titleRotation:"default",beforeRenderConfig:{glyph:null,headerPosition:null,icon:null,iconAlign:null,iconCls:null,title:null,titleAlign:null,titleRotation:null},animCollapse:Ext.enableFx,border:true,closable:false,closeAction:"destroy",closeToolText:"Close panel",collapsed:false,collapsedCls:"collapsed",collapseFirst:true,collapsible:undefined,collapseToolText:"Collapse panel",expandToolText:"Expand panel",constrain:false,constrainHeader:false,dockedItems:null,tbar:null,bbar:null,fbar:null,lbar:null,rbar:null,buttons:null,floatable:true,frame:false,frameHeader:true,hideCollapseTool:false,manageHeight:true,maskElement:"el",minButtonWidth:75,preventHeader:false,shrinkWrapDock:false,titleCollapse:undefined,baseCls:"x-panel",bodyPosProps:{x:"x",y:"y"},componentLayout:"dock",contentPaddingProperty:"bodyPadding",emptyArray:[],isPanel:true,defaultBindProperty:"title",addBodyCls:function(b){var c=this,a=c.rendered?c.body:c.getProtoBody();a.addCls(b);return c},addTool:function(f){if(!Ext.isArray(f)){f=[f]}var d=this,h=d.header,a=f.length,g=d.tools,c,b;if(!h||!h.isHeader){h=null;if(!g){d.tools=g=[]}}for(c=0;c<a;c++){b=f[c];b.toolOwner=d;if(h){h.addTool(b)}else{g.push(b)}}d.updateHeader()},addTools:Ext.emptyFn,setCollapsible:function(c){var b=this,d=b.collapsible,a=b.collapseTool;b.collapsible=c;if(c&&!d){b.updateCollapseTool();a=b.collapseTool;if(a){a.show()}}else{if(!c&&d){if(a){a.hide()}}}},addUIClsToElement:function(b){var c=this,a=Ext.container.Container.prototype.addUIClsToElement.apply(this,arguments);c.addBodyCls(["x-"+b,c.baseCls+"-body-"+b,c.baseCls+"-body-"+c.ui+"-"+b]);return a},afterCollapse:function(c){var b=this,a=b.ariaEl.dom,d=b.ownerLayout;b.isCollapsingOrExpanding=0;b.updateCollapseTool();if(c){b.removeCls("x-animating-size")}if(d){d.afterCollapse(b,c)}if(a){a.setAttribute("aria-expanded",false)}if(b.isAccordionPanel){b.body.dom.setAttribute("aria-hidden",true)}b.setHiddenDocked();b.fireEvent("collapse",b)},afterExpand:function(c){var b=this,a=b.ariaEl.dom,d=b.ownerLayout;b.isCollapsingOrExpanding=0;b.updateCollapseTool();if(c){b.removeCls("x-animating-size")}if(d){d.afterExpand(b,c)}if(a){a.setAttribute("aria-expanded",true)}if(b.isAccordionPanel){b.body.dom.setAttribute("aria-hidden",false)}b.fireEvent("expand",b);b.fireHierarchyEvent("expand")},beforeDestroy:function(){var a=this;Ext.destroy(a.placeholder,a.ghostPanel,a.dd,a.accordionKeyNav,a.defaultButtonKeyNav);a.destroyDockedItems();Ext.container.Container.prototype.beforeDestroy.call(this)},destroy:function(){Ext.container.Container.prototype.destroy.call(this);this.dockedItems=this.bodyContainer=null},beforeRender:function(){var b=this,a;b.getProtoBody();Ext.container.Container.prototype.beforeRender.call(this);b.initTools();if(!(b.preventHeader||(b.header===false))||b.isViewportBorderChild){b.updateHeader()}b.afterHeaderInit=true;if(b.collapsed){if(b.isPlaceHolderCollapse()){if(!b.hidden){b.setHiddenState(true);b.preventCollapseFire=true;b.placeholderCollapse();delete b.preventCollapseFire;a=b.collapsed;b.collapsed=false}}else{b.beginCollapse();b.addClsWithUI(b.collapsedCls)}}if(a){b.collapsed=a}},getMemento:function(a){var b=this;if(a&&typeof a==="string"){a+="Memento";return b[a]||(b[a]=new Ext.util.Memento(b))}},beginCollapse:function(){var f=this,c=f.lastBox,h=f.rendered,b=f.getMemento("collapse"),d=f.getSizeModel(),g=f.header,a;b.capture(["height","minHeight","width","minWidth"]);if(c){b.capture(f.restoreDimension(),c,"last.")}if(f.collapsedVertical()){if(d.width.shrinkWrap){f.width=h?f.getWidth():f.width||f.minWidth||100}delete f.height;f.minHeight=0}else{if(f.collapsedHorizontal()){if(d.height.shrinkWrap){f.height=h?f.getHeight():f.height||f.minHeight||100}delete f.width;f.minWidth=0}}if(f.ownerCt){f.ownerCt.getLayout().beginCollapse(f)}if(!f.isPlaceHolderCollapse()&&g!==false){if(g===(a=f.getReExpander())){g.collapseImmune=true;g.getInherited().collapseImmune=true;g.addClsWithUI(f.getHeaderCollapsedClasses(g));if(g.rendered){g.updateFrame()}}else{if(a.el){a.el.show();a.hidden=false}}}if(f.resizer){f.resizer.disable()}},beginDrag:function(){if(this.floatingDescendants){this.floatingDescendants.hide()}},beginExpand:function(){var f=this,d=f.lastBox,c=f.getMemento("collapse"),a=f.restoreDimension(),g=f.header,b;if(c){c.restore(["minHeight","minWidth",a]);if(d){c.restore(a,true,d,"last.")}}if(f.ownerCt){f.ownerCt.getLayout().beginExpand(f)}if(!f.isPlaceHolderCollapse()&&g!==false){if(g===(b=f.getReExpander())){delete g.collapseImmune;delete g.getInherited().collapseImmune;g.removeClsWithUI(f.getHeaderCollapsedClasses(g));if(g.rendered){g.expanding=true;g.updateFrame();delete g.expanding}}else{b.hidden=true;b.el.hide()}}if(f.resizer){f.resizer.enable()}},bridgeToolbars:function(){var a=this,g=[],f=a.minButtonWidth,c,b;function d(h,m,j){if(Ext.isArray(h)){h={xtype:"toolbar",items:h}}else{if(!h.xtype){h.xtype="toolbar"}}h.dock=m;if(j){h.layout=Ext.applyIf(h.layout||{},{pack:{left:"start",center:"center"}[a.buttonAlign]||"end"})}return h}if(a.tbar){g.push(d(a.tbar,"top"));a.tbar=null}if(a.bbar){g.push(d(a.bbar,"bottom"));a.bbar=null}if(a.buttons){a.fbar=a.buttons;a.buttons=null}if(a.fbar){c=d(a.fbar,"bottom",true);c.ui="footer";if(f){b=c.defaults;c.defaults=function(m){var o=b||{},j=!m.xtype||m.isButton,h;if(!j){h=Ext.ClassManager.getByAlias("widget."+m.xtype);if(h){j=h.prototype.isButton}}if(j&&!("minWidth" in o)){o=Ext.apply({minWidth:f},o)}return o}}g.push(c);a.fbar=null}if(a.lbar){g.push(d(a.lbar,"left"));a.lbar=null}if(a.rbar){g.push(d(a.rbar,"right"));a.rbar=null}if(a.dockedItems){if(a.dockedItems.isMixedCollection){a.addDocked(g)}else{if(!Ext.isArray(a.dockedItems)){a.dockedItems=[a.dockedItems]}a.dockedItems=a.dockedItems.concat(g)}}else{a.dockedItems=g}},close:function(){if(this.fireEvent("beforeclose",this)!==false){this.doClose()}},collapse:function(f,a){var d=this,g=f||d.collapseDirection,b=d.ownerCt,c=d.ownerLayout,h=d.rendered;if(d.isCollapsingOrExpanding){return d}if(arguments.length<2){a=d.animCollapse}if(d.collapsed||d.fireEvent("beforecollapse",d,f,a)===false){return d}if(c&&c.onBeforeComponentCollapse){if(c.onBeforeComponentCollapse(d)===false){return d}}if(h&&b&&d.isPlaceHolderCollapse()){return d.placeholderCollapse(f,a)}d.collapsed=g;if(h){d.beginCollapse()}d.getInherited().collapsed=true;d.fireHierarchyEvent("collapse");if(h){d.doCollapseExpand(1,a)}return d},collapsedHorizontal:function(){var a=this.getCollapsed();return a==="left"||a==="right"},collapsedVertical:function(){var a=this.getCollapsed();return a==="top"||a==="bottom"},convertCollapseDir:function(a){return a.substr(0,1)},createGhost:function(a){var b=this,d=b.header,c=b.frame&&!b.alwaysFramed;return{xtype:"panel",hidden:false,header:d?{titleAlign:d.getTitleAlign()}:null,ui:c?b.ui.replace(/-framed$/,""):b.ui,id:b.id+"-ghost",renderTo:Ext.getBody(),resizable:false,draggable:false,closable:false,focusable:false,floating:true,shadow:false,frame:c,shim:b.shim,alwaysFramed:b.alwaysFramed,overlapHeader:b.overlapHeader,headerPosition:b.getHeaderPosition(),titleRotation:b.getTitleRotation(),baseCls:b.baseCls,getRefOwner:function(){return b.getRefOwner()},cls:b.baseCls+"-ghost "+(a||"")}},createReExpander:function(g,f){var d=this,j=g==="left",c=g==="right",h=j||c,b=d.ownerCt,a=Ext.apply({hideMode:"offsets",title:d.getTitle(),titleAlign:d.getTitleAlign(),vertical:h,textCls:d.headerTextCls,icon:d.getIcon(),iconCls:d.getIconCls(),iconAlign:d.getIconAlign(),glyph:d.getGlyph(),baseCls:d.self.prototype.baseCls+"-header",ui:d.ui,frame:d.frame&&d.frameHeader,ignoreParentFrame:d.frame||d.overlapHeader,ignoreBorderManagement:d.frame||d.ignoreHeaderBorderManagement,indicateDrag:d.draggable,collapseImmune:true,ariaRole:d.ariaRole,preventRefocus:true,ownerCt:(b&&d.collapseMode==="placeholder")?b:d,ownerLayout:d.componentLayout,forceOrientation:true,margin:d.margin},f);if(d.collapseMode==="mini"){if(h){a.width=1}else{a.height=1}}if(!d.hideCollapseTool){if(j||(c&&d.isPlaceHolderCollapse())){a.titlePosition=1}a.tools=[{xtype:"tool",type:"expand-"+d.getOppositeDirection(g),isDefaultExpandTool:true,uiCls:["top"],handler:d.toggleCollapse,scope:d,tooltip:d.expandToolText}]}a=new Ext.panel.Header(a);a.addClsWithUI(d.getHeaderCollapsedClasses(a));a.expandTool=a.down("tool[isDefaultExpandTool=true]");return a},doClose:function(){this.fireEvent("close",this);this[this.closeAction]()},doCollapseExpand:function(a,b){var d=this,c=d.animCollapse,f=d.ownerLayout;d.animCollapse=b;d.isCollapsingOrExpanding=a;if(b){d.addCls("x-animating-size")}if(f&&!b){f.onContentChange(d)}else{d.updateLayout({isRoot:true})}d.animCollapse=c;return d},endDrag:function(){if(this.floatingDescendants){this.floatingDescendants.show()}},expand:function(a){var c=this,b=c.ownerLayout,d=c.rendered;if(c.isCollapsingOrExpanding){return c}if(!arguments.length){a=c.animCollapse}if(!c.collapsed&&!c.floatedFromCollapse){return c}if(c.fireEvent("beforeexpand",c,a)===false){return c}if(b&&b.onBeforeComponentExpand){if(b.onBeforeComponentExpand(c)===false){return c}}delete c.getInherited().collapsed;if(d&&c.isPlaceHolderCollapse()){return c.placeholderExpand(a)}c.restoreHiddenDocked();if(d){c.beginExpand()}c.collapsed=false;if(c.rendered){c.doCollapseExpand(2,a)}return c},findReExpander:function(h){var g=this,j=Ext.Component,f=g.dockedItems.items,a=f.length,b,d;if(g.collapseMode==="mini"){return}switch(h){case j.DIRECTION_TOP:case j.DIRECTION_BOTTOM:for(d=0;d<a;d++){b=f[d];if(!b.hidden){if(b.isHeader&&(!b.dock||b.dock==="top"||b.dock==="bottom")){return b}}}break;case j.DIRECTION_LEFT:case j.DIRECTION_RIGHT:for(d=0;d<a;d++){b=f[d];if(!b.hidden){if(b.isHeader&&(b.dock==="left"||b.dock==="right")){return b}}}break;default:throw ("Panel#findReExpander must be passed a valid collapseDirection")}},floatCollapsedPanel:function(){var h=this,j=h.placeholder,a=j.getSize(),g=Ext.panel.Panel.floatCls,d=h.collapsed,m=h.ownerCt||h,b,c,f;if(h.isSliding){return}if(h.el.hasCls(g)){h.slideOutFloatedPanel();return}h.isSliding=true;j.el.hide();j.hidden=true;h.el.show();h.setHiddenState(false);h.collapsed=false;m.updateLayout();j.el.show();j.hidden=false;h.el.hide();h.setHiddenState(true);h.collapsed=d;m.updateLayout();f=h.getBox(false,true);h.slideOutTask=h.slideOutTask||new Ext.util.DelayedTask(h.slideOutFloatedPanel,h);if(Ext.supports.Touch){Ext.on("mousedown",c=function(o){if(!o.within(h.el)){Ext.un("mousedown",c);h.slideOutFloatedPanel()}})}if(!h.placeholderListener){h.placeholderListener=j.on({resize:h.onPlaceholderResize,scope:h,destroyable:true})}j.el.on("mouseleave",h.onMouseLeaveFloated,h);h.el.on("mouseleave",h.onMouseLeaveFloated,h);j.el.on("mouseenter",h.onMouseEnterFloated,h);h.el.on("mouseenter",h.onMouseEnterFloated,h);h.el.addCls(g);h.floated=d;if(h.collapseTool){h.collapseTool.el.hide()}switch(h.collapsed){case"top":h.width=a.width;h.setLocalXY(f.x,f.y+a.height);break;case"right":h.height=a.height;h.setLocalXY(f.x-a.width,f.y);break;case"bottom":h.width=a.width;h.setLocalXY(f.x,f.y-a.height);break;case"left":h.height=a.height;h.setLocalXY(f.x+a.width,f.y);break}b=h.convertCollapseDir(h.collapsed);h.floatedFromCollapse=h.collapsed;h.collapsed=false;h.setHiddenState(false);h.el.slideIn(b,{preserveScroll:true,duration:Ext.Number.from(h.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){h.isSliding=false;h.fireEvent("float",h)}}})},onPlaceholderResize:function(f,c,a){var b=this,d=b.getBox(false,true),g=f.getBox(false,true);switch(b.floated){case"top":b.width=c;b.setLocalY(g.y+g.height);break;case"right":b.height=a;b.setLocalX(g.x-d.width);break;case"bottom":b.width=c;b.setLocalY(g.y-d.height);break;case"left":b.height=a;b.setLocalX(g.x+g.width);break}b.updateLayout({isRoot:true})},getAnimationProps:function(){var b=this,c=b.animCollapse,a;a=Ext.container.Container.prototype.getAnimationProps.call(this);if(typeof c==="number"){a.duration=c}return a},getCollapsed:function(){var a=this;if(a.collapsed===true){return a.collapseDirection}return a.collapsed},getCollapsedDockedItems:function(){var a=this;return a.header===false||a.collapseMode==="placeholder"?a.emptyArray:[a.getReExpander()]},getComponent:function(a){var b=Ext.container.Container.prototype.getComponent.apply(this,arguments);if(b===undefined&&!Ext.isNumber(a)){b=this.getDockedComponent(a)}return b},getHeader:function(){return this.header},getHeaderCollapsedClasses:function(d){var b=this,c=b.collapsedCls,a;a=[c,c+"-"+d.getDockName()];if(b.border&&(!b.frame||(b.frame&&Ext.supports.CSS3BorderRadius))){a.push(c+"-border-"+d.getDockName())}return a},getKeyMap:function(){return this.keyMap||(this.keyMap=new Ext.util.KeyMap(Ext.apply({target:this.el},this.keys)))},getOppositeDirection:function(a){var b=Ext.Component;switch(a){case b.DIRECTION_TOP:return b.DIRECTION_BOTTOM;case b.DIRECTION_RIGHT:return b.DIRECTION_LEFT;case b.DIRECTION_BOTTOM:return b.DIRECTION_TOP;case b.DIRECTION_LEFT:return b.DIRECTION_RIGHT}},getPlaceholder:function(f){var d=this,h=f||d.collapseDirection,c=null,g=d.placeholder,b=d.floatable,a=d.titleCollapse;if(!g){if(b||(d.collapsible&&a)){c={click:{fn:(!a&&b)?d.floatCollapsedPanel:d.toggleCollapse,element:"el",scope:d}}}d.placeholder=g=Ext.widget(d.createReExpander(h,{id:d.id+"-placeholder",listeners:c}))}if(!g.placeholderFor){if(!g.isComponent){d.placeholder=g=d.lookupComponent(g)}Ext.applyIf(g,{margin:d.margin,placeholderFor:d,synthetic:true});g.addCls(["x-region-collapsed-placeholder","x-region-collapsed-"+h+"-placeholder",d.collapsedCls])}return g},getProtoBody:function(){var b=this,a=b.protoBody;if(!a){b.protoBody=a=new Ext.util.ProtoElement({cls:b.bodyCls,style:b.bodyStyle,clsProp:"bodyCls",styleProp:"bodyStyle",styleIsText:true})}return a},getReExpander:function(c){var b=this,d=c||b.collapseDirection,a=b.reExpander||b.findReExpander(d);b.expandDirection=b.getOppositeDirection(d);if(!a){b.reExpander=a=b.createReExpander(d,{dock:d,cls:"x-docked "+b.baseCls+"-"+b.ui+"-collapsed",isCollapsedExpander:true});b.dockedItems.insert(0,a)}return a},getRefItems:function(a){var b=Ext.container.Container.prototype.getRefItems.apply(this,arguments);return this.getDockingRefItems(a,b)},getState:function(){var a=this,c=Ext.container.Container.prototype.getState.call(this)||{},f=a.collapsed,b=a.floated,d;if(b){a.collapsed=b}c=a.addPropertyToState(c,"collapsed");if(b){a.collapsed=f}if(a.getCollapsed()){d=a.getMemento("collapse").data;c=a.addPropertyToState(c,"collapsed",d);if(a.collapsedVertical()){delete c.height;if(d){c=a.addPropertyToState(c,"height",d.height)}}else{delete c.width;if(d){c=a.addPropertyToState(c,"width",d.width)}}}return c},applyState:function(c){var b=this,a={},d;if(c){d=c.collapsed;if(d){a=b.getMemento("collapse");Ext.Object.merge(a.data,d);c.collapsed=true}Ext.container.Container.prototype.applyState.apply(this,arguments)}},ghost:function(p){var h=this,a=h.ghostPanel,d=h.getBox(),c=h.header,m,f,j,o,g,b;if(!a){h.ghostPanel=a=Ext.widget(h.createGhost(p));a.el.dom.removeAttribute("tabIndex")}else{a.el.show()}a.setHiddenState(false);a.floatParent=h.floatParent;a.toFront();if(c&&!h.preventHeader){m=a.header;m.suspendLayouts();f=m.query("tool");for(b=f.length;b--;){m.remove(f[b])}m.setTitlePosition(0);a.addTool(h.ghostTools());a.setTitle(h.getTitle());m.setTitlePosition(c.titlePosition);o=h.getIconCls();if(o){a.setIconCls(o)}else{j=h.getIcon();if(j){a.setIcon(j)}else{g=h.getGlyph();if(g){a.setGlyph(g)}}}m.addCls("x-header-ghost");m.resumeLayouts()}a.setPagePosition(d.x,d.y);a.setSize(d.width,d.height);h.el.hide();return a},ghostTools:function(){var f=[],g=this.header,d=g?g.query("tool[hidden=false]"):[],c,a,b;if(d.length){c=0;a=d.length;for(;c<a;c++){b=d[c];f.push({type:b.type,tooltip:b.tooltip})}}else{f=[{type:"placeholder"}]}return f},initBodyBorder:function(){var a=this;if(a.frame&&a.bodyBorder){if(!Ext.isNumber(a.bodyBorder)){a.bodyBorder=1}a.getProtoBody().setStyle("border-width",this.unitizeBox(a.bodyBorder))}},initBodyStyles:function(){var b=this,a=b.getProtoBody();if(b.bodyPadding!==undefined){if(b.layout.managePadding){a.setStyle("padding",0)}else{a.setStyle("padding",this.unitizeBox((b.bodyPadding===true)?5:b.bodyPadding))}}b.initBodyBorder()},initBorderProps:function(){var a=this;if(a.frame&&a.border&&a.bodyBorder===undefined){a.bodyBorder=false}if(a.frame&&a.border&&(a.bodyBorder===false||a.bodyBorder===0)){a.manageBodyBorders=true}},initComponent:function(){var a=this;if(a.collapsible){a.addStateEvents(["expand","collapse"])}if(a.unstyled){a.setUI("plain")}if(a.frame){a.setUI(a.ui+"-framed")}a.bridgeToolbars();a.initBorderProps();Ext.container.Container.prototype.initComponent.call(this);a.collapseDirection=a.collapseDirection||a.getHeaderPosition()||Ext.Component.DIRECTION_TOP;a.hiddenOnCollapse=new Ext.dom.CompositeElement()},initItems:function(){Ext.container.Container.prototype.initItems.call(this);this.initDockingItems()},initRenderData:function(){var a=this,b=Ext.container.Container.prototype.initRenderData.call(this);a.initBodyStyles();a.protoBody.writeTo(b);delete a.protoBody;if(a.headingText){b.headingText=a.headingText;a.addChildEl("headingEl")}if(a.bodyAriaRole){b.bodyAriaAttributes={role:a.bodyAriaRole};if(!a.ariaStaticRoles[a.bodyAriaRole]&&a.bodyAriaRenderAttributes){Ext.apply(b.bodyAriaAttributes,a.bodyAriaRenderAttributes)}}return b},calculateConstrainedPosition:function(g,b,f,a){var h=this,j=h.header,d,c;if(h.constrainHeader){d=j.lastBox;if(a){if(!j.vertical){a=[a[0],d?d.height:a[1]]}else{a=[d?d.width:a[0],a[1]]}}else{if(d){a=[d.width,d.height]}}c=h.floatParent;g=g||h.constrainTo||(c?c.getTargetEl():null)||h.container||h.el.parent()}return Ext.container.Container.prototype.calculateConstrainedPosition.call(this,g,b,f,a)},initTools:function(){var c=this,f=c.tools,b,d,a;c.tools=[];for(b=f&&f.length;b;){--b;c.tools[b]=a=f[b];a.toolOwner=c}if(c.collapsible&&!(c.hideCollapseTool||c.header===false||c.preventHeader)){c.updateCollapseTool();if(c.collapseFirst){c.tools.unshift(c.collapseTool)}}c.addTools();if(c.pinnable){c.initPinnable()}if(c.closable){c.addClsWithUI("closable");d={xtype:"tool",type:"close",scope:c,handler:c.close,tooltip:c.closeToolText};if(c.isAccordionPanel){d.focusable=false;d.ariaRole="presentation"}c.addTool(d)}if(c.collapseTool&&!c.collapseFirst){c.addTool(c.collapseTool)}},isLayoutRoot:function(){if(this.floatedFromCollapse){return true}return Ext.container.Container.prototype.isLayoutRoot.call(this)},isPlaceHolderCollapse:function(){return this.collapseMode==="placeholder"},isVisible:function(a){var b=this;if(b.collapsed&&b.placeholder){return b.placeholder.isVisible(a)}return Ext.container.Container.prototype.isVisible.apply(this,arguments)},onBoxReady:function(){var a=this,b;Ext.container.Container.prototype.onBoxReady.apply(this,arguments);if(a.collapsed){a.setHiddenDocked()}if(a.isAccordionPanel){a.ariaEl=a.header.titleCmp.el;a.ariaEl.dom.setAttribute("aria-expanded",!a.collapsed);a.body.dom.setAttribute("aria-labelledby",a.header.titleCmp.id);a.body.dom.setAttribute("aria-hidden",!!a.collapsed);a.accordionKeyNav=new Ext.util.KeyNav({target:a.header.titleCmp.el,scope:a,left:a.navigateAccordion,right:a.navigateAccordion,left:a.navigateAccordion,up:a.navigateAccordion,down:a.navigateAccordion,home:a.navigateAccordion,end:a.navigateAccordion,space:a.toggleCollapse,enter:a.toggleCollapse,del:{alt:true,fn:a.maybeClose}})}if(a.defaultButton){b=a.defaultButtonTarget?a[a.defaultButtonTarget]:a.body;a.defaultButtonKeyNav=new Ext.util.KeyNav({target:b,scope:a,defaultEventAction:"stopEvent",enter:a.fireDefaultButton})}},onHide:function(f,b,c){var d=this,a=d.dd;if(d.floatedFromCollapse){d.slideOutFloatedPanel(true)}if(d.draggable&&a){a.endDrag()}if(d.collapsed&&d.placeholder){if(d.splitter){Ext.suspendLayouts();d.splitter.hide();Ext.resumeLayouts()}d.placeholder.hide()}else{Ext.container.Container.prototype.onHide.call(this,f,b,c)}},onMouseEnterFloated:function(a){this.slideOutTask.cancel()},onMouseLeaveFloated:function(a){this.slideOutTask.delay(500)},onRemoved:function(b){var a=this;if(a.placeholder&&!b){a.ownerCt.remove(a.placeholder,false)}Ext.container.Container.prototype.onRemoved.apply(this,arguments)},onShow:function(){var a=this;if(a.collapsed&&a.isPlaceHolderCollapse()){if(a.splitter){Ext.suspendLayouts();a.splitter.show();Ext.resumeLayouts()}a.setHiddenState(true);a.placeholderCollapse()}else{Ext.container.Container.prototype.onShow.apply(this,arguments)}},placeholderCollapse:function(g,a){var f=this,b=f.ownerCt,m=g||f.collapseDirection,d=Ext.panel.Panel.floatCls,c=f.collapseTool,h=f.getPlaceholder(m),j;f.isCollapsingOrExpanding=1;f.setHiddenState(true);f.collapsed=m;if(h.rendered){if(h.el.dom.parentNode!==f.el.dom.parentNode){f.el.dom.parentNode.insertBefore(h.el.dom,f.el.dom)}h.hidden=false;h.setHiddenState(false);h.el.show();b.updateLayout()}else{b.insert(b.items.indexOf(f),h)}if(f.rendered){if(c&&Ext.ComponentManager.getActiveComponent()===c){f.focusPlaceholderExpandTool=true}f.el.setVisibilityMode(f.placeholderCollapseHideMode);if(a){f.el.addCls(d);h.el.hide();j=f.convertCollapseDir(m);f.el.slideOut(j,{preserveScroll:true,duration:Ext.Number.from(a,Ext.fx.Anim.prototype.duration),listeners:{scope:f,afteranimate:function(){var o=this;o.el.removeCls(d);o.placeholder.el.show().setStyle("display","none").slideIn(j,{easing:"linear",duration:100,listeners:{afteranimate:o.doPlaceholderCollapse,scope:o}})}}})}else{f.el.hide();f.doPlaceholderCollapse()}}else{f.isCollapsingOrExpanding=0;if(!f.preventCollapseFire){f.fireEvent("collapse",f)}}return f},doPlaceholderCollapse:function(){var a=this,b=a.placeholder,c=b.expandTool;if(a.focusPlaceholderExpandTool&&c){c.focus()}else{b.focus()}a.focusPlaceholderExpandTool=false;b.setHiddenState(false);b.ariaEl.dom.setAttribute("aria-hidden",false);b.ariaEl.dom.setAttribute("aria-expanded",false);a.ariaEl.dom.setAttribute("aria-hidden",true);a.ariaEl.dom.setAttribute("aria-expanded",false);a.isCollapsingOrExpanding=0;a.fireEvent("collapse",a)},placeholderExpand:function(c){var f=this,h=f.collapsed,j=f.placeholder.expandTool,d=Ext.panel.Panel.floatCls,b=f.ownerLayout?f.ownerLayout.centerRegion:null,g,a;if(Ext.Component.layoutSuspendCount){c=false}if(f.floatedFromCollapse){a=f.getPosition(true);f.slideOutFloatedPanelBegin();f.slideOutFloatedPanelEnd();f.floated=false}if(j&&Ext.ComponentManager.getActiveComponent()===j){f.focusHeaderCollapseTool=true;j._ariaRole=j.ariaEl.dom.getAttribute("role");j._ariaLabel=j.ariaEl.dom.getAttribute("aria-label");j.ariaEl.dom.setAttribute("role","presentation");j.ariaEl.dom.removeAttribute("aria-label")}if(c){Ext.suspendLayouts();f.placeholder.hide();f.el.show();f.collapsed=false;f.setHiddenState(false);if(b&&!a){b.hidden=true}Ext.resumeLayouts(true);b.hidden=false;f.el.addCls(d);f.isCollapsingOrExpanding=2;if(a){g=f.getXY();f.setLocalXY(a[0],a[1]);f.setXY([g[0],g[1]],{duration:Ext.Number.from(c,Ext.fx.Anim.prototype.duration),listeners:{scope:f,afteranimate:function(){var m=this;m.el.removeCls(d);m.isCollapsingOrExpanding=0;m.fireEvent("expand",m)}}})}else{f.el.hide();f.placeholder.el.show();f.placeholder.hidden=false;f.setHiddenState(false);f.el.slideIn(f.convertCollapseDir(h),{preserveScroll:true,duration:Ext.Number.from(c,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:f.doPlaceholderExpand,scope:f}})}}else{f.floated=f.collapsed=false;f.doPlaceholderExpand(true)}return f},doPlaceholderExpand:function(b){var c=this,d=c.placeholder,a=c.collapseTool,f=d.expandTool;if(b){Ext.suspendLayouts();c.show()}c.el.removeCls(Ext.panel.Panel.floatCls);d.hide();if(b){Ext.resumeLayouts(true)}else{c.updateLayout()}if(c.focusHeaderCollapseTool&&a){a.focus()}c.focusHeaderCollapseTool=false;d.ariaEl.dom.setAttribute("aria-expanded",true);c.ariaEl.dom.setAttribute("aria-expanded",true);if(f&&f._ariaRole){f.ariaEl.dom.setAttribute("role",f._ariaRole);f.ariaEl.dom.setAttribute("aria-label",f._ariaLabel);f._ariaRole=f._ariaLabel=null}c.isCollapsingOrExpanding=0;c.fireEvent("expand",c)},remove:function(b,a){var c=this.dockedItems;if(c&&c.contains(b)){this.removeDocked(b,a)}else{Ext.container.Container.prototype.remove.call(this,b,a)}return b},removeBodyCls:function(b){var c=this,a=c.rendered?c.body:c.getProtoBody();a.removeCls(b);return c},removeUIClsFromElement:function(b){var c=this,a=Ext.container.Container.prototype.removeUIClsFromElement.apply(this,arguments);c.removeBodyCls(["x-"+b,c.baseCls+"-body-"+b,c.baseCls+"-body-"+c.ui+"-"+b]);return a},restoreDimension:function(){var a=this.collapseDirection;return(a==="top"||a==="bottom")?"height":"width"},restoreHiddenDocked:function(){this.setDockedItemsVisibility(this.hiddenOnCollapse,true)},setBodyStyle:function(b,d){var c=this,a=c.rendered?c.body:c.getProtoBody();if(Ext.isFunction(b)){b=b()}if(arguments.length===1){if(Ext.isString(b)){b=Ext.Element.parseStyles(b)}a.setStyle(b)}else{a.setStyle(b,d)}return c},setBorder:function(a,c){if(c){return}var b=this,d=b.header;if(!a){a=0}else{if(a===true){a="1px"}else{a=b.unitizeBox(a)}}if(d){if(d.isHeader){d.setBorder(a)}else{d.border=a}}if(b.rendered&&b.bodyBorder!==false){b.body.setStyle("border-width",a)}b.updateLayout();b.border=a},setCollapsed:function(a){this[a?"collapse":"expand"]()},setDockedItemsVisibility:function(g,c){var j=this,d=j.getDockedItems(),a=d.length,f=0,h,b;if(j.header!==false){b=j.getReExpander()}for(;f<a;f++){h=d[f];if(h&&h!==b&&h.el){g.add(h.el)}}g.setStyle("visibility",c?"":"hidden");g.clear()},setGlyph:function(c){var b=this,a=b.glyph,f=b.header,d=b.placeholder;if(c!==a){b.glyph=c;if(f){if(f.isHeader){f.setGlyph(c)}else{f.glyph=c}}else{if(b.rendered||b.afterHeaderInit){b.updateHeader()}}if(d&&d.setGlyph){d.setGlyph(c)}b.fireEvent("glyphchange",b,c,a)}},setIcon:function(a){var b=this,c=b.icon,f=b.header,d=b.placeholder;if(a!==c){b.icon=a;if(f){if(f.isHeader){f.setIcon(a)}else{f.icon=a}}else{if(b.rendered||b.afterHeaderInit){b.updateHeader()}}if(d&&d.setIcon){d.setIcon(a)}b.fireEvent("iconchange",b,a,c)}},setIconCls:function(b){var c=this,a=c.iconCls,f=c.header,d=c.placeholder;if(b!==a){c.iconCls=b;if(f){if(f.isHeader){f.setIconCls(b)}else{f.iconCls=b}}else{if(c.rendered||c.afterHeaderInit){c.updateHeader()}}if(d&&d.setIconCls){d.setIconCls(b)}c.fireEvent("iconclschange",c,b,a)}},setTitle:function(f){var c=this,b=c.title,g=c.header,a=c.reExpander,d=c.placeholder;if(f!==b){c.title=f;if(g){if(g.isHeader){g.setTitle(f)}}else{if(c.rendered||c.afterHeaderInit){c.updateHeader()}}if(c.headingEl){c.headingEl.setHtml(f)}if(a){a.setTitle(f)}if(d&&d.setTitle){d.setTitle(f)}c.fireEvent("titlechange",c,f,b)}},setHiddenDocked:function(){var b=this,a=new Ext.dom.CompositeElement();b.hiddenOnCollapse.add(b.body);a.add(b.body);b.setDockedItemsVisibility(a,false)},setUI:function(b){var a=this;Ext.container.Container.prototype.setUI.apply(this,arguments);if(a.header&&a.header.rendered){a.header.setUI(b)}},toggleCollapse:function(){return(this.collapsed||this.floatedFromCollapse)?this.expand():this.collapse()},updateCollapseTool:function(){var b=this,a=b.collapseTool,c;if(!a&&b.collapsible){b.collapseDirection=b.collapseDirection||b.getHeaderPosition()||"top";c={xtype:"tool",handler:b.toggleCollapse,scope:b};if(b.isAccordionPanel){c.focusable=false;c.ariaRole="presentation"}b.collapseTool=b.expandTool=a=Ext.widget(c)}if(a){if(b.collapsed&&!b.isPlaceHolderCollapse()){a.setType("expand-"+b.getOppositeDirection(b.collapseDirection));a.setTooltip(b.expandToolText)}else{a.setType("collapse-"+b.collapseDirection);a.setTooltip(b.collapseToolText)}}},navigateAccordion:function(h){var f=this,b=f.accordionWrapOver,a="[isAccordionPanel]",j=a+":first",g=a+":last",c,d;c=h.getKey();switch(c){case h.UP:case h.LEFT:d=f.prev(a);if(!d&&b){d=f.ownerCt.child(g)}break;case h.DOWN:case h.RIGHT:d=f.next(a);if(!d&&b){d=f.ownerCt.child(j)}break;case h.HOME:d=f.ownerCt.child(j);break;case h.END:d=f.ownerCt.child(g);break;case h.DELETE:d=f.prev(a)||f.next(a);if(!d){h.doNotClose=true}break}if(d&&d!==f){d.header.titleCmp.focus()}},fireDefaultButton:function(c){var b=this,d,a;d=b.lookupReferenceHolder(false)||b;a=d.lookupReference(b.defaultButton);if(a&&a.click){a.click(c);c.stopEvent();return false}},maybeClose:function(b){var a=this;if(a.closable){a.navigateAccordion(b);if(!b.doNotClose){a.close()}}},onFocusEnter:function(c){var b=this,a=b.ariaEl.dom;Ext.container.Container.prototype.onFocusEnter.call(this,c);if(b.isAccordionPanel&&a){a.setAttribute("aria-selected",true)}},onFocusLeave:function(c){var b=this,a=b.ariaEl.dom;Ext.container.Container.prototype.onFocusLeave.call(this,c);if(b.isAccordionPanel&&a){a.removeAttribute("aria-selected")}},updateHeaderPosition:function(a){var b=this.header;if(b&&b.isHeader){b.setDock(a)}},updateIconAlign:function(b){var a=this.header;if(a&&a.isHeader){a.setIconAlign(b)}},updateTitleAlign:function(b){var a=this.header;if(a&&a.isHeader){a.setTitleAlign(b)}},updateTitleRotation:function(a){var b=this.header;if(b&&b.isHeader){b.setTitleRotation(a)}},unghost:function(c,a,b){var f=this,d=f.ghostPanel;if(!d){return}if(c!==false){f.el.show();if(a!==false){f.setPagePosition(d.getXY());if(f.hideMode==="offsets"){delete f.el.hideModeStyles}}if(b){f.focus(false,10)}}d.el.hide();d.setHiddenState(true)},updateHeader:function(a){var m=this,f=m.header,q=m.getTitle(),h=m.tools,p=m.getIcon(),o=m.getGlyph(),s=m.getIconCls(),d=o||p||s,j=m.ariaEl.dom,g=m.getHeaderPosition(),c=g==="left"||g==="right",r,b;if(Ext.isObject(f)||(f!==false&&(a||(q||d)||(h&&h.length)||(m.collapsible&&!m.titleCollapse)))){if(f&&f.isHeader){f.show()}else{f=m.header=Ext.widget(Ext.merge({xtype:"header",title:q,titleAlign:m.getTitleAlign(),vertical:c,dock:m.getHeaderPosition()||"top",titleRotation:m.getTitleRotation(),textCls:m.headerTextCls,iconCls:s,iconAlign:m.getIconAlign(),icon:p,glyph:o,baseCls:m.baseCls+"-header",tools:h,ui:m.ui,id:m.id+"_header",overCls:m.headerOverCls,indicateDrag:m.draggable,frame:(m.frame||m.alwaysFramed)&&m.frameHeader,ignoreParentFrame:m.frame||m.overlapHeader,ignoreBorderManagement:m.frame||m.ignoreHeaderBorderManagement,isAccordionHeader:m.isAccordionPanel,ownerCt:m,synthetic:true,listeners:m.collapsible&&m.titleCollapse?{click:m.toggleCollapse,scope:m}:null},m.header));m.addDocked(f,0)}if(m.isAccordionPanel){if(j){j.setAttribute("aria-labelledby",f.id+"-title");j.removeAttribute("aria-label")}else{b=m.ariaRenderAttributes||(m.ariaRenderAttributes={});b["aria-labelledby"]=f.id+"-title";delete b["aria-label"]}}else{if(q){if(m.ariaRole!=="tabpanel"){if(j){j.setAttribute("aria-labelledby",f.id+"-title-textEl");j.removeAttribute("aria-label")}else{b=m.ariaRenderAttributes||(m.ariaRenderAttributes={});b["aria-labelledby"]=f.id+"-title-textEl";delete b["aria-label"]}}}else{if(m.ariaRenderAttributes){delete m.ariaRenderAttributes["aria-label"]}}}}else{if(f){f.hide()}q=Ext.util.Format.stripTags(q);if(j){if(!j.hasAttribute("aria-labelledby")){if(q){j.setAttribute("aria-label",q)}else{j.removeAttribute("aria-label")}}}else{b=m.ariaRenderAttributes||(m.ariaRenderAttributes={});if(!b["aria-labelledby"]){if(q){b["aria-label"]=q}else{delete b["aria-label"]}}}}if(m.isViewportBorderChild&&!m.hasOwnProperty("ariaRole")){m.ariaRole="region"}if(q&&m.ariaRole==="region"){r=m.headingEl;if(r){r.setHtml(q)}else{if(m.rendered){m.headingEl=Ext.dom.Helper.insertFirst(m.el,{tag:"div",id:m.id+"-headingEl",role:"heading","class":"x-hidden-clip",style:"height:0",html:q},true);j.removeAttribute("aria-label");j.setAttribute("aria-labelledby",m.id+"-headingEl")}else{m.headingText=m.title;b=m.ariaRenderAttributes||(m.ariaRenderAttributes={});b["aria-labelledby"]=m.id+"-headingEl";delete b["aria-label"]}}}else{if(m.headingEl){m.headingEl.destroy();m.headingEl=null}}},statics:{floatCls:"x-border-region-slide-in"},privates:{addUIToElement:function(){var a=this;Ext.container.Container.prototype.addUIToElement.apply(this,arguments);a.addBodyCls(a.baseCls+"-body-"+a.ui)},applyTargetCls:function(a){this.getProtoBody().addCls(a)},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){var a=this;return a.body||a.protoBody||a.frameBody||a.el},initDraggable:function(){var a=this;if(a.simpleDrag){a.initSimpleDraggable()}else{a.dd=new Ext.panel.DD(a,Ext.isBoolean(a.draggable)?null:a.draggable)}},initResizable:function(){Ext.container.Container.prototype.initResizable.apply(this,arguments);if(this.collapsed){this.resizer.disable()}},initSimpleDraggable:function(){var c=this,b,a;if(!c.header){c.updateHeader(true)}if(c.header){b=Ext.applyIf({el:c.el,delegate:"#"+c.header.id},c.draggable);if(c.constrain||c.constrainHeader){b.constrain=c.constrain;b.constrainDelegate=c.constrainHeader;b.constrainTo=c.constrainTo||c.container}a=c.dd=new Ext.util.ComponentDragger(c,b);c.relayEvents(a,["dragstart","drag","dragend"]);if(c.maximized){a.disable()}}},removeUIFromElement:function(){var a=this;Ext.container.Container.prototype.removeUIFromElement.apply(this,arguments);a.removeBodyCls(a.baseCls+"-body-"+a.ui)},setupRenderTpl:function(a){Ext.container.Container.prototype.setupRenderTpl.apply(this,arguments);this.setupDockingRenderTpl(a)},slideOutFloatedPanel:function(a){var c=this,f=c.el,d,b=function(){c.slideOutFloatedPanelEnd();c.el.removeCls("x-border-region-slide-in")};if(c.isSliding||c.destroyed){return}c.isSliding=true;c.floated=false;c.slideOutFloatedPanelBegin();if(a){f.hide();return b()}if(typeof c.collapsed==="string"){d=c.convertCollapseDir(c.collapsed)}f.slideOut(d,{preserveScroll:true,duration:Ext.Number.from(c.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:b}})},slideOutFloatedPanelBegin:function(){var b=this,c=b.placeholder.el,a=b.el;b.collapsed=b.floatedFromCollapse;b.setHiddenState(true);b.floatedFromCollapse=null;c.un("mouseleave",b.onMouseLeaveFloated,b);a.un("mouseleave",b.onMouseLeaveFloated,b);c.un("mouseenter",b.onMouseEnterFloated,b);a.un("mouseenter",b.onMouseEnterFloated,b)},slideOutFloatedPanelEnd:function(a){var b=this;if(b.collapseTool){b.collapseTool.el.show()}b.slideOutTask.cancel();b.isSliding=false;if(!a){b.fireEvent("unfloat",b)}}}},0,["panel"],["component","box","container","panel"],{component:true,box:true,container:true,panel:true},["widget.panel"],[["docking",Ext.container.DockingContainer]],[Ext.panel,"Panel",Ext,"Panel"],function(){var a=this.prototype;a.animCollapse=Ext.enableFx;a.placeholderCollapseHideMode=Ext.Element.VISIBILITY}));Ext.define("Ext.theme.neptune.panel.Panel",{override:"Ext.panel.Panel",border:false,bodyBorder:false,initBorderProps:Ext.emptyFn,initBodyBorder:function(){if(this.bodyBorder!==true){arguments.callee.$previous.call(this)}}});(Ext.cmd.derive("Ext.container.Monitor",Ext.Base,{target:null,selector:"",scope:null,addHandler:null,removeHandler:null,invalidateHandler:null,disabled:0,constructor:function(a){Ext.apply(this,a)},bind:function(b){var a=this;a.target=b;b.on("beforedestroy",a.disable,a);a.onContainerAdd(b)},unbind:function(){var a=this,b=a.target;if(b){b.un("beforedestroy",a.disable,a)}a.items=null},disable:function(){++this.disabled},enable:function(){if(this.disabled>0){--this.disabled}},handleAdd:function(b,a){if(!this.disabled){if(a.is(this.selector)){this.onItemAdd(a.ownerCt,a)}if(a.isQueryable){this.onContainerAdd(a)}}},onItemAdd:function(c,b){var f=this,a=f.items,d=f.addHandler;if(!f.disabled){if(d){d.call(f.scope||b,b)}if(a){a.add(b)}}},onItemRemove:function(c,b){var f=this,a=f.items,d=f.removeHandler;if(!f.disabled){if(d){d.call(f.scope||b,b)}if(a){a.remove(b)}}},onContainerAdd:function(g,b){var m=this,j,h,c=m.handleAdd,a=m.handleRemove,d,f;if(g.isContainer){g.on("add",c,m);g.on("dockedadd",c,m);g.on("remove",a,m);g.on("dockedremove",a,m)}if(b!==true){j=g.query(m.selector);for(d=0,h=j.length;d<h;++d){f=j[d];m.onItemAdd(f.ownerCt,f)}}j=g.query(">container");for(d=0,h=j.length;d<h;++d){m.onContainerAdd(j[d],true)}},handleRemove:function(b,a){var c=this;if(!c.disabled){if(a.is(c.selector)){c.onItemRemove(b,a)}if(a.isQueryable){c.onContainerRemove(b,a)}}},onContainerRemove:function(f,c){var h=this,b,d,a,g;if(!c.destroyed&&!c.destroying&&c.isContainer){h.removeCtListeners(c);b=c.query(h.selector);for(d=0,a=b.length;d<a;++d){g=b[d];h.onItemRemove(g.ownerCt,g)}b=c.query("container");for(d=0,a=b.length;d<a;++d){h.removeCtListeners(b[d])}}else{h.invalidateItems(true)}},removeCtListeners:function(a){var b=this;a.un("add",b.handleAdd,b);a.un("dockedadd",b.handleAdd,b);a.un("remove",b.handleRemove,b);a.un("dockedremove",b.handleRemove,b)},getItems:function(){var b=this,a=b.items;if(!a){a=b.items=new Ext.util.MixedCollection();a.addAll(b.target.query(b.selector))}return a},invalidateItems:function(c){var b=this,a=b.invalidateHandler;if(c&&a){a.call(b.scope||b,b)}b.items=null}},1,0,0,0,0,0,[Ext.container,"Monitor"],0));(Ext.cmd.derive("Ext.layout.container.Anchor",Ext.layout.container.Auto,{alternateClassName:"Ext.layout.AnchorLayout",type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,manageOverflow:true,setsItemSize:true,beginLayoutCycle:function(g){var f=this,d=0,j,a,h,b,c;Ext.layout.container.Auto.prototype.beginLayoutCycle.apply(this,arguments);h=g.childItems;c=h.length;for(b=0;b<c;++b){a=h[b];j=a.target.anchorSpec;if(j){if(a.widthModel.calculated&&j.right){d|=1}if(a.heightModel.calculated&&j.bottom){d|=2}if(d===3){break}}}g.anchorDimensions=d},calculateItems:function(h,a){var t=this,o=h.childItems,g=o.length,r=a.gotHeight,j=a.gotWidth,f=a.height,c=a.width,b=(j?1:0)|(r?2:0),s=h.anchorDimensions,p,v,q,u,m,d;if(!s){return true}for(m=0;m<g;m++){v=o[m];q=v.getMarginInfo();p=v.target.anchorSpec;if(j&&v.widthModel.calculated){d=p.right(c)-q.width;d=t.adjustWidthAnchor(d,v);v.setWidth(d)}if(r&&v.heightModel.calculated){u=p.bottom(f)-q.height;u=t.adjustHeightAnchor(u,v);v.setHeight(u)}}return(b&s)===s},anchorFactory:{offset:function(a){return function(b){return b+a}},ratio:function(a){return function(b){return Math.floor(b*a)}},standard:function(a){return function(b){return b-a}}},parseAnchor:function(c,g,b){if(c&&c!=="none"){var d=this.anchorFactory,f;if(this.parseAnchorRE.test(c)){return d.standard(b-g)}if(c.indexOf("%")!==-1){return d.ratio(parseFloat(c.replace("%",""))*0.01)}f=parseInt(c,10);if(!isNaN(f)){return d.offset(f)}}return null},adjustWidthAnchor:function(b,a){return b},adjustHeightAnchor:function(b,a){return b},configureItem:function(g){var f=this,a=f.owner,d=g.anchor,b,c,h;Ext.layout.container.Auto.prototype.configureItem.apply(this,arguments);if(!g.anchor&&g.items&&!Ext.isNumber(g.width)){g.anchor=d=f.defaultAnchor}if(a.anchorSize){if(typeof a.anchorSize==="number"){c=a.anchorSize}else{c=a.anchorSize.width;h=a.anchorSize.height}}else{c=a.initialConfig.width;h=a.initialConfig.height}if(d){b=d.split(" ");g.anchorSpec={right:f.parseAnchor(b[0],g.initialConfig.width,c),bottom:f.parseAnchor(b[1],g.initialConfig.height,h)}}},sizePolicy:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},b:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},r:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},b:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(c){var f=c.anchorSpec,a="$",d=this.sizePolicy,b;if(f){b=this.owner.getSizeModel();if(f.right&&!b.width.shrinkWrap){d=d.r}if(f.bottom&&!b.height.shrinkWrap){a="b"}}return d[a]}},0,0,0,0,["layout.anchor"],0,[Ext.layout.container,"Anchor",Ext.layout,"AnchorLayout"],0));(Ext.cmd.derive("Ext.dd.DragTracker",Ext.Base,{active:false,trackOver:false,tolerance:5,autoStart:false,constructor:function(a){var b=this;Ext.apply(b,a);b.dragRegion=new Ext.util.Region(0,0,0,0);if(b.el){b.initEl(b.el)}b.mixins.observable.constructor.call(b);if(b.disabled){b.disable()}},initEl:function(b){var c=this,a=c.delegate;c.el=b=Ext.get(b);if(a&&a.isElement){c.handle=a}c.delegate=c.handle?undefined:c.delegate;if(!c.handle){c.handle=b}c.handleListeners={scope:c,delegate:c.delegate,mousedown:c.onMouseDown,dragstart:c.onDragStart};if(!Ext.supports.TouchEvents&&(c.trackOver||c.overCls)){Ext.apply(c.handleListeners,{mouseover:c.onMouseOver,mouseout:c.onMouseOut})}c.mon(c.handle,c.handleListeners);c.keyNav=new Ext.util.KeyNav({target:b,up:c.onResizeKeyDown,left:c.onResizeKeyDown,right:c.onResizeKeyDown,down:c.onResizeKeyDown,scope:c})},disable:function(){this.disabled=true},enable:function(){this.disabled=false},destroy:function(){var a=this;a.endDrag({});a.el=a.handle=a.onBeforeStart=a.onStart=a.onDrag=a.onEnd=null;a.callParent()},onMouseOver:function(j,h){var f=this,g,d,c,a,b;if(!f.disabled){if(j.within(j.target,true,true)||f.delegate){g=f.handleCls;f.mouseIsOut=false;if(g){for(c=0,a=f.handleEls.length;c<a;c++){d=f.handleEls[c];b=d.delegateCls;if(!b){b=d.delegateCls=[g,"-",d.region,"-over"].join("")}d.addCls([b,f.overCls])}}f.fireEvent("mouseover",f,j,f.delegate?j.getTarget(f.delegate,h):f.handle)}}},onMouseOut:function(f){var d=this,c,b,a;if(d.mouseIsDown){d.mouseIsOut=true}else{if(d.handleCls){for(b=0,a=d.handleEls.length;b<a;b++){c=d.handleEls[b];c.removeCls([c.delegateCls,d.overCls])}}d.fireEvent("mouseout",d,f)}},onMouseDown:function(c,b){var a=this;if(a.disabled||c.dragTracked){return}a.dragTarget=a.delegate?b:a.handle.dom;a.startXY=a.lastXY=c.getXY();a.startRegion=Ext.fly(a.dragTarget).getRegion();if(a.fireEvent("mousedown",a,c)===false||a.fireEvent("beforedragstart",a,c)===false||a.onBeforeStart(c)===false){return}a.mouseIsDown=true;c.dragTracked=true;a.el.setCapture();c.stopPropagation();if(a.preventDefault!==false){c.preventDefault()}Ext.getDoc().on({scope:a,capture:true,mouseup:a.onMouseUp,mousemove:a.onMouseMove,selectstart:a.stopSelect});a.dragEnded=false;if(!a.tolerance){a.triggerStart()}else{if(a.autoStart){a.timer=Ext.defer(a.triggerStart,a.autoStart===true?1000:a.autoStart,a,[c])}}},onMouseMove:function(f,d){var b=this,c=f.getXY(),a=b.startXY;f.stopPropagation();if(b.preventDefault!==false){f.preventDefault()}if(b.dragEnded){return}b.lastXY=c;if(!b.active){if(Math.max(Math.abs(a[0]-c[0]),Math.abs(a[1]-c[1]))>b.tolerance){b.triggerStart(f)}else{return}}if(b.fireEvent("mousemove",b,f)===false){b.onMouseUp(f)}else{b.onDrag(f);b.fireEvent("drag",b,f)}},onMouseUp:function(b){var a=this;a.mouseIsDown=false;if(a.mouseIsOut){a.mouseIsOut=false;a.onMouseOut(b)}if(a.preventDefault!==false){b.preventDefault()}if(Ext.isIE&&document.releaseCapture){document.releaseCapture()}a.fireEvent("mouseup",a,b);a.endDrag(b)},endDrag:function(c){var b=this,a=b.active;Ext.getDoc().un({mousemove:b.onMouseMove,mouseup:b.onMouseUp,selectstart:b.stopSelect,capture:true,scope:b});b.clearStart();b.active=false;if(a){b.dragEnded=true;b.onEnd(c);b.fireEvent("dragend",b,c)}b._constrainRegion=null},triggerStart:function(b){var a=this;a.clearStart();a.active=true;a.onStart(b);a.fireEvent("dragstart",a,b)},clearStart:function(){var a=this.timer;if(a){clearTimeout(a);this.timer=null}},stopSelect:function(a){a.stopEvent();return false},onBeforeStart:function(a){},onStart:function(a){},onDrag:function(a){},onEnd:function(a){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getConstrainRegion:function(){var a=this;if(a.constrainTo){if(a.constrainTo instanceof Ext.util.Region){return a.constrainTo}if(!a._constrainRegion){a._constrainRegion=Ext.fly(a.constrainTo).getViewRegion()}}else{if(!a._constrainRegion){a._constrainRegion=a.getDragCt().getViewRegion()}}return a._constrainRegion},getXY:function(a){return a?this.constrainModes[a](this,this.lastXY):this.lastXY},getOffset:function(c){var b=this.getXY(c),a=this.startXY;return[b[0]-a[0],b[1]-a[1]]},onDragStart:function(a){a.stopPropagation()},constrainModes:{point:function(b,d){var c=b.dragRegion,a=b.getConstrainRegion();if(!a){return d}c.x=c.left=c[0]=c.right=d[0];c.y=c.top=c[1]=c.bottom=d[1];c.constrainTo(a);return[c.left,c.top]},dragTarget:function(c,g){var b=c.startXY,f=c.startRegion.copy(),a=c.getConstrainRegion(),d;if(!a){return g}f.translateBy(g[0]-b[0],g[1]-b[1]);if(f.right>a.right){g[0]+=d=(a.right-f.right);f.left+=d}if(f.left<a.left){g[0]+=(a.left-f.left)}if(f.bottom>a.bottom){g[1]+=d=(a.bottom-f.bottom);f.top+=d}if(f.top<a.top){g[1]+=(a.top-f.top)}return g}}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.dd,"DragTracker"],0));(Ext.cmd.derive("Ext.resizer.SplitterTracker",Ext.dd.DragTracker,{enabled:true,overlayCls:"x-resizable-overlay",createDragOverlay:function(){var a,b=Ext.dom.Element;a=this.overlay=Ext.getBody().createChild({role:"presentation",cls:this.overlayCls,html:"&#160;"});a.unselectable();a.setSize(b.getDocumentWidth(),b.getDocumentHeight());a.show()},getPrevCmp:function(){var a=this.getSplitter();return a.previousSibling(":not([hidden])")},getNextCmp:function(){var a=this.getSplitter();return a.nextSibling(":not([hidden])")},onBeforeStart:function(h){var d=this,f=d.getPrevCmp(),a=d.getNextCmp(),c=d.getSplitter().collapseEl,g=h.getTarget(),b;if(!f||!a){return false}if(c&&g===c.dom){return false}if(a.collapsed||f.collapsed){return false}d.prevBox=f.getEl().getBox();d.nextBox=a.getEl().getBox();d.constrainTo=b=d.calculateConstrainRegion();if(!b){return false}return b},onStart:function(b){var a=this.getSplitter();this.createDragOverlay();a.addCls(a.baseCls+"-active")},onResizeKeyDown:function(f){var b=this,d=b.getSplitter(),a=f.getKey(),c=d.orientation==="vertical"?0:1,h=a===f.UP||a===f.LEFT?-1:1,g;if(!b.active&&b.onBeforeStart(f)){Ext.fly(f.target).on("keyup",b.onResizeKeyUp,b);b.triggerStart(f);b.onMouseDown(f);b.startXY=d.getXY();b.lastKeyDownXY=Ext.Array.slice(b.startXY);g=b.easing=new Ext.fx.easing.Linear();g.setStartTime(Ext.Date.now());g.setStartValue(1);g.setEndValue(4);g.setDuration(2000)}if(b.active){b.lastKeyDownXY[c]=Math.round(b.lastKeyDownXY[c]+(h*b.easing.getValue()));b.lastXY=b.lastKeyDownXY;d.setXY(b.getXY("dragTarget"))}},onResizeKeyUp:function(a){this.onMouseUp(a)},calculateConstrainRegion:function(){var h=this,a=h.getSplitter(),j=a.getWidth(),m=a.defaultSplitMin,b=a.orientation,f=h.prevBox,o=h.getPrevCmp(),c=h.nextBox,g=h.getNextCmp(),q,p,d;if(b==="vertical"){d={prevCmp:o,nextCmp:g,prevBox:f,nextBox:c,defaultMin:m,splitWidth:j};q=new Ext.util.Region(f.y,h.getVertPrevConstrainRight(d),f.bottom,h.getVertPrevConstrainLeft(d));p=new Ext.util.Region(c.y,h.getVertNextConstrainRight(d),c.bottom,h.getVertNextConstrainLeft(d))}else{q=new Ext.util.Region(f.y+(o.minHeight||m),f.right,(o.maxHeight?f.y+o.maxHeight:c.bottom-(g.minHeight||m))+j,f.x);p=new Ext.util.Region((g.maxHeight?c.bottom-g.maxHeight:f.y+(o.minHeight||m))-j,c.right,c.bottom-(g.minHeight||m),c.x)}return q.intersect(p)},performResize:function(p,g){var r=this,a=r.getSplitter(),h=a.orientation,s=r.getPrevCmp(),q=r.getNextCmp(),b=a.ownerCt,m=b.query(">[flex]"),o=m.length,c=h==="vertical",j=0,f=c?"width":"height",d=0,t,u;for(;j<o;j++){t=m[j];u=c?t.getWidth():t.getHeight();d+=u;t.flex=u}g=c?g[0]:g[1];if(s){u=r.prevBox[f]+g;if(s.flex){s.flex=u}else{s[f]=u}}if(q){u=r.nextBox[f]-g;if(q.flex){q.flex=u}else{q[f]=u}}b.updateLayout()},endDrag:function(){var a=this;if(a.overlay){a.overlay.destroy();delete a.overlay}Ext.dd.DragTracker.prototype.endDrag.apply(this,arguments)},onEnd:function(c){var a=this,b=a.getSplitter();b.removeCls(b.baseCls+"-active");a.performResize(c,a.getResizeOffset())},onDrag:function(f){var c=this,g=c.getOffset("dragTarget"),d=c.getSplitter(),b=d.getEl(),a=d.orientation;if(a==="vertical"){b.setX(c.startRegion.left+g[0])}else{b.setY(c.startRegion.top+g[1])}},getSplitter:function(){return this.splitter},getVertPrevConstrainRight:function(a){return(a.prevCmp.maxWidth?a.prevBox.x+a.prevCmp.maxWidth:a.nextBox.right-(a.nextCmp.minWidth||a.defaultMin))+a.splitWidth},getVertPrevConstrainLeft:function(a){return a.prevBox.x+(a.prevCmp.minWidth||a.defaultMin)},getVertNextConstrainRight:function(a){return a.nextBox.right-(a.nextCmp.minWidth||a.defaultMin)},getVertNextConstrainLeft:function(a){return(a.nextCmp.maxWidth?a.nextBox.right-a.nextCmp.maxWidth:a.prevBox.x+(a.prevBox.minWidth||a.defaultMin))-a.splitWidth},getResizeOffset:function(){return this.getOffset("dragTarget")}},0,0,0,0,0,0,[Ext.resizer,"SplitterTracker"],0));(Ext.cmd.derive("Ext.dd.DDTarget",Ext.dd.DragDrop,{constructor:function(c,a,b){if(c){this.initTarget(c,a,b)}},getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return("DDTarget "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DDTarget"],0));(Ext.cmd.derive("Ext.event.publisher.MouseEnterLeave",Ext.event.publisher.Dom,{type:"mouseEnterLeave"},0,0,0,0,0,0,[Ext.event.publisher,"MouseEnterLeave"],function(a){var b={mouseover:"mouseenter",mouseout:"mouseleave"};if(!Ext.supports.MouseEnterLeave){a.override({handledDomEvents:["mouseover","mouseout"],handledEvents:["mouseenter","mouseleave"],doDelegatedEvent:function(j){var h,c,m,f,d,g;j=this.callParent([j]);h=j.getTarget();c=j.getRelatedTarget();if(c&&Ext.fly(h).contains(c)){return}m=h.id;if(m){f=Ext.cache[m];if(f){d=b[j.type];j=j.chain({type:d});if(f.hasListeners[d]){g=f.events[d];if(g){g=g.directs;if(g){j.setCurrentTarget(f.dom);g.fire(j,j.target)}}}}}}})}a.instance=new a()}));(Ext.cmd.derive("Ext.form.action.Action",Ext.Base,{alternateClassName:"Ext.form.Action",submitEmptyText:true,constructor:function(a){if(a){Ext.apply(this,a)}var b=a.params;if(Ext.isString(b)){this.params=Ext.Object.fromQueryString(b)}},run:Ext.emptyFn,onFailure:function(a){var c=this.form,b=c&&!c.destroying&&!c.destroyed;this.response=a;this.failureType=Ext.form.action.Action.CONNECT_FAILURE;if(b){c.afterAction(this,false)}},processResponse:function(a){this.response=a;if(!a.responseText&&!a.responseXML){return true}return(this.result=this.handleResponse(a))},getUrl:function(){return this.url||this.form.url},getMethod:function(){return(this.method||this.form.method||"POST").toUpperCase()},getParams:function(){return Ext.apply({},this.params,this.form.baseParams)},createCallback:function(){var a=this;return{success:a.onSuccess,failure:a.onFailure,scope:a,timeout:(a.timeout||a.form.timeout)*1000}},statics:{CLIENT_INVALID:"client",SERVER_INVALID:"server",CONNECT_FAILURE:"connect",LOAD_FAILURE:"load"}},1,0,0,0,0,0,[Ext.form.action,"Action",Ext.form,"Action"],0));(Ext.cmd.derive("Ext.form.action.Load",Ext.form.action.Action,{alternateClassName:"Ext.form.Action.Load",type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(),{method:this.getMethod(),url:this.getUrl(),headers:this.headers,params:this.getParams()}))},onSuccess:function(b){var a=this.processResponse(b),d=this.form,c=d&&!d.destroying&&!d.destroyed;if(a===true||!a.success||!a.data){this.failureType=Ext.form.action.Action.LOAD_FAILURE;if(c){d.afterAction(this,false)}return}if(c){d.clearInvalid();d.setValues(a.data);d.afterAction(this,true)}},handleResponse:function(c){var a=this.form.reader,b,d;if(a){b=a.read(c);d=b.records&&b.records[0]?b.records[0].data:null;return{success:b.success,data:d}}return Ext.decode(c.responseText)}},0,0,0,0,["formaction.load"],0,[Ext.form.action,"Load",Ext.form.Action,"Load"],0));(Ext.cmd.derive("Ext.form.action.Submit",Ext.form.action.Action,{alternateClassName:"Ext.form.Action.Submit",type:"submit",run:function(){var b=this,a=b.form;if(b.clientValidation===false||a.isValid()){b.doSubmit()}else{b.failureType=Ext.form.action.Action.CLIENT_INVALID;a.afterAction(b,false)}},doSubmit:function(){var d=this,b=Ext.apply(d.createCallback(),{url:d.getUrl(),method:d.getMethod(),headers:d.headers}),c=d.form,f=d.jsonSubmit||c.jsonSubmit,a=f?"jsonData":"params",g;if(c.hasUpload()){g=d.buildForm();b.form=g.formEl;b.isUpload=true}else{b[a]=d.getParams(f)}Ext.Ajax.request(b);if(g){d.cleanup(g)}},cleanup:function(h){var f=h.formEl,d=h.uploadEls,b=h.uploadFields,a=b.length,c,g;for(c=0;c<a;++c){g=b[c];if(!g.clearOnSubmit){g.restoreInput(d[c])}}if(f){Ext.removeNode(f)}},getParams:function(d){var c=false,b=Ext.form.action.Action.prototype.getParams.call(this),a=this.form.getValues(c,c,this.submitEmptyText!==c,d,true);return Ext.apply({},a,b)},buildForm:function(){var m=this,q=[],o,w,h=m.form,d=m.getParams(),c=[],a=[],g=h.getFields().items,f,j=g.length,p,u,s,t,r,b;for(f=0;f<j;++f){p=g[f];if(p.isFileUpload()){c.push(p)}}for(u in d){if(d.hasOwnProperty(u)){s=d[u];if(Ext.isArray(s)){r=s.length;for(t=0;t<r;t++){q.push(m.getFieldConfig(u,s[t]))}}else{q.push(m.getFieldConfig(u,s))}}}o={tag:"form",role:"presentation",action:m.getUrl(),method:m.getMethod(),target:m.target?(Ext.isString(m.target)?m.target:Ext.fly(m.target).dom.name):"_self",style:"display:none",cn:q};if(c.length){o.encoding=o.enctype="multipart/form-data"}w=Ext.DomHelper.append(Ext.getBody(),o);j=c.length;for(f=0;f<j;++f){b=c[f].extractFileInput();w.appendChild(b);a.push(b)}return{formEl:w,uploadFields:c,uploadEls:a}},getFieldConfig:function(a,b){return{tag:"input",type:"hidden",name:a,value:Ext.String.htmlEncode(b)}},onSuccess:function(b){var d=this.form,c=d&&!d.destroying&&!d.destroyed,f=true,a=this.processResponse(b);if(a!==true&&!a.success){if(a.errors&&c){d.markInvalid(a.errors)}this.failureType=Ext.form.action.Action.SERVER_INVALID;f=false}if(c){d.afterAction(this,f)}},handleResponse:function(d){var a=this.form,c=a.errorReader,f,m,g,h,b,o;if(c){f=c.read(d);b=f.records;m=[];if(b){for(g=0,h=b.length;g<h;g++){m[g]=b[g].data}}if(m.length<1){m=null}o={success:f.success,errors:m}}else{try{o=Ext.decode(d.responseText)}catch(j){o={success:false,errors:[]}}}return o}},0,0,0,0,["formaction.submit"],0,[Ext.form.action,"Submit",Ext.form.Action,"Submit"],0));(Ext.cmd.derive("Ext.util.ComponentDragger",Ext.dd.DragTracker,{autoStart:500,constructor:function(a,b){this.comp=a;this.initialConstrainTo=b.constrainTo;Ext.dd.DragTracker.prototype.constructor.call(this,b)},onStart:function(c){var b=this,a=b.comp;b.startPosition=a.getXY();if(a.ghost&&!a.liveDrag){b.proxy=a.ghost();b.dragTarget=b.proxy.header.el}if(b.constrain||b.constrainDelegate){b.constrainTo=b.calculateConstrainRegion()}if(a.beginDrag){a.beginDrag()}if(a.el.shim){a.el.maskIframes()}},calculateConstrainRegion:function(){var j=this,g=j.comp,h=j.initialConstrainTo,f=g.constraintInsets,o,b,d,c=j.proxy?j.proxy.el:g.el,m=c.shadow,a=(m&&!j.constrainDelegate&&g.constrainShadow&&!m.disabled)?m.getShadowSize():0;if(!(h instanceof Ext.util.Region)){o=Ext.fly(h);h=o.getConstrainRegion()}else{h=h.copy()}if(f){f=Ext.isObject(f)?f:Ext.Element.parseBox(f);h.adjust(f.top,f.right,f.bottom,f.left)}if(a){h.adjust(a[0],-a[1],-a[2],a[3])}if(!j.constrainDelegate){b=Ext.fly(j.dragTarget).getRegion();d=c.getRegion();h.adjust(b.top-d.top,b.right-d.right,b.bottom-d.bottom,b.left-d.left)}return h},onDrag:function(c){var b=this,a=(b.proxy&&!b.comp.liveDrag)?b.proxy:b.comp,d=b.getOffset(b.constrain||b.constrainDelegate?"dragTarget":null);a.setPagePosition(b.startPosition[0]+d[0],b.startPosition[1]+d[1])},onEnd:function(b){var a=this.comp;if(a.destroyed||a.destroying){return}if(this.proxy&&!a.liveDrag){a.unghost()}if(a.endDrag){a.endDrag()}if(a.el.shim){a.el.unmaskIframes()}}},1,0,0,0,0,0,[Ext.util,"ComponentDragger"],0));(Ext.cmd.derive("Ext.util.FocusTrap",Ext.Mixin,{mixinConfig:{id:"focustrap",after:{afterRender:"initTabGuards",addTool:"initTabGuards",add:"initTabGuards",remove:"initTabGuards",addDocked:"initTabGuards",removeDocked:"initTabGuards",onShow:"initTabGuards",afterHide:"initTabGuards"}},config:{tabGuard:true,tabGuardTpl:'<div id="{id}-{tabGuardEl}" data-ref="{tabGuardEl}" role="button" data-tabguardposition="{tabGuard}" aria-busy="true" style="height:0"class="x-hidden-clip"></div>',tabGuardIndex:0},tabGuardPositionAttribute:"data-tabguardposition",privates:{initTabGuards:function(){var f=this,c=f.tabGuardPositionAttribute,d=f.tabGuardBeforeEl,g=f.tabGuardAfterEl,a=f.tabGuardIndex,b;if(!f.rendered||!f.tabGuard){return}b=f.el.findTabbableElements({skipSelf:true});if(b[0]&&b[0].hasAttribute(c)){b.shift()}if(b.length&&b[b.length-1].hasAttribute(c)){b.pop()}if(b.length){d.dom.setAttribute("tabIndex",a);d.on("focusenter",f.onTabGuardFocusEnter,f);g.dom.setAttribute("tabIndex",a);g.on("focusenter",f.onTabGuardFocusEnter,f)}else{d.dom.removeAttribute("tabIndex");d.un("focusenter",f.onTabGuardFocusEnter,f);g.dom.removeAttribute("tabIndex");g.un("focusenter",f.onTabGuardFocusEnter,f)}},onTabGuardFocusEnter:function(f,g){var h=this,b=h.el,j=h.tabGuardPositionAttribute,d=g.getAttribute(j),m=f.relatedTarget,a,c,o;if(!m.hasAttribute(j)&&m!==b.dom&&b.contains(m)){c=d==="before"?false:true}else{c=d==="before"?true:false}a=b.findTabbableElements({skipSelf:true});a.shift();a.pop();o=c?a[0]:a[a.length-1];if(o){o.focus()}}}},0,0,0,0,0,0,[Ext.util,"FocusTrap"],0));(Ext.cmd.derive("Ext.window.Window",Ext.panel.Panel,{alternateClassName:"Ext.Window",baseCls:"x-window",resizable:true,draggable:true,constrain:false,constrainHeader:false,plain:false,minimizable:false,maximizable:false,minHeight:50,minWidth:50,expandOnShow:true,collapsible:false,closable:true,hidden:true,autoRender:true,hideMode:"offsets",floating:true,itemCls:"x-window-item",overlapHeader:true,ignoreHeaderBorderManagement:true,alwaysFramed:true,isRootCfg:{isRoot:true},isWindow:true,ariaRole:"dialog",initComponent:function(){var a=this;a.frame=false;Ext.panel.Panel.prototype.initComponent.call(this);if(a.plain){a.addClsWithUI("plain")}a.addStateEvents(["maximize","restore","resize","dragend"])},getElConfig:function(){var b=this,a;a=Ext.panel.Panel.prototype.getElConfig.call(this);a.tabIndex=-1;return a},getFocusEl:function(){return this.getDefaultFocus()||this.el},getState:function(){var b=this,d=Ext.panel.Panel.prototype.getState.call(this)||{},a=!!b.maximized,c=b.ghostBox,f;d.maximized=a;if(a){f=b.restorePos}else{if(c){f=[c.x,c.y]}else{f=b.getPosition()}}Ext.apply(d,{size:a?b.restoreSize:b.getSize(),pos:f});return d},applyState:function(b){var a=this;if(b){a.maximized=b.maximized;if(a.maximized){a.hasSavedRestore=true;a.restoreSize=b.size;a.restorePos=b.pos}else{Ext.apply(a,{width:b.size.width,height:b.size.height,x:b.pos[0],y:b.pos[1]})}}},onRender:function(b,a){var c=this;Ext.panel.Panel.prototype.onRender.apply(this,arguments);if(c.header){c.header.on({scope:c,click:c.onHeaderClick})}if(c.maximizable){c.header.on({scope:c,dblclick:c.toggleMaximize})}},afterRender:function(){var a=this,c=a.header,b;if(a.maximized){a.maximized=false;a.maximize();if(c){c.removeCls(c.indicateDragCls)}}Ext.panel.Panel.prototype.afterRender.call(this);if(a.closable){b=a.getKeyMap();b.on(27,a.onEsc,a)}else{b=a.keyMap}if(b&&a.hidden){b.disable()}},onEsc:function(a,b){b.stopEvent();this.close()},beforeDestroy:function(){var a=this;if(a.rendered){Ext.un("resize",a.onWindowResize,a);delete a.animateTarget;a.hide();Ext.destroy(a.keyMap)}Ext.panel.Panel.prototype.beforeDestroy.call(this)},addTools:function(){var a=this,b=[];Ext.panel.Panel.prototype.addTools.call(this);if(a.minimizable){b.push({type:"minimize",handler:"minimize",scope:a})}if(a.maximizable){b.push({type:a.maximized?"restore":"maximize",handler:"toggleMaximize",scope:a})}if(b.length){a.addTool(b)}},onShow:function(){var a=this;Ext.panel.Panel.prototype.onShow.apply(this,arguments);if(a.expandOnShow){a.expand(false)}a.syncMonitorWindowResize();if(a.keyMap){a.keyMap.enable()}},doClose:function(){var a=this;if(a.hidden){a.fireEvent("close",a);if(a.closeAction==="destroy"){a.destroy()}}else{a.hide(a.animateTarget,a.doClose,a)}},afterHide:function(){var a=this;a.syncMonitorWindowResize();if(a.keyMap){a.keyMap.disable()}Ext.panel.Panel.prototype.afterHide.apply(this,arguments)},onWindowResize:function(){var b=this,a;if(!b.destroyed){if(b.maximized){b.fitContainer()}else{a=b.getSizeModel();if(a.width.natural||a.height.natural){b.updateLayout()}b.doConstrain()}}},minimize:function(){this.fireEvent("minimize",this);return this},resumeHeaderLayout:function(a){this.header.resumeLayouts(a?this.isRootCfg:null)},afterCollapse:function(){var a=this,c=a.header,b=a.tools;if(c&&a.maximizable){c.suspendLayouts();b.maximize.hide();this.resumeHeaderLayout(true)}if(a.resizer){a.resizer.disable()}Ext.panel.Panel.prototype.afterCollapse.apply(this,arguments)},afterExpand:function(){var a=this,d=a.header,b=a.tools,c;if(d){d.suspendLayouts();if(a.maximizable){b.maximize.show();c=true}this.resumeHeaderLayout(c)}if(a.resizer){a.resizer.enable()}Ext.panel.Panel.prototype.afterExpand.apply(this,arguments)},maximize:function(b){var f=this,j=f.header,g=f.tools,d=f.width,a=f.height,c,h;if(!f.maximized){f.expand(false);if(!f.hasSavedRestore){c=f.restoreSize={width:d?d:null,height:a?a:null};f.restorePos=f.getPosition()}if(j){j.suspendLayouts();if(g.maximize){g.maximize.setType("restore")}if(f.collapseTool){f.collapseTool.hide();h=true}f.resumeHeaderLayout(h)}f.el.disableShadow();if(f.dd){f.dd.disable();if(j){j.removeCls(j.indicateDragCls)}}if(f.resizer){f.resizer.disable()}f.el.addCls("x-window-maximized");f.container.addCls("x-window-maximized-ct");f.syncMonitorWindowResize();f.fitContainer(b=(b||!!f.animateTarget)?{callback:function(){f.maximized=true;f.fireEvent("maximize",f)}}:null);if(!b){f.maximized=true;f.fireEvent("maximize",f)}}return f},restore:function(b){var c=this,d=c.tools,g=c.header,a=c.restoreSize,f;if(c.maximized){c.hasSavedRestore=null;c.removeCls("x-window-maximized");if(g){g.suspendLayouts();if(d.maximize){d.maximize.setType("maximize")}if(c.collapseTool){c.collapseTool.show();f=true}c.resumeHeaderLayout(f)}a.x=c.restorePos[0];a.y=c.restorePos[1];c.setBox(a,b=(b||!!c.animateTarget)?{callback:function(){c.el.enableShadow(null,true);c.maximized=false;c.fireEvent("restore",c)}}:null);c.restorePos=c.restoreSize=null;if(c.dd){c.dd.enable();if(g){g.addCls(g.indicateDragCls)}}if(c.resizer){c.resizer.enable()}c.container.removeCls("x-window-maximized-ct");c.syncMonitorWindowResize();if(!b){c.el.enableShadow(null,true);c.maximized=false;c.fireEvent("restore",c)}}return c},syncMonitorWindowResize:function(){var b=this,c=b._monitoringResize,d=b.monitorResize||b.constrain||b.constrainHeader||b.maximized,a=b.hidden||b.destroying||b.destroyed;if(d&&!a){if(!c){Ext.on("resize",b.onWindowResize,b,{buffer:1});b._monitoringResize=true}}else{if(c){Ext.un("resize",b.onWindowResize,b);b._monitoringResize=false}}},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},createGhost:function(){var a=Ext.panel.Panel.prototype.createGhost.apply(this,arguments);a.xtype="window";a.focusOnToFront=false;return a},getDefaultFocus:function(){var c=this,b,d=c.defaultFocus,a;if(d!==undefined){if(Ext.isNumber(d)){b=c.query("button")[d]}else{if(Ext.isString(d)){a=d;if(Ext.validIdRe.test(a)){b=c.down(Ext.makeIdSelector(a))}if(!b){b=c.down(a)}}else{if(d.focus){b=d}}}}return b},privates:{initDraggable:function(){this.initSimpleDraggable()},onHeaderClick:function(c,b){var a;if(c.el.contains(b.getTarget())){a=this.getDefaultFocus();if(a){a.focus()}}},initResizable:function(){Ext.panel.Panel.prototype.initResizable.apply(this,arguments);if(this.maximized){this.resizer.disable()}}}},0,["window"],["component","box","container","panel","window"],{component:true,box:true,container:true,panel:true,window:true},["widget.window"],[[Ext.util.FocusTrap.prototype.mixinId||Ext.util.FocusTrap.$className,Ext.util.FocusTrap]],[Ext.window,"Window",Ext,"Window"],0));(Ext.cmd.derive("Ext.form.Labelable",Ext.Mixin,{isLabelable:true,mixinConfig:{id:"labelable",on:{beforeRender:"beforeLabelRender",onRender:"onLabelRender"}},config:{childEls:["labelEl","bodyEl","errorEl","errorWrapEl","ariaErrorEl"]},labelableRenderTpl:["{beforeLabelTpl}",'<label id="{id}-labelEl" data-ref="labelEl" class="{labelCls} {labelCls}-{ui} {labelClsExtra} ','{childElCls} {unselectableCls}" style="{labelStyle}"<tpl if="inputId">',' for="{inputId}"</tpl> {labelAttrTpl}>','<span class="{labelInnerCls} {labelInnerCls}-{ui}" style="{labelInnerStyle}">',"{beforeLabelTextTpl}",'<tpl if="fieldLabel">{fieldLabel}','<tpl if="labelSeparator">{labelSeparator}</tpl>',"</tpl>","{afterLabelTextTpl}","</span>","</label>","{afterLabelTpl}",'<div id="{id}-bodyEl" data-ref="bodyEl" role="presentation"',' class="{baseBodyCls} {baseBodyCls}-{ui}<tpl if="fieldBodyCls">',' {fieldBodyCls} {fieldBodyCls}-{ui}</tpl> {growCls} {extraFieldBodyCls}"','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{beforeBodyEl}","{beforeSubTpl}","{[values.$comp.getSubTplMarkup(values)]}","{afterSubTpl}","{afterBodyEl}",'<div id="{id}-ariaErrorEl" data-ref="ariaErrorEl" role="alert" aria-live="polite"',' class="x-hidden-clip">',"</div>","</div>",'<tpl if="renderError">','<div id="{id}-errorWrapEl" data-ref="errorWrapEl" class="{errorWrapCls} {errorWrapCls}-{ui}',' {errorWrapExtraCls}" style="{errorWrapStyle}">','<div role="presentation" id="{id}-errorEl" data-ref="errorEl" ','class="{errorMsgCls} {invalidMsgCls} {invalidMsgCls}-{ui}" ','data-anchorTarget="{tipAnchorTarget}">',"</div>","</div>","</tpl>",{disableFormats:true}],activeErrorsTpl:undefined,htmlActiveErrorsTpl:['<tpl if="errors && errors.length">','<ul class="{listCls}">','<tpl for="errors"><li>{.}</li></tpl>',"</ul>","</tpl>"],plaintextActiveErrorsTpl:['<tpl if="errors && errors.length">','<tpl for="errors"><tpl if="xindex &gt; 1">\n</tpl>{.}</tpl>',"</tpl>"],isFieldLabelable:true,formItemCls:"x-form-item",labelCls:"x-form-item-label",topLabelCls:"x-form-item-label-top",rightLabelCls:"x-form-item-label-right",labelInnerCls:"x-form-item-label-inner",topLabelSideErrorCls:"x-form-item-label-top-side-error",errorMsgCls:"x-form-error-msg",errorWrapCls:"x-form-error-wrap",errorWrapSideCls:"x-form-error-wrap-side",errorWrapUnderCls:"x-form-error-wrap-under",errorWrapUnderSideLabelCls:"x-form-error-wrap-under-side-label",baseBodyCls:"x-form-item-body",invalidIconCls:"x-form-invalid-icon",invalidUnderCls:"x-form-invalid-under",noLabelCls:"x-form-item-no-label",fieldBodyCls:"",invalidCls:"x-form-invalid",fieldLabel:undefined,labelAlign:"left",labelWidth:100,labelPad:5,labelSeparator:":",hideLabel:false,hideEmptyLabel:true,preventMark:false,autoFitErrors:true,msgTarget:"qtip",msgTargets:{qtip:1,title:1,under:1,side:1,none:1},noWrap:true,labelableInsertions:["beforeBodyEl","afterBodyEl","beforeLabelTpl","afterLabelTpl","beforeSubTpl","afterSubTpl","beforeLabelTextTpl","afterLabelTextTpl","labelAttrTpl"],statics:{initTip:function(){var b=this.tip,a,c;if(b){return}a={id:"ext-form-error-tip",ui:"form-invalid"};if(Ext.supports.Touch){a.dismissDelay=0;a.anchor="top";a.showDelay=0;a.listeners={beforeshow:function(){this.minWidth=Ext.fly(this.anchorTarget).getWidth()}}}b=this.tip=Ext.create("Ext.tip.QuickTip",a);c=Ext.apply({},b.tagConfig);c.attribute="errorqtip";b.setTagConfig(c)},destroyTip:function(){this.tip=Ext.destroy(this.tip)}},initLabelable:function(){var a=this,b=a.padding;if(b){a.padding=undefined;a.extraMargins=Ext.Element.parseBox(b)}if(Ext.isIE8){a.restoreDisplay=Ext.Function.createDelayed(a.doRestoreDisplay,0,a)}if(!a.activeErrorsTpl){if(a.msgTarget==="title"){a.activeErrorsTpl=a.plaintextActiveErrorsTpl}else{a.activeErrorsTpl=a.htmlActiveErrorsTpl}}a.addCls([a.formItemCls,a.formItemCls+"-"+a.ui]);a.lastActiveError="";a.enableBubble("errorchange")},trimLabelSeparator:function(){var c=this,d=c.labelSeparator,a=c.fieldLabel||"",b=a.substr(a.length-1);return b===d?a.slice(0,-1):a},getFieldLabel:function(){return this.trimLabelSeparator()},setFieldLabel:function(d){d=d||"";var f=this,g=f.labelSeparator,c=f.labelEl,b=f.errorWrapEl,j=(f.labelAlign!=="top"),a=f.noLabelCls,h=f.errorWrapUnderSideLabelCls;f.fieldLabel=d;if(f.rendered){if(Ext.isEmpty(d)&&f.hideEmptyLabel){f.addCls(a);if(j&&b){b.removeCls(h)}}else{if(g){d=f.trimLabelSeparator()+g}c.dom.firstChild.innerHTML=d;f.removeCls(a);if(j&&b){b.addCls(h)}}f.updateLayout()}},setHideLabel:function(a){var b=this;if(a!==b.hideLabel){b.hideLabel=a;if(b.rendered){b[a?"addCls":"removeCls"](b.noLabelCls);b.updateLayout()}}},setHideEmptyLabel:function(a){var c=this,b;if(a!==c.hideEmptyLabel){c.hideEmptyLabel=a;if(c.rendered&&!c.hideLabel){b=a&&!c.getFieldLabel();c[b?"addCls":"removeCls"](c.noLabelCls);c.updateLayout()}}},getInsertionRenderData:function(d,f){var b=f.length,a,c;while(b--){a=f[b];c=this[a];if(c){if(typeof c!=="string"){if(!c.isTemplate){c=Ext.XTemplate.getTpl(this,a)}c=c.apply(d)}}d[a]=c||""}return d},getLabelableRenderData:function(){var t=this,w=t.labelAlign,f=(w==="top"),q=(w==="right"),m=(t.msgTarget==="side"),g=(t.msgTarget==="under"),v=t.errorMsgCls,h=t.labelPad,s=t.labelWidth,b=t.labelClsExtra||"",j=m?t.errorWrapSideCls:t.errorWrapUnderCls,a="",p="",d=t.hasVisibleLabel(),r=t.autoFitErrors,o=t.defaultBodyWidth,c,u;if(f){b+=" "+t.topLabelCls;if(h){p="padding-bottom:"+h+"px;"}if(m&&!r){b+=" "+t.topLabelSideErrorCls}}else{if(q){b+=" "+t.rightLabelCls}if(h){a+=t.getHorizontalPaddingStyle()+h+"px;"}a+="width:"+(s+(h?h:0))+"px;";p="width:"+s+"px"}if(d){if(!f&&g){j+=" "+t.errorWrapUnderSideLabelCls}}if(o){c="min-width:"+o+"px;max-width:"+o+"px;"}u={id:t.id,inputId:t.getInputId(),labelCls:t.labelCls,labelClsExtra:b,labelStyle:a+(t.labelStyle||""),labelInnerStyle:p,labelInnerCls:t.labelInnerCls,unselectableCls:Ext.Element.unselectableCls,bodyStyle:c,baseBodyCls:t.baseBodyCls,fieldBodyCls:t.fieldBodyCls,extraFieldBodyCls:t.extraFieldBodyCls,errorWrapCls:t.errorWrapCls,errorWrapExtraCls:j,renderError:m||g,invalidMsgCls:m?t.invalidIconCls:g?t.invalidUnderCls:"",errorMsgCls:v,growCls:t.grow?t.growCls:"",tipAnchorTarget:t.id+"-inputEl",errorWrapStyle:(m&&!r)?"visibility:hidden":"display:none",fieldLabel:t.getFieldLabel(),labelSeparator:t.labelSeparator};t.getInsertionRenderData(u,t.labelableInsertions);return u},getHorizontalPaddingStyle:function(){return"padding-right:"},beforeLabelRender:function(){var a=this;a.setFieldDefaults(a.getInherited().fieldDefaults);if(a.ownerLayout){a.addCls("x-"+a.ownerLayout.type+"-form-item")}if(!a.hasVisibleLabel()){a.addCls(a.noLabelCls)}},onLabelRender:function(){var d=this,c={},g=Ext.Element,a=d.errorWrapEl,f,b;if(a){a.setVisibilityMode((d.msgTarget==="side"&&!d.autoFitErrors)?g.VISIBILITY:g.DISPLAY)}if(d.extraMargins){f=d.el.getMargin();for(b in f){if(f.hasOwnProperty(b)){c["margin-"+b]=(f[b]+d.extraMargins[b])+"px"}}d.el.setStyle(c)}},hasVisibleLabel:function(){if(this.hideLabel){return false}return !(this.hideEmptyLabel&&!this.getFieldLabel())},getSubTplMarkup:function(){return""},getInputId:function(){return""},getActiveError:function(){return this.activeError||""},hasActiveError:function(){return !!this.getActiveError()},setActiveError:function(a){this.setActiveErrors(a)},getActiveErrors:function(){return this.activeErrors||[]},setActiveErrors:function(j){var g=this,h=g.errorWrapEl,d=g.msgTarget,c=d==="side",o=d==="qtip",a,b,f,m;j=Ext.Array.from(j);f=g.getTpl("activeErrorsTpl");g.activeErrors=j;b=g.activeError=f.apply({fieldLabel:g.fieldLabel,errors:j,listCls:"x-list-plain"});g.renderActiveError();if(g.rendered){a=g.getActionEl();if(c){g.errorEl.dom.setAttribute("data-errorqtip",b)}else{if(o){a.dom.setAttribute("data-errorqtip",b)}else{if(d==="title"){a.dom.setAttribute("title",b)}}}if(d!=="title"){g.ariaErrorEl.dom.innerHTML=j.join(". ");a.dom.setAttribute("aria-describedby",g.ariaErrorEl.id)}if(c||o){Ext.form.Labelable.initTip()}if(!g.msgTargets[d]){m=Ext.get(d);if(m){m.dom.innerHTML=b}}}if(h){h.setVisible(j.length>0);if(c&&g.autoFitErrors){g.labelEl.addCls(g.topLabelSideErrorCls)}g.updateLayout()}},unsetActiveError:function(){var f=this,b=f.errorWrapEl,c=f.msgTarget,a=f.restoreDisplay,d,g;if(f.hasActiveError()){delete f.activeError;delete f.activeErrors;f.renderActiveError();if(f.rendered){d=f.getActionEl();if(c==="qtip"){d.dom.removeAttribute("data-errorqtip")}else{if(c==="title"){d.dom.removeAttribute("title")}}if(c!=="title"){f.ariaErrorEl.dom.innerHTML="";d.dom.removeAttribute("aria-describedby")}if(!f.msgTargets[c]){g=Ext.get(c);if(g){g.dom.innerHTML=""}}if(b){b.hide();if(c==="side"&&f.autoFitErrors){f.labelEl.removeCls(f.topLabelSideErrorCls)}f.updateLayout();if(a){f.el.dom.style.display="block";f.restoreDisplay()}}}}},doRestoreDisplay:function(){var a=this.el;if(a&&a.dom){a.dom.style.display=""}},renderActiveError:function(){var c=this,b=c.getActiveError(),a=!!b;if(b!==c.lastActiveError){c.lastActiveError=b;c.fireEvent("errorchange",c,b)}if(c.rendered&&!c.destroyed&&!c.preventMark){c.toggleInvalidCls(a);if(c.errorEl){c.errorEl.dom.innerHTML=b}}},toggleInvalidCls:function(a){this.el[a?"addCls":"removeCls"](this.invalidCls)},setFieldDefaults:function(b){var a;for(a in b){if(!this.hasOwnProperty(a)){this[a]=b[a]}}}},0,0,0,0,0,0,[Ext.form,"Labelable"],function(){if(Ext.supports.Touch){this.prototype.msgTarget="side"}}));(Ext.cmd.derive("Ext.form.field.Field",Ext.Base,{mixinId:"field",isFormField:true,config:{validation:null,validationField:null},disabled:false,submitValue:true,validateOnChange:true,valuePublishEvent:"change",suspendCheckChange:0,dirty:false,initField:function(){var d=this,c=d.valuePublishEvent,a,b;d.initValue();if(Ext.isString(c)){d.on(c,d.publishValue,d)}else{for(b=0,a=c.length;b<a;++b){d.on(c[b],d.publishValue,d)}}},initValue:function(){var a=this;if("value" in a){a.suspendCheckChange++;a.setValue(a.value);a.suspendCheckChange--}a.initialValue=a.originalValue=a.lastValue=a.getValue()},getFieldIdentifier:function(){return this.isEditorComponent?this.dataIndex:this.name},getName:function(){return this.name},getValue:function(){return this.value},setValue:function(b){var a=this;a.value=b;a.checkChange();return a},isEqual:function(b,a){return String(b)===String(a)},isEqualAsString:function(b,a){return String(Ext.valueFrom(b,""))===String(Ext.valueFrom(a,""))},getSubmitData:function(){var a=this,b=null;if(!a.disabled&&a.submitValue){b={};b[a.getName()]=""+a.getValue()}return b},getModelData:function(a,b){var c=this,d=null;if(!c.disabled&&(c.submitValue||!b)){d={};d[c.getFieldIdentifier()]=c.getValue()}return d},reset:function(){var a=this;a.beforeReset();a.setValue(a.originalValue);a.clearInvalid();delete a.wasValid},beforeReset:Ext.emptyFn,resetOriginalValue:function(){this.originalValue=this.getValue();this.checkDirty()},checkChange:function(){var c=this,b,a;if(!c.suspendCheckChange){b=c.getValue();a=c.lastValue;if(!c.destroyed&&c.didValueChange(b,a)){c.lastValue=b;c.fireEvent("change",c,b,a);c.onChange(b,a)}}},didValueChange:function(b,a){return !this.isEqual(b,a)},onChange:function(a){var b=this;if(b.validateOnChange){b.validate()}b.checkDirty()},publishValue:function(){var a=this;if(a.rendered&&!a.getErrors().length){a.publishState("value",a.getValue())}},isDirty:function(){var a=this;return !a.disabled&&!a.isEqual(a.getValue(),a.originalValue)},checkDirty:function(){var a=this,b=a.isDirty();if(b!==a.wasDirty){a.dirty=b;a.fireEvent("dirtychange",a,b);a.onDirtyChange(b);a.wasDirty=b}},onDirtyChange:Ext.emptyFn,getErrors:function(d){var f=[],c=this.getValidationField(),b=this.getValidation(),a;if(c){a=c.validate(d);if(a!==true){f.push(a)}}if(b&&b!==true){f.push(b)}return f},isValid:function(){var a=this;return a.disabled||Ext.isEmpty(a.getErrors())},validate:function(){return this.checkValidityChange(this.isValid())},checkValidityChange:function(b){var a=this;if(b!==a.wasValid){a.wasValid=b;a.fireEvent("validitychange",a,b)}return b},batchChanges:function(a){try{this.suspendCheckChange++;a()}catch(b){throw b}finally{this.suspendCheckChange--}this.checkChange()},isFileUpload:function(){return false},extractFileInput:function(){return null},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,updateValidation:function(a,b){if(b){this.validate()}},privates:{resetToInitialValue:function(){var b=this,a=b.originalValue;b.originalValue=b.initialValue;b.reset();b.originalValue=a}}},0,0,0,0,0,0,[Ext.form.field,"Field"],0));(Ext.cmd.derive("Ext.form.field.Base",Ext.Component,{alternateClassName:["Ext.form.Field","Ext.form.BaseField"],focusable:true,shrinkWrap:true,fieldSubTpl:['<input id="{id}" data-ref="inputEl" type="{type}" {inputAttrTpl}',' size="1"','<tpl if="name"> name="{name}"</tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','{%if (values.maxLength !== undefined){%} maxlength="{maxLength}"{%}%}','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {editableCls} {inputCls}" autocomplete="off"/>',{disableFormats:true}],defaultBindProperty:"value",autoEl:{role:"presentation"},subTplInsertions:["inputAttrTpl"],childEls:["inputEl"],inputType:"text",isTextInput:true,invalidText:"The value in this field is invalid",fieldCls:"x-form-field",focusCls:"form-focus",dirtyCls:"x-form-dirty",checkChangeEvents:Ext.isIE&&(!document.documentMode||document.documentMode<=9)?["change","propertychange","keyup"]:["change","input","textInput","keyup","dragdrop"],ignoreChangeRe:/data\-errorqtip|style\.|className/,checkChangeBuffer:50,liquidLayout:true,readOnly:false,readOnlyCls:"x-form-readonly",validateOnBlur:true,hasFocus:false,baseCls:"x-field",fieldBodyCls:"x-field-body",maskOnDisable:false,stretchInputElFixed:true,ariaEl:"inputEl",initComponent:function(){var a=this;Ext.Component.prototype.initComponent.call(this);a.subTplData=a.subTplData||{};a.initLabelable();a.initField();a.initDefaultName();if(a.readOnly){a.addCls(a.readOnlyCls)}a.addCls("x-form-type-"+a.inputType)},initDefaultName:function(){var a=this;if(!a.name){a.name=a.getInputId()}},getInputId:function(){return this.inputId||(this.inputId=this.id+"-inputEl")},getSubTplData:function(c){var f=this,d=f.inputType,a=f.getInputId(),g,b;g=Ext.apply({ui:f.ui,id:a,cmpId:f.id,name:f.name||a,disabled:f.disabled,readOnly:f.readOnly,value:f.getRawValue(),type:d,fieldCls:f.fieldCls,fieldStyle:f.getFieldStyle(),childElCls:c.childElCls,tabIdx:f.tabIndex,inputCls:f.inputCls,typeCls:"x-form-"+(f.isTextInput?"text":d)},f.subTplData);if(f.ariaRole){b={role:f.ariaRole,"aria-hidden":!!f.hidden,"aria-disabled":!!f.disabled,"aria-readonly":!!f.readOnly,"aria-invalid":false};if(f.ariaLabel){b["aria-label"]=f.ariaLabel}if(f.format&&f.formatText&&!g.title){b.title=Ext.String.formatEncode(f.formatText,f.format)}g.inputElAriaAttributes=Ext.apply(b,f.getAriaAttributes())}f.getInsertionRenderData(g,f.subTplInsertions);return g},getSubTplMarkup:function(b){var c=this,d=c.getSubTplData(b),f=c.getTpl("preSubTpl"),g=c.getTpl("postSubTpl"),a="";if(f){a+=f.apply(d)}a+=c.getTpl("fieldSubTpl").apply(d);if(g){a+=g.apply(d)}return a},initRenderData:function(){return Ext.applyIf(Ext.Component.prototype.initRenderData.call(this),this.getLabelableRenderData())},setFieldStyle:function(a){var b=this,c=b.inputEl;if(c){c.applyStyles(a)}b.fieldStyle=a},getFieldStyle:function(){var a=this.fieldStyle;return Ext.isObject(a)?Ext.DomHelper.generateStyles(a,null,true):a||""},onRender:function(){this.callParent(arguments);this.mixins.labelable.self.initTip();this.renderActiveError()},onFocusLeave:function(a){Ext.Component.prototype.onFocusLeave.call(this,a);this.completeEdit()},completeEdit:Ext.emptyFn,isFileUpload:function(){return this.inputType==="file"},getSubmitData:function(){var a=this,b=null,c;if(!a.disabled&&a.submitValue){c=a.getSubmitValue();if(c!==null){b={};b[a.getName()]=c}}return b},getSubmitValue:function(){return this.processRawValue(this.getRawValue())},getRawValue:function(){var b=this,a=(b.inputEl?b.inputEl.getValue():Ext.valueFrom(b.rawValue,""));b.rawValue=a;return a},setRawValue:function(c){var a=this,b=a.rawValue;if(!a.transformRawValue.$nullFn){c=a.transformRawValue(c)}c=Ext.valueFrom(c,"");if(b===undefined||b!==c||a.valueContainsPlaceholder){a.rawValue=c;if(a.inputEl){a.bindChangeEvents(false);a.inputEl.dom.value=c;a.bindChangeEvents(true)}if(a.rendered&&a.reference){a.publishState("rawValue",c)}}return c},transformRawValue:Ext.identityFn,valueToRaw:function(a){return""+Ext.valueFrom(a,"")},rawToValue:Ext.identityFn,processRawValue:Ext.identityFn,getValue:function(){var a=this,b=a.rawToValue(a.processRawValue(a.getRawValue()));a.value=b;return b},setValue:function(b){var a=this;a.setRawValue(a.valueToRaw(b));return a.mixins.field.setValue.call(a,b)},onBoxReady:function(){var a=this;Ext.Component.prototype.onBoxReady.apply(this,arguments);if(a.setReadOnlyOnBoxReady){a.setReadOnly(a.readOnly)}},onDisable:function(){var a=this,b=a.inputEl;Ext.Component.prototype.onDisable.call(this);if(b){b.dom.disabled=true;if(a.hasActiveError()){a.clearInvalid();a.hadErrorOnDisable=true}}if(a.wasValid===false){a.checkValidityChange(true)}},onEnable:function(){var b=this,c=b.inputEl,d=b.preventMark,a;Ext.Component.prototype.onEnable.call(this);if(c){c.dom.disabled=false}if(b.wasValid!==undefined){b.forceValidation=true;b.preventMark=!b.hadErrorOnDisable;a=b.isValid();b.forceValidation=false;b.preventMark=d;b.checkValidityChange(a)}delete b.hadErrorOnDisable},setReadOnly:function(d){var b=this,c=b.inputEl,a=b.readOnly;d=!!d;b[d?"addCls":"removeCls"](b.readOnlyCls);b.readOnly=d;if(c){c.dom.readOnly=d;b.ariaEl.dom.setAttribute("aria-readonly",d)}else{if(b.rendering){b.setReadOnlyOnBoxReady=true}}if(d!==a){b.fireEvent("writeablechange",b,d)}},fireKey:function(a){if(a.isSpecialKey()){this.fireEvent("specialkey",this,a)}},initEvents:function(){var f=this,h=f.inputEl,g=f.onFieldMutation,c=f.checkChangeEvents,a=c.length,b,d;if(h){f.mon(h,Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress",f.fireKey,f);for(b=0;b<a;++b){d=c[b];if(d==="propertychange"){f.usesPropertychange=true}if(d==="textInput"){f.usesTextInput=true}f.mon(h,d,g,f)}}Ext.Component.prototype.initEvents.call(this)},onFieldMutation:function(a){if(!this.readOnly&&!(a.type==="propertychange"&&this.ignoreChangeRe.test(a.browserEvent.propertyName))){this.startCheckChangeTask()}},startCheckChangeTask:function(){var b=this,a=b.checkChangeTask;if(!a){b.checkChangeTask=a=new Ext.util.DelayedTask(b.doCheckChangeTask,b)}if(!b.bindNotifyListener){b.bindNotifyListener=Ext.on("beforebindnotify",b.onBeforeNotify,b,{destroyable:true})}a.delay(b.checkChangeBuffer)},doCheckChangeTask:function(){var a=this.bindNotifyListener;if(a){a.destroy();this.bindNotifyListener=null}this.checkChange()},publishValue:function(){var a=this;if(a.rendered&&!a.getErrors().length){a.publishState("value",a.getValue())}},onDirtyChange:function(b){var a=this;a[b?"addCls":"removeCls"](a.dirtyCls);if(a.rendered&&a.reference){a.publishState("dirty",b)}},isValid:function(){var b=this,a=b.disabled,c=b.forceValidation||!a;return c?b.validateValue(b.processRawValue(b.getRawValue())):a},validateValue:function(b){var a=this,d=a.getErrors(b),c=Ext.isEmpty(d);if(!a.preventMark){if(c){a.clearInvalid()}else{a.markInvalid(d)}}return c},markInvalid:function(f){var c=this,a=c.ariaEl.dom,b=c.getActiveError(),d;c.setActiveErrors(Ext.Array.from(f));d=c.getActiveError();if(b!==d){c.setError(d);if(!c.ariaStaticRoles[c.ariaRole]&&a){a.setAttribute("aria-invalid",true)}}},clearInvalid:function(){var c=this,a=c.ariaEl.dom,b=c.hasActiveError();delete c.hadErrorOnDisable;c.unsetActiveError();if(b){c.setError("");if(!c.ariaStaticRoles[c.ariaRole]&&a){a.setAttribute("aria-invalid",false)}}},setError:function(a){var c=this,b=c.msgTarget,d;if(c.rendered){if(b==="title"||b==="qtip"){d=b==="qtip"?"data-errorqtip":"title";c.getActionEl().dom.setAttribute(d,a||"")}else{c.updateLayout()}}},renderActiveError:function(){var c=this,b=c.hasActiveError(),a=c.invalidCls+"-field";if(c.inputEl){c.inputEl[b?"addCls":"removeCls"]([a,a+"-"+c.ui])}c.mixins.labelable.renderActiveError.call(c)},beforeDestroy:function(){var b=this,a=b.checkChangeTask;if(a){a.cancel()}b.checkChangeTask=b.bindNotifyListener=Ext.destroy(b.bindNotifyListener);Ext.Component.prototype.beforeDestroy.call(this)},privates:{applyBind:function(g,c){var b=this,a=c&&c.value,f,d;f=Ext.Component.prototype.applyBind.call(this,g,c);if(f){d=f.value;b.hasBindingValue=!!d;if(d!==a&&b.getInherited().modelValidation){b.updateValueBinding(f)}}return f},applyRenderSelectors:function(){var a=this;Ext.Component.prototype.applyRenderSelectors.call(this);if(!a.inputEl){a.inputEl=a.el.getById(a.getInputId())}},bindChangeEvents:function(b){var c=b?"resumeEvent":"suspendEvent",a=this.inputEl;if(this.usesPropertychange){a[c]("propertychange")}if(this.usesTextInput){a[c]("textInput")}},getActionEl:function(){return this.inputEl||this.el},getFocusEl:function(){return this.inputEl},initRenderTpl:function(){var a=this;if(!a.hasOwnProperty("renderTpl")){a.renderTpl=a.getTpl("labelableRenderTpl")}return Ext.Component.prototype.initRenderTpl.call(this)},onBeforeNotify:function(){this.checkChangeTask.cancel();this.checkChange()},updateValueBinding:function(d){var c=this,b=d.value,a=d.$fieldBinding;if(a){a.destroy();d.$fieldBinding=null}if(b&&b.bindValidationField){c.fieldBinding=b.bindValidationField("setValidationField",c)}}},deprecated:{"5":{methods:{doComponentLayout:function(){this.bindChangeEvents(false);this.callParent(arguments);this.bindChangeEvents(true)}}}}},0,["field"],["component","box","field"],{component:true,box:true,field:true},["widget.field"],[[Ext.form.Labelable.prototype.mixinId||Ext.form.Labelable.$className,Ext.form.Labelable],[Ext.form.field.Field.prototype.mixinId||Ext.form.field.Field.$className,Ext.form.field.Field]],[Ext.form.field,"Base",Ext.form,"Field",Ext.form,"BaseField"],0));(Ext.cmd.derive("Ext.form.field.VTypes",Ext.Base,(function(){var c=/^[a-zA-Z_]+$/,d=/^[a-zA-Z0-9_]+$/,b=/^(")?(?:[^\."\s])(?:(?:[\.])?(?:[\w\-!#$%&'*+/=?^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,a=/(((^https?)|(^ftp)):\/\/((([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*)|(localhost|LOCALHOST))\/?)/i;return{singleton:true,alternateClassName:"Ext.form.VTypes",email:function(f){return b.test(f)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[\w.\-@'"!#$%&'*+/=?^_`{|}~]/i,url:function(f){return a.test(f)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(f){return c.test(f)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(f){return d.test(f)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}()),0,0,0,0,0,0,[Ext.form.field,"VTypes",Ext.form,"VTypes"],0));(Ext.cmd.derive("Ext.form.trigger.Trigger",Ext.Base,{factoryConfig:{defaultType:"trigger"},repeatClick:false,hidden:false,hideOnReadOnly:undefined,weight:0,preventMouseDown:true,baseCls:"x-form-trigger",focusCls:"x-form-trigger-focus",overCls:"x-form-trigger-over",clickCls:"x-form-trigger-click",validIdRe:Ext.validIdRe,renderTpl:['<div id="{triggerId}" class="{baseCls} {baseCls}-{ui} {cls} {cls}-{ui} {extraCls} ','{childElCls}"<tpl if="triggerStyle"> style="{triggerStyle}"</tpl>>',"{[values.$trigger.renderBody(values)]}","</div>"],statics:{weightComparator:function(a,b){return a.weight-b.weight}},constructor:function(b){var c=this,a;Ext.apply(c,b);if(c.compat4Mode){a=c.cls;c.focusCls=[c.focusCls,a+"-focus"];c.overCls=[c.overCls,a+"-over"];c.clickCls=[c.clickCls,a+"-click"]}},afterFieldRender:function(){this.initEvents()},destroy:function(){var a=this;a.clickRepeater=a.el=Ext.destroy(a.clickRepeater,a.el);a.callParent()},getBodyRenderData:Ext.emptyFn,getEl:function(){return this.el||null},getStateEl:function(){return this.el},hide:function(){var b=this,a=b.el;b.hidden=true;if(a){a.hide()}},initEvents:function(){var d=this,a=d.isFieldEnabled,c=d.getStateEl(),b=d.el;c.addClsOnOver(d.overCls,a,d);c.addClsOnClick(d.clickCls,a,d);if(d.repeatClick){d.clickRepeater=new Ext.util.ClickRepeater(b,{preventDefault:true,handler:d.onClick,listeners:{mousedown:d.onClickRepeaterMouseDown,scope:d},scope:d})}else{d.field.mon(b,{click:d.onClick,mousedown:d.onMouseDown,scope:d})}},isFieldEnabled:function(){return !this.field.disabled},isVisible:function(){var a=this,c=a.field,b=false;if(a.hidden||!c||!a.rendered||a.destroyed){b=true}return !b},onClick:function(){var c=this,a=arguments,f=c.clickRepeater?a[1]:a[0],b=c.handler,d=c.field;if(b&&!d.readOnly&&c.isFieldEnabled()){Ext.callback(c.handler,c.scope,[d,c,f],0,d)}},resolveListenerScope:function(a){return this.field.resolveSatelliteListenerScope(this,a)},onMouseDown:function(a){if(a.pointerType!=="touch"&&!this.field.owns(Ext.Element.getActiveElement())){this.field.inputEl.focus()}if(this.preventMouseDown){a.preventDefault()}},onClickRepeaterMouseDown:function(b,a){if(!a.parentEvent||a.parentEvent.type==="mousedown"){this.field.inputEl.focus()}a.preventDefault()},onFieldBlur:function(){this.getStateEl().removeCls(this.focusCls)},onFieldFocus:function(){this.getStateEl().addCls(this.focusCls)},onFieldRender:function(){var b=this,a=b.el=b.field.triggerWrap.selectNode("#"+b.domId,false);a.setVisibilityMode(Ext.Element.DISPLAY);b.rendered=true},renderBody:function(b){var a=this,c=a.bodyTpl;Ext.apply(b,a.getBodyRenderData());return c?Ext.XTemplate.getTpl(a,"bodyTpl").apply(b):""},renderTrigger:function(a){var c=this,b=c.width,d=c.hidden?"display:none;":"";if(b){d+="width:"+b}return Ext.XTemplate.getTpl(c,"renderTpl").apply({$trigger:c,fieldData:a,ui:a.ui,childElCls:a.childElCls,triggerId:c.domId=c.field.id+"-trigger-"+c.id,cls:c.cls,triggerStyle:d,extraCls:c.extraCls,baseCls:c.baseCls})},setHidden:function(a){if(a!==this.hidden){this[a?"hide":"show"]()}},setVisible:function(a){this.setHidden(!a)},show:function(){var b=this,a=b.el;b.hidden=false;if(a){a.show()}}},1,0,0,0,["trigger.trigger"],[[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.form.trigger,"Trigger"],0));(Ext.cmd.derive("Ext.form.field.Text",Ext.form.field.Base,{alternateClassName:["Ext.form.TextField","Ext.form.Text"],config:{hideTrigger:false,triggers:undefined},renderConfig:{editable:true},growMin:30,growMax:800,growAppend:"W",allowBlank:true,validateBlank:false,allowOnlyWhitespace:true,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",blankText:"This field is required",regexText:"",emptyText:"",emptyCls:"x-form-empty-field",requiredCls:"x-form-required-field",valueContainsPlaceholder:false,ariaRole:"textbox",repeatTriggerClick:false,triggerWrapCls:"x-form-trigger-wrap",triggerWrapFocusCls:"x-form-trigger-wrap-focus",triggerWrapInvalidCls:"x-form-trigger-wrap-invalid",fieldBodyCls:"x-form-text-field-body",inputWrapCls:"x-form-text-wrap",inputWrapFocusCls:"x-form-text-wrap-focus",inputWrapInvalidCls:"x-form-text-wrap-invalid",growCls:"x-form-text-grow",needArrowKeys:true,squashMouseUp:{mouseup:function(){},translate:false,single:true,preventDefault:true},childEls:["triggerWrap","inputWrap"],preSubTpl:['<div id="{cmpId}-triggerWrap" data-ref="triggerWrap"',' role="presentation" class="{triggerWrapCls} {triggerWrapCls}-{ui}">','<div id={cmpId}-inputWrap data-ref="inputWrap"',' role="presentation" class="{inputWrapCls} {inputWrapCls}-{ui}">'],postSubTpl:["</div>",'<tpl for="triggers">{[values.renderTrigger(parent)]}</tpl>',"</div>"],initComponent:function(){var b=this,a=b.emptyCls;if(b.allowOnlyWhitespace===false){b.allowBlank=false}if(b.size){b.defaultBodyWidth=b.size*6.5+20}if(!b.onTrigger1Click){b.onTrigger1Click=b.onTriggerClick}Ext.form.field.Base.prototype.initComponent.call(this);if(b.readOnly){b.setReadOnly(b.readOnly)}b.fieldFocusCls=b.baseCls+"-focus";b.emptyUICls=a+" "+a+"-"+b.ui;b.addStateEvents("change")},initEvents:function(){var b=this,a=b.inputEl;Ext.form.field.Base.prototype.initEvents.call(this);if(b.selectOnFocus||b.emptyText){b.mon(a,"mousedown",b.onMouseDown,b)}if(b.maskRe||(b.vtype&&b.disableKeyFilter!==true&&(b.maskRe=Ext.form.field.VTypes[b.vtype+"Mask"]))){b.mon(a,"keypress",b.filterKeys,b)}if(b.enableKeyEvents){b.mon(a,{scope:b,keyup:b.onKeyUp,keydown:b.onKeyDown,keypress:b.onKeyPress})}},isEqual:function(b,a){return this.isEqualAsString(b,a)},onChange:function(b,a){Ext.form.field.Base.prototype.onChange.apply(this,arguments);this.autoSize()},getSubTplData:function(c){var d=this,g=d.getRawValue(),j=d.emptyText&&g.length<1,a=d.maxLength,h,f,b;if(d.enforceMaxLength){if(a===Number.MAX_VALUE){a=undefined}}else{a=undefined}if(j){if(Ext.supports.Placeholder){h=d.emptyText}else{g=d.emptyText;d.valueContainsPlaceholder=true}}f=Ext.apply(Ext.form.field.Base.prototype.getSubTplData.call(this,c),{triggerWrapCls:d.triggerWrapCls,inputWrapCls:d.inputWrapCls,triggers:d.orderedTriggers,maxLength:a,readOnly:!d.editable||d.readOnly,placeholder:h,value:g,fieldCls:d.fieldCls+((j&&(h||g))?" "+d.emptyUICls:"")+(d.allowBlank?"":" "+d.requiredCls)});b=f.inputElAriaAttributes;if(b){b["aria-required"]=!d.allowBlank}return f},onRender:function(){var c=this,b=c.getTriggers(),d=[],f,a;if(Ext.supports.FixedTableWidthBug){c.el._needsTableWidthFix=true}(arguments.callee.$previous||Ext.form.field.Base.prototype.onRender).call(this);if(b){this.invokeTriggers("onFieldRender");for(f in b){d.push(b[f].el)}a=c.triggerEl=c.triggerCell=new Ext.CompositeElement(d,true)}c.inputCell=c.inputWrap},afterRender:function(){var a=this;a.autoSize();Ext.form.field.Base.prototype.afterRender.call(this);a.invokeTriggers("afterFieldRender")},onMouseDown:function(){if(!this.hasFocus){Ext.getDoc().on(this.squashMouseUp)}},applyTriggers:function(h){var j=this,c=j.getHideTrigger(),o=j.readOnly,p=j.orderedTriggers=[],m=j.repeatTriggerClick,b,g,d,a,f;if(!h){h={};if(j.triggerCls&&!j.trigger1Cls){j.trigger1Cls=j.triggerCls}for(f=1;a=j["trigger"+f+"Cls"];f++){h["trigger"+f]={cls:a,extraCls:"x-trigger-index-"+f,handler:"onTrigger"+f+"Click",compat4Mode:true,scope:j}}}for(b in h){if(h.hasOwnProperty(b)){g=h[b];g.field=j;g.id=b;if((o&&g.hideOnReadOnly!==false)||(c&&g.hidden!==false)){g.hidden=true}if(m&&(g.repeatClick!==false)){g.repeatClick=true}d=h[b]=Ext.form.trigger.Trigger.create(g);p.push(d)}}Ext.Array.sort(p,Ext.form.trigger.Trigger.weightComparator);return h},invokeTriggers:function(a,c){var f=this,d=f.getTriggers(),g,b;if(d){for(g in d){if(d.hasOwnProperty(g)){b=d[g];b[a].apply(b,c||[])}}}},getTrigger:function(a){return this.getTriggers()[a]},updateHideTrigger:function(a){this.invokeTriggers(a?"hide":"show")},updateEditable:function(a,b){this.setReadOnlyAttr(!a||this.readOnly)},setReadOnly:function(g){var d=this,c=d.getTriggers(),b=d.getHideTrigger(),a,f;g=!!g;Ext.form.field.Base.prototype.setReadOnly.call(this,g);if(d.rendered){d.setReadOnlyAttr(g||!d.editable)}if(c){for(f in c){a=c[f];if(a.hideOnReadOnly===true||(a.hideOnReadOnly!==false&&!b)){a.setVisible(!g)}}}},setReadOnlyAttr:function(d){var b=this,a="readonly",c=b.inputEl.dom;if(d){c.setAttribute(a,a)}else{c.removeAttribute(a)}if(b.ariaRole){b.ariaEl.dom.setAttribute("aria-readonly",!!d)}},processRawValue:function(c){var b=this,f=b.stripCharsRe,a,d;if(f){if(!f.global){a="g";a+=(f.ignoreCase)?"i":"";a+=(f.multiline)?"m":"";f=new RegExp(f.source,a)}d=c.replace(f,"");if(d!==c){b.setRawValue(d);c=d}}return c},onDisable:function(){Ext.form.field.Base.prototype.onDisable.call(this);if(Ext.isIE){this.inputEl.dom.unselectable="on"}},onEnable:function(){Ext.form.field.Base.prototype.onEnable.call(this);if(Ext.isIE){this.inputEl.dom.unselectable=""}},onKeyDown:function(a){this.fireEvent("keydown",this,a)},onKeyUp:function(a){this.fireEvent("keyup",this,a)},onKeyPress:function(a){this.fireEvent("keypress",this,a)},reset:function(){Ext.form.field.Base.prototype.reset.call(this);this.applyEmptyText()},applyEmptyText:function(){var b=this,a=b.emptyText,c;if(b.rendered&&a){c=b.getRawValue().length<1&&!b.hasFocus;if(Ext.supports.Placeholder){b.inputEl.dom.placeholder=a}else{if(c){b.setRawValue(a);b.valueContainsPlaceholder=true}}if(c){b.inputEl.addCls(b.emptyUICls)}else{b.inputEl.removeCls(b.emptyUICls)}b.autoSize()}},getEmptyText:function(){return this.emptyText},setEmptyText:function(d){var c=this,f=c.inputEl,b=f&&f.dom,a=d||"";if(d){c.emptyText=a;c.applyEmptyText()}else{if(b){if(Ext.supports.Placeholder){b.removeAttribute("placeholder")}else{if(b.value!==c.getRawValue()){b.value="";f.removeCls(c.emptyUICls)}}c.valueContainsPlaceholder=false}}c.emptyText=a;return c},afterFirstLayout:function(){Ext.form.field.Base.prototype.afterFirstLayout.call(this);if(Ext.isIE&&this.disabled){var a=this.inputEl;if(a){a.dom.unselectable="on"}}},toggleInvalidCls:function(a){var b=a?"addCls":"removeCls";Ext.form.field.Base.prototype.toggleInvalidCls.call(this);this.triggerWrap[b](this.triggerWrapInvalidCls);this.inputWrap[b](this.inputWrapInvalidCls)},beforeFocus:function(){var b=this,c=b.inputEl,a=b.emptyText,d;Ext.form.field.Base.prototype.beforeFocus.apply(this,arguments);if((a&&!Ext.supports.Placeholder)&&(c.dom.value===b.emptyText&&b.valueContainsPlaceholder)){b.setRawValue("");d=true;c.removeCls(b.emptyUICls);b.valueContainsPlaceholder=false}else{if(Ext.supports.Placeholder){c.removeCls(b.emptyUICls)}}},onFocus:function(b){var a=this;Ext.form.field.Base.prototype.onFocus.apply(this,arguments);if(a.selectOnFocus){a.inputEl.dom.select()}if(a.emptyText){a.autoSize()}a.addCls(a.fieldFocusCls);a.triggerWrap.addCls(a.triggerWrapFocusCls);a.inputWrap.addCls(a.inputWrapFocusCls);a.invokeTriggers("onFieldFocus",[b])},onBlur:function(b){var a=this;Ext.form.field.Base.prototype.onBlur.apply(this,arguments);a.removeCls(a.fieldFocusCls);a.triggerWrap.removeCls(a.triggerWrapFocusCls);a.inputWrap.removeCls(a.inputWrapFocusCls);a.invokeTriggers("onFieldBlur",[b])},completeEdit:function(a){Ext.form.field.Base.prototype.completeEdit.call(this,a);this.applyEmptyText()},filterKeys:function(b){if((b.ctrlKey&&!b.altKey)||b.isSpecialKey()){return}var a=String.fromCharCode(b.getCharCode());if(!this.maskRe.test(a)){b.stopEvent()}},getState:function(){return this.addPropertyToState(Ext.form.field.Base.prototype.getState.call(this),"value")},applyState:function(a){Ext.form.field.Base.prototype.applyState.apply(this,arguments);if(a.hasOwnProperty("value")){this.setValue(a.value)}},getRawValue:function(){var b=this,a=Ext.form.field.Base.prototype.getRawValue.call(this);if(a===b.emptyText&&b.valueContainsPlaceholder){a=""}return a},setValue:function(b){var a=this,c=a.inputEl;if(c&&a.emptyText&&!Ext.isEmpty(b)){c.removeCls(a.emptyUICls);a.valueContainsPlaceholder=false}Ext.form.field.Base.prototype.setValue.apply(this,arguments);a.applyEmptyText();return a},getErrors:function(p){p=arguments.length?(p==null?"":p):this.processRawValue(this.getRawValue());var g=this,m=Ext.form.field.Base.prototype.getErrors.call(this,p),a=g.validator,d=g.vtype,h=Ext.form.field.VTypes,j=g.regex,o=Ext.String.format,b,f,c;if(Ext.isFunction(a)){b=a.call(g,p);if(b!==true){m.push(b)}}f=g.allowOnlyWhitespace?p:Ext.String.trim(p);if(f.length<1||(p===g.emptyText&&g.valueContainsPlaceholder)){if(!g.allowBlank){m.push(g.blankText)}if(!g.validateBlank){return m}c=true}if(!c&&p.length<g.minLength){m.push(o(g.minLengthText,g.minLength))}if(p.length>g.maxLength){m.push(o(g.maxLengthText,g.maxLength))}if(d){if(!h[d](p,g)){m.push(g.vtypeText||h[d+"Text"])}}if(j&&!j.test(p)){m.push(g.regexText||g.invalidText)}return m},selectText:function(h,b){var g=this,d=g.getRawValue(),a=d.length,f=g.inputEl.dom,c;if(a>0){h=h===undefined?0:Math.min(h,a);b=b===undefined?a:Math.min(b,a);if(f.setSelectionRange){f.setSelectionRange(h,b)}else{if(f.createTextRange){c=f.createTextRange();c.moveStart("character",h);c.moveEnd("character",b-a);c.select()}}}},getGrowWidth:function(){return this.inputEl.dom.value},autoSize:function(){var c=this,b,h,f,g,a,d;if(c.grow&&c.rendered&&c.getSizeModel().width.auto){g=c.inputEl;b=c.getTriggers();f=0;d=Ext.util.Format.htmlEncode(c.getGrowWidth()||(c.hasFocus?"":c.emptyText)||"");d+=c.growAppend;for(h in b){f+=b[h].el.getWidth()}a=g.getTextWidth(d)+f+c.inputWrap.getBorderWidth("lr")+c.triggerWrap.getBorderWidth("lr");a=Math.min(Math.max(a,c.growMin),c.growMax);c.bodyEl.setWidth(a);c.updateLayout();c.fireEvent("autosize",c,a)}},onDestroy:function(){var a=this;a.invokeTriggers("destroy");Ext.destroy(a.triggerRepeater);Ext.form.field.Base.prototype.onDestroy.call(this)},onTriggerClick:Ext.emptyFn,privates:{getTdType:function(){return"textfield"}},deprecated:{5:{methods:{getTriggerWidth:function(){var b=this.getTriggers(),a=0,c;if(b&&this.rendered){for(c in b){if(b.hasOwnProperty(c)){a+=b[c].el.getWidth()}}}return a}}}}},0,["textfield"],["component","box","field","textfield"],{component:true,box:true,field:true,textfield:true},["widget.textfield"],0,[Ext.form.field,"Text",Ext.form,"TextField",Ext.form,"Text"],0));(Ext.cmd.derive("Ext.form.field.TextArea",Ext.form.field.Text,{alternateClassName:"Ext.form.TextArea",fieldSubTpl:['<textarea id="{id}" data-ref="inputEl" {inputAttrTpl}','<tpl if="name"> name="{name}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','<tpl if="maxLength !== undefined"> maxlength="{maxLength}"</tpl>','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>',' class="{fieldCls} {typeCls} {typeCls}-{ui} {inputCls}" ','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',' autocomplete="off">\n','<tpl if="value">{[Ext.util.Format.htmlEncode(values.value)]}</tpl>',"</textarea>",{disableFormats:true}],growMin:60,growMax:1000,growAppend:"\n-",enterIsSpecial:false,preventScrollbars:false,returnRe:/\r/g,inputCls:"x-form-textarea",extraFieldBodyCls:"x-form-textarea-body",ariaAttributes:{"aria-multiline":true},getSubTplData:function(b){var d=this,c=d.getFieldStyle(),a=Ext.form.field.Text.prototype.getSubTplData.apply(this,arguments);if(d.grow){if(d.preventScrollbars){a.fieldStyle=(c||"")+";overflow:hidden;height:"+d.growMin+"px"}}return a},afterRender:function(){var a=this;Ext.form.field.Text.prototype.afterRender.apply(this,arguments);a.needsMaxCheck=a.enforceMaxLength&&a.maxLength!==Number.MAX_VALUE&&!Ext.supports.TextAreaMaxLength;if(a.needsMaxCheck){a.inputEl.on("paste",a.onPaste,a)}},transformRawValue:function(a){return this.stripReturns(a)},getValue:function(){return this.stripReturns(Ext.form.field.Text.prototype.getValue.call(this))},valueToRaw:function(a){a=this.stripReturns(a);return Ext.form.field.Text.prototype.valueToRaw.call(this,a)},stripReturns:function(a){if(a&&typeof a==="string"){a=a.replace(this.returnRe,"")}return a},onPaste:function(){var a=this;if(!a.pasteTask){a.pasteTask=new Ext.util.DelayedTask(a.pasteCheck,a)}a.pasteTask.delay(1)},pasteCheck:function(){var b=this,c=b.getValue(),a=b.maxLength;if(c.length>a){c=c.substr(0,a);b.setValue(c)}},fireKey:function(d){var b=this,a=d.getKey(),c;if(d.isSpecialKey()&&(b.enterIsSpecial||(a!==d.ENTER||d.hasModifier()))){b.fireEvent("specialkey",b,d)}if(b.needsMaxCheck&&a!==d.BACKSPACE&&a!==d.DELETE&&!d.isNavKeyPress()&&!b.isCutCopyPasteSelectAll(d,a)){c=b.getValue();if(c.length>=b.maxLength){d.stopEvent()}}},isCutCopyPasteSelectAll:function(b,a){if(b.ctrlKey){return a===b.A||a===b.C||a===b.V||a===b.X}return false},autoSize:function(){var c=this,f,a,b,d;if(c.grow&&c.rendered&&c.getSizeModel().height.auto){f=c.inputEl;b=f.getWidth(true);d=Ext.util.Format.htmlEncode(f.dom.value)||"&#160;";d+=c.growAppend;d=d.replace(/\n/g,"<br/>");a=Ext.util.TextMetrics.measure(f,d,b).height+f.getPadding("tb")+c.inputWrap.getBorderWidth("tb")+c.triggerWrap.getBorderWidth("tb");a=Math.min(Math.max(a,c.growMin),c.growMax);c.bodyEl.setHeight(a);c.updateLayout();c.fireEvent("autosize",c,a)}},beforeDestroy:function(){var a=this.pasteTask;if(a){a.cancel();this.pasteTask=null}Ext.form.field.Text.prototype.beforeDestroy.call(this)}},0,["textarea","textareafield"],["component","box","field","textfield","textareafield","textarea"],{component:true,box:true,field:true,textfield:true,textareafield:true,textarea:true},["widget.textarea","widget.textareafield"],0,[Ext.form.field,"TextArea",Ext.form,"TextArea"],0));(Ext.cmd.derive("Ext.window.MessageBox",Ext.window.Window,{OK:1,YES:2,NO:4,CANCEL:8,OKCANCEL:9,YESNO:6,YESNOCANCEL:14,INFO:"x-message-box-info",WARNING:"x-message-box-warning",QUESTION:"x-message-box-question",ERROR:"x-message-box-error",hideMode:"offsets",closeAction:"hide",resizable:false,scrollable:true,title:"&#160;",defaultMinWidth:250,defaultMaxWidth:600,defaultMinHeight:110,defaultMaxHeight:500,minWidth:null,maxWidth:null,minHeight:null,maxHeight:null,constrain:true,cls:["x-message-box","x-hidden-offsets"],layout:{type:"vbox",align:"stretch"},shrinkWrapDock:true,defaultTextHeight:75,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"},buttonIds:["ok","yes","no","cancel"],titleText:{confirm:"Confirm",prompt:"Prompt",wait:"Loading...",alert:"Attention"},baseIconCls:"x-message-box-icon",ariaRole:"alertdialog",makeButton:function(a){var b=this.buttonIds[a];return new Ext.button.Button({handler:this.btnCallback,itemId:b,scope:this,text:this.buttonText[b],minWidth:75})},btnCallback:function(a,c){var b=this,d,f;if(c&&c.type==="keydown"&&!c.isSpecialKey()){c.getTarget(null,null,true).on({keyup:function(g){b.btnCallback(a,g)},single:true});return}if(b.cfg.prompt||b.cfg.multiline){if(b.cfg.multiline){f=b.textArea}else{f=b.textField}d=f.getValue();f.reset()}b.hide();b.userCallback(a.itemId,d,b.cfg)},hide:function(){var b=this,a=b.cfg?b.cfg.cls:"";b.progressBar.reset();if(a){b.removeCls(a)}Ext.window.Window.prototype.hide.apply(this,arguments)},constructor:function(a){var b=this;Ext.window.Window.prototype.constructor.apply(this,arguments);b.minWidth=b.defaultMinWidth=(b.minWidth||b.defaultMinWidth);b.maxWidth=b.defaultMaxWidth=(b.maxWidth||b.defaultMaxWidth);b.minHeight=b.defaultMinHeight=(b.minHeight||b.defaultMinHeight);b.maxHeight=b.defaultMaxHeight=(b.maxHeight||b.defaultMaxHeight)},initComponent:function(a){var f=this,b=f.id,d,c;f.title=f.title||"&#160;";f.iconCls=f.iconCls||"";f.topContainer=new Ext.container.Container({layout:"hbox",padding:10,style:{overflow:"hidden"},items:[f.iconComponent=new Ext.Component({cls:f.baseIconCls}),f.promptContainer=new Ext.container.Container({flex:1,layout:{type:"vbox",align:"stretch"},items:[f.msg=new Ext.Component({id:b+"-msg",cls:f.baseCls+"-text"}),f.textField=new Ext.form.field.Text({id:b+"-textfield",enableKeyEvents:true,listeners:{keydown:f.onPromptKey,scope:f}}),f.textArea=new Ext.form.field.TextArea({id:b+"-textarea",height:75})]})]});f.progressBar=new Ext.ProgressBar({id:b+"-progressbar",margin:"0 10 10 10"});f.items=[f.topContainer,f.progressBar];f.msgButtons=[];for(d=0;d<4;d++){c=f.makeButton(d);f.msgButtons[c.itemId]=c;f.msgButtons.push(c)}f.bottomTb=new Ext.toolbar.Toolbar({id:b+"-toolbar",ui:"footer",dock:"bottom",layout:{pack:"center"},items:[f.msgButtons[0],f.msgButtons[1],f.msgButtons[2],f.msgButtons[3]]});f.dockedItems=[f.bottomTb];f.on("close",f.onClose,f);Ext.window.Window.prototype.initComponent.call(this)},onClose:function(){var a=this.header.child("[type=close]");if(a){a.itemId="cancel";this.btnCallback(a);delete a.itemId}},onPromptKey:function(a,c){var b=this;if(c.keyCode===c.RETURN||c.keyCode===10){if(b.msgButtons.ok.isVisible()){b.msgButtons.ok.handler.call(b,b.msgButtons.ok)}else{if(b.msgButtons.yes.isVisible()){b.msgButtons.yes.handler.call(b,b.msgButtons.yes)}}}},reconfigure:function(c){var w=this,t=0,g=true,y=w.buttonText,f=w.resizer,r=w.header,v=r&&!r.isHeader,d=c&&(c.message||c.msg),z,p,j,s,u,h,b,m,q,o,a;w.updateButtonText();w.cfg=c=c||{};o=c.wait;if(c.width){p=c.width}if(c.height){j=c.height}w.minWidth=c.minWidth||w.defaultMinWidth;w.maxWidth=c.maxWidth||w.defaultMaxWidth;w.minHeight=c.minHeight||w.defaultMinHeight;w.maxHeight=c.maxHeight||w.defaultMaxHeight;if(f){z=f.resizeTracker;f.minWidth=z.minWidth=w.minWidth;f.maxWidth=z.maxWidth=w.maxWidth;f.minHeight=z.minHeight=w.minHeight;f.maxHeight=z.maxHeight=w.maxHeight}delete w.defaultFocus;if(c.defaultFocus){w.defaultFocus=c.defaultFocus}w.animateTarget=c.animateTarget||undefined;w.modal=c.modal!==false;w.setTitle(c.title||(v&&r.title)||w.title);w.setIconCls(c.iconCls||(v&&r.iconCls)||w.iconCls);if(Ext.isObject(c.buttons)){w.buttonText=c.buttons;t=0}else{w.buttonText=c.buttonText||w.buttonText;t=Ext.isNumber(c.buttons)?c.buttons:0}t=t|w.updateButtonText();w.buttonText=y;Ext.suspendLayouts();w.width=w.height=null;if(p||j){if(p){w.setWidth(p)}if(j){w.setHeight(j)}}w.hidden=false;if(!w.rendered){w.render(Ext.getBody())}w.closable=c.closable!==false&&!o;r=w.header;if(r){a=r.child("[type=close]");if(a){a.setVisible(w.closable)}if(!c.title&&!w.closable&&!c.iconCls){r.hide()}else{r.show()}}w.liveDrag=!c.proxyDrag;w.userCallback=Ext.Function.bindCallback(c.callback||c.fn||Ext.emptyFn,c.scope||Ext.global);w.setIcon(c.icon);b=w.msg;if(d){b.setHtml(d);b.show()}else{b.hide()}u=w.textArea;h=w.textField;if(c.prompt||c.multiline){w.multiline=c.multiline;if(c.multiline){u.setValue(c.value);u.setHeight(c.defaultTextHeight||w.defaultTextHeight);u.show();h.hide();w.defaultFocus=u}else{h.setValue(c.value);u.hide();h.show();w.defaultFocus=h}}else{u.hide();h.hide()}m=w.progressBar;if(c.progress||o){m.show();w.updateProgress(0,c.progressText);if(o){m.wait(o===true?c.waitConfig:o)}}else{m.hide()}q=w.msgButtons;for(s=0;s<4;s++){if(t&Math.pow(2,s)){if(!w.defaultFocus){w.defaultFocus=q[s]}q[s].show();g=false}else{q[s].hide()}}if(g){w.bottomTb.hide()}else{w.bottomTb.show()}Ext.resumeLayouts(true)},updateButtonText:function(){var d=this,c=d.buttonText,b=0,f,a;for(f in c){if(c.hasOwnProperty(f)){a=d.msgButtons[f];if(a){if(d.cfg&&d.cfg.buttonText){b=b|Math.pow(2,Ext.Array.indexOf(d.buttonIds,f))}if(a.text!==c[f]){a.setText(c[f])}}}}return b},show:function(a){var c=this,b;a=a||{};if(Ext.Component.layoutSuspendCount){Ext.on({resumelayouts:function(){c.show(a)},single:true});return c}c.reconfigure(a);if(a.cls){c.addCls(a.cls)}b=c.query("textfield:not([hidden]),textarea:not([hidden]),button:not([hidden])");c.preventFocusOnActivate=!b.length;c.hidden=true;Ext.window.Window.prototype.show.call(this);return c},onShow:function(){Ext.window.Window.prototype.onShow.apply(this,arguments);this.center()},updateText:function(a){this.msg.setHtml(a)},setIcon:function(d,c,a){var f=this,g=f.iconComponent,b=f.messageIconCls;if(b){g.removeCls(b)}if(d){g.show();if(c||a){g.setSize(c||g.getWidth(),a||g.getHeight())}g.addCls("x-dlg-icon");g.addCls(f.messageIconCls=d)}else{g.removeCls("x-dlg-icon");g.hide()}return f},updateProgress:function(c,a,b){this.progressBar.updateProgress(c,a);if(b){this.updateText(b)}return this},onEsc:function(){if(this.closable!==false){Ext.window.Window.prototype.onEsc.apply(this,arguments)}},confirm:function(a,d,c,b){if(Ext.isString(a)){a={title:a,icon:this.QUESTION,message:d,buttons:this.YESNO,callback:c,scope:b}}return this.show(a)},prompt:function(g,d,c,b,a,f){if(Ext.isString(g)){g={prompt:true,title:g,minWidth:this.minPromptWidth,message:d,buttons:this.OKCANCEL,callback:c,scope:b,multiline:a,value:f}}return this.show(g)},wait:function(b,c,a){if(Ext.isString(b)){b={title:c,message:b,closable:false,wait:true,modal:true,minWidth:this.minProgressWidth,waitConfig:a}}return this.show(b)},alert:function(d,c,b,a){if(Ext.isString(d)){d={title:d,message:c,buttons:this.OK,fn:b,scope:a,minWidth:this.minWidth}}return this.show(d)},progress:function(c,b,a){if(Ext.isString(c)){c={title:c,message:b,progress:true,progressText:a}}return this.show(c)}},1,["messagebox"],["component","box","container","panel","window","messagebox"],{component:true,box:true,container:true,panel:true,window:true,messagebox:true},["widget.messagebox"],0,[Ext.window,"MessageBox"],function(a){Ext.onInternalReady(function(){Ext.MessageBox=Ext.Msg=new a()})}));(Ext.cmd.derive("Ext.form.Basic",Ext.util.Observable,{alternateClassName:"Ext.form.BasicForm",taskDelay:10,constructor:function(b,c){var d=this,a;d.owner=b;d.fieldMonitors={validitychange:d.checkValidityDelay,enable:d.checkValidityDelay,disable:d.checkValidityDelay,dirtychange:d.checkDirtyDelay,errorchange:d.checkErrorDelay,scope:d};d.checkValidityTask=new Ext.util.DelayedTask(d.checkValidity,d);d.checkDirtyTask=new Ext.util.DelayedTask(d.checkDirty,d);d.checkErrorTask=new Ext.util.DelayedTask(d.checkError,d);d.monitor=new Ext.container.Monitor({selector:"[isFormField]:not([excludeForm])",scope:d,addHandler:d.onFieldAdd,removeHandler:d.onFieldRemove,invalidateHandler:d.onMonitorInvalidate});d.monitor.bind(b);Ext.apply(d,c);if(Ext.isString(d.paramOrder)){d.paramOrder=d.paramOrder.split(/[\s,|]/)}a=d.reader;if(a&&!a.isReader){if(typeof a==="string"){a={type:a}}d.reader=Ext.createByAlias("reader."+a.type,a)}a=d.errorReader;if(a&&!a.isReader){if(typeof a==="string"){a={type:a}}d.errorReader=Ext.createByAlias("reader."+a.type,a)}Ext.util.Observable.prototype.constructor.call(this)},initialize:function(){this.initialized=true;this.onValidityChange(!this.hasInvalidField())},timeout:30,paramsAsHash:false,waitTitle:"Please Wait...",trackResetOnLoad:false,wasDirty:false,destroy:function(){var b=this,a=b.monitor;if(a){a.unbind();b.monitor=null}b.clearListeners();b.checkValidityTask.cancel();b.checkDirtyTask.cancel();b.checkErrorTask.cancel();b.checkValidityTask=b.checkDirtyTask=b.checkErrorTask=null;Ext.util.Observable.prototype.destroy.call(this)},onFieldAdd:function(a){a.on(this.fieldMonitors);this.onMonitorInvalidate()},onFieldRemove:function(a){a.un(this.fieldMonitors);this.onMonitorInvalidate()},onMonitorInvalidate:function(){if(this.initialized){this.checkValidityDelay()}},getFields:function(){return this.monitor.getItems()},getBoundItems:function(){var a=this._boundItems;if(!a||a.getCount()===0){a=this._boundItems=new Ext.util.MixedCollection();a.addAll(this.owner.query("[formBind]"))}return a},hasInvalidField:function(){return !!this.getFields().findBy(function(c){var a=c.preventMark,b;c.preventMark=true;b=c.isValid();c.preventMark=a;return !b})},isValid:function(){var a=this,b;Ext.suspendLayouts();b=a.getFields().filterBy(function(c){return !c.validate()});Ext.resumeLayouts(true);return b.length<1},checkValidity:function(){var b=this,a;if(b.destroyed){return}a=!b.hasInvalidField();if(a!==b.wasValid){b.onValidityChange(a);b.fireEvent("validitychange",b,a);b.wasValid=a}},checkValidityDelay:function(){var a=this.taskDelay;if(a){this.checkValidityTask.delay(a)}else{this.checkValidity()}},checkError:function(){this.fireEvent("errorchange",this)},checkErrorDelay:function(){var a=this.taskDelay;if(a){this.checkErrorTask.delay(a)}else{this.checkError()}},onValidityChange:function(g){var d=this.getBoundItems(),b,c,a,f;if(d){b=d.items;a=b.length;for(c=0;c<a;c++){f=b[c];if(f.disabled===g){f.setDisabled(!g)}}}},isDirty:function(){return !!this.getFields().findBy(function(a){return a.isDirty()})},checkDirtyDelay:function(){var a=this.taskDelay;if(a){this.checkDirtyTask.delay(a)}else{this.checkDirty()}},checkDirty:function(){var b=this,a;if(b.destroyed){return}a=this.isDirty();if(a!==this.wasDirty){this.fireEvent("dirtychange",this,a);this.wasDirty=a}},hasUpload:function(){return !!this.getFields().findBy(function(a){return a.isFileUpload()})},doAction:function(b,a){if(Ext.isString(b)){b=Ext.ClassManager.instantiateByAlias("formaction."+b,Ext.apply({},a,{form:this}))}if(this.fireEvent("beforeaction",this,b)!==false){this.beforeAction(b);Ext.defer(b.run,100,b)}return this},submit:function(a){a=a||{};var b=this,c;if(a.standardSubmit||b.standardSubmit){c="standardsubmit"}else{c=b.api?"directsubmit":"submit"}return b.doAction(c,a)},load:function(a){return this.doAction(this.api?"directload":"load",a)},updateRecord:function(c){c=c||this._record;if(!c){return this}var b=c.self.fields,d=this.getFieldValues(),h={},g=0,a=b.length,f;for(;g<a;++g){f=b[g].name;if(d.hasOwnProperty(f)){h[f]=d[f]}}c.beginEdit();c.set(h);c.endEdit();return this},loadRecord:function(a){this._record=a;return this.setValues(a.getData())},getRecord:function(){return this._record},beforeAction:function(c){var h=this,b=c.waitMsg,o="x-mask-loading",d=h.getFields().items,g,m=d.length,j,a;for(g=0;g<m;g++){j=d[g];if(j.isFormField&&j.syncValue){j.syncValue()}}if(b){a=h.waitMsgTarget;if(a===true){h.owner.el.mask(b,o)}else{if(a){a=h.waitMsgTarget=Ext.get(a);a.mask(b,o)}else{h.floatingAncestor=h.owner.up("[floating]");if(h.floatingAncestor){h.savePreventFocusOnActivate=h.floatingAncestor.preventFocusOnActivate;h.floatingAncestor.preventFocusOnActivate=true}Ext.MessageBox.wait(b,c.waitTitle||h.waitTitle)}}}},afterAction:function(c,f){var a=this;if(c.waitMsg){var b=Ext.MessageBox,d=a.waitMsgTarget;if(d===true){a.owner.el.unmask()}else{if(d){d.unmask()}else{b.hide()}}}if(a.floatingAncestor){a.floatingAncestor.preventFocusOnActivate=a.savePreventFocusOnActivate}if(f){if(c.reset){a.reset()}Ext.callback(c.success,c.scope||c,[a,c]);a.fireEvent("actioncomplete",a,c)}else{Ext.callback(c.failure,c.scope||c,[a,c]);a.fireEvent("actionfailed",a,c)}},findField:function(a){return this.getFields().findBy(function(b){return b.id===a||b.name===a||b.dataIndex===a})},markInvalid:function(j){var d=this,g,a,b,f,c;function h(m,p){var o=d.findField(m);if(o){o.markInvalid(p)}}if(Ext.isArray(j)){a=j.length;for(g=0;g<a;g++){b=j[g];h(b.id||b.field,b.msg||b.message)}}else{if(j instanceof Ext.data.ErrorCollection){a=j.items.length;for(g=0;g<a;g++){b=j.items[g];h(b.field,b.message)}}else{for(c in j){if(j.hasOwnProperty(c)){f=j[c];h(c,f,j)}}}}return this},setValues:function(b){var d=this,a,c,g;function f(h,m){var j=d.findField(h);if(j){j.setValue(m);if(d.trackResetOnLoad){j.resetOriginalValue()}}}Ext.suspendLayouts();if(Ext.isArray(b)){c=b.length;for(a=0;a<c;a++){g=b[a];f(g.id,g.value)}}else{Ext.iterate(b,f)}Ext.resumeLayouts(true);return this},getValues:function(o,p,t,r,c){var s={},j=this.getFields().items,u=j.length,h=Ext.isArray,q,g,d,b,a,m;for(m=0;m<u;m++){q=j[m];if(!p||q.isDirty()){g=q[r?"getModelData":"getSubmitData"](t,c);if(Ext.isObject(g)){for(a in g){if(g.hasOwnProperty(a)){d=g[a];if(t&&d===""){d=q.emptyText||""}if(!q.isRadio){if(s.hasOwnProperty(a)){b=s[a];if(!h(b)){b=s[a]=[b]}if(h(d)){s[a]=b.concat(d)}else{b.push(d)}}else{s[a]=d}}else{s[a]=s[a]||d}}}}}}if(o){s=Ext.Object.toQueryString(s)}return s},getFieldValues:function(a){return this.getValues(false,a,false,true)},clearInvalid:function(){Ext.suspendLayouts();var b=this,a=b.getFields().items,c,d=a.length;for(c=0;c<d;c++){a[c].clearInvalid()}Ext.resumeLayouts(true);return b},reset:function(b){Ext.suspendLayouts();var c=this,a=c.getFields().items,d,g=a.length;for(d=0;d<g;d++){a[d].reset()}Ext.resumeLayouts(true);if(b===true){delete c._record}return c},applyToFields:function(c){var a=this.getFields().items,b,d=a.length;for(b=0;b<d;b++){Ext.apply(a[b],c)}return this},applyIfToFields:function(c){var a=this.getFields().items,b,d=a.length;for(b=0;b<d;b++){Ext.applyIf(a[b],c)}return this}},1,0,0,0,0,0,[Ext.form,"Basic",Ext.form,"BasicForm"],0));(Ext.cmd.derive("Ext.form.FieldAncestor",Ext.Mixin,{mixinConfig:{id:"fieldAncestor",after:{initInheritedState:"initFieldInheritedState"},before:{destroy:"onBeforeDestroy"}},initFieldAncestor:function(){var a=this;a.monitor=new Ext.container.Monitor({scope:a,selector:"[isFormField]:not([excludeForm])",addHandler:a.onChildFieldAdd,removeHandler:a.onChildFieldRemove});a.initFieldDefaults()},initMonitor:function(){this.monitor.bind(this)},initFieldInheritedState:function(b){var a=b.fieldDefaults,c=this.fieldDefaults;if(c){if(a){b.fieldDefaults=Ext.apply(Ext.Object.chain(a),c)}else{b.fieldDefaults=c}}},onChildFieldAdd:function(b){var a=this;a.mon(b,"errorchange",a.handleFieldErrorChange,a);a.mon(b,"validitychange",a.handleFieldValidityChange,a)},onChildFieldRemove:function(b){var a=this;a.mun(b,"errorchange",a.handleFieldErrorChange,a);a.mun(b,"validitychange",a.handleFieldValidityChange,a)},initFieldDefaults:function(){if(!this.fieldDefaults){this.fieldDefaults={}}},handleFieldValidityChange:function(c,b){var a=this;if(c!==a){a.fireEvent("fieldvaliditychange",a,c,b);a.onFieldValidityChange(c,b)}},handleFieldErrorChange:function(b,a){var c=this;if(b!==c){c.fireEvent("fielderrorchange",c,b,a);c.onFieldErrorChange(b,a)}},onFieldValidityChange:Ext.emptyFn,onFieldErrorChange:Ext.emptyFn,onBeforeDestroy:function(){this.monitor.unbind()}},0,0,0,0,0,0,[Ext.form,"FieldAncestor"],0));(Ext.cmd.derive("Ext.layout.component.field.FieldContainer",Ext.layout.component.Auto,{type:"fieldcontainer",waitForOuterHeightInDom:true,waitForOuterWidthInDom:true,beginLayout:function(b){var a=this.owner.containerEl;Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);b.hasRawContent=true;a.setStyle("width","");a.setStyle("height","");b.containerElContext=b.getEl("containerEl")},measureContentHeight:function(a){return a.hasDomProp("containerLayoutDone")?Ext.layout.component.Auto.prototype.measureContentHeight.apply(this,arguments):NaN},measureContentWidth:function(a){return a.hasDomProp("containerLayoutDone")?Ext.layout.component.Auto.prototype.measureContentWidth.apply(this,arguments):NaN},publishInnerHeight:function(c,b){var a=this.owner;if(a.labelAlign==="top"&&a.hasVisibleLabel()){b-=a.labelEl.getHeight()}if(a.msgTarget==="under"&&a.hasActiveError()){b-=a.errorWrapEl.getHeight()}b-=a.bodyEl.getPadding("tb");c.containerElContext.setHeight(b)},publishInnerWidth:function(c,b){var a=this.owner;if(a.labelAlign!=="top"&&a.hasVisibleLabel()){b-=(a.labelWidth+(a.labelPad||0))}if(a.msgTarget==="side"&&a.hasActiveError()){b-=a.errorWrapEl.getWidth()}b-=a.bodyEl.getPadding("lr");c.containerElContext.setWidth(b)}},0,0,0,0,["layout.fieldcontainer"],0,[Ext.layout.component.field,"FieldContainer"],0));(Ext.cmd.derive("Ext.form.FieldContainer",Ext.container.Container,{componentLayout:"fieldcontainer",componentCls:"x-form-fieldcontainer",shrinkWrap:true,autoEl:{tag:"div",role:"presentation"},childEls:["containerEl"],combineLabels:false,labelConnector:", ",combineErrors:false,maskOnDisable:false,invalidCls:"",fieldSubTpl:['<div id="{id}-containerEl" data-ref="containerEl" class="{containerElCls}"','<tpl if="ariaAttributes">','<tpl foreach="ariaAttributes"> {$}="{.}"</tpl>',"<tpl else>",' role="presentation"',"</tpl>",">","{%this.renderContainer(out,values)%}","</div>"],initComponent:function(){var a=this;a.initLabelable();a.initFieldAncestor();Ext.container.Container.prototype.initComponent.call(this);a.initMonitor()},onAdd:function(a){var b=this;if(a.isLabelable&&Ext.isGecko&&Ext.firefoxVersion<37&&b.layout.type==="absolute"&&!b.hideLabel&&b.labelAlign!=="top"){a.x+=(b.labelWidth+b.labelPad)}Ext.container.Container.prototype.onAdd.apply(this,arguments);if(a.isLabelable&&b.combineLabels){a.oldHideLabel=a.hideLabel;a.hideLabel=true}b.updateLabel()},onRemove:function(a,b){var c=this;Ext.container.Container.prototype.onRemove.apply(this,arguments);if(!b){if(a.isLabelable&&c.combineLabels){a.hideLabel=a.oldHideLabel}c.updateLabel()}},initRenderData:function(){var a=this,b=Ext.container.Container.prototype.initRenderData.call(this);b.containerElCls=a.containerElCls;b=Ext.applyIf(b,a.getLabelableRenderData());b.tipAnchorTarget=a.id+"-containerEl";return b},getFieldLabel:function(){var a=this.fieldLabel||"";if(!a&&this.combineLabels){a=Ext.Array.map(this.query("[isFieldLabelable]"),function(b){return b.getFieldLabel()}).join(this.labelConnector)}return a},getSubTplData:function(){var a=this.initRenderData();Ext.apply(a,this.subTplData);return a},getSubTplMarkup:function(b){var d=this,a=d.getTpl("fieldSubTpl"),c;if(!a.renderContent){d.setupRenderTpl(a)}c=a.apply(d.getSubTplData(b));return c},updateLabel:function(){var b=this,a=b.labelEl;if(a){b.setFieldLabel(b.getFieldLabel())}},onFieldErrorChange:function(){if(this.combineErrors){var c=this,d=c.getActiveError(),b=Ext.Array.filter(c.query("[isFormField]"),function(f){return f.hasActiveError()}),a=c.getCombinedErrors(b);if(a){c.setActiveErrors(a)}else{c.unsetActiveError()}if(d!==c.getActiveError()){c.updateLayout()}}},getCombinedErrors:function(g){var p=[],c,q=g.length,m,d,o,b,h,j;for(c=0;c<q;c++){m=g[c];d=m.getActiveErrors();b=d.length;for(o=0;o<b;o++){h=d[o];j=m.getFieldLabel();p.push((j?j+": ":"")+h)}}return p},privates:{applyTargetCls:function(b){var a=this.containerElCls;this.containerElCls=a?a+" "+b:b},getTargetEl:function(){return this.containerEl},initRenderTpl:function(){var a=this;if(!a.hasOwnProperty("renderTpl")){a.renderTpl=a.getTpl("labelableRenderTpl")}return Ext.container.Container.prototype.initRenderTpl.call(this)}}},0,["fieldcontainer"],["component","box","container","fieldcontainer"],{component:true,box:true,container:true,fieldcontainer:true},["widget.fieldcontainer"],[["labelable",Ext.form.Labelable],["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"FieldContainer"],0));(Ext.cmd.derive("Ext.form.CheckboxManager",Ext.util.MixedCollection,{singleton:true,getByName:function(a,b){return this.filterBy(function(c){return c.name===a&&c.getFormId()===b})}},0,0,0,0,0,0,[Ext.form,"CheckboxManager"],0));(Ext.cmd.derive("Ext.form.field.Checkbox",Ext.form.field.Base,{alternateClassName:"Ext.form.Checkbox",stretchInputElFixed:false,childEls:["boxLabelEl","innerWrapEl","displayEl"],fieldSubTpl:['<div id="{cmpId}-innerWrapEl" data-ref="innerWrapEl" role="presentation"',' class="{wrapInnerCls}">','<tpl if="labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {noBoxLabelCls} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>",'<input type="button" id="{id}" name="{inputName}" data-ref="inputEl" {inputAttrTpl}','<tpl if="tabIdx != null"> tabindex="{tabIdx}"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{checkboxCls} {clipCls}" autocomplete="off" hidefocus="true" ','<tpl foreach="inputElAriaAttributes"> {$}="{.}"</tpl>',"/>",'<span id="{cmpId}-displayEl" data-ref="displayEl" class="{fieldCls} {typeCls} ','{typeCls}-{ui} {inputCls} {inputCls}-{ui} {childElCls} {afterLabelCls}"></span>','<tpl if="!labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" data-ref="boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} ','{boxLabelCls}-{ui} {boxLabelCls}-{boxLabelAlign} {noBoxLabelCls} {childElCls}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>","</div>",{disableFormats:true,compiled:true}],publishes:{checked:1},subTplInsertions:["beforeBoxLabelTpl","afterBoxLabelTpl","beforeBoxLabelTextTpl","afterBoxLabelTextTpl","boxLabelAttrTpl","inputAttrTpl"],isCheckbox:true,focusCls:"form-checkbox-focus",fieldBodyCls:"x-form-cb-wrap",checked:false,checkedCls:"x-form-cb-checked",boxLabelCls:"x-form-cb-label",boxLabelAlign:"after",afterLabelCls:"x-form-cb-after",wrapInnerCls:"x-form-cb-wrap-inner",noBoxLabelCls:"x-form-cb-no-box-label",inputValue:"on",checkChangeEvents:[],inputType:"checkbox",isTextInput:false,ariaRole:"checkbox",onRe:/^on$/i,inputCls:"x-form-cb",_checkboxCls:"x-form-cb-input",_clipCls:"x-hidden-clip",initComponent:function(){var a=this,b=a.value;if(b!==undefined){a.checked=a.isChecked(b,a.inputValue)}Ext.form.field.Base.prototype.initComponent.call(this);a.getManager().add(a)},initDefaultName:Ext.emptyFn,initValue:function(){var b=this,a=!!b.checked;b.originalValue=b.lastValue=a;b.setValue(a)},getElConfig:function(){var a=this;if(a.isChecked(a.rawValue,a.inputValue)){a.addCls(a.checkedCls)}return Ext.form.field.Base.prototype.getElConfig.call(this)},getSubTplData:function(b){var d=this,c=d.boxLabel,h=d.boxLabelAlign,g=h==="before",f,a;f=Ext.apply(Ext.form.field.Base.prototype.getSubTplData.call(this,b),{clipCls:d._clipCls,checkboxCls:d._checkboxCls,disabled:d.readOnly||d.disabled,wrapInnerCls:d.wrapInnerCls,boxLabel:c,boxLabelCls:d.boxLabelCls,boxLabelAlign:h,labelAlignedBefore:g,afterLabelCls:g?d.afterLabelCls:"",noBoxLabelCls:!c?d.noBoxLabelCls:"",inputName:d.name||d.id});a=f.inputElAriaAttributes;if(a){a["aria-checked"]=!!d.checked;a["aria-labelledby"]=d.id+"-boxLabelEl"}return f},initEvents:function(){var a=this;Ext.form.field.Base.prototype.initEvents.call(this);a.inputEl.on({click:"onBoxClick",scope:a,translate:false});a.displayEl.on({click:"onBoxClick",mousedown:"_onDisplayElMouseDown",scope:a})},setBoxLabel:function(a){var b=this;b.boxLabel=a;if(b.rendered){b.boxLabelEl.setHtml(a);b.boxLabelEl[a?"removeCls":"addCls"](b.noBoxLabelCls);b.updateLayout()}},onBoxClick:function(){var a=this;if(!a.disabled&&!a.readOnly){a.setValue(!a.checked)}},getRawValue:function(){return this.checked},getValue:function(){return this.checked},getSubmitValue:function(){var a=this.uncheckedValue,b=Ext.isDefined(a)?a:null;return this.checked?this.inputValue:b},isChecked:function(b,a){return(b===true||b==="true"||b==="1"||b===1||(((Ext.isString(b)||Ext.isNumber(b))&&a)?b==a:this.onRe.test(b)))},setRawValue:function(c){var b=this,d=b.inputEl,f=b.displayEl,a=b.isChecked(c,b.inputValue);if(d){b[a?"addCls":"removeCls"](b.checkedCls);if(b.ariaRole){b.ariaEl.dom.setAttribute("aria-checked",a)}}if(Ext.isIE8&&f&&a!==b.lastValue){f.repaint()}b.checked=b.rawValue=a;if(!b.duringSetValue){b.lastValue=a}return a},setValue:function(g){var f=this,c,b,a,d;if(Ext.isArray(g)){c=f.getManager().getByName(f.name,f.getFormId()).items;a=c.length;for(b=0;b<a;++b){d=c[b];d.setValue(Ext.Array.contains(g,d.inputValue))}}else{f.duringSetValue=true;Ext.form.field.Base.prototype.setValue.apply(this,arguments);delete f.duringSetValue}return f},valueToRaw:Ext.identityFn,onChange:function(b,a){var d=this,c=d.handler;if(c){Ext.callback(c,d.scope,[d,b],0,d)}Ext.form.field.Base.prototype.onChange.apply(this,arguments);if(d.reference&&d.publishState){d.publishState("checked",b)}},resetOriginalValue:function(b){var g=this,d,f,a,c;if(!b){d=g.getManager().getByName(g.name,g.getFormId()).items;a=d.length;for(c=0;c<a;++c){f=d[c];if(f!==g){d[c].resetOriginalValue(true)}}}Ext.form.field.Base.prototype.resetOriginalValue.call(this)},beforeDestroy:function(){Ext.form.field.Base.prototype.beforeDestroy.call(this);this.getManager().removeAtKey(this.id)},getManager:function(){return Ext.form.CheckboxManager},onEnable:function(){var a=this,b=a.inputEl;Ext.form.field.Base.prototype.onEnable.call(this);if(b){b.dom.disabled=a.readOnly}},setReadOnly:function(c){var a=this,b=a.inputEl;if(b){b.dom.disabled=!!c||a.disabled}Ext.form.field.Base.prototype.setReadOnly.apply(this,arguments)},getFormId:function(){var b=this,a;if(!b.formId){a=b.up("form");if(a){b.formId=a.id}}return b.formId},getFocusClsEl:function(){return this.displayEl},privates:{_onDisplayElMouseDown:function(a){a.preventDefault();this.inputEl.focus(1)}}},0,["checkbox","checkboxfield"],["component","box","field","checkboxfield","checkbox"],{component:true,box:true,field:true,checkboxfield:true,checkbox:true},["widget.checkbox","widget.checkboxfield"],0,[Ext.form.field,"Checkbox",Ext.form,"Checkbox"],0));Ext.define("Ext.theme.triton.form.field.Checkbox",{override:"Ext.form.field.Checkbox",compatibility:Ext.isIE8,initComponent:function(){(arguments.callee.$previous||Ext.form.field.Base.prototype.initComponent).call(this);Ext.on({show:"onGlobalShow",scope:this})},onFocus:function(b){var a;(arguments.callee.$previous||Ext.form.field.Base.prototype.onFocus).call(this,b);a=this.getFocusClsEl();if(a){a.syncRepaint()}},onBlur:function(b){var a;(arguments.callee.$previous||Ext.form.field.Base.prototype.onBlur).call(this,b);a=this.getFocusClsEl();if(a){a.syncRepaint()}},onGlobalShow:function(a){if(a.isAncestor(this)){this.getFocusClsEl().syncRepaint()}}});(Ext.cmd.derive("Ext.form.Label",Ext.Component,{autoEl:"label",maskOnDisable:false,getElConfig:function(){var a=this;a.html=a.text?Ext.util.Format.htmlEncode(a.text):(a.html||"");return Ext.apply(Ext.Component.prototype.getElConfig.call(this),{htmlFor:a.forId||""})},setText:function(c,b){var a=this;b=b!==false;if(b){a.text=c;delete a.html}else{a.html=c;delete a.text}if(a.rendered){a.el.dom.innerHTML=b!==false?Ext.util.Format.htmlEncode(c):c;a.updateLayout()}return a}},0,["label"],["component","box","label"],{component:true,box:true,label:true},["widget.label"],0,[Ext.form,"Label"],0));(Ext.cmd.derive("Ext.form.Panel",Ext.panel.Panel,{alternateClassName:["Ext.FormPanel","Ext.form.FormPanel"],layout:"anchor",bodyAriaRole:"form",basicFormConfigs:["api","baseParams","errorReader","jsonSubmit","method","paramOrder","paramsAsHash","reader","standardSubmit","timeout","trackResetOnLoad","url","waitMsgTarget","waitTitle"],initComponent:function(){var a=this;if(a.frame){a.border=false}a.initFieldAncestor();Ext.panel.Panel.prototype.initComponent.call(this);a.relayEvents(a.form,["beforeaction","actionfailed","actioncomplete","validitychange","dirtychange"]);if(a.pollForChanges){a.startPolling(a.pollInterval||500)}},initItems:function(){Ext.panel.Panel.prototype.initItems.call(this);this.initMonitor();this.form=this.createForm()},afterFirstLayout:function(){Ext.panel.Panel.prototype.afterFirstLayout.apply(this,arguments);this.form.initialize()},createForm:function(){var b={},d=this.basicFormConfigs,a=d.length,c=0,f;for(;c<a;++c){f=d[c];b[f]=this[f]}return new Ext.form.Basic(this,b)},getForm:function(){return this.form},loadRecord:function(a){return this.getForm().loadRecord(a)},getRecord:function(){return this.getForm().getRecord()},updateRecord:function(a){return this.getForm().updateRecord(a)},getValues:function(d,b,c,a){return this.getForm().getValues(d,b,c,a)},isDirty:function(){return this.form.isDirty()},isValid:function(){return this.form.isValid()},reset:function(){this.form.reset()},hasInvalidField:function(){return this.form.hasInvalidField()},beforeDestroy:function(){this.stopPolling();this.form.destroy();Ext.panel.Panel.prototype.beforeDestroy.call(this)},load:function(a){this.form.load(a)},submit:function(a){this.form.submit(a)},startPolling:function(b){this.stopPolling();var a=new Ext.util.TaskRunner(b);a.start({interval:0,run:this.checkChange,scope:this});this.pollTask=a},stopPolling:function(){var a=this.pollTask;if(a){a.stopAll();delete this.pollTask}},checkChange:function(){var a=this.form.getFields().items,b,c=a.length;for(b=0;b<c;b++){a[b].checkChange()}}},0,["form"],["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},["widget.form"],[["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"Panel",Ext,"FormPanel",Ext.form,"FormPanel"],0));(Ext.cmd.derive("Ext.form.field.Picker",Ext.form.field.Text,{alternateClassName:"Ext.form.Picker",config:{triggers:{picker:{handler:"onTriggerClick",scope:"this"}}},renderConfig:{editable:true},isPickerField:true,matchFieldWidth:true,pickerAlign:"tl-bl?",openCls:"x-pickerfield-open",isExpanded:false,applyTriggers:function(b){var c=this,a=b.picker;if(!a.cls){a.cls=c.triggerCls}return Ext.form.field.Text.prototype.applyTriggers.call(this,b)},getSubTplData:function(b){var c=this,d,a;d=Ext.form.field.Text.prototype.getSubTplData.call(this,b);if(c.ariaRole){a=d.inputElAriaAttributes;if(a){a["aria-haspopup"]=true;a["aria-expanded"]=false}}return d},initEvents:function(){var a=this;Ext.form.field.Text.prototype.initEvents.call(this);a.keyNav=new Ext.util.KeyNav(a.inputEl,{down:a.onDownArrow,esc:{handler:a.onEsc,scope:a,defaultEventAction:false},scope:a,forceKeyDown:true});if(Ext.isGecko){a.inputEl.dom.setAttribute("autocomplete","off")}},updateEditable:function(a,c){var b=this;if(!a){b.inputEl.on("click",b.onTriggerClick,b)}else{b.inputEl.un("click",b.onTriggerClick,b)}Ext.form.field.Text.prototype.updateEditable.call(this,a,c)},onEsc:function(a){if(Ext.isIE){a.preventDefault()}if(this.isExpanded){this.collapse();a.stopEvent()}},onDownArrow:function(b){var a=this;if((b.time-a.lastDownArrow)>150){delete a.lastDownArrow}if(!a.isExpanded){b.stopEvent();a.onTriggerClick();a.lastDownArrow=b.time}else{if(!b.isStopped&&(b.time-a.lastDownArrow)<150){delete a.lastDownArrow}}},expand:function(){var d=this,b,a,c,f;if(d.rendered&&!d.isExpanded&&!d.destroyed){b=d.bodyEl;c=d.getPicker();f=Ext.getDoc();c.setMaxHeight(c.initialConfig.maxHeight);if(d.matchFieldWidth){c.setWidth(d.bodyEl.getWidth())}c.show();d.isExpanded=true;d.alignPicker();b.addCls(d.openCls);if(d.ariaRole){a=d.ariaEl.dom;a.setAttribute("aria-owns",c.listEl?c.listEl.id:c.el.id);a.setAttribute("aria-expanded",true)}d.touchListeners=f.on({translate:false,touchstart:d.collapseIf,scope:d,delegated:false,destroyable:true});d.scrollListeners=Ext.on({scroll:d.onGlobalScroll,scope:d,destroyable:true});Ext.on("resize",d.alignPicker,d,{buffer:1});d.fireEvent("expand",d);d.onExpand()}},onExpand:Ext.emptyFn,alignPicker:function(){if(!this.destroyed){var a=this.getPicker();if(a.isVisible()&&a.isFloating()){this.doAlign()}}},doAlign:function(){var d=this,c=d.picker,a="-above",b;d.picker.alignTo(d.triggerWrap,d.pickerAlign,d.pickerOffset);b=c.el.getY()<d.inputEl.getY();d.bodyEl[b?"addCls":"removeCls"](d.openCls+a);c[b?"addCls":"removeCls"](c.baseCls+a)},collapse:function(){var d=this;if(d.isExpanded&&!d.destroyed&&!d.destroying){var c=d.openCls,b=d.picker,a="-above";b.hide();d.isExpanded=false;d.bodyEl.removeCls([c,c+a]);b.el.removeCls(b.baseCls+a);if(d.ariaRole){d.ariaEl.dom.setAttribute("aria-expanded",false)}d.touchListeners.destroy();d.scrollListeners.destroy();Ext.un("resize",d.alignPicker,d);d.fireEvent("collapse",d);d.onCollapse()}},onCollapse:Ext.emptyFn,collapseIf:function(b){var a=this;if(!a.destroyed&&!b.within(a.bodyEl,false,true)&&!a.owns(b.target)&&!Ext.fly(b.target).isFocusable()){a.collapse()}},getPicker:function(){var b=this,a=b.picker;if(!a){b.creatingPicker=true;b.picker=a=b.createPicker();a.ownerCmp=b;delete b.creatingPicker}return b.picker},onFocusLeave:function(a){this.collapse();Ext.form.field.Text.prototype.onFocusLeave.call(this,a)},getRefItems:function(){var a=[];if(this.picker){a[0]=this.picker}return a},createPicker:Ext.emptyFn,onTriggerClick:function(b){var a=this;if(!a.readOnly&&!a.disabled){if(a.isExpanded){a.collapse()}else{a.expand()}}},beforeDestroy:function(){var b=this,a=b.picker;Ext.form.field.Text.prototype.beforeDestroy.call(this);Ext.un("resize",b.alignPicker,b);Ext.destroy(b.keyNav,a);if(a){b.picker=a.pickerField=null}},privates:{onGlobalScroll:function(a){var b,d,c=this.el;if(a.getElement().contains(c)){b=a.getPosition();d=c.getScrollIntoViewXY(a.getElement(),b.x,b.y);if(this.up("[fixed]")||d.y!==b.y||d.x!==b.x){this.collapse()}}}}},0,["pickerfield"],["component","box","field","textfield","pickerfield"],{component:true,box:true,field:true,textfield:true,pickerfield:true},["widget.pickerfield"],0,[Ext.form.field,"Picker",Ext.form,"Picker"],0));(Ext.cmd.derive("Ext.selection.Model",Ext.mixin.Observable,{alternateClassName:"Ext.AbstractSelectionModel",factoryConfig:{defaultType:"dataviewmodel"},$configPrefixed:false,$configStrict:false,config:{store:null,selected:{}},isSelectionModel:true,allowDeselect:undefined,toggleOnClick:true,selected:null,pruneRemoved:true,suspendChange:0,ignoreRightMouseSelection:false,constructor:function(a){var b=this;b.modes={SINGLE:true,SIMPLE:true,MULTI:true};Ext.mixin.Observable.prototype.constructor.call(this,a);b.setSelectionMode(b.mode);if(b.selectionMode!=="SINGLE"){b.allowDeselect=true}},updateStore:function(a,b){this.bindStore(a,!b)},applySelected:function(a){if(!a.isCollection){a=new Ext.util.Collection(Ext.apply({rootProperty:"data"},a))}return a},getStoreListeners:function(){var a=this;return{add:a.onStoreAdd,clear:a.onStoreClear,remove:a.onStoreRemove,update:a.onStoreUpdate,idchanged:a.onIdChanged,load:a.onStoreLoad,refresh:a.onStoreRefresh,pageadd:a.onPageAdd,pageremove:a.onPageRemove}},suspendChanges:function(){++this.suspendChange},resumeChanges:function(){if(this.suspendChange){--this.suspendChange}},selectAll:function(a){var c=this,b=c.store.getRange(),d=c.getSelection().length;c.suspendChanges();c.doSelect(b,true,a);c.resumeChanges();if(!a&&!c.destroyed){c.maybeFireSelectionChange(c.getSelection().length!==d)}},deselectAll:function(m){var g=this,b=g.getSelection(),h={},j=g.store,a=b.length,f,c,d;for(f=0,c=b.length;f<c;f++){d=b[f];h[d.id]=j.indexOf(d)}b=Ext.Array.sort(b,function(q,o){var r=h[q.id],p=h[o.id];return r<p?-1:1});g.suspendChanges();g.doDeselect(b,m);g.resumeChanges();if(!m&&!g.destroyed){g.maybeFireSelectionChange(g.getSelection().length!==a)}},getSelectionStart:function(){return this.selectionStart},setSelectionStart:function(a){this.selectionStart=a},selectWithEvent:function(b,f){var d=this,c=d.isSelected(b),a=f.shiftKey;switch(d.selectionMode){case"MULTI":d.selectWithEventMulti(b,f,c);break;case"SIMPLE":d.selectWithEventSimple(b,f,c);break;case"SINGLE":d.selectWithEventSingle(b,f,c);break}if(!a){if(d.isSelected(b)){d.selectionStart=b}else{d.selectionStart=null}}},vetoSelection:function(a){if(a.stopSelection){return true}else{if(a.type!=="keydown"&&a.button!==0){if(this.ignoreRightMouseSelection||this.isSelected(a.record)){return true}}else{return a.type==="mousedown"}}},onNavigate:function(g){if(!g.record||this.vetoSelection(g.keyEvent)){return}this.onBeforeNavigate(g);var j=this,h=g.keyEvent,b=h.ctrlKey||g.ctrlKey,d=g.recordIndex,f=g.record,q=g.previousRecord,c=j.isSelected(f),o=(j.selectionStart&&j.isSelected(g.previousRecord))?j.selectionStart:(j.selectionStart=g.previousRecord),a=g.previousRecordIndex,p=h.getCharCode(),r=p===h.SPACE,m=p===h.UP||p===h.PAGE_UP||p===h.HOME?"up":(p===h.DOWN||p===h.PAGE_DOWN||p===h.END?"down":null);switch(j.selectionMode){case"MULTI":j.setSelectionStart(g.selectionStart);if(p===h.A&&b){j.selected.beginUpdate();j.selectRange(0,j.store.getCount()-1);j.selected.endUpdate()}else{if(r){if(h.shiftKey){j.selectRange(o,f,b)}else{if(c){if(j.allowDeselect){j.doDeselect(f)}}else{j.doSelect(f,b)}}}else{if(h.shiftKey&&o){if(m==="up"&&a<=d){j.deselectRange(q,d+1)}else{if(m==="down"&&a>=d){j.deselectRange(q,d-1)}else{if(o!==f){j.selectRange(o,f,b)}}}j.lastSelected=f}else{if(p){if(!b){j.doSelect(f,false)}}else{j.selectWithEvent(f,h)}}}}break;case"SIMPLE":if(p===h.A&&b){j.selected.beginUpdate();j.selectRange(0,j.store.getCount()-1);j.selected.endUpdate()}else{if(c){j.doDeselect(f)}else{j.doSelect(f,true)}}break;case"SINGLE":if(!b){if(m){j.doSelect(f,false)}else{if(r||!p){j.selectWithEvent(f,h)}}}}if(!h.shiftKey&&!j.destroyed&&j.isSelected(f)){j.selectionStart=f;j.selectionStartIdx=d}},selectRange:function(p,d,q){var j=this,o=j.store,c=j.selected.items,r,g,h,f,a,m,b;if(j.isLocked()){return}r=j.normalizeRowRange(p,d);p=r[0];d=r[1];f=[];for(g=p;g<=d;g++){if(!j.isSelected(o.getAt(g))){f.push(o.getAt(g))}}if(!q){a=[];j.suspendChanges();for(g=0,h=c.length;g<h;++g){b=c[g];m=o.indexOf(b);if(m<p||m>d){a.push(b)}}for(g=0,h=a.length;g<h;++g){j.doDeselect(a[g])}j.resumeChanges()}if(!j.destroyed){if(f.length){j.doMultiSelect(f,true)}else{if(a){j.maybeFireSelectionChange(a.length>0)}}}},deselectRange:function(f,d){var j=this,c=j.store,a,h,g,b;if(j.isLocked()){return}a=j.normalizeRowRange(f,d);f=a[0];d=a[1];g=[];for(h=f;h<=d;h++){b=c.getAt(h);if(j.isSelected(b)){g.push(b)}}if(g.length){j.doDeselect(g)}},normalizeRowRange:function(c,b){var a=this.store,d;if(!Ext.isNumber(c)){c=a.indexOf(c)}c=Math.max(0,c);if(!Ext.isNumber(b)){b=a.indexOf(b)}b=Math.min(b,a.getCount()-1);if(c>b){d=b;b=c;c=d}return[c,b]},select:function(b,c,a){if(Ext.isDefined(b)&&!(Ext.isArray(b)&&!b.length)){this.doSelect(b,c,a)}},deselect:function(b,a){this.doDeselect(b,a)},doSelect:function(c,f,b){var d=this,a;if(d.locked||c==null){return}if(typeof c==="number"){a=d.store.getAt(c);if(!a){return}c=[a]}if(d.selectionMode==="SINGLE"){if(c.isModel){c=[c]}if(c.length){d.doSingleSelect(c[0],b)}}else{d.doMultiSelect(c,f,b)}},doMultiSelect:function(a,o,m){var h=this,b=h.selected,j=false,p,d,g,f,c;if(h.locked){return}a=!Ext.isArray(a)?[a]:a;g=a.length;if(!o&&b.getCount()>0){p=h.deselectDuringSelect(a,m);if(h.destroyed){return}if(p[0]){h.maybeFireSelectionChange(p[1]>0&&!m);return}else{j=p[1]>0}}c=function(){if(!b.getCount()){h.selectionStart=f}b.add(f);j=true};for(d=0;d<g;d++){f=a[d];if(h.isSelected(f)){continue}h.onSelectChange(f,true,m,c);if(h.destroyed){return}}h.lastSelected=f;h.maybeFireSelectionChange(j&&!m)},deselectDuringSelect:function(d,j){var h=this,a=h.selected.getRange(),g=a.length,c=0,f=false,m,b;h.suspendChanges();h.deselectingDuringSelect=true;for(b=0;b<g;++b){m=a[b];if(!Ext.Array.contains(d,m)){if(h.doDeselect(m,j)){++c}else{f=true}}if(h.destroyed){f=true;c=0;break}}h.deselectingDuringSelect=false;h.resumeChanges();return[f,c]},doDeselect:function(a,m){var j=this,b=j.selected,d=0,h,f,o=0,g=0,c;if(j.locked||!j.store){return false}if(typeof a==="number"){f=j.store.getAt(a);if(!f){return false}a=[f]}else{if(!Ext.isArray(a)){a=[a]}}c=function(){++g;b.remove(f);if(f===j.selectionStart){j.selectionStart=null}};h=a.length;j.suspendChanges();for(;d<h;d++){f=a[d];if(j.isSelected(f)){if(j.lastSelected===f){j.lastSelected=b.last()}++o;j.onSelectChange(f,false,m,c);if(j.destroyed){return false}}}j.resumeChanges();j.maybeFireSelectionChange(g>0&&!m);return g===o},doSingleSelect:function(a,b){var d=this,g=false,c=d.selected,f;if(d.locked){return}if(d.isSelected(a)){return}f=function(){if(c.getCount()){d.suspendChanges();var h=d.deselectDuringSelect([a],b);if(d.destroyed){return}d.resumeChanges();if(h[0]){return false}}d.lastSelected=a;if(!c.getCount()){d.selectionStart=a}c.add(a);g=true};d.onSelectChange(a,true,b,f);if(g&&!d.destroyed){d.maybeFireSelectionChange(!b)}},maybeFireSelectionChange:function(a){var b=this;if(a&&!b.suspendChange){b.fireEvent("selectionchange",b,b.getSelection())}},getLastSelected:function(){return this.lastSelected},getSelection:function(){return this.selected.getRange()},getSelectionMode:function(){return this.selectionMode},setSelectionMode:function(a){a=a?a.toUpperCase():"SINGLE";this.selectionMode=this.modes[a]?a:"SINGLE"},isLocked:function(){return this.locked},setLocked:function(a){this.locked=!!a},isRangeSelected:function(d,c){var g=this,b=g.store,f,a;a=g.normalizeRowRange(d,c);d=a[0];c=a[1];for(f=d;f<=c;f++){if(!g.isSelected(b.getAt(f))){return false}}return true},isSelected:function(a){a=Ext.isNumber(a)?this.store.getAt(a):a;return this.selected.contains(a)},hasSelection:function(){var a=this.getSelected();return !!(a&&a.getCount())},refresh:function(){var p=this,s=p.store,h=[],o=[],g=p.getSelection(),j=g.length,c=p.getSelected(),q,m,a,r,b,f;if(!s||!(c.isCollection||c.isRows)||!c.getCount()){return}a=s.getData();if(a.getSource){m=a.getSource();if(m){a=m}}p.refreshing=true;c.beginUpdate();p.suspendChanges();for(f=0;f<j;f++){r=g[f];b=a.get(r.getId());if(b){h.push(b)}else{if(!p.pruneRemoved){o.push(r)}}if(p.mode==="SINGLE"&&o.length){break}}if(c.getCount()!==(h.length+o.length)){q=true}p.clearSelections();if(h.length){p.doSelect(h,false,true)}if(o.length){c.add(o);if(!p.lastSelected){p.lastSelected=o[o.length-1]}}p.resumeChanges();if(q){c.endUpdate()}else{c.updating--}p.refreshing=false;p.maybeFireSelectionChange(q)},clearSelections:function(){var a=this.getSelected();if(a){a.clear()}this.lastSelected=null},onStoreAdd:Ext.emptyFn,onStoreClear:function(){if(!this.store.isLoading()&&this.hasSelection()){this.clearSelections();this.maybeFireSelectionChange(true)}},onStoreRemove:function(m,b,f,o){var j=this,a=b,d,g,c,h;if(j.selectionStart&&Ext.Array.contains(b,j.selectionStart)){j.selectionStart=null}if(o||j.locked||!j.pruneRemoved){return}h=m.isMoving(null,true);if(h){a=null;for(d=0,g=b.length;d<g;++d){c=b[d];if(!h[c.id]){(a||(a=[])).push(c)}}}if(a){j.deselect(a)}},onPageRemove:function(b,a,c){this.onStoreRemove(this.store,c)},onPageAdd:function(d,c,f){var a=f.length,g,b;for(g=0;g<a;g++){b=f[g];if(this.selected.get(b.id)){this.selected.replace(b)}}},getCount:function(){return this.selected.getCount()},onUpdate:Ext.emptyFn,destroy:function(){var a=this;a.clearSelections();a.bindStore(null);a.selected=Ext.destroy(a.selected);Ext.mixin.Observable.prototype.destroy.call(this)},onStoreUpdate:Ext.emptyFn,onIdChanged:function(a,d,c,b){this.selected.updateKey(d,c)},onStoreRefresh:function(){this.updateSelectedInstances(this.selected)},updateSelectedInstances:function(f){var m=this,p=m.getStore(),o=m.lastSelected,a=0,c=m.pruneRemovedOnRefresh(),j,b,g,q,d,h;if(p.isBufferedStore){return}j=f.getRange();b=j.length;if(o){m.lastSelected=p.getById(o.id);h=m.lastSelected!==o}m.refreshing=true;for(g=0;g<b;++g){q=j[g];d=p.getById(q.id);if(d){if(d!==q){f.replace(d)}}else{if(c){f.remove(q);++a}}}m.refreshing=false;m.maybeFireSelectionChange(a>0);if(h){m.fireEvent("lastselectedchanged",m,m.getSelection(),m.lastSelected)}},pruneRemovedOnRefresh:function(){return this.pruneRemoved},onStoreLoad:Ext.emptyFn,onSelectChange:function(a,d,c,g){var f=this,b=d?"select":"deselect";if((c||f.fireEvent("before"+b,f,a))!==false&&g()!==false){if(!c){f.fireEvent(b,f,a)}}},onEditorKey:Ext.emptyFn,beforeViewRender:function(a){Ext.Array.include(this.views||(this.views=[]),a)},onHeaderClick:Ext.emptyFn,resolveListenerScope:function(c){var a=this.view,b;if(a){b=a.resolveSatelliteListenerScope(this,c)}return b||Ext.mixin.Observable.prototype.resolveListenerScope.call(this,c)},bindComponent:Ext.emptyFn,privates:{onBeforeNavigate:Ext.privateFn,selectWithEventMulti:function(j,o,d){var p=this,f=o.shiftKey,a=o.ctrlKey,c=f?(p.getSelectionStart()):null,g=p.getSelection(),m=g.length,b,h,q;if(f&&c){p.selectRange(c,j,a)}else{if(a&&d){if(p.allowDeselect){p.doDeselect(j,false)}}else{if(a){p.doSelect(j,true,false)}else{if(d&&!f&&!a&&m>1){if(p.allowDeselect){b=[];for(h=0;h<m;++h){q=g[h];if(q!==j){b.push(q)}}p.doDeselect(b)}}else{if(!d){p.doSelect(j,false)}}}}}},selectWithEventSimple:function(a,c,b){if(b){this.doDeselect(a)}else{this.doSelect(a,true)}},selectWithEventSingle:function(b,f,c){var d=this,a=d.allowDeselect;if(a&&!f.ctrlKey){a=d.toggleOnClick}if(a&&c){d.doDeselect(b)}else{d.doSelect(b,false)}}}},1,0,0,0,["selection.abstract"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable]],[Ext.selection,"Model",Ext,"AbstractSelectionModel"],0));(Ext.cmd.derive("Ext.selection.DataViewModel",Ext.selection.Model,{deselectOnContainerClick:true,bindComponent:function(a){var c=this,b;if(c.view!==a){if(c.view){c.navigationModel=null;Ext.destroy(c.viewListeners,c.navigationListeners)}c.view=a;if(a){b=c.getViewListeners();b.scope=c;b.destroyable=true;c.navigationModel=a.getNavigationModel();c.viewListeners=a.on(b);c.navigationListeners=c.navigationModel.on({navigate:c.onNavigate,scope:c,destroyable:true})}}},getViewListeners:function(){var a=this,b={};b[a.view.triggerCtEvent]=a.onContainerClick;return b},onUpdate:function(b){var a=this.view;if(a&&this.isSelected(b)){a.onItemSelect(b)}},onContainerClick:function(){if(this.deselectOnContainerClick){this.deselectAll()}},onSelectChange:function(b,g,f,j){var h=this,a=h.view,d=g?"select":"deselect",c=h.store.indexOf(b);if((f||h.fireEvent("before"+d,h,b,c))!==false&&j()!==false){if(a){if(g){a.onItemSelect(b)}else{a.onItemDeselect(b)}}if(!f){h.fireEvent(d,h,b,c)}}},destroy:function(){this.bindComponent();Ext.destroy(this.keyNav);Ext.selection.Model.prototype.destroy.call(this)}},0,0,0,0,["selection.dataviewmodel"],0,[Ext.selection,"DataViewModel"],0));(Ext.cmd.derive("Ext.view.NavigationModel",Ext.Base,{config:{store:null},focusCls:"x-view-item-focused",constructor:function(){this.mixins.observable.constructor.call(this)},bindComponent:function(a){if(this.view!==a){this.view=a;this.bindView(a)}},bindView:function(a){var c=this,d=a.dataSource,b;c.initKeyNav(a);if(!d.isEmptyStore){c.setStore(d)}b=c.getViewListeners();b.destroyable=true;c.viewListeners=c.viewListeners||[];c.viewListeners.push(a.on(b))},updateStore:function(a){this.mixins.storeholder.bindStore.apply(this,[a])},getViewListeners:function(){var a=this;return{containermousedown:a.onContainerMouseDown,itemmousedown:a.onItemMouseDown,itemclick:a.onItemClick,itemcontextmenu:a.onItemMouseDown,scope:a}},initKeyNav:function(a){var b=this;b.keyNav=new Ext.util.KeyNav({target:a,ignoreInputFields:true,eventName:"itemkeydown",defaultEventAction:"stopEvent",processEvent:b.processViewEvent,up:b.onKeyUp,down:b.onKeyDown,right:b.onKeyRight,left:b.onKeyLeft,pageDown:b.onKeyPageDown,pageUp:b.onKeyPageUp,home:b.onKeyHome,end:b.onKeyEnd,space:b.onKeySpace,enter:b.onKeyEnter,A:{ctrl:true,handler:b.onSelectAllKeyPress},scope:b})},processViewEvent:function(b,a,f,c,d){return d},addKeyBindings:function(a){this.keyNav.addBindings(a)},enable:function(){this.keyNav.enable();this.disabled=false},disable:function(){this.keyNav.disable();this.disabled=true},onContainerMouseDown:function(a,b){if(b.pointerType==="mouse"&&Ext.getScrollbarSize().width){if(!a.el.getClientRegion().contains(b.getPoint())){b.preventDefault()}}},onItemMouseDown:function(b,a,f,d,c){if(c.pointerType!=="touch"){this.setPosition(d)}},onItemClick:function(c,b,f,d,a){if(this.record===b){this.fireNavigateEvent(a)}else{this.setPosition(d,a)}},setPosition:function(c,h,o,d){var j=this,m=j.view,f=m.getSelectionModel(),a=m.dataSource,g,b;if(c==null||!m.all.getCount()){j.record=j.recordIndex=null}else{if(typeof c==="number"){b=Math.max(Math.min(c,a.getCount()-1),0);g=a.getAt(c)}else{if(c.isEntity){g=a.getById(c.id);b=a.indexOf(g);if(b===-1){g=a.getAt(0);b=0}}else{if(c.tagName){g=m.getRecord(c);b=a.indexOf(g)}else{g=b=null}}}}if(g===j.record){j.recordIndex=b;return j.focusPosition(b)}if(j.item){j.item.removeCls(j.focusCls)}j.previousRecordIndex=j.recordIndex;j.previousRecord=j.record;j.previousItem=j.item;j.recordIndex=b;j.record=g;d=d||j.record===j.lastFocused;if(g){j.focusPosition(j.recordIndex)}else{j.item=null}if(!o){f.fireEvent("focuschange",f,j.previousRecord,j.record)}if(!d&&h){j.fireNavigateEvent(h)}},focusPosition:function(a){var b=this;if(a!=null&&a!==-1){if(a.isEntity){a=b.view.dataSource.indexOf(a)}b.item=b.view.all.item(a);if(b.item){b.lastFocused=b.record;b.lastFocusedIndex=b.recordIndex;b.focusItem(b.item)}else{b.record=null}}else{b.item=null}},focusItem:function(a){a.addCls(this.focusCls);a.focus()},getPosition:function(){return this.record?this.recordIndex:null},getRecordIndex:function(){return this.recordIndex},getItem:function(){return this.item},getRecord:function(){return this.record},getLastFocused:function(){if(this.view.dataSource.indexOf(this.lastFocused)===-1){return null}return this.lastFocused},onKeyUp:function(b){var a=this.recordIndex-1;if(a<0){a=this.view.all.getCount()-1}this.setPosition(a,b)},onKeyDown:function(b){var a=this.recordIndex+1;if(a>this.view.all.getCount()-1){a=0}this.setPosition(a,b)},onKeyRight:function(b){var a=this.recordIndex+1;if(a>this.view.all.getCount()-1){a=0}this.setPosition(a,b)},onKeyLeft:function(b){var a=this.recordIndex-1;if(a<0){a=this.view.all.getCount()-1}this.setPosition(a,b)},onKeyPageDown:Ext.emptyFn,onKeyPageUp:Ext.emptyFn,onKeyHome:function(a){this.setPosition(0,a)},onKeyEnd:function(a){this.setPosition(this.view.all.getCount()-1,a)},onKeySpace:function(a){this.fireNavigateEvent(a)},onKeyEnter:function(a){a.stopEvent();a.view.fireEvent("itemclick",a.view,a.record,a.item,a.recordIndex,a)},onSelectAllKeyPress:function(a){this.fireNavigateEvent(a)},fireNavigateEvent:function(b){var a=this;a.fireEvent("navigate",{navigationModel:a,keyEvent:b,previousRecordIndex:a.previousRecordIndex,previousRecord:a.previousRecord,previousItem:a.previousItem,recordIndex:a.recordIndex,record:a.record,item:a.item})},destroy:function(){var a=this;a.setStore(null);Ext.destroy(a.viewListeners,a.keyNav);a.keyNav=a.viewListeners=a.dataSource=a.lastFocused=null;a.callParent()}},1,0,0,0,["view.navigation.default"],[[Ext.util.Observable.prototype.mixinId||Ext.util.Observable.$className,Ext.util.Observable],[Ext.mixin.Factoryable.prototype.mixinId||Ext.mixin.Factoryable.$className,Ext.mixin.Factoryable],[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.view,"NavigationModel"],0));(Ext.cmd.derive("Ext.view.AbstractView",Ext.Component,{inheritableStatics:{getRecord:function(a){return this.getBoundView(a).getRecord(a)},getBoundView:function(a){return Ext.getCmp(a.getAttribute("data-boundView"))}},defaultBindProperty:"store",renderBuffer:document.createElement("div"),statics:{updateDelay:200,queueRecordChange:function(q,s,h,b,c){var p=this,a=p.changeQueue||(p.changeQueue={}),j=h.internalId,o,g,m,d,t,r,f;o=a[j]||(a[j]={operation:b,record:h,data:{},views:[]});g=o.data;Ext.Array.include(o.views,q);if(c&&(m=c.length)){for(d=0;d<m;d++){t=c[d];r=h.data[t];if(g.hasOwnProperty(t)){if(h.isEqual(g[t],r)){delete g[t];f=true}}else{g[t]=r}}if(f&&!Ext.Object.getKeys(g).length){delete a[j]}}else{Ext.apply(g,h.data)}if(!p.flushQueueTask){p.flushQueueTask=Ext.util.TaskManager.newTask({run:Ext.global.requestAnimationFrame?Ext.Function.createAnimationFrame(p.onFlushTick,p):Ext.Function.bind(p.onFlushTick,p),interval:Ext.view.AbstractView.updateDelay,repeat:1})}p.flushQueueTask.start()},onFlushTick:function(){Ext.AnimationQueue.start(this.flushChangeQueue,this)},flushChangeQueue:function(){var f=this,g,a,j,d,h,c,b;if(Ext.isScrolling){f.flushQueueTask.start();return}j=f.changeQueue;this.changeQueue={};for(h in j){d=j[h];g=d.views;a=g.length;for(c=0;c<a;c++){b=g[c];if(!b.destroyed){b.handleUpdate(b.dataSource,d.record,d.operation,Ext.Object.getKeys(d.data))}}}Ext.AnimationQueue.stop(f.flushChangeQueue,f)}},config:{selection:null,store:"ext-empty-store",navigationModel:{type:"default"},selectionModel:{type:"dataviewmodel"}},publishes:["selection"],twoWayBindable:["selection"],throttledUpdate:false,deferInitialRefresh:false,itemCls:"x-dataview-item",loadingText:"Loading...",loadMask:true,loadingUseMsg:true,selectedItemCls:"x-item-selected",emptyText:"",deferEmptyText:true,trackOver:false,blockRefresh:false,preserveScrollOnRefresh:false,preserveScrollOnReload:false,ariaRole:"listbox",itemAriaRole:"option",last:false,focusable:true,tabIndex:0,triggerEvent:"itemclick",triggerCtEvent:"containerclick",refreshNeeded:true,updateSuspendCounter:0,addCmpEvents:Ext.emptyFn,constructor:function(a){if(a&&a.selModel){a.selectionModel=a.selModel}Ext.Component.prototype.constructor.call(this,a)},initComponent:function(){var d=this,b=Ext.isDefined,f=d.itemTpl,c={},a;if(f){if(Ext.isArray(f)){if(typeof f[f.length-1]!=="string"){f=f.slice(0);c=f.pop()}f=f.join("")}else{if(Ext.isObject(f)){c=Ext.apply(c,f.initialConfig);f=f.html}}if(!d.itemSelector){d.itemSelector="."+d.itemCls}f=Ext.String.format('<tpl for="."><div class="{0}" role="{2}">{1}</div></tpl>',d.itemCls,f,d.itemAriaRole);d.tpl=new Ext.XTemplate(f,c)}Ext.Component.prototype.initComponent.call(this);d.tpl=d.getTpl("tpl");if(d.overItemCls){d.trackOver=true}d.addCmpEvents();a=d.store=Ext.data.StoreManager.lookup(d.store||"ext-empty-store");if(!d.dataSource){d.dataSource=a}d.bindStore(a,true);d.getNavigationModel().bindComponent(this);if(!d.all){d.all=new Ext.CompositeElementLite()}d.scrollState={top:0,left:0};d.savedTabIndexAttribute="data-savedtabindex-"+d.id},getElConfig:function(){var a=this.mixins.renderable.getElConfig.call(this);if(this.focusable){a.tabIndex=0}return a},onRender:function(){var a=this.loadMask;Ext.Component.prototype.onRender.apply(this,arguments);if(a){this.createMask(a)}},beforeLayout:function(){var a=this;Ext.Component.prototype.beforeLayout.apply(this,arguments);if(a.refreshNeeded&&!a.pendingRefresh){if(a.refreshCounter){a.refresh()}else{a.doFirstRefresh(a.dataSource)}}},onMaskBeforeShow:function(){var b=this,a=b.loadingHeight;if(a&&a>b.getHeight()){b.hasLoadingHeight=true;b.oldMinHeight=b.minHeight;b.minHeight=a;b.updateLayout()}},onMaskHide:function(){var a=this;if(!a.destroying&&a.hasLoadingHeight){a.minHeight=a.oldMinHeight;a.updateLayout();delete a.hasLoadingHeight}},beforeRender:function(){Ext.Component.prototype.beforeRender.apply(this,arguments);this.getSelectionModel().beforeViewRender(this)},afterRender:function(){Ext.Component.prototype.afterRender.apply(this,arguments);if(this.focusable){this.focusEl=this.el}},getRefItems:function(){var b=this.loadMask,a=[];if(b&&b.isComponent){a.push(b)}return a},getSelection:function(){return this.getSelectionModel().getSelection()},updateSelection:function(a){var b=this,c;if(!b.ignoreNextSelection){b.ignoreNextSelection=true;c=b.getSelectionModel();if(a){c.select(a)}else{c.deselectAll()}b.ignoreNextSelection=false}},updateBindSelection:function(a,c){var d=this,b=null;if(!d.ignoreNextSelection){d.ignoreNextSelection=true;if(c.length){b=a.getLastSelected();d.hasHadSelection=true}if(d.hasHadSelection){d.setSelection(b)}d.ignoreNextSelection=false}},applySelectionModel:function(b,g){var f=this,d=f.grid,h,c,a;if(g){g.un({scope:f,selectionchange:f.updateBindSelection,lastselectedchanged:f.updateBindSelection,select:f.ariaSelect,deselect:f.ariaDeselect});Ext.destroy(f.selModelRelayer);b=Ext.Factory.selection(b)}else{if(b&&b.isSelectionModel){b.locked=f.disableSelection}else{if(f.simpleSelect){h="SIMPLE"}else{if(f.multiSelect){h="MULTI"}else{h="SINGLE"}}if(typeof b==="string"){b={type:b}}b=Ext.Factory.selection(Ext.apply({allowDeselect:f.allowDeselect||f.multiSelect,mode:h,locked:f.disableSelection},b))}}if(b.mode!=="SINGLE"){a=(d||f).ariaEl.dom;if(a){a.setAttribute("aria-multiselectable",true)}else{if(!d){c=f.ariaRenderAttributes||(f.ariaRenderAttributes={});c["aria-multiselectable"]=true}}}f.selModelRelayer=f.relayEvents(b,["selectionchange","beforeselect","beforedeselect","select","deselect","focuschange"]);b.on({scope:f,lastselectedchanged:f.updateBindSelection,selectionchange:f.updateBindSelection,select:f.ariaSelect,deselect:f.ariaDeselect});return b},updateSelectionModel:function(a){this.selModel=a},applyNavigationModel:function(a){return Ext.Factory.viewNavigation(a)},onFocusEnter:function(d){var c=this,b=c.getNavigationModel(),a;c.toggleChildrenTabbability(false);if(!c.itemFocused&&c.all.getCount()){a=b.getLastFocused();b.setPosition(a||0,d.event,null,!a);c.itemFocused=b.getPosition()!=null}if(c.itemFocused){this.el.dom.setAttribute("tabIndex","-1")}Ext.Component.prototype.onFocusEnter.call(this,d)},onFocusLeave:function(b){var a=this;if(a.itemFocused&&!a.refreshing){a.getNavigationModel().setPosition(null,b.event,null,true);a.itemFocused=false;a.el.dom.setAttribute("tabIndex",0)}Ext.Component.prototype.onFocusLeave.call(this,b)},ariaSelect:function(b,a){var c=this.getNode(a);if(c){c.setAttribute("aria-selected",true)}},ariaDeselect:function(b,a){var c=this.getNode(a);if(c){c.removeAttribute("aria-selected")}},onRemoved:function(a){Ext.Component.prototype.onRemoved.call(this,a);if(!a){this.onFocusLeave({})}},refresh:function(){var m=this,j=m.all,p=j.getCount(),h=m.refreshCounter,o,c,b,g=m.getSelectionModel(),f,d=h&&j.getCount()&&m.preserveScrollOnRefresh&&m.getScrollable(),a;if(!m.rendered||m.destroyed){return}if(!m.hasListeners.beforerefresh||m.fireEvent("beforerefresh",m)!==false){m.refreshing=true;f=m.saveFocusState();o=m.getTargetEl();b=m.getViewRange();c=o.dom;if(d){a=d.getPosition();if(!(a.x||a.y)){a=null}}if(h){m.clearViewEl();m.refreshCounter++}else{m.refreshCounter=1}m.tpl.append(o,m.collectData(b,j.startIndex||0));if(b.length<1){m.addEmptyText();j.clear()}else{m.collectNodes(o.dom);m.updateIndexes(0)}f();if(m.refreshSelmodelOnRefresh!==false){g.refresh()}m.refreshNeeded=false;m.refreshSize(j.getCount()!==p);m.fireEvent("refresh",m,b);if(d){d.scrollTo(a)}if(!m.viewReady){m.viewReady=true;m.fireEvent("viewready",m)}m.refreshing=false;m.refreshScroll();m.cleanupData()}},addEmptyText:function(){var b=this,a=b.getStore();if(b.emptyText&&!a.isLoading()&&(!b.deferEmptyText||b.refreshCounter>1||a.isLoaded())){b.emptyEl=Ext.core.DomHelper.insertHtml("beforeEnd",b.getTargetEl().dom,b.emptyText)}},getViewRange:function(){return this.dataSource.getRange()},refreshSize:function(d){var c=this,b=c.getSizeModel(),a=c.getScrollable();if(b.height.shrinkWrap||b.width.shrinkWrap||d){c.updateLayout()}else{if(c.touchScroll&&!c.bufferedRenderer){if(a){a.refresh()}else{c.on({boxready:c.refreshScroll,scope:c,single:true})}}}},afterFirstLayout:function(c,b){var d=this,a=d.getScrollable();if(a){a.on({scroll:d.onViewScroll,scrollend:d.onViewScrollEnd,scope:d,onFrame:!!Ext.global.requestAnimationFrame})}Ext.Component.prototype.afterFirstLayout.call(this,c,b)},clearViewEl:function(){var b=this,c=b.getTargetEl(),a=b.getNodeContainer()===c;b.clearEmptyEl();b.all.clear(!a);if(a){c.dom.innerHTML=""}},clearEmptyEl:function(){var a=this.emptyEl;if(a){Ext.removeNode(a)}this.emptyEl=null},onViewScroll:function(b,a,c){this.fireEvent("scroll",this,a,c)},onViewScrollEnd:function(b,a,c){this.fireEvent("scrollend",this,a,c)},saveScrollState:function(){var a=this,b=a.scrollState;if(a.rendered){b.left=a.getScrollX();b.top=a.getScrollY()}},restoreScrollState:function(){var a=this,b=a.scrollState;if(a.rendered){a.setScrollX(b.left);a.setScrollY(b.top)}},prepareData:function(f,d,c){var b,a,g;if(c){b=c.getAssociatedData();for(a in b){if(b.hasOwnProperty(a)){if(!g){f=Ext.Object.chain(f);g=true}f[a]=b[a]}}}return f},collectData:function(c,g){var f=[],d=0,a=c.length,b;for(;d<a;d++){b=c[d];f[d]=this.prepareData(b.data,g+d,b)}return f},cleanupData:Ext.emptyFn,bufferRender:function(d,f){var h=this,j=h.renderBuffer,b=document.createDocumentFragment(),c,a,g;h.tpl.overwrite(j,h.collectData(d,f));c=Ext.fly(j).query(h.getItemSelector());for(g=0,a=c.length;g<a;g++){b.appendChild(c[g])}return{fragment:b,children:c}},nodeContainerSelector:null,getNodeContainer:function(){var b=this.getTargetEl(),a=this.nodeContainerSelector;return a?b.down(a,true):b},getNodeContainerSelector:function(){return this.nodeContainerSelector},onUpdate:function(d,b,c,h,f){var g=this,a=f&&f.filtered;if(!a&&g.getNode(b)){if(g.throttledUpdate){g.statics().queueRecordChange(g,d,b,c,h)}else{g.handleUpdate.apply(g,arguments)}}},handleUpdate:function(c,a){var g=this,d,f,b=g.getSelectionModel();if(g.viewReady){d=g.dataSource.indexOf(a);if(d>-1){if(g.getNode(a)){f=g.bufferRender([a],d).children[0];g.all.replaceElement(d,f,true);g.updateIndexes(d,d);b.onUpdate(a);g.refreshSizePending=true;if(b.isSelected(a)){g.onItemSelect(a)}if(g.hasListeners.itemupdate){g.fireEvent("itemupdate",a,d,f)}return f}}}},onReplace:function(o,q,b,c){var j=this,m=j.all,g=j.getSelectionModel(),r=q,t,s,h,a,p,d,f;if(j.rendered){t=j.bufferRender(c,q,true);h=t.fragment;a=t.children;s=m.item(q);if(s){m.item(q).insertSibling(h,"before",true)}else{j.appendNodes(h)}m.insert(q,a);if(b.length){f=j.saveFocusState()}q+=c.length;d=q+b.length-1;p=m.removeRange(q,d,true);if(j.refreshSelmodelOnRefresh!==false){g.refresh()}j.updateIndexes(q);if(j.hasListeners.itemremove){j.fireEvent("itemremove",b,r,p,j)}if(j.hasListeners.itemadd){j.fireEvent("itemadd",c,r,a)}f();j.refreshSize()}},onAdd:function(d,c,f){var g=this,b,a=g.getSelectionModel();if(g.rendered){if(g.all.getCount()===0){g.refresh();b=g.all.slice()}else{b=g.doAdd(c,f);if(g.refreshSelmodelOnRefresh!==false){a.refresh()}g.updateIndexes(f);g.refreshSizePending=true}if(g.hasListeners.itemadd){g.fireEvent("itemadd",c,f,b)}}},appendNodes:function(a){var b=this.all,c=b.getCount();if(this.nodeContainerSelector){this.getNodeContainer().appendChild(a)}else{b.item(c-1).insertSibling(a,"after")}},doAdd:function(c,f){var h=this,o=h.bufferRender(c,f,true),g=o.fragment,b=o.children,j=h.all,d=j.getCount(),m=j.startIndex||0,a=j.endIndex||d-1;if(d===0||f>a){h.appendNodes(g)}else{if(f<=m){j.item(m).insertSibling(g,"before",true)}else{j.item(f).insertSibling(b,"before",true)}}j.insert(f,b);return b},onRemove:function(p,d,j){var m=this,q=m.all,b=m.hasListeners.itemremove,o,f,g,a,c,h;if(q.getCount()){if(m.dataSource.getCount()===0){if(b){m.fireEvent("itemremove",d,j,m.getNodes(j,j+d.length-1))}m.refresh()}else{h=m.saveFocusState();if(b){a=[]}for(f=d.length-1;f>=0;--f){g=d[f];o=j+f;if(a){c=q.item(o);a[f]=c?c.dom:undefined}if(q.item(o)){m.doRemove(g,o)}}if(b){m.fireEvent("itemremove",d,j,a,m)}h();m.updateIndexes(j)}m.refreshSizePending=true}},doRemove:function(a,b){this.all.removeElement(b,true)},saveFocusState:function(){var d=this,a=d.dataSource||d.store,b=d.getNavigationModel(),c=b.recordIndex,f=b.record;if(d.el.contains(Ext.Element.getActiveElement())){d.el.dom.focus();return function(){if(a.getCount()){c=Math.min(c,d.all.getCount()-1);b.setPosition(a.contains(f)?f:c,null,null,true)}}}return Ext.emptyFn},refreshNode:function(a){if(Ext.isNumber(a)){a=this.store.getAt(a)}this.onUpdate(this.dataSource,a)},updateIndexes:function(h,g){var b=this.all.elements,f,a=this.getViewRange(),d,c=this.id;h=h||0;g=g||((g===0)?0:(b.length-1));for(d=h;d<=g;d++){f=b[d];f.setAttribute("data-recordIndex",d);f.setAttribute("data-recordId",a[d].internalId);f.setAttribute("data-boundView",c)}},bindStore:function(b,c){var f=this,a=f.getSelectionModel(),d=f.getNavigationModel();a.bindStore(b);a.bindComponent(b?f:null);f.mixins.storeholder.bindStore.apply(f,arguments);d.setStore(b);if(b&&f.componentLayoutCounter){f.doFirstRefresh(b,!c)}},doFirstRefresh:function(a,c){var b=this;if(b.deferInitialRefresh&&!c){Ext.defer(b.doFirstRefresh,1,b,[a,true])}else{if(a&&!a.isLoading()){b.refresh()}}},onUnbindStore:function(a){this.setMaskBind(null);if(this.dataSource===a){this.dataSource=null}},onBindStore:function(a,c){var b=this;if(b.store.isBufferedStore){b.store.preserveScrollOnReload=b.preserveScrollOnReload}if(c&&c.isBufferedStore){delete c.preserveScrollOnReload}b.setMaskBind(a);if(!b.dataSource){b.dataSource=a}},setMaskBind:function(b){var a=this.loadMask;if(this.rendered&&a&&b&&!a.bindStore){a=this.createMask()}if(a&&a.bindStore){a.bindStore(b)}},getStoreListeners:function(){var a=this;return{refresh:a.onDataRefresh,replace:a.onReplace,add:a.onAdd,remove:a.onRemove,update:a.onUpdate,clear:a.onDataRefresh,beginupdate:a.onBeginUpdate,endupdate:a.onEndUpdate}},onBeginUpdate:function(){++this.updateSuspendCounter;Ext.suspendLayouts()},onEndUpdate:function(){var a=this;if(a.updateSuspendCounter){--a.updateSuspendCounter}Ext.resumeLayouts(true);if(a.refreshSizePending){a.refreshSize(true);a.refreshSizePending=false}},onDataRefresh:function(a){var c=this,b=c.preserveScrollOnRefresh;if(a.loadCount>c.lastRefreshLoadCount){c.preserveScrollOnRefresh=c.preserveScrollOnReLoad}c.refreshView();c.preserveScrollOnRefresh=b;c.lastRefreshLoadCount=a.loadCount},refreshView:function(){var b=this,a=b.blockRefresh||!b.rendered||b.up("[collapsed],[isCollapsingOrExpanding],[hidden]");if(a){b.refreshNeeded=true}else{if(b.bufferedRenderer){b.bufferedRenderer.refreshView()}else{b.refresh()}}},findItemByChild:function(a){return Ext.fly(a).findParent(this.getItemSelector(),this.getTargetEl())},findTargetByEvent:function(a){return a.getTarget(this.getItemSelector(),this.getTargetEl())},getSelectedNodes:function(){var b=[],a=this.getSelectionModel().getSelection(),d=a.length,c=0;for(;c<d;c++){b.push(this.getNode(a[c]))}return b},getRecords:function(c){var b=[],d=0,a=c.length,f=this.dataSource.data;for(;d<a;d++){b[b.length]=f.getByKey(c[d].getAttribute("data-recordId"))}return b},getRecord:function(a){return this.dataSource.getByInternalId(Ext.getDom(a).getAttribute("data-recordId"))},isSelected:function(b){var a=this.getRecord(b);return this.getSelectionModel().isSelected(a)},select:function(b,c,a){this.getSelectionModel().select(b,c,a)},deselect:function(b,a){this.getSelectionModel().deselect(b,a)},getNode:function(b){var c=this,a;if(c.rendered&&(b||b===0)){if(Ext.isString(b)){a=document.getElementById(b)}else{if(b.isModel){a=c.getNodeByRecord(b)}else{if(Ext.isNumber(b)){a=c.all.elements[b]}else{if(b.target&&b.target.nodeType){b=b.target}a=Ext.fly(b).findParent(c.itemSelector,c.getTargetEl())}}}}return a||null},getNodeByRecord:function(a){var b=this.store.indexOf(a);return this.all.elements[b]||null},getNodes:function(c,a){var b=this.all;if(a!==undefined){a++}return b.slice(c,a)},indexOf:function(a){a=this.getNode(a);if(!a&&a!==0){return -1}if(a.getAttribute("data-recordIndex")){return Number(a.getAttribute("data-recordIndex"))}return this.all.indexOf(a)},onDestroy:function(){var b=this,a=b.updateSuspendCounter;b.all.clear();b.emptyEl=null;Ext.Component.prototype.onDestroy.call(this);b.bindStore(null);b.store=b.dataSource=b.storeListeners=null;if(b.selModelRelayer){b.selModelRelayer.destroy();b.selModelRelayer=null}Ext.destroy(b.navigationModel,b.selectionModel);b.navigationModel=b.selectionModel=b.selModel=null;b.loadMask=null;while(a--){Ext.resumeLayouts(true)}},onItemSelect:function(a){var b=this.getNode(a);if(b){Ext.fly(b).addCls(this.selectedItemCls)}},onItemDeselect:function(a){var b=this.getNode(a);if(b){Ext.fly(b).removeCls(this.selectedItemCls)}},getItemSelector:function(){return this.itemSelector},addItemCls:function(b,a){var c=this.getNode(b);if(c){Ext.fly(c).addCls(a)}},removeItemCls:function(b,a){var c=this.getNode(b);if(c){Ext.fly(c).removeCls(a)}},setStore:function(a){var b=this;if(b.store!==a){if(b.isConfiguring){b.store=a}else{b.bindStore(a,false)}}},privates:{toggleChildrenTabbability:function(b){var a=this.getTargetEl();if(b){a.restoreTabbableState(true)}else{a.saveTabbableState({skipSelf:true,includeSaved:false})}},collectNodes:function(c){var b=this.all,a={role:this.itemAriaRole};b.fill(Ext.fly(c).query(this.getItemSelector()),b.startIndex||0);if(this.focusable){a.tabindex="-1"}b.set(a)},createMask:function(b){var d=this,c=d.getStore(),a;if(c&&!c.isEmptyStore&&!c.loadsSynchronously()){a={target:d,msg:d.loadingText,useMsg:d.loadingUseMsg,store:c};if(d.loadingCls){a.msgCls=d.loadingCls}if(Ext.isObject(b)){a=Ext.apply(a,b)}d.loadMask=new Ext.LoadMask(a);d.loadMask.on({scope:d,beforeshow:d.onMaskBeforeShow,hide:d.onMaskHide})}return d.loadMask},getOverflowEl:function(){return Ext.Component.prototype.getTargetEl.call(this)},getTargetEl:function(){return this.touchScroll?this.getScrollerEl():Ext.Component.prototype.getTargetEl.call(this)}}},1,0,["component","box"],{component:true,box:true},0,[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.view,"AbstractView"],function(){Ext.deprecate("extjs","4.0",function(){Ext.view.AbstractView.override({getSelectionCount:function(){if(Ext.global.console){Ext.global.console.warn("DataView: getSelectionCount will be removed, please interact with the Ext.selection.DataViewModel")}return this.selModel.getSelection().length},getSelectedRecords:function(){if(Ext.global.console){Ext.global.console.warn("DataView: getSelectedRecords will be removed, please interact with the Ext.selection.DataViewModel")}return this.selModel.getSelection()},select:function(a,b,d){if(Ext.global.console){Ext.global.console.warn("DataView: select will be removed, please access select through a DataView's SelectionModel, ie: view.getSelectionModel().select()")}var c=this.getSelectionModel();return c.select.apply(c,arguments)},clearSelections:function(){if(Ext.global.console){Ext.global.console.warn("DataView: clearSelections will be removed, please access deselectAll through DataView's SelectionModel, ie: view.getSelectionModel().deselectAll()")}var a=this.getSelectionModel();return a.deselectAll()}})})}));(Ext.cmd.derive("Ext.view.View",Ext.view.AbstractView,{alternateClassName:"Ext.DataView",inputTagRe:/^textarea$|^input$/i,keyEventRe:/^key/,inheritableStatics:{EventMap:{longpress:"LongPress",mousedown:"MouseDown",mouseup:"MouseUp",click:"Click",dblclick:"DblClick",contextmenu:"ContextMenu",mouseover:"MouseOver",mouseout:"MouseOut",mouseenter:"MouseEnter",mouseleave:"MouseLeave",keydown:"KeyDown",keyup:"KeyUp",keypress:"KeyPress",focus:"Focus"},TouchEventMap:{touchstart:"mousedown",touchend:"mouseup",tap:"click",doubletap:"dblclick"}},afterRender:function(){var a=this;Ext.view.AbstractView.prototype.afterRender.call(this);a.mon(a.el,{scope:a,click:a.handleEvent,longpress:a.handleEvent,mousedown:a.handleEvent,mouseup:a.handleEvent,dblclick:a.handleEvent,contextmenu:a.handleEvent,keydown:a.handleEvent,keyup:a.handleEvent,keypress:a.handleEvent,mouseover:a.handleMouseOver,mouseout:a.handleMouseOut})},getTargetSelector:function(){return this.dataRowSelector||this.itemSelector},handleMouseOver:function(d){var c=this,a=c.getTargetSelector(),b=d.getTarget(a);if(!c.destroyed){if(b){if(c.mouseOverItem!==b&&c.el.contains(b)){c.mouseOverItem=d.item=b;d.newType="mouseenter";c.handleEvent(d)}}else{c.handleEvent(d)}}},handleMouseOut:function(g){var d=this,b=d.getTargetSelector(),c=g.getTarget(b),f=g.getRelatedTarget(b),a;if((c===f)&&!(c===null&&f===null)){return}if(!d.destroyed){if(c&&(a=d.self.getBoundView(c))){g.item=c;g.newType="mouseleave";a.handleEvent(g);a.mouseOverItem=null}else{d.handleEvent(g)}}},handleEvent:function(c){var b=this,a=b.keyEventRe.test(c.type);c.view=b;c.item=c.getTarget(b.itemSelector);if(c.item){c.record=b.getRecord(c.item)}if(b.processUIEvent(c)!==false){b.processSpecialEvent(c)}if(a&&!Ext.fly(c.target).isInputField()){if(c.getKey()===c.SPACE||c.isNavKeyPress(true)){c.preventDefault()}}c.view=null},processItemEvent:Ext.emptyFn,processContainerEvent:Ext.emptyFn,processSpecialEvent:Ext.emptyFn,processUIEvent:function(f){if(!Ext.getBody().isAncestor(f.target)){return}var j=this,m=f.item,o=j.self,a=o.EventMap,g=o.TouchEventMap,d,c=f.record,h=f.type,b=h;if(f.newType){b=f.newType}if(m){b=g[b]||b;d=f.recordIndex=j.indexInStore?j.indexInStore(c):j.indexOf(m);if(!c||j.processItemEvent(c,m,d,f)===false){return false}if((j["onBeforeItem"+a[b]](c,m,d,f)===false)||(j.fireEvent("beforeitem"+b,j,c,m,d,f)===false)||(j["onItem"+a[b]](c,m,d,f)===false)){return false}j.fireEvent("item"+b,j,c,m,d,f)}else{h=g[h]||h;if((j.processContainerEvent(f)===false)||(j["onBeforeContainer"+a[h]](f)===false)||(j.fireEvent("beforecontainer"+h,j,f)===false)||(j["onContainer"+a[h]](f)===false)){return false}j.fireEvent("container"+h,j,f)}return true},onItemMouseEnter:function(a,c,b,d){if(this.trackOver){this.highlightItem(c)}},onItemMouseLeave:function(a,c,b,d){if(this.trackOver){this.clearHighlight()}},onItemMouseDown:Ext.emptyFn,onItemLongPress:Ext.emptyFn,onItemMouseUp:Ext.emptyFn,onItemFocus:Ext.emptyFn,onItemClick:Ext.emptyFn,onItemDblClick:Ext.emptyFn,onItemContextMenu:Ext.emptyFn,onItemKeyDown:Ext.emptyFn,onItemKeyUp:Ext.emptyFn,onItemKeyPress:Ext.emptyFn,onBeforeItemLongPress:Ext.emptyFn,onBeforeItemMouseDown:Ext.emptyFn,onBeforeItemMouseUp:Ext.emptyFn,onBeforeItemFocus:Ext.emptyFn,onBeforeItemMouseEnter:Ext.emptyFn,onBeforeItemMouseLeave:Ext.emptyFn,onBeforeItemClick:Ext.emptyFn,onBeforeItemDblClick:Ext.emptyFn,onBeforeItemContextMenu:Ext.emptyFn,onBeforeItemKeyDown:Ext.emptyFn,onBeforeItemKeyUp:Ext.emptyFn,onBeforeItemKeyPress:Ext.emptyFn,onContainerMouseDown:Ext.emptyFn,onContainerLongPress:Ext.emptyFn,onContainerMouseUp:Ext.emptyFn,onContainerMouseOver:Ext.emptyFn,onContainerMouseOut:Ext.emptyFn,onContainerClick:Ext.emptyFn,onContainerDblClick:Ext.emptyFn,onContainerContextMenu:Ext.emptyFn,onContainerKeyDown:Ext.emptyFn,onContainerKeyUp:Ext.emptyFn,onContainerKeyPress:Ext.emptyFn,onBeforeContainerMouseDown:Ext.emptyFn,onBeforeContainerLongPress:Ext.emptyFn,onBeforeContainerMouseUp:Ext.emptyFn,onBeforeContainerMouseOver:Ext.emptyFn,onBeforeContainerMouseOut:Ext.emptyFn,onBeforeContainerClick:Ext.emptyFn,onBeforeContainerDblClick:Ext.emptyFn,onBeforeContainerContextMenu:Ext.emptyFn,onBeforeContainerKeyDown:Ext.emptyFn,onBeforeContainerKeyUp:Ext.emptyFn,onBeforeContainerKeyPress:Ext.emptyFn,setHighlightedItem:function(c){var b=this,a=b.highlightedItem,d=b.overItemCls;if(a!==c){if(a){Ext.fly(a).removeCls(d);if(Ext.isIE8){b.repaintBorder(a);b.repaintBorder(a.nextSibling)}if(b.hasListeners.unhighlightitem){b.fireEvent("unhighlightitem",b,a)}}b.highlightedItem=c;if(c){Ext.fly(c).addCls(b.overItemCls);if(Ext.isIE8){b.repaintBorder(c.nextSibling)}if(b.hasListeners.highlightitem){b.fireEvent("highlightitem",b,c)}}}},highlightItem:function(a){this.setHighlightedItem(a)},clearHighlight:function(){this.setHighlightedItem(undefined)},handleUpdate:function(b,a){var g=this,f,c,d;if(g.viewReady){f=g.getNode(a);c=Ext.view.AbstractView.prototype.handleUpdate.apply(this,arguments);d=g.highlightedItem;if(d&&d===f){delete g.highlightedItem;if(c){g.highlightItem(c)}}}},refresh:function(){this.clearHighlight();Ext.view.AbstractView.prototype.refresh.apply(this,arguments)},focusNode:function(j){var g=this,f=Ext.fly(g.getNode(j)),d=g.el,a=0,b=0,h=d.getRegion(),c;h.bottom=h.top+d.dom.clientHeight;h.right=h.left+d.dom.clientWidth;if(f){c=f.getRegion();if(c.top<h.top){a=c.top-h.top}else{if(c.bottom>h.bottom){a=c.bottom-h.bottom}}if(c.left<h.left){b=c.left-h.left}else{if(c.right>h.right){b=c.right-h.right}}if(b||a){g.scrollBy(b,a,false)}f.set({tabIndex:-1});f.focus()}},privates:{repaintBorder:function(b){var a=this.getNode(b);if(a){a.className=a.className}}}},0,["dataview"],["component","box","dataview"],{component:true,box:true,dataview:true},["widget.dataview"],0,[Ext.view,"View",Ext,"DataView"],0));(Ext.cmd.derive("Ext.view.BoundListKeyNav",Ext.view.NavigationModel,{navigateOnSpace:true,initKeyNav:function(a){var b=this,c=a.pickerField;if(!b.keyNav){Ext.view.NavigationModel.prototype.initKeyNav.call(this,a);b.keyNav.map.addBinding({key:Ext.event.Event.ESC,fn:b.onKeyEsc,scope:b})}if(!c){return}if(!c.rendered){c.on("render",Ext.Function.bind(b.initKeyNav,b,[a],0),b,{single:true});return}b.fieldKeyNav=new Ext.util.KeyNav({disabled:true,target:c.inputEl,forceKeyDown:true,up:b.onKeyUp,down:b.onKeyDown,right:b.onKeyRight,left:b.onKeyLeft,pageDown:b.onKeyPageDown,pageUp:b.onKeyPageUp,home:b.onKeyHome,end:b.onKeyEnd,tab:b.onKeyTab,space:b.onKeySpace,enter:b.onKeyEnter,A:{ctrl:true,handler:b.onSelectAllKeyPress},priority:1001,scope:b})},processViewEvent:function(b,a,f,c,d){if(d.within(b.listWrap)){return d}if(d.getKey()===d.ESC){if(Ext.fly(d.target).isInputField()){d.target=d.target.parentNode}return d}},enable:function(){this.fieldKeyNav.enable();Ext.view.NavigationModel.prototype.enable.call(this)},disable:function(){this.fieldKeyNav.disable();Ext.view.NavigationModel.prototype.disable.call(this)},onItemMouseDown:function(b,a,f,c,d){Ext.view.NavigationModel.prototype.onItemMouseDown.call(this,b,a,f,c,d);d.preventDefault()},onKeyUp:function(h){var f=this,b=f.view,d=b.all,g=b.highlightedItem,c=g?b.indexOf(g):-1,a=c>0?c-1:d.getCount()-1;f.setPosition(a);h.preventDefault()},onKeyDown:function(h){var f=this,b=f.view,d=b.all,g=b.highlightedItem,c=g?b.indexOf(g):-1,a=c<d.getCount()-1?c+1:0;f.setPosition(a);h.preventDefault()},onKeyLeft:Ext.returnTrue,onKeyRight:Ext.returnTrue,onKeyTab:function(c){var a=this.view,b=a.pickerField;if(a.isVisible()){if(b.selectOnTab){this.selectHighlighted(c)}if(b.collapse){b.collapse()}}return true},onKeyEnter:function(f){var a=this.view,b=a.getSelectionModel(),d=a.pickerField,c=b.getCount();f.stopEvent();this.selectHighlighted(f);if(!d.multiSelect&&c===b.getCount()&&d.collapse){d.collapse()}return false},onKeySpace:function(){if(this.navigateOnSpace){Ext.view.NavigationModel.prototype.onKeySpace.apply(this,arguments)}return true},onKeyEsc:function(){if(this.view.pickerField){this.view.pickerField.collapse()}},focusItem:function(c){var b=this,a=b.view;if(typeof c==="number"){c=a.all.item(c)}if(c){c=c.dom;a.highlightItem(c);a.getScrollable().scrollIntoView(c,false)}},selectHighlighted:function(g){var f=this,b=f.view,a=b.getSelectionModel(),c,d=f.recordIndex;if(b.all.getCount()){c=f.getRecord();if(c){if(g.getKey()===g.ENTER||!a.isSelected(c)){a.selectWithEvent(c,g);if(!b.store.data.contains(c)){f.setPosition(Math.min(d,b.store.getCount()-1))}}}}},destroy:function(){this.fieldKeyNav=Ext.destroy(this.fieldKeyNav);Ext.view.NavigationModel.prototype.destroy.call(this)}},0,0,0,0,["view.navigation.boundlist"],0,[Ext.view,"BoundListKeyNav"],0));(Ext.cmd.derive("Ext.layout.component.BoundList",Ext.layout.component.Auto,{type:"component",beginLayout:function(d){var c=this,a=c.owner,b=a.pagingToolbar;c.scrollPos=a.listWrap.getScroll();Ext.layout.component.Auto.prototype.beginLayout.apply(this,arguments);if(a.floating){d.savedXY=a.getXY();a.setXY([0,-9999])}if(b){d.toolbarContext=d.context.getCmp(b)}d.listContext=d.getEl("listWrap")},beginLayoutCycle:function(b){var a=this.owner;Ext.layout.component.Auto.prototype.beginLayoutCycle.apply(this,arguments);if(b.heightModel.auto){a.el.setHeight("auto");a.listWrap.setHeight("auto")}},getLayoutItems:function(){var a=this.owner.pagingToolbar;return a?[a]:[]},isValidParent:function(){return true},finishedLayout:function(d){var c=this,f=d.savedXY,a=c.owner,b=a.listWrap,g=c.scrollPos;Ext.layout.component.Auto.prototype.finishedLayout.apply(this,arguments);if(f){c.owner.setXY(f)}b.setScrollLeft(g.left);b.setScrollTop(g.top)},measureContentWidth:function(a){return this.owner.listWrap.getWidth()},measureContentHeight:function(a){return this.owner.listWrap.getHeight()},publishInnerHeight:function(c,a){var b=c.toolbarContext,d=0;if(b){d=b.getProp("height")}if(d===undefined){this.done=false}else{c.listContext.setHeight(a-c.getFrameInfo().height-d)}},calculateOwnerHeightFromContentHeight:function(c){var a=Ext.layout.component.Auto.prototype.calculateOwnerHeightFromContentHeight.apply(this,arguments),b=c.toolbarContext;if(b){a+=b.getProp("height")}return a}},0,0,0,0,["layout.boundlist"],0,[Ext.layout.component,"BoundList"],0));(Ext.cmd.derive("Ext.toolbar.Item",Ext.Component,{alternateClassName:"Ext.Toolbar.Item",enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn},0,["tbitem"],["component","box","tbitem"],{component:true,box:true,tbitem:true},["widget.tbitem"],0,[Ext.toolbar,"Item",Ext.Toolbar,"Item"],0));(Ext.cmd.derive("Ext.toolbar.TextItem",Ext.toolbar.Item,{alternateClassName:"Ext.Toolbar.TextItem",text:"",baseCls:"x-toolbar-text",ariaRole:null,beforeRender:function(){var a=this.text;Ext.toolbar.Item.prototype.beforeRender.call(this);if(a){this.html=a}},setText:function(a){this.update(a)}},0,["tbtext"],["component","box","tbitem","tbtext"],{component:true,box:true,tbitem:true,tbtext:true},["widget.tbtext"],0,[Ext.toolbar,"TextItem",Ext.Toolbar,"TextItem"],0));(Ext.cmd.derive("Ext.form.trigger.Spinner",Ext.form.trigger.Trigger,{cls:"x-form-trigger-spinner",spinnerCls:"x-form-spinner",spinnerUpCls:"x-form-spinner-up",spinnerDownCls:"x-form-spinner-down",focusCls:"x-form-spinner-focus",overCls:"x-form-spinner-over",clickCls:"x-form-spinner-click",focusFieldOnClick:true,vertical:true,bodyTpl:'<tpl if="vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerDownCls} {spinnerDownCls}-{ui} {childElCls} {downDisabledCls}"></div><tpl if="!vertical"><div class="{spinnerCls} {spinnerCls}-{ui} {spinnerUpCls} {spinnerUpCls}-{ui} {childElCls} {upDisabledCls}"></div></tpl>',destroy:function(){var a=this;if(a.spinnerEl){a.spinnerEl.destroy();a.spinnerEl=a.upEl=a.downEl=null}Ext.form.trigger.Trigger.prototype.destroy.call(this)},getBodyRenderData:function(){var a=this;return{vertical:a.vertical,upDisabledCls:a.upEnabled?"":(a.spinnerUpCls+"-disabled"),downDisabledCls:a.downEnabled?"":(a.spinnerDownCls+"-disabled"),spinnerCls:a.spinnerCls,spinnerUpCls:a.spinnerUpCls,spinnerDownCls:a.spinnerDownCls}},getStateEl:function(){return this.spinnerEl},onClick:function(){var b=this,a=arguments,d=b.clickRepeater?a[1]:a[0],c=b.field;if(!c.readOnly&&!c.disabled){if(b.upEl.contains(d.target)){Ext.callback(b.upHandler,b.scope,[c,b,d],0,c)}else{if(b.downEl.contains(d.target)){Ext.callback(b.downHandler,b.scope,[c,b,d],0,c)}}}c.inputEl.focus()},onFieldRender:function(){var b=this,a=b.vertical,d,c;Ext.form.trigger.Trigger.prototype.onFieldRender.call(this);d=b.spinnerEl=b.el.select("."+b.spinnerCls,true);c=d.elements;b.upEl=a?c[0]:c[1];b.downEl=a?c[1]:c[0]},setUpEnabled:function(a){this.upEl[a?"removeCls":"addCls"](this.spinnerUpCls+"-disabled")},setDownEnabled:function(a){this.downEl[a?"removeCls":"addCls"](this.spinnerDownCls+"-disabled")}},0,0,0,0,["trigger.spinner"],0,[Ext.form.trigger,"Spinner"],0));(Ext.cmd.derive("Ext.form.field.Spinner",Ext.form.field.Text,{alternateClassName:"Ext.form.Spinner",config:{triggers:{spinner:{type:"spinner",upHandler:"onSpinnerUpClick",downHandler:"onSpinnerDownClick",scope:"this"}}},spinUpEnabled:true,spinDownEnabled:true,keyNavEnabled:true,mouseWheelEnabled:true,repeatTriggerClick:true,onSpinUp:Ext.emptyFn,onSpinDown:Ext.emptyFn,ariaRole:"spinbutton",applyTriggers:function(b){var c=this,a=b.spinner;a.upEnabled=c.spinUpEnabled;a.downEnabled=c.spinDownEnabled;return Ext.form.field.Text.prototype.applyTriggers.call(this,b)},onRender:function(){var b=this,a=b.getTrigger("spinner");(arguments.callee.$previous||Ext.form.field.Text.prototype.onRender).call(this);if(b.keyNavEnabled){b.spinnerKeyNav=new Ext.util.KeyNav(b.inputEl,{scope:b,up:b.spinUp,down:b.spinDown})}if(b.mouseWheelEnabled){b.mon(b.bodyEl,"mousewheel",b.onMouseWheel,b)}b.spinUpEl=a.upEl;b.spinDownEl=a.downEl},onSpinnerUpClick:function(){this.spinUp()},onSpinnerDownClick:function(){this.spinDown()},spinUp:function(){var a=this;if(a.spinUpEnabled&&!a.disabled){a.fireEvent("spin",a,"up");a.fireEvent("spinup",a);a.onSpinUp()}},spinDown:function(){var a=this;if(a.spinDownEnabled&&!a.disabled){a.fireEvent("spin",a,"down");a.fireEvent("spindown",a);a.onSpinDown()}},setSpinUpEnabled:function(a){var b=this,c=b.spinUpEnabled;b.spinUpEnabled=a;if(c!==a&&b.rendered){b.getTrigger("spinner").setUpEnabled(a)}},setSpinDownEnabled:function(a){var b=this,c=b.spinDownEnabled;b.spinDownEnabled=a;if(c!==a&&b.rendered){b.getTrigger("spinner").setDownEnabled(a)}},onMouseWheel:function(b){var a=this,c;if(a.hasFocus){c=b.getWheelDelta();if(c>0){a.spinUp()}else{if(c<0){a.spinDown()}}b.stopEvent()}},onDestroy:function(){Ext.destroyMembers(this,"spinnerKeyNav");Ext.form.field.Text.prototype.onDestroy.call(this)}},0,["spinnerfield"],["component","box","field","textfield","spinnerfield"],{component:true,box:true,field:true,textfield:true,spinnerfield:true},["widget.spinnerfield"],0,[Ext.form.field,"Spinner",Ext.form,"Spinner"],0));(Ext.cmd.derive("Ext.form.field.Number",Ext.form.field.Spinner,{alternateClassName:["Ext.form.NumberField","Ext.form.Number"],allowExponential:true,allowDecimals:true,decimalSeparator:null,submitLocaleSeparator:true,decimalPrecision:2,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,step:1,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",negativeText:"The value cannot be negative",baseChars:"0123456789",autoStripChars:false,initComponent:function(){var a=this;if(a.decimalSeparator===null){a.decimalSeparator=Ext.util.Format.decimalSeparator}Ext.form.field.Spinner.prototype.initComponent.call(this);a.setMinValue(a.minValue);a.setMaxValue(a.maxValue)},getSubTplData:function(c){var f=this,d=f.minValue,a=f.maxValue,h,b,g;h=Ext.form.field.Spinner.prototype.getSubTplData.call(this,c);b=h.inputElAriaAttributes;if(b){if(d>Number.NEGATIVE_INFINITY){b["aria-valuemin"]=d}if(a<Number.MAX_VALUE){b["aria-valuemax"]=a}g=f.getValue();if(g!=null&&g>=d&&g<=a){b["aria-valuenow"]=g}}return h},setValue:function(c){var b=this,d,a;if(b.hasFocus){d=b.getBind();a=d&&d.value;if(a&&a.syncing&&c===b.value){return b}}return Ext.form.field.Spinner.prototype.setValue.call(this,c)},getErrors:function(c){c=arguments.length>0?c:this.processRawValue(this.getRawValue());var b=this,f=Ext.form.field.Spinner.prototype.getErrors.call(this,c),d=Ext.String.format,a;if(c.length<1){return f}c=String(c).replace(b.decimalSeparator,".");if(isNaN(c)){f.push(d(b.nanText,c))}a=b.parseValue(c);if(b.minValue===0&&a<0){f.push(this.negativeText)}else{if(a<b.minValue){f.push(d(b.minText,b.minValue))}}if(a>b.maxValue){f.push(d(b.maxText,b.maxValue))}return f},rawToValue:function(b){var a=this.fixPrecision(this.parseValue(b));if(a===null){a=b||null}return a},valueToRaw:function(c){var b=this,a=b.decimalSeparator;c=b.parseValue(c);c=b.fixPrecision(c);c=Ext.isNumber(c)?c:parseFloat(String(c).replace(a,"."));c=isNaN(c)?"":String(c).replace(".",a);return c},getSubmitValue:function(){var a=this,b=Ext.form.field.Spinner.prototype.getSubmitValue.call(this);if(!a.submitLocaleSeparator){b=b.replace(a.decimalSeparator,".")}return b},onChange:function(b){var a=this.ariaEl.dom;this.toggleSpinners();Ext.form.field.Spinner.prototype.onChange.apply(this,arguments);if(a){if(Ext.isNumber(b)&&isFinite(b)){a.setAttribute("aria-valuenow",b)}else{a.removeAttribute("aria-valuenow")}}},toggleSpinners:function(){var c=this,d=c.getValue(),b=d===null,a;if(c.spinUpEnabled||c.spinUpDisabledByToggle){a=b||d<c.maxValue;c.setSpinUpEnabled(a,true)}if(c.spinDownEnabled||c.spinDownDisabledByToggle){a=b||d>c.minValue;c.setSpinDownEnabled(a,true)}},setMinValue:function(d){var b=this,a=b.ariaEl.dom,c,f,a;b.minValue=c=Ext.Number.from(d,Number.NEGATIVE_INFINITY);b.toggleSpinners();if(a){if(c>Number.NEGATIVE_INFINITY){a.setAttribute("aria-valuemin",c)}else{a.removeAttribute("aria-valuemin")}}if(b.disableKeyFilter!==true){f=b.baseChars+"";if(b.allowExponential){f+=b.decimalSeparator+"e+-"}else{if(b.allowDecimals){f+=b.decimalSeparator}if(b.minValue<0){f+="-"}}f=Ext.String.escapeRegex(f);b.maskRe=new RegExp("["+f+"]");if(b.autoStripChars){b.stripCharsRe=new RegExp("[^"+f+"]","gi")}}},setMaxValue:function(b){var a=this.ariaEl.dom,c;this.maxValue=c=Ext.Number.from(b,Number.MAX_VALUE);if(a){if(c<Number.MAX_VALUE){a.setAttribute("aria-valuemax",c)}else{a.removeAttribute("aria-valuemax")}}this.toggleSpinners()},parseValue:function(a){a=parseFloat(String(a).replace(this.decimalSeparator,"."));return isNaN(a)?null:a},fixPrecision:function(d){var c=this,b=isNaN(d),a=c.decimalPrecision;if(b||!d){return b?"":d}else{if(!c.allowDecimals||a<=0){a=0}}return parseFloat(Ext.Number.toFixed(parseFloat(d),a))},onBlur:function(c){var b=this,a=b.rawToValue(b.getRawValue());if(!Ext.isEmpty(a)){b.setValue(a)}Ext.form.field.Spinner.prototype.onBlur.call(this,c)},setSpinUpEnabled:function(b,a){Ext.form.field.Spinner.prototype.setSpinUpEnabled.apply(this,arguments);if(!a){delete this.spinUpDisabledByToggle}else{this.spinUpDisabledByToggle=!b}},onSpinUp:function(){var a=this;if(!a.readOnly){a.setSpinValue(Ext.Number.constrain(a.getValue()+a.step,a.minValue,a.maxValue))}},setSpinDownEnabled:function(b,a){Ext.form.field.Spinner.prototype.setSpinDownEnabled.apply(this,arguments);if(!a){delete this.spinDownDisabledByToggle}else{this.spinDownDisabledByToggle=!b}},onSpinDown:function(){var a=this;if(!a.readOnly){a.setSpinValue(Ext.Number.constrain(a.getValue()-a.step,a.minValue,a.maxValue))}},setSpinValue:function(b){var a=this;if(a.enforceMaxLength){if(a.fixPrecision(b).toString().length>a.maxLength){return}}a.setValue(b)}},0,["numberfield"],["component","box","field","textfield","spinnerfield","numberfield"],{component:true,box:true,field:true,textfield:true,spinnerfield:true,numberfield:true},["widget.numberfield"],0,[Ext.form.field,"Number",Ext.form,"NumberField",Ext.form,"Number"],0));(Ext.cmd.derive("Ext.toolbar.Paging",Ext.toolbar.Toolbar,{alternateClassName:"Ext.PagingToolbar",displayInfo:false,prependButtons:false,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",inputItemWidth:30,emptyPageData:{total:0,currentPage:0,pageCount:0,toRecord:0,fromRecord:0},defaultBindProperty:"store",getPagingItems:function(){var b=this,a={scope:b,blur:b.onPagingBlur};a[Ext.supports.SpecialKeyDownRepeat?"keydown":"keypress"]=b.onPagingKeyDown;return[{itemId:"first",tooltip:b.firstText,overflowText:b.firstText,iconCls:"x-tbar-page-first",disabled:true,handler:b.moveFirst,scope:b},{itemId:"prev",tooltip:b.prevText,overflowText:b.prevText,iconCls:"x-tbar-page-prev",disabled:true,handler:b.movePrevious,scope:b},"-",b.beforePageText,{xtype:"numberfield",itemId:"inputItem",name:"inputItem",cls:"x-tbar-page-number",allowDecimals:false,minValue:1,hideTrigger:true,enableKeyEvents:true,keyNavEnabled:false,selectOnFocus:true,submitValue:false,isFormField:false,width:b.inputItemWidth,margin:"-1 2 3 2",listeners:a},{xtype:"tbtext",itemId:"afterTextItem",html:Ext.String.format(b.afterPageText,1)},"-",{itemId:"next",tooltip:b.nextText,overflowText:b.nextText,iconCls:"x-tbar-page-next",disabled:true,handler:b.moveNext,scope:b},{itemId:"last",tooltip:b.lastText,overflowText:b.lastText,iconCls:"x-tbar-page-last",disabled:true,handler:b.moveLast,scope:b},"-",{itemId:"refresh",tooltip:b.refreshText,overflowText:b.refreshText,iconCls:"x-tbar-loading",disabled:b.store.isLoading(),handler:b.doRefresh,scope:b}]},initComponent:function(){var b=this,a=b.items||b.buttons||[],c;b.bindStore(b.store||"ext-empty-store",true);c=b.getPagingItems();if(b.prependButtons){b.items=a.concat(c)}else{b.items=c.concat(a)}delete b.buttons;if(b.displayInfo){b.items.push("->");b.items.push({xtype:"tbtext",itemId:"displayItem"})}Ext.toolbar.Toolbar.prototype.initComponent.call(this)},beforeRender:function(){Ext.toolbar.Toolbar.prototype.beforeRender.apply(this,arguments);this.updateBarInfo()},updateBarInfo:function(){var a=this;if(!a.store.isLoading()){a.calledInternal=true;a.onLoad();a.calledInternal=false}},updateInfo:function(){var f=this,c=f.child("#displayItem"),a=f.store,b=f.getPageData(),d,g;if(c){d=a.getCount();if(d===0){g=f.emptyMsg}else{g=Ext.String.format(f.displayMsg,b.fromRecord,b.toRecord,b.total)}c.setText(g)}},onLoad:function(){var h=this,d,b,c,a,g,j,f;g=h.store.getCount();j=g===0;if(!j){d=h.getPageData();b=d.currentPage;c=d.pageCount;if(b>c){if(c>0){h.store.loadPage(c)}else{h.getInputItem().reset()}return}a=Ext.String.format(h.afterPageText,isNaN(c)?1:c)}else{b=0;c=0;a=Ext.String.format(h.afterPageText,0)}Ext.suspendLayouts();f=h.child("#afterTextItem");if(f){f.update(a)}f=h.getInputItem();if(f){f.setDisabled(j).setValue(b)}h.setChildDisabled("#first",b===1||j);h.setChildDisabled("#prev",b===1||j);h.setChildDisabled("#next",b===c||j);h.setChildDisabled("#last",b===c||j);h.setChildDisabled("#refresh",false);h.updateInfo();Ext.resumeLayouts(true);if(!h.calledInternal){h.fireEvent("change",h,d||h.emptyPageData)}},setChildDisabled:function(a,b){var c=this.child(a);if(c){c.setDisabled(b)}},getPageData:function(){var b=this.store,a=b.getTotalCount();return{total:a,currentPage:b.currentPage,pageCount:Math.ceil(a/b.pageSize),fromRecord:((b.currentPage-1)*b.pageSize)+1,toRecord:Math.min(b.currentPage*b.pageSize,a)}},onLoadError:function(){this.setChildDisabled("#refresh",false)},getInputItem:function(){return this.child("#inputItem")},readPageFromInput:function(b){var c=this.getInputItem(),d=false,a;if(c){a=c.getValue();d=parseInt(a,10);if(!a||isNaN(d)){c.setValue(b.currentPage);return false}}return d},onPagingBlur:function(c){var b=this.getInputItem(),a;if(b){a=this.getPageData().currentPage;b.setValue(a)}},onPagingKeyDown:function(b,a){this.processKeyEvent(b,a)},processKeyEvent:function(h,g){var d=this,c=g.getKey(),b=d.getPageData(),a=g.shiftKey?10:1,f;if(c===g.RETURN){g.stopEvent();f=d.readPageFromInput(b);if(f!==false){f=Math.min(Math.max(1,f),b.pageCount);if(f!==b.currentPage&&d.fireEvent("beforechange",d,f)!==false){d.store.loadPage(f)}}}else{if(c===g.HOME||c===g.END){g.stopEvent();f=c===g.HOME?1:b.pageCount;h.setValue(f)}else{if(c===g.UP||c===g.PAGE_UP||c===g.DOWN||c===g.PAGE_DOWN){g.stopEvent();f=d.readPageFromInput(b);if(f){if(c===g.DOWN||c===g.PAGE_DOWN){a*=-1}f+=a;if(f>=1&&f<=b.pageCount){h.setValue(f)}}}}}},beforeLoad:function(){this.setChildDisabled("#refresh",true)},moveFirst:function(){if(this.fireEvent("beforechange",this,1)!==false){this.store.loadPage(1);return true}return false},movePrevious:function(){var c=this,a=c.store,b=a.currentPage-1;if(b>0){if(c.fireEvent("beforechange",c,b)!==false){a.previousPage();return true}}return false},moveNext:function(){var d=this,a=d.store,c=d.getPageData().pageCount,b=a.currentPage+1;if(b<=c){if(d.fireEvent("beforechange",d,b)!==false){a.nextPage();return true}}return false},moveLast:function(){var b=this,a=b.getPageData().pageCount;if(b.fireEvent("beforechange",b,a)!==false){b.store.loadPage(a);return true}return false},doRefresh:function(){var b=this,a=b.store,c=a.currentPage;if(b.fireEvent("beforechange",b,c)!==false){a.loadPage(c);return true}return false},getStoreListeners:function(){return{beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError}},onBindStore:function(){if(this.rendered){this.updateBarInfo()}},onDestroy:function(){this.bindStore(null);Ext.toolbar.Toolbar.prototype.onDestroy.call(this)}},0,["pagingtoolbar"],["component","box","container","toolbar","pagingtoolbar"],{component:true,box:true,container:true,toolbar:true,pagingtoolbar:true},["widget.pagingtoolbar"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.toolbar,"Paging",Ext,"PagingToolbar"],0));Ext.define("Ext.theme.neptune.toolbar.Paging",{override:"Ext.toolbar.Paging",defaultButtonUI:"plain-toolbar",inputItemWidth:40});Ext.define("Ext.theme.triton.toolbar.Paging",{override:"Ext.toolbar.Paging",inputItemWidth:50});(Ext.cmd.derive("Ext.view.BoundList",Ext.view.View,{alternateClassName:"Ext.BoundList",pageSize:0,baseCls:"x-boundlist",itemCls:"x-boundlist-item",listItemCls:"",shadow:false,trackOver:true,preserveScrollOnRefresh:true,enableInitialSelection:false,refreshSelmodelOnRefresh:true,componentLayout:"boundlist",navigationModel:"boundlist",scrollable:true,ariaEl:"listEl",tabIndex:-1,childEls:["listWrap","listEl"],renderTpl:['<div id="{id}-listWrap" data-ref="listWrap"',' class="{baseCls}-list-ct ',Ext.dom.Element.unselectableCls,'">','<ul id="{id}-listEl" data-ref="listEl" class="',"x-",'list-plain"','<tpl foreach="ariaAttributes"> {$}="{.}"</tpl>',">","</ul>","</div>","{%","var pagingToolbar=values.$comp.pagingToolbar;","if (pagingToolbar) {","Ext.DomHelper.generateMarkup(pagingToolbar.getRenderTree(), out);","}","%}",{disableFormats:true}],focusOnToFront:false,initComponent:function(){var b=this,a=b.baseCls,c=b.itemCls;b.selectedItemCls=a+"-selected";if(b.trackOver){b.overItemCls=a+"-item-over"}b.itemSelector="."+c;b.scrollerSelector="ul.x-list-plain";if(b.floating){b.addCls(a+"-floating")}if(!b.tpl){b.tpl=new Ext.XTemplate('<tpl for=".">','<li role="option" unselectable="on" class="'+c+'">'+b.getInnerTpl(b.displayField)+"</li>","</tpl>")}else{if(!b.tpl.isTemplate){b.tpl=new Ext.XTemplate(b.tpl)}}if(b.pageSize){b.pagingToolbar=b.createPagingToolbar()}Ext.view.View.prototype.initComponent.call(this)},getRefOwner:function(){return this.pickerField||Ext.view.View.prototype.getRefOwner.call(this)},getRefItems:function(){var a=Ext.view.View.prototype.getRefItems.call(this),b=this.pagingToolbar;if(b){a.push(b)}return a},createPagingToolbar:function(){return Ext.widget("pagingtoolbar",{id:this.id+"-paging-toolbar",pageSize:this.pageSize,store:this.dataSource,border:false,ownerCt:this,ownerLayout:this.getComponentLayout()})},getNodeContainer:function(){return this.listEl},refresh:function(){var b=this,a=b.tpl;a.field=b.pickerField;a.store=b.store;Ext.view.View.prototype.refresh.call(this);a.field=a.store=null},bindStore:function(a,b){var c=this.pagingToolbar;Ext.view.View.prototype.bindStore.apply(this,arguments);if(c){c.bindStore(a,b)}},getInnerTpl:function(a){return"{"+a+"}"},onShow:function(){var a=this.pickerField;Ext.view.View.prototype.onShow.call(this);if(a&&a.rendered&&!a.hasFocus){a.focus()}},afterComponentLayout:function(c,a,b,f){var d=this.pickerField;Ext.view.View.prototype.afterComponentLayout.call(this,c,a,b,f);if(d&&d.alignPicker){d.alignPicker()}},onItemClick:function(a){var d=this,f=d.pickerField,b,c;if(!f){return}b=f.valueField;c=d.getSelectionModel().getSelection();if(!f.multiSelect&&c.length){c=c[0];if(c&&f.isEqual(a.get(b),c.get(b))&&f.collapse){f.collapse()}}},onContainerClick:function(b){var a=this.pagingToolbar;if(a&&a.rendered&&b.within(a.el)){return false}},onDestroy:function(){Ext.view.View.prototype.onDestroy.call(this);Ext.destroyMembers(this,"pagingToolbar","listWrap","listEl")},privates:{getTargetEl:function(){return this.listEl},getOverflowEl:function(){return this.listWrap},finishRenderChildren:function(){var a=this.pagingToolbar;Ext.view.View.prototype.finishRenderChildren.apply(this,arguments);if(a){a.finishRender()}}}},0,["boundlist"],["component","box","dataview","boundlist"],{component:true,box:true,dataview:true,boundlist:true},["widget.boundlist"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.view,"BoundList",Ext,"BoundList"],0));(Ext.cmd.derive("Ext.form.field.ComboBox",Ext.form.field.Picker,{alternateClassName:"Ext.form.ComboBox",config:{filters:null,selection:null,valueNotFoundText:null,displayTpl:false,delimiter:", ",displayField:"text"},publishes:["selection"],twoWayBindable:["selection"],triggerCls:"x-form-arrow-trigger",hiddenName:"",collapseOnSelect:false,hiddenDataCls:"x-hidden-display x-form-data-hidden",ariaRole:"combobox",childEls:{hiddenDataEl:true},filtered:false,afterRender:function(){var a=this;Ext.form.field.Picker.prototype.afterRender.apply(this,arguments);a.setHiddenValue(a.value)},multiSelect:false,triggerAction:"all",allQuery:"",queryParam:"query",queryMode:"remote",queryCaching:true,autoLoadOnValue:false,pageSize:0,anyMatch:false,caseSensitive:false,autoSelect:true,typeAhead:false,typeAheadDelay:250,selectOnTab:true,forceSelection:false,growToLongestValue:true,clearFilterOnBlur:true,defaultListConfig:{loadingHeight:70,minWidth:70,maxHeight:300,shadow:"sides"},transformInPlace:true,clearValueOnEmpty:true,getGrowWidth:function(){var d=this,g=d.inputEl.dom.value,f,h,j,c,b,m,a;if(d.growToLongestValue){f=d.displayField;h=d.store;j=h.data.length;c=0;for(b=0;b<j;b++){m=h.getAt(b).data[f];a=m.length;if(a>c){c=a;g=m}}}return g},initComponent:function(){var f=this,c=Ext.isDefined,b=f.store,d=f.transform,a,g;if("pinList" in f){f.collapseOnSelect=!f.pinList}if(d){a=Ext.getDom(d);if(a){if(!f.store){b=Ext.Array.map(Ext.Array.from(a.options),function(h){return[h.value,h.text]})}if(!f.name){f.name=a.name}if(!("value" in f)){f.value=a.value}}}f.bindStore(b||"ext-empty-store",true,true);g=f.queryMode==="local";if(!c(f.queryDelay)){f.queryDelay=g?10:500}if(!c(f.minChars)){f.minChars=g?0:4}Ext.form.field.Picker.prototype.initComponent.call(this);f.doQueryTask=new Ext.util.DelayedTask(f.doRawQuery,f);if(a){if(f.transformInPlace){f.render(a.parentNode,a);delete f.renderTo}Ext.removeNode(a)}},getSubTplData:function(b){var c,a;c=Ext.form.field.Picker.prototype.getSubTplData.call(this,b);a=c.inputElAriaAttributes;if(a){a["aria-autocomplete"]="list"}return c},getSubTplMarkup:function(c){var d=this,a="",b=Ext.form.field.Picker.prototype.getSubTplMarkup.apply(this,arguments);if(d.hiddenName){a='<div id="'+c.id+'-hiddenDataEl" data-ref="hiddenDataEl" class="'+d.hiddenDataCls+'" role="presentation"></div>'}return a+b},applyDisplayTpl:function(b){var a=this;if(!b){b=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : values["'+a.getDisplayField()+'"]]}<tpl if="xindex < xcount">'+a.getDelimiter()+"</tpl></tpl>");b.auto=true}else{if(!b.isTemplate){b=new Ext.XTemplate(b)}}return b},applyFilters:function(b,c){var a=this;if(b===null||b.isFilterCollection){return b}if(b){if(!c){c=this.getFilters()}c.beginUpdate();c.splice(0,c.length,b);c.each(function(d){d.ownerId=a.id});c.endUpdate()}return c},applyValueNotFoundText:function(a){var b=this,c=b.valueNotFoundRecord||(b.valueNotFoundRecord=new Ext.data.Model());c.set(b.displayField,a);if(b.valueField&&b.displayField!==b.valueField){c.set(b.valueField,a)}return a},getFilters:function(b){var a=this.filters;if(!a&&b!==false){a=new Ext.util.FilterCollection();this.setFilters(a)}return a},updateFilters:function(a,b){var c=this;if(b){b.un("endupdate","onEndUpdateFilters",c)}if(a){a.on("endupdate","onEndUpdateFilters",c)}c.onEndUpdateFilters(a)},onEndUpdateFilters:function(f){var d=this,g=d.filtered,c=!!f&&(f.length>0),a,b;if(g||c){d.filtered=c;a=[];b=d.store.getFilters();b.each(function(h){if(h.ownerId===d.id&&!f.contains(h)){a.push(h)}});b.splice(0,a,f.items)}},completeEdit:function(c){var b=this,a=b.queryFilter;Ext.form.field.Picker.prototype.completeEdit.call(this,c);b.doQueryTask.cancel();b.assertValue();if(a&&b.queryMode==="local"&&b.clearFilterOnBlur){b.getStore().getFilters().remove(a)}},onFocus:function(b){var a=this;Ext.form.field.Picker.prototype.onFocus.call(this,b);if(a.triggerAction!=="all"&&a.queryFilter&&a.queryMode==="local"&&a.clearFilterOnBlur){delete a.lastQuery;a.doRawQuery()}},assertValue:function(){var b=this,c=b.getRawValue(),a=b.getDisplayValue(),d=b.lastSelectedRecords,f;if(b.forceSelection){if(b.multiSelect){if(c!==a){b.setRawValue(a)}}else{f=b.findRecordByDisplay(c);if(f){if(b.getDisplayValue([b.getRecordDisplayData(f)])!==a){b.select(f,true)}}else{if(d&&(!b.allowBlank||b.rawValue)){b.setValue(d)}else{if(d){delete b.lastSelectedRecords}b.setRawValue("")}}}}b.collapse()},onTypeAhead:function(){var f=this,d=f.displayField,b=f.store.findRecord(d,f.getRawValue()),c=f.getPicker(),g,a,h;if(b){g=b.get(d);a=g.length;h=f.getRawValue().length;c.highlightItem(c.getNode(b));if(h!==0&&h!==a){f.setRawValue(g);f.selectText(h,g.length)}}},resetToDefault:Ext.emptyFn,beforeReset:function(){var a=this.queryFilter;Ext.form.field.Picker.prototype.beforeReset.call(this);if(a){this.getStore().getFilters().remove(a)}},onUnbindStore:function(){var c=this,a=c.picker,b=c.queryFilter;if(b&&!c.store.destroyed){c.changingFilters=true;c.getStore().removeFilter(b,true);c.changingFilters=false}c.pickerSelectionModel.destroy();if(a){a.bindStore(null)}},onBindStore:function(a,c){var f=this,b=f.picker,d,g;if(a){if(a.autoCreated){f.queryMode="local";f.valueField=f.displayField="field1";if(!a.expanded){f.displayField="field2"}if(f.getDisplayTpl().auto){f.setDisplayTpl(null)}}if(!Ext.isDefined(f.valueField)){f.valueField=f.displayField}d={byValue:{rootProperty:"data",unique:false}};d.byValue.property=f.valueField;a.setExtraKeys(d);if(f.displayField===f.valueField){a.byText=a.byValue}else{d.byText={rootProperty:"data",unique:false};d.byText.property=f.displayField;a.setExtraKeys(d)}g={rootProperty:"data",extraKeys:{byInternalId:{property:"internalId"},byValue:{property:f.valueField,rootProperty:"data"}},listeners:{beginupdate:f.onValueCollectionBeginUpdate,endupdate:f.onValueCollectionEndUpdate,scope:f}};f.valueCollection=new Ext.util.Collection(g);f.pickerSelectionModel=new Ext.selection.DataViewModel({mode:f.multiSelect?"SIMPLE":"SINGLE",deselectOnContainerClick:false,enableInitialSelection:false,pruneRemoved:false,selected:f.valueCollection,store:a,listeners:{scope:f,lastselectedchanged:f.updateBindSelection}});if(!c){f.resetToDefault()}if(b){b.setSelectionModel(f.pickerSelectionModel);if(b.getStore()!==a){b.bindStore(a)}}}},bindStore:function(a,f,b){var d=this,c=d.queryFilter;d.mixins.storeholder.bindStore.call(d,a,b);a=d.getStore();if(a&&c&&!f){a.getFilters().add(c)}if(!b&&a&&!a.isEmptyStore){d.setValueOnData()}},getStoreListeners:function(b){if(!b.isEmptyStore){var c=this,a={datachanged:c.onDataChanged,load:c.onLoad,exception:c.onException,update:c.onStoreUpdate,remove:c.checkValueOnChange};if(!b.getRemoteFilter()){a.filterchange=c.checkValueOnChange}return a}},onDataChanged:function(){if(this.grow&&this.growToLongestValue){this.autoSize()}},checkValueOnChange:function(){var a=this;if(!a.destroying&&a.getStore().isLoaded()){if(a.multiSelect){}else{if(a.forceSelection&&!a.changingFilters&&!a.findRecordByValue(a.value)){a.setValue(null)}}}},onStoreUpdate:function(b,a){this.updateValue()},onException:function(){this.collapse()},onLoad:function(c,b,f){var d=this,a=!d.valueCollection.byValue.get(d.value);if(f&&a&&!(c.lastOptions&&"rawQuery" in c.lastOptions)){d.setValueOnData()}d.checkValueOnChange()},setValueOnData:function(){var a=this;a.setValue(a.value);if(a.isExpanded&&a.getStore().getCount()){a.doAutoSelect()}},doRawQuery:function(){var a=this,b=a.inputEl.dom.value;if(a.multiSelect){b=b.split(a.delimiter).pop()}a.doQuery(b,false,true)},doQuery:function(h,c,g){var d=this,a=d.getStore(),f=a.filters&&!a.filters.length&&!!h,b=d.beforeQuery({query:h||"",rawQuery:g,forceAll:c,combo:d,cancel:false});if(b!==false&&!b.cancel){if(d.queryCaching&&!f&&b.query===d.lastQuery){d.getPicker().refresh();d.expand()}else{d.lastQuery=b.query;if(d.queryMode==="local"){d.doLocalQuery(b)}else{d.doRemoteQuery(b)}}}return true},beforeQuery:function(a){var b=this;if(b.fireEvent("beforequery",a)===false){a.cancel=true}else{if(!a.cancel){if(a.query.length<b.minChars&&!a.forceAll){a.cancel=true}}}return a},doLocalQuery:function(b){var d=this,f=b.query,a=d.getStore(),c=d.queryFilter;d.queryFilter=null;d.changingFilters=true;if(c){a.removeFilter(c,true)}if(f){c=d.queryFilter=new Ext.util.Filter({id:d.id+"-filter",anyMatch:d.anyMatch,caseSensitive:d.caseSensitive,root:"data",property:d.displayField,value:d.enableRegEx?new RegExp(f):f});a.addFilter(c,true)}d.changingFilters=false;if(d.store.getCount()||d.getPicker().emptyText){d.getPicker().refresh();d.expand()}else{d.collapse()}d.afterQuery(b)},doRemoteQuery:function(b){var c=this,a=function(){if(!c.destroyed){c.afterQuery(b)}};c.expand();if(c.pageSize){c.loadPage(1,{rawQuery:b.rawQuery,callback:a})}else{c.store.load({params:c.getParams(b.query),rawQuery:b.rawQuery,callback:a})}},afterQuery:function(a){var b=this;if(b.store.getCount()){if(b.typeAhead){b.doTypeAhead()}if(a.rawQuery){if(b.picker&&!b.picker.getSelectionModel().hasSelection()){b.doAutoSelect()}}else{b.doAutoSelect()}}b.startCheckChangeTask()},loadPage:function(b,a){this.store.loadPage(b,Ext.apply({params:this.getParams(this.lastQuery)},a))},onPageChange:function(b,a){this.loadPage(a);return false},getParams:function(c){var b={},a=this.queryParam;if(a){b[a]=c}return b},doAutoSelect:function(){var c=this,b=c.picker,a,d=0;if(b&&c.autoSelect&&c.store.getCount()>0){a=c.picker.getSelectionModel();if(a.lastSelected&&a.selected.length){d=a.lastSelected}b.getNavigationModel().setPosition(d)}},doTypeAhead:function(){var b=this,a=Ext.event.Event;if(!b.typeAheadTask){b.typeAheadTask=new Ext.util.DelayedTask(b.onTypeAhead,b)}if(b.lastKey!==a.BACKSPACE&&b.lastKey!==a.DELETE){b.typeAheadTask.delay(b.typeAheadDelay)}},onTriggerClick:function(){var a=this;if(!a.readOnly&&!a.disabled){if(a.isExpanded){a.collapse()}else{if(a.triggerAction==="all"){a.doQuery(a.allQuery,true)}else{if(a.triggerAction==="last"){a.doQuery(a.lastQuery,true)}else{a.doQuery(a.getRawValue(),false,true)}}}}},onFieldMutation:function(g){var d=this,b=g.getKey(),c=b===g.BACKSPACE||b===g.DELETE,f=d.inputEl.dom.value,a=f.length;if(!d.readOnly&&(f!==d.lastMutatedValue||c)&&b!==g.TAB){d.lastMutatedValue=f;d.lastKey=b;if(a&&(g.type!=="keyup"||(!g.isSpecialKey()||c))){d.doQueryTask.delay(d.queryDelay)}else{if(!a&&(!b||c)){++d.suspendCheckChange;if(!d.multiSelect){d.value=null;d.displayTplData=undefined}if(d.clearValueOnEmpty){d.valueCollection.beginUpdate();d.pickerSelectionModel.deselectAll();d.valueCollection.removeAll();d.valueCollection.endUpdate()}d.collapse();if(d.queryFilter){d.changingFilters=true;d.store.removeFilter(d.queryFilter,true);d.changingFilters=false}--d.suspendCheckChange}Ext.form.field.Picker.prototype.onFieldMutation.call(this,g)}}},onDestroy:function(){var a=this;a.doQueryTask.cancel();if(a.typeAheadTask){a.typeAheadTask.cancel();a.typeAheadTask=null}a.bindStore(null);a.valueCollection=Ext.destroy(a.valueCollection);Ext.form.field.Picker.prototype.onDestroy.call(this)},onAdded:function(){var a=this;Ext.form.field.Picker.prototype.onAdded.apply(this,arguments);if(a.picker){a.picker.ownerCt=a.up("[floating]");a.picker.registerWithOwnerCt()}},createPicker:function(){var c=this,b,a=Ext.apply({xtype:"boundlist",id:c.pickerId,pickerField:c,selectionModel:c.pickerSelectionModel,floating:true,hidden:true,store:c.getPickerStore(),displayField:c.displayField,preserveScrollOnRefresh:true,pageSize:c.pageSize,tpl:c.tpl},c.listConfig,c.defaultListConfig);b=c.picker=Ext.widget(a);if(c.pageSize){b.pagingToolbar.on("beforechange",c.onPageChange,c)}if(!b.initialConfig.maxHeight){b.on({beforeshow:c.onBeforePickerShow,scope:c})}b.getSelectionModel().on({beforeselect:c.onBeforeSelect,beforedeselect:c.onBeforeDeselect,focuschange:c.onFocusChange,scope:c});b.getNavigationModel().navigateOnSpace=false;return b},getPickerStore:function(){return this.store},onBeforePickerShow:function(a){var b=this,d=b.getPosition()[1]-Ext.getBody().getScroll().top,c=Ext.Element.getViewportHeight()-d-b.getHeight();a.maxHeight=Math.max(d,c)-5},onBeforeSelect:function(c,a,b){return this.fireEvent("beforeselect",this,a,b)},onBeforeDeselect:function(c,a,b){return this.fireEvent("beforedeselect",this,a,b)},onFocusChange:function(c,a,b){var d=this.picker,f;if(b){f=Ext.get(d.getNodeByRecord(b));if(f){this.ariaEl.dom.setAttribute("aria-activedescendant",f.id)}}},getSelection:function(){var a=this.getPicker().getSelectionModel(),b=a.getSelection();return b.length?a.getLastSelected():null},updateSelection:function(a){var b=this,c;if(!b.ignoreNextSelection){b.ignoreNextSelection=true;c=b.getPicker().getSelectionModel();if(a){c.select(a);b.hasHadSelection=true}else{c.deselectAll()}b.ignoreNextSelection=false}},updateBindSelection:function(a,c){var d=this,b=null;if(!d.ignoreNextSelection){d.ignoreNextSelection=true;if(c.length){b=a.getLastSelected();d.hasHadSelection=true}if(d.hasHadSelection){d.setSelection(b)}d.ignoreNextSelection=false}},onValueCollectionBeginUpdate:Ext.emptyFn,onValueCollectionEndUpdate:function(){var d=this,c=d.store,f=d.valueCollection.getRange(),b=f[0],a=f.length;d.updateBindSelection(d.pickerSelectionModel,f);if(d.isSelectionUpdating()){return}Ext.suspendLayouts();d.lastSelection=f;if(a){d.lastSelectedRecords=f}d.updateValue();if(a&&((!d.multiSelect&&c.contains(b))||d.collapseOnSelect||!c.getCount())){d.updatingValue=true;d.collapse();d.updatingValue=false}Ext.resumeLayouts(true);if(a&&!d.suspendCheckChange){if(!d.multiSelect){f=b}d.fireEvent("select",d,f)}},isSelectionUpdating:function(){var a=this.pickerSelectionModel;return a.deselectingDuringSelect||a.refreshing},onExpand:function(){var a=this.getPicker().getNavigationModel();if(a){a.enable()}this.doAutoSelect()},onCollapse:function(){var a=this.getPicker().getNavigationModel();if(a){a.disable()}if(this.updatingValue){this.doQueryTask.cancel()}},select:function(d,a){var c=this,b=c.picker,f;if(d&&d.isModel&&a===true&&b){f=!b.getSelectionModel().isSelected(d)}if(!f){c.suspendEvent("select")}c.setValue(d);c.resumeEvent("select")},findRecord:function(d,c){var b=this.store,a=b.findExact(d,c);return a!==-1?b.getAt(a):false},getSelectedRecord:function(){return this.findRecordByValue(this.value)||null},findRecordByValue:function(c){var a=this.store.byValue.get(c),b=false;if(a){b=a[0]||a}return b},findRecordByDisplay:function(c){var a=this.store.byText.get(c),b=false;if(a){b=a[0]||a}return b},addValue:function(a){if(a!=null){return this.doSetValue(a,true)}},setValue:function(b){var a=this;if(b!=null){return a.doSetValue(b)}else{a.suspendEvent("select");a.valueCollection.beginUpdate();a.pickerSelectionModel.deselectAll();a.valueCollection.endUpdate();a.lastSelectedRecords=null;a.resumeEvent("select")}},setRawValue:function(a){Ext.form.field.Picker.prototype.setRawValue.call(this,a);this.lastMutatedValue=a},doSetValue:function(t,p){var A=this,h=A.getStore(),j=h.getModel(),w=[],g=[],v=A.autoLoadOnValue,f=h.getCount()>0||h.isLoaded(),a=h.hasPendingLoad(),q=v&&!f&&!a,o=A.forceSelection,s=A.pickerSelectionModel,b=A.displayField===A.valueField,r=h.isEmptyStore,m=A.lastSelection,y,z,c,u,d,B;if(a||q||!f||r){if(!t.isModel){if(p){A.value=Ext.Array.from(A.value).concat(t)}else{A.value=t}A.setHiddenValue(A.value);A.setRawValue(b?t:"")}if(q&&!r){h.load()}if(!t.isModel||r){return A}}t=p?Ext.Array.from(A.value).concat(t):Ext.Array.from(t);for(y=0,z=t.length;y<z;y++){c=t[y];if(!c||!c.isModel){c=A.findRecordByValue(B=c);if(!c){c=A.valueCollection.find(A.valueField,B)}}if(!c){if(!o){if(!c&&t[y]){u={};u[A.displayField]=t[y];if(A.valueField&&A.displayField!==A.valueField){u[A.valueField]=t[y]}c=new j(u)}}else{if(A.valueNotFoundRecord){c=A.valueNotFoundRecord}}}if(c){w.push(c);g.push(c.get(A.valueField))}}if(m){z=m.length;if(z===w.length){for(y=0;!d&&y<z;y++){if(Ext.Array.indexOf(A.lastSelection,w[y])===-1){d=true}}}else{d=true}}else{d=w.length}if(d){A.suspendEvent("select");A.valueCollection.beginUpdate();if(w.length){s.select(w,false)}else{s.deselectAll()}A.valueCollection.endUpdate();A.resumeEvent("select")}else{A.updateValue()}if(A.inputEl&&A.emptyText){A.inputEl.removeCls(A.emptyCls);A.valueContainsPlaceholder=false}A.applyEmptyText();return A},updateValue:function(){var f=this,j=f.valueCollection.getRange(),a=j.length,d=[],g=f.displayTplData||(f.displayTplData=[]),h=f.inputEl,c,b;g.length=0;for(c=0;c<a;c++){b=j[c];g.push(f.getRecordDisplayData(b));if(b!==f.valueNotFoundRecord){d.push(b.get(f.valueField))}}f.setHiddenValue(d);f.value=f.multiSelect?d:d[0];if(!Ext.isDefined(f.value)){f.value=undefined}f.displayTplData=g;if(h&&f.emptyText&&!Ext.isEmpty(f.value)){h.removeCls(f.emptyCls)}f.setRawValue(f.getDisplayValue());f.checkChange();f.applyEmptyText()},setHiddenValue:function(j){var f=this,a=f.hiddenName,d,b,m,h,g,c;if(!f.hiddenDataEl||!a){return}j=Ext.Array.from(j);b=f.hiddenDataEl.dom;m=b.childNodes;h=m[0];g=j.length;c=m.length;if(!h&&g>0){f.hiddenDataEl.setHtml(Ext.DomHelper.markup({tag:"input",type:"hidden",name:a}));c=1;h=b.firstChild}while(c>g){b.removeChild(m[0]);--c}while(c<g){b.appendChild(h.cloneNode(true));++c}for(d=0;d<g;d++){m[d].value=j[d]}},getDisplayValue:function(a){a=a||this.displayTplData;return this.getDisplayTpl().apply(a)},getRecordDisplayData:function(a){return a.data},getValue:function(){var c=this,a=c.getStore(),b=c.picker,f=c.getRawValue(),d=c.value;if(!a.isEmptyStore&&c.getDisplayValue()!==f){c.displayTplData=undefined;if(b){c.valueCollection.suspendEvents();b.getSelectionModel().deselectAll();c.valueCollection.resumeEvents();c.lastSelection=null}if(a.isLoaded()&&(c.multiSelect||c.forceSelection)){d=c.value=undefined}else{d=c.value=f}}c.value=d==null?null:d;return c.value},getSubmitValue:function(){var a=this.getValue();if(Ext.isEmpty(a)){a=""}return a},isEqual:function(f,d){var b=Ext.Array.from,c,a;f=b(f);d=b(d);a=f.length;if(a!==d.length){return false}for(c=0;c<a;c++){if(d[c]!==f[c]){return false}}return true},clearValue:function(){this.setValue(null)}},0,["combo","combobox"],["component","box","field","textfield","pickerfield","combobox","combo"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true},["widget.combo","widget.combobox"],[[Ext.util.StoreHolder.prototype.mixinId||Ext.util.StoreHolder.$className,Ext.util.StoreHolder]],[Ext.form.field,"ComboBox",Ext.form,"ComboBox"],0));(Ext.cmd.derive("Ext.form.field.FileButton",Ext.button.Button,{childEls:["fileInputEl"],inputCls:"x-form-file-input",cls:"x-form-file-btn",preventDefault:false,tabIndex:undefined,autoEl:{tag:"div",unselectable:"on"},afterTpl:['<input id="{id}-fileInputEl" data-ref="fileInputEl" class="{childElCls} {inputCls}" ','type="file" size="1" name="{inputName}" role="{role}" ','<tpl if="tabIndex != null">tabindex="{tabIndex}"</tpl>',">"],keyHandlers:null,ariaEl:"fileInputEl",getAfterMarkup:function(a){return this.getTpl("afterTpl").apply(a)},getTemplateArgs:function(){var b=this,a;a=Ext.button.Button.prototype.getTemplateArgs.call(this);a.inputCls=b.inputCls;a.inputName=b.inputName||b.id;a.tabIndex=b.tabIndex||null;a.role=b.ariaRole;return a},afterRender:function(){var a=this;Ext.button.Button.prototype.afterRender.apply(this,arguments);a.fileInputEl.on({scope:a,change:a.fireChange,focus:a.onFileFocus,blur:a.onFileBlur})},fireChange:function(a){this.fireEvent("change",this,a,this.fileInputEl.dom.value)},createFileInput:function(b){var c=this,a=c.fileInputEl=c.el.createChild({name:c.inputName,id:!b?c.id+"-fileInputEl":undefined,cls:c.inputCls,tag:"input",type:"file",size:1,role:"button"});a.dom.setAttribute("data-componentid",c.id);a.on({scope:c,change:c.fireChange,focus:c.onFileFocus,blur:c.onFileBlur})},onFileFocus:function(b){var a=this.ownerCt;if(!this.hasFocus){this.onFocus(b)}if(a&&!a.hasFocus){a.onFocus(b)}},onFileBlur:function(b){var a=this.ownerCt;if(this.hasFocus){this.onBlur(b)}if(a&&a.hasFocus){a.onBlur(b)}},reset:function(a){var b=this;if(a){b.fileInputEl.destroy()}b.createFileInput(!a)},restoreInput:function(a){var b=this;b.fileInputEl.destroy();a=Ext.get(a);b.el.appendChild(a);b.fileInputEl=a},onDisable:function(){Ext.button.Button.prototype.onDisable.call(this);this.fileInputEl.dom.disabled=true},onEnable:function(){Ext.button.Button.prototype.onEnable.call(this);this.fileInputEl.dom.disabled=false},privates:{getFocusEl:function(){return this.fileInputEl},getFocusClsEl:function(){return this.el}}},0,["filebutton"],["component","box","button","filebutton"],{component:true,box:true,button:true,filebutton:true},["widget.filebutton"],0,[Ext.form.field,"FileButton"],0));(Ext.cmd.derive("Ext.form.trigger.Component",Ext.form.trigger.Trigger,{cls:"x-form-trigger-cmp",onFieldRender:function(){var b=this,a=b.component;Ext.form.trigger.Trigger.prototype.onFieldRender.call(this);if(!a.isComponent&&!a.isWidget){a=Ext.widget(a)}b.component=a;a.render(b.el)},destroy:function(){var a=this.component;if(a.isComponent||a.isWidget){a.destroy()}this.component=null;Ext.form.trigger.Trigger.prototype.destroy.call(this)}},0,0,0,0,["trigger.component"],0,[Ext.form.trigger,"Component"],0));(Ext.cmd.derive("Ext.form.field.File",Ext.form.field.Text,{alternateClassName:["Ext.form.FileUploadField","Ext.ux.form.FileUploadField","Ext.form.File"],emptyText:undefined,needArrowKeys:false,triggers:{filebutton:{type:"component",hideOnReadOnly:false,preventMouseDown:false}},buttonText:"Browse...",buttonOnly:false,buttonMargin:3,clearOnSubmit:true,extraFieldBodyCls:"x-form-file-wrap",inputCls:"x-form-text-file",readOnly:true,editable:false,submitValue:false,triggerNoEditCls:"",childEls:["browseButtonWrap"],applyTriggers:function(a){var b=this,c=(a||{}).filebutton;if(c){c.component=Ext.apply({xtype:"filebutton",ownerCt:b,id:b.id+"-button",ui:b.ui,disabled:b.disabled,text:b.buttonText,style:b.buttonOnly?"":b.getButtonMarginProp()+b.buttonMargin+"px",inputName:b.getName(),listeners:{scope:b,change:b.onFileChange}},b.buttonConfig);return Ext.form.field.Text.prototype.applyTriggers.call(this,a)}},getSubTplData:function(a){var b=Ext.form.field.Text.prototype.getSubTplData.call(this,a);b.tabIdx=-1;return b},onRender:function(){var d=this,f,c,a,b;(arguments.callee.$previous||Ext.form.field.Text.prototype.onRender).apply(this,arguments);f=d.inputEl;f.dom.name="";f.on("focus",d.onInputFocus,d);f.on("mousedown",d.onInputMouseDown,d);b=d.getTrigger("filebutton");c=d.button=b.component;d.fileInputEl=c.fileInputEl;a=c.el;if(d.buttonOnly){d.inputWrap.setDisplayed(false);d.shrinkWrap=3}b.el.setWidth(a.getWidth()+a.getMargin("lr"));if(Ext.isIE){d.button.getEl().repaint()}},getTriggerMarkup:function(){return'<td id="'+this.id+'-browseButtonWrap" data-ref="browseButtonWrap" role="presentation"></td>'},onFileChange:function(a,c,b){this.duringFileSelect=true;Ext.form.field.File.superclass.setValue.call(this,b);delete this.duringFileSelect},didValueChange:function(){return !!this.duringFileSelect},setEmptyText:Ext.emptyFn,setValue:Ext.emptyFn,reset:function(){var b=this,a=b.clearOnSubmit;if(b.rendered){b.button.reset(a);b.fileInputEl=b.button.fileInputEl;if(a){b.inputEl.dom.value="";Ext.form.field.File.superclass.setValue.call(this,null)}}Ext.form.field.Text.prototype.reset.call(this)},onShow:function(){Ext.form.field.Text.prototype.onShow.call(this);this.button.updateLayout()},onDisable:function(){Ext.form.field.Text.prototype.onDisable.call(this);this.button.disable()},onEnable:function(){Ext.form.field.Text.prototype.onEnable.call(this);this.button.enable()},isFileUpload:Ext.returnTrue,extractFileInput:function(){var b=this,a;if(b.rendered){a=b.button.fileInputEl.dom;b.reset()}else{a=document.createElement("input");a.type="file";a.className="x-hidden-display";a.name=b.getName()}return a},restoreInput:function(b){if(this.rendered){var a=this.button;a.restoreInput(b);this.fileInputEl=a.fileInputEl}},onDestroy:function(){this.fileInputEl=this.button=null;Ext.form.field.Text.prototype.onDestroy.call(this)},getButtonMarginProp:function(){return"margin-left:"},onInputFocus:function(a){this.focus();if(Ext.isIE9m){this.fileInputEl.addCls("x-position-relative");this.fileInputEl.removeCls("x-position-relative")}},onInputMouseDown:function(a){a.preventDefault();this.focus()},privates:{getFocusEl:function(){return this.button},getFocusClsEl:Ext.privateFn}},0,["fileuploadfield","filefield"],["component","box","field","textfield","filefield","fileuploadfield"],{component:true,box:true,field:true,textfield:true,filefield:true,fileuploadfield:true},["widget.filefield","widget.fileuploadfield"],0,[Ext.form.field,"File",Ext.form,"FileUploadField",Ext.ux.form,"FileUploadField",Ext.form,"File"],0));(Ext.cmd.derive("Ext.form.field.Hidden",Ext.form.field.Base,{alternateClassName:"Ext.form.Hidden",focusable:false,inputType:"hidden",isTextInput:false,hideLabel:true,hidden:true,ariaRole:"presentation",initComponent:function(){this.formItemCls+="-hidden";Ext.form.field.Base.prototype.initComponent.call(this)},isEqual:function(b,a){return this.isEqualAsString(b,a)},initEvents:Ext.emptyFn,setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn},0,["hiddenfield","hidden"],["component","box","field","hiddenfield","hidden"],{component:true,box:true,field:true,hiddenfield:true,hidden:true},["widget.hidden","widget.hiddenfield"],0,[Ext.form.field,"Hidden",Ext.form,"Hidden"],0));(Ext.cmd.derive("Ext.tip.Tip",Ext.panel.Panel,{alternateClassName:"Ext.Tip",minWidth:40,maxWidth:500,shadow:"sides",defaultAlign:"tl-bl?",constrainPosition:true,autoRender:true,hidden:true,baseCls:"x-tip",focusOnToFront:false,maskOnDisable:false,closeAction:"hide",alwaysFramed:true,frameHeader:false,initComponent:function(){var a=this;a.floating=Ext.apply({},{shadow:a.shadow,constrain:a.constrainPosition},a.self.prototype.floating);Ext.panel.Panel.prototype.initComponent.apply(this,arguments);a.constrain=a.constrain||a.constrainPosition},showAt:function(b){var a=this;Ext.panel.Panel.prototype.showAt.apply(this,arguments);if(a.isVisible()){a.setPagePosition(b[0],b[1]);if(a.constrainPosition||a.constrain){a.doConstrain()}a.toFront(true)}},privates:{initDraggable:function(){var a=this;a.draggable={el:a.getDragEl(),delegate:a.header.el,constrain:a,constrainTo:a.el.dom.parentNode};Ext.Component.prototype.initDraggable.call(a)}},ghost:undefined,unghost:undefined},0,["tip"],["component","box","container","panel","tip"],{component:true,box:true,container:true,panel:true,tip:true},["widget.tip"],0,[Ext.tip,"Tip",Ext,"Tip"],0));(Ext.cmd.derive("Ext.tip.ToolTip",Ext.tip.Tip,{alternateClassName:"Ext.ToolTip",autoHide:true,showDelay:500,hideDelay:200,dismissDelay:5000,trackMouse:false,anchorToTarget:true,anchorOffset:0,targetCounter:0,quickShowInterval:250,hideAction:"hide",fadeOutDuration:1000,ariaRole:"tooltip",initComponent:function(){var a=this;Ext.tip.Tip.prototype.initComponent.apply(this,arguments);a.lastActive=new Date();a.setTarget(a.target);a.origAnchor=a.anchor},onRender:function(b,a){var c=this;Ext.tip.Tip.prototype.onRender.apply(this,arguments);c.anchorCls="x-tip-anchor-"+c.getAnchorPosition();c.anchorEl=c.el.createChild({role:"presentation",cls:"x-tip-anchor "+c.anchorCls})},setTarget:function(d){var b=this,a=Ext.get(d),c;if(b.target){c=Ext.get(b.target);if(Ext.supports.Touch){b.mun(c,"tap",b.onTargetOver,b)}else{b.mun(c,{mouseover:b.onTargetOver,mouseout:b.onTargetOut,mousemove:b.onMouseMove,scope:b})}}b.target=a;if(a){if(Ext.supports.Touch){b.mon(a,{tap:b.onTargetOver,scope:b})}else{b.mon(a,{mouseover:b.onTargetOver,mouseout:b.onTargetOut,mousemove:b.onMouseMove,scope:b})}}if(b.anchor){b.anchorTarget=b.target}},onMouseMove:function(d){var b=this,a,c;if(!b.target||b.target.contains(d.target)){a=b.delegate?d.getTarget(b.delegate):(b.triggerElement=true);if(a){b.targetXY=d.getXY();if(a===b.triggerElement){if(!b.hidden&&b.trackMouse){c=b.getTargetXY();if(b.constrainPosition){c=b.el.adjustForConstraints(c,b.el.parent())}b.setPagePosition(c)}}else{b.hide();b.lastActive=new Date(0);b.onTargetOver(d)}}else{if((!b.closable&&b.isVisible())&&b.autoHide!==false){b.delayHide()}}}},getTargetXY:function(){var m=this,d,c,r,a,j,p,f,q,o,b,h,g;if(m.delegate){m.anchorTarget=m.triggerElement}if(m.anchor){m.targetCounter++;c=m.getOffsets();r=(m.anchorToTarget&&!m.trackMouse)?m.getAlignToXY(m.anchorTarget,m.getAnchorAlign()):m.targetXY;a=Ext.Element.getViewportWidth()-5;j=Ext.Element.getViewportHeight()-5;p=document.documentElement;f=document.body;q=(p.scrollLeft||f.scrollLeft||0)+5;o=(p.scrollTop||f.scrollTop||0)+5;b=[r[0]+c[0],r[1]+c[1]];h=m.getSize();g=m.constrainPosition;m.anchorEl.removeCls(m.anchorCls);if(m.targetCounter<2&&g){if(b[0]<q){if(m.anchorToTarget){m.defaultAlign="l-r";if(m.mouseOffset){m.mouseOffset[0]*=-1}}m.anchor="left";return m.getTargetXY()}if(b[0]+h.width>a){if(m.anchorToTarget){m.defaultAlign="r-l";if(m.mouseOffset){m.mouseOffset[0]*=-1}}m.anchor="right";return m.getTargetXY()}if(b[1]<o){if(m.anchorToTarget){m.defaultAlign="t-b";if(m.mouseOffset){m.mouseOffset[1]*=-1}}m.anchor="top";return m.getTargetXY()}if(b[1]+h.height>j){if(m.anchorToTarget){m.defaultAlign="b-t";if(m.mouseOffset){m.mouseOffset[1]*=-1}}m.anchor="bottom";return m.getTargetXY()}}m.anchorCls="x-tip-anchor-"+m.getAnchorPosition();m.anchorEl.addCls(m.anchorCls);m.targetCounter=0;return b}else{d=m.getMouseOffset();return(m.targetXY)?[m.targetXY[0]+d[0],m.targetXY[1]+d[1]]:d}},calculateConstrainedPosition:function(b){var c=this,f,a,d;if(!b&&c.isContainedFloater()){f=c.isVisible();if(!f){c.el.show()}a=c.getTargetXY();if(!f){c.el.hide()}d=c.floatParent.getTargetEl().getViewRegion();a[0]-=d.left;a[1]-=d.top}else{a=c.callOverridden(arguments)}return a},getMouseOffset:function(){var a=this,b=a.anchor?[0,0]:[15,18];if(a.mouseOffset){b[0]+=a.mouseOffset[0];b[1]+=a.mouseOffset[1]}return b},fadeOut:function(){var a=this;a.el.fadeOut({duration:a.fadeOutDuration,callback:function(){a.hide();a.el.setOpacity("")}})},getAnchorPosition:function(){var b=this,a;if(b.anchor){b.tipAnchor=b.anchor.charAt(0)}else{a=b.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/);b.tipAnchor=a[1].charAt(0)}switch(b.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var c=this,d,b,a=c.getAnchorPosition().charAt(0);if(c.anchorToTarget&&!c.trackMouse){switch(a){case"t":b=[0,9];break;case"b":b=[0,-13];break;case"r":b=[-13,0];break;default:b=[9,0];break}}else{switch(a){case"t":b=[-15-c.anchorOffset,30];break;case"b":b=[-19-c.anchorOffset,-13-c.el.dom.offsetHeight];break;case"r":b=[-15-c.el.dom.offsetWidth,-13-c.anchorOffset];break;default:b=[25,-13-c.anchorOffset];break}}d=c.getMouseOffset();b[0]+=d[0];b[1]+=d[1];return b},onTargetOver:function(d){var c=this,b=c.delegate,a;if(c.disabled||d.within(c.target.dom,true)){return}a=b?d.getTarget(b):true;if(a){c.triggerElement=a;c.triggerEvent=d;c.clearTimer("hide");c.targetXY=d.getXY();c.delayShow()}},delayShow:function(c){var a=this,b=a.el&&(c===false||!a.trackMouse)&&a.getTargetXY();if(a.hidden&&!a.showTimer){if(Ext.Date.getElapsed(a.lastActive)<a.quickShowInterval){a.show()}else{a.showTimer=Ext.defer(a.showFromDelay,a.showDelay,a,[b])}}else{if(!a.hidden&&a.autoHide!==false){a.show(b)}}},showFromDelay:function(b){var a=this;if(a.disabled){return}a.fromDelayShow=true;a.show(b);delete a.fromDelayShow},onShowVeto:function(){Ext.tip.Tip.prototype.onShowVeto.call(this);delete this.triggerElement;this.clearTimer("show")},onTargetOut:function(d){var b=this,a=b.triggerElement,c=a===true?b.target:a;if(b.disabled||!a||d.within(c,true)){return}if(b.showTimer){b.clearTimer("show");b.triggerElement=null}if(b.autoHide!==false){b.delayHide()}},delayHide:function(){var a=this;if(!a.hidden&&!a.hideTimer){a.hideTimer=Ext.defer(a[a.hideAction],a.hideDelay,a)}},hide:function(){var a=this;a.clearTimer("dismiss");a.lastActive=new Date();if(a.anchorEl){a.anchorEl.hide()}Ext.tip.Tip.prototype.hide.apply(this,arguments);delete a.triggerElement},show:function(b){var a=this;Ext.tip.Tip.prototype.show.call(this);if(this.hidden===false){if(a.anchor){a.anchor=a.origAnchor}if(!a.calledFromShowAt){a.showAt(b||a.getTargetXY())}}},showAt:function(b){var a=this;a.lastActive=new Date();a.clearTimers();a.calledFromShowAt=true;if(!a.isVisible()){Ext.tip.Tip.prototype.showAt.apply(this,arguments)}if(a.isVisible()){a.setPagePosition(b[0],b[1]);if(a.constrainPosition||a.constrain){a.doConstrain()}a.toFront(true);a.el.syncUnderlays();if(a.dismissDelay&&a.autoHide!==false){a.dismissTimer=Ext.defer(a.hide,a.dismissDelay,a)}}delete a.calledFromShowAt},syncAnchor:function(){var c=this,a,b,d;switch(c.tipAnchor.charAt(0)){case"t":a="b";b="tl";d=[20+c.anchorOffset,1];break;case"r":a="l";b="tr";d=[-1,12+c.anchorOffset];break;case"b":a="t";b="bl";d=[20+c.anchorOffset,-1];break;default:a="r";b="tl";d=[1,12+c.anchorOffset];break}c.anchorEl.alignTo(c.el,a+"-"+b,d);c.anchorEl.setStyle("z-index",parseInt(c.el.getZIndex(),10)||0+1).setVisibilityMode(Ext.Element.DISPLAY)},afterSetPosition:function(a,c){var b=this;Ext.tip.Tip.prototype.afterSetPosition.apply(this,arguments);if(b.anchor){b.syncAnchor();if(!b.anchorEl.isVisible()){b.anchorEl.show()}}else{b.anchorEl.hide()}},_timerNames:{},clearTimer:function(a){var b=this,d=b._timerNames,c=d[a]||(d[a]=a+"Timer"),f=b[c];if(f){clearTimeout(f);b[c]=null}},clearTimers:function(){var a=this;a.clearTimer("show");a.clearTimer("dismiss");a.clearTimer("hide")},onShow:function(){var a=this;Ext.tip.Tip.prototype.onShow.call(this);a.mon(Ext.getDoc(),"mousedown",a.onDocMouseDown,a)},onHide:function(){var a=this;Ext.tip.Tip.prototype.onHide.call(this);a.mun(Ext.getDoc(),"mousedown",a.onDocMouseDown,a)},onDocMouseDown:function(b){var a=this;if(!a.closable&&!b.within(a.el.dom)){a.disable();Ext.defer(a.doEnable,100,a)}},doEnable:function(){if(!this.destroyed){this.enable()}},onDisable:function(){Ext.tip.Tip.prototype.onDisable.call(this);this.clearTimers();this.hide()},beforeDestroy:function(){var a=this;a.clearTimers();Ext.destroy(a.anchorEl);delete a.anchorEl;delete a.target;delete a.anchorTarget;delete a.triggerElement;Ext.tip.Tip.prototype.beforeDestroy.call(this)},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this);Ext.tip.Tip.prototype.onDestroy.call(this)}},0,["tooltip"],["component","box","container","panel","tip","tooltip"],{component:true,box:true,container:true,panel:true,tip:true,tooltip:true},["widget.tooltip"],0,[Ext.tip,"ToolTip",Ext,"ToolTip"],0));(Ext.cmd.derive("Ext.tip.QuickTip",Ext.tip.ToolTip,{alternateClassName:"Ext.QuickTip",interceptTitles:false,title:"&#160;",tagConfig:{namespace:"data-",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor",showDelay:"qshowDelay",hideAction:"hideAction",anchorTarget:"anchorTarget"},isQuickTip:true,shrinkWrapDock:true,initComponent:function(){var a=this;a.target=a.target||Ext.getDoc();a.targets=a.targets||{};Ext.tip.ToolTip.prototype.initComponent.call(this)},setTagConfig:function(a){this.tagConfig=Ext.apply({},a);delete this.tagConfig.attr},text:null,register:function(c){var h=Ext.isArray(c)?c:arguments,d=0,a=h.length,g,b,f;for(;d<a;d++){c=h[d];g=c.target;if(g){if(Ext.isArray(g)){for(b=0,f=g.length;b<f;b++){this.targets[Ext.id(g[b])]=c}}else{this.targets[Ext.id(g)]=c}}}},unregister:function(a){delete this.targets[Ext.id(a)]},cancelShow:function(a){var b=this,c=b.activeTarget;a=Ext.get(a).dom;if(b.isVisible()){if(c&&c.el===a){b.hide()}}else{if(c&&c.el===a){b.clearTimer("show")}}},getTipCfg:function(f,d){var c=f.title,b=this.tagConfig,a=b.attr||(b.attr=b.namespace+b.attribute),g;if(this.interceptTitles&&c&&Ext.isString(c)){f.setAttribute(a,c);f.removeAttribute("title");return{text:c}}else{f=Ext.fly(f).findParent(function(h){return(g=h.getAttribute(a))});if(f){return{target:f,text:g}}}},onTargetOver:function(a){this.doTargetOver(a.getTarget(this.delegate),null,a)},doTargetOver:function(m,u,b){var o=this,a,f,g,c,j,p,d,r,h,t,q,s;if(o.disabled){return}if(typeof m==="string"){m=Ext.getDom(m)}o.targetXY=u||(b?b.getXY():Ext.fly(m).getXY());if(!m||m.nodeType!==1||m===document.documentElement||m===document.body){return}if(o.activeTarget&&((m===o.activeTarget.el)||Ext.fly(o.activeTarget.el).contains(m))){if(o.targetTextEmpty()){o.onShowVeto();delete o.activeTarget}else{o.clearTimer("hide");o.show()}return}if(m){h=o.targets;for(s in h){if(h.hasOwnProperty(s)){q=h[s];t=Ext.fly(q.target);if(t&&(t.dom===m||t.contains(m))){c=t.dom;break}}}if(c){o.activeTarget=o.targets[c.id];o.activeTarget.el=m;o.anchor=o.activeTarget.anchor;if(o.anchor){o.anchorTarget=m}a=parseInt(o.activeTarget.showDelay,10);if(a){g=o.showDelay;o.showDelay=a}o.delayShow();if(a){o.showDelay=g}if(!(f=o.activeTarget.hideAction)){delete o.hideAction}else{o.hideAction=f}return}}c=Ext.fly(m,"_quicktip-target");j=o.tagConfig;p=j.namespace;d=o.getTipCfg(m,b);if(d){if(d.target){m=d.target;c=Ext.fly(m,"_quicktip-target")}r=c.getAttribute(p+j.hide);o.activeTarget={el:m,text:d.text,width:+c.getAttribute(p+j.width)||null,autoHide:r!=="user"&&r!=="false",title:c.getAttribute(p+j.title),cls:c.getAttribute(p+j.cls),align:c.getAttribute(p+j.align),showDelay:parseInt(c.getAttribute(p+j.showDelay)||0,10),hideAction:c.getAttribute(p+j.hideAction),anchorTarget:c.getAttribute(p+j.anchorTarget)};if(!o.initialConfig.hasOwnProperty("anchor")){o.anchor=c.getAttribute(p+j.anchor)}if(o.anchor&&!o.initialConfig.hasOwnProperty("anchorTarget")){o.anchorTarget=o.activeTarget.anchorTarget||m}a=parseInt(o.activeTarget.showDelay,10);if(a){g=o.showDelay;o.showDelay=a}o.delayShow();if(a){o.showDelay=g}}},onTargetOut:function(f){var c=this,d=c.activeTarget,a,b;if(d&&f.within(c.activeTarget.el)&&!c.getTipCfg(f.getTarget(),f)){return}c.clearTimer("show");delete c.activeTarget;if(c.autoHide!==false){a=d&&parseInt(d.hideDelay,10);if(a){b=c.hideDelay;c.hideDelay=a}c.delayHide();if(a){c.hideDelay=b}}},targetTextEmpty:function(){var c=this,d=c.activeTarget,a=c.tagConfig,b,f;if(d){b=d.el;if(b){f=b.getAttribute(a.namespace+a.attribute);if(!f&&!c.targets[Ext.id(d.target)]){return true}}}return false},show:function(){var b=this,a=b.fromDelayShow;if(a&&b.targetTextEmpty()){b.onShowVeto();delete b.activeTarget;return}Ext.tip.ToolTip.prototype.show.apply(this,arguments)},showAt:function(f){var c=this,d=c.activeTarget,g=c.header,b,a;if(d){if(!c.rendered){c.render(Ext.getBody());c.activeTarget=d}c.suspendLayouts();if(d.title){c.setTitle(d.title);g.show()}else{if(g){g.hide()}}c.update(d.text);c.autoHide=d.autoHide;b=d.dismissDelay;c.dismissDelay=Ext.isNumber(b)?b:c.dismissDelay;if(d.mouseOffset){f[0]+=d.mouseOffset[0];f[1]+=d.mouseOffset[1]}a=c.lastCls;if(a){c.removeCls(a);delete c.lastCls}a=d.cls;if(a){c.addCls(a);c.lastCls=a}c.setWidth(d.width);if(c.anchor){c.constrainPosition=false}else{if(d.align){f=c.getAlignToXY(d.el,d.align);c.constrainPosition=false}else{c.constrainPosition=true}}c.resumeLayouts(true)}Ext.tip.ToolTip.prototype.showAt.call(this,f)},showByTarget:function(g){var c=this,f,b,d,a,h;f=c.targets[g.id];if(f){c.activeTarget=f;c.activeTarget.el=Ext.get(g).dom;c.anchor=c.activeTarget.anchor;b=g.getSize();d=g.getXY();c.showAt([d[0],d[1]+b.height])}},hide:function(){delete this.activeTarget;Ext.tip.ToolTip.prototype.hide.call(this)}},0,["quicktip"],["component","box","container","panel","tip","tooltip","quicktip"],{component:true,box:true,container:true,panel:true,tip:true,tooltip:true,quicktip:true},["widget.quicktip"],0,[Ext.tip,"QuickTip",Ext,"QuickTip"],0));(Ext.cmd.derive("Ext.tip.QuickTipManager",Ext.Base,{singleton:true,alternateClassName:"Ext.QuickTips",disabled:false,init:function(f,b){var d=this;if(!d.tip){if(!Ext.isReady){Ext.onInternalReady(function(){Ext.tip.QuickTipManager.init(f,b)});return false}var a=Ext.apply({disabled:d.disabled,id:"ext-quicktips-tip"},b),c=a.className,g=a.xtype;if(c){delete a.className}else{if(g){c="widget."+g;delete a.xtype}}if(f!==false){a.renderTo=document.body}d.tip=Ext.create(c||"Ext.tip.QuickTip",a);Ext.quickTipsActive=true}},destroy:function(){Ext.destroy(this.tip);this.tip=undefined},ddDisable:function(){var a=this,b=a.tip;if(b&&!a.disabled){b.disable()}},ddEnable:function(){var a=this,b=a.tip;if(b&&!a.disabled){b.enable()}},enable:function(){var a=this,b=a.tip;if(b){b.enable()}a.disabled=false},disable:function(){var a=this,b=a.tip;if(b){b.disable()}a.disabled=true},isEnabled:function(){var a=this.tip;return a!==undefined&&!a.disabled},getQuickTip:function(){return this.tip},register:function(){var a=this.tip;a.register.apply(a,arguments)},unregister:function(){var a=this.tip;a.unregister.apply(a,arguments)},tips:function(){var a=this.tip;a.register.apply(a,arguments)}},0,0,0,0,0,0,[Ext.tip,"QuickTipManager",Ext,"QuickTips"],0));(Ext.cmd.derive("Ext.toolbar.Separator",Ext.toolbar.Item,{alternateClassName:"Ext.Toolbar.Separator",baseCls:"x-toolbar-separator",ariaRole:"separator"},0,["tbseparator"],["component","box","tbitem","tbseparator"],{component:true,box:true,tbitem:true,tbseparator:true},["widget.tbseparator"],0,[Ext.toolbar,"Separator",Ext.Toolbar,"Separator"],0));(Ext.cmd.derive("Ext.menu.Item",Ext.Component,{alternateClassName:"Ext.menu.TextItem",isMenuItem:true,activated:false,activeCls:"x-menu-item-active",clickHideDelay:0,destroyMenu:true,disabledCls:"x-menu-item-disabled",hideOnClick:true,menuAlign:"tl-tr?",menuExpandDelay:200,menuHideDelay:200,tooltipType:"qtip",focusable:true,ariaRole:"menuitem",ariaEl:"itemEl",baseCls:"x-menu-item",arrowCls:"x-menu-item-arrow",baseIconCls:"x-menu-item-icon",textCls:"x-menu-item-text",indentCls:"x-menu-item-indent",indentNoSeparatorCls:"x-menu-item-indent-no-separator",indentRightIconCls:"x-menu-item-indent-right-icon",indentRightArrowCls:"x-menu-item-indent-right-arrow",linkCls:"x-menu-item-link",linkHrefCls:"x-menu-item-link-href",childEls:["itemEl","iconEl","textEl","arrowEl"],renderTpl:'<tpl if="plain">{text}<tpl else><a id="{id}-itemEl" data-ref="itemEl" class="{linkCls}<tpl if="hasHref"> {linkHrefCls}</tpl>{childElCls}" href="{href}" <tpl if="hrefTarget"> target="{hrefTarget}"</tpl> hidefocus="true" unselectable="on"<tpl if="tabIndex != null"> tabindex="{tabIndex}"</tpl><tpl foreach="ariaAttributes"> {$}="{.}"</tpl>><span id="{id}-textEl" data-ref="textEl" class="{textCls} {textCls}-{ui} {indentCls}{childElCls}" unselectable="on">{text}</span><tpl if="hasIcon"><div role="presentation" id="{id}-iconEl" data-ref="iconEl" class="{baseIconCls}-{ui} {baseIconCls}{[values.rightIcon ? "-right" : ""]} {iconCls}{childElCls} {glyphCls}" style="<tpl if="icon">background-image:url({icon});</tpl><tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>"><tpl if="glyph">&#{glyph};</tpl></div></tpl><tpl if="showCheckbox"><div role="presentation" id="{id}-checkEl" data-ref="checkEl" class="{baseIconCls}-{ui} {baseIconCls}{[(values.hasIcon && !values.rightIcon) ? "-right" : ""]} {groupCls} {checkboxCls}{childElCls}"></div></tpl><tpl if="hasMenu"><div role="presentation" id="{id}-arrowEl" data-ref="arrowEl" class="{arrowCls} {arrowCls}-{ui}{childElCls}"></div></tpl></a></tpl>',maskOnDisable:false,iconAlign:"left",initComponent:function(){var b=this,a=b.cls?[b.cls]:[],c;if(b.hasOwnProperty("canActivate")){b.focusable=b.canActivate}if(b.plain){a.push("x-menu-item-plain")}if(a.length){b.cls=a.join(" ")}if(b.menu){c=b.menu;b.menu=null;b.setMenu(c)}Ext.Component.prototype.initComponent.apply(this,arguments)},canFocus:function(){var a=this;return a.focusable&&a.rendered&&a.canActivate!==false&&!a.destroying&&!a.destroyed&&a.isVisible(true)},onFocus:function(b){var a=this;Ext.Component.prototype.onFocus.call(this,b);if(!a.disabled){if(!a.plain){a.addCls(a.activeCls)}a.activated=true;if(a.hasListeners.activate){a.fireEvent("activate",a)}}},onFocusLeave:function(b){var a=this;Ext.Component.prototype.onFocusLeave.call(this,b);if(a.activated){if(!a.plain){a.removeCls(a.activeCls)}a.doHideMenu();a.activated=false;if(a.hasListeners.deactivate){a.fireEvent("deactivate",a)}}},doHideMenu:function(){var a=this.menu;this.cancelDeferExpand();if(a&&a.isVisible()){a.hide()}},deferHideParentMenus:function(){for(var a=this.getRefOwner();a&&((a.isMenu&&a.floating)||a.isMenuItem);a=a.getRefOwner()){if(a.isMenu){a.hide()}}},expandMenu:function(c,a){var b=this;if(b.activated&&b.menu){b.hideOnClick=false;b.cancelDeferHide();a=a==null?b.menuExpandDelay:a;if(a===0){b.doExpandMenu(c)}else{b.cancelDeferExpand();b.expandMenuTimer=Ext.defer(b.doExpandMenu,a,b,[c])}}},doExpandMenu:function(a){var b=this,c=b.menu;if(!c.isVisible()){b.parentMenu.activeChild=c;c.ownerCmp=b;c.parentMenu=b.parentMenu;c.constrainTo=document.body;c.autoFocus=!a||!a.pointerType;c.showBy(b,b.menuAlign)}},getRefItems:function(a){var c=this.menu,b;if(c){b=c.getRefItems(a);b.unshift(c)}return b||[]},getValue:function(){return this.value},hideMenu:function(a){var b=this;if(b.menu){b.cancelDeferExpand();b.hideMenuTimer=Ext.defer(b.doHideMenu,Ext.isNumber(a)?a:b.menuHideDelay,b)}},onClick:function(f){var d=this,c=d.clickHideDelay,g=f.browserEvent,b,a;if(!d.href||d.disabled){f.stopEvent();if(d.disabled){return false}}if(d.disabled||d.handlingClick){return}if(d.hideOnClick){if(!c){d.deferHideParentMenus()}else{d.deferHideParentMenusTimer=Ext.defer(d.deferHideParentMenus,c,d)}}b=d.fireEvent("click",d,f);if(d.destroyed){return}if(b!==false&&d.handler){Ext.callback(d.handler,d.scope,[d,f],0,d)}if(Ext.isIE9m){a=g.returnValue===false?true:false}else{a=!!g.defaultPrevented}if(d.href&&f.type!=="click"&&!a){d.handlingClick=true;d.itemEl.dom.click();d.handlingClick=false}if(!d.hideOnClick){d.focus()}return b},onRemoved:function(){var a=this;if(a.activated&&a.parentMenu.activeItem===a){a.parentMenu.deactivateActiveItem()}Ext.Component.prototype.onRemoved.apply(this,arguments);a.parentMenu=a.ownerCmp=null},beforeDestroy:function(){var a=this;if(a.rendered){a.clearTip()}Ext.Component.prototype.beforeDestroy.call(this)},onDestroy:function(){var a=this;a.cancelDeferExpand();a.cancelDeferHide();clearTimeout(a.deferHideParentMenusTimer);a.setMenu(null);Ext.Component.prototype.onDestroy.apply(this,arguments)},beforeRender:function(){var m=this,o=m.glyph,j=Ext._glyphFontFamily,f=!!(m.icon||m.iconCls||o),p=!!m.menu,g=((m.iconAlign==="right")&&!p),c=m.isMenuCheckItem,a=[],d=m.ownerCt,h=d.plain,b;if(m.plain){m.ariaEl="el"}Ext.Component.prototype.beforeRender.call(this);if(f){if(p&&m.showCheckbox){f=false}}if(typeof o==="string"){b=o.split("@");o=b[0];j=b[1]}if(!h||(f&&!g)||c){if(d.showSeparator&&!h){a.push(m.indentCls)}else{a.push(m.indentNoSeparatorCls)}}if(p){a.push(m.indentRightArrowCls)}else{if(f&&(g||c)){a.push(m.indentRightIconCls)}}Ext.applyIf(m.renderData,{hasHref:!!m.href,href:m.href||"#",hrefTarget:m.hrefTarget,icon:m.icon,iconCls:m.iconCls,glyph:o,glyphCls:o?"x-menu-item-glyph":undefined,glyphFontFamily:j,hasIcon:f,hasMenu:p,indent:!h||f||c,isCheckItem:c,rightIcon:g,plain:m.plain,text:m.text,arrowCls:m.arrowCls,baseIconCls:m.baseIconCls,textCls:m.textCls,indentCls:a.join(" "),linkCls:m.linkCls,linkHrefCls:m.linkHrefCls,groupCls:m.group?m.groupCls:"",tabIndex:m.tabIndex})},onRender:function(){var a=this;Ext.Component.prototype.onRender.apply(this,arguments);if(a.tooltip){a.setTooltip(a.tooltip,true)}},getMenu:function(){return this.menu||null},setMenu:function(j,h){var g=this,c=g.menu,b=g.arrowEl,a=g.ariaEl.dom,f,d;if(c){c.ownerCmp=c.parentMenu=null;if(h===true||(h!==false&&g.destroyMenu)){Ext.destroy(c)}if(a){a.removeAttribute("aria-haspopup");a.removeAttribute("aria-owns")}else{f=(g.ariaRenderAttributes||(g.ariaRenderAttributes={}));delete f["aria-haspopup"];delete f["aria-owns"]}}if(j){d=j.isMenu;j=g.menu=Ext.menu.Manager.get(j,{ownerCmp:g,focusOnToFront:false});j.setOwnerCmp(g,d);if(a){a.setAttribute("aria-haspopup",true);a.setAttribute("aria-owns",j.id)}else{f=(g.ariaRenderAttributes||(g.ariaRenderAttributes={}));f["aria-haspopup"]=true;f["aria-owns"]=j.id}}else{j=g.menu=null}if(j&&g.rendered&&!g.destroying&&b){b[j?"addCls":"removeCls"](g.arrowCls)}},setHandler:function(b,a){this.handler=b||null;this.scope=a},setIcon:function(b){var a=this.iconEl,c=this.icon;if(a){a.src=b||Ext.BLANK_IMAGE_URL}this.icon=b;this.fireEvent("iconchange",this,c,b)},setIconCls:function(b){var d=this,a=d.iconEl,c=d.iconCls;if(a){if(d.iconCls){a.removeCls(d.iconCls)}if(b){a.addCls(b)}}d.iconCls=b;d.fireEvent("iconchange",d,c,b)},setText:function(d){var c=this,b=c.textEl||c.el,a=c.text;c.text=d;if(c.rendered){b.setHtml(d||"");c.updateLayout()}c.fireEvent("textchange",c,a,d)},getTipAttr:function(){return this.tooltipType==="qtip"?"data-qtip":"title"},clearTip:function(){if(Ext.quickTipsActive&&Ext.isObject(this.tooltip)){Ext.tip.QuickTipManager.unregister(this.itemEl)}},setTooltip:function(c,a){var b=this;if(b.rendered){if(!a){b.clearTip()}if(Ext.quickTipsActive&&Ext.isObject(c)){Ext.tip.QuickTipManager.register(Ext.apply({target:b.itemEl.id},c));b.tooltip=c}else{b.itemEl.dom.setAttribute(b.getTipAttr(),c)}}else{b.tooltip=c}return b},privates:{cancelDeferExpand:function(){window.clearTimeout(this.expandMenuTimer)},cancelDeferHide:function(){window.clearTimeout(this.hideMenuTimer)},getFocusEl:function(){return this.plain?this.el:this.itemEl}}},0,["menuitem"],["component","box","menuitem"],{component:true,box:true,menuitem:true},["widget.menuitem"],[[Ext.mixin.Queryable.prototype.mixinId||Ext.mixin.Queryable.$className,Ext.mixin.Queryable]],[Ext.menu,"Item",Ext.menu,"TextItem"],0));Ext.define("Ext.theme.triton.menu.Item",{override:"Ext.menu.Item",compatibility:Ext.isIE8,onFocus:function(a){(arguments.callee.$previous||Ext.Component.prototype.onFocus).call(this,a);this.repaintIcons()},onFocusLeave:function(a){(arguments.callee.$previous||Ext.Component.prototype.onFocusLeave).call(this,a);this.repaintIcons()},privates:{repaintIcons:function(){var c=this.iconEl,b=this.arrowEl,a=this.checkEl;if(c){c.syncRepaint()}if(b){b.syncRepaint()}if(a){a.syncRepaint()}}}});(Ext.cmd.derive("Ext.menu.CheckItem",Ext.menu.Item,{checkedCls:"x-menu-item-checked",uncheckedCls:"x-menu-item-unchecked",groupCls:"x-menu-group-icon",hideOnClick:false,checkChangeDisabled:false,submenuText:"{0} submenu",ariaRole:"menuitemcheckbox",childEls:["checkEl"],showCheckbox:true,isMenuCheckItem:true,checkboxCls:"x-menu-item-checkbox",initComponent:function(){var a=this;a.checked=!!a.checked;Ext.menu.Item.prototype.initComponent.apply(this,arguments);if(a.group){Ext.menu.Manager.registerCheckable(a);if(a.initialConfig.hideOnClick!==false){a.hideOnClick=true}}},beforeRender:function(){var b=this,a;Ext.menu.Item.prototype.beforeRender.call(this);Ext.apply(b.renderData,{checkboxCls:b.checkboxCls,showCheckbox:b.showCheckbox});a=(b.ariaRenderAttributes||(b.ariaRenderAttributes={}));a["aria-checked"]=b.menu?"mixed":b.checked;if(b.menu){a["aria-label"]=Ext.String.formatEncode(b.submenuText,b.text)}},afterRender:function(){var a=this;Ext.menu.Item.prototype.afterRender.call(this);a.checked=!a.checked;a.setChecked(!a.checked,true);if(a.checkChangeDisabled){a.disableCheckChange()}if(Ext.isGecko&&a.checkEl){a.checkEl.on("mousedown",a.onMouseDownCheck)}},disableCheckChange:function(){var b=this,a=b.checkEl;if(a){a.addCls(b.disabledCls)}if(Ext.isIE8&&b.rendered){b.el.repaint()}b.checkChangeDisabled=true},enableCheckChange:function(){var b=this,a=b.checkEl;if(a){a.removeCls(b.disabledCls)}b.checkChangeDisabled=false},onMouseDownCheck:function(a){a.preventDefault()},onClick:function(b){var a=this;if(!(a.disabled||a.checkChangeDisabled||a.checked&&a.group||a.menu&&"touch"===b.pointerType&&!a.checkEl.contains(b.target))){a.setChecked(!a.checked);if(b.type==="keydown"&&a.menu){return false}}Ext.menu.Item.prototype.onClick.call(this,b)},onDestroy:function(){Ext.menu.Manager.unregisterCheckable(this);Ext.menu.Item.prototype.onDestroy.apply(this,arguments)},setText:function(c){var b=this,a=b.ariaEl.dom;Ext.menu.Item.prototype.setText.call(this,c);if(a&&b.menu){a.setAttribute("aria-label",Ext.String.formatEncode(b.submenuText,c))}},setChecked:function(f,c){var d=this,g=d.checkedCls,h=d.uncheckedCls,b=d.el,a=d.ariaEl.dom;if(d.checked!==f&&(c||d.fireEvent("beforecheckchange",d,f)!==false)){if(b){if(f){b.addCls(g);b.removeCls(h)}else{b.addCls(h);b.removeCls(g)}}if(a){a.setAttribute("aria-checked",d.menu?"mixed":!!f)}d.checked=f;Ext.menu.Manager.onCheckChange(d,f);if(!c){Ext.callback(d.checkHandler,d.scope,[d,f],0,d);d.fireEvent("checkchange",d,f)}}}},0,["menucheckitem"],["component","box","menuitem","menucheckitem"],{component:true,box:true,menuitem:true,menucheckitem:true},["widget.menucheckitem"],0,[Ext.menu,"CheckItem"],0));(Ext.cmd.derive("Ext.menu.Separator",Ext.menu.Item,{focusable:false,canActivate:false,hideOnClick:false,plain:true,separatorCls:"x-menu-item-separator",text:"&#160;",ariaRole:"separator",beforeRender:function(){this.addCls(this.separatorCls);Ext.menu.Item.prototype.beforeRender.call(this)}},0,["menuseparator"],["component","box","menuitem","menuseparator"],{component:true,box:true,menuitem:true,menuseparator:true},["widget.menuseparator"],0,[Ext.menu,"Separator"],0));Ext.define("Ext.theme.neptune.menu.Separator",{override:"Ext.menu.Separator",border:true});(Ext.cmd.derive("Ext.menu.Menu",Ext.panel.Panel,{enableKeyNav:true,allowOtherMenus:false,ariaRole:"menu",floating:true,constrain:true,hidden:true,hideMode:"visibility",ignoreParentClicks:false,isMenu:true,showSeparator:true,minWidth:undefined,defaultMinWidth:120,defaultAlign:"tl-bl?",focusOnToFront:false,bringParentToFront:false,defaultFocus:":focusable",menuClickBuffer:0,baseCls:"x-menu",_iconSeparatorCls:"x-menu-icon-separator",_itemCmpCls:"x-menu-item-cmp",layout:{type:"vbox",align:"stretchmax",overflowHandler:"Scroller"},initComponent:function(){var c=this,a=["x-menu"],d=c.bodyCls?[c.bodyCls]:[],f=c.floating!==false,b={element:"el",click:c.onClick,mouseover:c.onMouseOver,scope:c};if(Ext.supports.Touch){b.pointerdown=c.onMouseOver}c.on(b);c.on({beforeshow:c.onBeforeShow,scope:c});if(c.plain){a.push("x-menu-plain")}c.cls=a.join(" ");d.push("x-menu-body",Ext.dom.Element.unselectableCls);c.bodyCls=d.join(" ");if(f){if(c.minWidth===undefined){c.minWidth=c.defaultMinWidth}}else{c.hidden=!!c.initialConfig.hidden;c.constrain=false}Ext.panel.Panel.prototype.initComponent.apply(this,arguments);Ext.override(c.getLayout(),{configureItem:c.configureItem})},initFloatConstrain:Ext.emptyFn,getInherited:function(){var a=Ext.panel.Panel.prototype.getInherited.call(this);a.hidden=this.hidden;return a},beforeRender:function(){var a=this;Ext.panel.Panel.prototype.beforeRender.apply(this,arguments);if(!a.getSizeModel().width.shrinkWrap){a.layout.align="stretch"}if(a.floating){a.ariaRenderAttributes=a.ariaRenderAttributes||{};a.ariaRenderAttributes["aria-expanded"]=!!a.autoShow}},onBoxReady:function(){var b=this,c=b._iconSeparatorCls,a=b.focusableKeyNav;if(a){a.map.processEventScope=b;a.map.processEvent=function(d){if(d.keyCode===d.ESC){d.target=this.el.dom}return d};a.map.addBinding([{key:Ext.event.Event.ESC,handler:b.onEscapeKey,scope:b},{key:/[\w]/,handler:b.onShortcutKey,scope:b,shift:false,ctrl:false,alt:false}])}else{b.escapeKeyNav=new Ext.util.KeyNav(b.el,{eventName:"keydown",scope:b,esc:b.onEscapeKey})}Ext.panel.Panel.prototype.onBoxReady.apply(this,arguments);if(b.showSeparator){b.iconSepEl=b.body.insertFirst({role:"presentation",cls:c+" "+c+"-"+b.ui,html:"&#160;"})}if(Ext.supports.MSPointerEvents||Ext.supports.PointerEvents){b.el.on({scope:b,click:b.preventClick,translate:false})}b.mouseMonitor=b.el.monitorMouseLeave(100,b.onMouseLeave,b)},onFocusLeave:function(b){var a=this;Ext.panel.Panel.prototype.onFocusLeave.call(this,b);a.mixins.focusablecontainer.onFocusLeave.call(a,b);if(a.floating){a.hide()}},canActivateItem:function(a){return a&&a.isFocusable()},deactivateActiveItem:function(){var a=this,b=a.lastFocusedChild;if(b){b.blur()}},getItemFromEvent:function(d){var a=this,c=a.layout.getRenderTarget().dom,b=d.getTarget();while(b.parentNode!==c){b=b.parentNode;if(!b){return}}return Ext.getCmp(b.id)},lookupComponent:function(b){var a=this;if(typeof b==="string"){b=a.lookupItemFromString(b)}else{if(Ext.isObject(b)){b=a.lookupItemFromObject(b)}}if(!b.dock){b.minWidth=b.minWidth||a.minWidth}return b},lookupItemFromObject:function(b){var a=this;if(!b.isComponent){if(!b.xtype){b=Ext.create("Ext.menu."+(Ext.isBoolean(b.checked)?"Check":"")+"Item",b)}else{b=Ext.ComponentManager.create(b,b.xtype)}}if(b.isMenuItem){b.parentMenu=a}return b},lookupItemFromString:function(a){return(a==="separator"||a==="-")?new Ext.menu.Separator():new Ext.menu.Item({canActivate:false,hideOnClick:false,plain:true,text:a})},configureItem:function(c){var b=this.owner,f="x-",d=b.ui,a,g;if(c.isMenuItem){c.setUI(d)}else{if(b.items.getCount()>1&&!c.rendered&&!c.dock){g=b._itemCmpCls;a=[g+" "+g+"-"+d];if(!b.plain&&(c.indent!==false||c.iconCls==="no-icon")){a.push(f+"menu-item-indent-"+d)}if(c.rendered){c.el.addCls(a)}else{c.cls=(c.cls||"")+" "+a.join(" ")}c.$extraMenuCls=a}}this.callParent(arguments)},onRemove:function(a){Ext.panel.Panel.prototype.onRemove.call(this,a);if(!a.destroyed&&a.$extraMenuCls){a.el.removeCls(a.$extraMenuCls)}},onClick:function(g){var f=this,c=g.type,d,b,a=c==="keydown";if(f.disabled){g.stopEvent();return}d=f.getItemFromEvent(g);if(d&&d.isMenuItem){if(!d.menu||!f.ignoreParentClicks){b=d.onClick(g)}else{g.stopEvent()}if(d.menu&&b!==false&&a){d.expandMenu(g,0)}}if(!d||d.disabled){d=undefined}f.fireEvent("click",f,d,g)},onDestroy:function(){var a=this;if(a.escapeKeyNav){a.escapeKeyNav.destroy()}a.parentMenu=a.ownerCmp=a.escapeKeyNav=null;if(a.rendered){a.el.un(a.mouseMonitor);Ext.destroy(a.iconSepEl)}Ext.menu.Manager.onHide(a);Ext.panel.Panel.prototype.onDestroy.apply(this,arguments)},onMouseLeave:function(a){if(this.disabled){return}this.fireEvent("mouseleave",this,a)},onMouseOver:function(g){var f=this,h=g.getRelatedTarget(),b=!f.el.contains(h),d=f.getItemFromEvent(g),c=f.parentMenu,a=f.ownerCmp;if(b&&c){c.setActiveItem(a);a.cancelDeferHide();c.mouseMonitor.mouseenter()}if(f.disabled){return}if(d){if(!d.containsFocus){d.focus()}if(d.expandMenu){d.expandMenu(g)}}if(b){f.fireEvent("mouseenter",f,g)}f.fireEvent("mouseover",f,d,g)},setActiveItem:function(b){var a=this;if(b&&(b!==a.lastFocusedChild)){a.focusChild(b,1)}},onEscapeKey:function(){if(this.floating){this.hide()}},onShortcutKey:function(h,g){var b=String.fromCharCode(g.getCharCode()),c=this.query(">[text]"),a=c.length,f=this.lastFocusedChild,j=Ext.Array.indexOf(c,f),d=j;for(;;){if(++d===a){d=0}f=c[d];if(d===j){return}if(f.text&&f.text[0].toUpperCase()===b){f.focus();return}}},onFocusableContainerTabKey:function(a){if(this.floating){this.hide()}},onFocusableContainerEnterKey:function(a){this.onClick(a)},onFocusableContainerSpaceKey:function(a){this.onClick(a)},onFocusableContainerLeftKey:function(a){a.preventDefault();if(this.parentMenu){this.ownerCmp.focus();this.hide()}},onFocusableContainerRightKey:function(b){var a=this,c=a.lastFocusedChild;b.preventDefault();if(c&&c.expandMenu){c.expandMenu(b,0)}},onBeforeShow:function(){if(Ext.Date.getElapsed(this.lastHide)<this.menuClickBuffer){return false}},beforeShow:function(){var c=this,b,d,a;if(c.floating){b=c.hasFloatMenuParent();if(!b&&!c.allowOtherMenus){Ext.menu.Manager.hideAll()}if(b){c.focusAnchor=b.focusAnchor}else{d=Ext.Element.getActiveElement();if(d===document.body||d===document.documentElement){c.focusAnchor=null}else{c.focusAnchor=d}}c.savedMaxHeight=c.maxHeight;a=c.container.getViewSize().height;c.maxHeight=Math.min(c.maxHeight||a,a)}Ext.panel.Panel.prototype.beforeShow.apply(this,arguments)},afterShow:function(){var b=this,a=b.ariaEl.dom;Ext.panel.Panel.prototype.afterShow.apply(this,arguments);Ext.menu.Manager.onShow(b);if(b.floating&&a){a.setAttribute("aria-expanded",true)}if(b.floating&&b.autoFocus){b.maxHeight=b.savedMaxHeight;b.focus()}},onHide:function(g,c,d){var f=this,b=f.ariaEl.dom,a;if(f.el.contains(Ext.Element.getActiveElement())){a=f.focusAnchor||f.ownerCmp||f.up(":focusable");if(a){f.previousFocus=a}}Ext.panel.Panel.prototype.onHide.call(this,g,c,d);f.lastHide=Ext.Date.now();Ext.menu.Manager.onHide(f);if(f.floating&&b){b.setAttribute("aria-expanded",false)}},preventClick:function(b){var a=this.getItemFromEvent(b);if(a&&a.isMenuItem&&!a.href){b.preventDefault()}},privates:{hasFloatMenuParent:function(){return this.parentMenu||this.up("menu[floating=true]")},setOwnerCmp:function(b,a){var c=this;c.parentMenu=b.isMenuItem?b:null;c.ownerCmp=b;c.registerWithOwnerCt();delete c.hierarchicallyHidden;c.onInheritedAdd(b,a);c.containerOnAdded(b,a)}}},0,["menu"],["component","box","container","panel","menu"],{component:true,box:true,container:true,panel:true,menu:true},["widget.menu"],[[Ext.util.FocusableContainer.prototype.mixinId||Ext.util.FocusableContainer.$className,Ext.util.FocusableContainer]],[Ext.menu,"Menu"],0));Ext.define("Ext.theme.neptune.menu.Menu",{override:"Ext.menu.Menu",showSeparator:false});Ext.define("Ext.theme.triton.menu.Menu",{override:"Ext.menu.Menu",compatibility:Ext.isIE8,afterShow:function(){var f=this,b,d,c,a;(arguments.callee.$previous||Ext.panel.Panel.prototype.afterShow).apply(this,arguments);b=f.items.getRange();for(c=0,a=b.length;c<a;c++){d=b[c];if(d&&d.repaintIcons){d.repaintIcons()}}}});(Ext.cmd.derive("Ext.util.Queue",Ext.Base,{constructor:function(){this.clear()},add:function(c){var b=this,a=b.getKey(c);if(!b.map[a]){++b.length;b.items.push(c);b.map[a]=c}return c},clear:function(){var b=this,a=b.items;b.items=[];b.map={};b.length=0;return a},contains:function(b){var a=this.getKey(b);return this.map.hasOwnProperty(a)},getCount:function(){return this.length},getKey:function(a){return a.id},remove:function(f){var d=this,c=d.getKey(f),a=d.items,b;if(d.map[c]){b=Ext.Array.indexOf(a,f);Ext.Array.erase(a,b,1);delete d.map[c];--d.length}return f}},1,0,0,0,0,0,[Ext.util,"Queue"],0));(Ext.cmd.derive("Ext.layout.ContextItem",Ext.Base,{heightModel:null,widthModel:null,sizeModel:null,optOut:false,ownerSizePolicy:null,boxChildren:null,boxParent:null,children:[],dirty:null,dirtyCount:0,hasRawContent:true,isContextItem:true,isTopLevel:false,consumersContentHeight:0,consumersContentWidth:0,consumersContainerHeight:0,consumersContainerWidth:0,consumersHeight:0,consumersWidth:0,ownerCtContext:null,remainingChildDimensions:0,props:null,state:null,wrapsComponent:false,constructor:function(v){var w=this,t=Ext.layout.SizeModel.sizeModels,o=t.configured,m=t.shrinkWrap,b,u,r,q,g,d,y,f,s,p,c,j,h,a;Ext.apply(w,v);y=w.target;b=w.el;w.id=y.id;w.flushedProps={};w.props=g={};w.styles={};if(!y.isComponent){u=b.lastBox}else{w.wrapsComponent=true;w.framing=y.frameSize||null;w.isComponentChild=y.ownerLayout&&y.ownerLayout.isComponentLayout;u=y.lastBox;r=y.ownerCt;if(r&&(q=r.el&&w.context.items[r.el.id])){w.ownerCtContext=q}w.sizeModel=d=y.getSizeModel(q&&q.widthModel.pairsByHeightOrdinal[q.heightModel.ordinal]);w.widthModel=j=d.width;w.heightModel=h=d.height;if(u&&u.invalid===false){p=(y.width===(f=u.width));c=(y.height===(s=u.height));if(j===m&&h===m){a=true}else{if(j===o&&p){a=h===m||(h===o&&c)}}if(a){w.optOut=true;g.width=f;g.height=s}}}w.lastBox=u},init:function(j,c){var v=this,a=v.props,d=v.dirty,o=v.ownerCtContext,r=v.target.ownerLayout,h=!v.state,w=j||h,f,q,p,s,b,y,z=v.heightModel,g=v.widthModel,m,t,u=0;v.dirty=v.invalid=false;v.props={};v.remainingChildDimensions=0;if(v.boxChildren){v.boxChildren.length=0}if(!h){v.clearAllBlocks("blocks");v.clearAllBlocks("domBlocks")}if(!v.wrapsComponent){return w}y=v.target;v.state={};if(h){if(y.beforeLayout&&y.beforeLayout!==Ext.emptyFn){y.beforeLayout()}if(!o&&(s=y.ownerCt)){o=v.context.items[s.el.id]}if(o){v.ownerCtContext=o;v.isBoxParent=r&&r.isItemBoxParent(v)}else{v.isTopLevel=true}v.frameBodyContext=v.getEl("frameBody")}else{o=v.ownerCtContext;v.isTopLevel=!o;f=v.children;for(q=0,p=f.length;q<p;++q){f[q].init(true)}}v.hasRawContent=!(y.isContainer&&y.items.items.length>0);if(j){v.widthModel=v.heightModel=null;b=y.getSizeModel(o&&o.widthModel.pairsByHeightOrdinal[o.heightModel.ordinal]);if(h){v.sizeModel=b}v.widthModel=b.width;v.heightModel=b.height;if(o&&!v.isComponentChild){if(r.needsItemSize||!y.liquidLayout){o.remainingChildDimensions+=2}else{if(v.widthModel.calculated){++o.remainingChildDimensions}if(v.heightModel.calculated){++o.remainingChildDimensions}}}}else{if(a){v.recoverProp("x",a,d);v.recoverProp("y",a,d);if(v.widthModel.calculated){v.recoverProp("width",a,d)}else{if("width" in a){++u}}if(v.heightModel.calculated){v.recoverProp("height",a,d)}else{if("height" in a){++u}}if(o&&!v.isComponentChild){o.remainingChildDimensions+=u}}}if(a&&r&&r.manageMargins){v.recoverProp("margin-top",a,d);v.recoverProp("margin-right",a,d);v.recoverProp("margin-bottom",a,d);v.recoverProp("margin-left",a,d)}if(c){m=c.heightModel;t=c.widthModel;if(t&&m&&g&&z){if(g.shrinkWrap&&z.shrinkWrap){if(t.constrainedMax&&m.constrainedMin){m=null}}}if(t){v.widthModel=t}if(m){v.heightModel=m}if(c.state){Ext.apply(v.state,c.state)}}return w},initContinue:function(f){var h=this,d=h.ownerCtContext,a=h.target,c=h.widthModel,g=a.getInherited(),b;if(c.fixed){g.inShrinkWrapTable=false}else{delete g.inShrinkWrapTable}if(f){if(d&&c.shrinkWrap){b=d.isBoxParent?d:d.boxParent;if(b){b.addBoxChild(h)}}else{if(c.natural){h.boxParent=d}}}return f},initDone:function(d){var b=this,a=b.props,c=b.state;if(b.remainingChildDimensions===0){a.containerChildrenSizeDone=true}if(d){a.containerLayoutDone=true}if(b.boxChildren&&b.boxChildren.length&&b.widthModel.shrinkWrap){b.el.setWidth(10000);c.blocks=(c.blocks||0)+1}},initAnimation:function(){var b=this,c=b.target,a=b.ownerCtContext;if(a&&a.isTopLevel){b.animatePolicy=c.ownerLayout.getAnimatePolicy(b)}else{if(!a&&c.isCollapsingOrExpanding&&c.animCollapse){b.animatePolicy=c.componentLayout.getAnimatePolicy(b)}}if(b.animatePolicy){b.context.queueAnimation(b)}},addBlock:function(b,d,f){var c=this,g=c[b]||(c[b]={}),a=g[f]||(g[f]={});if(!a[d.id]){a[d.id]=d;++d.blockCount;++c.context.blockCount}},addBoxChild:function(d){var c=this,b,a=d.widthModel;d.boxParent=this;d.measuresBox=a.shrinkWrap?d.hasRawContent:a.natural;if(d.measuresBox){b=c.boxChildren;if(b){b.push(d)}else{c.boxChildren=[d]}}},addPositionStyles:function(d,b){var a=b.x,f=b.y,c=0;if(a!==undefined){d.left=a+"px";++c}if(f!==undefined){d.top=f+"px";++c}return c},addTrigger:function(g,h){var f=this,a=h?"domTriggers":"triggers",j=f[a]||(f[a]={}),b=f.context,d=b.currentLayout,c=j[g]||(j[g]={});if(!c[d.id]){c[d.id]=d;++d.triggerCount;c=b.triggers[h?"dom":"data"];(c[d.id]||(c[d.id]=[])).push({item:this,prop:g});if(f.props[g]!==undefined){if(!h||!(f.dirty&&(g in f.dirty))){++d.firedTriggers}}}},boxChildMeasured:function(){var b=this,c=b.state,a=(c.boxesMeasured=(c.boxesMeasured||0)+1);if(a===b.boxChildren.length){c.clearBoxWidth=1;++b.context.progressCount;b.markDirty()}},borderNames:["border-top-width","border-right-width","border-bottom-width","border-left-width"],marginNames:["margin-top","margin-right","margin-bottom","margin-left"],paddingNames:["padding-top","padding-right","padding-bottom","padding-left"],trblNames:["top","right","bottom","left"],cacheMissHandlers:{borderInfo:function(a){var b=a.getStyles(a.borderNames,a.trblNames);b.width=b.left+b.right;b.height=b.top+b.bottom;return b},marginInfo:function(a){var b=a.getStyles(a.marginNames,a.trblNames);b.width=b.left+b.right;b.height=b.top+b.bottom;return b},paddingInfo:function(b){var a=b.frameBodyContext||b,c=a.getStyles(b.paddingNames,b.trblNames);c.width=c.left+c.right;c.height=c.top+c.bottom;return c}},checkCache:function(a){return this.cacheMissHandlers[a](this)},clearAllBlocks:function(a){var c=this[a],b;if(c){for(b in c){this.clearBlocks(a,b)}}},clearBlocks:function(c,g){var h=this[c],b=h&&h[g],d,f,a;if(b){delete h[g];d=this.context;for(a in b){f=b[a];--d.blockCount;if(!--f.blockCount&&!f.pending&&!f.done){d.queueLayout(f)}}}},block:function(a,b){this.addBlock("blocks",a,b)},domBlock:function(a,b){this.addBlock("domBlocks",a,b)},fireTriggers:function(b,g){var h=this[b],d=h&&h[g],c=this.context,f,a;if(d){for(a in d){f=d[a];++f.firedTriggers;if(!f.done&&!f.blockCount&&!f.pending){c.queueLayout(f)}}}},flush:function(){var b=this,a=b.dirty,c=b.state,d=b.el;b.dirtyCount=0;if("attributes" in b){d.set(b.attributes);delete b.attributes}if("innerHTML" in b){d.innerHTML=b.innerHTML;delete b.innerHTML}if(c&&c.clearBoxWidth){c.clearBoxWidth=0;b.el.setStyle("width",null);if(!--c.blocks){b.context.queueItemLayouts(b)}}if(a){delete b.dirty;b.writeProps(a,true)}},flushAnimations:function(){var s=this,c=s.previousSize,p,r,f,h,g,d,m,q,o,a,b;if(c){p=s.target;r=p.getAnimationProps();f=r.duration;h=Ext.Object.getKeys(s.animatePolicy);g=Ext.apply({},{from:{},to:{},duration:f||Ext.fx.Anim.prototype.duration},r);for(d=0,m=0,q=h.length;m<q;m++){o=h[m];a=c[o];b=s.peek(o);if(a!==b){o=s.translateProps[o]||o;g.from[o]=a;g.to[o]=b;++d}}if(d){if(s.isCollapsingOrExpanding===1){p.componentLayout.undoLayout(s)}else{s.writeProps(g.from)}s.el.animate(g);g=Ext.fx.Manager.getFxQueue(s.el.id)[0];p.$layoutAnim=g;g.on({afteranimate:function(){delete p.$layoutAnim;if(p.destroying||p.destroyed){return}if(s.isCollapsingOrExpanding===1){p.componentLayout.redoLayout(s);p.afterCollapse(true)}else{if(s.isCollapsingOrExpanding===2){p.afterExpand(true)}}if(p.hasListeners.afterlayoutanimation){p.fireEvent("afterlayoutanimation",p)}}})}}},getBorderInfo:function(){var a=this,b=a.borderInfo;if(!b){a.borderInfo=b=a.checkCache("borderInfo")}return b},getEl:function(c,a){var f=this,g,d,b;if(c){if(c.dom){d=c}else{g=f.target;if(a){g=a}d=g[c];if(typeof d==="function"){d=d.call(g);if(d===f.el){return this}}}if(d){b=f.context.getEl(f,d)}}return b||null},getFrameInfo:function(){var c=this,d=c.frameInfo,b,a;if(!d){b=c.framing;a=c.getBorderInfo();c.frameInfo=d=b?{top:b.top+a.top,right:b.right+a.right,bottom:b.bottom+a.bottom,left:b.left+a.left,width:b.width+a.width,height:b.height+a.height}:a}return d},getMarginInfo:function(){var d=this,g=d.marginInfo,b,a,f,c;if(!g){if(!d.wrapsComponent){g=d.checkCache("marginInfo")}else{b=d.target;f=b.ownerLayout;c=f?f.id:null;a=f&&f.manageMargins;g=b.margin$;if(g&&g.ownerId!==c){g=null}if(!g){g=d.parseMargins(b,b.margin)||d.checkCache("marginInfo");if(a){d.setProp("margin-top",0);d.setProp("margin-right",0);d.setProp("margin-bottom",0);d.setProp("margin-left",0)}g.ownerId=c;b.margin$=g}g.width=g.left+g.right;g.height=g.top+g.bottom}d.marginInfo=g}return g},clearMarginCache:function(){delete this.marginInfo;delete this.target.margin$},getPaddingInfo:function(){var a=this,b=a.paddingInfo;if(!b){a.paddingInfo=b=a.checkCache("paddingInfo")}return b},getProp:function(c){var b=this,a=b.props[c];b.addTrigger(c);return a},getDomProp:function(c){var b=this,a=(b.dirty&&(c in b.dirty))?undefined:b.props[c];b.addTrigger(c,true);return a},getStyle:function(a){var c=this,b=c.styles,f,d;if(a in b){d=b[a]}else{f=c.styleInfo[a];d=c.el.getStyle(a);if(f&&f.parseInt){d=parseInt(d,10)||0}b[a]=d}return d},getStyles:function(r,b){var p=this,f=p.styles,s={},g=0,d=r.length,m,j,o,a,c,h,t,q;b=b||r;for(m=0;m<d;++m){a=r[m];if(a in f){s[b[m]]=f[a];++g;if(m&&g===1){j=r.slice(0,m);o=b.slice(0,m)}}else{if(g){(j||(j=[])).push(a);(o||(o=[])).push(b[m])}}}if(g<d){j=j||r;o=o||b;h=p.styleInfo;t=p.el.getStyle(j);for(m=j.length;m--;){a=j[m];c=h[a];q=t[a];if(c&&c.parseInt){q=parseInt(q,10)||0}s[o[m]]=q;f[a]=q}}return s},hasProp:function(a){return this.getProp(a)!=null},hasDomProp:function(a){return this.getDomProp(a)!=null},invalidate:function(a){this.context.queueInvalidate(this,a)},markDirty:function(){if(++this.dirtyCount===1){this.context.queueFlush(this)}},onBoxMeasured:function(){var a=this.boxParent,b=this.state;if(a&&a.widthModel.shrinkWrap&&!b.boxMeasured&&this.measuresBox){b.boxMeasured=1;a.boxChildMeasured()}},parseMargins:function(a,d){if(d===true){d=5}var c=typeof d,b;if(c==="string"||c==="number"){b=a.parseBox(d)}else{if(d){b={top:0,right:0,bottom:0,left:0};if(d){d=Ext.apply(b,a.parseBox(d))}}}return b},peek:function(a){return this.props[a]},recalculateSizeModel:function(){var f=this,g=f.target,c=g.componentLayout,b=f.ownerCtContext,a=c.ownerContext,d;c.ownerContext=null;f.sizeModel=d=g.getSizeModel(b&&b.widthModel.pairsByHeightOrdinal[b.heightModel.ordinal]);f.widthModel=d.width;f.heightModel=d.height;if(a){c.ownerContext=f}},recoverProp:function(g,b,a){var f=this,d=f.props,c;if(g in b){d[g]=b[g];if(a&&g in a){c=f.dirty||(f.dirty={});c[g]=a[g]}}},redo:function(b){var f=this,c,a,d;f.revertProps(f.props);if(b&&f.wrapsComponent){if(f.childItems){for(d=0,c=f.childItems,a=c.length;d<a;d++){c[d].redo(b)}}for(d=0,c=f.children,a=c.length;d<a;d++){c[d].redo()}}},removeEl:function(b,a){var d=this,f,c;if(b){if(b.dom){c=b}else{f=d.target;if(a){f=a}c=f[b];if(typeof c==="function"){c=c.call(f);if(c===d.el){return this}}}if(c){d.context.removeEl(c,d)}}},revertProps:function(d){var a,b=this.flushedProps,c={};for(a in d){if(b.hasOwnProperty(a)){c[a]=d[a]}}this.writeProps(c)},setAttribute:function(a,c){var b=this;if(!b.attributes){b.attributes={}}b.attributes[a]=c;b.markDirty()},setBox:function(b){var a=this;if("left" in b){a.setProp("x",b.left)}if("top" in b){a.setProp("y",b.top)}a.setSize(b.width,b.height)},setContentHeight:function(a,b){if(!b&&this.hasRawContent){return 1}return this.setProp("contentHeight",a)},setContentWidth:function(b,a){if(!a&&this.hasRawContent){return 1}return this.setProp("contentWidth",b)},setContentSize:function(c,a,b){return this.setContentWidth(c,b)+this.setContentHeight(a,b)===2},setProp:function(d,c,a){var b=this,g=typeof c,f;if(g==="undefined"||(g==="number"&&isNaN(c))){return 0}if(b.props[d]===c){return 1}b.props[d]=c;++b.context.progressCount;if(a===false){b.fireTriggers("domTriggers",d);b.clearBlocks("domBlocks",d)}else{f=b.styleInfo[d];if(f){if(!b.dirty){b.dirty={}}b.dirty[d]=c;b.markDirty()}}b.fireTriggers("triggers",d);b.clearBlocks("blocks",d);return 1},setHeight:function(o,a){var g=this,d=g.target,c=g.ownerCtContext,h,f,b,m,j;if(o<0){o=0}if(!g.wrapsComponent){if(!g.setProp("height",o,a)){return NaN}}else{b=g.collapsedVert?0:(d.minHeight||0);o=Ext.Number.constrain(o,b,d.maxHeight);m=g.props.height;if(!g.setProp("height",o,a)){return NaN}if(c&&!g.isComponentChild&&isNaN(m)){j=--c.remainingChildDimensions;if(!j){c.setProp("containerChildrenSizeDone",true)}}h=g.frameBodyContext;if(h){f=g.getFrameInfo();h[g.el.vertical?"setWidth":"setHeight"](o-f.height,a)}}return o},setWidth:function(b,a){var j=this,g=j.target,f=j.ownerCtContext,m,h,d,c,o;if(b<0){b=0}if(!j.wrapsComponent){if(!j.setProp("width",b,a)){return NaN}}else{d=j.collapsedHorz?0:(g.minWidth||0);b=Ext.Number.constrain(b,d,g.maxWidth);c=j.props.width;if(!j.setProp("width",b,a)){return NaN}if(f&&!j.isComponentChild&&isNaN(c)){o=--f.remainingChildDimensions;if(!o){f.setProp("containerChildrenSizeDone",true)}}m=j.frameBodyContext;if(m){h=j.getFrameInfo();m.setWidth(b-h.width,a)}}return b},setSize:function(c,a,b){this.setWidth(c,b);this.setHeight(a,b)},translateProps:{x:"left",y:"top"},undo:function(b){var f=this,c,a,d;f.revertProps(f.lastBox);if(b&&f.wrapsComponent){if(f.childItems){for(d=0,c=f.childItems,a=c.length;d<a;d++){c[d].undo(b)}}for(d=0,c=f.children,a=c.length;d<a;d++){c[d].undo()}}},unsetProp:function(b){var a=this.dirty;delete this.props[b];if(a){delete a[b]}},writeProps:function(f,d){if(!(f&&typeof f==="object")){return}var w=this,c=w.el,j={},g=0,b=w.styleInfo,v,m,q,s=f.width,o=f.height,y=w.target,h,a,r,t,u,p;if("displayed" in f){c.setDisplayed(f.displayed)}for(m in f){if(d){w.fireTriggers("domTriggers",m);w.clearBlocks("domBlocks",m);w.flushedProps[m]=1}v=b[m];if(v&&v.dom){if(v.suffix&&(q=parseInt(f[m],10))){j[m]=q+v.suffix}else{j[m]=f[m]}++g}}if("x" in f||"y" in f){if(y.isComponent){y.setPosition(f.x,f.y)}else{g+=w.addPositionStyles(j,f)}}if(w.wrapsComponent&&Ext.isIE9){if((h=s!==undefined&&w.hasOverflowY)||(a=o!==undefined&&w.hasOverflowX)){r=w.isAbsolute;if(r===undefined){r=false;p=w.target.getTargetEl();u=p.getStyle("position");w.isAbsolute=r=(u==="absolute")}if(r){t=Ext.getScrollbarSize();if(h){s=parseInt(s,10)+t.width;j.width=s+"px";++g}if(a){o=parseInt(o,10)+t.height;j.height=o+"px";++g}}}}if(g){c.setStyle(j)}}},1,0,0,0,0,0,[Ext.layout,"ContextItem"],function(){var c={dom:true,parseInt:true,suffix:"px"},b={dom:true},a={dom:false};this.prototype.styleInfo={containerChildrenSizeDone:a,containerLayoutDone:a,displayed:a,done:a,x:a,y:a,columnsChanged:a,rowHeights:a,viewOverflowY:a,left:c,top:c,right:c,bottom:c,width:c,height:c,"border-top-width":c,"border-right-width":c,"border-bottom-width":c,"border-left-width":c,"margin-top":c,"margin-right":c,"margin-bottom":c,"margin-left":c,"padding-top":c,"padding-right":c,"padding-bottom":c,"padding-left":c,"line-height":b,display:b,clear:b}}));(Ext.cmd.derive("Ext.layout.Context",Ext.Base,{remainingLayouts:0,state:0,cycleWatchDog:200,constructor:function(a){var b=this;Ext.apply(b,a);b.items={};b.layouts={};b.blockCount=0;b.cycleCount=0;b.flushCount=0;b.calcCount=0;b.animateQueue=b.newQueue();b.completionQueue=b.newQueue();b.finalizeQueue=b.newQueue();b.finishQueue=b.newQueue();b.flushQueue=b.newQueue();b.invalidateData={};b.layoutQueue=b.newQueue();b.invalidQueue=[];b.triggers={data:{},dom:{}}},callLayout:function(b,a){this.currentLayout=b;b[a](this.getCmp(b.owner))},cancelComponent:function(j,a,o){var r=this,h=j,m=!j.isComponent,b=m?h.length:1,d,c,q,p,g,u,s,t,v,f;for(d=0;d<b;++d){if(m){j=h[d]}if(o){if(j.ownerCt){f=this.items[j.ownerCt.el.id];if(f){Ext.Array.remove(f.childItems,r.getCmp(j))}}else{if(j.rendered){r.removeEl(j.el)}}}if(!a){s=r.invalidQueue;q=s.length;if(q){r.invalidQueue=u=[];for(c=0;c<q;++c){t=s[c];v=t.item.target;if(v!==j&&!v.up(j)){u.push(t)}}}}g=j.componentLayout;r.cancelLayout(g);if(g.getLayoutItems){p=g.getLayoutItems();if(p.length){r.cancelComponent(p,true)}}if(j.isContainer&&!j.collapsed){g=j.layout;r.cancelLayout(g);p=g.getVisibleItems();if(p.length){r.cancelComponent(p,true)}}}},cancelLayout:function(b){var a=this;a.completionQueue.remove(b);a.finalizeQueue.remove(b);a.finishQueue.remove(b);a.layoutQueue.remove(b);if(b.running){a.layoutDone(b)}b.ownerContext=null},clearTriggers:function(g,h){var a=g.id,f=this.triggers[h?"dom":"data"],j=f&&f[a],b=(j&&j.length)||0,d,m,c;for(d=0;d<b;++d){c=j[d];m=c.item;f=h?m.domTriggers:m.triggers;delete f[c.prop][a]}},flush:function(){var d=this,a=d.flushQueue.clear(),c=a.length,b;if(c){++d.flushCount;for(b=0;b<c;++b){a[b].flush()}}},flushAnimations:function(){var d=this,b=d.animateQueue.clear(),a=b.length,c;if(a){for(c=0;c<a;c++){if(b[c].target.animate!==false){b[c].flushAnimations()}}Ext.fx.Manager.runner()}},flushInvalidates:function(){var h=this,a=h.invalidQueue,g=a&&a.length,b,f,d,c;h.invalidQueue=[];if(g){f=[];for(c=0;c<g;++c){b=(d=a[c]).item.target;if(!b.container.isDetachedBody){f.push(b);if(d.options){h.invalidateData[b.id]=d.options}}}h.invalidate(f,null)}},flushLayouts:function(h,a,c){var g=this,j=c?g[h].items:g[h].clear(),f=j.length,b,d;if(f){for(b=0;b<f;++b){d=j[b];if(!d.running){g.callLayout(d,a)}}g.currentLayout=null}},getCmp:function(a){return this.getItem(a,a.el)},getEl:function(b,a){var c=this.getItem(a,a);if(!c.parent){c.parent=b;if(b.children.length){b.children.push(c)}else{b.children=[c]}}return c},getItem:function(d,b){var f=b.id,a=this.items,c=a[f]||(a[f]=new Ext.layout.ContextItem({context:this,target:d,el:b}));return c},handleFailure:function(){var c=this.layouts,b,a;Ext.failedLayouts=(Ext.failedLayouts||0)+1;for(a in c){b=c[a];if(c.hasOwnProperty(a)){b.running=false;b.ownerContext=null}}},invalidate:function(o,q){var s=this,p=!o.isComponent,c,t,a,g,m,u,r,b,h,j,f,d,v;for(g=0,b=p?o.length:1;g<b;++g){m=p?o[g]:o;if(m.rendered&&!m.hidden){t=m.ownerLayout;h=m.componentLayout;v=false;if((!t||!t.needsItemSize)&&m.liquidLayout){v=true}if(!v||(t&&t.setsItemSize)){u=s.getCmp(m);a=!u.state;j=(m.isContainer&&!m.collapsed)?m.layout:null;f=s.invalidateData[u.id];delete s.invalidateData[u.id];d=u.init(q,f)}if(v){continue}if(f){s.processInvalidate(f,u,"before")}if(h.beforeLayoutCycle){h.beforeLayoutCycle(u)}if(j&&j.beforeLayoutCycle){j.beforeLayoutCycle(u)}d=u.initContinue(d);c=true;if(h.getLayoutItems){h.renderChildren();r=h.getLayoutItems();if(r.length){s.invalidate(r,true)}}if(j){c=false;j.renderChildren();if(j.needsItemSize||j.activeItemCount){r=j.getVisibleItems();if(r.length){s.invalidate(r,true)}}}u.initDone(c);s.resetLayout(h,u,a);if(j){s.resetLayout(j,u,a)}u.initAnimation();if(f){s.processInvalidate(f,u,"after")}}}s.currentLayout=null},isDescendant:function(a,b){if(a.isContainer){for(var d=b.ownerCt;d;d=d.ownerCt){if(d===a){return true}}}return false},layoutDone:function(a){var b=a.ownerContext;a.running=false;if(a.isComponentLayout){if(b.measuresBox){b.onBoxMeasured()}b.setProp("done",true)}else{b.setProp("containerLayoutDone",true)}--this.remainingLayouts;++this.progressCount},newQueue:function(){return new Ext.util.Queue()},processInvalidate:function(b,f,a){if(b[a]){var d=this,c=d.currentLayout;d.currentLayout=b.layout||null;b[a](f,b);d.currentLayout=c}},queueAnimation:function(a){this.animateQueue.add(a)},queueCompletion:function(a){this.completionQueue.add(a)},queueFinalize:function(a){this.finalizeQueue.add(a)},queueFlush:function(a){this.flushQueue.add(a)},chainFns:function(a,j,g){var d=this,c=a.layout,f=j.layout,b=a[g],h=j[g];return function(m){var o=d.currentLayout;if(b){d.currentLayout=c;b.call(a.scope||a,m,a)}d.currentLayout=f;h.call(j.scope||j,m,j);d.currentLayout=o}},purgeInvalidates:function(){var h=this,o=[],j=h.invalidQueue,f=j.length,m,p,d,c,b,g,a;for(m=0;m<f;++m){b=j[m];g=b.item.target;a=true;for(p=o.length;p--;){d=o[p];c=d.item.target;if(g.isLayoutChild(c)){a=false;break}if(c.isLayoutChild(g)){Ext.Array.erase(o,p,1)}}if(a){o.push(b)}}h.invalidQueue=o},queueInvalidate:function(o,p){var h=this,m=[],j=h.invalidQueue,g=j.length,d,b,f,a,c;if(o.isComponent){d=o;o=h.items[d.el.id];if(o){o.recalculateSizeModel()}else{o=h.getCmp(d)}}else{d=o.target}o.invalid=true;while(g--){b=j[g];f=b.item.target;if(!d.isFloating&&d.up(f)){return}if(f===d){if(!(a=b.options)){b.options=p}else{if(p){if(p.widthModel){a.widthModel=p.widthModel}if(p.heightModel){a.heightModel=p.heightModel}if(!(c=a.state)){a.state=p.state}else{if(p.state){Ext.apply(c,p.state)}}if(p.before){a.before=h.chainFns(a,p,"before")}if(p.after){a.after=h.chainFns(a,p,"after")}}}return}if(!f.isLayoutChild(d)){m.push(b)}}m.push({item:o,options:p});h.invalidQueue=m},queueItemLayouts:function(c){var a=c.isComponent?c:c.target,b=a.componentLayout;if(!b.pending&&!b.invalid&&!b.done){this.queueLayout(b)}b=a.layout;if(b&&!b.pending&&!b.invalid&&!b.done&&!a.collapsed){this.queueLayout(b)}},queueLayout:function(a){this.layoutQueue.add(a);a.pending=true},removeEl:function(d,c){var f=d.id,b=c?c.children:null,a=this.items;if(b){Ext.Array.remove(b,a[f])}delete a[f]},resetLayout:function(b,c,d){var a=this;a.currentLayout=b;b.done=false;b.pending=true;b.firedTriggers=0;a.layoutQueue.add(b);if(d){a.layouts[b.id]=b;b.running=true;if(b.finishedLayout){a.finishQueue.add(b)}++a.remainingLayouts;++b.layoutCount;b.ownerContext=c;b.beginCount=0;b.blockCount=0;b.calcCount=0;b.triggerCount=0;if(!b.initialized){b.initLayout()}b.beginLayout(c)}else{++b.beginCount;if(!b.running){++a.remainingLayouts;b.running=true;b.ownerContext=c;if(b.isComponentLayout){c.unsetProp("done")}a.completionQueue.remove(b);a.finalizeQueue.remove(b)}}b.beginLayoutCycle(c,d)},run:function(){var c=this,b=false,a=c.cycleWatchDog;c.purgeInvalidates();c.flushInvalidates();c.state=1;c.totalCount=c.layoutQueue.getCount();c.flush();while((c.remainingLayouts||c.invalidQueue.length)&&a--){if(c.invalidQueue.length){c.flushInvalidates()}if(c.runCycle()){b=false}else{if(!b){c.flush();b=true;c.flushLayouts("completionQueue","completeLayout")}else{if(!c.invalidQueue.length){c.state=2;break}}}if(!(c.remainingLayouts||c.invalidQueue.length)){c.flush();c.flushLayouts("completionQueue","completeLayout");c.flushLayouts("finalizeQueue","finalizeLayout")}}return c.runComplete()},runComplete:function(){var a=this;a.state=2;if(a.remainingLayouts){a.handleFailure();return false}a.flush();a.flushLayouts("finishQueue","finishedLayout",true);a.flushLayouts("finishQueue","notifyOwner");a.flush();a.flushAnimations();return true},runCycle:function(){var c=this,d=c.layoutQueue.clear(),b=d.length,a;++c.cycleCount;c.progressCount=0;for(a=0;a<b;++a){c.runLayout(c.currentLayout=d[a])}c.currentLayout=null;return c.progressCount>0},runLayout:function(b){var a=this,c=a.getCmp(b.owner);b.pending=false;if(c.state.blocks){return}b.done=true;++b.calcCount;++a.calcCount;b.calculate(c);if(b.done){a.layoutDone(b);if(b.completeLayout){a.queueCompletion(b)}if(b.finalizeLayout){a.queueFinalize(b)}}else{if(!b.pending&&!b.invalid&&!(b.blockCount+b.triggerCount-b.firedTriggers)){a.queueLayout(b)}}},setItemSize:function(h,g,b){var d=h,a=1,c,f;if(h.isComposite){d=h.elements;a=d.length;h=d[0]}else{if(!h.dom&&!h.el){a=d.length;h=d[0]}}for(f=0;f<a;){c=this.get(h);c.setSize(g,b);h=d[++f]}}},1,0,0,0,0,0,[Ext.layout,"Context"],0));(Ext.cmd.derive("Ext.layout.container.Accordion",Ext.layout.container.VBox,{type:"accordion",alternateClassName:"Ext.layout.AccordionLayout",targetCls:"x-accordion-layout-ct",itemCls:["x-box-item","x-accordion-item"],align:"stretch",enableSplitters:false,fill:true,titleCollapse:true,hideCollapseTool:false,collapseFirst:undefined,animate:true,activeOnTop:false,multi:false,wrapOver:true,panelCollapseMode:"header",defaultAnimatePolicy:{y:true,height:true},constructor:function(){var a=this;Ext.layout.container.VBox.prototype.constructor.apply(this,arguments);if(a.animate){a.animatePolicy={};a.animatePolicy[a.names.x]=true;a.animatePolicy[a.names.width]=true}else{a.animatePolicy=null}},beforeRenderItems:function(h){var j=this,g=h.length,b=j.owner,m=j.collapseFirst,a=Ext.isDefined(m),o=j.getExpanded(true)[0],f=j.multi,d,c;for(c=0;c<g;c++){d=h[c];if(!d.rendered){d.isAccordionPanel=true;d.bodyAriaRole="tabpanel";d.accordionWrapOver=j.wrapOver;if(!f||d.collapsible!==false){d.collapsible=true}if(d.collapsible){if(a){d.collapseFirst=m}if(j.hideCollapseTool){d.hideCollapseTool=j.hideCollapseTool;d.titleCollapse=true}else{if(j.titleCollapse&&d.titleCollapse===undefined){d.titleCollapse=j.titleCollapse}}}d.hideHeader=d.width=null;d.title=d.title||"&#160;";d.addBodyCls("x-accordion-body");if(!f){if(o){d.collapsed=o!==d}else{if(d.hasOwnProperty("collapsed")&&d.collapsed===false){o=d}else{d.collapsed=true}}b.mon(d,"show",j.onComponentShow,j)}d.headerOverCls="x-accordion-hd-over"}}if(!j.processing&&!f){if(!o){if(g){h[0].collapsed=false}}else{if(j.activeOnTop){o.collapsed=false;j.configureItem(o);if(b.items.indexOf(o)>0){b.insert(0,o)}}}}},getItemsRenderTree:function(a){this.beforeRenderItems(a);return Ext.layout.container.VBox.prototype.getItemsRenderTree.apply(this,arguments)},renderItems:function(a,b){this.beforeRenderItems(a);Ext.layout.container.VBox.prototype.renderItems.apply(this,arguments)},configureItem:function(a){Ext.layout.container.VBox.prototype.configureItem.apply(this,arguments);a.ignoreHeaderBorderManagement=true;a.animCollapse=false;if(this.fill){a.flex=1}},beginLayout:function(a){Ext.layout.container.VBox.prototype.beginLayout.apply(this,arguments);this.innerCt.dom.setAttribute("role","tablist");this.innerCt.dom.setAttribute("aria-multiselectable",true);this.updatePanelClasses(a)},updatePanelClasses:function(f){var c=f.visibleItems,d=c.length,a=true,b,h,g;for(b=0;b<d;b++){h=c[b];g=h.header;g.addCls("x-accordion-hd");if(a){g.removeCls("x-accordion-hd-sibling-expanded")}else{g.addCls("x-accordion-hd-sibling-expanded")}if(b+1===d&&h.collapsed){g.addCls("x-accordion-hd-last-collapsed")}else{g.removeCls("x-accordion-hd-last-collapsed")}a=h.collapsed}},onBeforeComponentExpand:function(j){var d=this,a=d.owner,h=d.multi,g=!h&&!d.animate&&d.activeOnTop,c,b,f;if(!d.processing){d.processing=true;b=a.deferLayouts;a.deferLayouts=true;if(!h){c=d.getExpanded()[0];if(c&&c!==j){f=c.$layoutAnim;if(f){f.jumpToEnd()}c.collapse()}}if(g){Ext.suspendLayouts();a.insert(0,j);Ext.resumeLayouts()}a.deferLayouts=b;d.processing=false}},onBeforeComponentCollapse:function(d){var f=this,a=f.owner,g,c,b;if(f.owner.items.getCount()===1){return false}if(!f.processing){f.processing=true;b=a.deferLayouts;a.deferLayouts=true;g=d.next()||d.prev();if(f.multi){c=f.getExpanded();if(c.length===1){g.expand()}}else{if(g){g.expand()}}a.deferLayouts=b;f.processing=false}},onComponentShow:function(a){this.onBeforeComponentExpand(a)},onAdd:function(b){var a=this;Ext.layout.container.VBox.prototype.onAdd.apply(this,arguments);if(b.collapseMode==="placeholder"){b.collapseMode=a.panelCollapseMode}b.collapseDirection=b.headerPosition;if(a.layoutCount&&!a.multi&&a.owner.items.getCount()>1){a.processing=true;b.collapse();a.processing=false}},onRemove:function(a,d){var c=this,b;Ext.layout.container.VBox.prototype.onRemove.apply(this,arguments);if(!c.owner.destroying&&!c.multi&&!a.collapsed){b=c.owner.items.first();if(b){b.expand()}}},getExpanded:function(h){var b=this.owner.items.items,a=b.length,d=0,c=[],g,f;for(;d<a;++d){f=b[d];if(!f.hidden){if(h){g=f.hasOwnProperty("collapsed")&&f.collapsed===false}else{g=!f.collapsed}if(g){c.push(f)}}}return c},afterCollapse:Ext.emptyFn,afterExpand:Ext.emptyFn},1,0,0,0,["layout.accordion"],0,[Ext.layout.container,"Accordion",Ext.layout,"AccordionLayout"],0));(Ext.cmd.derive("Ext.resizer.BorderSplitter",Ext.resizer.Splitter,{collapseTarget:null,getTrackerConfig:function(){var a=Ext.resizer.Splitter.prototype.getTrackerConfig.call(this);a.xclass="Ext.resizer.BorderSplitterTracker";return a},onTargetCollapse:function(a){Ext.resizer.Splitter.prototype.onTargetCollapse.call(this,a);if(this.performCollapse!==false&&a.collapseMode=="mini"){a.addCls(a.baseCls+"-"+a.collapsedCls+"-mini")}},onTargetExpand:function(a){Ext.resizer.Splitter.prototype.onTargetExpand.call(this,a);if(this.performCollapse!==false&&a.collapseMode=="mini"){a.removeCls(a.baseCls+"-"+a.collapsedCls+"-mini")}}},0,["bordersplitter"],["component","box","splitter","bordersplitter"],{component:true,box:true,splitter:true,bordersplitter:true},["widget.bordersplitter"],0,[Ext.resizer,"BorderSplitter"],0));(Ext.cmd.derive("Ext.layout.container.Border",Ext.layout.container.Container,{alternateClassName:"Ext.layout.BorderLayout",targetCls:"x-border-layout-ct",itemCls:["x-border-item","x-box-item"],type:"border",isBorderLayout:true,padding:undefined,percentageRe:/(\d+)%/,horzPositionProp:"left",padOnContainerProp:"left",padNotOnContainerProp:"right",axisProps:{horz:{borderBegin:"west",borderEnd:"east",horizontal:true,posProp:"x",sizeProp:"width",sizePropCap:"Width"},vert:{borderBegin:"north",borderEnd:"south",horizontal:false,posProp:"y",sizeProp:"height",sizePropCap:"Height"}},centerRegion:null,manageMargins:true,panelCollapseAnimate:true,panelCollapseMode:"placeholder",regionWeights:{north:20,south:10,center:0,west:-10,east:-20},beginAxis:function(p,b,A){var y=this,c=y.axisProps[A],u=!c.horizontal,o=c.sizeProp,s=0,a=p.childItems,g=a.length,w,t,r,h,v,f,m,q,d,z,j;for(t=0;t<g;++t){r=a[t];v=r.target;r.layoutPos={};if(v.region){r.region=f=v.region;r.isCenter=v.isCenter;r.isHorz=v.isHorz;r.isVert=v.isVert;r.weight=v.weight||y.regionWeights[f]||0;v.weight=r.weight;b[v.id]=r;if(v.isCenter){w=r;h=v.flex;p.centerRegion=w;continue}if(u!==r.isVert){continue}r.reverseWeighting=(f===c.borderEnd);q=v[o];d=typeof q;if(!v.collapsed){if(d==="string"&&(m=y.percentageRe.exec(q))){r.percentage=parseInt(m[1],10)}else{if(v.flex){s+=r.flex=v.flex}}}}}if(w){z=w.target;if((j=z.placeholderFor)){if(!h&&u===j.collapsedVertical()){h=0;w.collapseAxis=A}}else{if(z.collapsed&&(u===z.collapsedVertical())){h=0;w.collapseAxis=A}}}if(h==null){h=1}s+=h;return Ext.apply({before:u?"top":"left",totalFlex:s},c)},beginLayout:function(d){var o=this,m=o.getLayoutItems(),f=o.padding,p=typeof f,s=false,t,r,b,h,g,a,c,j,q;if(f){if(p==="string"||p==="number"){f=Ext.util.Format.parseBox(f)}}else{f=d.getEl("getTargetEl").getPaddingInfo();s=true}d.outerPad=f;d.padOnContainer=s;for(h=0,b=m.length;h<b;++h){r=m[h];a=o.getSplitterTarget(r);if(a){c=undefined;j=!!r.hidden;if(!a.split){if(a.isCollapsingOrExpanding){c=!!a.collapsed}}else{if(j!==a.hidden){c=!a.hidden}}if(c){r.show()}else{if(c===false){r.hide()}}}}Ext.layout.container.Container.prototype.beginLayout.apply(this,arguments);m=d.childItems;b=m.length;g={};d.borderAxisHorz=o.beginAxis(d,g,"horz");d.borderAxisVert=o.beginAxis(d,g,"vert");for(h=0;h<b;++h){t=m[h];a=o.getSplitterTarget(t.target);if(a){q=g[a.id];if(!q){q=d.getEl(a.el,o);q.region=a.region}t.collapseTarget=a=q;t.weight=a.weight;t.reverseWeighting=a.reverseWeighting;a.splitter=t;t.isHorz=a.isHorz;t.isVert=a.isVert}}o.sortWeightedItems(m,"reverseWeighting");o.setupSplitterNeighbors(m)},calculate:function(d){var p=this,a=p.getContainerSize(d),j=d.childItems,c=j.length,b=d.borderAxisHorz,m=d.borderAxisVert,f=d.outerPad,r=d.padOnContainer,h,t,o,s,q,g;b.begin=f[p.padOnContainerProp];m.begin=f.top;q=b.end=b.flexSpace=a.width+(r?f[p.padOnContainerProp]:-f[p.padNotOnContainerProp]);g=m.end=m.flexSpace=a.height+(r?f.top:-f.bottom);for(h=0;h<c;++h){t=j[h];o=t.getMarginInfo();if(t.isHorz||t.isCenter){b.addUnflexed(o.width);q-=o.width}if(t.isVert||t.isCenter){m.addUnflexed(o.height);g-=o.height}if(!t.flex&&!t.percentage){if(t.isHorz||(t.isCenter&&t.collapseAxis==="horz")){s=t.getProp("width");b.addUnflexed(s);if(t.collapseTarget){q-=s}}else{if(t.isVert||(t.isCenter&&t.collapseAxis==="vert")){s=t.getProp("height");m.addUnflexed(s);if(t.collapseTarget){g-=s}}}}}for(h=0;h<c;++h){t=j[h];o=t.getMarginInfo();if(t.percentage){if(t.isHorz){s=Math.ceil(q*t.percentage/100);s=t.setWidth(s);b.addUnflexed(s)}else{if(t.isVert){s=Math.ceil(g*t.percentage/100);s=t.setHeight(s);m.addUnflexed(s)}}}}for(h=0;h<c;++h){t=j[h];if(!t.isCenter){p.calculateChildAxis(t,b);p.calculateChildAxis(t,m)}}if(p.finishAxis(d,m)+p.finishAxis(d,b)<2){p.done=false}else{p.finishPositions(j)}},calculateChildAxis:function(p,c){var a=p.collapseTarget,h="set"+c.sizePropCap,f=c.sizeProp,d=p.getMarginInfo()[f],m,b,g,j,o;if(a){m=a.region}else{m=p.region;g=p.flex}b=m===c.borderBegin;if(!b&&m!==c.borderEnd){p[h](c.end-c.begin-d);j=c.begin}else{if(g){o=Math.ceil(c.flexSpace*(g/c.totalFlex));o=p[h](o)}else{if(p.percentage){o=p.peek(f)}else{o=p.getProp(f)}}o+=d;if(b){j=c.begin;c.begin+=o}else{c.end=j=c.end-o}}p.layoutPos[c.posProp]=j},eachItem:function(h,d,c){var g=this,a=g.getLayoutItems(),b=0,f;if(Ext.isFunction(h)){d=h;c=d}for(b;b<a.length;b++){f=a[b];if(!h||f.region===h){if(d.call(c,f)===false){break}}}},finishAxis:function(d,c){var b=c.end-c.begin,a=d.centerRegion;if(a){a["set"+c.sizePropCap](b-a.getMarginInfo()[c.sizeProp]);a.layoutPos[c.posProp]=c.begin}return Ext.isNumber(b)?1:0},finishPositions:function(f){var c=f.length,b,a,d=this.horzPositionProp;for(b=0;b<c;++b){a=f[b];a.setProp("x",a.layoutPos.x+a.marginInfo[d]);a.setProp("y",a.layoutPos.y+a.marginInfo.top)}},getLayoutItems:function(){var a=this.owner,f=(a&&a.items&&a.items.items)||[],d=f.length,b=[],c=0,g,h;for(;c<d;c++){g=f[c];h=g.placeholderFor;if(g.hidden||((!g.floated||g.isCollapsingOrExpanding===2)&&!(h&&h.isCollapsingOrExpanding===2))){b.push(g)}}return b},getPlaceholder:function(a){return a.getPlaceholder&&a.getPlaceholder()},getMaxWeight:function(a){return this.getMinMaxWeight(a)},getMinWeight:function(a){return this.getMinMaxWeight(a,true)},getMinMaxWeight:function(d,a){var b=this,c=null;b.eachItem(d,function(f){if(f.hasOwnProperty("weight")){if(c===null){c=f.weight;return}if((a&&f.weight<c)||f.weight>c){c=f.weight}}},this);return c},getSplitterTarget:function(b){var a=b.collapseTarget;if(a&&a.collapsed){return a.placeholder||a}return a},isItemBoxParent:function(a){return true},isItemShrinkWrap:function(a){return true},insertSplitter:function(d,c,g,b){var h=d.region,f=Ext.apply({xtype:"bordersplitter",collapseTarget:d,id:d.id+"-splitter",hidden:g,canResize:d.splitterResize!==false,splitterFor:d,synthetic:true},b),a=c+((h==="south"||h==="east")?0:1);if(d.collapseMode==="mini"){f.collapsedCls=d.collapsedCls}d.splitter=this.owner.add(a,f)},getMoveAfterIndex:function(b){var a=Ext.layout.container.Container.prototype.getMoveAfterIndex.apply(this,arguments);if(b.splitter){a++}return a},moveItemBefore:function(a,c){var b;if(c&&c.splitter){b=c.region;if(b==="south"||b==="east"){c=c.splitter}}return Ext.layout.container.Container.prototype.moveItemBefore.call(this,a,c)},onAdd:function(m,d){var g=this,c=m.placeholderFor,j=m.region,f,h,a,b;Ext.layout.container.Container.prototype.onAdd.apply(this,arguments);if(j){Ext.apply(m,g.regionFlags[j]);if(g.owner.isViewport){m.isViewportBorderChild=true}if(m.initBorderRegion){m.initBorderRegion()}f=j==="center";if(f){g.centerRegion=m}else{h=m.split;a=!!m.hidden;if(typeof h==="object"){b=h;h=true}if((m.isHorz||m.isVert)&&(h||m.collapseMode==="mini")){g.insertSplitter(m,d,a||!h,b)}}if(!f&&!m.hasOwnProperty("collapseMode")){m.collapseMode=g.panelCollapseMode}if(!m.hasOwnProperty("animCollapse")){if(m.collapseMode!=="placeholder"){m.animCollapse=false}else{m.animCollapse=g.panelCollapseAnimate}}}else{if(c){Ext.apply(m,g.regionFlags[c.region]);m.region=c.region;m.weight=c.weight}}},onDestroy:function(){this.centerRegion=null;Ext.layout.container.Container.prototype.onDestroy.call(this)},onRemove:function(b,d){var f=this,j=b.region,g=b.splitter,a=f.owner,h=a.destroying,c;if(j){if(b.isCenter){f.centerRegion=null}delete b.isCenter;delete b.isHorz;delete b.isVert;if(g&&!a.destroying){a.doRemove(g,true)}delete b.splitter}Ext.layout.container.Container.prototype.onRemove.apply(this,arguments);if(!h&&!d&&b.rendered){c=b.getEl();if(c){c.setStyle("top","");c.setStyle(f.horzPositionProp,"")}}},regionMeta:{center:{splitterDelta:0},north:{splitterDelta:1},south:{splitterDelta:-1},west:{splitterDelta:1},east:{splitterDelta:-1}},regionFlags:{center:{isCenter:true,isHorz:false,isVert:false},north:{isCenter:false,isHorz:false,isVert:true,collapseDirection:"top"},south:{isCenter:false,isHorz:false,isVert:true,collapseDirection:"bottom"},west:{isCenter:false,isHorz:true,isVert:false,collapseDirection:"left"},east:{isCenter:false,isHorz:true,isVert:false,collapseDirection:"right"}},setupSplitterNeighbors:function(p){var s={},f=p.length,r=this.touchedRegions,h,g,a,o,d,m,q,b,c;for(h=0;h<f;++h){m=p[h].target;q=m.region;if(m.isCenter){a=m}else{if(q){c=r[q];for(g=0,o=c.length;g<o;++g){d=s[c[g]];if(d){d.neighbors.push(m)}}if(m.placeholderFor){b=m.placeholderFor.splitter}else{b=m.splitter}if(b){b.neighbors=[]}s[q]=b}}}if(a){c=r.center;for(g=0,o=c.length;g<o;++g){d=s[c[g]];if(d){d.neighbors.push(a)}}}},touchedRegions:{center:["north","south","east","west"],north:["north","east","west"],south:["south","east","west"],east:["east","north","south"],west:["west","north","south"]},sizePolicies:{vert:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},horz:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},flexAll:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(f){var d=this,a=this.sizePolicies,c,b,g,h;if(f.isCenter){h=f.placeholderFor;if(h){if(h.collapsedVertical()){return a.vert}return a.horz}if(f.collapsed){if(f.collapsedVertical()){return a.vert}return a.horz}return a.flexAll}c=f.collapseTarget;if(c){return c.isVert?a.vert:a.horz}if(f.region){if(f.isVert){b=f.height;g=a.vert}else{b=f.width;g=a.horz}if(f.flex||(typeof b==="string"&&d.percentageRe.test(b))){return a.flexAll}return g}return d.autoSizePolicy}},0,0,0,0,["layout.border"],0,[Ext.layout.container,"Border",Ext.layout,"BorderLayout"],function(){var a={addUnflexed:function(c){this.flexSpace=Math.max(this.flexSpace-c,0)}},b=this.prototype.axisProps;Ext.apply(b.horz,a);Ext.apply(b.vert,a)}));(Ext.cmd.derive("Ext.plugin.Manager",Ext.Base,{alternateClassName:["Ext.PluginManager","Ext.PluginMgr"],singleton:true,typeName:"ptype",create:function(b,f,d){var a,c;if(b.init){a=b}else{if(d){b=Ext.apply({},b);b.cmp=d}else{d=b.cmp}if(b.xclass){a=Ext.create(b)}else{c="plugin."+(b.ptype||f);a=Ext.ClassManager.instantiateByAlias(c,b)}}if(a&&d&&a.setCmp&&!a.setCmpCalled){a.setCmp(d);a.setCmpCalled=true}return a}},0,0,0,0,0,0,[Ext.plugin,"Manager",Ext,"PluginManager",Ext,"PluginMgr"],0));(Ext.cmd.derive("Ext.resizer.BorderSplitterTracker",Ext.resizer.SplitterTracker,{getPrevCmp:null,getNextCmp:null,calculateConstrainRegion:function(){var D=this,a=D.splitter,r=a.collapseTarget,d=a.defaultSplitMin,h=a.vertical?"Width":"Height",c="min"+h,z="max"+h,j="get"+h,y=a.neighbors,f=y.length,q=r.el.getBox(),g=q.x,s=q.y,C=q.right,m=q.bottom,u=a.vertical?(C-g):(m-s),B,o,v,p,A,w,t,b;p=(r[c]||Math.min(u,d))-u;A=r[z];if(!A){A=1000000000}else{A-=u}b=u;for(B=0;B<f;++B){o=y[B];u=o[j]();v=o[z];if(v===null){v=undefined}w=u-v;t=u-(o[c]||Math.min(u,d));if(!isNaN(w)){if(p<w){p=w}}if(A>t){A=t}}if(A-p<2){return null}q=new Ext.util.Region(s,C,m,g);D.constraintAdjusters[D.getCollapseDirection()](q,p,A,a);D.dragInfo={minRange:p,maxRange:A,targetSize:b};return q},constraintAdjusters:{left:function(c,a,b,d){c[0]=c.x=c.left=c.right+a;c.right+=b+d.getWidth()},top:function(c,a,b,d){c[1]=c.y=c.top=c.bottom+a;c.bottom+=b+d.getHeight()},bottom:function(c,a,b,d){c.bottom=c.top-a;c.top-=b+d.getHeight()},right:function(c,a,b,d){c.right=c.left-a;c[0]=c.x=c.left=c.x-b+d.getWidth()}},onBeforeStart:function(j){var f=this,g=f.splitter,d=g.collapseTarget,b=g.neighbors,c=b.length,a,h;if(d.collapsed){return false}for(a=0;a<c;++a){h=b[a];if(h.collapsed&&h.isHorz===d.isHorz){return false}}if(!(f.constrainTo=f.calculateConstrainRegion())){return false}return true},performResize:function(j,h){var m=this,b=m.splitter,g=b.getCollapseDirection(),a=b.collapseTarget,f=m.splitAdjusters[b.vertical?"horz":"vert"],o=h[f.index],d=m.dragInfo,c;if(g==="right"||g==="bottom"){o=-o}o=Math.min(Math.max(d.minRange,o),d.maxRange);if(o){(c=b.ownerCt).suspendLayouts();f.adjustTarget(a,d.targetSize,o);c.resumeLayouts(true)}},splitAdjusters:{horz:{index:0,adjustTarget:function(b,a,c){b.flex=null;b.setSize(a+c)}},vert:{index:1,adjustTarget:function(b,a,c){b.flex=null;b.setSize(undefined,a+c)}}},getCollapseDirection:function(){return this.splitter.getCollapseDirection()}},0,0,0,0,0,0,[Ext.resizer,"BorderSplitterTracker"],0));(Ext.cmd.derive("Ext.resizer.ResizeTracker",Ext.dd.DragTracker,{dynamic:true,preserveRatio:false,constrainTo:null,proxyCls:"x-resizable-proxy",constructor:function(b){var d=this,c,a,f;if(!b.el){if(b.target.isComponent){d.el=b.target.getEl()}else{d.el=b.target}}Ext.dd.DragTracker.prototype.constructor.apply(this,arguments);if(d.preserveRatio&&d.minWidth&&d.minHeight){c=d.minWidth/d.el.getWidth();a=d.minHeight/d.el.getHeight();if(a>c){d.minWidth=d.el.getWidth()*a}else{d.minHeight=d.el.getHeight()*c}}if(d.throttle){f=Ext.Function.createThrottled(function(){Ext.resizer.ResizeTracker.prototype.resize.apply(d,arguments)},d.throttle);d.resize=function(h,j,g){if(g){Ext.resizer.ResizeTracker.prototype.resize.apply(d,arguments)}else{f.apply(null,arguments)}}}},onBeforeStart:function(a){this.startBox=this.target.getBox()},getProxy:function(){var a=this;if(!a.dynamic&&!a.proxy){a.proxy=a.createProxy(a.target||a.el);a.hideProxy=true}if(a.proxy){a.proxy.show();return a.proxy}},createProxy:function(c){var b,a=this.proxyCls;if(c.isComponent){b=c.getProxy().addCls(a)}else{b=c.createProxy({tag:"div",role:"presentation",cls:a,id:c.id+"-rzproxy"},Ext.getBody())}b.removeCls("x-proxy-el");return b},onStart:function(a){this.activeResizeHandle=Ext.get(this.getDragTarget().id);if(!this.dynamic){this.resize(this.startBox)}},onMouseDown:function(b,a){var c=Ext.fly(a.parentNode);Ext.dd.DragTracker.prototype.onMouseDown.apply(this,arguments);if(c&&c.shim){c.maskIframes()}},onMouseUp:function(a){var b=Ext.fly(this.dragTarget.parentNode);Ext.dd.DragTracker.prototype.onMouseUp.apply(this,arguments);if(b&&b.shim){b.unmaskIframes()}},onDrag:function(a){if(this.dynamic||this.proxy){this.updateDimensions(a)}},updateDimensions:function(t,p){var u=this,c=u.activeResizeHandle.region,f=u.getOffset(u.constrainTo?"dragTarget":null),m=u.startBox,g,r=0,v=0,j,s,a=0,y=0,w,h,b,d,q,o;c=u.convertRegionName(c);switch(c){case"south":v=f[1];b=2;break;case"north":v=-f[1];y=-v;b=2;break;case"east":r=f[0];b=1;break;case"west":r=-f[0];a=-r;b=1;break;case"northeast":v=-f[1];y=-v;r=f[0];h=[m.x,m.y+m.height];b=3;break;case"southeast":v=f[1];r=f[0];h=[m.x,m.y];b=3;break;case"southwest":r=-f[0];a=-r;v=f[1];h=[m.x+m.width,m.y];b=3;break;case"northwest":v=-f[1];y=-v;r=-f[0];a=-r;h=[m.x+m.width,m.y+m.height];b=3;break}d={width:m.width+r,height:m.height+v,x:m.x+a,y:m.y+y};j=Ext.Number.snap(d.width,u.widthIncrement);s=Ext.Number.snap(d.height,u.heightIncrement);if(j!==d.width||s!==d.height){switch(c){case"northeast":d.y-=s-d.height;break;case"north":d.y-=s-d.height;break;case"southwest":d.x-=j-d.width;break;case"west":d.x-=j-d.width;break;case"northwest":d.x-=j-d.width;d.y-=s-d.height}d.width=j;d.height=s}if(d.width<u.minWidth||d.width>u.maxWidth){d.width=Ext.Number.constrain(d.width,u.minWidth,u.maxWidth);if(a){d.x=m.x+(m.width-d.width)}}else{u.lastX=d.x}if(d.height<u.minHeight||d.height>u.maxHeight){d.height=Ext.Number.constrain(d.height,u.minHeight,u.maxHeight);if(y){d.y=m.y+(m.height-d.height)}}else{u.lastY=d.y}if(u.preserveRatio||t.shiftKey){g=u.startBox.width/u.startBox.height;q=Math.min(Math.max(u.minHeight,d.width/g),u.maxHeight);o=Math.min(Math.max(u.minWidth,d.height*g),u.maxWidth);if(b===1){d.height=q}else{if(b===2){d.width=o}else{w=Math.abs(h[0]-this.lastXY[0])/Math.abs(h[1]-this.lastXY[1]);if(w>g){d.height=q}else{d.width=o}if(c==="northeast"){d.y=m.y-(d.height-m.height)}else{if(c==="northwest"){d.y=m.y-(d.height-m.height);d.x=m.x-(d.width-m.width)}else{if(c==="southwest"){d.x=m.x-(d.width-m.width)}}}}}}u.setPosition=d.x!==u.startBox.x||d.y!==u.startBox.y;u.resize(d,p)},resize:function(d,a){var c=this,f,b=c.setPosition;if(c.dynamic||(!c.dynamic&&a)){if(b){c.target.setBox(d)}else{c.target.setSize(d.width,d.height)}}if(!a){f=c.getProxy();if(f&&f!==c.target){if(b||c.hideProxy){f.setBox(d)}else{f.setSize(d.width,d.height)}}}},onEnd:function(a){this.updateDimensions(a,true);if(this.proxy&&this.hideProxy){this.proxy.hide()}},convertRegionName:function(a){return a}},1,0,0,0,0,0,[Ext.resizer,"ResizeTracker"],0));(Ext.cmd.derive("Ext.resizer.Resizer",Ext.Base,{alternateClassName:"Ext.Resizable",handleCls:"x-resizable-handle",overCls:"x-resizable-handle-over",pinnedCls:"x-resizable-pinned",wrapCls:"x-resizable-wrap",wrappedCls:"x-resizable-wrapped",delimiterRe:/(?:\s*[,;]\s*)|\s+/,dynamic:true,handles:"s e se",height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:20,minWidth:20,maxHeight:10000,maxWidth:10000,pinned:false,preserveRatio:false,transparent:false,possiblePositions:{n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},ariaRole:"presentation",constructor:function(b){var o=this,t=o.handles,m=Ext.dom.Element.unselectableCls,r=[],s,c,q,v,h,f,p,a,g,d,u,j;if(Ext.isString(b)||Ext.isElement(b)||b.dom){s=b;b=arguments[1]||{};b.target=s}o.mixins.observable.constructor.call(o,b);s=o.target;if(s){if(s.isComponent){s.addClsWithUI("resizable");if(s.minWidth){o.minWidth=s.minWidth}if(s.minHeight){o.minHeight=s.minHeight}if(s.maxWidth){o.maxWidth=s.maxWidth}if(s.maxHeight){o.maxHeight=s.maxHeight}if(s.floating){if(!o.hasOwnProperty("handles")){o.handles="n ne e se s sw w nw"}}o.el=s.getEl()}else{s=o.el=o.target=Ext.get(s)}}else{s=o.target=o.el=Ext.get(o.el)}o.el.addCls(Ext.Component.prototype.borderBoxCls);if(Ext.isNumber(o.width)){o.width=Ext.Number.constrain(o.width,o.minWidth,o.maxWidth)}if(Ext.isNumber(o.height)){o.height=Ext.Number.constrain(o.height,o.minHeight,o.maxHeight)}if(o.width!==null||o.height!==null){o.target.setSize(o.width,o.height)}v=o.el.dom.tagName.toUpperCase();if(v==="TEXTAREA"||v==="IMG"||v==="TABLE"){o.originalTarget=o.target;d=s.isComponent?s.getEl():s;o.el.addCls(o.wrappedCls);o.target=o.el=o.el.wrap({role:"presentation",cls:o.wrapCls,id:o.el.id+"-rzwrap",style:d.getStyle(["margin-top","margin-bottom"])});u=d.getPositioning();o.el.setPositioning(u);d.clearPositioning();g=d.getBox();if(u.position!=="absolute"){g.x=0;g.y=0}o.el.setBox(g);d.setStyle("position","absolute");o.isTargetWrapped=true}o.el.position();if(o.pinned){o.el.addCls(o.pinnedCls)}o.resizeTracker=new Ext.resizer.ResizeTracker({disabled:o.disabled,target:s,el:o.el,constrainTo:o.constrainTo,handleCls:o.handleCls,overCls:o.overCls,throttle:o.throttle,proxy:o.originalTarget?o.el:null,dynamic:o.originalTarget?true:o.dynamic,originalTarget:o.originalTarget,delegate:"."+o.handleCls,preserveRatio:o.preserveRatio,heightIncrement:o.heightIncrement,widthIncrement:o.widthIncrement,minHeight:o.minHeight,maxHeight:o.maxHeight,minWidth:o.minWidth,maxWidth:o.maxWidth});o.resizeTracker.on({mousedown:o.onBeforeResize,drag:o.onResize,dragend:o.onResizeEnd,scope:o});if(o.handles==="all"){o.handles="n s e w ne nw se sw"}t=o.handles=o.handles.split(o.delimiterRe);q=o.possiblePositions;h=t.length;c=o.handleCls+" "+o.handleCls+"-{0}";if(o.target.isComponent){j=o.target.baseCls;c+=" "+j+"-handle "+j+"-handle-{0}";if(Ext.supports.CSS3BorderRadius){c+=" "+j+"-handle-{0}-br"}}for(f=0;f<h;f++){if(t[f]&&q[t[f]]){p=q[t[f]];r.push('<div id="',o.el.id,"-",p,'-handle" class="',Ext.String.format(c,p)," ",m,'" unselectable="on" role="presentation"',"></div>")}}Ext.DomHelper.append(o.el,r.join(""));r.length=0;for(f=0;f<h;f++){if(t[f]&&q[t[f]]){p=q[t[f]];a=o[p]=o.el.getById(o.el.id+"-"+p+"-handle");r.push(a);a.region=p;if(o.transparent){a.setOpacity(0)}}}o.resizeTracker.handleEls=r},disable:function(){this.resizeTracker.disable()},enable:function(){this.resizeTracker.enable()},onBeforeResize:function(a,b){return this.fireResizeEvent("beforeresize",a,b)},onResize:function(a,b){return this.fireResizeEvent("resizedrag",a,b)},onResizeEnd:function(a,b){return this.fireResizeEvent("resize",a,b)},fireResizeEvent:function(a,d,f){var c=this,b;if(c.hasListeners[a]){b=c.el.getBox();return c.fireEvent(a,c,b.width,b.height,f)}},resizeTo:function(b,a){var c=this;c.target.setSize(b,a);c.fireEvent("resize",c,b,a,null)},getEl:function(){return this.el},getTarget:function(){return this.target},destroy:function(){var f=this,d,c=f.handles,a=c.length,b=f.possiblePositions,g;f.resizeTracker.destroy();if(f.isTargetWrapped){f.target.destroy()}for(d=0;d<a;d++){if((g=f[b[c[d]]])){g.destroy()}}f.callParent()}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.resizer,"Resizer",Ext,"Resizable"],0));(Ext.cmd.derive("Ext.toolbar.Fill",Ext.Component,{alternateClassName:"Ext.Toolbar.Fill",ariaRole:"presentation",isFill:true,flex:1},0,["tbfill"],["component","box","tbfill"],{component:true,box:true,tbfill:true},["widget.tbfill"],0,[Ext.toolbar,"Fill",Ext.Toolbar,"Fill"],0));(Ext.cmd.derive("metExploreViz.view.button.buttonImportMapping.ButtonImportMappingController",Ext.app.ViewController,{init:function(){var c=this,b=c.getViewModel(),a=c.getView();a.lookupReference("importMappingHidden").on({change:function(){metExploreD3.GraphUtils.handleFileSelect(a.lookupReference("importMappingHidden").fileInputEl.dom,c.loadData)},scope:c});a.on({reloadMapping:function(){a.reset()},scope:c})},loadData:function(a,h){var d=a;a=a.replace(/\r/g,"");var m=a.split("\n");var j=m.splice(0,1);j=j[0].split("\t");var f=j.splice(0,1);var g=[];if(f[0]=="reactionDBIdentifier"||f[0]=="metaboliteDBIdentifier"||f[0]=="reactionId"||f[0]=="metaboliteId"||f[0]=="inchi"){var b=new Mapping(h,j,f[0],g);_metExploreViz.addMapping(b);for(var c=m.length-1;c>=0;c--){m[c]=m[c].split("\t")}metExploreD3.GraphMapping.mapNodeData(b,m);metExploreD3.fireEventArg("selectMappingVisu","jsonmapping",b)}else{metExploreD3.displayWarning("Syntaxe error",'File have bad syntax. See <a href="http://metexplore.toulouse.inra.fr/metexploreViz/doc/documentation.php#import">MetExploreViz documentation</a>.')}}},0,0,0,0,["controller.buttonImportMapping"],0,[metExploreViz.view.button.buttonImportMapping,"ButtonImportMappingController"],0));(Ext.cmd.derive("metExploreViz.view.button.buttonImportMapping.ButtonImportMapping",Ext.form.Panel,{controller:"buttonImportMapping",hideLabel:true,items:[{xtype:"filefield",name:"fileData",buttonOnly:true,id:"IDimport",reference:"importMappingHidden",buttonConfig:{id:"IDimportMapping"}}]},0,["buttonImportMapping"],["component","box","container","panel","form","buttonImportMapping"],{component:true,box:true,container:true,panel:true,form:true,buttonImportMapping:true},["widget.buttonImportMapping"],0,[metExploreViz.view.button.buttonImportMapping,"ButtonImportMapping"],0));(Ext.cmd.derive("metExploreViz.view.button.buttonImportSideCompounds.ButtonImportSideCompoundsController",Ext.app.ViewController,{init:function(){var c=this,b=c.getViewModel(),a=c.getView();a.lookupReference("importSideCompoundsHidden").on({change:function(){metExploreD3.GraphUtils.handleFileSelect(a.lookupReference("importSideCompoundsHidden").fileInputEl.dom,c.loadData)},scope:c})},loadData:function(a){var b=a.split("\n");var c=metExploreD3.GraphNode.loadSideCompounds(b);if(c){metExploreD3.displayMessage("MetExploreViz","Side compounds are imported!")}else{metExploreD3.displayMessage("MetExploreViz Warning","Side compounds not found!")}}},0,0,0,0,["controller.buttonImportSideCompounds"],0,[metExploreViz.view.button.buttonImportSideCompounds,"ButtonImportSideCompoundsController"],0));(Ext.cmd.derive("metExploreViz.view.button.buttonImportSideCompounds.ButtonImportSideCompounds",Ext.form.Panel,{controller:"buttonImportSideCompounds",hideLabel:true,items:[{xtype:"filefield",name:"fileData",buttonOnly:true,id:"IDimportSC",reference:"importSideCompoundsHidden",buttonConfig:{id:"IDimportSideCompounds"}}]},0,["buttonImportSideCompounds"],["component","box","container","panel","form","buttonImportSideCompounds"],{component:true,box:true,container:true,panel:true,form:true,buttonImportSideCompounds:true},["widget.buttonImportSideCompounds"],0,[metExploreViz.view.button.buttonImportSideCompounds,"ButtonImportSideCompounds"],0));(Ext.cmd.derive("metExploreViz.view.button.buttonImportToNetwork.ButtonImportToNetworkController",Ext.app.ViewController,{init:function(){var c=this,b=c.getViewModel(),a=c.getView();a.lookupReference("importNetwork").on({change:function(){metExploreD3.GraphUtils.handleFileSelect(a.lookupReference("importNetwork").fileInputEl.dom,metExploreD3.GraphPanel.refreshPanel)},scope:c});a.on({reloadMapping:c.reloadMapping,scope:c})},reloadMapping:function(c){if(_metExploreViz.getMappingsLength()!=0){var m=Ext.getCmp("comparisonSidePanel");if(m!=undefined){var f=Ext.getCmp("selectMappingVisu");var p=f.getStore();p.loadData([],false);f.clearValue();var d=[];console.log(c);if(c){var g=_metExploreViz.getMappingsSet();g.forEach(function(q){d.push(new Ext.data.Record({name:q.getName()}));p.each(function(r){d.push(new Ext.data.Record({name:r.getData().name}))})});p.loadData(d,false)}if(p.getCount()==0){f.setDisabled(true)}}}var j=Ext.getCmp("selectCondition");var b=Ext.getCmp("addCondition");var a=Ext.getCmp("selectConditionType");if(b!=undefined&&selectCondition!=undefined&&a!=undefined){j.clearValue();b.setDisabled(true);b.setTooltip("You must choose a condition to add it");j.setDisabled(true);a.setDisabled(true)}var o=_metExploreViz.getSessionById("viz");var h=this}},0,0,0,0,["controller.buttonImportToNetwork"],0,[metExploreViz.view.button.buttonImportToNetwork,"ButtonImportToNetworkController"],0));(Ext.cmd.derive("metExploreViz.view.button.buttonImportToNetwork.ButtonImportToNetwork",Ext.form.Panel,{controller:"buttonImportToNetwork",text:"Import mapping from tab file",items:[{xtype:"filefield",name:"fileData",buttonOnly:true,height:"100%",width:"100px",reference:"importNetwork",buttonConfig:{id:"IDimportNetwork"}}],hideLabel:true},0,["buttonImportToNetwork"],["component","box","container","panel","form","buttonImportToNetwork"],{component:true,box:true,container:true,panel:true,form:true,buttonImportToNetwork:true},["widget.buttonImportToNetwork"],0,[metExploreViz.view.button.buttonImportToNetwork,"ButtonImportToNetwork"],0));(Ext.cmd.derive("metExploreViz.view.form.MappingCaptionForm",Ext.panel.Panel,{region:"north",margins:"0 0 0 0",border:false},0,["mappingCaptionForm"],["component","box","container","panel","mappingCaptionForm"],{component:true,box:true,container:true,panel:true,mappingCaptionForm:true},["widget.mappingCaptionForm"],0,[metExploreViz.view.form,"MappingCaptionForm"],0));(Ext.cmd.derive("metExploreViz.view.form.SelectConditionType",Ext.form.field.ComboBox,{store:{fields:["name"],data:[{name:"Continuous"},{name:"Discrete"},{name:"Flux"}]},listeners:{render:function(a){new Ext.ToolTip({target:a.getEl(),html:"Select a type of data"})}},displayField:"name",valueField:"name",queryMode:"local",editable:false,emptyText:"-- Type of data --",margin:"5 0 5 0",anyMatch:true},0,["selectConditionType"],["component","box","field","textfield","pickerfield","combobox","combo","selectConditionType"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,selectConditionType:true},["widget.selectConditionType"],0,[metExploreViz.view.form,"SelectConditionType"],0));(Ext.cmd.derive("metExploreViz.view.form.SelectDisplayMetaboliteLabel",Ext.form.ComboBox,{fieldLabel:"Metabolite label",displayField:"name",valueField:"value",queryMode:"local",multiSelect:false,editable:false,margin:"5 5 5 5",width:"100%",store:{fields:["name","value"],data:[{name:"Database identifier",value:"dbIdentifier"},{name:"Name",value:"name"}]},emptyText:"-- Select Display Metabolite Label --"},0,["selectDisplayMetaboliteLabel"],["component","box","field","textfield","pickerfield","combobox","combo","selectDisplayMetaboliteLabel"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,selectDisplayMetaboliteLabel:true},["widget.selectDisplayMetaboliteLabel"],0,[metExploreViz.view.form,"SelectDisplayMetaboliteLabel"],0));(Ext.cmd.derive("metExploreViz.view.form.SelectDisplayReactionLabel",Ext.form.ComboBox,{fieldLabel:"Reaction label",displayField:"name",valueField:"value",queryMode:"local",multiSelect:false,editable:false,margin:"5 5 5 5",width:"100%",store:{fields:["name","value"],data:[{name:"EC",value:"ec"},{name:"Database identifier",value:"dbIdentifier"},{name:"Name",value:"name"}]},emptyText:"-- Select Display Reaction Label --"},0,["selectDisplayReactionLabel"],["component","box","field","textfield","pickerfield","combobox","combo","selectDisplayReactionLabel"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,selectDisplayReactionLabel:true},["widget.selectDisplayReactionLabel"],0,[metExploreViz.view.form,"SelectDisplayReactionLabel"],0));(Ext.cmd.derive("metExploreViz.view.form.generalStyleForm.GeneralStyleFormController",Ext.app.ViewController,{init:function(){var c=this,b=c.getViewModel(),a=c.getView();a.on({setGeneralStyle:function(){var d=_metExploreViz.getGeneralStyle();a.lookupReference("chooseMaxNodes").setValue(d.getReactionThreshold());a.lookupReference("chooseDisplayForOpt").items.get("name").setValue(d.isDisplayedLabelsForOpt());a.lookupReference("chooseDisplayForOpt").items.get("links").setValue(d.isDisplayedLinksForOpt())},scope:c});a.lookupReference("refreshGeneralConf").on({click:function(){var h=metExploreD3.getGeneralStyle();var m=false;var d=a.lookupReference("chooseMaxNodes").getValue();var g=((!isNaN(d)&&d>0)?d:h.getReactionThreshold());var f=a.lookupReference("chooseDisplayForOpt").items.get("name").getValue();var j=a.lookupReference("chooseDisplayForOpt").items.get("links").getValue();if((g!=h.getReactionThreshold())||(f!=h.isDisplayedLabelsForOpt())||(j!=h.isDisplayedLinksForOpt())){m=true;if(j!=h.isDisplayedLinksForOpt()){if(!j){metExploreD3.GraphLink.reloadLinks("viz",_metExploreViz.getSessionById("viz").getD3Data(),metExploreD3.getLinkStyle(),metExploreD3.getMetaboliteStyle())}else{d3.selectAll("path.link").remove()}metExploreD3.GraphLink.tick("viz",metExploreD3.getScaleById("viz"))}h.setReactionThreshold(parseFloat(g));h.setDisplayLabelsForOpt(f);h.setDisplayLinksForOpt(j)}},scope:c});a.lookupReference("chooseMaxNodes").on({afterrender:function(f){var d=metExploreD3.getGeneralStyle();a.lookupReference("chooseMaxNodes").setValue(d.getReactionThreshold())},scope:c});a.lookupReference("chooseDisplayForOpt").items.get("name").on({afterrender:function(f){var d=metExploreD3.getGeneralStyle();a.lookupReference("chooseDisplayForOpt").items.get("name").setValue(d.isDisplayedLabelsForOpt())},scope:c});a.lookupReference("chooseDisplayForOpt").items.get("links").on({afterrender:function(f){var d=metExploreD3.getGeneralStyle();a.lookupReference("chooseDisplayForOpt").items.get("links").setValue(d.isDisplayedLinksForOpt())},scope:c})}},0,0,0,0,["controller.form-generalStyleForm-generalStyleForm"],0,[metExploreViz.view.form.generalStyleForm,"GeneralStyleFormController"],0));(Ext.cmd.derive("metExploreViz.view.form.generalStyleForm.GeneralStyleForm",Ext.panel.Panel,{controller:"form-generalStyleForm-generalStyleForm",region:"north",margin:"0 0 0 0",flex:1,width:"100%",border:false,autoScroll:true,layout:{type:"vbox",align:"stretch"},items:[{xtype:"textfield",reference:"chooseMaxNodes",margin:"5 5 5 5",fieldLabel:"Threshold of reactions for optimization :",displayField:"threshold",editable:true,margin:"5 5 5 5",width:"100%",listeners:{change:function(b,a){this.lastValue=b}}},{xtype:"fieldcontainer",fieldLabel:"Remove on visualisation ",reference:"chooseDisplayForOpt",margin:"5 5 5 5",defaultType:"checkboxfield",items:[{boxLabel:"Name on nodes",name:"display",inputValue:"1",checked:true,id:"name"},{boxLabel:"Links",name:"display",inputValue:"2",checked:true,id:"links"}]},{xtype:"button",iconCls:"refresh",margin:"5 5 5 0",reference:"refreshGeneralConf",action:"refreshGeneralConf"}]},0,["generalStyleForm"],["component","box","container","panel","generalStyleForm"],{component:true,box:true,container:true,panel:true,generalStyleForm:true},["widget.generalStyleForm"],0,[metExploreViz.view.form.generalStyleForm,"GeneralStyleForm"],0));(Ext.cmd.derive("metExploreViz.view.form.metaboliteStyleForm.MetaboliteStyleFormController",Ext.app.ViewController,{init:function(){var c=this,b=c.getViewModel(),a=c.getView();a.on({setMetaboliteStyle:function(){var d=metExploreD3.getMetaboliteStyle();a.lookupReference("chooseHeightMetabolite").setValue(d.getHeight());a.lookupReference("chooseWidthMetabolite").setValue(d.getWidth());a.lookupReference("chooseRxMetabolite").setValue(d.getRX());a.lookupReference("chooseRyMetabolite").setValue(d.getRY());a.lookupReference("chooseStrokeMetabolite").setValue(d.getStrokeWidth());Ext.getCmp("selectDisplayMetaboliteLabel").setValue(d.getLabel())},scope:c});a.lookupReference("refreshMetaboliteStyle").on({click:function(){var q=metExploreD3.getMetaboliteStyle();var s=false;var t=a.lookupReference("chooseHeightMetabolite").getValue();var f=((!isNaN(t)&&t>0&&t<200)?t:q.getHeight());var o=a.lookupReference("chooseWidthMetabolite").getValue();var p=(!isNaN(o)&&o>0&&o<200)?o:q.getWidth();var u=a.lookupReference("chooseStrokeMetabolite").getValue();var r=(!isNaN(u)&&u>0&&u<200)?u:q.getStrokeWidth();var m=a.lookupReference("chooseRxMetabolite").getValue();var j=(!isNaN(m)&&m>=-100&&m<200)?m:q.getRX();var h=a.lookupReference("chooseRyMetabolite").getValue();var d=(!isNaN(h)&&h>=0&&h<200)?h:q.getRY();var g=a.lookupReference("selectDisplayMetaboliteLabel").getValue();if(g!=q.getLabel()||(f!=q.getHeight())||(p!=q.getWidth())||(r!=q.getStrokeWidth())||(j!=q.getRX())||(d!=q.getRY())){console.log("ok");s=true;q.setHeight(parseFloat(f));q.setWidth(parseFloat(p));q.setStrokeWidth(parseFloat(r));q.setRX(parseFloat(j));q.setRY(parseFloat(d));q.setLabel(g)}if(s){metExploreD3.GraphNode.refreshStyleOfMetabolite();metExploreD3.GraphCaption.refreshStyleOfMetabolite()}},scope:c});a.lookupReference("chooseHeightMetabolite").on({afterrender:function(f){var d=metExploreD3.getMetaboliteStyle();a.lookupReference("chooseHeightMetabolite").setValue(d.getHeight())},change:function(f,g,d){if(!isNaN(g)&&g>0&&g<200){c.changeHeight(g)}},scope:c});a.lookupReference("chooseWidthMetabolite").on({afterrender:function(f){var d=metExploreD3.getMetaboliteStyle();a.lookupReference("chooseWidthMetabolite").setValue(d.getWidth())},change:function(f,g,d){if(!isNaN(g)&&g>0&&g<200){c.changeWidth(g)}},scope:c});a.lookupReference("chooseStrokeMetabolite").on({afterrender:function(f){var d=metExploreD3.getMetaboliteStyle();a.lookupReference("chooseStrokeMetabolite").setValue(d.getStrokeWidth())},change:function(f,g,d){if(!isNaN(g)&&g>0&&g<200){c.changeStroke(g)}},scope:c});a.lookupReference("chooseRxMetabolite").on({afterrender:function(f){var d=metExploreD3.getMetaboliteStyle();a.lookupReference("chooseRxMetabolite").setValue(d.getRX())},change:function(f,g,d){if(!isNaN(g)&&g>=0&&g<200){c.changeRx(g)}},scope:c});a.lookupReference("chooseRyMetabolite").on({afterrender:function(f){var d=metExploreD3.getMetaboliteStyle();a.lookupReference("chooseRyMetabolite").setValue(d.getRY())},change:function(f,g,d){if(!isNaN(g)&&g>=0&&g<200){c.changeRy(g)}},scope:c});this.control({metaboliteStyleForm:{show:function(){this.displayNode()}},selectDisplayMetaboliteLabel:{afterrender:function(f){var d=metExploreD3.getMetaboliteStyle();f.setValue(d.getLabel())},change:function(g,f,d){c.changeLabel(f)}}})},changeHeight:function(a){if(d3.select("#vizExempleMetabolite").select("#D3vizExemple")[0][0]!=null){var b=d3.select("#vizExempleMetabolite").select("#D3vizExemple");b.select("g.node").select("rect").attr("height",a);b.select("g.node").select("text").attr("y",a)}},changeWidth:function(a){if(d3.select("#vizExempleMetabolite").select("#D3vizExemple")[0][0]!=null){var b=d3.select("#vizExempleMetabolite").select("#D3vizExemple");b.select("g.node").select("rect").attr("width",a)}},changeStroke:function(b){if(d3.select("#vizExempleMetabolite").select("#D3vizExemple")[0][0]!=null){var a=d3.select("#vizExempleMetabolite").select("#D3vizExemple");a.select("g.node").select("rect").style("stroke-width",b)}},changeRx:function(b){if(d3.select("#vizExempleMetabolite").select("#D3vizExemple")[0][0]!=null){var a=d3.select("#vizExempleMetabolite").select("#D3vizExemple");a.select("g.node").select("rect").attr("rx",b)}},changeRy:function(b){if(d3.select("#vizExempleMetabolite").select("#D3vizExemple")[0][0]!=null){var a=d3.select("#vizExempleMetabolite").select("#D3vizExemple");a.select("g.node").select("rect").attr("ry",b)}},changeLabel:function(a){var c=metExploreD3.getMetaboliteStyle();if(d3.select("#vizExempleMetabolite").select("#D3vizExemple")[0][0]!=null){var b=d3.select("#vizExempleMetabolite").select("#D3vizExemple");b.select("g.node").select("text").text(function(g){var f=$("<div/>").html(a).text();if(f==""){var f=$("<div/>").html(a).text()}return f})}},displayNode:function(){if(d3.select("#vizExempleMetabolite").select("#D3vizExemple")[0][0]!=null){d3.select("#vizExempleMetabolite").select("#D3vizExemple").selectAll("*").remove();var f=d3.select("#vizExempleMetabolite").select("#D3vizExemple")}else{var f=d3.select("#vizExempleMetabolite").append("svg").attr("width","100%").attr("height","100%").attr("class","D3vizExemple").attr("id","D3vizExemple")}var g=metExploreD3.getMetaboliteStyle();var d=this;var c=d3.behavior.zoom().scaleExtent([0.1,20]).on("zoom",function(h){d.zoom()});f=f.call(c).attr("pointer-events","all").append("svg:g").attr("class","graphComponent").attr("id","graphComponent");var b=parseInt(d3.select("#vizExempleMetabolite").style("height"));var a=parseInt(d3.select("#vizExempleMetabolite").style("width"));f.append("svg:g").attr("class","node").style("fill","white").attr("cx",a/2).attr("cy",b/2).attr("transform","translate("+a/2+","+b/2+")").append("rect").attr("width",g.getWidth()).attr("height",g.getHeight()).attr("rx",g.getRX()).attr("ry",g.getRY()).attr("transform","translate(-"+g.getWidth()/2+",-"+g.getHeight()/2+")").style("stroke",g.getStrokeColor()).style("stroke-width",g.getStrokeWidth());var j=Math.min(g.getWidth(),g.getHeight());f.select("g.node").append("svg:text").attr("class","metabolite").attr("id","metabolite").attr("fill","black").text(function(m){var h=$("<div/>").html(g.getLabel()).text();if(h==""){var h=$("<div/>").html(g.getLabel()).text()}return h}).style("font-size",g.getFontSize()).style("paint-order","stroke").style("stroke-width","1").style("stroke","white").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").attr("y",g.getHeight())},zoom:function(a){d3.select("#vizExempleMetabolite").select("#D3vizExemple").select("#graphComponent").attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}},0,0,0,0,["controller.form-metaboliteStyleForm-metaboliteStyleForm"],0,[metExploreViz.view.form.metaboliteStyleForm,"MetaboliteStyleFormController"],0));(Ext.cmd.derive("metExploreViz.view.form.metaboliteStyleForm.MetaboliteStyleForm",Ext.panel.Panel,{controller:"form-metaboliteStyleForm-metaboliteStyleForm",region:"north",height:"100%",width:"100%",margin:"0 0 0 0",flex:1,border:false,autoScroll:true,layout:{type:"vbox",align:"stretch"},items:[{id:"selectDisplayMetaboliteLabel",reference:"selectDisplayMetaboliteLabel",xtype:"selectDisplayMetaboliteLabel"},{xtype:"textfield",reference:"chooseStrokeMetabolite",margin:"5 5 5 5",fieldLabel:"Stroke width:",displayField:"stroke",editable:true,margin:"5 5 5 5",width:"100%",listeners:{change:function(b,a){this.lastValue=b}}},{xtype:"textfield",scale:"small",reference:"chooseHeightMetabolite",margin:"5 5 5 5",fieldLabel:"Height :",displayField:"height",editable:true,margin:"5 5 5 5",width:"100%",listeners:{change:function(b,a){this.lastValue=b}}},{xtype:"textfield",reference:"chooseWidthMetabolite",margin:"5 5 5 5",fieldLabel:"Width :",displayField:"width",editable:true,margin:"5 5 5 5",width:"100%",listeners:{change:function(b,a){this.lastValue=b}}},{xtype:"textfield",reference:"chooseRxMetabolite",margin:"5 5 5 5",fieldLabel:"Rx :",displayField:"rx",editable:true,margin:"5 5 5 5",width:"100%",listeners:{change:function(b,a){this.lastValue=b}}},{xtype:"textfield",reference:"chooseRyMetabolite",margin:"5 5 5 5",fieldLabel:"Ry :",displayField:"ry",editable:true,margin:"5 5 5 5",width:"100%",listeners:{change:function(b,a){this.lastValue=b}}},{xtype:"menuseparator"},{layout:{type:"hbox",align:"center",pack:"center"},items:[{id:"vizExempleMetabolite",xtype:"panel",margins:"0 0 0 0",closable:false,region:"center",height:100,width:100,flex:1,split:true}]},{xtype:"button",iconCls:"refresh",margin:"5 5 5 0",reference:"refreshMetaboliteStyle",action:"refreshMetaboliteStyle"}]},0,["metaboliteStyleForm"],["component","box","container","panel","metaboliteStyleForm"],{component:true,box:true,container:true,panel:true,metaboliteStyleForm:true},["widget.metaboliteStyleForm"],0,[metExploreViz.view.form.metaboliteStyleForm,"MetaboliteStyleForm"],0));(Ext.cmd.derive("metExploreViz.view.form.reactionStyleForm.ReactionStyleFormController",Ext.app.ViewController,{init:function(){var c=this,b=c.getViewModel(),a=c.getView();a.on({setReactionStyle:function(){var d=metExploreD3.getReactionStyle();a.lookupReference("chooseHeightReaction").setValue(d.getHeight());a.lookupReference("chooseWidthReaction").setValue(d.getWidth());a.lookupReference("chooseRxReaction").setValue(d.getRX());a.lookupReference("chooseRyReaction").setValue(d.getRY());a.lookupReference("chooseStrokeReaction").setValue(d.getStrokeWidth());a.down("#hiddenColor").lastValue=d.getStrokeColor();metExploreD3.fireEventArg("chooseStrokeColorReactionPicker","change",d.getStrokeColor());Ext.getCmp("selectDisplayReactionLabel").setValue(d.getLabel())},scope:c});a.lookupReference("refreshReactionStyle").on({click:function(){var s=metExploreD3.getReactionStyle();var u=false;var v=a.lookupReference("chooseHeightReaction").getValue();var f=((!isNaN(v)&&v>0&&v<200)?v:s.getHeight());var p=a.down("#hiddenColor").lastValue;var t=(p!="init"?p:s.getStrokeColor());var o=a.lookupReference("chooseWidthReaction").getValue();var q=(!isNaN(o)&&o>0&&o<200)?o:s.getWidth();var w=a.lookupReference("chooseStrokeReaction").getValue();var r=(!isNaN(w)&&w>0&&w<200)?w:s.getStrokeWidth();var m=a.lookupReference("chooseRxReaction").getValue();var j=(!isNaN(m)&&m>=0&&m<200)?m:s.getRX();var h=a.lookupReference("chooseRyReaction").getValue();var d=(!isNaN(h)&&h>=0&&h<200)?h:s.getRY();var g=a.lookupReference("selectDisplayReactionLabel").getValue();if(g!=s.getLabel()||(f!=s.getHeight())||(q!=s.getWidth())||(r!=s.getStrokeWidth())||(j!=s.getRX())||(d!=s.getRY())||(t!=s.getStrokeColor())){u=true;s.setStrokeColor(t);s.setHeight(parseFloat(f));s.setWidth(parseFloat(q));s.setStrokeWidth(parseFloat(r));s.setRX(parseFloat(j));s.setRY(parseFloat(d));s.setLabel(g)}if(u){metExploreD3.GraphNode.refreshStyleOfReaction();metExploreD3.GraphCaption.refreshStyleOfReaction()}},scope:c});a.lookupReference("chooseHeightReaction").on({afterrender:function(d){var f=metExploreD3.getReactionStyle();a.lookupReference("chooseHeightReaction").setValue(f.getHeight())},change:function(f,g,d){if(!isNaN(g)&&g>0&&g<200){c.changeHeight(g)}},scope:c});a.lookupReference("chooseWidthReaction").on({afterrender:function(d){var f=metExploreD3.getReactionStyle();a.lookupReference("chooseWidthReaction").setValue(f.getWidth())},change:function(f,g,d){if(!isNaN(g)&&g>0&&g<200){c.changeWidth(g)}},scope:c});a.lookupReference("chooseRxReaction").on({afterrender:function(d){var f=metExploreD3.getReactionStyle();a.lookupReference("chooseRxReaction").setValue(f.getRX())},change:function(f,g,d){if(!isNaN(g)&&g>=0&&g<200){c.changeRx(g)}},scope:c});a.lookupReference("chooseRyReaction").on({afterrender:function(d){var f=metExploreD3.getReactionStyle();a.lookupReference("chooseRyReaction").setValue(f.getRY())},change:function(f,g,d){if(!isNaN(g)&&g>=0&&g<200){c.changeRy(g)}},scope:c});a.lookupReference("chooseStrokeReaction").on({afterrender:function(d){var f=metExploreD3.getReactionStyle();a.lookupReference("chooseStrokeReaction").setValue(f.getStrokeWidth())},change:function(f,g,d){if(!isNaN(g)&&g>0&&g<200){c.changeStroke(g)}},scope:c});a.down("#hiddenColor").on({change:function(f,d){a.down("#hiddenColor").lastValue=f;c.changeStrokeColor(f)},scope:c});this.control({reactionStyleForm:{beforerender:function(){var d=metExploreD3.getReactionStyle();var g=document.createElement("script");g.setAttribute("src",document.location.href.split("index.html")[0]+"resources/lib/jscolor/jscolor.js");g.setAttribute("src",document.location.href.split("SpecRunner.html")[0]+"resources/lib/jscolor/jscolor.js");document.body.appendChild(g);var f=new Ext.Panel({id:"chooseStrokeColorReactionPicker",border:false,html:"<input size=\"5\" onchange=\"Ext.getCmp('reactionStyleForm').down('#hiddenColor').fireEvent('change', '#'+this.color.valueElement.value, '"+d.getStrokeColor()+"');\" value='"+d.getStrokeColor().split("#")[1]+"'\" class=\"color {pickerFaceColor:'#5FA2DD',pickerPosition:'right', pickerFace:5}\" style=\"border:1px solid #606060; border-radius: 2px;\">"});Ext.getCmp("chooseStrokeColorReaction").add(f)},show:function(){this.displayNode()}},selectDisplayReactionLabel:{afterrender:function(d){var f=metExploreD3.getReactionStyle();d.setValue(f.getLabel())},change:function(g,f,d){c.changeLabel(f)}}})},changeHeight:function(a){if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){var b=d3.select("#vizExempleReaction").select("#D3vizExemple");b.select("g.node").select("rect").attr("height",a);b.select("g.node").select("text").attr("y",a)}},changeWidth:function(a){if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){var b=d3.select("#vizExempleReaction").select("#D3vizExemple");b.select("g.node").select("rect").attr("width",a)}},changeStroke:function(b){if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){var a=d3.select("#vizExempleReaction").select("#D3vizExemple");a.select("g.node").select("rect").style("stroke-width",b)}},changeStrokeColor:function(b){if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){var a=d3.select("#vizExempleReaction").select("#D3vizExemple");a.select("g.node").select("rect").style("stroke",b)}},changeRx:function(b){if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){var a=d3.select("#vizExempleReaction").select("#D3vizExemple");a.select("g.node").select("rect").attr("rx",b)}},changeRy:function(b){if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){var a=d3.select("#vizExempleReaction").select("#D3vizExemple");a.select("g.node").select("rect").attr("ry",b)}},changeLabel:function(b){var a=metExploreD3.getReactionStyle();var d=Math.min(a.getWidth(),a.getHeight());if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){var c=d3.select("#vizExempleReaction").select("#D3vizExemple");c.select("g.node").select("text").remove();c.select("g.node").append("svg:text").attr("class","reaction").attr("id","reaction").attr("fill","black").text(function(g){var f=$("<div/>").html(b).text();if(f==""){var f=$("<div/>").html(b).text()}return f}).style("font-size",function(f){return Math.min(2*d,(2*d-2)/this.getComputedTextLength()*10)+"px"}).style("font-weight","bold").attr("dy",".3em")}},displayNode:function(){if(d3.select("#vizExempleReaction").select("#D3vizExemple")[0][0]!=null){d3.select("#vizExempleReaction").select("#D3vizExemple").selectAll("*").remove();var g=d3.select("#vizExempleReaction").select("#D3vizExemple")}else{var g=d3.select("#vizExempleReaction").append("svg").attr("width","100%").attr("height","100%").attr("class","D3vizExemple").attr("id","D3vizExemple")}var b=metExploreD3.getReactionStyle();var f=this;var d=d3.behavior.zoom().scaleExtent([0.1,20]).on("zoom",function(h){f.zoom()});g=g.call(d).attr("pointer-events","all").append("svg:g").attr("class","graphComponent").attr("id","graphComponent");var c=parseInt(d3.select("#vizExempleReaction").style("height"));var a=parseInt(d3.select("#vizExempleReaction").style("width"));g.append("svg:g").attr("class","node").style("fill","white").attr("cx",a/2).attr("cy",c/2).attr("transform","translate("+a/2+","+c/2+")").append("rect").attr("class","example").attr("id","example").attr("width",b.getWidth()).attr("height",b.getHeight()).attr("rx",b.getRX()).attr("ry",b.getRY()).attr("transform","translate(-"+b.getWidth()/2+",-"+b.getHeight()/2+")").style("stroke",b.getStrokeColor()).style("stroke-width",1);g.select("g.node").append("svg:text").attr("class","reaction").attr("id","reaction").attr("fill","black").text(function(j){var h=$("<div/>").html(b.getLabel()).text();if(h==""){var h=$("<div/>").html(b.getLabel()).text()}return h}).style("font-size",function(h){return Math.min(b.getWidth(),(b.getWidth()-b.getWidth()/10)/this.getComputedTextLength()*10)+"px"}).style("font-weight","bold").attr("dy",".3em")},zoom:function(a){d3.select("#vizExempleReaction").select("#D3vizExemple").select("#graphComponent").attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}},0,0,0,0,["controller.form-reactionStyleForm-reactionStyleForm"],0,[metExploreViz.view.form.reactionStyleForm,"ReactionStyleFormController"],0));(Ext.cmd.derive("metExploreViz.view.form.reactionStyleForm.ReactionStyleForm",Ext.panel.Panel,{controller:"form-reactionStyleForm-reactionStyleForm",region:"north",height:"100%",width:"100%",margin:"0 0 0 0",flex:1,border:false,autoScroll:true,layout:{type:"vbox",align:"stretch"},items:[{border:false,id:"chooseStrokeColorReaction",reference:"chooseStrokeColorReaction",xtype:"panel",margin:"5 5 5 5",layout:{type:"hbox",align:"stretch"},items:[{xtype:"label",forId:"color",margin:"0 68 0 0",text:"Color :"},{border:false,xtype:"hiddenfield",itemId:"hiddenColor",value:"init"}]},{reference:"selectDisplayReactionLabel",id:"selectDisplayReactionLabel",xtype:"selectDisplayReactionLabel"},{xtype:"textfield",reference:"chooseStrokeReaction",margin:"5 5 5 5",fieldLabel:"Stroke width:",displayField:"stroke",editable:true,width:"100%",width:"100%",listeners:{change:function(b,a){this.lastValue=b}}},{xtype:"textfield",scale:"small",reference:"chooseHeightReaction",margin:"5 5 5 5",fieldLabel:"Height :",displayField:"height",editable:true,width:"100%",listeners:{change:function(b,a){this.lastValue=b}}},{xtype:"textfield",reference:"chooseWidthReaction",margin:"5 5 5 5",fieldLabel:"Width :",displayField:"width",editable:true,width:"100%",listeners:{change:function(b,a){this.lastValue=b}}},{xtype:"textfield",reference:"chooseRxReaction",margin:"5 5 5 5",fieldLabel:"Rx :",displayField:"rx",editable:true,width:"100%",listeners:{change:function(b,a){this.lastValue=b}}},{xtype:"textfield",reference:"chooseRyReaction",margin:"5 5 5 5",fieldLabel:"Ry :",displayField:"ry",editable:true,width:"100%",listeners:{change:function(b,a){this.lastValue=b}}},{xtype:"menuseparator"},{layout:{type:"hbox",align:"center",pack:"center"},items:[{id:"vizExempleReaction",xtype:"panel",margins:"0 0 0 0",closable:false,region:"center",height:100,width:100,flex:1,split:true}]},{xtype:"button",iconCls:"refresh",margin:"5 5 5 0",reference:"refreshReactionStyle",action:"refreshReactionStyle"}]},0,["reactionStyleForm"],["component","box","container","panel","reactionStyleForm"],{component:true,box:true,container:true,panel:true,reactionStyleForm:true},["widget.reactionStyleForm"],0,[metExploreViz.view.form.reactionStyleForm,"ReactionStyleForm"],0));(Ext.cmd.derive("metExploreViz.view.form.selectCondition.SelectConditionController",Ext.app.ViewController,{init:function(){var c=this,b=c.getViewModel(),a=c.getView()}},0,0,0,0,["controller.form-selectCondition-selectCondition"],0,[metExploreViz.view.form.selectCondition,"SelectConditionController"],0));(Ext.cmd.derive("metExploreViz.view.form.selectCondition.SelectCondition",Ext.form.field.ComboBox,{controller:"form-selectCondition-selectCondition",store:{fields:["name"]},listeners:{render:function(a){new Ext.ToolTip({target:a.getEl(),html:"Select a condition"})}},flex:1,multiSelect:true,displayField:"name",valueField:"name",queryMode:"local",editable:false,emptyText:"-- Select a condition --",margin:"5 0 5 0",anyMatch:true},0,["selectCondition"],["component","box","field","textfield","pickerfield","combobox","combo","selectCondition"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,selectCondition:true},["widget.selectCondition"],0,[metExploreViz.view.form.selectCondition,"SelectCondition"],0));(Ext.cmd.derive("metExploreViz.view.form.selectMapping.SelectMappingController",Ext.app.ViewController,{init:function(){var c=this,b=c.getViewModel(),a=c.getView();a.on({jsonmapping:function(d){c.initMapping(d)},removemapping:function(d){c.removeMapping(d)},change:function(h,m,d){var f=Ext.getCmp("selectConditionForm");if(f!=undefined){_metExploreViz.getSessionById("viz").setActiveMapping(m);f.fireEvent("closeMapping",m);var o=_metExploreViz.getMappingsSet();if(_metExploreViz.getMappingsLength()!=0){var j=_metExploreViz.getMappingByName(m);if(j!=null){var g=j.getConditions();if(j!=undefined){c.fillComboSelectCondition(h,j,d)}}}}},collapse:function(g,d){var h=_metExploreViz.getMappingsSet();if(_metExploreViz.getMappingsLength()!=0){var f=_metExploreViz.getMappingByName(g.getValue());if(f!=undefined){metExploreD3.GraphMapping.mapNodes(f.getName())}}},scope:c})},initMapping:function(d){if(_metExploreViz.getMappingsLength()!=0){var c=Ext.getCmp("comparisonSidePanel");if(c!=undefined){if(c.isHidden()){c.setHidden(false)}c.expand();var f=Ext.getCmp("selectMappingVisu");f.setValue(d.getName());var b=f.getStore();var a=[];a.push(new Ext.data.Record({name:d.getName()}));b.each(function(g){a.push(new Ext.data.Record({name:g.getData().name}))});_metExploreViz.getSessionById("viz").setActiveMapping(d.getName());b.loadData(a,false);if(b.getCount()==1){f.setDisabled(false)}}}},removeMapping:function(d){var c=Ext.getCmp("comparisonSidePanel");if(c!=undefined){if(c.isHidden()){c.setHidden(false)}c.expand();var f=Ext.getCmp("selectMappingVisu");var b=f.getStore();var a=[];b.each(function(g){if(g.getData().name!=d.getName()){a.push(new Ext.data.Record({name:g.getData().name}))}});b.loadData(a,false);f.clearValue();if(b.getCount()==0){f.setDisabled(true)}}},fillComboSelectCondition:function(j,a,c){_metExploreViz.getSessionById("viz").setMapped("false");var o=_metExploreViz.getMappingsSet();var p=a.getConditions();var m=Ext.getCmp("selectCondition");var f=m.getStore();var h=[];for(var g=0;g<p.length;g++){h.push({name:p[g]})}f.loadData(h,false);var d=f.getCount();if(d>=1){m.setDisabled(false)}m.setValue(f[0]);var b=Ext.getCmp("selectConditionType");if(selectCondition!=undefined&&b!=undefined){if(d<1||(d==1&&p[0]=="undefined")){m.clearValue();m.setDisabled(true);b.setDisabled(true)}else{b.setValue(b.getStore().first());m.setValue(f.first());m.setDisabled(false);b.setDisabled(false)}}}},0,0,0,0,["controller.form-selectMapping-selectMapping"],0,[metExploreViz.view.form.selectMapping,"SelectMappingController"],0));(Ext.cmd.derive("metExploreViz.view.form.selectMapping.SelectMappingModel",Ext.app.ViewModel,{parent:"selectCondiditionForm",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.form-selectMapping-selectMapping"],0,[metExploreViz.view.form.selectMapping,"SelectMappingModel"],0));(Ext.cmd.derive("metExploreViz.view.form.selectMapping.SelectMapping",Ext.form.field.ComboBox,{controller:"form-selectMapping-selectMapping",viewModel:{type:"form-selectMapping-selectMapping"},store:{fields:["name"]},listeners:{render:function(a){new Ext.ToolTip({target:a.getEl(),html:"Select a mapping"})}},displayField:"name",valueField:"name",width:150,queryMode:"local",multiSelect:false,editable:false,emptyText:"-- Select Mapping --",margin:"5 0 5 0"},0,["selectMapping"],["component","box","field","textfield","pickerfield","combobox","combo","selectMapping"],{component:true,box:true,field:true,textfield:true,pickerfield:true,combobox:true,combo:true,selectMapping:true},["widget.selectMapping"],0,[metExploreViz.view.form.selectMapping,"SelectMapping"],0));(Ext.cmd.derive("metExploreViz.view.form.selectConditionForm.SelectConditionFormController",Ext.app.ViewController,{init:function(){var c=this,b=c.getViewModel(),a=c.getView();a.on({afterDiscreteMapping:this.addMappingCaptionForm,scope:c});a.on({afterContinuousMapping:this.addMappingCaptionForm,scope:c});a.on({closeMapping:function(d){c.closeMapping(d)},scope:c});a.on({resetMapping:function(){c.resetMapping()},scope:c});a.on({removeMapping:function(d){c.removeMapping(d)},scope:c});a.on({reset:function(d){},scope:c});a.lookupReference("selectConditionType").on({change:function(g,f,d){if(f!="Flux"){a.lookupReference("opacity").setHidden(true);a.lookupReference("valueonarrow").setHidden(true)}else{a.lookupReference("opacity").setHidden(false);a.lookupReference("valueonarrow").setHidden(false)}},scope:c});a.lookupReference("selectCondition").on({change:function(j,f,d){var h=a.lookupReference("selectConditionType").lastValue;if(h!="Flux"){if(d!=null){var g=f.indexOf(d[0]);if(g!=-1){f.splice(g,1)}a.lookupReference("selectCondition").setValue(f[0])}a.lookupReference("selectCondition").collapse()}else{if(f>2){f.splice(0,1);a.lookupReference("selectCondition").setValue(f)}}},collapse:function(h,f){var d=_metExploreViz.getSessionById("viz");var g=this;if(a.lookupReference("selectCondition").getValue().length>0){if(d.isMapped()!="false"){Ext.Msg.show({title:"Are you sure?",msg:"This action will remove previous mapping. <br />Would you like to do this?",buttons:Ext.Msg.OKCANCEL,fn:function(j){if(j=="ok"){var m="true";c.closeMapping(m);g.map()}},icon:Ext.Msg.QUESTION})}else{this.map()}}},scope:c})},removeMapping:function(a){var o=_metExploreViz.getSessionById("viz");var p=Ext.getCmp("selectConditionForm");if(p!=undefined){var q=o.getActiveMapping();if(q==a.getName()){var g=Ext.getStore("S_Condition");var d=o.isMapped();this.removeGraphMapping(d);if(d!=false&&d!="false"&&d!="none"){if(o.getMappingDataType()=="Continuous"){var c=o.getColorMappingsSet();var m=o.getColorMappingsSetLength()==0;if(!m){c=[]}}if(o.getMappingDataType()=="Flux"||Array.isArray(o.isMapped())){var b=Ext.getCmp("panel"+o.isMapped()[0].replace(".",""))}else{var b=Ext.getCmp("panel"+o.isMapped().replace(".",""))}if(b!=undefined){b.close();var c=o.getColorMappingsSet();c.forEach(function(r){var s=r.getName().toString().replace(".","_");if(Ext.getCmp("selectConditionForm").down("#mappingCaptionForm"+s)!=null){Ext.getCmp("selectConditionForm").down("#mappingCaptionForm"+s).close()}});if(Ext.getCmp("selectConditionForm").down("#undefined")!=null){Ext.getCmp("selectConditionForm").down("#undefined").close()}}}o.setMapped("false");var j=Ext.getCmp("selectCondition");var g=j.getStore();var h=[];g.loadData(h,false);var f=Ext.getCmp("selectConditionType");j.clearValue();j.setDisabled(true);f.setDisabled(true)}metExploreD3.fireEventArg("selectMappingVisu","removemapping",a);_metExploreViz.removeMapping(a.getName())}},resetMapping:function(g){var q=_metExploreViz.getSessionById("viz");var r=Ext.getCmp("selectConditionForm");if(r!=undefined){var h=Ext.getStore("S_Condition");var b=q.isMapped();this.removeGraphMapping(b);if(q.getMappingDataType()=="Continuous"){var a=q.getColorMappingsSet();var p=q.getColorMappingsSetLength()==0;if(!p){a=[]}}if(q.getMappingDataType()=="Flux"||Array.isArray(q.isMapped())){var c=Ext.getCmp("panel"+q.isMapped()[0].replace(".",""))}else{var c=Ext.getCmp("panel"+q.isMapped().replace(".",""))}if(c!=undefined){c.close();var a=q.getColorMappingsSet();a.forEach(function(t){var u=t.getName().toString().replace(".","_");if(Ext.getCmp("selectConditionForm").down("#mappingCaptionForm"+u)!=null){Ext.getCmp("selectConditionForm").down("#mappingCaptionForm"+u).close()}});if(Ext.getCmp("selectConditionForm").down("#undefined")!=null){Ext.getCmp("selectConditionForm").down("#undefined").close()}}q.setMapped("false");var o=Ext.getCmp("selectCondition");var h=o.getStore();var m=[];h.loadData(m,false);var d=Ext.getCmp("selectConditionType");o.clearValue();o.setDisabled(true);d.setDisabled(true);var j=Ext.getCmp("selectMappingVisu");var s=j.getStore();var f=[];s.loadData(f,false);j.clearValue();j.setDisabled(true)}},closeMapping:function(h){var f=_metExploreViz.getSessionById("viz");if(f.isMapped()!="false"){var d=Ext.getStore("S_Condition");var b=f.isMapped();this.removeGraphMapping(b);if(f.getMappingDataType()=="Continuous"||f.getMappingDataType()=="Flux"){var g=f.getColorMappingsSet();var c=f.getColorMappingsSetLength()==0;if(!c){g=[]}}if(f.getMappingDataType()=="Flux"||Array.isArray(f.isMapped())){var a=Ext.getCmp("panel"+f.isMapped()[0].replace(".",""))}else{var a=Ext.getCmp("panel"+f.isMapped().replace(".",""))}if(a!=undefined){a.close();var g=f.getColorMappingsSet();g.forEach(function(j){var m=j.getName().toString().replace(".","_");if(Ext.getCmp("selectConditionForm").down("#mappingCaptionForm"+m)!=null){Ext.getCmp("selectConditionForm").down("#mappingCaptionForm"+m).close()}});if(Ext.getCmp("selectConditionForm").down("#undefined")!=null){Ext.getCmp("selectConditionForm").down("#undefined").close()}}f.setMappingDataType(null);f.setMapped("false")}},removeGraphMapping:function(b){metExploreD3.GraphMapping.removeGraphMappingData(b);var c=Ext.getCmp("selectCondition").getStore();var a=Ext.getCmp("selectConditionType")},map:function(){var d=this,j=d.getViewModel(),g=d.getView();var c=Ext.getCmp("selectCondition");var a=Ext.getCmp("selectMappingVisu");var f=c.getValue();var b=a.getValue();var h=Ext.getCmp("selectConditionType").getValue();if(g.lookupReference("selectCondition").value.length==1){var m="Unique"}else{var m="Compare"}this.graphMapping(h,f,b,m)},graphMapping:function(a,b,f,c){var d=_metExploreViz.getSessionById("viz");d.setActiveMapping(f);if(a=="Continuous"){metExploreD3.GraphMapping.graphMappingContinuousData(f,b)}if(a=="Flux"){metExploreD3.GraphMapping.graphMappingFlux(f,b,c,undefined,undefined,Ext.getCmp("opacityCheck").checked,Ext.getCmp("valueonarrowCheck").checked)}if(a=="Discrete"){metExploreD3.GraphMapping.graphMappingDiscreteData(f,b)}d.setMappingDataType(a)},addMappingCaptionForm:function(d){var B=this,g=B.getViewModel(),r=B.getView();var o=Ext.getCmp("selectConditionForm");var m=Ext.getCmp("selectCondition");var b=m.getValue();var A=Ext.getCmp("selectMappingVisu");var q=A.getValue();var h=_metExploreViz.getSessionById("viz");h.setMapped(b);if(d=="flux"||Array.isArray(b)){var p=b[0]}else{var p=b}if(o!=undefined){if(Ext.getCmp("panel"+p)==undefined){var y=[];var c=[];var f=h.getColorMappingsSet();var j=this;var w=document.createElement("script");w.setAttribute("src",document.location.href.split("index.html")[0]+"resources/lib/jscolor/jscolor.js");document.body.appendChild(w);var v=0;f.forEach(function(D){var C=D.getName();var F=C;if(d=="flux"){F=b[v]}v++;var E=C.toString().replace(".","_");var G=Ext.create("metExploreViz.view.form.MappingCaptionForm",{itemId:"mappingCaptionForm"+E,margin:"0 0 0 0",padding:"0 0 0 0",border:false,items:[{itemId:"chooseColorReaction"+E,xtype:"panel",border:false,layout:{type:"hbox",align:"stretch"},items:[{xtype:"label",forId:"color",text:F+" :",margin:"0 0 0 10",flex:1,border:false},{border:false,xtype:"hiddenfield",itemId:"hidden"+E,value:D.getValue(),listeners:{change:function(I,H){this.lastValue=I}}},{border:false,margin:"0 10 0 0",width:"40%",html:"<input size=\"5\" onchange=\"Ext.getCmp('selectConditionForm').down('#hidden"+E+"').fireEvent('change', '#'+this.color.valueElement.value, '"+D.getValue()+"');\" value='"+D.getValue()+";'\" class=\"color {pickerFaceColor:'#5FA2DD',pickerPosition:'right',pickerFace:5}\">"}]}]});c.push(G);y.push(E)});var z=Ext.create("Ext.panel.Panel",{id:"panel"+p.replace(".",""),border:false,width:"100%",bodyBorder:false,xtype:"panel",layout:{type:"hbox",align:"stretch"},items:[{xtype:"label",forId:"condName",margin:"8 5 5 10",flex:1}]});var a=Ext.create("Ext.Button",{iconCls:"del",tooltip:"You must choose a condition to add it",margin:"5 5 5 0",id:"delCondition"+p.replace(".",""),action:"delCondition"+p.replace(".",""),handler:function(){var C=this.findParentBy(function(D){return D instanceof Ext.panel.Panel});j.closeMapping(q)}});z.add(a);var u=Ext.getCmp("selectConditionType").getValue();var s=q;var t=Ext.create("Ext.Button",{iconCls:"refresh",margin:"5 5 5 0",id:"refreshColor"+p.replace(".",""),action:"refreshColor"+p.replace(".",""),handler:function(){var C=s;var E=h.getColorMappingsSet();if(d=="discrete"){E.forEach(function(F){var G=F.getName().toString().replace(".","_");if(Ext.getCmp("selectConditionForm").down("#hidden"+G)!=null){if(F.getValue()!=Ext.getCmp("selectConditionForm").down("#hidden"+G).lastValue){metExploreD3.GraphMapping.setDiscreteMappingColor(Ext.getCmp("selectConditionForm").down("#hidden"+G).lastValue,F.getName(),b,s)}}})}else{E.forEach(function(F){var G=F.getName().toString().replace(".","_");if(Ext.getCmp("selectConditionForm").down("#hidden"+G)!=null){if(F.getValue()!=Ext.getCmp("selectConditionForm").down("#hidden"+G).lastValue){metExploreD3.GraphMapping.setContinuousMappingColor(Ext.getCmp("selectConditionForm").down("#hidden"+G).lastValue,F.getName(),b,s)}}});if(h.getColorMappingsSet()[1]!=undefined){if(parseFloat(h.getColorMappingsSet()[0].getName())<parseFloat(h.getColorMappingsSet()[1].getName())){maxValue=parseFloat(h.getColorMappingsSet()[1].getName())}else{maxValue=parseFloat(h.getColorMappingsSet()[0].getName());minValue=parseFloat(h.getColorMappingsSet()[1].getName())}}else{color=parseFloat(h.getColorMappingsSet()[0].getName())}if(d=="continuous"){metExploreD3.GraphMapping.graphMappingContinuousData(s,p,h.getColorMappingById(minValue).getValue(),h.getColorMappingById(maxValue).getValue())}else{if(b.length==1){var D="Unique";metExploreD3.GraphMapping.graphMappingFlux(s,b,D,h.getColorMappingById(color).getValue(),undefined,Ext.getCmp("opacityCheck").checked,Ext.getCmp("valueonarrowCheck").checked)}else{var D="Compare";metExploreD3.GraphMapping.graphMappingFlux(s,b,D,h.getColorMappingById(maxValue).getValue(),h.getColorMappingById(minValue).getValue(),Ext.getCmp("opacityCheck").checked,Ext.getCmp("valueonarrowCheck").checked)}}}}});z.add(t);var o=Ext.getCmp("selectConditionForm");if(o!=undefined){o.add(z);c.forEach(function(C){o.add(C)})}}}}},0,0,0,0,["controller.form-selectConditionForm-selectConditionForm"],0,[metExploreViz.view.form.selectConditionForm,"SelectConditionFormController"],0));(Ext.cmd.derive("metExploreViz.view.form.selectConditionForm.SelectConditionFormModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.form-selectConditionForm-selectConditionForm"],0,[metExploreViz.view.form.selectConditionForm,"SelectConditionFormModel"],0));(Ext.cmd.derive("metExploreViz.view.form.selectConditionForm.SelectConditionForm",Ext.panel.Panel,{controller:"form-selectConditionForm-selectConditionForm",viewModel:{type:"form-selectConditionForm-selectConditionForm"},layout:{type:"vbox",align:"stretch"},region:"north",width:"100%",margins:"0 0 0 0",split:true,animation:true,autoScroll:true,autoHeight:true,items:[{id:"selectMappingVisu",xtype:"selectMapping",disabled:true},{xtype:"menuseparator"},{id:"selectConditionType",xtype:"selectConditionType",reference:"selectConditionType",disabled:true},{margin:"10 0 0 5",xtype:"fieldcontainer",defaultType:"checkboxfield",reference:"opacity",hidden:true,items:[{boxLabel:"Opacity",name:"opacity",inputValue:true,id:"opacityCheck"}]},{margin:"10 0 0 5",xtype:"fieldcontainer",defaultType:"checkboxfield",reference:"valueonarrow",hidden:true,items:[{boxLabel:"Show values on arrows",name:"valueonarrow",inputValue:true,id:"valueonarrowCheck"}]},{border:false,id:"chooseCondition",xtype:"panel",autoScroll:true,layout:{type:"hbox",align:"stretch"},items:[{id:"selectCondition",xtype:"selectCondition",reference:"selectCondition",disabled:true}]},{xtype:"menuseparator"}]},0,["selectConditionForm"],["component","box","container","panel","selectConditionForm"],{component:true,box:true,container:true,panel:true,selectConditionForm:true},["widget.selectConditionForm"],0,[metExploreViz.view.form.selectConditionForm,"SelectConditionForm"],0));(Ext.cmd.derive("metExploreViz.view.form.updateStyleForm.UpdateStyleFormController",Ext.app.ViewController,{init:function(){this.control({"updateStyleForm combobox[action=changeObject]":{change:function(c,d,a){var f=Ext.getCmp(d);if(f!=undefined){f.setVisible(true)}if(a!=undefined){var b=Ext.getCmp(a);if(b!=undefined){b.setVisible(false)}}}}})}},0,0,0,0,["controller.form-updateStyleForm-updateStyleForm"],0,[metExploreViz.view.form.updateStyleForm,"UpdateStyleFormController"],0));(Ext.cmd.derive("metExploreViz.view.form.updateStyleForm.UpdateStyleForm",Ext.panel.Panel,{controller:"form-updateStyleForm-updateStyleForm",height:200,width:"100%",margin:"0 0 0 0",split:true,layout:{type:"vbox",align:"stretch"},animation:true,items:[{id:"selectObject",xtype:"combobox",editable:false,margin:"5 5 5 5",action:"changeObject",emptyText:"-- Choose an object --",store:[["reactionStyleForm","Reaction"],["metaboliteStyleForm","Metabolite"],["generalStyleForm","General"]]},{xtype:"menuseparator"},{id:"reactionStyleForm",xtype:"reactionStyleForm",hidden:true},{id:"metaboliteStyleForm",xtype:"metaboliteStyleForm",hidden:true},{id:"generalStyleForm",xtype:"generalStyleForm",hidden:true}]},0,["updateStyleForm"],["component","box","container","panel","updateStyleForm"],{component:true,box:true,container:true,panel:true,updateStyleForm:true},["widget.updateStyleForm"],0,[metExploreViz.view.form.updateStyleForm,"UpdateStyleForm"],0));(Ext.cmd.derive("metExploreViz.view.panel.networkPanel.NetworkPanelController",Ext.app.ViewController,{init:function(){var c=this,b=c.getViewModel(),a=c.getView();a.on({afterrender:c.initParams,scope:c});a.on({afterlunch:function(d){c.myRender(d);Ext.on("resize",function(f,g){document.getElementById("visualisation").style.width=f+"px";document.getElementById("visualisation").style.height=g+"px";a.setSize(f,g)})},scope:c})},initParams:function(){if(Ext.getCmp("networkPanel")!=undefined){var b=new Ext.LoadMask({target:Ext.getCmp("networkPanel"),msg:"This panel allows to visualize metabolic network.",id:"maskInit",msgCls:"msgClsLaunchMask"});b.show();var a=b.getEl().down(".x-mask-msg");var d=a.getFirstChild().appendChild({tag:"div","class":"x-mask-msg-text"});Ext.create("Ext.form.Label",{text:"Load network from : ",id:"textloadnetworkfrom",style:"top : 15px",renderTo:d});Ext.create("Ext.button.Button",{text:"JSON File",id:"butloadnetworkfromjson",style:"margin : 10px 10px 10px 10px",handler:function(){var f=Ext.getCmp("IDimportNetwork");if(f!=undefined){f.fileInputEl.dom.click()}b.hide()},renderTo:d});Ext.create("Ext.button.Button",{text:metExploreD3.getGeneralStyle().getWebsiteName(),id:"buttonImportToNetworkFromWebsite",disabled:true,hidden:false,style:"margin : 10px 10px 10px 10px",handler:function(){metExploreD3.GraphPanel.refreshPanel(_metExploreViz.getDataFromWebSite());b.hide()},listeners:{hideInitialLoadButtons:function(){Ext.getCmp("textloadnetworkfrom").hide();Ext.getCmp("butloadnetworkfromjson").hide();this.hide()},hideMask:function(){b.hide()},setGeneralStyle:function(){this.setText(metExploreD3.getGeneralStyle().getWebsiteName())},cartFilled:function(){this.setDisabled(false)}},renderTo:d})}var c=new NetworkVizSession();c.setVizEngine("D3");c.setId("viz");c.setMapped("false");c.setDisplayNodeName("name");_metExploreViz.addSession(c)},myRender:function(b){var d=this,a=d.getView();var c=document.getElementById(b);a.render(c)}},0,0,0,0,["controller.panel-networkPanel-networkPanel"],0,[metExploreViz.view.panel.networkPanel,"NetworkPanelController"],0));(Ext.cmd.derive("metExploreViz.view.panel.graphPanel.GraphPanelController",Ext.app.ViewController,{init:function(){var c=this,b=c.getViewModel(),a=c.getView();Ext.QuickTips.init();a.on({setLoadButtonHidden:c.changeoption,afterrefresh:function(){var f=a.lookupReference("buttonCopyNetwork");var o=a.lookupReference("buttonSaveNetwork");var q=a.lookupReference("vizMiningMenuID");var p=a.lookupReference("vizImportMenuID");var j=a.lookupReference("vizExportMenuID");var g=a.lookupReference("vizSaveMenuID");var m=a.lookupReference("vizDrawingMenuID");var d=a.lookupReference("vizLoadMenuID");var h=a.lookupReference("searchNode");if(h!=undefined){h.setDisabled(false)}if(f!=undefined){f.setDisabled(false);f.setTooltip("The graph will be copy in other frame")}if(o!=undefined){o.setDisabled(false);o.setTooltip("The graph will be saved in json file")}if(q!=undefined){q.setDisabled(false);q.setTooltip("Sub-network extraction/visualisation")}if(j!=undefined){j.setDisabled(false);j.setTooltip("Export network as an image")}if(p!=undefined){p.setDisabled(false);p.setTooltip("Import data on nodes")}if(g!=undefined){g.setDisabled(false);g.setTooltip("Save drawing")}if(m!=undefined){m.setDisabled(false);m.setTooltip("Change network drawing")}if(d!=undefined){d.setDisabled(false);d.setTooltip("Load a network in the visualisation")}},initSearch:c.initSearch,scope:c});a.on({afterrefresh:c.drawCaption,scope:c});a.lookupReference("searchNodeButton").on({click:c.searchNode,scope:c})},changeoption:function(){var b=this,a=b.getView();if(metExploreD3.getGeneralStyle().loadButtonIsHidden()){metExploreD3.hideInitialLoadButtons();if(!a.lookupReference("vizLoadMenuID").hidden){a.lookupReference("vizLoadMenuID").setHidden(true)}}},drawCaption:function(){metExploreD3.GraphCaption.drawCaption()},initSearch:function(){var c=this,b=c.getViewModel(),a=c.getView();if(a.lookupReference("searchNodeTextField").getValue()!=""){a.lookupReference("searchNodeTextField").reset()}},searchNode:function(){var c=this,b=c.getViewModel(),a=c.getView();if(a.lookupReference("searchNodeTextField").getValue()=="happyfox"){d3.select("#viz").select("#D3viz").style("background-image","url('resources/images/easteregg/foxegg.jpg')").style("background-repeat","round")}if(a.lookupReference("searchNodeTextField").getValue()=="joyeuxnoel"){d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(f){return(f.getBiologicalType()=="reaction")}).append("image").attr("xlink:href","resources/images/easteregg/giftegg.svg").attr("width","50px").attr("height","50px").attr("transform","translate(-25,-25)");d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(f){return(f.getBiologicalType()=="metabolite")}).append("image").attr("xlink:href","resources/images/easteregg/sapinegg.svg").attr("width","70px").attr("height","70px").attr("transform","translate(-35,-35)")}metExploreD3.GraphNode.searchNode(a.lookupReference("searchNodeTextField").getValue())},refresh:function(){var b=Ext.getCmp("viz");if(b!=undefined){var a=new Ext.LoadMask({target:b,msg:"Refresh in process...",msgCls:"msgClsCustomLoadMask"});a.show();var c=this;setTimeout(function(){c.initData();metExploreD3.GraphNetwork.refreshSvg("viz");a.hide();var d=Ext.getCmp("graphPanel");if(d!=undefined){d.fireEvent("afterrefresh")}},100)}},initData:function(){var h=Ext.getStore("S_NetworkVizSession").getById("viz");h.reset();var r=Ext.getStore("S_NetworkData");var g=new NetworkData("viz");var c=h.getGraph();var E="";var d="";var w="";var z=Ext.getStore("S_Cart");var G=[];var s=[];var D=Ext.getStore("S_AnnotationReaction");D.filter("field","reversible");z.each(function(K){E=K.get("dbIdentifier");d=K.get("id");G.push(d);w=K.get("name");var L=D.findRecord("id",d+"_reversible",0,false,true,true);var I=K.get("ec");if(L){var J=L.get("newV")}else{var J=K.get("reversible")}g.addNode(w,undefined,E,d,J,"reaction",false,true,undefined,undefined,undefined,undefined,I);c.addNode(d);if(K.get("reversible")){var H=d+"_back";c.addNode(H)}});var v=G.length;var F=Ext.getStore("S_LinkReactionMetabolite");F.filterBy(function(H,I){if(Ext.Array.indexOf(G,H.get("idReaction"))!==-1){return true}return false},this);var a=Ext.getStore("S_Metabolite");var b=Ext.getStore("S_AnnotationMetabolite");b.filter("field","sideCompound");var t="";var d="";var m="";var C=true;var u="";var y="";var j="";var B="";var A=0;var f=0;var q=0;var p=0;var q=0;var o="";F.each(function(H){t=H.get("idMetabolite");d=H.get("idReaction");m=H.get("interaction");var M=D.findRecord("id",d+"_reversible");if(M){C=M.get("newV")}else{C=H.get("reversible")}M=b.findRecord("id",t);if(M){sideCompound=M.get("newV")}else{sideCompound=H.get("side")}u=H.get("edgeId");var K=s.indexOf(t);if(sideCompound==0||sideCompound=="false"){var J=false}else{var J=true}if(K==-1){s.push(t);var I=a.getById(t);y=I.get("name");j=I.get("compartment");B=I.get("dbIdentifier");var L=I.getSvgHW();A=0;f=0;if(L!="undefined"){A=L.width;f=L.height}g.addNode(y,j,B,t,undefined,"metabolite",false,true,L.svg,A,f,J,undefined);K=s.indexOf(t)}p=G.indexOf(d);K=K+v;if(C){o=d+"_back";if(m=="in"){g.addLink(u,K,p,m,"true");c.addEdge(o,t);c.addEdge(t,d)}else{g.addLink(u,p,K,m,"true");c.addEdge(t,o);c.addEdge(d,t)}}else{if(m=="in"){g.addLink(u,K,p,m,"false");c.addEdge(t,d)}else{g.addLink(u,p,K,m,"false");c.addEdge(d,t)}}});F.clearFilter();b.clearFilter();D.clearFilter();g.setId("viz");r.add(g);h.setD3Data(g)},exportJSON:function(){var m=Ext.getStore("S_NetworkData");var h=metExploreD3.getReactionsSet();var o=metExploreD3.getMetabolitesSet();var f=Ext.getStore("S_CompartmentInBioSource");var j="";j+='{"reaction":[';var d=Ext.create("Ext.data.Store",{fields:["id","ec","name","reversible"]});h.each(function(p){m.getStoreById("viz").getNodes().forEach(function(q){if(q.getId()==p.get("id")){d.add({id:q.getId(),ec:p.get("ec"),name:q.getName(),reversible:q.getReactionReversibility()})}})});for(var g=0;g<d.getCount();g++){j+=Ext.JSON.encode(d.getRange()[g].data);if(g!=d.getCount()-1){j+=",\n"}}j+='],\n\n"metabolite":[';var a=Ext.create("Ext.data.Store",{fields:["id","name","chemicalFormula","compartment","inchi"]});m.getStoreById("viz").getNodes().forEach(function(r){o.each(function(u){if(r.getId()==u.get("id")){var t=u.get("mapped")>0;a.add({id:r.getId(),name:u.get("name"),formula:u.get("chemicalFormula"),compartment:u.get("compartment"),inchi:u.get("inchi"),mapped:t})}});if(r.isSideCompound()){var q=r.getId();q=q.split("-");var s=o.getMetaboliteById(q[0]);var p=s.get("mapped")>0;a.add({id:r.getId(),name:s.get("name"),formula:s.get("chemicalFormula"),compartment:s.get("compartment"),inchi:s.get("inchi"),mapped:p})}});for(var g=0;g<a.getCount();g++){j+=Ext.JSON.encode(a.getRange()[g].data);if(g!=a.getCount()-1){j+=",\n"}}j+='],\n\n"link":[';var c=Ext.create("Ext.data.Store",{fields:["source","target","interaction"]});m.getStoreById("viz").getLinks().forEach(function(p){c.add({source:p.source.getId(),target:p.target.getId(),interaction:p.interaction})});for(var g=0;g<c.getCount();g++){j+=Ext.JSON.encode(c.getRange()[g].data);if(g!=c.getCount()-1){j+=",\n"}}j+='],\n\n"compartment":[';var b=Ext.create("Ext.data.Store",{fields:["name","color"]});f.each(function(p){b.add({name:p.get("name"),color:p.get("color")})});for(var g=0;g<b.getCount();g++){j+=Ext.JSON.encode(b.getRange()[g].data);if(g!=b.getCount()-1){j+=",\n"}}j+="]}\n";return j},exportJsonFile:function(){var c=this.exportJSON();var b=document.createElement("a");b.download="data.json";var a=new Blob([c],{type:"text/plain"});b.href=window.URL.createObjectURL(a);b.click()},exportXGMML:function(){if(lib.javascript.metExploreViz.globals.Session.idUser==""||lib.javascript.metExploreViz.globals.Session.idUser==-1){var d=Ext.create("Ext.window.MessageBox",{height:300});d.alert("Warning","You are not connected, the job will be available only during your session. ");d.setPosition(50)}var a=encodeURIComponent(metExploreD3.GraphUtils.exportMainSVG());var c=encodeURIComponent(this.exportJSON().replace(/\n/g,""));var b={analysis_title:"Xgmml Export",java_class:"metexplore.XgmmlExporter",json:c,svg:a};Ext.Ajax.request({url:"src/php/application_binding/launchJavaApplication.php",method:"POST",params:b,success:function(f,j){var g=Ext.decode(f.responseText);if(g.success==false){Ext.Msg.alert("Failed","Problem in getting results from the server (success = false)");return}else{var h=g.message;var p=Ext.create("Ext.window.MessageBox",{height:300});p.show({title:"Application message",msg:h});var m=Ext.ComponentQuery.query("sidePanel")[0];var o=m.down("gridJobs");o.expand();Ext.getStore("S_Analyses").reload()}},failure:function(f,g){Ext.MessageBox.alert("Server-side failure with status code "+f.status)}})}},0,0,0,0,["controller.panel-graphpanel-graphpanel"],0,[metExploreViz.view.panel.graphPanel,"GraphPanelController"],0));(Ext.cmd.derive("metExploreViz.view.panel.graphPanel.GraphPanelModel",Ext.app.ViewModel,{parent:"networkPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.panel-graphpanel-graphpanel"],0,[metExploreViz.view.panel.graphPanel,"GraphPanelModel"],0));(Ext.cmd.derive("metExploreViz.view.panel.comparePanel.ComparePanelController",Ext.app.ViewController,{init:function(){var c=this,b=c.getViewModel(),a=c.getView();a.on({initiateviz:this.initiateViz,scope:c});a.on({copyNetwork:this.saveNetwork,scope:c});a.on({add:function(d){d.expand(true)},scope:c});a.on({remove:function(d,f){if(d.items.length==0){d.collapse(true)}},scope:c});a.on({beforeremove:function(h,g){session=_metExploreViz.getSessionById(g.id+"-body");if(session!=undefined){metExploreD3.GraphNetwork.stopForce(session);var f=_metExploreViz.getComparedPanelById(g.id+"-body");if(f!=undefined){f.setVisible(false);_metExploreViz.removeComparedPanel(f)}_metExploreViz.removeSession(g.id+"-body");metExploreD3.GraphNetwork.looksLinked()}},scope:c})},onSessionStart:function(a){var b=_metExploreViz.cloneSession();b.setId(a);_metExploreViz.addSession(b)},initiateViz:function(b){var f=this;var d=_metExploreViz.getSessionById(b);var c=b.substring(0,b.length-5);var a=Ext.getCmp(c);if(a!=undefined){a.on("resize",function(){metExploreD3.GraphPanel.resizeViz(b);var g=_metExploreViz.getSessionById("viz");if(g.isActive()){metExploreD3.GraphPanel.resizePanels(b)}})}$("#"+b).on("contextmenu",function(j){j.preventDefault();var g=Ext.getCmp("comparePanel");if(j.target.parentNode.parentNode.id=="D3viz"){if(d.getSelectedNodes()!=undefined){if(d.getSelectedNodes().length!=0){g.CtxMenu=new Ext.menu.Menu({items:[{text:"Remove selected nodes",hidden:false,handler:function(){metExploreD3.GraphNetwork.removeSelectedNode(b)}}]})}}}else{if(j.target.id==""){if(j.target.parentNode.textContent!=""){if(j.target.previousSibling.previousSibling==null){var h=j.target.previousSibling}else{var h=j.target.previousSibling.previousSibling}}else{var h=j.target.parentNode.parentNode.firstChild}}else{var h=j.target}g.CtxMenu=new Ext.menu.Menu({items:[{text:"Remove the node",hidden:false,handler:function(){metExploreD3.GraphNetwork.removeSelectedNode(b)}},{text:"Select neighbour",hidden:false,handler:function(){metExploreD3.GraphNode.selectNeighbours(_metExploreViz.getSessionById(b).getD3Data().getNodeById(h.id),b)}},{text:"See more information",hidden:false,handler:function(){var s=h.id;if(h.getAttribute("class")=="metabolite"){var q=Ext.getStore("S_Metabolite");var o=q.getMetaboliteById(s);var r=Ext.create("MetExplore.view.window.V_WindowInfoMetabolite",{rec:o});r.show();r.focus()}else{var p=Ext.getStore("S_Reaction");var o=p.getReactionById(s);var m=Ext.create("MetExplore.view.window.V_WindowInfoReaction",{rec:o});m.show();m.focus()}}}]})}if(g.CtxMenu!=undefined){g.CtxMenu.showAt(j.clientX,j.clientY)}});metExploreD3.GraphNetwork.delayedInitialisation(b)},drawSavedNetwork:function(b){var c=Ext.getCmp(b.substring(0,b.length-5));if(c!=undefined){var a=new Ext.LoadMask({target:c,msg:"Copy in process...",msgCls:"msgClsCustomLoadMask"});a.show();var d=this;setTimeout(function(){d.onSessionStart(b);d.initiateViz(b);metExploreD3.GraphNetwork.setAnimated(b,true);metExploreD3.GraphNetwork.refreshSvg(b);a.hide()},100)}},saveNetwork:function(){if(_metExploreViz.getSessionById("viz").getD3Data()==undefined){console.log("Any network to save.")}else{console.log("Save the network.");var c=this,a=c.getView();a.show();function b(d){Ext.Msg.prompt("Title","Please enter the title of network:",function(f,m){if(f=="ok"){var h=Ext.getCmp("comparePanel");if(m!=""&&h!=undefined){var j="graph"+_metExploreViz.getComparedPanelsLength();var g=[{id:j,title:m,html:'<div id="'+j+'" height="100%" width="100%"></div>',flex:1,cls:"comparedPanel",closable:true,collapsible:true,collapseDirection:"left"}];h.add(g);h.expand();newComparedPanel=new ComparedPanel(j+"-body",true,h.items.keys[h.items.length-1],m);_metExploreViz.addComparedPanel(newComparedPanel);d.drawSavedNetwork(j+"-body")}else{alert("Please enter a valid name");b(d)}}},this,false)}b(this)}}},0,0,0,0,["controller.panel-comparePanel-comparePanel"],0,[metExploreViz.view.panel.comparePanel,"ComparePanelController"],0));(Ext.cmd.derive("metExploreViz.view.panel.comparePanel.ComparePanelModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.panel-comparePanel-comparePanel"],0,[metExploreViz.view.panel.comparePanel,"ComparePanelModel"],0));(Ext.cmd.derive("metExploreViz.view.panel.comparePanel.ComparePanel",Ext.panel.Panel,{controller:"panel-comparePanel-comparePanel",viewModel:{type:"panel-comparePanel-comparePanel"},collapsible:true,collapsed:true,hidden:true,region:"north",height:300,width:"100%",split:true,cls:"comparePanel",resizable:{handles:"n",pinned:true},layout:{type:"hbox",align:"stretch"},animation:true},0,["comparePanel"],["component","box","container","panel","comparePanel"],{component:true,box:true,container:true,panel:true,comparePanel:true},["widget.comparePanel"],0,[metExploreViz.view.panel.comparePanel,"ComparePanel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_MiningMenu.Viz_MiningMenuController",Ext.app.ViewController,{init:function(){var c=this,b=c.getViewModel(),a=c.getView();a.on({mouseleave:function(g,f,d){g.hide()},scope:c});a.lookupReference("highlightSubnetwork").on({click:c.highlightSubnetwork,scope:c});a.lookupReference("keepOnlySubnetwork").on({click:c.keepOnlySubnetwork,scope:c})},highlightSubnetwork:function(){metExploreD3.GraphFunction.highlightSubnetwork()},keepOnlySubnetwork:function(){metExploreD3.GraphFunction.keepOnlySubnetwork()}},0,0,0,0,["controller.menu-vizMiningMenu-vizMiningMenu"],0,[metExploreViz.view.menu.viz_MiningMenu,"Viz_MiningMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_MiningMenu.Viz_MiningMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizMiningMenu-vizMiningMenu"],0,[metExploreViz.view.menu.viz_MiningMenu,"Viz_MiningMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_MiningMenu.Viz_MiningMenu",Ext.menu.Menu,{controller:"menu-vizMiningMenu-vizMiningMenu",viewModel:{type:"menu-vizMiningMenu-vizMiningMenu"},items:[{text:"Highlight Subnetwork",reference:"highlightSubnetwork",tooltip:"Highlight sub-network based on node selection or mapped nodes",iconCls:"highlightSubnetwork"},{text:"Extract Subnetwork",reference:"keepOnlySubnetwork",tooltip:"Extract sub-network based on node selection",iconCls:"subnetwork"}]},0,["vizMiningMenu"],["component","box","container","panel","menu","vizMiningMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizMiningMenu:true},["widget.vizMiningMenu"],0,[metExploreViz.view.menu.viz_MiningMenu,"Viz_MiningMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_SaveMenu.Viz_SaveMenuController",Ext.app.ViewController,{init:function(){var c=this,b=c.getViewModel(),a=c.getView();a.on({mouseleave:function(g,f,d){g.hide()},scope:c});a.lookupReference("exportJSON").on({click:c.exportJSON,scope:c});a.lookupReference("exportDOT").on({click:c.exportDOT,scope:c});a.lookupReference("exportGML").on({click:c.exportGML,scope:c})},exportDOT:function(){metExploreD3.GraphUtils.saveNetworkDot()},exportGML:function(){metExploreD3.GraphUtils.saveNetworkGml()},exportJSON:function(){metExploreD3.GraphUtils.saveNetworkJSON()}},0,0,0,0,["controller.menu-vizSaveMenu-vizSaveMenu"],0,[metExploreViz.view.menu.viz_SaveMenu,"Viz_SaveMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_SaveMenu.Viz_SaveMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizSaveMenu-vizSaveMenu"],0,[metExploreViz.view.menu.viz_SaveMenu,"Viz_SaveMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_SaveMenu.Viz_SaveMenu",Ext.menu.Menu,{controller:"menu-vizSaveMenu-vizSaveMenu",viewModel:{type:"menu-vizSaveMenu-vizSaveMenu"},items:[{text:"Save Viz as json",reference:"exportJSON",tooltip:"Save network viz as a json file",iconCls:"saveNetwork"},{text:"Save Viz as dot",reference:"exportDOT",tooltip:"Save network viz as a dot file",iconCls:"exportDot"},{text:"Save Viz as gml",reference:"exportGML",tooltip:"Save network viz as a gml file",iconCls:"exportGml"},{text:"Save Viz as XGMML",hidden:true,reference:"exportXGMML",tooltip:"Save network viz as a XGMML file with Cytoscape's graphical attibutes",iconCls:"cytoscapeWebStart"}]},0,["vizSaveMenu"],["component","box","container","panel","menu","vizSaveMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizSaveMenu:true},["widget.vizSaveMenu"],0,[metExploreViz.view.menu.viz_SaveMenu,"Viz_SaveMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ExportMenu.Viz_ExportMenuController",Ext.app.ViewController,{init:function(){var c=this,b=c.getViewModel(),a=c.getView();a.on({mouseleave:function(g,f,d){g.hide()},scope:c});a.lookupReference("exportSVG").on({click:c.exportSVG,scope:c});a.lookupReference("exportPNG").on({click:c.exportPNG,scope:c});a.lookupReference("exportJPG").on({click:c.exportJPG,scope:c})},exportSVG:function(){metExploreD3.GraphUtils.exportSVG()},exportPNG:function(){metExploreD3.GraphUtils.exportPNG()},exportJPG:function(){metExploreD3.GraphUtils.exportJPG()}},0,0,0,0,["controller.menu-vizExportMenu-vizExportMenu"],0,[metExploreViz.view.menu.viz_ExportMenu,"Viz_ExportMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ExportMenu.Viz_ExportMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizExportMenu-vizExportMenu"],0,[metExploreViz.view.menu.viz_ExportMenu,"Viz_ExportMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ExportMenu.Viz_ExportMenu",Ext.menu.Menu,{controller:"menu-vizExportMenu-vizExportMenu",viewModel:{type:"menu-vizExportMenu-vizExportMenu"},items:[{text:"Export Viz as svg",reference:"exportSVG",tooltip:"Export network viz as a svg file",iconCls:"exportSvg"},{text:"Export Viz as png",reference:"exportPNG",tooltip:"Export network viz as a png file",iconCls:"exportPng"},{text:"Export Viz as jpeg",reference:"exportJPG",tooltip:"Export network viz as a jpeg file",iconCls:"exportJpg"}]},0,["vizExportMenu"],["component","box","container","panel","menu","vizExportMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizExportMenu:true},["widget.vizExportMenu"],0,[metExploreViz.view.menu.viz_ExportMenu,"Viz_ExportMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ImportMenu.Viz_ImportMenuController",Ext.app.ViewController,{init:function(){var c=this,b=c.getViewModel(),a=c.getView();a.on({mouseleave:function(g,f,d){g.hide()},scope:c});a.lookupReference("importMapping").on({click:function(){var d=Ext.getCmp("IDimportMapping");if(d!=undefined){d.fileInputEl.dom.click()}},scope:c});a.lookupReference("importSideCompounds").on({click:function(){var d=Ext.getCmp("IDimportSideCompounds");if(d!=undefined){d.fileInputEl.dom.click()}},scope:c})},importMapping:function(){metExploreD3.GraphMapping.importMapping()}},0,0,0,0,["controller.menu-vizImportMenu-vizImportMenu"],0,[metExploreViz.view.menu.viz_ImportMenu,"Viz_ImportMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ImportMenu.Viz_ImportMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizImportMenu-vizImportMenu"],0,[metExploreViz.view.menu.viz_ImportMenu,"Viz_ImportMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ImportMenu.Viz_ImportMenu",Ext.menu.Menu,{controller:"menu-vizImportMenu-vizImportMenu",viewModel:{type:"menu-vizImportMenu-vizImportMenu"},items:[{text:"Import mapping from tab file",reference:"importMapping",tooltip:"Import mapping from tab file",iconCls:"importData"},{hidden:true,id:"buttonMap",xtype:"buttonImportMapping"},{text:"Import side compounds from tab file",reference:"importSideCompounds",tooltip:"Import side compounds from tab file",iconCls:"importData"},{hidden:true,id:"buttonSide",xtype:"buttonImportSideCompounds"}]},0,["vizImportMenu"],["component","box","container","panel","menu","vizImportMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizImportMenu:true},["widget.vizImportMenu"],0,[metExploreViz.view.menu.viz_ImportMenu,"Viz_ImportMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_DrawingMenu.Viz_DrawingMenuController",Ext.app.ViewController,{init:function(){var c=this,b=c.getViewModel(),a=c.getView();a.on({mouseleave:function(g,f,d){g.hide()},scope:c});a.lookupReference("removeSideCompounds").on({click:c.removeSideCompounds,scope:c});a.lookupReference("duplicateSideCompounds").on({click:c.duplicateSideCompounds,scope:c});a.lookupReference("clustMetabolites").on({click:c.clustMetabolites,scope:c});a.lookupReference("drawHierarchicalLayout").on({click:c.drawHierarchicalLayout,scope:c});a.lookupReference("makeClusters").on({click:c.makeClusters,scope:c});a.on({enableMakeClusters:function(){this.lookupReference("makeClusters").setDisabled(false)},scope:c});a.on({disableMakeClusters:function(){this.lookupReference("makeClusters").setDisabled(true)},scope:c})},duplicateSideCompounds:function(){metExploreD3.GraphNetwork.duplicateSideCompounds("viz")},clustMetabolites:function(){if(!_metExploreViz.isLinkedByTypeOfMetabolite()){metExploreD3.GraphLink.linkTypeOfMetabolite();this.getView().lookupReference("clustMetabolites").setIconCls("metabolitesUnlinkedByType");this.getView().lookupReference("clustMetabolites").setTooltip("Release force between substrates/products")}else{metExploreD3.GraphLink.removeLinkTypeOfMetabolite();this.getView().lookupReference("clustMetabolites").setIconCls("metabolitesLinkedByType");this.getView().lookupReference("clustMetabolites").setTooltip("Draw closer substrates/products")}},drawHierarchicalLayout:function(){var b="viz";var a=metExploreD3.createLoadMask("Selection in progress...",b);if(a!=undefined){metExploreD3.showMask(a);metExploreD3.deferFunction(function(){var p=_metExploreViz.getSessionsSet();var m=_metExploreViz.getSessionById(b);var f=m.getD3Data();if(m!=undefined){if(m.isLinked()){for(var q in p){if(p[q].isLinked()){metExploreD3.GraphNetwork.animationButtonOff(p[q].getId())}}var c=_metExploreViz.getSessionById("viz").getForce();c.stop()}else{metExploreD3.GraphNetwork.animationButtonOff(b);var c=m.getForce();c.stop()}}var r=null;var j=null;var g=null;var s=100;var d={};function o(){tulip.holdObservers();var y=r.getLayoutProperty("viewLayout");var t=r.getColorProperty("viewColor");var u=r.getStringProperty("viewLabel");tulip.unholdObservers();var w="Hierarchical Tree (R-T Extended)";var v=tulip.getDefaultAlgorithmParameters(w,r);v["node spacing"]=50;r.applyLayoutAlgorithmInWorker(w,r.getLocalLayoutProperty("viewLayout"),v,function(){var z=parseInt(metExploreD3.GraphPanel.getHeight(b));var A=parseInt(metExploreD3.GraphPanel.getWidth(b));d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").attr("cx",function(B){B.x=y.getNodeValue(d[B.getId()]).x+A/2;return y.getNodeValue(d[B.getId()]).x+A/2}).attr("cy",function(B){B.y=y.getNodeValue(d[B.getId()]).y+z/2;return y.getNodeValue(d[B.getId()]).y+z/2}).attr("transform",function(E){var D=1;if(d3.select(this)!=null){var C=d3.select(this).attr("transform");if(d3.select(this).attr("transform")!=null){var B=C.indexOf("scale(");if(B!=-1){D=parseInt(C.substring(B+6,C.length-1))}}}return"translate("+(y.getNodeValue(d[E.getId()]).x+A/2)+","+(y.getNodeValue(d[E.getId()]).y+z/2)+") scale("+D+")"});metExploreD3.GraphNetwork.tick("viz");metExploreD3.hideMask(a)})}function h(v){if(typeof tulip=="undefined"||!tulip.isLoaded()){setTimeout(h,1000)}else{r=new tulip.Graph();tulip.holdObservers();r.setName("Test Javascript Graph");var t=r.getStringProperty("viewLabel");f.getNodes().forEach(function(y){var A=r.addNode();var z=r.getLayoutProperty("viewLayout");z.setNodeValue(A,new tulip.Coord(y.x,y.y,0));t.setNodeValue(A,"node 1");d[y.getId()]=A});var w=r.getLayoutProperty("viewLayout");f.getLinks().forEach(function(y){r.addEdge(d[y.getSource()],d[y.getTarget()])});var u=new Array();u.push(new tulip.Coord(0,0,0));w.setAllEdgeValue(u);tulip.unholdObservers()}if(v!=undefined){v()}}h(o)},100)}},makeClusters:function(){var a=metExploreD3.getGeneralStyle().useClusters();metExploreD3.getGeneralStyle().setUseClusters(!a);if(!a){this.getView().lookupReference("makeClusters").setIconCls("unmakeClusters");this.getView().lookupReference("makeClusters").setTooltip("Release force for clusters");this.getView().lookupReference("makeClusters").setText("Unmake clusters")}else{this.getView().lookupReference("makeClusters").setIconCls("makeClusters");this.getView().lookupReference("makeClusters").setTooltip("Make clusters in function of highlighted component");this.getView().lookupReference("makeClusters").setText("Make clusters")}var b=_metExploreViz.getSessionById("viz");if((metExploreD3.GraphNetwork.isAnimated(b.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(b.getId())==null)){b.getForce().resume()}},removeSideCompounds:function(){metExploreD3.GraphNetwork.removeSideCompounds()}},0,0,0,0,["controller.menu-vizDrawingMenu-vizDrawingMenu"],0,[metExploreViz.view.menu.viz_DrawingMenu,"Viz_DrawingMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_DrawingMenu.Viz_DrawingMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizDrawingMenu-vizDrawingMenu"],0,[metExploreViz.view.menu.viz_DrawingMenu,"Viz_DrawingMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ColorMenu.Viz_ColorMenuController",Ext.app.ViewController,{init:function(){var c=this,b=c.getViewModel(),a=c.getView();a.on({setGeneralStyle:function(){console.log("vizColorMenusetGeneralStyle",a.lookupReference("highlightCompartments"));var d=_metExploreViz.getGeneralStyle();console.log(d.isDisplayedConvexhulls());console.log(d.useClusters());if(d.isDisplayedConvexhulls()=="Compartments"){a.lookupReference("highlightCompartments").setChecked(true);metExploreD3.fireEvent("vizIdDrawing","enableMakeClusters");if(d.useClusters()){Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("unmakeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Release force for clusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Unmake clusters")}else{Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("makeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Make clusters in function of highlighted component");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Make clusters")}}else{if(d.isDisplayedConvexhulls()=="Pathways"){a.lookupReference("highlightPathways").setChecked(true);metExploreD3.fireEvent("vizIdDrawing","enableMakeClusters");if(d.useClusters()){Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("unmakeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Release force for clusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Unmake clusters")}else{Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("makeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Make clusters in function of highlighted component");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Make clusters")}}else{a.lookupReference("highlightCompartments").setChecked(false);a.lookupReference("highlightPathways").setChecked(false);metExploreD3.fireEvent("vizIdDrawing","disableMakeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("makeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Make clusters in function of highlighted component");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Make clusters")}}},scope:c});a.lookupReference("invertColors").on({click:c.invertColors,scope:c});a.lookupReference("blackWhite").on({click:c.blackWhite,scope:c})},invertColors:function(c,b){var a=this;if(c.checked){d3.select("#viz").select("#D3viz").classed("invertColorViz",true)}else{d3.select("#viz").select("#D3viz").classed("invertColorViz",false)}},blackWhite:function(c,b){var a=this;if(c.checked){d3.select("#viz").select("#D3viz").classed("blackWhiteViz",true)}else{d3.select("#viz").select("#D3viz").classed("blackWhiteViz",false)}},highlightComponents:function(c){var f=this,b=f.getViewModel(),a=f.getView();var d=_metExploreViz.getGeneralStyle();d.setDisplayConvexhulls(false);metExploreD3.GraphLink.displayConvexhulls("viz");metExploreD3.GraphNetwork.tick("viz");d.setDisplayConvexhulls(c);metExploreD3.GraphLink.displayConvexhulls("viz");metExploreD3.GraphNetwork.tick("viz");metExploreD3.fireEvent("vizIdDrawing","enableMakeClusters")},hideComponents:function(){var d=this,b=d.getViewModel(),a=d.getView();var c=_metExploreViz.getGeneralStyle();c.setDisplayConvexhulls(false);metExploreD3.GraphLink.displayConvexhulls("viz");metExploreD3.GraphNetwork.tick("viz");metExploreD3.fireEvent("generalStyleForm","setGeneralStyle");metExploreD3.fireEvent("vizIdDrawing","disableMakeClusters")}},0,0,0,0,["controller.menu-vizColorMenu-vizColorMenu"],0,[metExploreViz.view.menu.viz_ColorMenu,"Viz_ColorMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ColorMenu.Viz_ColorMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizColorMenu-vizColorMenu"],0,[metExploreViz.view.menu.viz_ColorMenu,"Viz_ColorMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ColorMenu.Viz_ColorMenu",Ext.menu.Menu,{controller:"menu-vizColorMenu-vizColorMenu",viewModel:{type:"menu-vizColorMenu-vizColorMenu"},items:[{text:"Invert colors",checked:false,reference:"invertColors",iconCls:"invertColor"},{text:"Display in black and white",checked:false,reference:"blackWhite",iconCls:"blackWhite"}]},0,["vizColorMenu"],["component","box","container","panel","menu","vizColorMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizColorMenu:true},["widget.vizColorMenu"],0,[metExploreViz.view.menu.viz_ColorMenu,"Viz_ColorMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ConvexHullMenu.Viz_ConvexHullMenuController",Ext.app.ViewController,{init:function(){var c=this,b=c.getViewModel(),a=c.getView();a.on({setGeneralStyle:function(){var d=_metExploreViz.getGeneralStyle();if(d.isDisplayedConvexhulls()=="Compartments"){a.lookupReference("highlightCompartments").setChecked(true);metExploreD3.fireEvent("vizIdDrawing","enableMakeClusters");if(d.useClusters()){Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("unmakeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Release force for clusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Unmake clusters")}else{Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("makeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Make clusters in function of highlighted component");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Make clusters")}}else{if(d.isDisplayedConvexhulls()=="Pathways"){a.lookupReference("highlightPathways").setChecked(true);metExploreD3.fireEvent("vizIdDrawing","enableMakeClusters");if(d.useClusters()){Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("unmakeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Release force for clusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Unmake clusters")}else{Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("makeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Make clusters in function of highlighted component");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Make clusters")}}else{a.lookupReference("highlightCompartments").setChecked(false);a.lookupReference("highlightPathways").setChecked(false);metExploreD3.fireEvent("vizIdDrawing","disableMakeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setIconCls("makeClusters");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setTooltip("Make clusters in function of highlighted component");Ext.getCmp("vizIdDrawing").lookupReference("makeClusters").setText("Make clusters")}}},scope:c});a.lookupReference("highlightCompartments").on({click:c.checkHandler,scope:c});a.lookupReference("highlightPathways").on({click:c.checkHandler,scope:c})},checkHandler:function(c,b){var a=this;if(c.checked){a.highlightComponents(c.text);c.parentMenu.items.items.filter(function(d){return d!=c}).forEach(function(d){d.setChecked(false)})}else{a.hideComponents()}},highlightComponents:function(c){var f=this,b=f.getViewModel(),a=f.getView();var d=_metExploreViz.getGeneralStyle();d.setDisplayConvexhulls(false);metExploreD3.GraphLink.displayConvexhulls("viz");metExploreD3.GraphNetwork.tick("viz");d.setDisplayConvexhulls(c);metExploreD3.GraphLink.displayConvexhulls("viz");metExploreD3.GraphNetwork.tick("viz");d.setDisplayCaption(c);metExploreD3.GraphCaption.majCaption();metExploreD3.fireEvent("vizIdDrawing","enableMakeClusters")},hideComponents:function(){var d=this,b=d.getViewModel(),a=d.getView();var c=_metExploreViz.getGeneralStyle();c.setDisplayConvexhulls(false);metExploreD3.GraphLink.displayConvexhulls("viz");metExploreD3.GraphNetwork.tick("viz");c.setDisplayCaption(false);metExploreD3.GraphCaption.majCaption();metExploreD3.fireEvent("generalStyleForm","setGeneralStyle");metExploreD3.fireEvent("vizIdDrawing","disableMakeClusters")}},0,0,0,0,["controller.menu-vizConvexHullMenu-vizConvexHullMenu"],0,[metExploreViz.view.menu.viz_ConvexHullMenu,"Viz_ConvexHullMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ConvexHullMenu.Viz_ConvexHullMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizConvexHullMenu-vizConvexHullMenu"],0,[metExploreViz.view.menu.viz_ConvexHullMenu,"Viz_ConvexHullMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_ConvexHullMenu.Viz_ConvexHullMenu",Ext.menu.Menu,{controller:"menu-vizConvexHullMenu-vizConvexHullMenu",viewModel:{type:"menu-vizConvexHullMenu-vizConvexHullMenu"},items:[{text:"Compartments",checked:false,reference:"highlightCompartments"},{text:"Pathways",checked:false,reference:"highlightPathways"}]},0,["vizConvexHullMenu"],["component","box","container","panel","menu","vizConvexHullMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizConvexHullMenu:true},["widget.vizConvexHullMenu"],0,[metExploreViz.view.menu.viz_ConvexHullMenu,"Viz_ConvexHullMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_DrawingMenu.Viz_DrawingMenu",Ext.menu.Menu,{controller:"menu-vizDrawingMenu-vizDrawingMenu",viewModel:{type:"menu-vizDrawingMenu-vizDrawingMenu"},items:[{text:"Remove side compounds",reference:"removeSideCompounds",tooltip:"Remove metabolites annotated as side compounds",iconCls:"delete-sideCompounds"},{text:"Draw hierarchical layout",reference:"drawHierarchicalLayout",tooltip:"Draw the network with a hierarchical layout",iconCls:"drawhierarchicallayout"},{text:"Duplicate side compounds",reference:"duplicateSideCompounds",tooltip:"Duplicate metabolites annotated as side compounds",iconCls:"duplicate-sideCompounds"},{text:"Color",scale:"large",menu:{id:"vizIdColorMenu",xtype:"vizColorMenu"},id:"vizColorMenuID",reference:"vizColorMenuID",padding:"0 0 0 0",iconCls:"color"},{text:"Draw closer substrates/products",reference:"clustMetabolites",iconCls:"metabolitesLinkedByType"},{text:"Highlight component",scale:"large",menu:{id:"vizIdConvexHullMenu",xtype:"vizConvexHullMenu"},id:"vizConvexHullMenuID",reference:"vizConvexHullMenuID",padding:"0 0 0 0",iconCls:"highlightCompartments"},{text:"Make clusters",reference:"makeClusters",tooltip:"Make clusters in function of highlighted component",iconCls:"makeClusters",disabled:true}]},0,["vizDrawingMenu"],["component","box","container","panel","menu","vizDrawingMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizDrawingMenu:true},["widget.vizDrawingMenu"],0,[metExploreViz.view.menu.viz_DrawingMenu,"Viz_DrawingMenu"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_LoadMenu.Viz_LoadMenuController",Ext.app.ViewController,{init:function(){var c=this,b=c.getViewModel(),a=c.getView();a.on({mouseleave:function(g,f,d){g.hide()},scope:c});a.on({cartFilled:function(){a.lookupReference("loadNetworkFromWebsite").setDisabled(false)},scope:c});a.lookupReference("loadNetworkFromJSON").on({click:function(){var d=Ext.getCmp("IDimportNetwork");if(d!=undefined){d.fileInputEl.dom.click()}},scope:c});a.lookupReference("loadNetworkFromWebsite").on({click:function(){metExploreD3.GraphPanel.refreshPanel(_metExploreViz.getDataFromWebSite())},scope:c})},loadMapping:function(){metExploreD3.GraphMapping.loadMapping()}},0,0,0,0,["controller.menu-vizLoadMenu-vizLoadMenu"],0,[metExploreViz.view.menu.viz_LoadMenu,"Viz_LoadMenuController"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_LoadMenu.Viz_LoadMenuModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.menu-vizLoadMenu-vizLoadMenu"],0,[metExploreViz.view.menu.viz_LoadMenu,"Viz_LoadMenuModel"],0));(Ext.cmd.derive("metExploreViz.view.menu.viz_LoadMenu.Viz_LoadMenu",Ext.menu.Menu,{controller:"menu-vizLoadMenu-vizLoadMenu",viewModel:{type:"menu-vizLoadMenu-vizLoadMenu"},id:"viz_LoadMenu",items:[{text:"Load network from json file",reference:"loadNetworkFromJSON",tooltip:"Load network from json file",iconCls:"loadData"},{text:"Load network from website",reference:"loadNetworkFromWebsite",tooltip:"Load network from website",iconCls:"loadData",disabled:true,hidden:false}]},0,["vizLoadMenu"],["component","box","container","panel","menu","vizLoadMenu"],{component:true,box:true,container:true,panel:true,menu:true,vizLoadMenu:true},["widget.vizLoadMenu"],0,[metExploreViz.view.menu.viz_LoadMenu,"Viz_LoadMenu"],0));(Ext.cmd.derive("metExploreViz.view.panel.viz.VizController",Ext.app.ViewController,{init:function(){var c=this,b=c.getViewModel(),a=c.getView();a.on({initiateViz:c.initiateViz,scope:c});a.on({resize:function(){metExploreD3.GraphPanel.resizeViz("viz");var d=_metExploreViz.getSessionById("viz");if(d.isActive()){metExploreD3.GraphPanel.resizePanels("viz")}},scope:c})},initiateViz:function(){$("#viz").on("contextmenu",function(d){d.preventDefault();var b=_metExploreViz.getSessionById("viz");var a=Ext.getCmp("viz");if(a!=undefined){if(d.target.id=="D3viz"||d.target.parentNode.parentNode.id=="D3viz"||d.target.parentNode.id=="graphComponent"){if(b.getSelectedNodes().length!=0){a.CtxMenu=new Ext.menu.Menu({items:[{text:"Remove selected nodes",hidden:false,handler:function(){metExploreD3.GraphNetwork.removeSelectedNode("viz")}},{text:"Fix selected nodes",hidden:false,handler:function(){metExploreD3.GraphNode.fixSelectedNode("viz")}},{text:"Side compounds (duplicate)",hidden:false,handler:function(){var f=_metExploreViz.getSessionById("viz");metExploreD3.GraphNetwork.duplicateSideCompoundsSelected("viz")}}]})}}else{if(d.target.id==""){if(d.target.parentNode.textContent!=""){if(d.target.previousSibling.previousSibling==null){var c=d.target.previousSibling}else{var c=d.target.previousSibling.previousSibling}}else{var c=d.target.parentNode.parentNode.firstChild}}else{var c=d.target}a.CtxMenu=new Ext.menu.Menu({items:[{text:"Remove the node",hidden:false,handler:function(){metExploreD3.GraphNetwork.removeOnlyClickedNode(metExploreD3.GraphNode.selectNodeData(c.parentNode),"viz")}},{text:"Side compound (duplicate)",hidden:false,handler:function(){metExploreD3.GraphNetwork.duplicateASideCompoundSelected(c.parentNode,"viz")}},{text:"Select neighbour (N+select)",hidden:false,handler:function(){metExploreD3.GraphNode.selectNeighbours(_metExploreViz.getSessionById("viz").getD3Data().getNodeById(c.id),"viz")}},{text:"See more information",hidden:!metExploreD3.getGeneralStyle().hasEventForNodeInfo(),handler:function(){var g=c.id;var f=_metExploreViz.getSessionById("viz").getD3Data().getNodeById(g);metExploreD3.fireEventParentWebSite("seeMoreInformation",f)}}]})}}if(a.CtxMenu!=undefined){a.CtxMenu.showAt(d.clientX,d.clientY)}})}},0,0,0,0,["controller.panel-viz-viz"],0,[metExploreViz.view.panel.viz,"VizController"],0));(Ext.cmd.derive("metExploreViz.view.panel.viz.VizModel",Ext.app.ViewModel,{parent:"graphPanel",data:{name:"metExploreViz"}},0,0,0,0,["viewmodel.panel-viz-viz"],0,[metExploreViz.view.panel.viz,"VizModel"],0));(Ext.cmd.derive("metExploreViz.view.panel.viz.Viz",Ext.panel.Panel,{controller:"panel-viz-viz",viewModel:{type:"panel-viz-viz"},margins:"0 0 0 0",closable:false,region:"center",height:"100%",width:"100%",flex:1,split:true,layout:{type:"vbox",align:"stretch",pack:"center"}},0,["viz"],["component","box","container","panel","viz"],{component:true,box:true,container:true,panel:true,viz:true},["widget.viz"],0,[metExploreViz.view.panel.viz,"Viz"],0));(Ext.cmd.derive("metExploreViz.view.panel.graphPanel.GraphPanel",Ext.panel.Panel,{controller:"panel-graphpanel-graphpanel",viewModel:{type:"panel-graphpanel-graphpanel"},height:"100%",width:"100%",margins:"0 0 0 0",split:true,layout:{type:"vbox",align:"stretch"},items:[{tbar:{id:"tbarGraph",items:[{text:"Load network",scale:"large",menu:{xtype:"vizLoadMenu"},tooltip:"You must create a network to use this menu",id:"vizLoadMenuID",reference:"vizLoadMenuID",padding:"5px 5px 5px 5px",iconCls:"importToRsx",cls:"loadButton",iconAlign:"left"},{text:"Mining",scale:"large",menu:{xtype:"vizMiningMenu"},tooltip:"You must create a network to use this menu",id:"vizMiningMenuID",reference:"vizMiningMenuID",disabled:true,hidden:false,padding:"0 0 0 0"},{text:"Drawing",scale:"large",menu:{id:"vizIdDrawing",xtype:"vizDrawingMenu"},tooltip:"You must create a network to use this menu",id:"vizDrawingMenuID",reference:"vizDrawingMenuID",disabled:true,hidden:false,padding:"0 0 0 0"},{text:"Export",scale:"large",menu:{xtype:"vizExportMenu"},tooltip:"You must create a network to use this menu",id:"vizExportMenuID",reference:"vizExportMenuID",disabled:true,hidden:false,padding:"0 0 0 0"},{text:"Import",scale:"large",menu:{xtype:"vizImportMenu"},tooltip:"You must create a network to use this menu",id:"vizImportMenuID",reference:"vizImportMenuID",disabled:true,hidden:false,padding:"0 0 0 0"},{text:"Save",scale:"large",menu:{xtype:"vizSaveMenu"},tooltip:"You must create a network to use this menu",id:"vizSaveMenuID",reference:"vizSaveMenuID",disabled:true,hidden:false,padding:"0 0 0 0"},"-",{xtype:"button",overflowText:"Copy network",scale:"large",id:"buttonCopyNetwork",reference:"buttonCopyNetwork",tooltip:"You must create a network to copy the network",iconCls:"copyNetwork",disabled:true,border:false,padding:"0 0 0 0",listeners:{click:function(){var a=Ext.getCmp("comparePanel");if(a!=undefined){a.fireEvent("copyNetwork")}}}},"-",{border:false,disabled:true,xtype:"panel",reference:"searchNode",layout:{type:"hbox",align:"stretch"},items:[{xtype:"textfield",tooltip:"Find node by name, id, compartment...",name:"searchNodeTextField",reference:"searchNodeTextField",referenceHolder:true,fieldLabel:"Search Node(s)",scale:"large",listeners:{change:function(f,g,b){var a=this.container.component.items.items;var d=undefined;for(var c=0;c<a.length;c++){if(a[c].reference=="searchNodeButton"){d=a[c]}}if(g.length>0&&b.length==0){d.setDisabled(false)}else{if(b.length>0&&g.length==0){d.setDisabled(true)}}},specialkey:function(g,f){var a=this.container.component.items.items;var d=undefined;for(var c=0;c<a.length;c++){if(a[c].reference=="searchNodeButton"){d=a[c]}}if(f.getKey()==f.ENTER){var b=d;console.log(b);if(b!=undefined){b.fireEvent("click")}}}}},{xtype:"button",reference:"searchNodeButton",iconCls:"search",scale:"large",border:false,disabled:true,tooltip:"Find node by name, id, compartment...",padding:"0 0 0 0"}]}]}},{layout:{type:"border",align:"stretch"},xtype:"panel",width:"100%",margins:"0 0 0 0",closable:false,region:"south",flex:1,items:[{title:"Network Manager",id:"comparisonSidePanel",xtype:"comparisonSidePanel"},{id:"viz",xtype:"viz"}]},{title:"Comparative Network",closable:false,id:"comparePanel",xtype:"comparePanel"}]},0,["graphPanel"],["component","box","container","panel","graphPanel"],{component:true,box:true,container:true,panel:true,graphPanel:true},["widget.graphPanel"],0,[metExploreViz.view.panel.graphPanel,"GraphPanel"],0));(Ext.cmd.derive("metExploreViz.view.panel.comparisonSidePanel.ComparisonSidePanelController",Ext.app.ViewController,{init:function(){var c=this,b=c.getViewModel(),a=c.getView();a.on({newMapping:c.drawCaption,scope:c})},drawCaption:function(){metExploreD3.GraphCaption.drawCaption()}},0,0,0,0,["controller.panel-comparisonSidePanel-comparisonSidePanel"],0,[metExploreViz.view.panel.comparisonSidePanel,"ComparisonSidePanelController"],0));(Ext.cmd.derive("metExploreViz.view.panel.comparisonSidePanel.ComparisonSidePanel",Ext.panel.Panel,{controller:"panel-comparisonSidePanel-comparisonSidePanel",collapsible:true,collapsed:true,width:"20%",height:"100%",margins:"0 0 2 0",split:true,layout:"accordion",closable:false,region:"west",items:[{title:"Omics",id:"selectConditionForm",xtype:"selectConditionForm"},{title:"Style",id:"updateStyleForm",xtype:"updateStyleForm",layout:{type:"vbox",align:"stretch"}}]},0,["comparisonSidePanel"],["component","box","container","panel","comparisonSidePanel"],{component:true,box:true,container:true,panel:true,comparisonSidePanel:true},["widget.comparisonSidePanel"],0,[metExploreViz.view.panel.comparisonSidePanel,"ComparisonSidePanel"],0));(Ext.cmd.derive("metExploreViz.view.panel.networkPanel.NetworkPanel",Ext.panel.Panel,{layout:"border",controller:"panel-networkPanel-networkPanel",id:"NetworkPanel",layout:"border",height:"100%",width:"100%",border:true,items:[{closable:false,id:"graphPanel",xtype:"graphPanel",region:"center"},{hidden:true,id:"buttonLoadNetworkFromJSON",xtype:"buttonImportToNetwork"}]},0,["networkPanel"],["component","box","container","panel","networkPanel"],{component:true,box:true,container:true,panel:true,networkPanel:true},["widget.networkPanel"],0,[metExploreViz.view.panel.networkPanel,"NetworkPanel"],0));Ext.onReady(function(){var a=Ext.create("metExploreViz.view.panel.networkPanel.NetworkPanel",{closable:false,xtype:"networkPanel",id:"networkPanel"})});var MetExploreViz={initFrame:function(b){var d=document.createElement("iframe");d.id="iFrameMetExploreViz",d.height="100%",d.width="100%",d.border=0,d.setAttribute("style","border: none;top: 0; right: 0;bottom: 0; left: 0; width: 100%;height: 100%;");var c=document.getElementsByTagName("script");var g;for(var f=0;f<c.length;f++){if(c[f].src.search("metExploreViz/metexploreviz.js")!=-1){g=c[f].src}}var j=document.location.href;var h=0;while(g[h]==j[h]&&h!=j.length&&h!=g.length){h++}var g=g.substr(h,g.length-1);g=g.split("/metexploreviz.js");res=j.substr(h,j.length-1);res=res.split("/");var m="";for(var f=0;f<res.length-1;f++){m+="../"}var a=m+g[0]+"/index.html";document.getElementById(b).insertBefore(d,document.getElementById(b).firstChild);d.src=a},launchMetexploreFunction:function(b){if(typeof metExploreViz!=="undefined"){b();return}var a=this;setTimeout(function(){a.launchMetexploreFunction(b)},100)},onloadMetExploreViz:function(a){this.launchMetexploreFunction(a)}};!function(){function h1(a){return null!=a&&!isNaN(a)}function hT(a){return a.length}function il(b){for(var a=1;b*a%1;){a*=10}return a}function hW(d,a){try{for(var c in a){Object.defineProperty(d.prototype,c,{value:a[c],enumerable:!1})}}catch(b){d.prototype=a}}function hQ(){}function ib(a){return jQ+a in this}function h0(a){return a=jQ+a,a in this&&delete this[a]}function iy(){var a=[];return this.forEach(function(b){a.push(b)}),a}function iq(){var b=0;for(var a in this){a.charCodeAt(0)===iv&&++b}return b}function hU(){for(var a in this){if(a.charCodeAt(0)===iv){return !1}}return !0}function h5(){}function ij(c,a,b){return function(){var d=b.apply(a,arguments);return d===a?c:d}}function ig(f,b){if(b in f){return b}b=b.charAt(0).toUpperCase()+b.substring(1);for(var d=0,c=cl.length;c>d;++d){var a=cl[d]+b;if(a in f){return a}}}function ih(){}function hZ(){}function hO(d){function a(){for(var h,j=c,f=-1,g=j.length;++f<g;){(h=j[f].on)&&h.apply(this,arguments)}return d}var c=[],b=new hQ();return a.on=function(h,f){var g,j=b.get(h);return arguments.length<2?j&&j.on:(j&&(j.on=null,c=c.slice(0,g=c.indexOf(j)).concat(c.slice(g+1)),b.remove(h)),f&&c.push(b.set(h,{on:f})),d)},a}function ip(){c1.event.preventDefault()}function h3(){for(var b,a=c1.event;b=a.sourceEvent;){a=b}return a}function hL(d){for(var a=new hZ(),c=0,b=arguments.length;++c<b;){a[arguments[c]]=hO(a)}return a.of=function(g,f){return function(h){try{var j=h.sourceEvent=c1.event;h.target=d,c1.event=h,a[h.type].apply(g,f)}finally{c1.event=j}}},a}function hM(a){return gY(a,hF),a}function iY(a){return"function"==typeof a?a:function(){return gj(a,this)}}function iz(a){return"function"==typeof a?a:function(){return gG(a,this)}}function ix(m,f){function h(){this.removeAttribute(m)}function g(){this.removeAttributeNS(m.space,m.local)}function c(){this.setAttribute(m,f)}function d(){this.setAttributeNS(m.space,m.local,f)}function j(){var a=f.apply(this,arguments);null==a?this.removeAttribute(m):this.setAttribute(m,a)}function b(){var a=f.apply(this,arguments);null==a?this.removeAttributeNS(m.space,m.local):this.setAttributeNS(m.space,m.local,a)}return m=c1.ns.qualify(m),null==f?m.local?g:h:"function"==typeof f?m.local?b:j:m.local?d:c}function hN(a){return a.trim().replace(/\s+/g," ")}function iO(a){return new RegExp("(?:^|\\s+)"+c1.requote(a)+"(?:\\s+|$)","g")}function h6(a){return a.trim().split(/^|\s+/)}function jd(f,b){function d(){for(var g=-1;++g<a;){f[g](this,b)}}function c(){for(var h=-1,g=b.apply(this,arguments);++h<a;){f[h](this,g)}}f=h6(f).map(jl);var a=f.length;return"function"==typeof b?c:d}function jl(b){var a=iO(b);return function(f,d){if(c=f.classList){return d?c.add(b):c.remove(b)}var c=f.getAttribute("class")||"";d?(a.lastIndex=0,a.test(c)||f.setAttribute("class",hN(c+" "+b))):f.setAttribute("class",hN(c.replace(a," ")))}}function jj(g,c,f){function d(){this.style.removeProperty(g)}function a(){this.style.setProperty(g,c,f)}function b(){var h=c.apply(this,arguments);null==h?this.style.removeProperty(g):this.style.setProperty(g,h,f)}return null==c?d:"function"==typeof c?b:a}function iV(f,b){function d(){delete this[f]}function c(){this[f]=b}function a(){var g=b.apply(this,arguments);null==g?delete this[f]:this[f]=g}return null==b?d:"function"==typeof b?a:c}function iZ(a){return"function"==typeof a?a:(a=c1.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function hJ(a){return{__data__:a}}function hX(a){return function(){return bg(this,a)}}function iM(a){return arguments.length||(a=c1.ascending),function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function iP(m,f){for(var h=0,g=m.length;g>h;h++){for(var c,d=m[h],j=0,b=d.length;b>j;j++){(c=d[j])&&f(c,j,h)}}return m}function jf(a){return gY(a,j7),a}function iS(c){var a,b;return function(h,f,g){var j,d=c[g].update,m=d.length;for(g!=b&&(b=g,a=0),f>=a&&(a=f+1);!(j=d[a])&&++a<m;){}return j}}function iL(){var a=this.__transition__;a&&++a.active}function h8(f,q,h){function b(){var a=this[d];a&&(this.removeEventListener(f,a,a.$),delete this[d])}function p(){var a=j(q,bW(arguments));b.call(this),this.addEventListener(f,this[d]=a,a.$=h),a._=q}function g(){var c,s=new RegExp("^__on([^.]+)"+c1.requote(f)+"$");for(var o in this){if(c=o.match(s)){var a=this[o];this.removeEventListener(c[1],a,a.$),delete this[o]}}}var d="__on"+f,m=f.indexOf("."),j=i6;m>0&&(f=f.substring(0,m));var v=g2.get(f);return v&&(f=v,j=i9),m?q?p:b:q?ih:g}function i6(b,a){return function(d){var c=c1.event;c1.event=d,a[0]=this.__data__;try{b.apply(this,a)}finally{c1.event=c}}}function i9(c,a){var b=i6(c,a);return function(g){var d=this,f=g.relatedTarget;f&&(f===d||8&f.compareDocumentPosition(d))||b.call(d,g)}}function iT(){var f=".dragsuppress-"+ ++jg,b="click"+f,d=c1.select(j8).on("touchmove"+f,ip).on("dragstart"+f,ip).on("selectstart"+f,ip);if(aE){var c=id.style,a=c[aE];c[aE]="none"}return function(g){function h(){d.on(b,null)}d.on(f,null),aE&&(c[aE]=a),g&&(d.on(b,function(){ip(),h()},!0),setTimeout(h,0))}}function iE(g,c){c.changedTouches&&(c=c.changedTouches[0]);var f=g.ownerSVGElement||g;if(f.createSVGPoint){var d=f.createSVGPoint();if(0>aV&&(j8.scrollX||j8.scrollY)){f=c1.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=f[0][0].getScreenCTM();aV=!(a.f||a.e),f.remove()}return aV?(d.x=c.pageX,d.y=c.pageY):(d.x=c.clientX,d.y=c.clientY),d=d.matrixTransform(g.getScreenCTM().inverse()),[d.x,d.y]}var b=g.getBoundingClientRect();return[c.clientX-b.left-g.clientLeft,c.clientY-b.top-g.clientTop]}function i5(a){return a>0?1:0>a?-1:0}function iD(c,a,b){return(a[0]-c[0])*(b[1]-c[1])-(a[1]-c[1])*(b[0]-c[0])}function iI(a){return a>1?0:-1>a?eZ:Math.acos(a)}function iF(a){return a>1?a4:-1>a?-a4:Math.asin(a)}function jS(a){return((a=Math.exp(a))-1/a)/2}function jk(a){return((a=Math.exp(a))+1/a)/2}function iG(a){return((a=Math.exp(2*a))-1)/(a+1)}function i3(a){return(a=Math.sin(a/2))*a}function i7(){}function i2(c,a,b){return new iR(c,a,b)}function iR(c,a,b){this.h=c,this.s=a,this.l=b}function dV(h,c,f){function d(j){return j>360?j-=360:0>j&&(j+=360),60>j?b+(g-b)*j/60:180>j?g:240>j?b+(g-b)*(240-j)/60:b}function a(j){return Math.round(255*d(j))}var b,g;return h=isNaN(h)?0:(h%=360)<0?h+360:h,c=isNaN(c)?0:0>c?0:c>1?1:c,f=0>f?0:f>1?1:f,g=0.5>=f?f*(1+c):f+c-f*c,b=2*f-g,gq(a(h+120),a(h),a(h-120))}function bJ(c,a,b){return new g4(c,a,b)}function g4(c,a,b){this.h=c,this.c=a,this.l=b}function cz(c,a,b){return isNaN(c)&&(c=0),isNaN(a)&&(a=0),bm(b,Math.cos(c*=gK)*a,Math.sin(c)*a)}function bm(c,a,b){return new fL(c,a,b)}function fL(c,a,b){this.l=c,this.a=a,this.b=b}function dA(g,c,f){var d=(g+16)/116,a=d+c/500,b=d-f/200;return a=hR(a)*aM,d=hR(d)*gn,b=hR(b)*cR,gq(eJ(3.2404542*a-1.5371385*d-0.4985314*b),eJ(-0.969266*a+1.8760108*d+0.041556*b),eJ(0.0556434*a-0.2040259*d+1.0572252*b))}function jA(c,a,b){return c>0?bJ(Math.atan2(b,a)*hp,Math.sqrt(a*a+b*b),c):bJ(0/0,0/0,c)}function hR(a){return a>0.206893034?a*a*a:(a-4/29)/7.787037}function b0(a){return a>0.008856?Math.pow(a,1/3):7.787037*a+4/29}function eJ(a){return Math.round(255*(0.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-0.055))}function gM(a){return gq(a>>16,255&a>>8,255&a)}function f3(a){return gM(a)+""}function gq(c,a,b){return new db(c,a,b)}function db(c,a,b){this.r=c,this.g=a,this.b=b}function a0(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function hv(f,q,h){var b,p,g,d=0,m=0,j=0;if(b=/([a-z]+)\((.*)\)/i.exec(f)){switch(p=b[2].split(","),b[1]){case"hsl":return h(parseFloat(p[0]),parseFloat(p[1])/100,parseFloat(p[2])/100);case"rgb":return q(gR(p[0]),gR(p[1]),gR(p[2]))}}return(g=dS.get(f))?q(g.r,g.g,g.b):(null!=f&&"#"===f.charAt(0)&&(4===f.length?(d=f.charAt(1),d+=d,m=f.charAt(2),m+=m,j=f.charAt(3),j+=j):7===f.length&&(d=f.substring(1,3),m=f.substring(3,5),j=f.substring(5,7)),d=parseInt(d,16),m=parseInt(m,16),j=parseInt(j,16)),q(d,m,j))}function em(f,q,h){var b,p,g=Math.min(f/=255,q/=255,h/=255),d=Math.max(f,q,h),m=d-g,j=(d+g)/2;return m?(p=0.5>j?m/(d+g):m/(2-d-g),b=f==d?(q-h)/m+(h>q?6:0):q==d?(h-f)/m+2:(f-q)/m+4,b*=60):(b=0/0,p=j>0&&1>j?0:b),i2(b,p,j)}function jV(g,c,f){g=kf(g),c=kf(c),f=kf(f);var d=b0((0.4124564*g+0.3575761*c+0.1804375*f)/aM),a=b0((0.2126729*g+0.7151522*c+0.072175*f)/gn),b=b0((0.0193339*g+0.119192*c+0.9503041*f)/cR);return bm(116*a-16,500*(d-a),200*(a-b))}function kf(a){return(a/=255)<=0.04045?a/12.92:Math.pow((a+0.055)/1.055,2.4)}function gR(b){var a=parseFloat(b);return"%"===b.charAt(b.length-1)?Math.round(2.55*a):a}function aj(a){return"function"==typeof a?a:function(){return a}}function iJ(a){return a}function aI(a){return function(b,d,c){return 2===arguments.length&&"function"==typeof d&&(c=d,d=null),eO(b,d,a,c)}}function eO(f,q,h,b){function p(){var o,a=j.status;if(!a&&j.responseText||a>=200&&300>a||304===a){try{o=h.call(g,j)}catch(c){return d.error.call(g,c),void 0}d.load.call(g,o)}else{d.error.call(g,j)}}var g={},d=c1.dispatch("beforesend","progress","load","error"),m={},j=new XMLHttpRequest(),v=null;return !j8.XDomainRequest||"withCredentials" in j||!/^(http(s)?:)?\/\//.test(f)||(j=new XDomainRequest()),"onload" in j?j.onload=j.onerror=p:j.onreadystatechange=function(){j.readyState>3&&p()},j.onprogress=function(c){var a=c1.event;c1.event=c;try{d.progress.call(g,j)}finally{c1.event=a}},g.header=function(c,a){return c=(c+"").toLowerCase(),arguments.length<2?m[c]:(null==a?delete m[c]:m[c]=a+"",g)},g.mimeType=function(a){return arguments.length?(q=null==a?null:a+"",g):q},g.responseType=function(a){return arguments.length?(v=a,g):v},g.response=function(a){return h=a,g},["get","post"].forEach(function(a){g[a]=function(){return g.send.apply(g,[a].concat(bW(arguments)))}}),g.send=function(s,o,c){if(2===arguments.length&&"function"==typeof o&&(c=o,o=null),j.open(s,f,!0),null==q||"accept" in m||(m.accept=q+",*/*"),j.setRequestHeader){for(var a in m){j.setRequestHeader(a,m[a])}}return null!=q&&j.overrideMimeType&&j.overrideMimeType(q),null!=v&&(j.responseType=v),null!=c&&g.on("error",c).on("load",function(r){c(null,r)}),d.beforesend.call(g,j),j.send(null==o?null:o),g},g.abort=function(){return j.abort(),g},c1.rebind(g,d,"on"),null==b?g:g.get(e3(b))}function e3(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function aR(){var b=cg(),a=bA()-b;a>24?(isFinite(a)&&(clearTimeout(dy),dy=setTimeout(aR,a)),b4=0):(b4=1,af(aR))}function cg(){var a=Date.now();for(iC=c8;iC;){a>=iC.t&&(iC.f=iC.c(a-iC.t)),iC=iC.n}return a}function bA(){for(var c,a=c8,b=1/0;a;){a.f?a=c?c.n=a.n:c8=a.n:(a.t<b&&(b=a.t),a=(c=a).n)}return d8=c,b}function gz(b,a){return a-(b?Math.ceil(Math.log(b)/Math.LN10):1)}function g9(c,a){var b=Math.pow(10,3*dL(8-a));return{scale:a>8?function(d){return d/b}:function(d){return d*b},symbol:c}}function jp(g){var c=g.decimal,f=g.thousands,d=g.grouping,a=g.currency,b=d?function(q){for(var m=q.length,h=[],j=0,p=d[0];m>0&&p>0;){h.push(q.substring(m-=p,m+p)),p=d[j=(j+1)%d.length]}return h.reverse().join(f)}:iJ;return function(u){var D=fJ.exec(u),j=D[1]||" ",t=D[2]||">",H=D[3]||"",F=D[4]||"",J=D[5],z=+D[6],C=D[7],A=D[8],B=D[9],q=1,I="",E="",w=!1;switch(A&&(A=+A.substring(1)),(J||"0"===j&&"="===t)&&(J=j="0",t="=",C&&(z-=Math.floor((z-1)/4))),B){case"n":C=!0,B="g";break;case"%":q=100,E="%",B="f";break;case"p":q=100,E="%",B="r";break;case"b":case"o":case"x":case"X":"#"===F&&(I="0"+B.toLowerCase());case"c":case"d":w=!0,A=0;break;case"s":q=-1,B="r"}"$"===F&&(I=a[0],E=a[1]),"r"!=B||A||(B="g"),null!=A&&("g"==B?A=Math.max(1,Math.min(21,A)):("e"==B||"f"==B)&&(A=Math.max(0,Math.min(20,A)))),B=ed.get(B)||cT;var G=J&&C;return function(h){var m=E;if(w&&h%1){return""}var K=0>h||0===h&&0>1/h?(h=-h,"-"):H;if(0>q){var p=c1.formatPrefix(h,A);h=p.scale(h),m=p.symbol+E}else{h*=q}h=B(h,A);var s=h.lastIndexOf("."),o=0>s?h:h.substring(0,s),y=0>s?"":c+h.substring(s+1);!J&&C&&(o=b(o));var r=I.length+o.length+y.length+(G?0:K.length),v=z>r?new Array(r=z-r+1).join(j):"";return G&&(o=b(v+o)),K+=I,h=o+y,("<"===t?K+h+v:">"===t?v+K+h:"^"===t?v.substring(0,r>>=1)+K+h+v.substring(r):K+(G?h:v+h))+m}}}function cT(a){return a+""}function ew(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function e8(f,q,h){function b(a){var o=f(a),c=g(o,1);return c-a>a-o?o:c}function p(a){return q(a=f(new hj(a-1)),1),a}function g(c,a){return q(c=new hj(+c),a),c}function d(v,t,s){var u=p(v),c=[];if(s>1){for(;t>u;){h(u)%s||c.push(new Date(+u)),q(u,1)}}else{for(;t>u;){c.push(new Date(+u)),q(u,1)}}return c}function m(s,a,o){try{hj=ew;var c=new ew();return c._=s,d(c,a,o)}finally{hj=Date}}f.floor=f,f.round=b,f.ceil=p,f.offset=g,f.range=d;var j=f.utc=a9(f);return j.floor=j,j.round=a9(b),j.ceil=a9(p),j.offset=a9(g),j.range=m,f}function a9(a){return function(b,d){try{hj=ew;var c=new ew();return c._=b,a(c,d)._}finally{hj=Date}}}function fQ(T){function J(c){function a(h){for(var m,f,g,p=[],d=-1,r=0;++d<b;){37===c.charCodeAt(d)&&(p.push(c.substring(r,d)),null!=(f=bC[m=c.charAt(++d)])&&(m=c.charAt(++d)),(g=L[m])&&(m=g(h,null==f?"e"===m?" ":"0":f)),p.push(m),r=d+1)}return p.push(c.substring(r,d)),p.join("")}var b=c.length;return a.parse=function(g){var h={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},d=ac(h,c,g,0);if(d!=g.length){return null}"p" in h&&(h.H=h.H%12+12*h.p);var f=null!=h.Z&&hj!==ew,m=new (f?ew:hj)();return"j" in h?m.setFullYear(h.y,0,h.j):"w" in h&&("W" in h||"U" in h)?(m.setFullYear(h.y,0,1),m.setFullYear(h.y,0,"W" in h?(h.w+6)%7+7*h.W-(m.getDay()+5)%7:h.w+7*h.U-(m.getDay()+6)%7)):m.setFullYear(h.y,h.m,h.d),m.setHours(h.H+Math.floor(h.Z/100),h.M+h.Z%100,h.S,h.L),f?m._:m},a.toString=function(){return c},a}function ac(f,w,h,b){for(var v,g,d,p=0,m=w.length,y=h.length;m>p;){if(b>=y){return -1}if(v=w.charCodeAt(p++),37===v){if(d=w.charAt(p++),g=q[d in bC?w.charAt(p++):d],!g||(b=g(f,h,b))<0){return -1}}else{if(v!=h.charCodeAt(b++)){return -1}}}return b}function O(d,a,c){ao.lastIndex=0;var b=ao.exec(a.substring(c));return b?(d.w=F.get(b[0].toLowerCase()),c+b[0].length):-1}function H(d,a,c){z.lastIndex=0;var b=z.exec(a.substring(c));return b?(d.w=at.get(b[0].toLowerCase()),c+b[0].length):-1}function X(d,a,c){I.lastIndex=0;var b=I.exec(a.substring(c));return b?(d.m=P.get(b[0].toLowerCase()),c+b[0].length):-1}function R(d,a,c){j.lastIndex=0;var b=j.exec(a.substring(c));return b?(d.m=W.get(b[0].toLowerCase()),c+b[0].length):-1}function ar(c,a,b){return ac(c,L.c.toString(),a,b)}function ai(c,a,b){return ac(c,L.x.toString(),a,b)}function K(c,a,b){return ac(c,L.X.toString(),a,b)}function V(d,a,c){var b=D.get(a.substring(c,c+=2).toLowerCase());return null==b?-1:(d.p=b,c)}var aa=T.dateTime,Y=T.date,Z=T.time,Q=T.periods,G=T.days,ae=T.shortDays,U=T.months,B=T.shortMonths;J.utc=function(c){function b(f){try{hj=ew;var d=new hj();return d._=f,a(d)}finally{hj=Date}}var a=J(c);return b.parse=function(f){try{hj=ew;var d=a.parse(f);return d&&d._}finally{hj=Date}},b.toString=a.toString,b},J.multi=J.utc.multi=hh;var D=c1.map(),z=fq(G),at=jH(G),ao=fq(ae),F=jH(ae),j=fq(U),W=jH(U),I=fq(B),P=jH(B);Q.forEach(function(b,a){D.set(b.toLowerCase(),a)});var L={a:function(a){return ae[a.getDay()]},A:function(a){return G[a.getDay()]},b:function(a){return B[a.getMonth()]},B:function(a){return U[a.getMonth()]},c:J(aa),d:function(b,a){return d2(b.getDate(),a,2)},e:function(b,a){return d2(b.getDate(),a,2)},H:function(b,a){return d2(b.getHours(),a,2)},I:function(b,a){return d2(b.getHours()%12||12,a,2)},j:function(b,a){return d2(1+bT.dayOfYear(b),a,3)},L:function(b,a){return d2(b.getMilliseconds(),a,3)},m:function(b,a){return d2(b.getMonth()+1,a,2)},M:function(b,a){return d2(b.getMinutes(),a,2)},p:function(a){return Q[+(a.getHours()>=12)]},S:function(b,a){return d2(b.getSeconds(),a,2)},U:function(b,a){return d2(bT.sundayOfYear(b),a,2)},w:function(a){return a.getDay()},W:function(b,a){return d2(bT.mondayOfYear(b),a,2)},x:J(Y),X:J(Z),y:function(b,a){return d2(b.getFullYear()%100,a,2)},Y:function(b,a){return d2(b.getFullYear()%10000,a,4)},Z:eb,"%":function(){return"%"}},q={a:O,A:H,b:X,B:R,c:ar,d:bS,e:bS,H:h4,I:h4,j:dj,L:fz,m:dP,M:j4,p:V,S:hz,U:f8,w:av,W:cG,x:ai,X:K,y:b7,Y:iW,Z:dF,"%":bR};return J}function d2(g,c,f){var d=0>g?"-":"",a=(d?-g:g)+"",b=a.length;return d+(f>b?new Array(f-b+1).join(c)+a:a)}function fq(a){return new RegExp("^(?:"+a.map(c1.requote).join("|")+")","i")}function jH(d){for(var a=new hQ(),c=-1,b=d.length;++c<b;){a.set(d[c].toLowerCase(),c)}return a}function av(d,a,c){fW.lastIndex=0;var b=fW.exec(a.substring(c,c+1));return b?(d.w=+b[0],c+b[0].length):-1}function f8(d,a,c){fW.lastIndex=0;var b=fW.exec(a.substring(c));return b?(d.U=+b[0],c+b[0].length):-1}function cG(d,a,c){fW.lastIndex=0;var b=fW.exec(a.substring(c));return b?(d.W=+b[0],c+b[0].length):-1}function iW(d,a,c){fW.lastIndex=0;var b=fW.exec(a.substring(c,c+4));return b?(d.y=+b[0],c+b[0].length):-1}function b7(d,a,c){fW.lastIndex=0;var b=fW.exec(a.substring(c,c+2));return b?(d.y=cY(+b[0]),c+b[0].length):-1}function dF(c,a,b){return/^[+-]\d{4}$/.test(a=a.substring(b,b+5))?(c.Z=+a,b+5):-1}function cY(a){return a+(a>68?1900:2000)}function dP(d,a,c){fW.lastIndex=0;var b=fW.exec(a.substring(c,c+2));return b?(d.m=b[0]-1,c+b[0].length):-1}function bS(d,a,c){fW.lastIndex=0;var b=fW.exec(a.substring(c,c+2));return b?(d.d=+b[0],c+b[0].length):-1}function dj(d,a,c){fW.lastIndex=0;var b=fW.exec(a.substring(c,c+3));return b?(d.j=+b[0],c+b[0].length):-1}function h4(d,a,c){fW.lastIndex=0;var b=fW.exec(a.substring(c,c+2));return b?(d.H=+b[0],c+b[0].length):-1}function j4(d,a,c){fW.lastIndex=0;var b=fW.exec(a.substring(c,c+2));return b?(d.M=+b[0],c+b[0].length):-1}function hz(d,a,c){fW.lastIndex=0;var b=fW.exec(a.substring(c,c+2));return b?(d.S=+b[0],c+b[0].length):-1}function fz(d,a,c){fW.lastIndex=0;var b=fW.exec(a.substring(c,c+3));return b?(d.L=+b[0],c+b[0].length):-1}function eb(f){var b=f.getTimezoneOffset(),d=b>0?"-":"+",c=~~(dL(b)/60),a=dL(b)%60;return d+d2(c,"0",2)+d2(a,"0",2)}function bR(d,a,c){dK.lastIndex=0;var b=dK.exec(a.substring(c,c+1));return b?c+b[0].length:-1}function hh(c){for(var a=c.length,b=-1;++b<a;){c[b][0]=this(c[b][0])}return function(d){for(var g=0,f=c[g];!f[1](d);){f=c[++g]}return f[0](d)}}function cL(){}function bz(g,c,f){var d=f.s=g+c,a=d-g,b=d-a;f.t=g-b+(c-a)}function fV(b,a){b&&eU.hasOwnProperty(b.type)&&eU[b.type](b,a)}function dJ(g,c,f){var d,a=-1,b=g.length-f;for(c.lineStart();++a<b;){d=g[a],c.point(d[0],d[1],d[2])}c.lineEnd()}function jO(d,a){var c=-1,b=d.length;for(a.polygonStart();++c<b;){dJ(d[c],a,1)}a.polygonEnd()}function ik(){function g(m,y){m*=gK,y=y*gK/2+eZ/4;var u=m-d,j=u>=0?1:-1,w=j*u,v=Math.cos(y),z=Math.sin(y),p=b*z,r=a*v+p*Math.cos(w),q=p*j*Math.sin(w);gh.add(Math.atan2(q,r)),d=m,a=v,b=z}var c,f,d,a,b;gF.point=function(j,h){gF.point=g,d=(c=j)*gK,a=Math.cos(h=(f=h)*gK/2+eZ/4),b=Math.sin(h)},gF.lineEnd=function(){g(c,f)}}function cf(d){var a=d[0],c=d[1],b=Math.cos(c);return[b*Math.cos(a),b*Math.sin(a),Math.sin(c)]}function eT(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]}function gW(b,a){return[b[1]*a[2]-b[2]*a[1],b[2]*a[0]-b[0]*a[2],b[0]*a[1]-b[1]*a[0]]}function gg(b,a){b[0]+=a[0],b[1]+=a[1],b[2]+=a[2]}function gE(b,a){return[b[0]*a,b[1]*a,b[2]*a]}function dn(b){var a=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b[0]/=a,b[1]/=a,b[2]/=a}function a8(a){return[Math.atan2(a[1],a[0]),iF(a[2])]}function hD(b,a){return dL(b[0]-a[0])<cD&&dL(b[1]-a[1])<cD}function eB(c,a){c*=gK;var b=Math.cos(a*=gK);j3(b*Math.cos(c),b*Math.sin(c),Math.sin(a))}function j3(c,a,b){++dp,hE+=(c-hE)/dp,eC+=(a-eC)/dp,j5+=(b-j5)/dp}function aq(){function d(q,g){q*=gK;var h=Math.cos(g*=gK),m=h*Math.cos(q),f=h*Math.sin(q),p=Math.sin(g),j=Math.atan2(Math.sqrt((j=c*p-b*f)*j+(j=b*m-a*p)*j+(j=a*f-c*m)*j),a*m+c*f+b*p);bd+=j,ax+=j*(a+(a=m)),g1+=j*(c+(c=f)),aD+=j*(b+(b=p)),j3(a,c,b)}var a,c,b;fh.point=function(f,g){f*=gK;var h=Math.cos(g*=gK);a=h*Math.cos(f),c=h*Math.sin(f),b=Math.sin(g),fh.point=d,j3(a,c,b)}}function g0(){fh.point=eB}function aC(){function g(q,D){q*=gK;var z=Math.cos(D*=gK),m=z*Math.cos(q),B=z*Math.sin(q),A=Math.sin(D),E=a*A-b*B,r=b*m-d*A,y=d*B-a*m,u=Math.sqrt(E*E+r*r+y*y),w=d*m+a*B+b*A,j=u&&-iI(w)/u,C=Math.atan2(u,w);jb+=j*E,aT+=j*r,eY+=j*y,bd+=C,ax+=C*(d+(d=m)),g1+=C*(a+(a=B)),aD+=C*(b+(b=A)),j3(d,a,b)}var c,f,d,a,b;fh.point=function(j,h){c=j,f=h,fh.point=g,j*=gK;var m=Math.cos(h*=gK);d=m*Math.cos(j),a=m*Math.sin(j),b=Math.sin(h),j3(d,a,b)},fh.lineEnd=function(){g(c,f),fh.lineEnd=g0,fh.point=eB}}function i8(){return !0}function aQ(m,E,A,b,D){var v=[],j=[];if(m.forEach(function(G){if(!((g=G.length-1)<=0)){var g,p=G[0],o=G[g];if(hD(p,o)){D.lineStart();for(var f=0;g>f;++f){D.point((p=G[f])[0],p[1])}return D.lineEnd(),void 0}var u=new fg(p,G,null,!0),h=new fg(p,null,u,!1);u.o=h,v.push(u),j.push(h),u=new fg(o,G,null,!1),h=new fg(o,null,u,!0),u.o=h,v.push(u),j.push(h)}}),j.sort(E),eX(v),eX(j),v.length){for(var C=0,B=A,F=j.length;F>C;++C){j[C].e=B=!B}for(var q,z,w=v[0];;){for(var y=w,d=!0;y.v;){if((y=y.n)===w){return}}q=y.z,D.lineStart();do{if(y.v=y.o.v=!0,y.e){if(d){for(var C=0,F=q.length;F>C;++C){D.point((z=q[C])[0],z[1])}}else{b(y.x,y.n.x,1,D)}y=y.n}else{if(d){q=y.p.z;for(var C=q.length-1;C>=0;--C){D.point((z=q[C])[0],z[1])}}else{b(y.x,y.p.x,-1,D)}y=y.p}y=y.o,q=y.z,d=!d}while(!y.v);D.lineEnd()}}}function eX(f){if(b=f.length){for(var b,d,c=0,a=f[0];++c<b;){a.n=d=f[c],d.p=a,a=d}a.n=d=f[0],d.p=a}}function fg(d,a,c,b){this.x=d,this.z=a,this.o=c,this.e=b,this.v=!1,this.n=this.p=null}function aZ(d,a,c,b){return function(J,w){function q(f,h){var g=J(f,h);d(f=g[0],h=g[1])&&w.point(f,h)}function H(h,f){var g=J(h,f);D.point(g[0],g[1])}function E(){F.point=H,D.lineStart()}function K(){F.point=q,D.lineEnd()}function t(h,f){I.push([h,f]);var g=J(h,f);C.point(g[0],g[1])}function B(){C.lineStart(),I=[]}function z(){t(I[0][0],I[0][1]),C.lineEnd();var s,g=C.clean(),m=G.buffer(),h=m.length;if(I.pop(),j.push(I),I=null,h){if(1&g){s=m[0];var f,h=s.length-1,p=-1;for(w.lineStart();++p<h;){w.point((f=s[p])[0],f[1])}return w.lineEnd(),void 0}h>1&&2&g&&m.push(m.pop().concat(m.shift())),A.push(m.filter(cy))}}var A,j,I,D=a(w),r=J.invert(b[0],b[1]),F={point:q,lineStart:E,lineEnd:K,polygonStart:function(){F.point=t,F.lineStart=B,F.lineEnd=z,A=[],j=[],w.polygonStart()},polygonEnd:function(){F.point=q,F.lineStart=E,F.lineEnd=K,A=c1.merge(A);var f=hm(r,j);A.length?aQ(A,gI,f,c,w):f&&(w.lineStart(),c(null,null,1,w),w.lineEnd()),w.polygonEnd(),A=j=null},sphere:function(){w.polygonStart(),w.lineStart(),c(null,null,1,w),w.lineEnd(),w.polygonEnd()}},G=bI(),C=a(G);return F}}function cy(a){return a.length>1}function bI(){var b,a=[];return{lineStart:function(){a.push(b=[])},point:function(c,d){b.push([c,d])},lineEnd:ih,buffer:function(){var c=a;return a=[],b=null,c},rejoin:function(){a.length>1&&a.push(a.pop().concat(a.shift()))}}}function gI(b,a){return((b=b.x)[0]<0?b[1]-a4-cD:a4-b[1])-((a=a.x)[0]<0?a[1]-a4-cD:a4-a[1])}function hm(Q,I){var Z=Q[0],L=Q[1],G=[Math.sin(Z),-Math.cos(Z),0],V=0,P=0;gh.reset();for(var ai=0,ac=I.length;ac>ai;++ai){var J=I[ai],T=J.length;if(T){for(var Y=J[0],W=Y[0],X=Y[1]/2+eZ/4,O=Math.sin(X),F=Math.cos(X),aa=1;;){aa===T&&(aa=0),Q=J[aa];var R=Q[0],z=Q[1]/2+eZ/4,B=Math.sin(z),q=Math.cos(z),ao=R-W,ae=ao>=0?1:-1,D=ae*ao,j=D>eZ,U=O*B;if(gh.add(Math.atan2(U*ae*Math.sin(D),F*q+U*Math.cos(D))),V+=j?ao+ae*fj:ao,j^W>=Z^R>=Z){var H=gW(cf(Y),cf(Q));dn(H);var N=gW(G,H);dn(N);var K=(j^ao>=0?-1:1)*iF(N[2]);(L>K||L===K&&(H[0]||H[1]))&&(P+=j^ao>=0?1:-1)}if(!aa++){break}W=R,O=B,F=q,Y=Q}}}return(-cD>V||cD>V&&0>gh)^1&P}function jG(f){var b,d=0/0,c=0/0,a=0/0;return{lineStart:function(){f.lineStart(),b=1},point:function(h,j){var g=h>0?eZ:-eZ,m=dL(h-d);dL(m-eZ)<cD?(f.point(d,c=(c+j)/2>0?a4:-a4),f.point(a,c),f.lineEnd(),f.lineStart(),f.point(g,c),f.point(h,c),b=0):a!==g&&m>=eZ&&(dL(d-a)<cD&&(d-=a*cD),dL(h-g)<cD&&(h-=g*cD),c=c2(d,c,h,j),f.point(a,c),f.lineEnd(),f.lineStart(),f.point(g,c),b=0),f.point(d=h,c=j),a=g},lineEnd:function(){f.lineEnd(),d=c=0/0},clean:function(){return 2-b}}}function c2(h,c,f,d){var a,b,g=Math.sin(h-f);return dL(g)>cD?Math.atan((Math.sin(c)*(b=Math.cos(d))*Math.sin(f)-Math.sin(d)*(a=Math.cos(c))*Math.sin(h))/(a*b*g)):(c+d)/2}function eF(g,c,f,d){var a;if(null==g){a=f*a4,d.point(-eZ,a),d.point(0,a),d.point(eZ,a),d.point(eZ,0),d.point(eZ,-a),d.point(0,-a),d.point(-eZ,-a),d.point(-eZ,0),d.point(-eZ,a)}else{if(dL(g[0]-c[0])>cD){var b=g[0]<c[0]?eZ:-eZ;a=f*b/2,d.point(-b,a),d.point(0,a),d.point(b,a)}else{d.point(c[0],c[1])}}}function fl(f){function q(c,a){return Math.cos(c)*Math.cos(a)>g}function h(v){var t,o,u,r,a;return{lineStart:function(){r=u=!1,a=1},point:function(z,w){var y,A=[z,w],s=q(z,w),B=d?s?0:p(z,w):s?p(z+(0>z?eZ:-eZ),w):0;if(!t&&(r=u=s)&&v.lineStart(),s!==u&&(y=b(t,A),(hD(t,y)||hD(A,y))&&(A[0]+=cD,A[1]+=cD,s=q(A[0],A[1]))),s!==u){a=0,s?(v.lineStart(),y=b(A,t),v.point(y[0],y[1])):(y=b(t,A),v.point(y[0],y[1]),v.lineEnd()),t=y}else{if(m&&t&&d^s){var c;B&o||!(c=b(A,t,!0))||(a=0,d?(v.lineStart(),v.point(c[0][0],c[0][1]),v.point(c[1][0],c[1][1]),v.lineEnd()):(v.point(c[1][0],c[1][1]),v.lineEnd(),v.lineStart(),v.point(c[0][0],c[0][1])))}}!s||t&&hD(t,A)||v.point(A[0],A[1]),t=A,u=s,o=B},lineEnd:function(){u&&v.lineEnd(),t=null},clean:function(){return a|(r&&u)<<1}}}function b(X,P,ao){var T=cf(X),K=cf(P),W=[1,0,0],ba=gW(T,K),at=eT(ba,ba),Q=ba[0],Z=at-Q*Q;if(!Z){return !ao&&X}var ai=g*at/Z,ac=-g*Q/Z,ae=gW(W,ba),V=gE(W,ai),J=gE(ba,ac);gg(V,J);var ar=ae,Y=eT(V,ar),G=eT(ar,ar),H=Y*Y-G*(eT(V,V)-1);if(!(0>H)){var D=Math.sqrt(H),bc=gE(ar,(-Y-D)/G);if(gg(bc,V),bc=a8(bc),!ao){return bc}var au,I=X[0],z=P[0],aa=X[1],O=P[1];I>z&&(au=I,I=z,z=au);var U=z-I,R=dL(U-eZ)<cD,B=R||cD>U;if(!R&&aa>O&&(au=aa,aa=O,O=au),B?R?aa+O>0^bc[1]<(dL(bc[0]-I)<cD?aa:O):aa<=bc[1]&&bc[1]<=O:U>eZ^(I<=bc[0]&&bc[0]<=z)){var F=gE(ar,(-Y+D)/G);return gg(F,V),[bc,a8(F)]}}}function p(c,s){var o=d?f:eZ-f,a=0;return -o>c?a|=1:c>o&&(a|=2),-o>s?a|=4:s>o&&(a|=8),a}var g=Math.cos(f),d=g>0,m=dL(g)>cD,j=hV(f,6*gK);return aZ(q,h,j,d?[0,-f]:[-eZ,f-eZ])}function bl(d,a,c,b){return function(C){var r,m=C.a,A=C.b,z=m.x,D=m.y,q=A.x,y=A.y,t=0,w=1,j=q-z,B=y-D;if(r=d-z,j||!(r>0)){if(r/=j,0>j){if(t>r){return}w>r&&(w=r)}else{if(j>0){if(r>w){return}r>t&&(t=r)}}if(r=c-z,j||!(0>r)){if(r/=j,0>j){if(r>w){return}r>t&&(t=r)}else{if(j>0){if(t>r){return}w>r&&(w=r)}}if(r=a-D,B||!(r>0)){if(r/=B,0>B){if(t>r){return}w>r&&(w=r)}else{if(B>0){if(r>w){return}r>t&&(t=r)}}if(r=b-D,B||!(0>r)){if(r/=B,0>B){if(r>w){return}r>t&&(t=r)}else{if(B>0){if(t>r){return}w>r&&(w=r)}}return t>0&&(C.a={x:z+t*j,y:D+t*B}),1>w&&(C.b={x:z+w*j,y:D+w*B}),C}}}}}}function fZ(h,c,f,d){function a(m,j){return dL(m[0]-h)<cD?j>0?0:3:dL(m[0]-f)<cD?j>0?2:1:dL(m[1]-c)<cD?j>0?1:0:j>0?3:2}function b(m,j){return g(m.x,j.x)}function g(p,j){var o=a(p,1),m=a(j,1);return o!==m?o-m:0===o?j[1]-p[1]:1===o?p[0]-j[0]:2===o?p[1]-j[1]:j[0]-p[0]}return function(U){function R(v){for(var M=0,y=Q.length,m=v[1],E=0;y>E;++E){for(var w,p=1,C=Q[E],A=C.length,N=C[0];A>p;++p){w=C[p],N[1]<=m?w[1]>m&&iD(N,w,v)>0&&++M:w[1]<=m&&iD(N,w,v)<0&&--M,N=w}}return 0!==M}function D(v,p,A,w){var m=0,y=0;if(null==v||(m=a(v,A))!==(y=a(p,A))||g(v,p)<0^A>0){do{w.point(0===m||3===m?h:f,m>1?d:c)}while((m=(m+A+4)%4)!==y)}else{w.point(p[0],p[1])}}function J(m,p){return m>=h&&f>=m&&p>=c&&d>=p}function P(p,m){J(p,m)&&U.point(p,m)}function L(){o.point=H,Q&&Q.push(I=[]),j=!0,u=!1,V=T=0/0}function O(){z&&(H(r,t),q&&u&&G.rejoin(),z.push(G.buffer())),o.point=P,u&&U.lineEnd()}function H(v,m){v=Math.max(-cB,Math.min(cB,v)),m=Math.max(-cB,Math.min(cB,m));var s=J(v,m);if(Q&&I.push([v,m]),j){r=v,t=m,q=s,j=!1,s&&(U.lineStart(),U.point(v,m))}else{if(s&&u){U.point(v,m)}else{var p={a:{x:V,y:T},b:{x:v,y:m}};F(p)?(u||(U.lineStart(),U.point(p.a.x,p.a.y)),U.point(p.b.x,p.b.y),s||U.lineEnd(),K=!1):s&&(U.lineStart(),U.point(v,m),K=!1)}}V=v,T=m,u=s}var z,Q,I,r,t,q,V,T,u,j,K,B=U,G=bI(),F=bl(h,c,f,d),o={point:P,lineStart:L,lineEnd:O,polygonStart:function(){U=G,z=[],Q=[],K=!0},polygonEnd:function(){U=B,z=c1.merge(z);var p=R([h,d]),s=K&&p,m=z.length;(s||m)&&(U.polygonStart(),s&&(U.lineStart(),D(null,null,1,U),U.lineEnd()),m&&aQ(z,b,p,D,U),U.polygonEnd()),z=Q=I=null}};return o}}function eh(c,a){function b(f,d){return f=c(f,d),a(f[0],f[1])}return c.invert&&a.invert&&(b.invert=function(f,d){return f=a.invert(f,d),f&&c.invert(f[0],f[1])}),b}function fD(f){var b=0,d=eZ/3,c=dX(f),a=c(b,d);return a.parallels=function(g){return arguments.length?c(b=g[0]*eZ/180,d=g[1]*eZ/180):[180*(b/eZ),180*(d/eZ)]},a}function jU(h,c){function f(o,j){var m=Math.sqrt(b-2*a*Math.sin(j))/a;return[m*Math.sin(o*=a),g-m*Math.cos(o)]}var d=Math.sin(h),a=(d+Math.sin(c))/2,b=1+d*(2*a-d),g=Math.sqrt(b)/a;return f.invert=function(o,j){var m=g-j;return[Math.atan2(o,m)/a,iF((b-(o*o+m*m)*a*a)/(2*a))]},f}function aH(){function f(h,g){gJ+=a*h-c*g,c=h,a=g}var b,d,c,a;fm.point=function(g,h){fm.point=f,b=c=g,d=a=h},fm.lineEnd=function(){f(b,d)}}function gl(b,a){hn>b&&(hn=b),b>c3&&(c3=b),jJ>a&&(jJ=a),a>eG&&(eG=a)}function cP(){function m(o,a){j.push("M",o,",",a,d)}function f(o,a){j.push("M",o,",",a),b.point=h}function h(o,a){j.push("L",o,",",a)}function g(){b.point=m}function c(){j.push("Z")}var d=jn(4.5),j=[],b={point:m,lineStart:function(){b.point=f},lineEnd:g,polygonStart:function(){b.lineEnd=c},polygonEnd:function(){b.lineEnd=g,b.point=m},pointRadius:function(a){return d=jn(a),b},result:function(){if(j.length){var a=j.join("");return j=[],a}}};return b}function jn(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function cp(b,a){hE+=b,eC+=a,++j5}function dO(){function c(j,g){var d=j-a,f=g-b,h=Math.sqrt(d*d+f*f);ax+=h*(a+j)/2,g1+=h*(b+g)/2,aD+=h,cp(a=j,b=g)}var a,b;f0.point=function(f,d){f0.point=c,cp(a=f,b=d)}}function c6(){f0.point=cp}function d1(){function f(p,h){var j=p-c,g=h-a,m=Math.sqrt(j*j+g*g);ax+=m*(c+p)/2,g1+=m*(a+h)/2,aD+=m,m=a*p-c*h,jb+=m*(c+p),aT+=m*(a+h),eY+=3*m,cp(c=p,a=h)}var b,d,c,a;f0.point=function(g,h){f0.point=f,cp(b=c=g,d=a=h)},f0.lineEnd=function(){f(b,d)}}function bZ(m){function f(a,o){m.moveTo(a,o),m.arc(a,o,j,0,fj)}function h(a,o){m.moveTo(a,o),b.point=g}function g(a,o){m.lineTo(a,o)}function c(){b.point=f}function d(){m.closePath()}var j=4.5,b={point:f,lineStart:function(){b.point=h},lineEnd:c,polygonStart:function(){b.lineEnd=d},polygonEnd:function(){b.lineEnd=c,b.point=f},pointRadius:function(a){return j=a,b},result:ih};return b}function dw(m){function f(a){return(b?g:h)(a)}function h(a){return hH(a,function(p,o){p=m(p,o),a.point(p[0],p[1])})}function g(C){function O(p,o){p=m(p,o),C.point(p[0],p[1])}function E(){z=0/0,a.point=J,C.lineStart()}function J(t,s){var p=cf([t,s]),v=m(t,s);c(z,q,u,T,R,A,z=v[0],q=v[1],u=t,T=p[0],R=p[1],A=p[2],b,C),C.point(z,q)}function G(){a.point=O,C.lineEnd()}function Q(){E(),a.point=D,a.lineEnd=I}function D(p,o){J(N=p,K=o),L=z,F=q,B=T,P=R,H=A,a.point=J}function I(){c(z,q,u,T,R,A,L,F,N,B,P,H,b,C),a.lineEnd=G,G()}var N,K,L,F,B,P,H,u,z,q,T,R,A,a={point:O,lineStart:E,lineEnd:G,polygonStart:function(){C.polygonStart(),a.lineStart=Q},polygonEnd:function(){C.polygonEnd(),a.lineStart=E}};return a}function c(O,ae,R,at,ao,P,X,ac,Z,aa,V,J,ai,W){var G=X-O,H=ac-ae,B=G*G+H*H;if(B>4*d&&ai--){var au=at+aa,ar=ao+V,I=P+J,o=Math.sqrt(au*au+ar*ar+I*I),Y=Math.asin(I/=o),K=dL(dL(I)-1)<cD||dL(R-Z)<cD?(R+Z)/2:Math.atan2(ar,au),U=m(K,Y),Q=U[0],u=U[1],D=Q-O,F=u-ae,T=H*D-G*F;(T*T/B>d||dL((G*D+H*F)/B-0.5)>0.3||j>at*aa+ao*V+P*J)&&(c(O,ae,R,at,ao,P,Q,u,K,au/=o,ar/=o,I,ai,W),W.point(Q,u),c(Q,u,K,au,ar,I,X,ac,Z,aa,V,J,ai,W))}}var d=0.5,j=Math.cos(30*gK),b=16;return f.precision=function(a){return arguments.length?(b=(d=a*a)>0&&16,f):Math.sqrt(d)},f}function iA(b){var a=dw(function(c,d){return b([c*hp,d*hp])});return function(c){return bM(a(c))}}function kd(a){this.stream=a}function hH(b,a){return{point:a,sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function fH(a){return dX(function(){return a})()}function dX(I){function D(a){return a=U(a[0]*gK,a[1]*gK),[a[0]*N+S,E-a[1]*N]}function Q(a){return a=U.invert((a[0]-S)/N,(E-a[1])/N),a&&[a[0]*hp,a[1]*hp]}function F(){U=eh(H=bq(J,q,z),L);var a=L(B,R);return S=O-a[0]*N,E=G+a[1]*N,C()}function C(){return K&&(K.valid=!1,K=null),D}var L,H,U,S,E,K,P=dw(function(b,a){return b=L(b,a),[b[0]*N+S,E-b[1]*N]}),N=150,O=480,G=250,B=0,R=0,J=0,q=0,z=0,j=a2,V=iJ,T=null,A=null;return D.stream=function(a){return K&&(K.valid=!1),K=bM(j(H,P(V(a)))),K.valid=!0,K},D.clipAngle=function(a){return arguments.length?(j=null==a?(T=a,a2):fl((T=+a)*gK),C()):T},D.clipExtent=function(a){return arguments.length?(A=a,V=a?fZ(a[0][0],a[0][1],a[1][0],a[1][1]):iJ,C()):A},D.scale=function(a){return arguments.length?(N=+a,F()):N},D.translate=function(a){return arguments.length?(O=+a[0],G=+a[1],F()):[O,G]},D.center=function(a){return arguments.length?(B=a[0]%360*gK,R=a[1]%360*gK,F()):[B*hp,R*hp]},D.rotate=function(a){return arguments.length?(J=a[0]%360*gK,q=a[1]%360*gK,z=a.length>2?a[2]%360*gK:0,F()):[J*hp,q*hp,z*hp]},c1.rebind(D,P,"precision"),function(){return L=I.apply(this,arguments),D.invert=L.invert&&Q,F()}}function bM(a){return hH(a,function(b,c){a.point(b*gK,c*gK)})}function g6(b,a){return[b,a]}function cC(b,a){return[b>eZ?b-fj:-eZ>b?b+fj:b,a]}function bq(c,a,b){return c?a||b?eh(dC(c),jC(a,b)):dC(c):a||b?jC(a,b):cC}function fN(a){return function(b,c){return b+=a,[b>eZ?b-fj:-eZ>b?b+fj:b,c]}}function dC(b){var a=fN(b);return a.invert=fN(-b),a}function jC(h,c){function f(u,o){var q=Math.cos(o),m=Math.cos(u)*q,r=Math.sin(u)*q,p=Math.sin(o),j=p*d+m*a;return[Math.atan2(r*b-j*g,m*d-p*a),iF(j*b+r*g)]}var d=Math.cos(h),a=Math.sin(h),b=Math.cos(c),g=Math.sin(c);return f.invert=function(u,o){var q=Math.cos(o),m=Math.cos(u)*q,r=Math.sin(u)*q,p=Math.sin(o),j=p*b-r*g;return[Math.atan2(r*b+p*g,m*d+j*a),iF(j*d-m*a)]},f}function hV(d,a){var c=Math.cos(d),b=Math.sin(d);return function(h,j,p,g){var q=p*a;null!=h?(h=b3(c,h),j=b3(c,j),(p>0?j>h:h>j)&&(h+=p*fj)):(h=d+p*fj,j=d-0.5*q);for(var m,f=h;p>0?f>j:j>f;f-=q){g.point((m=a8([c,-b*Math.cos(f),-b*Math.sin(f)]))[0],m[1])}}}function b3(d,a){var c=cf(a);c[0]-=d,dn(c);var b=iI(-c[1]);return((-c[2]<0?-b:b)+2*Math.PI-cD)%(2*Math.PI)}function eL(d,a,c){var b=c1.range(d,a-cD,c).concat(a);return function(f){return b.map(function(g){return[f,g]})}}function gO(d,a,c){var b=c1.range(d,a-cD,c).concat(a);return function(f){return b.map(function(g){return[g,f]})}}function f5(a){return a.source}function gw(a){return a.target}function df(m,E,A,b){var D=Math.cos(E),v=Math.sin(E),j=Math.cos(b),C=Math.sin(b),B=D*Math.cos(m),F=D*Math.sin(m),q=j*Math.cos(A),z=j*Math.sin(A),w=2*Math.asin(Math.sqrt(i3(b-E)+D*j*i3(A-m))),y=1/Math.sin(w),d=w?function(p){var c=Math.sin(p*=w)*y,g=Math.sin(w-p)*y,f=g*B+c*q,a=g*F+c*z,h=g*v+c*C;return[Math.atan2(a,f)*hp,Math.atan2(h,Math.sqrt(f*f+a*a))*hp]}:function(){return[m*hp,E*hp]};return d.distance=w,d}function a3(){function d(p,g){var h=Math.sin(g*=gK),j=Math.cos(g),f=dL((p*=gK)-a),m=Math.cos(f);ej+=Math.atan2(Math.sqrt((f=j*Math.sin(f))*f+(f=b*h-c*j*m)*f),c*h+b*j*m),a=p,c=h,b=j}var a,c,b;fE.point=function(f,g){a=f*gK,c=Math.sin(g*=gK),b=Math.cos(g),fE.point=d},fE.lineEnd=function(){fE.point=fE.lineEnd=ih}}function hx(c,a){function b(g,j){var h=Math.cos(g),d=Math.cos(j),f=c(h*d);return[f*d*Math.sin(g),f*Math.sin(j)]}return b.invert=function(m,h){var g=Math.sqrt(m*m+h*h),d=a(g),f=Math.sin(d),j=Math.cos(d);return[Math.atan2(m*f,g*j),Math.asin(g&&h*f/g)]},b}function ep(h,c){function f(o,j){var m=dL(dL(j)-a4)<cD?0:g/Math.pow(a(j),b);return[m*Math.sin(b*o),g-m*Math.cos(b*o)]}var d=Math.cos(h),a=function(j){return Math.tan(eZ/4+j/2)},b=h===c?Math.sin(h):Math.log(d/Math.cos(c))/Math.log(a(c)/a(h)),g=d*Math.pow(a(h),b)/b;return b?(f.invert=function(p,j){var o=g-j,m=i5(b)*Math.sqrt(p*p+o*o);return[Math.atan2(p,o)/b,2*Math.atan(Math.pow(g/m,1/b))-a4]},f):ad}function jY(g,c){function f(m,h){var j=b-h;return[j*Math.sin(a*m),b-j*Math.cos(a*m)]}var d=Math.cos(g),a=g===c?Math.sin(g):(d-Math.cos(c))/(c-g),b=d/a+g;return dL(a)<cD?g6:(f.invert=function(m,h){var j=b-h;return[Math.atan2(m,j)/a,b-i5(a)*Math.sqrt(m*m+j*j)]},f)}function ad(b,a){return[b,Math.log(Math.tan(eZ/4+a/2))]}function gT(g){var c,f=fH(g),d=f.scale,a=f.translate,b=f.clipExtent;return f.scale=function(){var h=d.apply(f,arguments);return h===f?c?f.clipExtent(null):f:h},f.translate=function(){var h=a.apply(f,arguments);return h===f?c?f.clipExtent(null):f:h},f.clipExtent=function(p){var j=b.apply(f,arguments);if(j===f){if(c=null==p){var h=eZ*d(),m=a();b([[m[0]-h,m[1]-h],[m[0]+h,m[1]+h]])}}else{c&&(j=null)}return j},f.clipExtent(null)}function al(b,a){return[Math.log(Math.tan(eZ/4+a/2)),-b]}function iN(a){return a[0]}function aL(a){return a[1]}function eQ(f){for(var b=f.length,d=[0,1],c=2,a=2;b>a;a++){for(;c>1&&iD(f[d[c-2]],f[d[c-1]],f[a])<=0;){--c}d[c++]=a}return d.slice(0,c)}function e5(b,a){return b[0]-a[0]||b[1]-a[1]}function aU(c,a,b){return(b[0]-a[0])*(c[1]-a[1])<(b[1]-a[1])*(c[0]-a[0])}function ck(g,A,v,b){var z=g[0],m=v[0],d=A[0]-z,y=b[0]-m,w=g[1],B=v[1],j=A[1]-w,q=b[1]-B,p=(y*(w-B)-q*(z-m))/(q*d-y*j);return[z+p*d,w+p*j]}function bD(c){var a=c[0],b=c[c.length-1];return !(a[0]-b[0]||a[1]-b[1])}function gB(){h7(this),this.edge=this.site=this.circle=null}function hd(b){var a=iB.pop()||new gB();return a.site=b,a}function jw(a){gb(a),d5.remove(a),iB.push(a),h7(a)}function cV(g){var y=g.circle,p=y.x,b=y.cy,w={x:p,y:b},j=g.P,d=g.N,v=[g];jw(g);for(var q=j;q.circle&&dL(p-q.circle.x)<cD&&dL(b-q.circle.cy)<cD;){j=q.P,v.unshift(q),jw(q),q=j}v.unshift(q),gb(q);for(var z=d;z.circle&&dL(p-z.circle.x)<cD&&dL(b-z.circle.cy)<cD;){d=z.N,v.push(z),jw(z),z=d}v.push(z),gb(z);var h,m=v.length;for(h=1;m>h;++h){z=v[h],q=v[h-1],dR(z.edge,q.site,z.site,w)}q=v[0],z=v[m-1],z.edge=dG(q.site,z.site,null,w),ay(q),ay(z)}function ey(F){for(var A,N,C,z,I=F.x,E=F.y,Q=d5._;Q;){if(C=fb(Q,E)-I,C>cD){Q=Q.L}else{if(z=I-bf(Q,E),!(z>cD)){C>-cD?(A=Q.P,N=Q):z>-cD?(A=Q,N=Q.N):A=N=Q;break}if(!Q.R){A=Q;break}Q=Q.R}}var P=hd(F);if(d5.insert(A,P),A||N){if(A===N){return gb(A),N=hd(A.site),d5.insert(P,N),P.edge=N.edge=dG(A.site,P.site),ay(A),ay(N),void 0}if(!N){return P.edge=dG(A.site,P.site),void 0}gb(A),gb(N);var B=A.site,H=B.x,L=B.y,J=F.x-H,K=F.y-L,D=N.site,w=D.x-H,O=D.y-L,G=2*(J*O-K*w),j=J*J+K*K,q=w*w+O*O,b={x:(O*j-K*q)/G+H,y:(J*q-w*j)/G+L};dR(N.edge,B,D,b),P.edge=dG(B,F,null,b),N.edge=dG(F,D,null,b),ay(A),ay(N)}}function fb(g,A){var v=g.site,b=v.x,z=v.y,m=z-A;if(!m){return b}var d=g.P;if(!d){return -1/0}v=d.site;var y=v.x,w=v.y,B=w-A;if(!B){return y}var j=y-b,q=1/m-1/B,p=j/B;return q?(-p+Math.sqrt(p*p-2*q*(j*j/(-2*B)-w+B/2+z-m/2)))/q+b:(b+y)/2}function bf(d,a){var c=d.N;if(c){return fb(c,a)}var b=d.site;return b.y===a?b.x:1/0}function fS(a){this.site=a,this.edges=[]}function d6(q){for(var I,C,b,H,y,m,F,E,J,w,B=q[0][0],z=q[1][0],A=q[0][1],j=q[1][1],G=c7,D=G.length;D--;){if(y=G[D],y&&y.prepare()){for(F=y.edges,E=F.length,m=0;E>m;){w=F[m].end(),b=w.x,H=w.y,J=F[++m%E].start(),I=J.x,C=J.y,(dL(b-I)>cD||dL(H-C)>cD)&&(F.splice(m,0,new bU(cZ(y.site,w,dL(b-B)<cD&&j-H>cD?{x:B,y:dL(I-B)<cD?C:j}:dL(H-j)<cD&&z-b>cD?{x:dL(C-j)<cD?I:z,y:j}:dL(b-z)<cD&&H-A>cD?{x:z,y:dL(I-z)<cD?C:A}:dL(H-A)<cD&&b-B>cD?{x:dL(C-A)<cD?I:B,y:A}:null),y.site,null)),++E)}}}}function fw(b,a){return a.angle-b.angle}function jK(){h7(this),this.x=this.y=this.arc=this.site=this.cy=null}function ay(E){var z=E.P,L=E.N;if(z&&L){var B=z.site,w=E.site,H=L.site;if(B!==H){var D=w.x,O=w.y,N=B.x-D,A=B.y-O,G=H.x-D,K=H.y-O,I=2*(N*K-A*G);if(!(I>=-bN)){var J=N*N+A*A,C=G*G+K*K,q=(K*J-A*C)/I,M=(N*C-G*J)/I,K=M+O,F=ab.pop()||new jK();F.arc=E,F.site=w,F.x=q+D,F.y=K+Math.sqrt(q*q+M*M),F.cy=K,E.circle=F;for(var b=null,j=dx._;j;){if(F.y<j.y||F.y===j.y&&F.x<=j.x){if(!j.L){b=j.P;break}j=j.L}else{if(!j.R){b=j;break}j=j.R}}dx.insert(b,F),b||(b2=F)}}}}function gb(b){var a=b.circle;a&&(a.P||(b2=a.N),dx.remove(a),ab.push(a),h7(a),b.circle=null)}function cI(f){for(var b,d=dQ,c=bl(f[0][0],f[0][1],f[1][0],f[1][1]),a=d.length;a--;){b=d[a],(!i0(b,f)||!c(b)||dL(b.a.x-b.b.x)<cD&&dL(b.a.y-b.b.y)<cD)&&(b.a=b.b=null,d.splice(a,1))}}function i0(B,q){var I=B.b;if(I){return !0}var y,j,E=B.a,A=q[0][0],L=q[1][0],K=q[0][1],w=q[1][1],D=B.l,H=B.r,F=D.x,G=D.y,z=H.x,b=H.y,J=(F+z)/2,C=(G+b)/2;if(b===G){if(A>J||J>=L){return}if(F>z){if(E){if(E.y>=w){return}}else{E={x:J,y:K}}I={x:J,y:w}}else{if(E){if(E.y<K){return}}else{E={x:J,y:w}}I={x:J,y:K}}}else{if(y=(F-z)/(b-G),j=C-y*J,-1>y||y>1){if(F>z){if(E){if(E.y>=w){return}}else{E={x:(K-j)/y,y:K}}I={x:(w-j)/y,y:w}}else{if(E){if(E.y<K){return}}else{E={x:(w-j)/y,y:w}}I={x:(K-j)/y,y:K}}}else{if(b>G){if(E){if(E.x>=L){return}}else{E={x:A,y:y*A+j}}I={x:L,y:y*L+j}}else{if(E){if(E.x<A){return}}else{E={x:L,y:y*L+j}}I={x:A,y:y*A+j}}}}return B.a=E,B.b=I,!0}function b8(b,a){this.l=b,this.r=a,this.a=this.b=null}function dG(f,b,d,c){var a=new b8(f,b);return dQ.push(a),d&&dR(a,f,b,d),c&&dR(a,b,f,c),c7[f.i].edges.push(new bU(a,f,b)),c7[b.i].edges.push(new bU(a,b,f)),a}function cZ(d,a,c){var b=new b8(d,null);return b.a=a,b.b=c,dQ.push(b),b}function dR(d,a,c,b){d.a||d.b?d.l===c?d.b=b:d.a=b:(d.a=b,d.l=a,d.r=c)}function bU(f,b,d){var c=f.a,a=f.b;this.edge=f,this.site=b,this.angle=d?Math.atan2(d.y-b.y,d.x-b.x):f.l===b?Math.atan2(a.x-c.x,c.y-a.y):Math.atan2(c.x-a.x,a.y-c.y)}function dk(){this._=null}function h7(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function j6(f,b){var d=b,c=b.R,a=d.U;a?a.L===d?a.L=c:a.R=c:f._=c,c.U=a,d.U=c,d.R=c.L,d.R&&(d.R.U=d),c.L=d}function hA(f,b){var d=b,c=b.L,a=d.U;a?a.L===d?a.L=c:a.R=c:f._=c,c.U=a,d.U=c,d.L=c.R,d.L&&(d.L.U=d),c.R=d}function fA(a){for(;a.L;){a=a.L}return a}function dU(h,c){var f,d,a,b=h.sort(bH).pop();for(dQ=[],c7=new Array(h.length),d5=new dk(),dx=new dk();;){if(a=b2,b&&(!a||b.y<a.y||b.y===a.y&&b.x<a.x)){(b.x!==f||b.y!==d)&&(c7[b.i]=new fS(b),ey(b),f=b.x,d=b.y),b=h.pop()}else{if(!a){break}cV(a.arc)}}c&&(cI(c),d6(c));var g={cells:c7,edges:dQ};return d5=dx=dQ=c7=null,g}function bH(b,a){return a.y-b.y||a.x-b.x}function g3(c,a,b){return(c.x-b.x)*(a.y-c.y)-(c.x-a.x)*(b.y-c.y)}function cx(a){return a.x}function bk(a){return a.y}function fK(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function dz(f,q,h,b,p,g){if(!f(q,h,b,p,g)){var d=0.5*(h+p),m=0.5*(b+g),j=q.nodes;j[0]&&dz(f,j[0],h,b,d,m),j[1]&&dz(f,j[1],d,b,p,m),j[2]&&dz(f,j[2],h,m,d,g),j[3]&&dz(f,j[3],d,m,p,g)}}function jz(m,f){m=c1.rgb(m),f=c1.rgb(f);var h=m.r,g=m.g,c=m.b,d=f.r-h,j=f.g-g,b=f.b-c;return function(a){return"#"+a0(Math.round(h+d*a))+a0(Math.round(g+j*a))+a0(Math.round(c+b*a))}}function hP(f,b){var d,c={},a={};for(d in f){d in b?c[d]=gL(f[d],b[d]):a[d]=f[d]}for(d in b){d in f||(a[d]=b[d])}return function(g){for(d in c){a[d]=c[d](g)}return a}}function bY(b,a){return a-=b=+b,function(c){return b+a*c}}function eI(f,v){var j,b,q,h,d,p=0,m=0,w=[],g=[];for(f+="",v+="",fI.lastIndex=0,b=0;j=fI.exec(v);++b){j.index&&w.push(v.substring(p,m=j.index)),g.push({i:w.length,x:j[0]}),w.push(null),p=fI.lastIndex}for(p<v.length&&w.push(v.substring(p)),b=0,h=g.length;(j=fI.exec(f))&&h>b;++b){if(d=g[b],d.x==j[0]){if(d.i){if(null==w[d.i+1]){for(w[d.i-1]+=d.x,w.splice(d.i,1),q=b+1;h>q;++q){g[q].i--}}else{for(w[d.i-1]+=d.x+w[d.i+1],w.splice(d.i,2),q=b+1;h>q;++q){g[q].i-=2}}}else{if(null==w[d.i+1]){w[d.i]=d.x}else{for(w[d.i]=d.x+w[d.i+1],w.splice(d.i+1,1),q=b+1;h>q;++q){g[q].i--}}}g.splice(b,1),h--,b--}else{d.x=bY(parseFloat(j[0]),parseFloat(d.x))}}for(;h>b;){d=g.pop(),null==w[d.i+1]?w[d.i]=d.x:(w[d.i]=d.x+w[d.i+1],w.splice(d.i+1,1)),h--}return 1===w.length?null==w[0]?(d=g[0].x,function(a){return d(a)+""}):function(){return v}:function(a){for(b=0;h>b;++b){w[(d=g[b]).i]=d.x(a)}return w.join("")}}function gL(d,a){for(var c,b=c1.interpolators.length;--b>=0&&!(c=c1.interpolators[b](d,a));){}return c}function f2(m,f){var h,g=[],c=[],d=m.length,j=f.length,b=Math.min(m.length,f.length);for(h=0;b>h;++h){g.push(gL(m[h],f[h]))}for(;d>h;++h){c[h]=m[h]}for(;j>h;++h){c[h]=f[h]}return function(a){for(h=0;b>h;++h){c[h]=g[h](a)}return c}}function gp(a){return function(b){return 0>=b?0:b>=1?1:a(b)}}function c9(a){return function(b){return 1-a(1-b)}}function aY(a){return function(b){return 0.5*(0.5>b?a(2*b):2-a(2-2*b))}}function hq(a){return a*a}function el(a){return a*a*a}function jT(c){if(0>=c){return 0}if(c>=1){return 1}var a=c*c,b=a*c;return 4*(0.5>c?b:3*(c-a)+b-0.75)}function kb(a){return function(b){return Math.pow(b,a)}}function gQ(a){return 1-Math.cos(a*a4)}function ah(a){return Math.pow(2,10*(a-1))}function iH(a){return 1-Math.sqrt(1-a*a)}function aG(c,a){var b;return arguments.length<2&&(a=0.45),arguments.length?b=a/fj*Math.asin(1/c):(c=1,b=a/4),function(d){return 1+c*Math.pow(2,-10*d)*Math.sin((d-b)*fj/a)}}function eN(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function e0(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+0.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}function aP(m,f){m=c1.hcl(m),f=c1.hcl(f);var h=m.h,g=m.c,c=m.l,d=f.h-h,j=f.c-g,b=f.l-c;return isNaN(j)&&(j=0,g=isNaN(g)?f.c:g),isNaN(d)?(d=0,h=isNaN(h)?f.h:h):d>180?d-=360:-180>d&&(d+=360),function(a){return cz(h+d*a,g+j*a,c+b*a)+""}}function cd(m,f){m=c1.hsl(m),f=c1.hsl(f);var h=m.h,g=m.s,c=m.l,d=f.h-h,j=f.s-g,b=f.l-c;return isNaN(j)&&(j=0,g=isNaN(g)?f.s:g),isNaN(d)?(d=0,h=isNaN(h)?f.h:h):d>180?d-=360:-180>d&&(d+=360),function(a){return dV(h+d*a,g+j*a,c+b*a)+""}}function by(m,f){m=c1.lab(m),f=c1.lab(f);var h=m.l,g=m.a,c=m.b,d=f.l-h,j=f.a-g,b=f.b-c;return function(a){return dA(h+d*a,g+j*a,c+b*a)+""}}function gy(b,a){return a-=b,function(c){return Math.round(b+a*c)}}function g8(g){var c=[g.a,g.b],f=[g.c,g.d],d=cS(c),a=jm(c,f),b=cS(ev(f,c,-a))||0;c[0]*f[1]<f[0]*c[1]&&(c[0]*=-1,c[1]*=-1,d*=-1,a*=-1),this.rotate=(d?Math.atan2(c[1],c[0]):Math.atan2(-f[0],f[1]))*hp,this.translate=[g.e,g.f],this.scale=[d,b],this.skew=b?Math.atan2(a,b)*hp:0}function jm(b,a){return b[0]*a[0]+b[1]*a[1]}function cS(b){var a=Math.sqrt(jm(b,b));return a&&(b[0]/=a,b[1]/=a),a}function ev(c,a,b){return c[0]+=b*a[0],c[1]+=b*a[1],c}function e7(m,E){var A,b=[],D=[],v=c1.transform(m),j=c1.transform(E),C=v.translate,B=j.translate,F=v.rotate,q=j.rotate,z=v.skew,w=j.skew,y=v.scale,d=j.scale;return C[0]!=B[0]||C[1]!=B[1]?(b.push("translate(",null,",",null,")"),D.push({i:1,x:bY(C[0],B[0])},{i:3,x:bY(C[1],B[1])})):B[0]||B[1]?b.push("translate("+B+")"):b.push(""),F!=q?(F-q>180?q+=360:q-F>180&&(F+=360),D.push({i:b.push(b.pop()+"rotate(",null,")")-2,x:bY(F,q)})):q&&b.push(b.pop()+"rotate("+q+")"),z!=w?D.push({i:b.push(b.pop()+"skewX(",null,")")-2,x:bY(z,w)}):w&&b.push(b.pop()+"skewX("+w+")"),y[0]!=d[0]||y[1]!=d[1]?(A=b.push(b.pop()+"scale(",null,",",null,")"),D.push({i:A-4,x:bY(y[0],d[0])},{i:A-2,x:bY(y[1],d[1])})):(1!=d[0]||1!=d[1])&&b.push(b.pop()+"scale("+d+")"),A=D.length,function(f){for(var c,a=-1;++a<A;){b[(c=D[a]).i]=c.x(f)}return b.join("")}}function a7(b,a){return a=a-(b=+b)?1/(a-b):0,function(c){return(c-b)*a}}function fP(b,a){return a=a-(b=+b)?1/(a-b):0,function(c){return Math.max(0,Math.min(1,(c-b)*a))}}function d0(g){for(var c=g.source,f=g.target,d=jF(c,f),a=[c];c!==d;){c=c.parent,a.push(c)}for(var b=a.length;f!==d;){a.splice(b,0,f),f=f.parent}return a}function fp(c){for(var a=[],b=c.parent;null!=b;){a.push(c),c=b,b=b.parent}return a.push(c),a}function jF(h,c){if(h===c){return h}for(var f=fp(h),d=fp(c),a=f.pop(),b=d.pop(),g=null;a===b;){g=a,a=f.pop(),b=d.pop()}return g}function ap(a){a.fixed|=2}function f7(a){a.fixed&=-7}function cF(a){a.fixed|=4,a.px=a.x,a.py=a.y}function iU(a){a.fixed&=-5}function b6(f,q,h){var b=0,p=0;if(f.charge=0,!f.leaf){for(var g,d=f.nodes,m=d.length,j=-1;++j<m;){g=d[j],null!=g&&(b6(g,q,h),f.charge+=g.charge,b+=g.charge*g.cx,p+=g.charge*g.cy)}}if(f.point){f.leaf||(f.point.x+=Math.random()-0.5,f.point.y+=Math.random()-0.5);var v=q*h[f.point.index];f.charge+=f.pointCharge=v,b+=v*f.point.x,p+=v*f.point.y}f.cx=b/f.charge,f.cy=p/f.charge}function dE(b,a){return c1.rebind(b,a,"sort","children","value"),b.nodes=b,b.links=dh,b}function cX(a){return a.children}function dN(a){return a.value}function bQ(b,a){return a.value-b.value}function dh(a){return c1.merge(a.map(function(b){return(b.children||[]).map(function(c){return{source:b,target:c}})}))}function h2(a){return a.x}function j2(a){return a.y}function hy(c,a,b){c.y0=a,c.y=b}function fy(a){return c1.range(a.length)}function d7(d){for(var a=-1,c=d[0].length,b=[];++a<c;){b[a]=0}return b}function bP(g){for(var c,f=1,d=0,a=g[0][1],b=g.length;b>f;++f){(c=g[f][1])>a&&(d=f,a=c)}return d}function hf(a){return a.reduce(cJ,0)}function cJ(b,a){return b+a[1]}function bx(b,a){return fT(b,Math.ceil(Math.log(a.length)/Math.LN2+1))}function fT(g,c){for(var f=-1,d=+g[0],a=(g[1]-d)/c,b=[];++f<=c;){b[f]=a*f+d}return b}function dH(a){return[c1.min(a),c1.max(a)]}function jM(b,a){return b.parent==a.parent?1:2}function h9(b){var a=b.children;return a&&a.length?a[0]:b._tree.thread}function b9(c){var a,b=c.children;return b&&(a=b.length)?b[a-1]:c._tree.thread}function eR(g,c){var f=g.children;if(f&&(a=f.length)){for(var d,a,b=-1;++b<a;){c(d=eR(f[b],c),g)>0&&(g=d)}}return g}function gU(b,a){return b.x-a.x}function gd(b,a){return a.x-b.x}function gC(b,a){return b.depth-a.depth}function dl(c,a){function b(p,h){var f=p.children;if(f&&(j=f.length)){for(var g,j,d=null,m=-1;++m<j;){g=f[m],b(g,d),d=g}}a(p,h)}b(c,null)}function a6(g){for(var c,f=0,d=0,a=g.children,b=a.length;--b>=0;){c=a[b]._tree,c.prelim+=f,c.mod+=f,f+=c.shift+(d+=c.change)}}function hB(d,a,c){d=d._tree,a=a._tree;var b=c/(a.number-d.number);d.change+=b,a.change-=b,a.shift+=c,a.prelim+=c,a.mod+=c}function ez(c,a,b){return c._tree.ancestor.parent==a.parent?c._tree.ancestor:b}function j1(b,a){return b.value-a.value}function am(c,a){var b=c._pack_next;c._pack_next=a,a._pack_prev=c,a._pack_next=b,b._pack_prev=a}function gZ(b,a){b._pack_next=a,a._pack_prev=b}function aA(f,b){var d=b.x-f.x,c=b.y-f.y,a=f.r+b.r;return 0.999*a*a>d*d+c*c}function i1(E){function z(a){G=Math.min(a.x-a.r,G),K=Math.max(a.x+a.r,K),I=Math.min(a.y-a.r,I),J=Math.max(a.y+a.r,J)}if((L=E.children)&&(A=L.length)){var L,B,w,H,D,O,N,A,G=1/0,K=-1/0,I=1/0,J=-1/0;if(L.forEach(aO),B=L[0],B.x=-B.r,B.y=0,z(B),A>1&&(w=L[1],w.x=w.r,w.y=0,z(w),A>2)){for(H=L[2],aX(B,w,H),z(H),am(B,H),B._pack_prev=H,am(H,w),w=B._pack_next,D=3;A>D;D++){aX(B,w,H=L[D]);var C=0,q=1,M=1;for(O=w._pack_next;O!==w;O=O._pack_next,q++){if(aA(O,H)){C=1;break}}if(1==C){for(N=B._pack_prev;N!==O._pack_prev&&!aA(N,H);N=N._pack_prev,M++){}}C?(M>q||q==M&&w.r<B.r?gZ(B,w=O):gZ(B=N,w),D--):(am(B,H),w=H,z(H))}}var F=(G+K)/2,b=(I+J)/2,j=0;for(D=0;A>D;D++){H=L[D],H.x-=F,H.y-=b,j=Math.max(j,H.r+Math.sqrt(H.x*H.x+H.y*H.y))}E.r=j,L.forEach(eW)}}function aO(a){a._pack_next=a._pack_prev=a}function eW(a){delete a._pack_next,delete a._pack_prev}function fd(h,c,f,d){var a=h.children;if(h.x=c+=d*h.x,h.y=f+=d*h.y,h.r*=d,a){for(var b=-1,g=a.length;++b<g;){fd(a[b],c,f,d)}}}function aX(f,q,h){var b=f.r+h.r,p=q.x-f.x,g=q.y-f.y;if(b&&(p||g)){var d=q.r+h.r,m=p*p+g*g;d*=d,b*=b;var j=0.5+(b-d)/(2*m),v=Math.sqrt(Math.max(0,2*d*(b+m)-(b-=m)*b-d*d))/(2*m);h.x=f.x+j*p+v*g,h.y=f.y+j*g-v*p}else{h.x=f.x+b,h.y=f.y}}function cw(a){return 1+c1.max(a,function(b){return b.y})}function bG(a){return a.reduce(function(c,b){return c+b.x},0)/a.length}function gH(b){var a=b.children;return a&&a.length?gH(a[0]):b}function hl(c){var a,b=c.children;return b&&(a=b.length)?hl(b[a-1]):c}function jD(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function c0(g,c){var f=g.x+c[3],d=g.y+c[0],a=g.dx-c[1]-c[3],b=g.dy-c[0]-c[2];return 0>a&&(f+=a/2,a=0),0>b&&(d+=b/2,b=0),{x:f,y:d,dx:a,dy:b}}function eE(c){var a=c[0],b=c[c.length-1];return b>a?[a,b]:[b,a]}function fk(a){return a.rangeExtent?a.rangeExtent():eE(a.range())}function bj(g,c,f,d){var a=f(g[0],g[1]),b=d(c[0],c[1]);return function(h){return b(a(h))}}function fY(h,c){var f,d=0,a=h.length-1,b=h[d],g=h[a];return b>g&&(f=d,d=a,a=f,f=b,b=g,g=f),h[d]=c.floor(b),h[a]=c.ceil(g),h}function eg(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:eK}function fB(m,f,h,g){var c=[],d=[],j=0,b=Math.min(m.length,f.length)-1;for(m[b]<m[0]&&(m=m.slice().reverse(),f=f.slice().reverse());++j<=b;){c.push(h(m[j-1],m[j])),d.push(g(f[j-1],f[j]))}return function(a){var o=c1.bisect(m,a,1,b)-1;return d[o](c[o](a))}}function jR(m,f,h,g){function c(){var a=Math.min(m.length,f.length)>2?fB:bj,o=g?fP:a7;return j=a(m,f,o,h),b=a(f,m,o,gL),d}function d(a){return j(a)}var j,b;return d.invert=function(a){return b(a)},d.domain=function(a){return arguments.length?(m=a.map(Number),c()):m},d.range=function(a){return arguments.length?(f=a,c()):f},d.rangeRound=function(a){return d.range(a).interpolate(gy)},d.clamp=function(a){return arguments.length?(g=a,c()):g},d.interpolate=function(a){return arguments.length?(h=a,c()):h},d.ticks=function(a){return jh(m,a)},d.tickFormat=function(a,o){return cm(m,a,o)},d.nice=function(a){return gk(m,a),c()},d.copy=function(){return jR(m,f,h,g)},c()}function aF(b,a){return c1.rebind(b,a,"range","rangeRound","interpolate","clamp")}function gk(b,a){return fY(b,eg(cO(b,a)[2]))}function cO(g,c){null==c&&(c=10);var f=eE(g),d=f[1]-f[0],a=Math.pow(10,Math.floor(Math.log(d/c)/Math.LN10)),b=c/d*a;return 0.15>=b?a*=10:0.35>=b?a*=5:0.75>=b&&(a*=2),f[0]=Math.ceil(f[0]/a)*a,f[1]=Math.floor(f[1]/a)*a+0.5*a,f[2]=a,f}function jh(b,a){return c1.range.apply(c1,cO(b,a))}function cm(d,a,c){var b=cO(d,a);return c1.format(c?c.replace(fJ,function(g,v,m,r,j,f,q,p,w,h){return[v,m,r,j,f,q,p,w||"."+c5(h,b),h].join("")}):",."+dM(b[2])+"f")}function dM(a){return -Math.floor(Math.log(a)/Math.LN10+0.01)}function c5(c,a){var b=dM(a[2]);return c in gN?Math.abs(b-dM(Math.max(Math.abs(a[0]),Math.abs(a[1]))))+ +("e"!==c):b-2*("%"===c)}function dY(h,c,f,d){function a(j){return(f?Math.log(0>j?0:j):-Math.log(j>0?0:-j))/Math.log(c)}function b(j){return f?Math.pow(c,j):-Math.pow(c,-j)}function g(j){return h(a(j))}return g.invert=function(j){return b(h.invert(j))},g.domain=function(j){return arguments.length?(f=j[0]>=0,h.domain((d=j.map(Number)).map(a)),g):d},g.base=function(j){return arguments.length?(c=+j,h.domain(d.map(a)),g):c},g.nice=function(){var j=fY(d.map(a),f?Math:gv);return h.domain(j),d=j.map(b),g},g.ticks=function(){var v=eE(d),t=[],m=v[0],u=v[1],q=Math.floor(a(m)),j=Math.ceil(a(u)),r=c%1?2:c;if(isFinite(j-q)){if(f){for(;j>q;q++){for(var p=1;r>p;p++){t.push(b(q)*p)}}t.push(b(q))}else{for(t.push(b(q));q++<j;){for(var p=r-1;p>0;p--){t.push(b(q)*p)}}}for(q=0;t[q]<m;q++){}for(j=t.length;t[j-1]>u;j--){}t=t.slice(q,j)}return t},g.tickFormat=function(q,m){if(!arguments.length){return f4}arguments.length<2?m=f4:"function"!=typeof m&&(m=c1.format(m));var o,j=Math.max(0.1,q/g.ticks().length),p=f?(o=1e-12,Math.ceil):(o=-1e-12,Math.floor);return function(r){return r/b(p(a(r)+o))<=j?m(r):""}},g.copy=function(){return dY(h.copy(),c,f,d)},aF(g,h)}function bX(g,c,f){function d(h){return g(a(h))}var a=dv(c),b=dv(1/c);return d.invert=function(h){return b(g.invert(h))},d.domain=function(h){return arguments.length?(g.domain((f=h.map(Number)).map(a)),d):f},d.ticks=function(h){return jh(f,h)},d.tickFormat=function(j,h){return cm(f,j,h)},d.nice=function(h){return d.domain(gk(f,h))},d.exponent=function(h){return arguments.length?(a=dv(c=h),b=dv(1/c),g.domain(f.map(a)),d):c},d.copy=function(){return bX(g.copy(),c,f)},aF(d,g)}function dv(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function iw(j,d){function g(a){return h[((c.get(a)||"range"===d.t&&c.set(a,j.push(a)))-1)%h.length]}function f(a,m){return c1.range(j.length).map(function(o){return a+m*o})}var c,h,b;return g.domain=function(p){if(!arguments.length){return j}j=[],c=new hQ();for(var q,m=-1,s=p.length;++m<s;){c.has(q=p[m])||c.set(q,j.push(q))}return g[d.t].apply(g,d.a)},g.range=function(a){return arguments.length?(h=a,b=0,d={t:"range",a:arguments},g):h},g.rangePoints=function(m,o){arguments.length<2&&(o=0);var q=m[0],p=m[1],a=(p-q)/(Math.max(1,j.length-1)+o);return h=f(j.length<2?(q+p)/2:q+a*o/2,a),b=0,d={t:"rangePoints",a:arguments},g},g.rangeBands=function(m,o,t){arguments.length<2&&(o=0),arguments.length<3&&(t=o);var q=m[1]<m[0],a=m[q-0],r=m[1-q],p=(r-a)/(j.length-o+2*t);return h=f(a+p*t,p),q&&h.reverse(),b=p*(1-o),d={t:"rangeBands",a:arguments},g},g.rangeRoundBands=function(m,o,v){arguments.length<2&&(o=0),arguments.length<3&&(v=o);var q=m[1]<m[0],a=m[q-0],t=m[1-q],p=Math.floor((t-a)/(j.length-o+2*v)),r=t-a-(j.length-o)*p;return h=f(a+Math.round(r/2),p),q&&h.reverse(),b=Math.round(p*(1-o)),d={t:"rangeRoundBands",a:arguments},g},g.rangeBand=function(){return b},g.rangeExtent=function(){return eE(d.a[0])},g.copy=function(){return iw(j,d)},g.domain(j)}function j9(f,b){function d(){var h=0,g=b.length;for(a=[];++h<g;){a[h-1]=c1.quantile(f,h/g)}return c}function c(g){return isNaN(g=+g)?void 0:b[c1.bisect(a,g)]}var a;return c.domain=function(g){return arguments.length?(f=g.filter(function(h){return !isNaN(h)}).sort(c1.ascending),d()):f},c.range=function(g){return arguments.length?(b=g,d()):b},c.quantiles=function(){return a},c.invertExtent=function(g){return g=b.indexOf(g),0>g?[0/0,0/0]:[g>0?a[g-1]:f[0],g<a.length?a[g]:f[f.length-1]]},c.copy=function(){return j9(f,b)},d()}function hG(h,c,f){function d(j){return f[Math.max(0,Math.min(g,Math.floor(b*(j-h))))]}function a(){return b=f.length/(c-h),g=f.length-1,d}var b,g;return d.domain=function(j){return arguments.length?(h=+j[0],c=+j[j.length-1],a()):[h,c]},d.range=function(j){return arguments.length?(f=j,a()):f},d.invertExtent=function(j){return j=f.indexOf(j),j=0>j?0/0:j/b+h,[j,j+1/b]},d.copy=function(){return hG(h,c,f)},a()}function fG(c,a){function b(d){return d>=d?a[c1.bisect(c,d)]:void 0}return b.domain=function(d){return arguments.length?(c=d,b):c},b.range=function(d){return arguments.length?(a=d,b):a},b.invertExtent=function(d){return d=a.indexOf(d),[c[d-1],c[d]]},b.copy=function(){return fG(c,a)},b}function dZ(b){function a(c){return +c}return a.invert=a,a.domain=a.range=function(c){return arguments.length?(b=c.map(a),a):b},a.ticks=function(c){return jh(b,c)},a.tickFormat=function(c,d){return cm(b,c,d)},a.copy=function(){return dZ(b)},a}function bO(a){return a.innerRadius}function g7(a){return a.outerRadius}function cE(a){return a.startAngle}function bw(a){return a.endAngle}function fO(m){function f(z){function q(){A.push("M",d(m(r),b))}for(var y,A=[],r=[],w=-1,u=z.length,v=aj(h),a=aj(g);++w<u;){c.call(this,y=z[w],w)?r.push([+v.call(this,y,w),+a.call(this,y,w)]):r.length&&(q(),r=[])}return r.length&&q(),A.length?A.join(""):null}var h=iN,g=aL,c=i8,d=dD,j=d.key,b=0.7;return f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(g=a,f):g},f.defined=function(a){return arguments.length?(c=a,f):c},f.interpolate=function(a){return arguments.length?(j="function"==typeof a?d=a:(d=gS.get(a)||dD).key,f):j},f.tension=function(a){return arguments.length?(b=a,f):b},f}function dD(a){return a.join("L")}function jE(a){return dD(a)+"Z"}function hY(f){for(var b=0,d=f.length,c=f[0],a=[c[0],",",c[1]];++b<d;){a.push("H",(c[0]+(c=f[b])[0])/2,"V",c[1])}return d>1&&a.push("H",c[0]),a.join("")}function b5(f){for(var b=0,d=f.length,c=f[0],a=[c[0],",",c[1]];++b<d;){a.push("V",(c=f[b])[1],"H",c[0])}return a.join("")}function eM(f){for(var b=0,d=f.length,c=f[0],a=[c[0],",",c[1]];++b<d;){a.push("H",(c=f[b])[0],"V",c[1])}return a.join("")}function gP(b,a){return b.length<4?dD(b):b[1]+dg(b.slice(1,b.length-1),a5(b,a))}function f6(b,a){return b.length<3?dD(b):b[0]+dg((b.push(b[0]),b),a5([b[b.length-2]].concat(b,[b[1]]),a))}function gx(b,a){return b.length<3?dD(b):b[0]+dg(b,a5(b,a))}function dg(f,v){if(v.length<1||f.length!=v.length&&f.length!=v.length+2){return dD(f)}var j=f.length!=v.length,b="",q=f[0],h=f[1],d=v[0],p=d,m=1;if(j&&(b+="Q"+(h[0]-2*d[0]/3)+","+(h[1]-2*d[1]/3)+","+h[0]+","+h[1],q=f[1],m=2),v.length>1){p=v[1],h=f[m],m++,b+="C"+(q[0]+d[0])+","+(q[1]+d[1])+","+(h[0]-p[0])+","+(h[1]-p[1])+","+h[0]+","+h[1];for(var w=2;w<v.length;w++,m++){h=f[m],p=v[w],b+="S"+(h[0]-p[0])+","+(h[1]-p[1])+","+h[0]+","+h[1]}}if(j){var g=f[m];b+="Q"+(h[0]+2*p[0]/3)+","+(h[1]+2*p[1]/3)+","+g[0]+","+g[1]}return b}function a5(f,q){for(var h,b=[],p=(1-q)/2,g=f[0],d=f[1],m=1,j=f.length;++m<j;){h=g,g=d,d=f[m],b.push([p*(d[0]-h[0]),p*(d[1]-h[1])])}return b}function eq(f){if(f.length<3){return dD(f)}var q=1,h=f.length,b=f[0],p=b[0],g=b[1],d=[p,p,p,(b=f[1])[0]],m=[g,g,g,b[1]],j=[p,",",g,"L",an(aJ,d),",",an(aJ,m)];for(f.push(f[h-1]);++q<=h;){b=f[q],d.shift(),d.push(b[0]),m.shift(),m.push(b[1]),iQ(j,d,m)}return f.pop(),j.push("L",b),j.join("")}function j0(h){if(h.length<4){return dD(h)}for(var c,f=[],d=-1,a=h.length,b=[0],g=[0];++d<3;){c=h[d],b.push(c[0]),g.push(c[1])}for(f.push(an(aJ,b)+","+an(aJ,g)),--d;++d<a;){c=h[d],b.shift(),b.push(c[0]),g.shift(),g.push(c[1]),iQ(f,b,g)}return f.join("")}function ag(m){for(var f,h,g=-1,c=m.length,d=c+4,j=[],b=[];++g<4;){h=m[g%c],j.push(h[0]),b.push(h[1])}for(f=[an(aJ,j),",",an(aJ,b)],--g;++g<d;){h=m[g%c],j.shift(),j.push(h[0]),b.shift(),b.push(h[1]),iQ(f,j,b)}return f.join("")}function gV(f,q){var h=f.length-1;if(h){for(var b,p,g=f[0][0],d=f[0][1],m=f[h][0]-g,j=f[h][1]-d,v=-1;++v<=h;){b=f[v],p=v/h,b[0]=q*b[0]+(1-q)*(g+p*m),b[1]=q*b[1]+(1-q)*(d+p*j)}}return eq(f)}function an(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]+b[3]*a[3]}function iQ(c,a,b){c.push("C",an(ak,a),",",an(ak,b),",",an(iK,a),",",an(iK,b),",",an(aJ,a),",",an(aJ,b))}function aN(b,a){return(a[1]-b[1])/(a[0]-b[0])}function eS(h){for(var c=0,f=h.length-1,d=[],a=h[0],b=h[1],g=d[0]=aN(a,b);++c<f;){d[c]=(g+(g=aN(a=b,b=h[c+1])))/2}return d[c]=g,d}function e6(f){for(var q,h,b,p,g=[],d=eS(f),m=-1,j=f.length-1;++m<j;){q=aN(f[m],f[m+1]),dL(q)<cD?d[m]=d[m+1]=0:(h=d[m]/q,b=d[m+1]/q,p=h*h+b*b,p>9&&(p=3*q/Math.sqrt(p),d[m]=p*h,d[m+1]=p*b))}for(m=-1;++m<=j;){p=(f[Math.min(j,m+1)][0]-f[Math.max(0,m-1)][0])/(6*(1+d[m]*d[m])),g.push([p||0,d[m]*p||0])}return g}function aW(a){return a.length<3?dD(a):a[0]+dg(a,e6(a))}function cn(g){for(var c,f,d,a=-1,b=g.length;++a<b;){c=g[a],f=c[0],d=c[1]+jW,c[0]=f*Math.cos(d),c[1]=f*Math.sin(d)}return g}function bF(g){function y(H){function A(){G.push("M",v(g(f),m),h,z(g(u.reverse()),m),"Z")}for(var o,r,a,G=[],u=[],f=[],C=-1,D=H.length,s=aj(p),F=aj(w),B=p===b?function(){return r}:aj(b),E=w===j?function(){return a}:aj(j);++C<D;){d.call(this,o=H[C],C)?(u.push([r=+s.call(this,o,C),a=+F.call(this,o,C)]),f.push([+B.call(this,o,C),+E.call(this,o,C)])):u.length&&(A(),u=[],f=[])}return u.length&&A(),G.length?G.join(""):null}var p=iN,b=iN,w=0,j=aL,d=i8,v=dD,q=v.key,z=v,h="L",m=0.7;return y.x=function(a){return arguments.length?(p=b=a,y):b},y.x0=function(a){return arguments.length?(p=a,y):p},y.x1=function(a){return arguments.length?(b=a,y):b},y.y=function(a){return arguments.length?(w=j=a,y):j},y.y0=function(a){return arguments.length?(w=a,y):w},y.y1=function(a){return arguments.length?(j=a,y):j},y.defined=function(a){return arguments.length?(d=a,y):d},y.interpolate=function(a){return arguments.length?(q="function"==typeof a?v=a:(v=gS.get(a)||dD).key,z=v.reverse||v,h=v.closed?"M":"L",y):q},y.tension=function(a){return arguments.length?(m=a,y):m},y}function gD(a){return a.radius}function hg(a){return[a.x,a.y]}function jy(a){return function(){var b=a.apply(this,arguments),d=b[0],c=b[1]+jW;return[d*Math.cos(c),d*Math.sin(c)]}}function cW(){return 64}function eA(){return"circle"}function ff(b){var a=Math.sqrt(b/eZ);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function bh(b,a){return gY(b,gA),b.id=a,b}function fU(f,b,d,c){var a=f.id;return iP(f,"function"==typeof d?function(j,g,h){j.__transition__[a].tween.set(b,c(d.call(j,j.__data__,g,h)))}:(d=c(d),function(g){g.__transition__[a].tween.set(b,d)}))}function d9(a){return null==a&&(a=""),function(){this.textContent=a}}function fx(j,d,g,f){var c=j.__transition__||(j.__transition__={active:0,count:0}),h=c[g];if(!h){var b=f.time;h=c[g]={tween:new hQ(),time:b,ease:f.ease,delay:f.delay,duration:f.duration},++c.count,c1.timer(function(a){function A(p){return c.active>g?B():(c.active=g,h.event&&h.event.start.call(j,o,d),h.tween.forEach(function(u,s){(s=s.call(j,o,d))&&z.push(s)}),c1.timer(function(){return m.c=y(p||1)?i8:y,1},0,b),void 0)}function y(v){if(c.active!==g){return B()}for(var s=v/t,p=w(s),C=z.length;C>0;){z[--C].call(j,p)}return s>=1?(h.event&&h.event.end.call(j,o,d),B()):void 0}function B(){return --c.count?delete c[g]:delete j.__transition__,1}var o=j.__data__,w=h.ease,q=h.delay,t=h.duration,m=iC,z=[];return m.t=q+b,a>=q?A(a-q):(m.c=A,void 0)},0,b)}}function jN(b,a){b.attr("transform",function(c){return"translate("+a(c)+",0)"})}function aB(b,a){b.attr("transform",function(c){return"translate(0,"+a(c)+")"})}function gf(a){return a.toISOString()}function cK(f,b,d){function c(g){return f(g)}function a(o,m){var j=o[1]-o[0],g=j/m,h=c1.bisect(fv,g);return h==fv.length?[b.year,cO(o.map(function(p){return p/31536000000}),m)[2]]:h?b[g/fv[h-1]<fv[h]/g?h-1:h]:[f9,cO(o,m)[2]]}return c.invert=function(g){return i4(f.invert(g))},c.domain=function(g){return arguments.length?(f.domain(g),c):f.domain().map(i4)},c.nice=function(q,j){function m(o){return !isNaN(o)&&!q.range(o,i4(+o+1),j).length}var h=c.domain(),p=eE(h),g=null==q?a(p,10):"number"==typeof q&&a(p,q);return g&&(q=g[0],j=g[1]),c.domain(fY(h,j>1?{floor:function(o){for(;m(o=q.floor(o));){o=i4(o-1)}return o},ceil:function(o){for(;m(o=q.ceil(o));){o=i4(+o+1)}return o}}:q))},c.ticks=function(m,h){var j=eE(c.domain()),g=null==m?a(j,10):"number"==typeof m?a(j,m):!m.range&&[{range:m},h];return g&&(m=g[0],h=g[1]),m.range(j[0],i4(+j[1]+1),1>h?1:h)},c.tickFormat=function(){return d},c.copy=function(){return cK(f.copy(),b,d)},aF(c,f)}function i4(a){return new Date(a)}function cb(a){return JSON.parse(a.responseText)}function dI(b){var a=dm.createRange();return a.selectNode(dm.body),a.createContextualFragment(b.responseText)}var c1={version:"3.4.3"};Date.now||(Date.now=function(){return +new Date()});var dT=[].slice,bW=function(a){return dT.call(a)},dm=document,id=dm.documentElement,j8=window;try{bW(id.childNodes)[0].nodeType}catch(hC){bW=function(c){for(var a=c.length,b=new Array(a);a--;){b[a]=c[a]}return b}}try{dm.createElement("div").style.setProperty("opacity",0,"")}catch(fC){var ef=j8.Element.prototype,bV=ef.setAttribute,hk=ef.setAttributeNS,cN=j8.CSSStyleDeclaration.prototype,bE=cN.setProperty;ef.setAttribute=function(b,a){bV.call(this,b,a+"")},ef.setAttributeNS=function(c,a,b){hk.call(this,c,a,b+"")},cN.setProperty=function(c,a,b){bE.call(this,c,a+"",b)}}c1.ascending=function(b,a){return a>b?-1:b>a?1:b>=a?0:0/0},c1.descending=function(b,a){return b>a?-1:a>b?1:a>=b?0:0/0},c1.min=function(g,c){var f,d,a=-1,b=g.length;if(1===arguments.length){for(;++a<b&&!(null!=(f=g[a])&&f>=f);){f=void 0}for(;++a<b;){null!=(d=g[a])&&f>d&&(f=d)}}else{for(;++a<b&&!(null!=(f=c.call(g,g[a],a))&&f>=f);){f=void 0}for(;++a<b;){null!=(d=c.call(g,g[a],a))&&f>d&&(f=d)}}return f},c1.max=function(g,c){var f,d,a=-1,b=g.length;if(1===arguments.length){for(;++a<b&&!(null!=(f=g[a])&&f>=f);){f=void 0}for(;++a<b;){null!=(d=g[a])&&d>f&&(f=d)}}else{for(;++a<b&&!(null!=(f=c.call(g,g[a],a))&&f>=f);){f=void 0}for(;++a<b;){null!=(d=c.call(g,g[a],a))&&d>f&&(f=d)}}return f},c1.extent=function(h,c){var f,d,a,b=-1,g=h.length;if(1===arguments.length){for(;++b<g&&!(null!=(f=a=h[b])&&f>=f);){f=a=void 0}for(;++b<g;){null!=(d=h[b])&&(f>d&&(f=d),d>a&&(a=d))}}else{for(;++b<g&&!(null!=(f=a=c.call(h,h[b],b))&&f>=f);){f=void 0}for(;++b<g;){null!=(d=c.call(h,h[b],b))&&(f>d&&(f=d),d>a&&(a=d))}}return[f,a]},c1.sum=function(g,c){var f,d=0,a=g.length,b=-1;if(1===arguments.length){for(;++b<a;){isNaN(f=+g[b])||(d+=f)}}else{for(;++b<a;){isNaN(f=+c.call(g,g[b],b))||(d+=f)}}return d},c1.mean=function(f,h){var g,c=f.length,d=0,j=-1,b=0;if(1===arguments.length){for(;++j<c;){h1(g=f[j])&&(d+=(g-d)/++b)}}else{for(;++j<c;){h1(g=h.call(f,f[j],j))&&(d+=(g-d)/++b)}}return b?d:void 0},c1.quantile=function(g,c){var f=(g.length-1)*c+1,d=Math.floor(f),a=+g[d-1],b=f-d;return b?a+b*(g[d]-a):a},c1.median=function(a,b){return arguments.length>1&&(a=a.map(b)),a=a.filter(h1),a.length?c1.quantile(a.sort(c1.ascending),0.5):void 0},c1.bisector=function(a){return{left:function(d,g,f,b){for(arguments.length<3&&(f=0),arguments.length<4&&(b=d.length);b>f;){var c=f+b>>>1;a.call(d,d[c],c)<g?f=c+1:b=c}return f},right:function(d,g,f,b){for(arguments.length<3&&(f=0),arguments.length<4&&(b=d.length);b>f;){var c=f+b>>>1;g<a.call(d,d[c],c)?b=c:f=c+1}return f}}};var fX=c1.bisector(function(a){return a});c1.bisectLeft=fX.left,c1.bisect=c1.bisectRight=fX.right,c1.shuffle=function(d){for(var a,c,b=d.length;b;){c=0|Math.random()*b--,a=d[b],d[b]=d[c],d[c]=a}return d},c1.permute=function(d,a){for(var c=a.length,b=new Array(c);c--;){b[c]=d[a[c]]}return b},c1.pairs=function(g){for(var c,f=0,d=g.length-1,a=g[0],b=new Array(0>d?0:d);d>f;){b[f]=[c=a,a=g[++f]]}return b},c1.zip=function(){if(!(a=arguments.length)){return[]}for(var g=-1,d=c1.min(arguments,hT),c=new Array(d);++g<d;){for(var a,b=-1,f=c[g]=new Array(a);++b<a;){f[b]=arguments[b][g]}}return c},c1.transpose=function(a){return c1.zip.apply(c1,a)},c1.keys=function(c){var a=[];for(var b in c){a.push(b)}return a},c1.values=function(c){var a=[];for(var b in c){a.push(c[b])}return a},c1.entries=function(c){var a=[];for(var b in c){a.push({key:b,value:c[b]})}return a},c1.merge=function(h){for(var c,f,d,a=h.length,b=-1,g=0;++b<a;){g+=h[b].length}for(f=new Array(g);--a>=0;){for(d=h[a],c=d.length;--c>=0;){f[--g]=d[c]}}return f};var dL=Math.abs;c1.range=function(j,f,g){if(arguments.length<3&&(g=1,arguments.length<2&&(f=j,j=0)),1/0===(f-j)/g){throw new Error("infinite range")}var c,d=[],h=il(dL(g)),b=-1;if(j*=h,f*=h,g*=h,0>g){for(;(c=j+g*++b)>f;){d.push(c/h)}}else{for(;(c=j+g*++b)<f;){d.push(c/h)}}return d},c1.map=function(c){var a=new hQ();if(c instanceof hQ){c.forEach(function(f,d){a.set(f,d)})}else{for(var b in c){a.set(b,c[b])}}return a},hW(hQ,{has:ib,get:function(a){return this[jQ+a]},set:function(b,a){return this[jQ+b]=a},remove:h0,keys:iy,values:function(){var a=[];return this.forEach(function(b,c){a.push(c)}),a},entries:function(){var a=[];return this.forEach(function(b,c){a.push({key:b,value:c})}),a},size:iq,empty:hU,forEach:function(b){for(var a in this){a.charCodeAt(0)===iv&&b.call(this,a.substring(1),this[a])}}});var jQ="\x00",iv=jQ.charCodeAt(0);c1.nest=function(){function j(B,z,y){if(y>=h.length){return f?f.call(c,z):g?z.sort(g):z}for(var C,o,u,q,r=-1,m=z.length,A=h[y++],w=new hQ();++r<m;){(q=w.get(C=A(o=z[r])))?q.push(o):w.set(C,[o])}return B?(o=B(),u=function(p,a){o.set(p,j(B,a,y))}):(o={},u=function(p,a){o[p]=j(B,a,y)}),w.forEach(u),o}function d(p,o){if(o>=h.length){return p}var m=[],a=b[o++];return p.forEach(function(r,q){m.push({key:r,values:d(q,o)})}),a?m.sort(function(r,q){return a(r.key,q.key)}):m}var g,f,c={},h=[],b=[];return c.map=function(a,m){return j(m,a,0)},c.entries=function(a){return d(j(c1.map,a,0),0)},c.key=function(a){return h.push(a),c},c.sortKeys=function(a){return b[h.length-1]=a,c},c.sortValues=function(a){return g=a,c},c.rollup=function(a){return f=a,c},c},c1.set=function(d){var a=new h5();if(d){for(var c=0,b=d.length;b>c;++c){a.add(d[c])}}return a},hW(h5,{has:ib,add:function(a){return this[jQ+a]=!0,a},remove:function(a){return a=jQ+a,a in this&&delete this[a]},values:iy,size:iq,empty:hU,forEach:function(b){for(var a in this){a.charCodeAt(0)===iv&&b.call(this,a.substring(1))}}}),c1.behavior={},c1.rebind=function(f,b){for(var d,c=1,a=arguments.length;++c<a;){f[d=arguments[c]]=ij(f,b,b[d])}return f};var cl=["webkit","ms","moz","Moz","o","O"];c1.dispatch=function(){for(var c=new hZ(),a=-1,b=arguments.length;++a<b;){c[arguments[a]]=hO(c)}return c},hZ.prototype.on=function(d,a){var c=d.indexOf("."),b="";if(c>=0&&(b=d.substring(c+1),d=d.substring(0,c)),d){return arguments.length<2?this[d].on(b):this[d].on(b,a)}if(2===arguments.length){if(null==a){for(d in this){this.hasOwnProperty(d)&&this[d].on(b,null)}}return this}},c1.event=null,c1.requote=function(a){return a.replace(eV,"\\$&")};var eV=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,gY={}.__proto__?function(b,a){b.__proto__=a}:function(c,a){for(var b in a){c[b]=a[b]}},gj=function(b,a){return a.querySelector(b)},gG=function(b,a){return a.querySelectorAll(b)},dq=id[ig(id,"matchesSelector")],bg=function(b,a){return dq.call(b,a)};"function"==typeof Sizzle&&(gj=function(b,a){return Sizzle(b,a)[0]||null},gG=function(b,a){return Sizzle.uniqueSort(Sizzle(b,a))},bg=Sizzle.matchesSelector),c1.selection=function(){return az};var hF=c1.selection.prototype=[];hF.select=function(f){var q,h,b,p,g=[];f=iY(f);for(var d=-1,m=this.length;++d<m;){g.push(q=[]),q.parentNode=(b=this[d]).parentNode;for(var j=-1,v=b.length;++j<v;){(p=b[j])?(q.push(h=f.call(p,p.__data__,j,d)),h&&"__data__" in p&&(h.__data__=p.__data__)):q.push(null)}}return hM(g)},hF.selectAll=function(f){var q,h,b=[];f=iz(f);for(var p=-1,g=this.length;++p<g;){for(var d=this[p],m=-1,j=d.length;++m<j;){(h=d[m])&&(b.push(q=bW(f.call(h,h.__data__,m,p))),q.parentNode=h)}}return hM(b)};var eD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};c1.ns={prefix:eD,qualify:function(c){var a=c.indexOf(":"),b=c;return a>=0&&(b=c.substring(0,a),c=c.substring(a+1)),eD.hasOwnProperty(b)?{space:eD[b],local:c}:c}},hF.attr=function(c,a){if(arguments.length<2){if("string"==typeof c){var b=this.node();return c=c1.ns.qualify(c),c.local?b.getAttributeNS(c.space,c.local):b.getAttribute(c)}for(a in c){this.each(ix(a,c[a]))}return this}return this.each(ix(c,a))},hF.classed=function(f,b){if(arguments.length<2){if("string"==typeof f){var d=this.node(),c=(f=h6(f)).length,a=-1;if(b=d.classList){for(;++a<c;){if(!b.contains(f[a])){return !1}}}else{for(b=d.getAttribute("class");++a<c;){if(!iO(f[a]).test(b)){return !1}}}return !0}for(b in f){this.each(jd(b,f[b]))}return this}return this.each(jd(f,b))},hF.style=function(d,a,c){var b=arguments.length;if(3>b){if("string"!=typeof d){2>b&&(a="");for(c in d){this.each(jj(c,d[c],a))}return this}if(2>b){return j8.getComputedStyle(this.node(),null).getPropertyValue(d)}c=""}return this.each(jj(d,a,c))},hF.property=function(b,a){if(arguments.length<2){if("string"==typeof b){return this.node()[b]}for(a in b){this.each(iV(a,b[a]))}return this}return this.each(iV(b,a))},hF.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},hF.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},hF.append=function(a){return a=iZ(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},hF.insert=function(b,a){return b=iZ(b),a=iY(a),this.select(function(){return this.insertBefore(b.apply(this,arguments),a.apply(this,arguments)||null)})},hF.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})},hF.data=function(f,q){function j(w,E){var c,A,t,I=w.length,D=E.length,B=Math.min(I,D),C=new Array(D),s=new Array(D),J=new Array(I);if(q){var F,z=new hQ(),G=new hQ(),H=[];for(c=-1;++c<I;){F=q.call(A=w[c],A.__data__,c),z.has(F)?J[c]=A:z.set(F,A),H.push(F)}for(c=-1;++c<D;){F=q.call(E,t=E[c],c),(A=z.get(F))?(C[c]=A,A.__data__=t):G.has(F)||(s[c]=hJ(t)),G.set(F,t),z.remove(F)}for(c=-1;++c<I;){z.has(H[c])&&(J[c]=w[c])}}else{for(c=-1;++c<B;){A=w[c],t=E[c],A?(A.__data__=t,C[c]=A):s[c]=hJ(t)}for(;D>c;++c){s[c]=hJ(E[c])}for(;I>c;++c){J[c]=w[c]}}s.update=C,s.parentNode=C.parentNode=J.parentNode=w.parentNode,m.push(s),u.push(C),g.push(J)}var b,h,d=-1,p=this.length;if(!arguments.length){for(f=new Array(p=(b=this[0]).length);++d<p;){(h=b[d])&&(f[d]=h.__data__)}return f}var m=jf([]),u=hM([]),g=hM([]);if("function"==typeof f){for(;++d<p;){j(b=this[d],f.call(b,b.parentNode.__data__,d))}}else{for(;++d<p;){j(b=this[d],f)}}return u.enter=function(){return m},u.exit=function(){return g},u},hF.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},hF.filter=function(f){var q,h,b,p=[];"function"!=typeof f&&(f=hX(f));for(var g=0,d=this.length;d>g;g++){p.push(q=[]),q.parentNode=(h=this[g]).parentNode;for(var m=0,j=h.length;j>m;m++){(b=h[m])&&f.call(b,b.__data__,m,g)&&q.push(b)}}return hM(p)},hF.order=function(){for(var g=-1,c=this.length;++g<c;){for(var f,d=this[g],a=d.length-1,b=d[a];--a>=0;){(f=d[a])&&(b&&b!==f.nextSibling&&b.parentNode.insertBefore(f,b),b=f)}}return this},hF.sort=function(c){c=iM.apply(this,arguments);for(var a=-1,b=this.length;++a<b;){this[a].sort(c)}return this.order()},hF.each=function(a){return iP(this,function(b,d,c){a.call(b,b.__data__,d,c)})},hF.call=function(b){var a=bW(arguments);return b.apply(a[0]=this,a),this},hF.empty=function(){return !this.node()},hF.node=function(){for(var g=0,c=this.length;c>g;g++){for(var f=this[g],d=0,a=f.length;a>d;d++){var b=f[d];if(b){return b}}}return null},hF.size=function(){var a=0;return this.each(function(){++a}),a};var j7=[];c1.selection.enter=jf,c1.selection.enter.prototype=j7,j7.append=hF.append,j7.empty=hF.empty,j7.node=hF.node,j7.call=hF.call,j7.size=hF.size,j7.select=function(f){for(var v,j,b,q,h,d=[],p=-1,m=this.length;++p<m;){b=(q=this[p]).update,d.push(v=[]),v.parentNode=q.parentNode;for(var w=-1,g=q.length;++w<g;){(h=q[w])?(v.push(b[w]=j=f.call(q.parentNode,h.__data__,w,p)),j.__data__=h.__data__):v.push(null)}}return hM(d)},j7.insert=function(b,a){return arguments.length<2&&(a=iS(this)),hF.insert.call(this,b,a)},hF.transition=function(){for(var f,q,h=e4||++hb,b=[],p=aS||{time:Date.now(),ease:jT,delay:0,duration:250},g=-1,d=this.length;++g<d;){b.push(f=[]);for(var m=this[g],j=-1,v=m.length;++j<v;){(q=m[j])&&fx(q,j,h,p),f.push(q)}}return bh(b,h)},hF.interrupt=function(){return this.each(iL)},c1.select=function(b){var a=["string"==typeof b?gj(b,dm):b];return a.parentNode=id,hM([a])},c1.selectAll=function(b){var a=bW("string"==typeof b?gG(b,dm):b);return a.parentNode=id,hM([a])};var az=c1.select(id);hF.on=function(d,a,c){var b=arguments.length;if(3>b){if("string"!=typeof d){2>b&&(a=!1);for(c in d){this.each(h8(c,d[c],a))}return this}if(2>b){return(b=this.node()["__on"+d])&&b._}c=!1}return this.each(h8(d,a,c))};var g2=c1.map({mouseenter:"mouseover",mouseleave:"mouseout"});g2.forEach(function(a){"on"+a in dm&&g2.remove(a)});var aE="onselectstart" in dm?null:ig(id.style,"userSelect"),jg=0;c1.mouse=function(a){return iE(a,h3())};var aV=/WebKit/.test(j8.navigator.userAgent)?-1:0;c1.touches=function(b,a){return arguments.length<2&&(a=h3().touches),a?bW(a).map(function(c){var d=iE(b,c);return d.identifier=c.identifier,d}):[]},c1.behavior.drag=function(){function m(){this.on("mousedown.drag",j).on("touchstart.drag",b)}function f(){return c1.event.changedTouches[0].identifier}function h(o,a){return c1.touches(o).filter(function(p){return p.identifier===a})[0]}function g(q,a,p,o){return function(){function t(){var y=a(w,A),v=y[0]-G[0],s=y[1]-G[1];C|=v|s,G=y,B({type:"drag",x:y[0]+D[0],y:y[1]+D[1],dx:v,dy:s})}function F(){u.on(p+"."+r,null).on(o+"."+r,null),E(C&&c1.event.target===z),B({type:"dragend"})}var D,H=this,w=H.parentNode,B=c.of(H,arguments),z=c1.event.target,A=q(),r=null==A?"drag":"drag-"+A,G=a(w,A),C=0,u=c1.select(j8).on(p+"."+r,t).on(o+"."+r,F),E=iT();d?(D=d.apply(H,arguments),D=[D.x-G[0],D.y-G[1]]):D=[0,0],B({type:"dragstart"})}}var c=hL(m,"drag","dragstart","dragend"),d=null,j=g(ih,c1.mouse,"mousemove","mouseup"),b=g(f,h,"touchmove","touchend");return m.origin=function(a){return arguments.length?(d=a,m):d},c1.rebind(m,c,"on")};var eZ=Math.PI,fj=2*eZ,a4=eZ/2,cD=0.000001,bN=cD*cD,gK=eZ/180,hp=180/eZ,jL=Math.SQRT2,c4=2,eH=4;c1.interpolateZoom=function(D,w){function K(f){var a=f*b;if(E){var c=jk(j),d=G/(c4*H)*(c*iG(jL*a+j)-jS(j));return[A+d*z,q+d*F,G*c/jk(jL*a+j)]}return[A+f*z,q+f*F,G*Math.exp(jL*a)]}var A=D[0],q=D[1],G=D[2],C=w[0],N=w[1],M=w[2],z=C-A,F=N-q,J=z*z+F*F,H=Math.sqrt(J),I=(M*M-G*G+eH*J)/(2*G*c4*H),B=(M*M-G*G-eH*J)/(2*M*c4*H),j=Math.log(Math.sqrt(I*I+1)-I),L=Math.log(Math.sqrt(B*B+1)-B),E=L-j,b=(E||Math.log(M/G))/jL;return K.duration=1000*b,K},c1.behavior.zoom=function(){function U(a){a.on(Q,K).on(f1+".zoom",ac).on(O,Z).on("dblclick.zoom",aa).on(y,W)}function J(a){return[(a[0]-d.x)/d.k,(a[1]-d.y)/d.k]}function ae(a){return[a[0]*d.k+d.x,a[1]*d.k+d.y]}function P(a){d.k=Math.max(I[0],Math.min(I[1],a))}function H(b,a){a=ae(a),d.x+=b[0]-a[0],d.y+=b[1]-a[1]}function Y(){at&&at.domain(q.range().map(function(a){return(a-d.x)/d.k}).map(q.invert)),F&&F.domain(ao.range().map(function(a){return(a-d.y)/d.k}).map(ao.invert))}function T(a){a({type:"zoomstart"})}function ar(a){Y(),a({type:"zoom",scale:d.k,translate:[d.x,d.y]})}function ai(a){a({type:"zoomend"})}function K(){function c(){h=1,H(c1.mouse(a),o),ar(m)}function u(){t.on(O,j8===a?Z:null).on(j,null),b(h&&c1.event.target===v),ai(m)}var a=this,m=B.of(a,arguments),v=c1.event.target,h=0,t=c1.select(j8).on(O,c).on(j,u),o=J(c1.mouse(a)),b=iT();iL.call(a),T(m)}function W(){function c(){var b=c1.touches(u);return t=d.k,b.forEach(function(f){f.identifier in au&&(au[f.identifier]=J(f))}),b}function A(){for(var be=c1.event.changedTouches,ba=0,p=be.length;p>ba;++ba){au[be[ba].identifier]=null}var b=c(),bc=Date.now();if(1===b.length){if(500>bc-D){var bi=b[0],m=au[bi.identifier];P(2*d.k),H(bi,m),ip(),ar(a)}D=bc}else{if(b.length>1){var bi=b[0],M=b[1],v=bi[0]-M[0],w=bi[1]-M[1];o=v*v+w*w}}}function s(){for(var g,M,v,m,b=c1.touches(u),w=0,ba=b.length;ba>w;++w,m=null){if(v=b[w],m=au[v.identifier]){if(M){break}g=v,M=m}}if(m){var h=(h=v[0]-g[0])*h+(h=v[1]-g[1])*h,p=o&&Math.sqrt(h/o);g=[(g[0]+v[0])/2,(g[1]+v[1])/2],M=[(M[0]+m[0])/2,(M[1]+m[1])/2],P(p*t)}D=null,H(g,M),ar(a)}function z(){if(c1.event.touches.length){for(var f=c1.event.changedTouches,h=0,g=f.length;g>h;++h){delete au[f[h].identifier]}for(var b in au){return void c()}}E.on(C,null).on(S,null),N.on(Q,K).on(y,W),r(),ai(a)}var t,u=this,a=B.of(u,arguments),au={},o=0,L=c1.event.changedTouches[0].identifier,C="touchmove.zoom-"+L,S="touchend.zoom-"+L,E=c1.select(j8).on(C,s).on(S,z),N=c1.select(u).on(Q,null).on(y,A),r=iT();iL.call(u),A(),T(a)}function ac(){var b=B.of(this,arguments);V?clearTimeout(V):(iL.call(this),T(b)),V=setTimeout(function(){V=null,ai(b)},50),ip();var a=G||c1.mouse(this);R||(R=J(a)),P(Math.pow(2,0.002*fn())*d.k),H(a,R),ar(b)}function Z(){R=null}function aa(){var f=B.of(this,arguments),c=c1.mouse(this),a=J(c),b=Math.log(d.k)/Math.LN2;T(f),P(Math.pow(2,c1.event.shiftKey?Math.ceil(b)-1:Math.floor(b)+1)),H(c,a),ar(f),ai(f)}var R,G,V,D,q,at,ao,F,d={x:0,y:0,k:1},X=[960,500],I=bv,Q="mousedown.zoom",O="mousemove.zoom",j="mouseup.zoom",y="touchstart.zoom",B=hL(U,"zoomstart","zoom","zoomend");return U.event=function(a){a.each(function(){var c=B.of(this,arguments),b=d;e4?c1.select(this).transition().each("start.zoom",function(){d=this.__chart__||{x:0,y:0,k:1},T(c)}).tween("zoom:zoom",function(){var m=X[0],h=X[1],f=m/2,g=h/2,p=c1.interpolateZoom([(f-d.x)/d.k,(g-d.y)/d.k,m/d.k],[(f-b.x)/b.k,(g-b.y)/b.k,m/b.k]);return function(o){var s=p(o),u=m/s[2];this.__chart__=d={x:f-s[0]*u,y:g-s[1]*u,k:u},ar(c)}}).each("end.zoom",function(){ai(c)}):(this.__chart__=d,T(c),ar(c),ai(c))})},U.translate=function(a){return arguments.length?(d={x:+a[0],y:+a[1],k:d.k},Y(),U):[d.x,d.y]},U.scale=function(a){return arguments.length?(d={x:d.x,y:d.y,k:+a},Y(),U):d.k},U.scaleExtent=function(a){return arguments.length?(I=null==a?bv:[+a[0],+a[1]],U):I},U.center=function(a){return arguments.length?(G=a&&[+a[0],+a[1]],U):G},U.size=function(a){return arguments.length?(X=a&&[+a[0],+a[1]],U):X},U.x=function(a){return arguments.length?(at=a,q=a.copy(),d={x:0,y:0,k:1},U):at},U.y=function(a){return arguments.length?(F=a,ao=a.copy(),d={x:0,y:0,k:1},U):F},c1.rebind(U,B,"on")};var fn,bv=[0,1/0],f1="onwheel" in dm?(fn=function(){return -c1.event.deltaY*(c1.event.deltaMode?120:1)},"wheel"):"onmousewheel" in dm?(fn=function(){return c1.event.wheelDelta},"mousewheel"):(fn=function(){return -c1.event.detail},"MozMousePixelScroll");i7.prototype.toString=function(){return this.rgb()+""},c1.hsl=function(c,a,b){return 1===arguments.length?c instanceof iR?i2(c.h,c.s,c.l):hv(""+c,em,i2):i2(+c,+a,+b)};var ek=iR.prototype=new i7();ek.brighter=function(a){return a=Math.pow(0.7,arguments.length?a:1),i2(this.h,this.s,this.l/a)},ek.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),i2(this.h,this.s,a*this.l)},ek.rgb=function(){return dV(this.h,this.s,this.l)},c1.hcl=function(c,a,b){return 1===arguments.length?c instanceof g4?bJ(c.h,c.c,c.l):c instanceof fL?jA(c.l,c.a,c.b):jA((c=jV((c=c1.rgb(c)).r,c.g,c.b)).l,c.a,c.b):bJ(+c,+a,+b)};var fF=g4.prototype=new i7();fF.brighter=function(a){return bJ(this.h,this.c,Math.min(100,this.l+jZ*(arguments.length?a:1)))},fF.darker=function(a){return bJ(this.h,this.c,Math.max(0,this.l-jZ*(arguments.length?a:1)))},fF.rgb=function(){return cz(this.h,this.c,this.l).rgb()},c1.lab=function(c,a,b){return 1===arguments.length?c instanceof fL?bm(c.l,c.a,c.b):c instanceof g4?cz(c.l,c.c,c.h):jV((c=c1.rgb(c)).r,c.g,c.b):bm(+c,+a,+b)};var jZ=18,aM=0.95047,gn=1,cR=1.08883,jx=fL.prototype=new i7();jx.brighter=function(a){return bm(Math.min(100,this.l+jZ*(arguments.length?a:1)),this.a,this.b)},jx.darker=function(a){return bm(Math.max(0,this.l-jZ*(arguments.length?a:1)),this.a,this.b)},jx.rgb=function(){return dA(this.l,this.a,this.b)},c1.rgb=function(c,a,b){return 1===arguments.length?c instanceof db?gq(c.r,c.g,c.b):hv(""+c,gq,dV):gq(~~c,~~a,~~b)};var cv=db.prototype=new i7();cv.brighter=function(f){f=Math.pow(0.7,arguments.length?f:1);var b=this.r,d=this.g,c=this.b,a=30;return b||d||c?(b&&a>b&&(b=a),d&&a>d&&(d=a),c&&a>c&&(c=a),gq(Math.min(255,~~(b/f)),Math.min(255,~~(d/f)),Math.min(255,~~(c/f)))):gq(a,a,a)},cv.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),gq(~~(a*this.r),~~(a*this.g),~~(a*this.b))},cv.hsl=function(){return em(this.r,this.g,this.b)},cv.toString=function(){return"#"+a0(this.r)+a0(this.g)+a0(this.b)};var dS=c1.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});dS.forEach(function(b,a){dS.set(b,gM(a))}),c1.functor=aj,c1.xhr=aI(iJ),c1.dsv=function(f,q){function h(s,c,a){arguments.length<3&&(a=c,c=null);var r=eO(s,q,null==c?b:p(c),a);return r.row=function(o){return arguments.length?r.response(null==(c=o)?b:p(o)):c},r}function b(a){return h.parse(a.responseText)}function p(a){return function(c){return h.parse(c.responseText,a)}}function g(a){return a.map(d).join(f)}function d(a){return m.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var m=new RegExp('["'+f+"\n]"),j=f.charCodeAt(0);return h.parse=function(o,a){var c;return h.parseRows(o,function(t,s){if(c){return c(t,s-1)}var r=new Function("d","return {"+t.map(function(v,u){return JSON.stringify(v)+": d["+u+"]"}).join(",")+"}");c=a?function(v,u){return a(r(v),u)}:r})},h.parseRows=function(w,F){function C(){if(y>=G){return v}if(E){return E=!1,z}var s=y;if(34===w.charCodeAt(s)){for(var H=s;H++<G;){if(34===w.charCodeAt(H)){if(34!==w.charCodeAt(H+1)){break}++H}}y=H+2;var u=w.charCodeAt(H+1);return 13===u?(E=!0,10===w.charCodeAt(H+2)&&++y):10===u&&(E=!0),w.substring(s+1,H).replace(/""/g,'"')}for(;G>y;){var u=w.charCodeAt(y++),o=1;if(10===u){E=!0}else{if(13===u){E=!0,10===w.charCodeAt(y)&&(++y,++o)}else{if(u!==j){continue}}}return w.substring(s,y-o)}return w.substring(s)}for(var c,E,z={},v={},D=[],G=w.length,y=0,B=0;(c=C())!==v;){for(var A=[];c!==z&&c!==v;){A.push(c),c=C()}(!F||(A=F(A,B++)))&&D.push(A)}return D},h.format=function(c){if(Array.isArray(c[0])){return h.formatRows(c)}var o=new h5(),a=[];return c.forEach(function(s){for(var r in s){o.has(r)||a.push(o.add(r))}}),[a.map(d).join(f)].concat(c.map(function(r){return a.map(function(s){return d(r[s])}).join(f)})).join("\n")},h.formatRows=function(a){return a.map(g).join("\n")},h},c1.csv=c1.dsv(",","text/csv"),c1.tsv=c1.dsv("\t","text/tab-separated-values");var c8,d8,b4,dy,iC,af=j8[ig(j8,"requestAnimationFrame")]||function(a){setTimeout(a,17)};c1.timer=function(g,c,f){var d=arguments.length;2>d&&(c=0),3>d&&(f=Date.now());var a=f+c,b={c:g,t:a,f:!1,n:null};d8?d8.n=b:c8=b,d8=b,b4||(dy=clearTimeout(dy),b4=1,af(aR))},c1.timer.flush=function(){cg(),bA()},c1.round=function(b,a){return a?Math.round(b*(a=Math.pow(10,a)))/a:Math.round(b)};var hK=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(g9);c1.formatPrefix=function(c,a){var b=0;return c&&(0>c&&(c*=-1),a&&(c=c1.round(c,gz(c,a))),b=1+Math.floor(1e-12+Math.log(c)/Math.LN10),b=Math.max(-24,Math.min(24,3*Math.floor((0>=b?b+1:b-1)/3)))),hK[8+b/3]};var fJ=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ed=c1.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(b,a){return b.toPrecision(a)},e:function(b,a){return b.toExponential(a)},f:function(b,a){return b.toFixed(a)},r:function(b,a){return(b=c1.round(b,gz(b,a))).toFixed(Math.max(0,Math.min(20,gz(b*(1+1e-15),a))))}}),bT=c1.time={},hj=Date;ew.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){cM.setUTCDate.apply(this._,arguments)},setDay:function(){cM.setUTCDay.apply(this._,arguments)},setFullYear:function(){cM.setUTCFullYear.apply(this._,arguments)},setHours:function(){cM.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){cM.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){cM.setUTCMinutes.apply(this._,arguments)},setMonth:function(){cM.setUTCMonth.apply(this._,arguments)},setSeconds:function(){cM.setUTCSeconds.apply(this._,arguments)},setTime:function(){cM.setTime.apply(this._,arguments)}};var cM=Date.prototype;bT.year=e8(function(a){return a=bT.day(a),a.setMonth(0,1),a},function(b,a){b.setFullYear(b.getFullYear()+a)},function(a){return a.getFullYear()}),bT.years=bT.year.range,bT.years.utc=bT.year.utc.range,bT.day=e8(function(b){var a=new hj(2000,0);return a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),a},function(b,a){b.setDate(b.getDate()+a)},function(a){return a.getDate()-1}),bT.days=bT.day.range,bT.days.utc=bT.day.utc.range,bT.dayOfYear=function(b){var a=bT.year(b);return Math.floor((b-a-60000*(b.getTimezoneOffset()-a.getTimezoneOffset()))/86400000)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(c,a){a=7-a;var b=bT[c]=e8(function(d){return(d=bT.day(d)).setDate(d.getDate()-(d.getDay()+a)%7),d},function(f,d){f.setDate(f.getDate()+7*Math.floor(d))},function(f){var d=bT.year(f).getDay();return Math.floor((bT.dayOfYear(f)+(d+a)%7)/7)-(d!==a)});bT[c+"s"]=b.range,bT[c+"s"].utc=b.utc.range,bT[c+"OfYear"]=function(f){var d=bT.year(f).getDay();return Math.floor((bT.dayOfYear(f)+(d+a)%7)/7)}}),bT.week=bT.sunday,bT.weeks=bT.sunday.range,bT.weeks.utc=bT.sunday.utc.range,bT.weekOfYear=bT.sundayOfYear;var bC={"-":"",_:" ",0:"0"},fW=/^\s*\d+/,dK=/^%/;c1.locale=function(a){return{numberFormat:jp(a),timeFormat:fQ(a)}};var jP=c1.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});c1.format=jP.numberFormat,c1.geo={},cL.prototype={s:0,t:0,add:function(a){bz(a,this.t,im),bz(im.s,this.s,this),this.s?this.t+=im.t:this.s=im.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var im=new cL();c1.geo.stream=function(b,a){b&&cj.hasOwnProperty(b.type)?cj[b.type](b,a):fV(b,a)};var cj={Feature:function(b,a){fV(b.geometry,a)},FeatureCollection:function(f,b){for(var d=f.features,c=-1,a=d.length;++c<a;){fV(d[c].geometry,b)}}},eU={Sphere:function(b,a){a.sphere()},Point:function(b,a){b=b.coordinates,a.point(b[0],b[1],b[2])},MultiPoint:function(f,b){for(var d=f.coordinates,c=-1,a=d.length;++c<a;){f=d[c],b.point(f[0],f[1],f[2])}},LineString:function(b,a){dJ(b.coordinates,a,0)},MultiLineString:function(f,b){for(var d=f.coordinates,c=-1,a=d.length;++c<a;){dJ(d[c],b,0)}},Polygon:function(b,a){jO(b.coordinates,a)},MultiPolygon:function(f,b){for(var d=f.coordinates,c=-1,a=d.length;++c<a;){jO(d[c],b)}},GeometryCollection:function(f,b){for(var d=f.geometries,c=-1,a=d.length;++c<a;){fV(d[c],b)}}};c1.geo.area=function(a){return gX=0,c1.geo.stream(a,gF),gX};var gX,gh=new cL(),gF={sphere:function(){gX+=4*eZ},point:ih,lineStart:ih,lineEnd:ih,polygonStart:function(){gh.reset(),gF.lineStart=ik},polygonEnd:function(){var a=2*gh;gX+=0>a?4*eZ+a:a,gF.lineStart=gF.lineEnd=gF.point=ih}};c1.geo.bounds=function(){function F(c,a){q.push(b=[H=c,J=c]),L>a&&(L=a),a>K&&(K=a)}function A(U,h){var a=cf([U*gK,h*gK]);if(G){var T=gW(G,a),g=[T[1],-T[0],0],f=gW(g,T);dn(f),f=a8(f);var p=U-D,V=p>0?1:-1,S=f[0]*hp*V,m=dL(p)>180;if(m^(S>V*D&&V*U>S)){var M=f[1]*hp;M>K&&(K=M)}else{if(S=(S+360)%360-180,m^(S>V*D&&V*U>S)){var M=-f[1]*hp;L>M&&(L=M)}else{L>h&&(L=h),h>K&&(K=h)}}m?D>U?Q(H,U)>Q(H,J)&&(J=U):Q(U,J)>Q(H,J)&&(H=U):J>=H?(H>U&&(H=U),U>J&&(J=U)):U>D?Q(H,U)>Q(H,J)&&(J=U):Q(U,J)>Q(H,J)&&(H=U)}else{F(U,h)}G=a,D=U}function N(){R.point=A}function C(){b[0]=H,b[1]=J,R.point=F,G=null}function z(d,c){if(G){var a=d-D;j+=dL(a)>180?a+(a>0?360:-360):a}else{w=d,O=c}gF.point(d,c),A(d,c)}function I(){gF.lineStart()}function E(){z(w,O),gF.lineEnd(),dL(j)>cD&&(H=-(J=180)),b[0]=H,b[1]=J,G=null}function Q(c,a){return(a-=c)<0?a+360:a}function P(c,a){return c[0]-a[0]}function B(c,a){return a[0]<=a[1]?a[0]<=c&&c<=a[1]:c<a[0]||a[1]<c}var H,L,J,K,D,w,O,G,j,q,b,R={point:F,lineStart:N,lineEnd:C,polygonStart:function(){R.point=z,R.lineStart=I,R.lineEnd=E,j=0,gF.polygonStart()},polygonEnd:function(){gF.polygonEnd(),R.point=F,R.lineStart=N,R.lineEnd=C,0>gh?(H=-(J=180),L=-(K=90)):j>cD?K=90:-cD>j&&(L=-90),b[0]=H,b[1]=J}};return function(s){K=J=-(H=L=1/0),q=[],c1.geo.stream(s,R);var d=q.length;if(d){q.sort(P);for(var h,f=1,a=q[0],c=[a];d>f;++f){h=q[f],B(h[0],a)||B(h[1],a)?(Q(a[0],h[1])>Q(a[0],a[1])&&(a[1]=h[1]),Q(h[0],a[1])>Q(a[0],a[1])&&(a[0]=h[0])):c.push(a=h)}for(var m,h,g=-1/0,d=c.length-1,f=0,a=c[d];d>=f;a=h,++f){h=c[f],(m=Q(a[1],h[0]))>g&&(g=m,H=h[0],J=a[1])}}return q=b=null,1/0===H||1/0===L?[[0/0,0/0],[0/0,0/0]]:[[H,L],[J,K]]}}(),c1.geo.centroid=function(f){dp=bd=hE=eC=j5=ax=g1=aD=jb=aT=eY=0,c1.geo.stream(f,fh);var b=jb,d=aT,c=eY,a=b*b+d*d+c*c;return bN>a&&(b=ax,d=g1,c=aD,cD>bd&&(b=hE,d=eC,c=j5),a=b*b+d*d+c*c,bN>a)?[0/0,0/0]:[Math.atan2(d,b)*hp,iF(c/Math.sqrt(a))*hp]};var dp,bd,hE,eC,j5,ax,g1,aD,jb,aT,eY,fh={sphere:ih,point:eB,lineStart:aq,lineEnd:g0,polygonStart:function(){fh.lineStart=aC},polygonEnd:function(){fh.lineStart=aq}},a2=aZ(i8,jG,eF,[-eZ,-eZ/2]),cB=1000000000;c1.geo.clipExtent=function(){var h,c,f,d,a,b,g={stream:function(j){return a&&(a.valid=!1),a=b(j),a.valid=!0,a},extent:function(j){return arguments.length?(b=fZ(h=+j[0][0],c=+j[0][1],f=+j[1][0],d=+j[1][1]),a&&(a.valid=!1,a=null),g):[[h,c],[f,d]]}};return g.extent([[0,0],[960,500]])},(c1.geo.conicEqualArea=function(){return fD(jU)}).raw=jU,c1.geo.albers=function(){return c1.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)},c1.geo.albersUsa=function(){function f(r){var a=r[0],c=r[1];return q=null,h(a,c),q||(b(a,c),q)||p(a,c),q}var q,h,b,p,g=c1.geo.albers(),d=c1.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),m=c1.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),j={point:function(c,a){q=[c,a]}};return f.invert=function(v){var c=g.scale(),s=g.translate(),o=(v[0]-s[0])/c,a=(v[1]-s[1])/c;return(a>=0.12&&0.234>a&&o>=-0.425&&-0.214>o?d:a>=0.166&&0.234>a&&o>=-0.214&&-0.115>o?m:g).invert(v)},f.stream=function(s){var a=g.stream(s),o=d.stream(s),c=m.stream(s);return{point:function(t,r){a.point(t,r),o.point(t,r),c.point(t,r)},sphere:function(){a.sphere(),o.sphere(),c.sphere()},lineStart:function(){a.lineStart(),o.lineStart(),c.lineStart()},lineEnd:function(){a.lineEnd(),o.lineEnd(),c.lineEnd()},polygonStart:function(){a.polygonStart(),o.polygonStart(),c.polygonStart()},polygonEnd:function(){a.polygonEnd(),o.polygonEnd(),c.polygonEnd()}}},f.precision=function(a){return arguments.length?(g.precision(a),d.precision(a),m.precision(a),f):g.precision()},f.scale=function(a){return arguments.length?(g.scale(a),d.scale(0.35*a),m.scale(a),f.translate(g.translate())):g.scale()},f.translate=function(c){if(!arguments.length){return g.translate()}var o=g.scale(),a=+c[0],r=+c[1];return h=g.translate(c).clipExtent([[a-0.455*o,r-0.238*o],[a+0.455*o,r+0.238*o]]).stream(j).point,b=d.translate([a-0.307*o,r+0.201*o]).clipExtent([[a-0.425*o+cD,r+0.12*o+cD],[a-0.214*o-cD,r+0.234*o-cD]]).stream(j).point,p=m.translate([a-0.205*o,r+0.212*o]).clipExtent([[a-0.214*o+cD,r+0.166*o+cD],[a-0.115*o-cD,r+0.234*o-cD]]).stream(j).point,f},f.scale(1070)};var bL,gJ,hn,jJ,c3,eG,fm={point:ih,lineStart:ih,lineEnd:ih,polygonStart:function(){gJ=0,fm.lineStart=aH},polygonEnd:function(){fm.lineStart=fm.lineEnd=fm.point=ih,bL+=dL(gJ/2)}},bp={point:gl,lineStart:ih,lineEnd:ih,polygonStart:ih,polygonEnd:ih},f0={point:cp,lineStart:dO,lineEnd:c6,polygonStart:function(){f0.lineStart=d1},polygonEnd:function(){f0.point=cp,f0.lineStart=dO,f0.lineEnd=c6}};c1.geo.path=function(){function m(a){return a&&("function"==typeof b&&d.pointRadius(+b.apply(this,arguments)),j&&j.valid||(j=c(d)),c1.geo.stream(a,j)),d.result()}function f(){return j=null,m}var h,g,c,d,j,b=4.5;return m.area=function(a){return bL=0,c1.geo.stream(a,c(fm)),bL},m.centroid=function(a){return hE=eC=j5=ax=g1=aD=jb=aT=eY=0,c1.geo.stream(a,c(f0)),eY?[jb/eY,aT/eY]:aD?[ax/aD,g1/aD]:j5?[hE/j5,eC/j5]:[0/0,0/0]},m.bounds=function(a){return c3=eG=-(hn=jJ=1/0),c1.geo.stream(a,c(bp)),[[hn,jJ],[c3,eG]]},m.projection=function(a){return arguments.length?(c=(h=a)?a.stream||iA(a):iJ,f()):h},m.context=function(a){return arguments.length?(d=null==(g=a)?new cP():new bZ(a),"function"!=typeof b&&d.pointRadius(b),f()):g},m.pointRadius=function(a){return arguments.length?(b="function"==typeof a?a:(d.pointRadius(+a),+a),m):b},m.projection(c1.geo.albersUsa()).context(null)},c1.geo.transform=function(a){return{stream:function(b){var d=new kd(b);for(var c in a){d[c]=a[c]}return d}}},kd.prototype={point:function(b,a){this.stream.point(b,a)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},c1.geo.projection=fH,c1.geo.projectionMutator=dX,(c1.geo.equirectangular=function(){return fH(g6)}).raw=g6.invert=g6,c1.geo.rotation=function(b){function a(c){return c=b(c[0]*gK,c[1]*gK),c[0]*=hp,c[1]*=hp,c}return b=bq(b[0]%360*gK,b[1]*gK,b.length>2?b[2]*gK:0),a.invert=function(c){return c=b.invert(c[0]*gK,c[1]*gK),c[0]*=hp,c[1]*=hp,c},a},cC.invert=g6,c1.geo.circle=function(){function f(){var j="function"==typeof c?c.apply(this,arguments):c,h=bq(-j[0]*gK,-j[1]*gK,0).invert,g=[];return d(null,null,1,{point:function(o,m){g.push(o=h(o,m)),o[0]*=hp,o[1]*=hp}}),{type:"Polygon",coordinates:[g]}}var b,d,c=[0,0],a=6;return f.origin=function(g){return arguments.length?(c=g,f):c},f.angle=function(g){return arguments.length?(d=hV((b=+g)*gK,a*gK),f):b},f.precision=function(g){return arguments.length?(d=hV(b*gK,(a=+g)*gK),f):a},f.angle(90)},c1.geo.distance=function(g,y){var p,b=(y[0]-g[0])*gK,w=g[1]*gK,j=y[1]*gK,d=Math.sin(b),v=Math.cos(b),q=Math.sin(w),z=Math.cos(w),h=Math.sin(j),m=Math.cos(j);return Math.atan2(Math.sqrt((p=m*d)*p+(p=z*h-q*m*v)*p),q*h+z*m*v)},c1.geo.graticule=function(){function D(){return{type:"MultiLineString",coordinates:w()}}function w(){return c1.range(Math.ceil(G/L)*L,q,L).map(H).concat(c1.range(Math.ceil(z/E)*E,M,E).map(I)).concat(c1.range(Math.ceil(A/B)*B,K,B).filter(function(a){return dL(a%L)>cD}).map(F)).concat(c1.range(Math.ceil(N/j)*j,C,j).filter(function(a){return dL(a%E)>cD}).map(J))}var K,A,q,G,C,N,M,z,F,J,H,I,B=10,j=B,L=90,E=360,b=2.5;return D.lines=function(){return w().map(function(a){return{type:"LineString",coordinates:a}})},D.outline=function(){return{type:"Polygon",coordinates:[H(G).concat(I(M).slice(1),H(q).reverse().slice(1),I(z).reverse().slice(1))]}},D.extent=function(a){return arguments.length?D.majorExtent(a).minorExtent(a):D.minorExtent()},D.majorExtent=function(a){return arguments.length?(G=+a[0][0],q=+a[1][0],z=+a[0][1],M=+a[1][1],G>q&&(a=G,G=q,q=a),z>M&&(a=z,z=M,M=a),D.precision(b)):[[G,z],[q,M]]},D.minorExtent=function(a){return arguments.length?(A=+a[0][0],K=+a[1][0],N=+a[0][1],C=+a[1][1],A>K&&(a=A,A=K,K=a),N>C&&(a=N,N=C,C=a),D.precision(b)):[[A,N],[K,C]]},D.step=function(a){return arguments.length?D.majorStep(a).minorStep(a):D.minorStep()},D.majorStep=function(a){return arguments.length?(L=+a[0],E=+a[1],D):[L,E]},D.minorStep=function(a){return arguments.length?(B=+a[0],j=+a[1],D):[B,j]},D.precision=function(a){return arguments.length?(b=+a,F=eL(N,C,90),J=gO(A,K,b),H=eL(z,M,90),I=gO(G,q,b),D):b},D.majorExtent([[-180,-90+cD],[180,90-cD]]).minorExtent([[-180,-80-cD],[180,80+cD]])},c1.geo.greatArc=function(){function f(){return{type:"LineString",coordinates:[b||c.apply(this,arguments),d||a.apply(this,arguments)]}}var b,d,c=f5,a=gw;return f.distance=function(){return c1.geo.distance(b||c.apply(this,arguments),d||a.apply(this,arguments))},f.source=function(g){return arguments.length?(c=g,b="function"==typeof g?null:g,f):c},f.target=function(g){return arguments.length?(a=g,d="function"==typeof g?null:g,f):a},f.precision=function(){return arguments.length?f:0},f},c1.geo.interpolate=function(b,a){return df(b[0]*gK,b[1]*gK,a[0]*gK,a[1]*gK)},c1.geo.length=function(a){return ej=0,c1.geo.stream(a,fE),ej};var ej,fE={sphere:ih,point:ih,lineStart:a3,lineEnd:ih,polygonStart:ih,polygonEnd:ih},jX=hx(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(c1.geo.azimuthalEqualArea=function(){return fH(jX)}).raw=jX;var aK=hx(function(b){var a=Math.acos(b);return a&&a/Math.sin(a)},iJ);(c1.geo.azimuthalEquidistant=function(){return fH(aK)}).raw=aK,(c1.geo.conicConformal=function(){return fD(ep)}).raw=ep,(c1.geo.conicEquidistant=function(){return fD(jY)}).raw=jY;var gm=hx(function(a){return 1/a},Math.atan);(c1.geo.gnomonic=function(){return fH(gm)}).raw=gm,ad.invert=function(b,a){return[b,2*Math.atan(Math.exp(a))-a4]},(c1.geo.mercator=function(){return gT(ad)}).raw=ad;var cQ=hx(function(){return 1},Math.asin);(c1.geo.orthographic=function(){return fH(cQ)}).raw=cQ;var jv=hx(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(c1.geo.stereographic=function(){return fH(jv)}).raw=jv,al.invert=function(b,a){return[-a,2*Math.atan(Math.exp(b))-a4]},(c1.geo.transverseMercator=function(){var c=gT(al),a=c.center,b=c.rotate;return c.center=function(d){return d?a([-d[1],d[0]]):(d=a(),[-d[1],d[0]])},c.rotate=function(d){return d?b([d[0],d[1],d.length>2?d[2]+90:90]):(d=b(),[d[0],d[1],d[2]-90])},c.rotate([0,0])}).raw=al,c1.geom={},c1.geom.hull=function(d){function a(m){if(m.length<3){return[]}var B,A=aj(c),q=aj(b),j=m.length,z=[],y=[];for(B=0;j>B;B++){z.push([+A.call(this,m[B],B),+q.call(this,m[B],B),B])}for(z.sort(e5),B=0;j>B;B++){y.push([z[B][0],-z[B][1]])}var C=eQ(z),p=eQ(y),w=p[0]===C[0],r=p[p.length-1]===C[C.length-1],v=[];for(B=C.length-1;B>=0;--B){v.push(m[z[C[B]][2]])}for(B=+w;B<p.length-r;++B){v.push(m[z[p[B]][2]])}return v}var c=iN,b=aL;return arguments.length?a(d):(a.x=function(f){return arguments.length?(c=f,a):c},a.y=function(f){return arguments.length?(b=f,a):b},a)},c1.geom.polygon=function(a){return gY(a,cq),a};var cq=c1.geom.polygon.prototype=[];cq.area=function(){for(var f,b=-1,d=this.length,c=this[d-1],a=0;++b<d;){f=c,c=this[b],a+=f[1]*c[0]-f[0]*c[1]}return 0.5*a},cq.centroid=function(m){var f,h,g=-1,c=this.length,d=0,j=0,b=this[c-1];for(arguments.length||(m=-1/(6*this.area()));++g<c;){f=b,b=this[g],h=f[0]*b[1]-b[0]*f[1],d+=(f[0]+b[0])*h,j+=(f[1]+b[1])*h}return[d*m,j*m]},cq.clip=function(f){for(var v,j,b,q,h,d,p=bD(f),m=-1,w=this.length-bD(this),g=this[w-1];++m<w;){for(v=f.slice(),f.length=0,q=this[m],h=v[(b=v.length-p)-1],j=-1;++j<b;){d=v[j],aU(d,g,q)?(aU(h,g,q)||f.push(ck(h,d,g,q)),f.push(d)):aU(h,g,q)&&f.push(ck(h,d,g,q)),h=d}p&&f.push(f[0]),g=q}return f};var dQ,c7,d5,b2,dx,iB=[],ab=[];fS.prototype.prepare=function(){for(var c,a=this.edges,b=a.length;b--;){c=a[b].edge,c.b&&c.a||a.splice(b,1)}return a.sort(fw),a.length},bU.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},dk.prototype={insert:function(f,b){var d,c,a;if(f){if(b.P=f,b.N=f.N,f.N&&(f.N.P=b),f.N=b,f.R){for(f=f.R;f.L;){f=f.L}f.L=b}else{f.R=b}d=f}else{this._?(f=fA(this._),b.P=null,b.N=f,f.P=f.L=b,d=f):(b.P=b.N=null,this._=b,d=null)}for(b.L=b.R=null,b.U=d,b.C=!0,f=b;d&&d.C;){c=d.U,d===c.L?(a=c.R,a&&a.C?(d.C=a.C=!1,c.C=!0,f=c):(f===d.R&&(j6(this,d),f=d,d=f.U),d.C=!1,c.C=!0,hA(this,c))):(a=c.L,a&&a.C?(d.C=a.C=!1,c.C=!0,f=c):(f===d.L&&(hA(this,d),f=d,d=f.U),d.C=!1,c.C=!0,j6(this,c))),d=f.U}this._.C=!1},remove:function(h){h.N&&(h.N.P=h.P),h.P&&(h.P.N=h.N),h.N=h.P=null;var c,f,d,a=h.U,b=h.L,g=h.R;if(f=b?g?fA(g):b:g,a?a.L===h?a.L=f:a.R=f:this._=f,b&&g?(d=f.C,f.C=h.C,f.L=b,b.U=f,f!==g?(a=f.U,f.U=h.U,h=f.R,a.L=h,f.R=g,g.U=f):(f.U=a,a=f,h=f.R)):(d=h.C,h=f),h&&(h.U=a),!d){if(h&&h.C){return h.C=!1,void 0}do{if(h===this._){break}if(h===a.L){if(c=a.R,c.C&&(c.C=!1,a.C=!0,j6(this,a),c=a.R),c.L&&c.L.C||c.R&&c.R.C){c.R&&c.R.C||(c.L.C=!1,c.C=!0,hA(this,c),c=a.R),c.C=a.C,a.C=c.R.C=!1,j6(this,a),h=this._;break}}else{if(c=a.L,c.C&&(c.C=!1,a.C=!0,hA(this,a),c=a.L),c.L&&c.L.C||c.R&&c.R.C){c.L&&c.L.C||(c.R.C=!1,c.C=!0,j6(this,c),c=a.L),c.C=a.C,a.C=c.L.C=!1,hA(this,a),h=this._;break}}c.C=!0,h=a,a=a.U}while(!h.C);h&&(h.C=!1)}}},c1.geom.voronoi=function(m){function f(w){var q=new Array(w.length),s=b[0][0],a=b[0][1],p=b[1][0],v=b[1][1];return dU(h(w),b).cells.forEach(function(u,r){var y=u.edges,t=u.site,o=q[r]=y.length?y.map(function(A){var z=A.start();return[z.x,z.y]}):t.x>=s&&t.x<=p&&t.y>=a&&t.y<=v?[[s,v],[p,v],[p,a],[s,a]]:[];o.point=w[r]}),q}function h(a){return a.map(function(p,o){return{x:Math.round(d(p,o)/cD)*cD,y:Math.round(j(p,o)/cD)*cD,i:o}})}var g=iN,c=aL,d=g,j=c,b=hI;return m?f(m):(f.links=function(a){return dU(h(a)).edges.filter(function(o){return o.l&&o.r}).map(function(o){return{source:a[o.l.i],target:a[o.r.i]}})},f.triangles=function(o){var a=[];return dU(h(o)).cells.forEach(function(y,p){for(var B,v,q=y.site,A=y.edges.sort(fw),z=-1,C=A.length,t=A[C-1].edge,w=t.l===q?t.r:t.l;++z<C;){B=t,v=w,t=A[z].edge,w=t.l===q?t.r:t.l,p<v.i&&p<w.i&&g3(q,v,w)<0&&a.push([o[p],o[v.i],o[w.i]])}}),a},f.x=function(a){return arguments.length?(d=aj(g=a),f):g},f.y=function(a){return arguments.length?(j=aj(c=a),f):c},f.clipExtent=function(a){return arguments.length?(b=null==a?hI:a,f):b===hI?null:b},f.size=function(a){return arguments.length?f.clipExtent(a&&[[0,0],a]):b===hI?null:b&&b[1]},f)};var hI=[[-1000000,-1000000],[1000000,1000000]];c1.geom.delaunay=function(a){return c1.geom.voronoi().triangles(a)},c1.geom.quadtree=function(f,q,h,b,p){function g(B){function F(w,S,O,s,R,M,v,Q){if(!isNaN(O)&&!isNaN(s)){if(w.leaf){var P=w.x,y=w.y;if(null!=P){if(dL(P-O)+dL(y-s)<0.01){z(w,S,O,s,R,M,v,Q)}else{var N=w.point;w.x=w.y=w.point=null,z(w,N,P,y,R,M,v,Q),z(w,S,O,s,R,M,v,Q)}}else{w.x=O,w.y=s,w.point=S}}else{z(w,S,O,s,R,M,v,Q)}}}function z(y,U,Q,v,T,w,S,R){var V=0.5*(T+S),M=0.5*(w+R),P=Q>=V,N=v>=M,O=(N<<1)+P;y.leaf=!1,y=y.nodes[O]||(y.nodes[O]=fK()),P?T=V:S=V,N?w=M:R=M,F(y,U,Q,v,T,w,S,R)}var D,I,G,H,A,u,J,C,o,r=aj(m),c=aj(j);if(null!=q){u=q,J=h,C=b,o=p}else{if(C=o=-(u=J=1/0),I=[],G=[],A=B.length,d){for(H=0;A>H;++H){D=B[H],D.x<u&&(u=D.x),D.y<J&&(J=D.y),D.x>C&&(C=D.x),D.y>o&&(o=D.y),I.push(D.x),G.push(D.y)}}else{for(H=0;A>H;++H){var L=+r(D=B[H],H),K=+c(D,H);u>L&&(u=L),J>K&&(J=K),L>C&&(C=L),K>o&&(o=K),I.push(L),G.push(K)}}}var t=C-u,a=o-J;t>a?o=J+t:C=u+a;var E=fK();if(E.add=function(s){F(E,s,+r(s,++H),+c(s,H),u,J,C,o)},E.visit=function(s){dz(s,E,u,J,C,o)},H=-1,null==q){for(;++H<A;){F(E,B[H],I[H],G[H],u,J,C,o)}--H}else{B.forEach(E.add)}return I=G=B=D=null,E}var d,m=iN,j=aL;return(d=arguments.length)?(m=cx,j=bk,3===d&&(p=h,b=q,h=q=0),g(f)):(g.x=function(a){return arguments.length?(m=a,g):m},g.y=function(a){return arguments.length?(j=a,g):j},g.extent=function(a){return arguments.length?(null==a?q=h=b=p=null:(q=+a[0][0],h=+a[0][1],b=+a[1][0],p=+a[1][1]),g):null==q?null:[[q,h],[b,p]]},g.size=function(a){return arguments.length?(null==a?q=h=b=p=null:(q=h=0,b=+a[0],p=+a[1]),g):null==q?null:[b-q,p-h]},g)},c1.interpolateRgb=jz,c1.interpolateObject=hP,c1.interpolateNumber=bY,c1.interpolateString=eI;var fI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;c1.interpolate=gL,c1.interpolators=[function(c,a){var b=typeof a;return("string"===b?dS.has(a)||/^(#|rgb\(|hsl\()/.test(a)?jz:eI:a instanceof i7?jz:"object"===b?Array.isArray(a)?f2:hP:bY)(c,a)}],c1.interpolateArray=f2;var dW=function(){return iJ},bK=c1.map({linear:dW,poly:kb,quad:function(){return hq},cubic:function(){return el},sin:function(){return gQ},exp:function(){return ah},circle:function(){return iH},elastic:aG,back:eN,bounce:function(){return e0}}),g5=c1.map({"in":iJ,out:c9,"in-out":aY,"out-in":function(a){return aY(c9(a))}});c1.ease=function(d){var a=d.indexOf("-"),c=a>=0?d.substring(0,a):d,b=a>=0?d.substring(a+1):"in";return c=bK.get(c)||dW,b=g5.get(b)||iJ,gp(b(c.apply(null,dT.call(arguments,1))))},c1.interpolateHcl=aP,c1.interpolateHsl=cd,c1.interpolateLab=by,c1.interpolateRound=gy,c1.transform=function(b){var a=dm.createElementNS(c1.ns.prefix.svg,"g");return(c1.transform=function(d){if(null!=d){a.setAttribute("transform",d);var c=a.transform.baseVal.consolidate()}return new g8(c?c.matrix:cA)})(b)},g8.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var cA={a:1,b:0,c:0,d:1,e:0,f:0};c1.interpolateTransform=e7,c1.layout={},c1.layout.bundle=function(){return function(d){for(var a=[],c=-1,b=d.length;++c<b;){a.push(d0(d[c]))}return a}},c1.layout.chord=function(){function f(){var c,I,z,t,u,a={},H=[],B=c1.range(h),o=[];for(j=[],b=[],c=0,t=-1;++t<h;){for(I=0,u=-1;++u<h;){I+=q[t][u]}H.push(I),o.push(c1.range(h)),c+=I}for(d&&B.sort(function(y,s){return d(H[y],H[s])}),p&&o.forEach(function(y,s){y.sort(function(K,J){return p(q[s][K],q[s][J])})}),c=(fj-g*h)/c,I=0,t=-1;++t<h;){for(z=I,u=-1;++u<h;){var D=B[t],E=o[D][u],A=q[D][E],G=I,C=I+=A*c;a[D+"-"+E]={index:D,subindex:E,startAngle:G,endAngle:C,value:A}}b[D]={index:D,startAngle:z,endAngle:I,value:(I-z)/c},I+=g}for(t=-1;++t<h;){for(u=t-1;++u<h;){var F=a[t+"-"+u],r=a[u+"-"+t];(F.value||r.value)&&j.push(F.value<r.value?{source:r,target:F}:{source:F,target:r})}}m&&v()}function v(){j.sort(function(c,a){return m((c.source.value+c.target.value)/2,(a.source.value+a.target.value)/2)})}var j,b,q,h,d,p,m,w={},g=0;return w.matrix=function(a){return arguments.length?(h=(q=a)&&q.length,j=b=null,w):q},w.padding=function(a){return arguments.length?(g=a,j=b=null,w):g},w.sortGroups=function(a){return arguments.length?(d=a,j=b=null,w):d},w.sortSubgroups=function(a){return arguments.length?(p=a,j=null,w):p},w.sortChords=function(a){return arguments.length?(m=a,j&&v(),w):m},w.chords=function(){return j||f(),j},w.groups=function(){return b||f(),b},w},c1.layout.force=function(){function D(a){return function(y,h,d,v){if(y.point!==a){var g=y.cx-a.x,f=y.cy-a.y,p=v-h,m=g*g+f*f;if(m>p*p/L){if(B>m){var O=y.charge/m;a.px-=g*O,a.py-=f*O}return !0}if(y.point&&m&&B>m){var O=y.pointCharge/m;a.px-=g*O,a.py-=f*O}}return !y.charge}}function w(a){a.px=c1.event.x,a.py=c1.event.y,N.resume()}var K,A,q,G,C,N={},M=c1.dispatch("start","tick","end"),z=[1,1],F=0.9,J=bn,H=fM,I=-30,B=dB,j=0.1,L=0.64,E=[],b=[];return N.tick=function(){if((A*=0.99)<0.005){return M.end({type:"end",alpha:A=0}),!0}var P,o,v,m,g,c,s,y,r,O=E.length,u=b.length;for(o=0;u>o;++o){v=b[o],m=v.source,g=v.target,y=g.x-m.x,r=g.y-m.y,(c=y*y+r*r)&&(c=A*G[o]*((c=Math.sqrt(c))-q[o])/c,y*=c,r*=c,g.x-=y*(s=m.weight/(g.weight+m.weight)),g.y-=r*s,m.x+=y*(s=1-s),m.y+=r*s)}if((s=A*j)&&(y=z[0]/2,r=z[1]/2,o=-1,s)){for(;++o<O;){v=E[o],v.x+=(y-v.x)*s,v.y+=(r-v.y)*s}}if(I){for(b6(P=c1.geom.quadtree(E),A,C),o=-1;++o<O;){(v=E[o]).fixed||P.visit(D(v))}}for(o=-1;++o<O;){v=E[o],v.fixed?(v.x=v.px,v.y=v.py):(v.x-=(v.px-(v.px=v.x))*F,v.y-=(v.py-(v.py=v.y))*F)}M.tick({type:"tick",alpha:A})},N.nodes=function(a){return arguments.length?(E=a,N):E},N.links=function(a){return arguments.length?(b=a,N):b},N.size=function(a){return arguments.length?(z=a,N):z},N.linkDistance=function(a){return arguments.length?(J="function"==typeof a?a:+a,N):J},N.distance=N.linkDistance,N.linkStrength=function(a){return arguments.length?(H="function"==typeof a?a:+a,N):H},N.friction=function(a){return arguments.length?(F=+a,N):F},N.charge=function(a){return arguments.length?(I="function"==typeof a?a:+a,N):I},N.chargeDistance=function(a){return arguments.length?(B=a*a,N):Math.sqrt(B)},N.gravity=function(a){return arguments.length?(j=+a,N):j},N.theta=function(a){return arguments.length?(L=a*a,N):Math.sqrt(L)},N.alpha=function(a){return arguments.length?(a=+a,A?A=a>0?a:0:a>0&&(M.start({type:"start",alpha:A=a}),c1.timer(N.tick)),N):A},N.start=function(){function s(P,y){if(!m){for(m=new Array(o),c=0;o>c;++c){m[c]=[]}for(c=0;v>c;++c){var p=b[c];m[p.source.index].push(p.target),m[p.target.index].push(p.source)}}for(var t,O=m[f],c=-1,v=O.length;++c<v;){if(!isNaN(t=O[c][P])){return t}}return Math.random()*y}var f,m,g,o=E.length,a=b.length,h=z[0],d=z[1];for(f=0;o>f;++f){(g=E[f]).index=f,g.weight=0}for(f=0;a>f;++f){g=b[f],"number"==typeof g.source&&(g.source=E[g.source]),"number"==typeof g.target&&(g.target=E[g.target]),++g.source.weight,++g.target.weight}for(f=0;o>f;++f){g=E[f],isNaN(g.x)&&(g.x=s("x",h)),isNaN(g.y)&&(g.y=s("y",d)),isNaN(g.px)&&(g.px=g.x),isNaN(g.py)&&(g.py=g.y)}if(q=[],"function"==typeof J){for(f=0;a>f;++f){q[f]=+J.call(this,b[f],f)}}else{for(f=0;a>f;++f){q[f]=J}}if(G=[],"function"==typeof H){for(f=0;a>f;++f){G[f]=+H.call(this,b[f],f)}}else{for(f=0;a>f;++f){G[f]=H}}if(C=[],"function"==typeof I){for(f=0;o>f;++f){C[f]=+I.call(this,E[f],f)}}else{for(f=0;o>f;++f){C[f]=I}}return N.resume()},N.resume=function(){return N.alpha(0.1)},N.stop=function(){return N.alpha(0)},N.drag=function(){return K||(K=c1.behavior.drag().origin(iJ).on("dragstart.force",ap).on("drag.force",w).on("dragend.force",f7)),arguments.length?(this.on("mouseover.force",cF).on("mouseout.force",iU).call(K),void 0):K},c1.rebind(N,M,"on")};var bn=20,fM=1,dB=1/0;c1.layout.hierarchy=function(){function g(z,m,y){var w=a.call(f,z,m);if(z.depth=m,y.push(z),w&&(A=w.length)){for(var A,q,v=-1,r=z.children=new Array(A),u=0,j=m+1;++v<A;){q=r[v]=g(w[v],j,y),q.parent=z,u+=q.value}d&&r.sort(d),b&&(z.value=u)}else{delete z.children,b&&(z.value=+b.call(f,z,m)||0)}return z}function c(v,p){var j=v.children,q=0;if(j&&(h=j.length)){for(var h,t=-1,m=p+1;++t<h;){q+=c(j[t],m)}}else{b&&(q=+b.call(f,v,p)||0)}return b&&(v.value=q),q}function f(h){var j=[];return g(h,0,j),j}var d=bQ,a=cX,b=dN;return f.sort=function(h){return arguments.length?(d=h,f):d},f.children=function(h){return arguments.length?(a=h,f):a},f.value=function(h){return arguments.length?(b=h,f):b},f.revalue=function(h){return c(h,0),h},f},c1.layout.partition=function(){function f(w,m,g,v){var j=w.children;if(w.x=m,w.y=w.depth*v,w.dx=g,w.dy=v,j&&(h=j.length)){var h,q,p,y=-1;for(g=w.value?g/w.value:0;++y<h;){f(q=j[y],m,p=q.value*g,v),m+=p}}}function b(o){var m=o.children,j=0;if(m&&(g=m.length)){for(var g,h=-1;++h<g;){j=Math.max(j,b(m[h]))}}return 1+j}function d(h,g){var j=c.call(this,h,g);return f(j[0],0,a[0],a[1]/b(j[0])),j}var c=c1.layout.hierarchy(),a=[1,1];return d.size=function(g){return arguments.length?(a=g,d):a},dE(d,c)},c1.layout.pie=function(){function f(j){var p=j.map(function(s,o){return +b.call(f,s,o)}),h=+("function"==typeof c?c.apply(this,arguments):c),q=(("function"==typeof a?a.apply(this,arguments):a)-h)/c1.sum(p),m=c1.range(j.length);null!=d&&m.sort(d===jB?function(r,o){return p[o]-p[r]}:function(r,o){return d(j[r],j[o])});var g=[];return m.forEach(function(r){var o;g[r]={data:j[r],value:o=p[r],startAngle:h,endAngle:h+=o*q}}),g}var b=Number,d=jB,c=0,a=fj;return f.value=function(g){return arguments.length?(b=g,f):b},f.sort=function(g){return arguments.length?(d=g,f):d},f.startAngle=function(g){return arguments.length?(c=g,f):c},f.endAngle=function(g){return arguments.length?(a=g,f):a},f};var jB={};c1.layout.stack=function(){function h(z,y){var B=z.map(function(p,m){return c.call(h,p,m)}),q=B.map(function(m){return m.map(function(p,s){return[b.call(h,p,s),g.call(h,p,s)]})}),u=f.call(h,q,y);B=c1.permute(B,u),q=c1.permute(q,u);var r,t,j,A=d.call(h,q,y),w=B.length,o=B[0].length;for(t=0;o>t;++t){for(a.call(h,B[0][t],j=A[t],q[0][t][1]),r=1;w>r;++r){a.call(h,B[r][t],j+=q[r-1][t][1],q[r][t][1])}}return z}var c=iJ,f=fy,d=d7,a=hy,b=h2,g=j2;return h.values=function(j){return arguments.length?(c=j,h):c},h.order=function(j){return arguments.length?(f="function"==typeof j?j:hS.get(j)||fy,h):f},h.offset=function(j){return arguments.length?(d="function"==typeof j?j:b1.get(j)||d7,h):d},h.x=function(j){return arguments.length?(b=j,h):b},h.y=function(j){return arguments.length?(g=j,h):g},h.out=function(j){return arguments.length?(a=j,h):a},h};var hS=c1.map({"inside-out":function(f){var v,j,b=f.length,q=f.map(bP),h=f.map(hf),d=c1.range(b).sort(function(c,a){return q[c]-q[a]}),p=0,m=0,w=[],g=[];for(v=0;b>v;++v){j=d[v],m>p?(p+=h[j],w.push(j)):(m+=h[j],g.push(j))}return g.reverse().concat(w)},reverse:function(a){return c1.range(a.length).reverse()},"default":fy}),b1=c1.map({silhouette:function(f){var q,h,b,p=f.length,g=f[0].length,d=[],m=0,j=[];for(h=0;g>h;++h){for(q=0,b=0;p>q;q++){b+=f[q][h][1]}b>m&&(m=b),d.push(b)}for(h=0;g>h;++h){j[h]=(m-d[h])/2}return j},wiggle:function(j){var C,y,b,B,p,d,A,z,D,m=j.length,w=j[0],q=w.length,v=[];for(v[0]=z=D=0,y=1;q>y;++y){for(C=0,B=0;m>C;++C){B+=j[C][y][1]}for(C=0,p=0,A=w[y][0]-w[y-1][0];m>C;++C){for(b=0,d=(j[C][y][1]-j[C][y-1][1])/(2*A);C>b;++b){d+=(j[b][y][1]-j[b][y-1][1])/A}p+=d*j[C][y][1]}v[y]=z-=B?p/B*A:0,D>z&&(D=z)}for(y=0;q>y;++y){v[y]-=D}return v},expand:function(m){var f,h,g,c=m.length,d=m[0].length,j=1/c,b=[];for(h=0;d>h;++h){for(f=0,g=0;c>f;f++){g+=m[f][h][1]}if(g){for(f=0;c>f;f++){m[f][h][1]/=g}}else{for(f=0;c>f;f++){m[f][h][1]=j}}}for(h=0;d>h;++h){b[h]=0}return b},zero:d7});c1.layout.histogram=function(){function f(q,t){for(var m,z,y=[],A=q.map(d,this),r=c.call(this,A,t),w=a.call(this,r,A,t),t=-1,u=A.length,v=w.length-1,j=b?1:1/u;++t<v;){m=y[t]=[],m.dx=w[t+1]-(m.x=w[t]),m.y=0}if(v>0){for(t=-1;++t<u;){z=A[t],z>=r[0]&&z<=r[1]&&(m=y[c1.bisect(w,z,1,v)-1],m.y+=j,m.push(q[t]))}}return y}var b=!0,d=Number,c=dH,a=bx;return f.value=function(g){return arguments.length?(d=g,f):d},f.range=function(g){return arguments.length?(c=aj(g),f):c},f.bins=function(g){return arguments.length?(a="number"==typeof g?function(h){return fT(h,g)}:aj(g),f):a},f.frequency=function(g){return arguments.length?(b=!!g,f):b},f},c1.layout.tree=function(){function f(q,t){function m(p,K){var o=p.children,J=p._tree;if(o&&(E=o.length)){for(var E,I,L,v=o[0],H=v,F=-1;++F<E;){L=o[F],m(L,I),H=A(L,I,H),I=L}a6(p);var G=0.5*(v._tree.prelim+L._tree.prelim);K?(J.prelim=K._tree.prelim+d(p,K),J.mod=J.prelim-G):J.prelim=G}else{K&&(J.prelim=K._tree.prelim+d(p,K))}}function B(s,h){s.x=s._tree.prelim+h;var p=s.children;if(p&&(o=p.length)){var o,g=-1;for(h+=s._tree.mod;++g<o;){B(p[g],h)}}}function A(v,L,g){if(L){for(var K,F=v,p=v,J=L,I=v.parent.children[0],M=F._tree.mod,E=p._tree.mod,H=J._tree.mod,G=I._tree.mod;J=b9(J),F=h9(F),J&&F;){I=h9(I),p=b9(p),p._tree.ancestor=v,K=J._tree.prelim+H-F._tree.prelim-M+d(J,F),K>0&&(hB(ez(J,v,g),v,K),M+=K,E+=K),H+=J._tree.mod,M+=F._tree.mod,G+=I._tree.mod,E+=p._tree.mod}J&&!b9(p)&&(p._tree.thread=J,p._tree.mod+=H-E),F&&!h9(I)&&(I._tree.thread=F,I._tree.mod+=M-G,g=v)}return g}var D=b.call(this,q,t),r=D[0];dl(r,function(h,g){h._tree={ancestor:h,prelim:0,mod:0,change:0,shift:0,number:g?g._tree.number+1:0}}),m(r),B(r,-r._tree.prelim);var y=eR(r,gd),u=eR(r,gU),w=eR(r,gC),j=y.x-d(y,u)/2,C=u.x+d(u,y)/2,z=w.depth||1;return dl(r,a?function(g){g.x*=c[0],g.y=g.depth*c[1],delete g._tree}:function(g){g.x=(g.x-j)/(C-j)*c[0],g.y=g.depth/z*c[1],delete g._tree}),D}var b=c1.layout.hierarchy().sort(null).value(null),d=jM,c=[1,1],a=!1;return f.separation=function(g){return arguments.length?(d=g,f):d},f.size=function(g){return arguments.length?(a=null==(c=g),f):a?null:c},f.nodeSize=function(g){return arguments.length?(a=null!=(c=g),f):a?c:null},dE(f,b)},c1.layout.pack=function(){function f(t,j){var q=d.call(this,t,j),h=q[0],r=a[0],m=a[1],g=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(h.x=h.y=0,dl(h,function(o){o.r=+g(o.value)}),dl(h,i1),c){var p=c*(b?1:Math.max(2*h.r/r,2*h.r/m))/2;dl(h,function(o){o.r+=p}),dl(h,i1),dl(h,function(o){o.r-=p})}return fd(h,r/2,m/2,b?1:1/Math.max(2*h.r/r,2*h.r/m)),q}var b,d=c1.layout.hierarchy().sort(j1),c=0,a=[1,1];return f.size=function(g){return arguments.length?(a=g,f):a},f.radius=function(g){return arguments.length?(b=null==g||"function"==typeof g?g:+g,f):b},f.padding=function(g){return arguments.length?(c=+g,f):c},dE(f,d)},c1.layout.cluster=function(){function f(m,q){var j,w=b.call(this,m,q),v=w[0],y=0;dl(v,function(h){var g=h.children;g&&g.length?(h.x=bG(g),h.y=cw(g)):(h.x=j?y+=d(h,j):0,h.y=0,j=h)});var p=gH(v),u=hl(v),r=p.x-d(p,u)/2,t=u.x+d(u,p)/2;return dl(v,a?function(g){g.x=(g.x-v.x)*c[0],g.y=(v.y-g.y)*c[1]}:function(g){g.x=(g.x-r)/(t-r)*c[0],g.y=(1-(v.y?g.y/v.y:1))*c[1]}),w}var b=c1.layout.hierarchy().sort(null).value(null),d=jM,c=[1,1],a=!1;return f.separation=function(g){return arguments.length?(d=g,f):d},f.size=function(g){return arguments.length?(a=null==(c=g),f):a?null:c},f.nodeSize=function(g){return arguments.length?(a=null!=(c=g),f):a?c:null},dE(f,b)},c1.layout.treemap=function(){function m(o,f){for(var h,g,a=-1,c=o.length;++a<c;){g=(h=o[a]).value*(0>f?0:f),h.area=isNaN(g)||0>=g?0:g}}function E(G){var t=G.children;if(t&&t.length){var g,I,H,K=z(G),r=[],u=t.slice(),f=1/0,J="slice"===y?K.dx:"dice"===y?K.dy:"slice-dice"===y?1&G.depth?K.dy:K.dx:Math.min(K.dx,K.dy);for(m(u,K.dx*K.dy/G.value),r.area=0;(H=u.length)>0;){r.push(g=u[H-1]),r.area+=g.area,"squarify"!==y||(I=b(r,J))<=f?(u.pop(),f=I):(r.area-=r.pop().area,D(r,J,K,!1),J=Math.min(K.dx,K.dy),r.length=r.area=0,f=1/0)}r.length&&(D(r,J,K,!0),r.length=r.area=0),t.forEach(E)}}function A(h){var p=h.children;if(p&&p.length){var g,s=z(h),f=p.slice(),u=[];for(m(f,s.dx*s.dy/h.value),u.area=0;g=f.pop();){u.push(g),u.area+=g.area,null!=g.z&&(D(u,g.z?s.dx:s.dy,s,!f.length),u.length=u.area=0)}p.forEach(A)}}function b(H,h){for(var s,p=H.area,f=0,g=1/0,G=-1,c=H.length;++G<c;){(s=H[G].area)&&(g>s&&(g=s),s>f&&(f=s))}return p*=p,h*=h,p?Math.max(h*f*d/p,p/(h*g*d)):1/0}function D(g,J,G,c){var I,p=-1,f=g.length,H=G.x,K=G.y,h=J?B(g.area/J):0;if(J==G.dx){for((c||h>G.dy)&&(h=G.dy);++p<f;){I=g[p],I.x=H,I.y=K,I.dy=h,H+=I.dx=Math.min(G.x+G.dx-H,h?B(I.area/h):0)}I.z=!0,I.dx+=G.x+G.dx-H,G.y+=h,G.dy-=h}else{for((c||h>G.dx)&&(h=G.dx);++p<f;){I=g[p],I.x=H,I.y=K,I.dx=h,K+=I.dy=Math.min(G.y+G.dy-K,h?B(I.area/h):0)}I.z=!1,I.dy+=G.y+G.dy-K,G.x+=h,G.dx-=h}}function v(f){var a=j||C(f),c=a[0];return c.x=0,c.y=0,c.dx=F[0],c.dy=F[1],j&&C.revalue(c),m([c],c.dx*c.dy/c.value),(j?A:E)(c),w&&(j=a),a}var j,C=c1.layout.hierarchy(),B=Math.round,F=[1,1],q=null,z=jD,w=!1,y="squarify",d=0.5*(1+Math.sqrt(5));return v.size=function(a){return arguments.length?(F=a,v):F},v.padding=function(g){function a(h){var o=g.call(v,h,h.depth);return null==o?jD(h):c0(h,"number"==typeof o?[o,o,o,o]:o)}function f(h){return c0(h,g)}if(!arguments.length){return q}var c;return z=null==(q=g)?jD:"function"==(c=typeof g)?a:"number"===c?(g=[g,g,g,g],f):f,v},v.round=function(a){return arguments.length?(B=a?Math.round:Number,v):B!=Number},v.sticky=function(a){return arguments.length?(w=a,j=null,v):w},v.ratio=function(a){return arguments.length?(d=a,v):d},v.mode=function(a){return arguments.length?(y=a+"",v):y},dE(v,C)},c1.random={normal:function(c,a){var b=arguments.length;return 2>b&&(a=1),1>b&&(c=0),function(){var g,f,d;do{g=2*Math.random()-1,f=2*Math.random()-1,d=g*g+f*f}while(!d||d>1);return c+a*g*Math.sqrt(-2*Math.log(d)/d)}},logNormal:function(){var a=c1.random.normal.apply(c1,arguments);return function(){return Math.exp(a())}},bates:function(b){var a=c1.random.irwinHall(b);return function(){return a()/b}},irwinHall:function(a){return function(){for(var b=0,c=0;a>c;c++){b+=Math.random()}return b}}},c1.scale={};var eK={floor:iJ,ceil:iJ};c1.scale.linear=function(){return jR([0,1],[0,1],gL,!1)};var gN={s:1,g:1,p:1,r:1,e:1};c1.scale.log=function(){return dY(c1.scale.linear().domain([0,1]),10,!0,[1,10])};var f4=c1.format(".0e"),gv={floor:function(a){return -Math.ceil(-a)},ceil:function(a){return -Math.floor(-a)}};c1.scale.pow=function(){return bX(c1.scale.linear(),1,[0,1])},c1.scale.sqrt=function(){return c1.scale.pow().exponent(0.5)},c1.scale.ordinal=function(){return iw([],{t:"range",a:[[]]})},c1.scale.category10=function(){return c1.scale.ordinal().range(dd)},c1.scale.category20=function(){return c1.scale.ordinal().range(a1)},c1.scale.category20b=function(){return c1.scale.ordinal().range(hw)},c1.scale.category20c=function(){return c1.scale.ordinal().range(en)};var dd=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(f3),a1=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(f3),hw=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(f3),en=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(f3);c1.scale.quantile=function(){return j9([],[])},c1.scale.quantize=function(){return hG(0,1,[0,1])},c1.scale.threshold=function(){return fG([0.5],[0,1])},c1.scale.identity=function(){return dZ([0,1])},c1.svg={},c1.svg.arc=function(){function f(){var m=b.apply(this,arguments),q=d.apply(this,arguments),j=c.apply(this,arguments)+jW,w=a.apply(this,arguments)+jW,v=(j>w&&(v=j,j=w,w=v),w-j),y=eZ>v?"0":"1",p=Math.cos(j),u=Math.sin(j),r=Math.cos(w),t=Math.sin(w);return v>=kg?m?"M0,"+q+"A"+q+","+q+" 0 1,1 0,"+-q+"A"+q+","+q+" 0 1,1 0,"+q+"M0,"+m+"A"+m+","+m+" 0 1,0 0,"+-m+"A"+m+","+m+" 0 1,0 0,"+m+"Z":"M0,"+q+"A"+q+","+q+" 0 1,1 0,"+-q+"A"+q+","+q+" 0 1,1 0,"+q+"Z":m?"M"+q*p+","+q*u+"A"+q+","+q+" 0 "+y+",1 "+q*r+","+q*t+"L"+m*r+","+m*t+"A"+m+","+m+" 0 "+y+",0 "+m*p+","+m*u+"Z":"M"+q*p+","+q*u+"A"+q+","+q+" 0 "+y+",1 "+q*r+","+q*t+"L0,0Z"}var b=bO,d=g7,c=cE,a=bw;return f.innerRadius=function(g){return arguments.length?(b=aj(g),f):b},f.outerRadius=function(g){return arguments.length?(d=aj(g),f):d},f.startAngle=function(g){return arguments.length?(c=aj(g),f):c},f.endAngle=function(g){return arguments.length?(a=aj(g),f):a},f.centroid=function(){var h=(b.apply(this,arguments)+d.apply(this,arguments))/2,g=(c.apply(this,arguments)+a.apply(this,arguments))/2+jW;return[Math.cos(g)*h,Math.sin(g)*h]},f};var jW=-a4,kg=fj-cD;c1.svg.line=function(){return fO(iJ)};var gS=c1.map({linear:dD,"linear-closed":jE,step:hY,"step-before":b5,"step-after":eM,basis:eq,"basis-open":j0,"basis-closed":ag,bundle:gV,cardinal:gx,"cardinal-open":gP,"cardinal-closed":f6,monotone:aW});gS.forEach(function(b,a){a.key=b,a.closed=/-closed$/.test(b)});var ak=[0,2/3,1/3,0],iK=[0,1/3,2/3,0],aJ=[0,1/6,2/3,1/6];c1.svg.line.radial=function(){var a=fO(cn);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},b5.reverse=eM,eM.reverse=b5,c1.svg.area=function(){return bF(iJ)},c1.svg.area.radial=function(){var a=bF(cn);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},c1.svg.chord=function(){function f(u,o){var t=q(this,g,u,o),r=q(this,d,u,o);return"M"+t.p0+b(t.r,t.p1,t.a1-t.a0)+(h(t,r)?p(t.r,t.p1,t.r,t.p0):p(t.r,t.p1,r.r,r.p0)+b(r.r,r.p1,r.a1-r.a0)+p(r.r,r.p1,t.r,t.p0))+"Z"}function q(B,w,z,y){var c=w.call(B,z,y),s=m.call(B,c,y),A=j.call(B,c,y)+jW,a=v.call(B,c,y)+jW;return{r:s,a0:A,a1:a,p0:[s*Math.cos(A),s*Math.sin(A)],p1:[s*Math.cos(a),s*Math.sin(a)]}}function h(c,a){return c.a0==a.a0&&c.a1==a.a1}function b(o,a,c){return"A"+o+","+o+" 0 "+ +(c>eZ)+",1 "+a}function p(s,a,o,c){return"Q 0,0 "+c}var g=f5,d=gw,m=gD,j=cE,v=bw;return f.radius=function(a){return arguments.length?(m=aj(a),f):m},f.source=function(a){return arguments.length?(g=aj(a),f):g},f.target=function(a){return arguments.length?(d=aj(a),f):d},f.startAngle=function(a){return arguments.length?(j=aj(a),f):j},f.endAngle=function(a){return arguments.length?(v=aj(a),f):v},f},c1.svg.diagonal=function(){function d(p,g){var h=a.call(this,p,g),j=c.call(this,p,g),f=(h.y+j.y)/2,m=[h,{x:h.x,y:f},{x:j.x,y:f},j];return m=m.map(b),"M"+m[0]+"C"+m[1]+" "+m[2]+" "+m[3]}var a=f5,c=gw,b=hg;return d.source=function(f){return arguments.length?(a=aj(f),d):a},d.target=function(f){return arguments.length?(c=aj(f),d):c},d.projection=function(f){return arguments.length?(b=f,d):b},d},c1.svg.diagonal.radial=function(){var c=c1.svg.diagonal(),a=hg,b=c.projection;return c.projection=function(d){return arguments.length?b(jy(a=d)):a},c},c1.svg.symbol=function(){function c(f,d){return(eP.get(a.call(this,f,d))||ff)(b.call(this,f,d))}var a=eA,b=cW;return c.type=function(d){return arguments.length?(a=aj(d),c):a},c.size=function(d){return arguments.length?(b=aj(d),c):b},c};var eP=c1.map({circle:ff,cross:function(b){var a=Math.sqrt(b/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(c){var a=Math.sqrt(c/(2*bB)),b=a*bB;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(b){var a=Math.sqrt(b)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(c){var a=Math.sqrt(c/ch),b=a*ch/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(c){var a=Math.sqrt(c/ch),b=a*ch/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});c1.svg.symbolTypes=eP.keys();var e4,aS,ch=Math.sqrt(3),bB=Math.tan(30*gK),gA=[],hb=0;gA.call=hF.call,gA.empty=hF.empty,gA.node=hF.node,gA.size=hF.size,c1.transition=function(a){return arguments.length?e4?a.transition():a:az.transition()},c1.transition.prototype=gA,gA.select=function(f){var v,j,b,q=this.id,h=[];f=iY(f);for(var d=-1,p=this.length;++d<p;){h.push(v=[]);for(var m=this[d],w=-1,g=m.length;++w<g;){(b=m[w])&&(j=f.call(b,b.__data__,w,d))?("__data__" in b&&(j.__data__=b.__data__),fx(j,w,q,b.__transition__[q]),v.push(j)):v.push(null)}}return bh(h,q)},gA.selectAll=function(m){var E,A,b,D,v,j=this.id,C=[];m=iz(m);for(var B=-1,F=this.length;++B<F;){for(var q=this[B],z=-1,w=q.length;++z<w;){if(b=q[z]){v=b.__transition__[j],A=m.call(b,b.__data__,z,B),C.push(E=[]);for(var y=-1,d=A.length;++y<d;){(D=A[y])&&fx(D,y,j,v),E.push(D)}}}}return bh(C,j)},gA.filter=function(f){var q,h,b,p=[];"function"!=typeof f&&(f=hX(f));for(var g=0,d=this.length;d>g;g++){p.push(q=[]);for(var h=this[g],m=0,j=h.length;j>m;m++){(b=h[m])&&f.call(b,b.__data__,m,g)&&q.push(b)}}return bh(p,this.id)},gA.tween=function(c,a){var b=this.id;return arguments.length<2?this.node().__transition__[b].tween.get(c):iP(this,null==a?function(d){d.__transition__[b].tween.remove(c)}:function(d){d.__transition__[b].tween.set(c,a)})},gA.attr=function(m,f){function h(){this.removeAttribute(b)}function g(){this.removeAttributeNS(b.space,b.local)}function c(a){return null==a?h:(a+="",function(){var o,p=this.getAttribute(b);return p!==a&&(o=j(p,a),function(q){this.setAttribute(b,o(q))})})}function d(a){return null==a?g:(a+="",function(){var o,p=this.getAttributeNS(b.space,b.local);return p!==a&&(o=j(p,a),function(q){this.setAttributeNS(b.space,b.local,o(q))})})}if(arguments.length<2){for(f in m){this.attr(f,m[f])}return this}var j="transform"==m?e7:gL,b=c1.ns.qualify(m);return fU(this,"attr."+m,f,b.local?d:c)},gA.attrTween=function(f,b){function d(j,h){var g=b.call(this,j,h,this.getAttribute(a));return g&&function(m){this.setAttribute(a,g(m))}}function c(j,h){var g=b.call(this,j,h,this.getAttributeNS(a.space,a.local));return g&&function(m){this.setAttributeNS(a.space,a.local,g(m))}}var a=c1.ns.qualify(f);return this.tween("attr."+f,a.local?c:d)},gA.style=function(g,c,f){function d(){this.style.removeProperty(g)}function a(h){return null==h?d:(h+="",function(){var m,j=j8.getComputedStyle(this,null).getPropertyValue(g);return j!==h&&(m=gL(j,h),function(o){this.style.setProperty(g,m(o),f)})})}var b=arguments.length;if(3>b){if("string"!=typeof g){2>b&&(c="");for(f in g){this.style(f,g[f],c)}return this}f=""}return fU(this,"style."+g,c,a)},gA.styleTween=function(d,a,c){function b(h,f){var g=a.call(this,h,f,j8.getComputedStyle(this,null).getPropertyValue(d));return g&&function(j){this.style.setProperty(d,g(j),c)}}return arguments.length<3&&(c=""),this.tween("style."+d,b)},gA.text=function(a){return fU(this,"text",a,d9)},gA.remove=function(){return this.each("end.transition",function(){var a;this.__transition__.count<2&&(a=this.parentNode)&&a.removeChild(this)})},gA.ease=function(b){var a=this.id;return arguments.length<1?this.node().__transition__[a].ease:("function"!=typeof b&&(b=c1.ease.apply(c1,arguments)),iP(this,function(c){c.__transition__[a].ease=b}))},gA.delay=function(b){var a=this.id;return iP(this,"function"==typeof b?function(f,d,c){f.__transition__[a].delay=+b.call(f,f.__data__,d,c)}:(b=+b,function(c){c.__transition__[a].delay=b}))},gA.duration=function(b){var a=this.id;return iP(this,"function"==typeof b?function(f,d,c){f.__transition__[a].duration=Math.max(1,b.call(f,f.__data__,d,c))}:(b=Math.max(1,b),function(c){c.__transition__[a].duration=b}))},gA.each=function(f,b){var d=this.id;if(arguments.length<2){var c=aS,a=e4;e4=d,iP(this,function(h,j,g){aS=h.__transition__[d],f.call(h,h.__data__,j,g)}),aS=c,e4=a}else{iP(this,function(h){var g=h.__transition__[d];(g.event||(g.event=c1.dispatch("start","end"))).on(f,b)})}return this},gA.transition=function(){for(var f,v,j,b,q=this.id,h=++hb,d=[],p=0,m=this.length;m>p;p++){d.push(f=[]);for(var v=this[p],w=0,g=v.length;g>w;w++){(j=v[w])&&(b=Object.create(j.__transition__[q]),b.delay+=b.duration,fx(j,w,h,b)),f.push(j)}}return bh(d,h)},c1.svg.axis=function(){function f(a){a.each(function(){var G,C=c1.select(this),I=this.__chart__||h,N=this.__chart__=h.copy(),K=null==j?N.ticks?N.ticks.apply(N,m):N.domain():j,L=null==q?N.tickFormat?N.tickFormat.apply(N,m):iJ:q,F=C.selectAll(".tick").data(K,N),z=F.enter().insert("g",".domain").attr("class","tick").style("opacity",cD),O=c1.transition(F.exit()).style("opacity",cD).remove(),H=c1.transition(F).style("opacity",1),r=fk(N),t=C.selectAll(".domain").data([0]),o=(t.enter().append("path").attr("class","domain"),c1.transition(t));z.append("line"),z.append("text");var Q=z.select("line"),P=H.select("line"),u=F.select("text").text(L),c=z.select("text"),J=H.select("text");switch(b){case"bottom":G=jN,Q.attr("y2",p),c.attr("y",Math.max(p,0)+d),P.attr("x2",0).attr("y2",p),J.attr("x",0).attr("y",Math.max(p,0)+d),u.attr("dy",".71em").style("text-anchor","middle"),o.attr("d","M"+r[0]+","+g+"V0H"+r[1]+"V"+g);break;case"top":G=jN,Q.attr("y2",-p),c.attr("y",-(Math.max(p,0)+d)),P.attr("x2",0).attr("y2",-p),J.attr("x",0).attr("y",-(Math.max(p,0)+d)),u.attr("dy","0em").style("text-anchor","middle"),o.attr("d","M"+r[0]+","+-g+"V0H"+r[1]+"V"+-g);break;case"left":G=aB,Q.attr("x2",-p),c.attr("x",-(Math.max(p,0)+d)),P.attr("x2",-p).attr("y2",0),J.attr("x",-(Math.max(p,0)+d)).attr("y",0),u.attr("dy",".32em").style("text-anchor","end"),o.attr("d","M"+-g+","+r[0]+"H0V"+r[1]+"H"+-g);break;case"right":G=aB,Q.attr("x2",p),c.attr("x",Math.max(p,0)+d),P.attr("x2",p).attr("y2",0),J.attr("x",Math.max(p,0)+d).attr("y",0),u.attr("dy",".32em").style("text-anchor","start"),o.attr("d","M"+g+","+r[0]+"H0V"+r[1]+"H"+g)}if(N.rangeBand){var B=N,D=B.rangeBand()/2;I=N=function(s){return B(s)+D}}else{I.rangeBand?I=N:O.call(G,N)}z.call(G,I),H.call(G,N)})}var q,h=c1.scale.linear(),b=jq,p=6,g=6,d=3,m=[10],j=null;return f.scale=function(a){return arguments.length?(h=a,f):h},f.orient=function(a){return arguments.length?(b=a in cU?a+"":jq,f):b},f.ticks=function(){return arguments.length?(m=arguments,f):m},f.tickValues=function(a){return arguments.length?(j=a,f):j},f.tickFormat=function(a){return arguments.length?(q=a,f):q},f.tickSize=function(a){var c=arguments.length;return c?(p=+a,g=+arguments[c-1],f):p},f.innerTickSize=function(a){return arguments.length?(p=+a,f):p},f.outerTickSize=function(a){return arguments.length?(g=+a,f):g},f.tickPadding=function(a){return arguments.length?(d=+a,f):d},f.tickSubdivide=function(){return arguments.length&&f},f};var jq="bottom",cU={top:1,right:1,bottom:1,left:1};c1.svg.brush=function(){function m(a){a.each(function(){var p=c1.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",D).on("touchstart.brush",D),t=p.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),p.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var g=p.selectAll(".resize").data(d,iJ);g.exit().remove(),g.enter().append("g").attr("class",function(f){return"resize "+f}).style("cursor",function(f){return ex[f]}).append("rect").attr("x",function(f){return/[ew]$/.test(f)?-3:null}).attr("y",function(f){return/^[ns]/.test(f)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),g.style("display",m.empty()?"none":null);var c,s=c1.transition(p),r=c1.transition(t);B&&(c=fk(B),r.attr("x",c[0]).attr("width",c[1]-c[0]),A(s)),F&&(c=fk(F),r.attr("y",c[0]).attr("height",c[1]-c[0]),b(s)),E(s)})}function E(a){a.selectAll(".resize").attr("transform",function(c){return"translate("+q[+/e$/.test(c)]+","+z[+/^s/.test(c)]+")"})}function A(a){a.select(".extent").attr("x",q[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",q[1]-q[0])}function b(a){a.select(".extent").attr("y",z[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",z[1]-z[0])}function D(){function H(){32==c1.event.keyCode&&(J||(s=null,h[0]-=q[1],h[1]-=z[1],J=2),ip())}function P(){32==c1.event.keyCode&&2==J&&(h[0]+=q[1],h[1]+=z[1],J=0,ip())}function G(){var L=c1.mouse(V),p=!1;g&&(L[0]+=g[0],L[1]+=g[1]),J||(c1.event.altKey?(s||(s=[(q[0]+q[1])/2,(z[0]+z[1])/2]),h[0]=q[+(L[0]<s[0])],h[1]=z[+(L[1]<s[1])]):s=null),I&&Q(L,B,0)&&(A(c),p=!0),O&&Q(L,F,1)&&(b(c),p=!0),p&&(E(c),t({type:"brush",mode:J?"move":"resize"}))}function Q(N,aa,S){var L,Z,X=fk(aa),W=X[0],ac=X[1],M=h[S],Y=S?z:q,T=Y[1]-Y[0];return J&&(W-=M,ac-=T+M),L=(S?y:w)?Math.max(W,Math.min(ac,N[S])):N[S],J?Z=(L+=M)+T:(s&&(M=Math.max(W,Math.min(ac,2*s[S]-L))),L>M?(Z=L,L=M):Z=M),Y[0]!=L||Y[1]!=Z?(S?j=null:v=null,Y[0]=L,Y[1]=Z,!0):void 0}function r(){G(),c.style("pointer-events","all").selectAll(".resize").style("display",m.empty()?"none":null),c1.select("body").style("cursor",null),o.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),f(),t({type:"brushend"})}var s,g,V=this,U=c1.select(c1.event.target),t=C.of(V,arguments),c=c1.select(V),R=U.datum(),I=!/^(n|s)$/.test(R)&&B,O=!/^(e|w)$/.test(R)&&F,J=U.classed("extent"),f=iT(),h=c1.mouse(V),o=c1.select(j8).on("keydown.brush",H).on("keyup.brush",P);if(c1.event.changedTouches?o.on("touchmove.brush",G).on("touchend.brush",r):o.on("mousemove.brush",G).on("mouseup.brush",r),c.interrupt().selectAll("*").interrupt(),J){h[0]=q[0]-h[0],h[1]=z[0]-h[1]}else{if(R){var K=+/w$/.test(R),a=+/^n/.test(R);g=[q[1-K]-h[0],z[1-a]-h[1]],h[0]=q[K],h[1]=z[a]}else{c1.event.altKey&&(s=h.slice())}}c.style("pointer-events","none").selectAll(".resize").style("display",null),c1.select("body").style("cursor",U.style("cursor")),t({type:"brushstart"}),G()}var v,j,C=hL(m,"brushstart","brush","brushend"),B=null,F=null,q=[0,0],z=[0,0],w=!0,y=!0,d=e9[0];return m.event=function(a){a.each(function(){var g=C.of(this,arguments),c={x:q,y:z,i:v,j:j},f=this.__chart__||c;this.__chart__=c,e4?c1.select(this).transition().each("start.brush",function(){v=f.i,j=f.j,q=f.x,z=f.y,g({type:"brushstart"})}).tween("brush:brush",function(){var o=f2(q,c.x),h=f2(z,c.y);return v=j=null,function(p){q=c.x=o(p),z=c.y=h(p),g({type:"brush",mode:"resize"})}}).each("end.brush",function(){v=c.i,j=c.j,g({type:"brush",mode:"resize"}),g({type:"brushend"})}):(g({type:"brushstart"}),g({type:"brush",mode:"resize"}),g({type:"brushend"}))})},m.x=function(a){return arguments.length?(B=a,d=e9[!B<<1|!F],m):B},m.y=function(a){return arguments.length?(F=a,d=e9[!B<<1|!F],m):F},m.clamp=function(a){return arguments.length?(B&&F?(w=!!a[0],y=!!a[1]):B?w=!!a:F&&(y=!!a),m):B&&F?[w,y]:B?w:F?y:null},m.extent=function(g){var s,p,f,c,o;return arguments.length?(B&&(s=g[0],p=g[1],F&&(s=s[0],p=p[0]),v=[s,p],B.invert&&(s=B(s),p=B(p)),s>p&&(o=s,s=p,p=o),(s!=q[0]||p!=q[1])&&(q=[s,p])),F&&(f=g[0],c=g[1],B&&(f=f[1],c=c[1]),j=[f,c],F.invert&&(f=F(f),c=F(c)),f>c&&(o=f,f=c,c=o),(f!=z[0]||c!=z[1])&&(z=[f,c])),m):(B&&(v?(s=v[0],p=v[1]):(s=q[0],p=q[1],B.invert&&(s=B.invert(s),p=B.invert(p)),s>p&&(o=s,s=p,p=o))),F&&(j?(f=j[0],c=j[1]):(f=z[0],c=z[1],F.invert&&(f=F.invert(f),c=F.invert(c)),f>c&&(o=f,f=c,c=o))),B&&F?[[s,f],[p,c]]:B?[s,p]:F&&[f,c])},m.clear=function(){return m.empty()||(q=[0,0],z=[0,0],v=j=null),m},m.empty=function(){return !!B&&q[0]==q[1]||!!F&&z[0]==z[1]},c1.rebind(m,C,"on")};var ex={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},e9=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],bb=bT.format=jP.timeFormat,fR=bb.utc,d4=fR("%Y-%m-%dT%H:%M:%S.%LZ");bb.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?gf:d4,gf.parse=function(b){var a=new Date(b);return isNaN(a)?null:a},gf.toString=d4.toString,bT.second=e8(function(a){return new hj(1000*Math.floor(a/1000))},function(b,a){b.setTime(b.getTime()+1000*Math.floor(a))},function(a){return a.getSeconds()}),bT.seconds=bT.second.range,bT.seconds.utc=bT.second.utc.range,bT.minute=e8(function(a){return new hj(60000*Math.floor(a/60000))},function(b,a){b.setTime(b.getTime()+60000*Math.floor(a))},function(a){return a.getMinutes()}),bT.minutes=bT.minute.range,bT.minutes.utc=bT.minute.utc.range,bT.hour=e8(function(b){var a=b.getTimezoneOffset()/60;return new hj(3600000*(Math.floor(b/3600000-a)+a))},function(b,a){b.setTime(b.getTime()+3600000*Math.floor(a))},function(a){return a.getHours()}),bT.hours=bT.hour.range,bT.hours.utc=bT.hour.utc.range,bT.month=e8(function(a){return a=bT.day(a),a.setDate(1),a},function(b,a){b.setMonth(b.getMonth()+a)},function(a){return a.getMonth()}),bT.months=bT.month.range,bT.months.utc=bT.month.utc.range;var fv=[1000,5000,15000,30000,60000,300000,900000,1800000,3600000,10800000,21600000,43200000,86400000,172800000,604800000,2592000000,7776000000,31536000000],jI=[[bT.second,1],[bT.second,5],[bT.second,15],[bT.second,30],[bT.minute,1],[bT.minute,5],[bT.minute,15],[bT.minute,30],[bT.hour,1],[bT.hour,3],[bT.hour,6],[bT.hour,12],[bT.day,1],[bT.day,2],[bT.week,1],[bT.month,1],[bT.month,3],[bT.year,1]],aw=bb.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",i8]]),f9={range:function(c,a,b){return c1.range(+c,+a,b).map(i4)},floor:iJ,ceil:iJ};jI.year=bT.year,bT.scale=function(){return cK(c1.scale.linear(),jI,aw)};var cH=jI.map(function(a){return[a[0].utc,a[1]]}),iX=fR.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",i8]]);cH.year=bT.year.utc,bT.scale.utc=function(){return cK(c1.scale.linear(),cH,iX)},c1.text=aI(function(a){return a.responseText}),c1.json=function(b,a){return eO(b,"application/json",cb,a)},c1.html=function(b,a){return eO(b,"text/html",dI,a)},c1.xml=aI(function(a){return a.responseXML}),"function"==typeof define&&define.amd?define(c1):"object"==typeof module&&module.exports?module.exports=c1:this.d3=c1}();var AbstractEdge=function(){};AbstractEdge.prototype={hide:function(){this.connection.fg.hide();this.connection.bg&&this.bg.connection.hide()}};var EdgeFactory=function(){this.template=new AbstractEdge();this.template.style=new Object();this.template.style.directed=false;this.template.weight=1};EdgeFactory.prototype={build:function(a,c){var b=jQuery.extend(true,{},this.template);b.source=a;b.target=c;return b}};var Graph=function(){this.nodes={};this.edges=[];this.edgeFactory=new EdgeFactory()};Graph.prototype={addNode:function(c,b){if(this.nodes[c]==undefined){this.nodes[c]=new Graph.Node(c,b)}var a=this.nodes[c];return a},addEdge:function(f,g,c){var b=this.addNode(f);var a=this.addNode(g);var d=this.edgeFactory.build(b,a);jQuery.extend(d.style,c);b.edges.push(d);this.edges.push(d);a.edges.push(d)},copy:function(){var b=new Graph();for(var c in this.edges){var a=this.edges[c];b.addEdge(a.source.id,a.target.id)}for(var d in this.nodes){if(this.nodes[d].layer!=undefined){b.nodes[d].layer=this.nodes[d].layer}}return b},removeEdge:function(c){for(var g in this.nodes){var b=this.nodes[g];for(var f in b.edges){var a=b.edges[f];if(a.source.id==c.source.id&&a.target.id==c.target.id){b.edges.splice(f,1)}}}var d=this.edges.indexOf(c);this.edges.splice(d,1)},removeEdges:function(a){for(e in a){this.removeEdge(a[e])}},getNode:function(a){return this.nodes[a]},removeNode:function(d){var b=[];for(var a=0;a<d.edges.length;a++){var c=d.edges[a];b.push(c)}for(e in b){this.removeEdge(b[e])}delete this.nodes[d.id]},getLeafs:function(){var a=new Array();for(var c in this.nodes){var b=this.nodes[c];if(this.nodeOutDegree(b)==0){a.push(b)}}return a},nodeInDegree:function(c){var b=0;for(e in c.edges){var a=c.edges[e].source;if(a.id!=c.id){b++}}return b},nodeOutDegree:function(c){var b=0;for(e in c.edges){var a=c.edges[e].source;if(a.id==c.id){b++}}return b},hierarchicalDrawing:function(){var a=this.extractDAG();a.layerAssignment();a.createGraphWithBends();a.vertexOrdering();for(n in this.nodes){this.nodes[n].layer=a.nodes[n].layer;this.nodes[n].xOrder=a.nodes[n].xOrder}},xOrderShift:function(){var g=[];for(var h in this.nodes){var f=this.nodes[h].layer;if(g[f]==undefined){g[f]=new Array()}g[f].push(this.nodes[h])}varMaxLayerSize=0;for(var a in g){if(varMaxLayerSize<g[a].length){varMaxLayerSize=g[a].length}}for(var d=0;d<g.length;d++){var c=g[d].length;for(h in g[d]){var b=g[d][h];b.xOrder=b.xOrder+Math.floor(varMaxLayerSize/c)}}},createGraphWithBends:function(){for(var a in this.edges){if(Math.abs(this.edges[a].source.layer-this.edges[a].target.layer)>1){this.addBendNodes(this.edges[a])}}},addBendNodes:function(h){console.log("---- Add bend nodes for edge "+h.source.id+","+h.target.id);var f=h.source;var d=h.target;var g=f;for(var c=f.layer-1;c>d.layer;c--){var a=this.addNode("b_"+f.id+"-"+d.id+"_"+c);a.layer=c;this.addEdge(g.id,a.id);g=a}this.addEdge(g.id,d.id)},vertexOrdering:function(){var b=[];for(var d in this.nodes){var a=this.nodes[d].layer;if(b[a]==undefined){b[a]=new Array()}b[a].push(this.nodes[d])}for(l in b){var a=b[l];var c=0;for(d in a){a[d].xOrder=c;c++}}for(l in b){var a=b[l];this.greedySwitch(a)}},greedySwitch:function(g){var h=0;if(g.length==1){return h}else{for(var f=0;f<g.length;f++){for(var d=f+1;d<g.length;d++){h=h+this.getCrossingNumber(g[f],g[d])}}var b=h;var m=0;while(b!=m){b=m;m=0;for(var f=0;f<g.length;f++){for(var d=f+1;d<g.length;d++){var c=g[f];var a=g[d];nbij=this.getCrossingNumber(c,a);c.xOrder=d;a.xOrder=f;nbji=this.getCrossingNumber(c,a);if(nbji<nbij){g[f]=a;g[d]=c;m=m+nbji;console.log("swap "+c.id+" and "+a.id)}else{c.xOrder=f;a.xOrder=d;m=m+nbij}}}}return h}},getTotalCrossings:function(){var c=0;for(n1 in this.nodes){var b=this.nodes[n1];for(n2 in this.nodes){var a=this.nodes[n2];c=c+this.getCrossingNumber(b,a)}}return c},getCrossingNumber:function(c,b){var d=0;if((c.xOrder<b.xOrder)&&(c.layer==b.layer)){for(e1 in c.edges){var a;if(c.edges[e1].source.id==c.id){a=c.edges[e1].target}else{a=c.edges[e1].source}for(e2 in b.edges){var f;if(b.edges[e2].source.id==b.id){f=b.edges[e2].target}else{f=b.edges[e2].source}if((a.layer>c.layer)&&(f.layer>c.layer)&&(f.xOrder<a.xOrder)){d++}}}}return d},isAcyclic:function(){var c=this.copy();var a=c.getLeafs();while(a.length!=0&&Object.keys(c.nodes).length!=0){var b=a.pop();c.removeNode(b);a=c.getLeafs()}if(Object.keys(c.nodes).length==0){return true}if(a.length==0){return false}},getMinimalFAS:function(){var b=new Array();var d=new Graph();var a=new Array();for(e in this.edges){var c=this.edges[e];d.addEdge(c.source.id,c.target.id);if(d.isAcyclic()){b.push(c)}else{d.removeEdge(c);a.push(c)}}return a},extractDAG:function(){var b=this.copy();var a=b.getMinimalFAS();b.removeEdges(a);return b},layerAssignment:function(){var f=Number.MAX_VALUE;finalC=-1;finalW=-1;for(var g=1;g<=2;g++){for(var a=1;a<=4;a++){var d=this.copy();var b=d.minWidthLayerAssignment(a,g);if(b<f){finalC=g;finalW=a;f=b}}}this.minWidthLayerAssignment(finalW,finalC);this.vertexPromotion();this.shiftLayers()},shiftLayers:function(){var b=Number.MAX_VALUE;for(n in this.nodes){var a=this.nodes[n].layer;if(a<b){b=a}}for(n in this.nodes){this.nodes[n].layer=this.nodes[n].layer-b}},promoteVertex:function(a){var d=0;var c=this.getInNodesTo(a);for(x in c){var b=c[x];if(b.layer==a.layer+1){d=d+this.promoteVertex(b)}}a.layer=a.layer+1;d=d-this.getInNodesTo(a).length+this.getOutNodesFrom(a).length;return d},vertexPromotion:function(){var f=this.copy();var b=-1;while(b!=0){b=0;for(x in this.nodes){var a=this.nodes[x];if(this.getInNodesTo(a).length>0){var c=this.promoteVertex(a);var d=(c<0);if(d){b=b+1;f=this.copy()}else{for(n in f.nodes){this.nodes[n].layer=f.nodes[n].layer}}}else{console.log("--- in degree is below zero")}}}},minWidthLayerAssignment:function(g,p){var t=0;var h=new Array();for(var f in this.nodes){h.push(this.nodes[f]);this.nodes[f].layer=-1}var j=new Array();var a=new Array();var o=1;var r=0;var u=0;while(!($(j).not(h).length==0&&$(h).not(j).length==0)){var b=$.grep(h,function(c){return $.inArray(c,j)<0});var m=new Array();for(f in b){var q=this.getOutNodesFrom(b[f]);if($(q).not(a).length==0){m.push(b[f])}}var d=false;var w=Number.MAX_VALUE;if(m.length!=0){d=true;var s=this.quickDegreeSort(m).pop();s.layer=o;j.push(s);w=this.getOutNodesFrom(s);r=r-this.getOutNodesFrom(s).length+1;u=u+this.getInNodesTo(s).length}if(!d||(r>=g&&w<1)||u>=p*g){o=o+1;for(f in j){a.push(j[f])}if(r>t){t=r}r=u;u=0}}return t},getOutNodesFrom:function(b){var a=new Array();for(var c in b.edges){if(b.edges[c].target.id!=b.id){a.push(b.edges[c].target)}}return a},getInNodesTo:function(a){var c=new Array();for(var b in a.edges){if(a.edges[b].source.id!=a.id){c.push(a.edges[b].source)}}return c},getStronglyConnectedComponents:function(){var d=new Array();var c=0;var a=new Array();for(n in this.nodes){var b=this.nodes[n];b.index=undefined;b.lowlink=Number.MAX_VALUE}for(n in this.nodes){var b=this.nodes[n];if(b.index==undefined){this.strongconnect(b,c,d,a)}}return a},strongconnect:function(d,f,g,b){d.index=f;d.lowlink=f;f=f+1;g.push(d);for(e in d.edges){var a=d.edges[e].target;if(a.id!=d.id){if(a.index==undefined){this.strongconnect(a,f,g,b);d.lowlink=Math.min(d.lowlink,a.lowlink)}else{if(g.indexOf(a)!=undefined){d.lowlink=Math.min(d.lowlink,a.lowlink)}}}}if(d.lowlink==d.index){var c=new Array();var a=g.pop();while(a.id!=d.id){c.push(a);var a=g.pop()}c.push(a);b.push(c)}},quickDegreeSort:function(d){if(d.length<=1){return d}var c=Math.floor(d.length/2);var h=d[c];var f=[],b=[],a=[];for(var g in d){this.nodeOutDegree(d[g])<this.nodeOutDegree(h)&&f.push(d[g]);this.nodeOutDegree(d[g])==this.nodeOutDegree(h)&&b.push(d[g]);this.nodeOutDegree(d[g])>this.nodeOutDegree(h)&&a.push(d[g])}return this.quickDegreeSort(f).concat(b).concat(this.quickDegreeSort(a))}};Graph.Node=function(b,a){a=a||{};a.id=b;a.edges=[];a.hide=function(){this.hidden=true;this.shape&&this.shape.hide();for(i in this.edges){(this.edges[i].source.id==b||this.edges[i].target==b)&&this.edges[i].hide&&this.edges[i].hide()}};a.show=function(){this.hidden=false;this.shape&&this.shape.show();for(i in this.edges){(this.edges[i].source.id==b||this.edges[i].target==b)&&this.edges[i].show&&this.edges[i].show()}};a.getAdjacents=function(){return this.edges.map(function(c){if(c.source.id==a.id){return c.target}else{return c.source}})};return a};Graph.Node.prototype={};function BinaryMinHeap(j,f){var a=[];var f=f||"key";var g=function(m){return Math.floor((m-1)/2)};var d=function(m){return 2*m+2};var h=function(m){return 2*m+1};function b(m){var o=g(m);while((o>=0)&&(a[m][f]<a[o][f])){a[m]=a.splice(o,1,a[m])[0];m=o;o=g(m)}}function c(o){var m=h(o);var p=d(o);while(a[m]&&(a[o][f]>a[m][f])||a[p]&&(a[o][f]>a[p][f])){var q=a[m]?a[p]?a[m][f]>a[p][f]?p:m:m:m;a[o]=a.splice(q,1,a[o])[0];o=q;m=h(o);p=d(o)}}this.insert=function(m){(m[f]==undefined)&&(m={key:m});a.push(m);b(a.length-1)};this.min=function(){return a.length==1?undefined:a[0]};this.extractMin=function(){var m=this.min();(a.length==1)&&(a=[])||(a[0]=a.pop())&&c(0);return m};this.changeKey=function(m,o){throw"function not implemented"};this.heapify=function(){for(var m=Math.floor((a.length-2)/2);m>=0;m--){c(m)}};for(i in (j||[])){this.insert(j[i])}}var jscolor={dir:"",bindClass:"color",binding:true,preloading:true,install:function(){jscolor.init()},init:function(){if(jscolor.binding){jscolor.bind()}if(jscolor.preloading){jscolor.preload()}},getDir:function(){if(!jscolor.dir){var a=jscolor.detectDir();jscolor.dir=a!==false?a:"jscolor/"}return jscolor.dir},detectDir:function(){var c=location.href;var d=document.getElementsByTagName("base");for(var a=0;a<d.length;a+=1){if(d[a].href){c=d[a].href}}var d=document.getElementsByTagName("script");for(var a=0;a<d.length;a+=1){if(d[a].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(d[a].src)){var f=new jscolor.URI(d[a].src);var b=f.toAbsolute(c);b.path=b.path.replace(/[^\/]+$/,"");b.query=null;b.fragment=null;return b.toString()}}return false},bind:function(){var d=new RegExp("(^|\\s)("+jscolor.bindClass+")(\\s*(\\{[^}]*\\})|\\s|$)","i");var f=document.getElementsByTagName("input");for(var c=0;c<f.length;c+=1){if(jscolor.isColorAttrSupported&&f[c].type.toLowerCase()=="color"){continue}var b;if(!f[c].color&&f[c].className&&(b=f[c].className.match(d))){var g={};if(b[4]){try{g=(new Function("return ("+b[4]+")"))()}catch(a){}}f[c].color=new jscolor.color(f[c],g)}}},preload:function(){for(var a in jscolor.imgRequire){if(jscolor.imgRequire.hasOwnProperty(a)){jscolor.loadImage(a)}}},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(a){jscolor.imgRequire[a]=true},loadImage:function(a){if(!jscolor.imgLoaded[a]){jscolor.imgLoaded[a]=new Image();jscolor.imgLoaded[a].src=jscolor.getDir()+a}},fetchElement:function(a){return typeof a==="string"?document.getElementById(a):a},addEvent:function(a,c,b){if(a.addEventListener){a.addEventListener(c,b,false)}else{if(a.attachEvent){a.attachEvent("on"+c,b)}}},fireEvent:function(a,c){if(!a){return}if(document.createEvent){var b=document.createEvent("HTMLEvents");b.initEvent(c,true,true);a.dispatchEvent(b)}else{if(document.createEventObject){var b=document.createEventObject();a.fireEvent("on"+c,b)}else{if(a["on"+c]){a["on"+c]()}}}},getElementPos:function(c){var d=c,b=c;var a=0,f=0;if(d.offsetParent){do{a+=d.offsetLeft;f+=d.offsetTop}while(d=d.offsetParent)}while((b=b.parentNode)&&b.nodeName.toUpperCase()!=="BODY"){a-=b.scrollLeft;f-=b.scrollTop}return[a,f]},getElementSize:function(a){return[a.offsetWidth,a.offsetHeight]},getRelMousePos:function(b){var a=0,c=0;if(!b){b=window.event}if(typeof b.offsetX==="number"){a=b.offsetX;c=b.offsetY}else{if(typeof b.layerX==="number"){a=b.layerX;c=b.layerY}}return{x:a,y:c}},getViewPos:function(){if(typeof window.pageYOffset==="number"){return[window.pageXOffset,window.pageYOffset]}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){return[document.body.scrollLeft,document.body.scrollTop]}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){return[document.documentElement.scrollLeft,document.documentElement.scrollTop]}else{return[0,0]}}}},getViewSize:function(){if(typeof window.innerWidth==="number"){return[window.innerWidth,window.innerHeight]}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){return[document.body.clientWidth,document.body.clientHeight]}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){return[document.documentElement.clientWidth,document.documentElement.clientHeight]}else{return[0,0]}}}},URI:function(a){this.scheme=null;this.authority=null;this.path="";this.query=null;this.fragment=null;this.parse=function(d){var c=d.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);this.scheme=c[3]?c[2]:null;this.authority=c[5]?c[6]:null;this.path=c[7];this.query=c[9]?c[10]:null;this.fragment=c[12]?c[13]:null;return this};this.toString=function(){var c="";if(this.scheme!==null){c=c+this.scheme+":"}if(this.authority!==null){c=c+"//"+this.authority}if(this.path!==null){c=c+this.path}if(this.query!==null){c=c+"?"+this.query}if(this.fragment!==null){c=c+"#"+this.fragment}return c};this.toAbsolute=function(f){var f=new jscolor.URI(f);var d=this;var c=new jscolor.URI();if(f.scheme===null){return false}if(d.scheme!==null&&d.scheme.toLowerCase()===f.scheme.toLowerCase()){d.scheme=null}if(d.scheme!==null){c.scheme=d.scheme;c.authority=d.authority;c.path=b(d.path);c.query=d.query}else{if(d.authority!==null){c.authority=d.authority;c.path=b(d.path);c.query=d.query}else{if(d.path===""){c.path=f.path;if(d.query!==null){c.query=d.query}else{c.query=f.query}}else{if(d.path.substr(0,1)==="/"){c.path=b(d.path)}else{if(f.authority!==null&&f.path===""){c.path="/"+d.path}else{c.path=f.path.replace(/[^\/]+$/,"")+d.path}c.path=b(c.path)}c.query=d.query}c.authority=f.authority}c.scheme=f.scheme}c.fragment=d.fragment;return c};function b(f){var c="";while(f){if(f.substr(0,3)==="../"||f.substr(0,2)==="./"){f=f.replace(/^\.+/,"").substr(1)}else{if(f.substr(0,3)==="/./"||f==="/."){f="/"+f.substr(3)}else{if(f.substr(0,4)==="/../"||f==="/.."){f="/"+f.substr(4);c=c.replace(/\/?[^\/]*$/,"")}else{if(f==="."||f===".."){f=""}else{var d=f.match(/^\/?[^\/]*/)[0];f=f.substr(d.length);c=c+d}}}}}return c}if(a){this.parse(a)}},color:function(I,f){this.required=true;this.adjust=true;this.hash=false;this.caps=true;this.slider=true;this.valueElement=I;this.styleElement=I;this.onImmediateChange=null;this.hsv=[0,0,1];this.rgb=[1,1,1];this.minH=0;this.maxH=6;this.minS=0;this.maxS=1;this.minV=0;this.maxV=1;this.pickerOnfocus=true;this.pickerMode="HSV";this.pickerPosition="bottom";this.pickerSmartPosition=true;this.pickerButtonHeight=20;this.pickerClosable=false;this.pickerCloseText="Close";this.pickerButtonColor="ButtonText";this.pickerFace=10;this.pickerFaceColor="ThreeDFace";this.pickerBorder=1;this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight";this.pickerInset=1;this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow";this.pickerZIndex=10000;for(var z in f){if(f.hasOwnProperty(z)){this[z]=f[z]}}this.hidePicker=function(){if(B()){j()}};this.showPicker=function(){if(!B()){var R=jscolor.getElementPos(I);var O=jscolor.getElementSize(I);var L=jscolor.getViewPos();var T=jscolor.getViewSize();var p=A(this);var S,Q,P;switch(this.pickerPosition.toLowerCase()){case"left":S=1;Q=0;P=-1;break;case"right":S=1;Q=0;P=1;break;case"top":S=0;Q=1;P=-1;break;default:S=0;Q=1;P=1;break}var N=(O[Q]+p[Q])/2;if(!this.pickerSmartPosition){var M=[R[S],R[Q]+O[Q]-N+N*P]}else{var M=[-L[S]+R[S]+p[S]>T[S]?(-L[S]+R[S]+O[S]/2>T[S]/2&&R[S]+O[S]-p[S]>=0?R[S]+O[S]-p[S]:R[S]):R[S],-L[Q]+R[Q]+O[Q]+p[Q]-N+N*P>T[Q]?(-L[Q]+R[Q]+O[Q]/2>T[Q]/2&&R[Q]+O[Q]-N-N*P>=0?R[Q]+O[Q]-N-N*P:R[Q]+O[Q]-N+N*P):(R[Q]+O[Q]-N+N*P>=0?R[Q]+O[Q]-N+N*P:R[Q]+O[Q]-N-N*P)]}r(M[S],M[Q])}};this.importColor=function(){if(!a){this.exportColor()}else{if(!this.adjust){if(!this.fromString(a.value,E)){K.style.backgroundImage=K.jscStyle.backgroundImage;K.style.backgroundColor=K.jscStyle.backgroundColor;K.style.color=K.jscStyle.color;this.exportColor(E|J)}}else{if(!this.required&&/^\s*$/.test(a.value)){a.value="";K.style.backgroundImage=K.jscStyle.backgroundImage;K.style.backgroundColor=K.jscStyle.backgroundColor;K.style.color=K.jscStyle.color;this.exportColor(E|J)}else{if(this.fromString(a.value)){}else{this.exportColor()}}}}};this.exportColor=function(p){if(!(p&E)&&a){var L=this.toString();if(this.caps){L=L.toUpperCase()}if(this.hash){L="#"+L}a.value=L}if(!(p&J)&&K){K.style.backgroundImage="none";K.style.backgroundColor="#"+this.toString();K.style.color=0.213*this.rgb[0]+0.715*this.rgb[1]+0.072*this.rgb[2]<0.5?"#FFF":"#000"}if(!(p&C)&&B()){y()}if(!(p&g)&&B()){H()}};this.fromHSV=function(N,M,L,p){if(N!==null){N=Math.max(0,this.minH,Math.min(6,this.maxH,N))}if(M!==null){M=Math.max(0,this.minS,Math.min(1,this.maxS,M))}if(L!==null){L=Math.max(0,this.minV,Math.min(1,this.maxV,L))}this.rgb=m(N===null?this.hsv[0]:(this.hsv[0]=N),M===null?this.hsv[1]:(this.hsv[1]=M),L===null?this.hsv[2]:(this.hsv[2]=L));this.exportColor(p)};this.fromRGB=function(P,O,p,L){if(P!==null){P=Math.max(0,Math.min(1,P))}if(O!==null){O=Math.max(0,Math.min(1,O))}if(p!==null){p=Math.max(0,Math.min(1,p))}var N=F(P===null?this.rgb[0]:P,O===null?this.rgb[1]:O,p===null?this.rgb[2]:p);if(N[0]!==null){this.hsv[0]=Math.max(0,this.minH,Math.min(6,this.maxH,N[0]))}if(N[2]!==0){this.hsv[1]=N[1]===null?null:Math.max(0,this.minS,Math.min(1,this.maxS,N[1]))}this.hsv[2]=N[2]===null?null:Math.max(0,this.minV,Math.min(1,this.maxV,N[2]));var M=m(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=M[0];this.rgb[1]=M[1];this.rgb[2]=M[2];this.exportColor(L)};this.fromString=function(M,L){var p=M.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);if(!p){return false}else{if(p[1].length===6){this.fromRGB(parseInt(p[1].substr(0,2),16)/255,parseInt(p[1].substr(2,2),16)/255,parseInt(p[1].substr(4,2),16)/255,L)}else{this.fromRGB(parseInt(p[1].charAt(0)+p[1].charAt(0),16)/255,parseInt(p[1].charAt(1)+p[1].charAt(1),16)/255,parseInt(p[1].charAt(2)+p[1].charAt(2),16)/255,L)}return true}};this.toString=function(){return((256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1))};function F(P,O,L){var Q=Math.min(Math.min(P,O),L);var M=Math.max(Math.max(P,O),L);var p=M-Q;if(p===0){return[null,0,M]}var N=P===Q?3+(L-O)/p:(O===Q?5+(P-L)/p:1+(O-P)/p);return[N===6?0:N,p/M,M]}function m(O,N,L){if(O===null){return[L,L,L]}var M=Math.floor(O);var P=M%2?O-M:1-(O-M);var p=L*(1-N);var Q=L*(1-N*P);switch(M){case 6:case 0:return[L,Q,p];case 1:return[Q,L,p];case 2:return[p,L,Q];case 3:return[p,Q,L];case 4:return[Q,p,L];case 5:return[L,p,Q]}}function j(){delete jscolor.picker.owner;document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB)}function r(S,R){if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(s.pickerCloseText)};for(var P=0,Q=4;P<jscolor.images.sld[1];P+=Q){var O=document.createElement("div");O.style.height=Q+"px";O.style.fontSize="1px";O.style.lineHeight="0";jscolor.picker.sld.appendChild(O)}jscolor.picker.sldB.appendChild(jscolor.picker.sld);jscolor.picker.box.appendChild(jscolor.picker.sldB);jscolor.picker.box.appendChild(jscolor.picker.sldM);jscolor.picker.padB.appendChild(jscolor.picker.pad);jscolor.picker.box.appendChild(jscolor.picker.padB);jscolor.picker.box.appendChild(jscolor.picker.padM);jscolor.picker.btnS.appendChild(jscolor.picker.btnT);jscolor.picker.btn.appendChild(jscolor.picker.btnS);jscolor.picker.box.appendChild(jscolor.picker.btn);jscolor.picker.boxB.appendChild(jscolor.picker.box)}var L=jscolor.picker;L.box.onmouseup=L.box.onmouseout=function(){I.focus()};L.box.onmousedown=function(){u=true};L.box.onmousemove=function(p){if(d||v){d&&D(p);v&&o(p);if(document.selection){document.selection.empty()}else{if(window.getSelection){window.getSelection().removeAllRanges()}}h()}};if("ontouchstart" in window){var V=function(W){var p={offsetX:W.touches[0].pageX-q.X,offsetY:W.touches[0].pageY-q.Y};if(d||v){d&&D(p);v&&o(p);h()}W.stopPropagation();W.preventDefault()};L.box.removeEventListener("touchmove",V,false);L.box.addEventListener("touchmove",V,false)}L.padM.onmouseup=L.padM.onmouseout=function(){if(d){d=false;jscolor.fireEvent(a,"change")}};L.padM.onmousedown=function(p){switch(b){case 0:if(s.hsv[2]===0){s.fromHSV(null,null,1)}break;case 1:if(s.hsv[1]===0){s.fromHSV(null,1,null)}break}v=false;d=true;D(p);h()};if("ontouchstart" in window){L.padM.addEventListener("touchstart",function(p){q={X:p.target.offsetParent.offsetLeft,Y:p.target.offsetParent.offsetTop};this.onmousedown({offsetX:p.touches[0].pageX-q.X,offsetY:p.touches[0].pageY-q.Y})})}L.sldM.onmouseup=L.sldM.onmouseout=function(){if(v){v=false;jscolor.fireEvent(a,"change")}};L.sldM.onmousedown=function(p){d=false;v=true;o(p);h()};if("ontouchstart" in window){L.sldM.addEventListener("touchstart",function(p){q={X:p.target.offsetParent.offsetLeft,Y:p.target.offsetParent.offsetTop};this.onmousedown({offsetX:p.touches[0].pageX-q.X,offsetY:p.touches[0].pageY-q.Y})})}var U=A(s);L.box.style.width=U[0]+"px";L.box.style.height=U[1]+"px";L.boxB.style.position="absolute";L.boxB.style.clear="both";L.boxB.style.left=S+"px";L.boxB.style.top=R+"px";L.boxB.style.zIndex=s.pickerZIndex;L.boxB.style.border=s.pickerBorder+"px solid";L.boxB.style.borderColor=s.pickerBorderColor;L.boxB.style.background=s.pickerFaceColor;L.pad.style.width=jscolor.images.pad[0]+"px";L.pad.style.height=jscolor.images.pad[1]+"px";L.padB.style.position="absolute";L.padB.style.left=s.pickerFace+"px";L.padB.style.top=s.pickerFace+"px";L.padB.style.border=s.pickerInset+"px solid";L.padB.style.borderColor=s.pickerInsetColor;L.padM.style.position="absolute";L.padM.style.left="0";L.padM.style.top="0";L.padM.style.width=s.pickerFace+2*s.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px";L.padM.style.height=L.box.style.height;L.padM.style.cursor="crosshair";L.sld.style.overflow="hidden";L.sld.style.width=jscolor.images.sld[0]+"px";L.sld.style.height=jscolor.images.sld[1]+"px";L.sldB.style.display=s.slider?"block":"none";L.sldB.style.position="absolute";L.sldB.style.right=s.pickerFace+"px";L.sldB.style.top=s.pickerFace+"px";L.sldB.style.border=s.pickerInset+"px solid";L.sldB.style.borderColor=s.pickerInsetColor;L.sldM.style.display=s.slider?"block":"none";L.sldM.style.position="absolute";L.sldM.style.right="0";L.sldM.style.top="0";L.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+s.pickerFace+2*s.pickerInset+"px";L.sldM.style.height=L.box.style.height;try{L.sldM.style.cursor="pointer"}catch(N){L.sldM.style.cursor="hand"}function T(){var p=s.pickerInsetColor.split(/\s+/);var W=p.length<2?p[0]:p[1]+" "+p[0]+" "+p[0]+" "+p[1];L.btn.style.borderColor=W}L.btn.style.display=s.pickerClosable?"block":"none";L.btn.style.position="absolute";L.btn.style.left=s.pickerFace+"px";L.btn.style.bottom=s.pickerFace+"px";L.btn.style.padding="0 15px";L.btn.style.height="18px";L.btn.style.border=s.pickerInset+"px solid";T();L.btn.style.color=s.pickerButtonColor;L.btn.style.font="12px sans-serif";L.btn.style.textAlign="center";try{L.btn.style.cursor="pointer"}catch(N){L.btn.style.cursor="hand"}L.btn.onmousedown=function(){s.hidePicker()};L.btnS.style.lineHeight=L.btn.style.height;switch(b){case 0:var M="hs.png";break;case 1:var M="hv.png";break}L.padM.style.backgroundImage="url('"+jscolor.getDir()+"cross.gif')";L.padM.style.backgroundRepeat="no-repeat";L.sldM.style.backgroundImage="url('"+jscolor.getDir()+"arrow.gif')";L.sldM.style.backgroundRepeat="no-repeat";L.pad.style.backgroundImage="url('"+jscolor.getDir()+M+"')";L.pad.style.backgroundRepeat="no-repeat";L.pad.style.backgroundPosition="0 0";y();H();jscolor.picker.owner=s;document.getElementsByTagName("body")[0].appendChild(L.boxB)}function A(L){var p=[2*L.pickerInset+2*L.pickerFace+jscolor.images.pad[0]+(L.slider?2*L.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),L.pickerClosable?4*L.pickerInset+3*L.pickerFace+jscolor.images.pad[1]+L.pickerButtonHeight:2*L.pickerInset+2*L.pickerFace+jscolor.images.pad[1]];return p}function y(){switch(b){case 0:var N=1;break;case 1:var N=2;break}var R=Math.round((s.hsv[0]/6)*(jscolor.images.pad[0]-1));var Q=Math.round((1-s.hsv[N])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=(s.pickerFace+s.pickerInset+R-Math.floor(jscolor.images.cross[0]/2))+"px "+(s.pickerFace+s.pickerInset+Q-Math.floor(jscolor.images.cross[1]/2))+"px";var p=jscolor.picker.sld.childNodes;switch(b){case 0:var P=m(s.hsv[0],s.hsv[1],1);for(var L=0;L<p.length;L+=1){p[L].style.backgroundColor="rgb("+(P[0]*(1-L/p.length)*100)+"%,"+(P[1]*(1-L/p.length)*100)+"%,"+(P[2]*(1-L/p.length)*100)+"%)"}break;case 1:var P,S,O=[s.hsv[2],0,0];var L=Math.floor(s.hsv[0]);var M=L%2?s.hsv[0]-L:1-(s.hsv[0]-L);switch(L){case 6:case 0:P=[0,1,2];break;case 1:P=[1,0,2];break;case 2:P=[2,0,1];break;case 3:P=[2,1,0];break;case 4:P=[1,2,0];break;case 5:P=[0,2,1];break}for(var L=0;L<p.length;L+=1){S=1-1/(p.length-1)*L;O[1]=O[0]*(1-S*M);O[2]=O[0]*(1-S);p[L].style.backgroundColor="rgb("+(O[P[0]]*100)+"%,"+(O[P[1]]*100)+"%,"+(O[P[2]]*100)+"%)"}break}}function H(){switch(b){case 0:var p=2;break;case 1:var p=1;break}var L=Math.round((1-s.hsv[p])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition="0 "+(s.pickerFace+s.pickerInset+L-Math.floor(jscolor.images.arrow[1]/2))+"px"}function B(){return jscolor.picker&&jscolor.picker.owner===s}function w(){if(a===I){s.importColor()}if(s.pickerOnfocus){s.hidePicker()}}function t(){if(a!==I){s.importColor()}}function D(M){var L=jscolor.getRelMousePos(M);var p=L.x-s.pickerFace-s.pickerInset;var N=L.y-s.pickerFace-s.pickerInset;switch(b){case 0:s.fromHSV(p*(6/(jscolor.images.pad[0]-1)),1-N/(jscolor.images.pad[1]-1),null,g);break;case 1:s.fromHSV(p*(6/(jscolor.images.pad[0]-1)),null,1-N/(jscolor.images.pad[1]-1),g);break}}function o(L){var p=jscolor.getRelMousePos(L);var M=p.y-s.pickerFace-s.pickerInset;switch(b){case 0:s.fromHSV(null,null,1-M/(jscolor.images.sld[1]-1),C);break;case 1:s.fromHSV(null,1-M/(jscolor.images.sld[1]-1),null,C);break}}function h(){if(s.onImmediateChange){var p;if(typeof s.onImmediateChange==="string"){p=new Function(s.onImmediateChange)}else{p=s.onImmediateChange}p.call(s)}}var s=this;var b=this.pickerMode.toLowerCase()==="hvs"?1:0;var u=false;var a=jscolor.fetchElement(this.valueElement),K=jscolor.fetchElement(this.styleElement);var d=false,v=false,q={};var E=1<<0,J=1<<1,C=1<<2,g=1<<3;jscolor.isColorAttrSupported=false;var c=document.createElement("input");if(c.setAttribute){c.setAttribute("type","color");if(c.type.toLowerCase()=="color"){jscolor.isColorAttrSupported=true}}jscolor.addEvent(I,"focus",function(){if(s.pickerOnfocus){s.showPicker()}});jscolor.addEvent(I,"blur",function(){if(!u){window.setTimeout(function(){u||w();u=false},0)}else{u=false}});if(a){var G=function(){s.fromString(a.value,E);h()};jscolor.addEvent(a,"keyup",G);jscolor.addEvent(a,"input",G);jscolor.addEvent(a,"blur",t);a.setAttribute("autocomplete","off")}if(K){K.jscStyle={backgroundImage:K.style.backgroundImage,backgroundColor:K.style.backgroundColor,color:K.style.color}}switch(b){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png");break}jscolor.requireImage("cross.gif");jscolor.requireImage("arrow.gif");this.importColor()}};jscolor.install();var metExploreD3={GraphUtils:"",GraphCaption:"",GraphNetwork:"",GraphLink:"",GraphFunction:"",GraphMapping:"",GraphPanel:"",GraphPath:"",GraphNode:"",testWSMappingGraphToken:function(c,b,a,d){var f={token:c,Content:b,pathways:a};Ext.Ajax.request({method:"POST",url:"http://metexplore.toulouse.inra.fr:8080/metExploreWebService/mapping/launchtokenmapping/inchi/1363/filteredbypathways/",jsonData:f,success:function(g,h){var j=Ext.decode(g.responseText);d(j)},failure:function(g,h){console.log(g)}})},testWSMappingPathways:function(a,b){var c={token:"",Content:a};Ext.Ajax.request({method:"POST",url:"http://metexplore.toulouse.inra.fr:8080/metExploreWebService/mapping/launchtokenmapping/inchi/1363/aspathways/",jsonData:c,success:function(d,f){var g=Ext.decode(d.responseText);b(g)},failure:function(d,f){console.log(d)}})},testWSMappingGraph:function(b,d,c){var a="";d.forEach(function(g){a+=g;if(d.indexOf(g)!=d.length-1){a+=","}});var f={token:"",Content:b,pathways:"("+a+")"};Ext.Ajax.request({method:"POST",url:"http://metexplore.toulouse.inra.fr:8080/metExploreWebService/mapping/launchtokenmapping/inchi/1363/filteredbypathways/",jsonData:f,success:function(g,h){var j=Ext.decode(g.responseText);c(j)},failure:function(g,h){console.log(g)}})},resetMetExploreViz:function(){metExploreD3.fireEvent("selectConditionForm","resetMapping");metExploreD3.fireEvent("graphPanel","initSearch");if(_metExploreViz.getMappingsLength()>0&&d=="viz"){metExploreD3.fireEventArg("buttonMap","reloadMapping",false);metExploreD3.fireEventArg("buttonRefresh","reloadMapping",false);_metExploreViz.resetMappings()}var c=Ext.getCmp("comparisonSidePanel");if(c!=undefined){c.collapse()}if(Ext.getCmp("maskInit")!=undefined){var a=Ext.getCmp("maskInit");a.show();Ext.getCmp("buttonImportToNetworkFromWebsite").setDisabled(true)}var f=_metExploreViz.getSessionsSet();for(var d in f){if(f[d].getForce()!=undefined){f[d].getForce().on("end",null);f[d].getForce().stop()}if(f[d].getId()!="viz"){if(Ext.getCmp(f[d].getId().replace("-body",""))!=null){Ext.getCmp(f[d].getId().replace("-body","")).destroy()}}}d3.select("#viz").select("#D3viz").remove();_metExploreViz.sessions={};_metExploreViz.launched=false;_metExploreViz.dataFromWebSite=null;_metExploreViz.initialData=undefined;_metExploreViz.comparedPanels=[];_metExploreViz.mappings=[];_metExploreViz.linkedByTypeOfMetabolite=false;_metExploreViz.oldCoodinates=[];var b=new NetworkVizSession();b.setVizEngine("D3");b.setId("viz");b.setMapped("false");b.setDisplayNodeName("name");_metExploreViz.addSession(b)},getGlobals:function(){return _metExploreViz},newNetworkData:function(a){return new NetworkData(a)},newGeneralStyle:function(c,f,m,h,j,g,b,d,a){return new GeneralStyle(c,f,m,h,j,g,b,d,a)},getCompartmentInBiosourceSet:function(){return _metExploreViz.getSessionById("viz").getD3Data().getCompartments()},sortCompartmentInBiosource:function(){_metExploreViz.getSessionById("viz").getD3Data().sortCompartments()},getCompartmentInBiosourceLength:function(){return _metExploreViz.getSessionById("viz").getD3Data().getCompartmentsLength()},getCompartmentsGroup:function(){var c=[];var m=Math.ceil(Math.sqrt(metExploreD3.getCompartmentInBiosourceLength()));var f=parseInt(metExploreD3.GraphPanel.getHeight("viz"));var j=parseInt(metExploreD3.GraphPanel.getWidth("viz"));var p=f/m;var b=j/m;var o=p/2;var g=b/2;var d=-1;metExploreD3.getCompartmentInBiosourceSet().forEach(function(r){var q=metExploreD3.getCompartmentInBiosourceSet().indexOf(r)%m;if(q==0){d++}var s=g+(q*b);var t=o+(d*p);var h={key:r.getIdentifier(),center:{x:s,y:t}};c.push(h)});function a(q,h){if(h!=undefined){if(h.values==undefined){h.values=[]}if(h.values.indexOf(q)==-1){h.values.push(q)}}}_metExploreViz.getSessionById("viz").getD3Data().getLinks().forEach(function(r){var h=r.source;var q=r.target;if(h.getBiologicalType()=="metabolite"){a(h,c.find(function(s){return s.key==h.getCompartment()}));a(q,c.find(function(s){return s.key==h.getCompartment()}))}else{a(h,c.find(function(s){return s.key==q.getCompartment()}));a(q,c.find(function(s){return s.key==q.getCompartment()}))}});return c},getPathwaysSet:function(){return _metExploreViz.getSessionById("viz").getD3Data().getPathways()},getPathwaysGroup:function(){var c=[];var m=Math.ceil(Math.sqrt(metExploreD3.getPathwaysLength()));var f=parseInt(metExploreD3.GraphPanel.getHeight("viz"));var j=parseInt(metExploreD3.GraphPanel.getWidth("viz"));var p=f/m;var b=j/m;var o=p/2;var g=b/2;var d=-1;metExploreD3.getPathwaysSet().forEach(function(q){var r=metExploreD3.getPathwaysSet().indexOf(q)%m;if(r==0){d++}var s=g+(r*b);var t=o+(d*p);var h={key:q,center:{x:s,y:t}};c.push(h)});function a(q,h){if(h!=undefined){if(h.values==undefined){h.values=[]}if(h.values.indexOf(q)==-1){h.values.push(q)}}}_metExploreViz.getSessionById("viz").getD3Data().getLinks().forEach(function(r){var h=r.source;var q=r.target;if(h.getBiologicalType()=="reaction"){h.getPathways().forEach(function(s){a(h,c.find(function(t){return t.key==s}));a(q,c.find(function(t){return t.key==s}))})}else{q.getPathways().forEach(function(s){a(h,c.find(function(t){return t.key==s}));a(q,c.find(function(t){return t.key==s}))})}});return c},sortPathways:function(){_metExploreViz.getSessionById("viz").getD3Data().sortPathways()},getPathwaysLength:function(){return _metExploreViz.getSessionById("viz").getD3Data().getPathwaysLength()},setScale:function(b,a){_metExploreViz.getSessionById(a).setScale(b)},getScaleById:function(a){return _metExploreViz.getSessionById(a).getScale()},setMetabolitesSet:function(a){Ext.getStore("S_Metabolite")=a},getMetabolitesSet:function(){return Ext.getStore("S_Metabolite")},getMetaboliteById:function(a,b){return a.getById(b)},setReactionsSet:function(a){Ext.getStore("S_Reaction")=a},getReactionsSet:function(){return Ext.getStore("S_Reaction")},getReactionById:function(a,b){return a.getById(b)},setReactionStyle:function(a){_metExploreViz.reactionStyle=a;metExploreD3.fireEvent("reactionStyleForm","setReactionStyle")},getReactionStyle:function(){return _metExploreViz.reactionStyle},getGeneralStyle:function(){return _metExploreViz.generalStyle},setGeneralStyle:function(a){_metExploreViz.generalStyle=a;metExploreD3.fireEvent("generalStyleForm","setGeneralStyle");metExploreD3.fireEvent("vizIdConvexHullMenu","setGeneralStyle");metExploreD3.fireEvent("buttonImportToNetworkFromWebsite","setGeneralStyle")},setMetaboliteStyle:function(a){_metExploreViz.metaboliteStyle=a;metExploreD3.fireEvent("metaboliteStyleForm","setMetaboliteStyle")},getMetaboliteStyle:function(){return _metExploreViz.metaboliteStyle},setLinkStyle:function(a){_metExploreViz.linkStyle=a},getLinkStyle:function(){return _metExploreViz.linkStyle},setConditionsSet:function(a){Ext.getStore("S_Condition")=a},getConditionsSet:function(){return Ext.getStore("S_Condition")},getConditionById:function(a,b){return a.getById(b)},getConditionsSetLength:function(a){return a.getCount()},getConditionsMapped:function(){return Ext.getCmp("selectConditionForm").lookupReference("selectCondition").lastValue},setMappingInfosSet:function(a){Ext.getStore("S_MappingInfo")=a},getMappingInfosSet:function(){return Ext.getStore("S_MappingInfo")},getMappingInfoById:function(a,b){return a.getById(b)},findMappingInfo:function(b,c,a){return b.findRecord(c,a)},newReactionMapStore:function(a){return Ext.create("Ext.data.Store",{fields:["id","ec","name","reversible"]})},addReactionMap:function(f,b,d,c,a){f.add({id:b,ec:d,name:c,reversible:a})},getReactionMapsSetLength:function(a){return a.getCount()},getMappingSelection:function(){var a=Ext.getCmp("selectMappingVisu");return a.getValue()},showMask:function(a){a.show()},hideMask:function(a){a.hide()},createLoadMask:function(b,a){if(a!="viz"){var c=a.substring(0,a.length-5)}else{var c=a}if(c!=undefined){return new Ext.LoadMask({target:Ext.getCmp(c),msg:b,msgCls:"msgClsCustomLoadMask"})}else{return undefined}},createDelayedTask:function(a){return new Ext.util.DelayedTask(a)},fixDelay:function(a,b){a.delay(b)},stopTask:function(a){a.cancel()},fireEvent2Arg:function(f,d,c,a){var b=Ext.getCmp(f);if(b!=undefined){b.fireEvent(d,c,a)}},fireEventArg:function(d,c,a){var b=Ext.getCmp(d);if(b!=undefined){b.fireEvent(c,a)}},fireEvent:function(c,b){var a=Ext.getCmp(c);if(a!=undefined){a.fireEvent(b)}},hideInitialMask:function(b){var a=Ext.getCmp("buttonImportToNetworkFromWebsite");if(a!=undefined){a.fireEvent("hideMask")}},hideInitialLoadButtons:function(b){var a=Ext.getCmp("buttonImportToNetworkFromWebsite");if(a!=undefined){a.fireEvent("hideInitialLoadButtons")}},cartFilled:function(b){var a=Ext.getCmp("buttonImportToNetworkFromWebsite");if(a!=undefined){a.fireEvent("cartFilled")}a=Ext.getCmp("viz_LoadMenu");if(a!=undefined){a.fireEvent("cartFilled")}_metExploreViz.setDataFromWebSite(b)},fireEventParentWebSite:function(b,a){var c=new Event(b,a);c.value=a;_metExploreViz.getParentWebSite().document.dispatchEvent(c)},displayMessage:function(a,b){Ext.Msg.alert(a,b)},displayWarning:function(a,b){Ext.Msg.show({title:a,msg:b,buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})},displayMessageOK:function(a,c,b){Ext.Msg.show({title:a,msg:c,buttons:Ext.Msg.OKCANCEL,fn:b,icon:Ext.Msg.QUESTION})},displayMessageYesNo:function(a,c,b){Ext.Msg.confirm(a,c,b)},deferFunction:function(a,b){return new Ext.defer(a,b)},launchMetexploreFunction:function(a){if(_metExploreViz.getSessionById("viz")!=="undefined"){if(typeof _metExploreViz.getSessionById("viz").getForce()!=="undefined"){a();return}}setTimeout(function(){metExploreD3.launchMetexploreFunction(a)},1000)},onloadSession:function(a){metExploreD3.launchMetexploreFunction(a)},launchMetexploreMapping:function(b,a){if(_metExploreViz.getMappingByName(b)!=null){a();return}setTimeout(function(){metExploreD3.launchMetexploreMapping(b,a)},1000)},onloadMapping:function(b,a){metExploreD3.launchMetexploreMapping(b,a)},bioSourceControled:function(){return _metExploreViz.bioSourceControled()},setControlBioSource:function(a){_metExploreViz.setControlBioSource(a)}};var _metExploreViz;var metExploreViz=function(b,a){_metExploreViz=this;this.sessions={};this.launched=false;this.dataFromWebSite=null;this.panel=b;this.linkStyle=new LinkStyle(25,2,5,5,"red","green","black","0.7","black");this.reactionStyle=new ReactionStyle(15,30,3,3,"ec",9,"black",1);this.metaboliteStyle=new MetaboliteStyle(14,14,7,7,7,1,"name","#b2ae92");this.generalStyle=new GeneralStyle("Website","yellow","blue",500,false,false,false,false,false);this.initialData=undefined;this.biosource=undefined;this.comparedPanels=[];this.mappings=[];this.bioSourceControl=false;this.linkedByTypeOfMetabolite=false;this.parentWebSite=a;this.oldCoodinates=[];metExploreD3.fireEventArg("networkPanel","afterlunch",b);this.generalStyle.setWindowsAlertDisable(true)};metExploreViz.prototype={bioSourceControled:function(){return this.bioSourceControl},setControlBioSource:function(a){this.bioSourceControl=a},getBiosource:function(){return this.biosource},setBiosource:function(a){this.biosource=a},getDataFromWebSite:function(){return this.dataFromWebSite},setDataFromWebSite:function(a){this.dataFromWebSite=a},getParentWebSite:function(){return this.parentWebSite},cloneNetworkData:function(b){var h=new NetworkData();var s,D,y,w,d,p,B,a,z,t,c,o,q,A;for(var u=0;u<b.nodes.length;u++){s=b.nodes[u];if(s.getName()!=undefined){D=s.getName().valueOf()}else{D=undefined}if(s.getCompartment()!=undefined){y=s.getCompartment().valueOf()}else{y=undefined}if(s.getDbIdentifier()!=undefined){w=s.getDbIdentifier().valueOf()}else{w=undefined}if(s.getEC()!=undefined){d=s.getEC().valueOf()}else{d=undefined}if(s.getId()!=undefined){p=s.getId().valueOf()}else{p=undefined}if(s.getReactionReversibility()!=undefined&&s.getBiologicalType()=="reaction"){B=s.getReactionReversibility().valueOf()}else{B=undefined}if(s.getIsSideCompound()!=undefined){a=s.getIsSideCompound().valueOf()}else{a=undefined}if(s.getBiologicalType()!=undefined){z=s.getBiologicalType().valueOf()}else{z=undefined}if(s.isSelected()!=undefined){t=s.isSelected().valueOf()}else{t=undefined}if(s.getLabelVisible()!=undefined){c=s.getLabelVisible().valueOf()}else{c=undefined}if(s.getSvg()!=undefined){o=s.getSvg().valueOf()}else{o=undefined}if(s.getSvgWidth()!=undefined){q=s.getSvgWidth().valueOf()}else{q=undefined}if(s.getSvgHeight()!=undefined){A=s.getSvgHeight().valueOf()}else{A=undefined}h.addNode(D,y,w,p,B,z,t,c,o,q,A,a,d)}for(var u=0;u<b.links.length;u++){var p=b.links[u].getId().valueOf();var g=b.links[u].getSource();var r=h.nodes[g];var v=b.links[u].getTarget();var C=h.nodes[v];var f=b.links[u].getInteraction().valueOf();var m=b.links[u].isReversible().valueOf();h.links[u]=new LinkData(p,r,C,f,m)}return h},cloneSession:function(){var j=this.getSessionById("viz");var b=new NetworkVizSession();b.reset();var g,c,q,o,r,d,p,t,u,f,h,m,a,s;j.getD3Data().getNodes().forEach(function(y){if(y.getName()!=undefined){c=y.getName().valueOf()}else{c=undefined}if(y.getCompartment()!=undefined){q=y.getCompartment().valueOf()}else{q=undefined}if(y.getDbIdentifier()!=undefined){o=y.getDbIdentifier().valueOf()}else{o=undefined}if(y.getEC()!=undefined){r=y.getEC().valueOf()}else{r=undefined}if(y.getId()!=undefined){d=y.getId().valueOf()}else{d=undefined}if(y.getReactionReversibility()!=undefined&&y.getBiologicalType()=="reaction"){p=y.getReactionReversibility().valueOf()}else{p=undefined}if(y.getIsSideCompound()!=undefined){t=y.getIsSideCompound().valueOf()}else{t=undefined}if(y.getBiologicalType()!=undefined){u=y.getBiologicalType().valueOf()}else{u=undefined}if(y.isSelected()!=undefined){f=y.isSelected().valueOf()}else{f=undefined}if(y.getLabelVisible()!=undefined){h=y.getLabelVisible().valueOf()}else{h=undefined}if(y.getSvg()!=undefined){m=y.getSvg().valueOf()}else{m=undefined}if(y.getSvgWidth()!=undefined){a=y.getSvgWidth().valueOf()}else{a=undefined}if(y.getSvgHeight()!=undefined){s=y.getSvgHeight().valueOf()}else{s=undefined}if(y.getIdentifier()!=undefined){identif=y.getIdentifier().valueOf()}else{identif=undefined}var v=false;if(y.isDuplicated()!=undefined){v=y.isDuplicated().valueOf()}else{v=false}var w=b.d3Data.addNode(c,q,o,d,p,u,f,h,m,a,s,t,r,v,identif)});j.getD3Data().getLinks().forEach(function(w){var D=w.getId().valueOf();var B=w.getSource();var y=b.d3Data.nodes[j.getD3Data().getNodes().indexOf(B)];var C=w.getTarget();var A=b.d3Data.nodes[j.getD3Data().getNodes().indexOf(C)];var v=w.getInteraction().valueOf();var z=w.isReversible().valueOf();b.d3Data.addLink(D,y,A,v,z)});return b},getGeneralStyle:function(){return this.generalStyle},getMetaboliteStyle:function(){return this.metaboliteStyle},addSession:function(a){this.sessions[a.getId()]=a},getSessionsSet:function(){return this.sessions},getSessionById:function(a){return this.sessions[a]},getSessionsLength:function(){return this.sessions.length},removeSession:function(a){if(this.sessions[a]!=undefined){delete this.sessions[a]}},getInitialData:function(){return this.initialData},setInitialData:function(a){this.initialData=a},isLaunched:function(){return this.launched},setLaunched:function(a){this.launched=a},addComparedPanel:function(a){this.comparedPanels.push(a)},removeComparedPanel:function(b){var c=false;var a=0;while(!c){if(this.comparedPanels[a].getPanel()==b.getPanel()){this.comparedPanels.splice(a,1);c=true}a++}},getComparedPanelsLength:function(){return this.comparedPanels.length},getComparedPanelById:function(b){var a=null;this.comparedPanels.forEach(function(c){if(c.getPanel()==b){a=c}});return a},getOldCoodinates:function(){return this.oldCoodinates},addOldCoodinates:function(a){this.oldCoodinates.push(a)},resetOldCoodinates:function(){this.oldCoodinates=[]},getMappingsSet:function(){return this.mappings},addMapping:function(a){if(this.getMappingByName(a.getName())!=null){a.setName(a.getName()+"I");this.addMapping(a)}else{this.mappings.push(a)}},resetMappings:function(a){this.mappings=[];_metExploreViz.getSessionById("viz").getD3Data().resetMapping()},removeMapping:function(c){var b=false;var a=0;while(!b&&a<this.mappings.length){if(this.mappings[a].getName()==c){this.mappings.splice(a,1);b=true}a++}},getMappingsLength:function(){return this.mappings.length},getMappingByName:function(b){var a=null;this.mappings.forEach(function(c){if(c.getName()==b){a=c}});return a},isLinkedByTypeOfMetabolite:function(){return this.linkedByTypeOfMetabolite},setLinkedByTypeOfMetabolite:function(a){this.linkedByTypeOfMetabolite=a}};var NetworkVizSession=function(){this.active=false;this.activeMapping="";this.animated=false;this.colorMappings=[];this.displayNodeName="";this.duplicatedNodes=[];this.d3Data=new NetworkData();this.force=undefined;this.forceCentroids=undefined;this.groups=[];this.id="";this.linked=false;this.mapped="none";this.mappingDataType="";this.metabolites=[];this.nodesMap=[];this.reactions=[];this.resizable=false;this.selectedNodes=[]};NetworkVizSession.prototype={getGroupByKey:function(b){var a=metExploreD3.getGeneralStyle().isDisplayedConvexhulls();var c=null;if(a=="Compartments"){this.groups.forEach(function(d){if(d.key.identifier==b){c=d}})}else{this.groups.forEach(function(d){if(d.key==b){c=d}})}return c},getActiveMapping:function(){return this.activeMapping},setActiveMapping:function(a){this.activeMapping=a},getColorMappingsSet:function(){return this.colorMappings},getColorMappingById:function(b){var a=null;this.colorMappings.forEach(function(c){if(c.getName()==b){a=c}});return a},getColorMappingsSetLength:function(){return this.colorMappings.length},resetColorMapping:function(){this.colorMappings=[]},addColorMapping:function(b,a){this.colorMappings.push(new ColorMapping(b,a))},addSelectedNode:function(a){if(this.selectedNodes==undefined){this.selectedNodes=[]}this.selectedNodes.push(a)},addDuplicatedNode:function(a){if(this.duplicatedNodes==undefined){this.duplicatedNodes=[]}this.duplicatedNodes.push(a)},isAnimated:function(){return this.animated},setAnimated:function(a){this.animated=a},isActive:function(){return this.active},setActivity:function(a){this.active=a},addSelectedNodes:function(a){if(this.selectedNodes==undefined){this.selectedNodes=[]}for(n in a){this.selectedNodes.push(nodeId)}},addDuplicatedNodes:function(a){if(this.duplicatedNodes==undefined){this.duplicatedNodes=[]}for(n in a){this.duplicatedNodes.push(nodeId)}},reset:function(){this.emptyMetabolites();this.emptyReactions();this.selectedNodes=[];this.groups=[];this.nodesMap=[]},getId:function(){return this.id},setId:function(a){this.id=a},getScale:function(){return this.scale},setScale:function(a){this.scale=a},getDisplayNodeName:function(){return this.displayNodeName},setDisplayNodeName:function(a){this.displayNodeName=a},getMetaboliteStyle:function(){return this.metaboliteStyle},setMetaboliteStyle:function(a){this.metaboliteStyle=a},getMappingDataType:function(){return this.mappingDataType},setMappingDataType:function(a){this.mappingDataType=a},isResizable:function(){return this.resizable},setResizable:function(a){this.resizable=a},isMapped:function(){return this.mapped},setMapped:function(a){this.mapped=a},isLinked:function(){return this.linked},setLinked:function(a){this.linked=a},getLinkStyle:function(){return this.linkStyle},setLinkStyle:function(a){this.linkStyle=a},getReactionStyle:function(){return this.reactionStyle},setReactionStyle:function(a){this.reactionStyle=a},getD3Data:function(){return this.d3Data},setD3Data:function(a){this.d3Data=a},getForce:function(){return this.force},setForce:function(a){this.force=a},getForceCentroids:function(){return this.forceCentroids},setForceCentroids:function(a){this.forceCentroids=a},getNodesMap:function(){if(this.nodesMap==undefined){this.nodesMap=new Object()}return this.nodesMap},removeSelectedNode:function(c){var b=false;var a=0;while(!b){if(this.selectedNodes[a]==c){this.selectedNodes.splice(a,1);b=true}a++}},removeAllSelectedNodes:function(){while(this.selectedNodes.length>0){this.selectedNodes.pop()}},getSelectedNodes:function(){return this.selectedNodes},removeDuplicatedNode:function(c){var b=false;var a=0;while(!b){if(this.duplicatedNodes[a]==c){this.duplicatedNodes.splice(a,1);b=true}a++}},removeAllDuplicatedNodes:function(){while(this.duplicatedNodes.length>0){this.duplicatedNodes.pop()}},getDuplicatedNodes:function(){return this.duplicatedNodes},getDuplicatedNodesCount:function(){return this.duplicatedNodes.length},removeReaction:function(c){var b=false;var a=0;while(!b){if(this.getReactions()[a].id==c){this.getReactions().splice(a,1);b=true}a++}},removeMetabolite:function(b){var c=false;var a=0;while(!c){if(this.getMetabolites()[a].id==b){this.getMetabolites().splice(a,1);c=true}a++}},getReactions:function(){return this.reactions},getMetabolites:function(){return this.metabolites},emptyReactions:function(){this.reactions=[]},emptyMetabolites:function(){this.metabolites=[]},setVizEngine:function(a){this.vizEngine=a},getVizEngine:function(){return this.vizEngine}};var LinkData=function(f,b,d,a,c){this.id=f;this.source=b;this.target=d;this.interaction=a;this.reversible=c};LinkData.prototype={equals:function(a){if(this.id!=a.id){return false}return true},isReversible:function(){return this.reversible},getId:function(){return this.id},setInteraction:function(a){this.interaction=a},getInteraction:function(){return this.interaction},getSource:function(){return this.source},getTarget:function(){return this.target},setSource:function(a){this.source=a},setTarget:function(a){this.target=a}};var NodeData=function(w,p,f,g,o,r,u,v,j,b,m,q,c,a,t,d,h,s){this.name=w;this.dbIdentifier=f;this.ec=g;this.id=o;this.identifier=d;this.reactionReversibility=r;this.isSideCompound=u;this.biologicalType=v;this.selected=j;this.duplicated=t;this.labelVisible=b;this.svg=m;this.svgWidth=q;this.svgHeight=c;if(h==undefined){this.pathways=[]}else{this.pathways=h}this.compartment=p;if(a==undefined){a=[]}this.mappingDatas=a;if(s==undefined){s=false}this.locked=s};NodeData.prototype={equals:function(a){var b=true;if(this.id!=a.id){b=false}return b},toString:function(){return this.id},isSelected:function(){return this.selected},setIsSelected:function(a){this.selected=a},isLocked:function(){return this.locked},setLocked:function(a){this.locked=a},isDuplicated:function(){return this.duplicated},setIsDuplicated:function(a){this.duplicated=a},getIsSideCompound:function(){return this.isSideCompound},setIsSideCompound:function(a){this.isSideCompound=a},getId:function(){return this.id},getIdentifier:function(){return this.identifier},getDbIdentifier:function(){return this.dbIdentifier},getBiologicalType:function(){return this.biologicalType},getLabelVisible:function(){return this.labelVisible},getReactionReversibility:function(){return this.reactionReversibility},setReactionReversibility:function(a){this.reactionReversibility=a},getName:function(){return this.name},getId:function(){return this.id},getSvg:function(){return this.svg},getSvgHeight:function(){return this.svgHeight},getSvgWidth:function(){return this.svgWidth},getCompartment:function(){return this.compartment},getEC:function(){return this.ec},resetMapping:function(){this.mappingDatas=[]},addMappingData:function(a){this.mappingDatas.push(a)},removeMappingData:function(a){var b=[];this.mappingDatas.forEach(function(c){if(c.getMappingName()==a){b.push(c)}});b.forEach(function(d){var c=b.indexOf(d);if(c!=-1){b.splice(c,1)}})},getMappingDatasLength:function(){return this.mappingDatas.length},getMappingDatas:function(){return this.mappingDatas},getMappingDataByNameAndCond:function(a,b){var c=null;this.mappingDatas.forEach(function(d){if(d.getMappingName()==a&&d.getConditionName()==b){c=d}});return c},setMappingDataByNameAndCond:function(a,b,d){var c=null;this.mappingDatas.forEach(function(f){if(f.getMappingName()==a&&f.getConditionName()==b){c=f}});c.setMapValue(d)},getPathways:function(){return this.pathways},setPathways:function(a){this.pathways=a},addPathway:function(a){if(this.pathways.indexOf(a)==-1){this.pathways.push(a)}}};var NetworkData=function(a){this.id=a;this.biosource=undefined;this.nodes=[];this.links=[];this.compartments=[];this.pathways=[]};NetworkData.prototype={resetMapping:function(){this.nodes.forEach(function(a){a.resetMapping()})},removeMapping:function(a){this.nodes.forEach(function(b){b.removeMappingData(a)})},initNodeIndex:function(){tabNodes=this.nodes;this.nodes.forEach(function(a){a.index=tabNodes.indexOf(a)})},getNodes:function(){return this.nodes},setId:function(a){this.id=a},getId:function(){return this.id},copyData:function(a){this.nodes=a.getNodes();this.links=a.getLinks()},getNodesLength:function(){return this.nodes.length},getLinks:function(){return this.links},getCompartments:function(){return this.compartments},getCompartmentsLength:function(){return this.compartments.length},getCompartmentByName:function(b){var c=[];c=this.compartments;var a;for(i=0;i<c.length;i++){if(c[i].getName()==(b)){a=c[i];return a}}return null},sortCompartments:function(){this.compartments.sort(function(d,c){if(d.name>c.name){return 1}if(d.name<c.name){return -1}return 0})},addCompartment:function(b){if(this.compartments==undefined){this.compartments=[]}var a=new Compartment(this.compartments.length,b);this.compartments.push(a)},getPathways:function(){return this.pathways},getPathwaysLength:function(){return this.pathways.length},getPathwayByName:function(b){var c=[];c=this.pathways;var a;for(i=0;i<c.length;i++){if(c[i]==(b)){a=c[i];return a}}return null},sortPathways:function(){this.pathways.sort(function(d,c){if(d>c){return 1}if(d<c){return -1}return 0})},addPathway:function(a){if(this.pathways==undefined){this.pathways=[]}this.pathways.push(a)},containsNode:function(c){var b=[];var a=false;b=this.nodes;for(i=0;i<b.length;i++){if(b[i].getId()==(c)){a=true;break}}return a},getNodeById:function(c){var a=[];a=this.nodes;var b=undefined;for(i=0;i<a.length;i++){if(a[i].getId()==(c)){b=a[i];break}}return b},getNodeByName:function(a){var b=[];b=this.nodes;var c=undefined;for(i=0;i<b.length;i++){if(b[i].getName()==(a)){c=b[i];break}}return c},getNodeByDbIdentifier:function(c){var a=[];a=this.nodes;var b=undefined;for(i=0;i<a.length;i++){if(a[i].getDbIdentifier()==(c)){b=a[i];break}}return b},getNodeByMappedInchi:function(c){var b=[];b=this.nodes;var a=b.filter(function(d){return d.mappedInchi==(c)});if(a.length==0){a=undefined}return a},getLinkById:function(c){var a=[];a=this.links;var b;for(i=0;i<a.length;i++){if(a[i].getId()==(c)){b=a[i];break}}return b},getNode:function(a){return this.nodes[a]},getLink:function(a){return this.links[a]},addLink:function(g,c,f,a,d){if(this.links==undefined){this.links=[]}var b=new LinkData(g,c,f,a,d);this.links.push(b)},getDataNodes:function(){var a=[];this.nodes.forEach(function(b){a.push(b)});return a},addNodeCopy:function(a){this.nodes.push(a)},addNode:function(w,g,d,j,p,v,m,a,h,o,b,u,f,q,c,s,r){if(this.nodes==undefined){this.nodes=[]}var t=new NodeData(w,g,d,f,j,p,u,v,m,a,h,o,b,undefined,q,c,s,r);this.nodes.push(t);return t},getAdjLink:function(d){var a=[];var h=0;for(var b=0;b<this.links.length;b++){var c=this.links[b];var f=c.source;var g=c.target;if(d.id==f.id){a.push(c)}else{if(d.id==g.id){a.push(c)}}}return a},removeLink:function(a){for(k=0;k<this.links.length;k++){if(a.id==this.links[k].id){this.links.splice(k,1)}}},removeNode:function(d){var a=this.getAdjLink(d);if(a.length!=0){for(var c=0;c<a.length;c++){var f=a[c];this.removeLink(f)}}for(var b=0;b<this.nodes.length;b++){if(d.id==this.nodes[b].id){this.nodes.splice(b,1)}}},cloneObject:function(b){var a=this;b.links.forEach(function(c){a.addLink(c.id,c.source,c.target,c.interaction,c.reversible)});b.nodes.forEach(function(c){if(c.biologicalType=="reaction"){a.addNode(c.name,undefined,c.dbIdentifier,c.id,c.reactionReversibility,"reaction",false,true,undefined,undefined,undefined,undefined,c.ec,false,undefined,c.pathways,c.locked)}else{a.addNode(c.name,c.compartment,c.dbIdentifier,c.id,undefined,"metabolite",false,true,c.svg,c.svgWidth,c.svgHeight,c.isSideCompound,undefined,c.duplicated,c.identifier,c.pathways,c.locked)}if(c.mappingDatas!=undefined){if(c.mappingDatas.length>0){c.mappingDatas.forEach(function(d){var f=new MappingData(d.node,d.mappingName,d.conditionName,d.mapValue);a.nodes[a.nodes.length-1].addMappingData(f)})}}a.nodes[a.nodes.length-1].x=c.x;a.nodes[a.nodes.length-1].y=c.y})}};var GeneralStyle=function(g,j,q,o,p,m,f,h,a,c,b,d){this.websiteName=g;this.colorMinMappingContinuous=j;this.colorMaxMappingContinuous=q;this.maxReactionThreshold=o;this.displayLabelsForOpt=p;this.displayLinksForOpt=m;this.displayConvexhulls=f;this.displayCaption=a;this.eventForNodeInfo=c;this.loadButtonHidden=false;this.windowsAlertDisable=false;this.clustered=h};GeneralStyle.prototype={loadButtonIsHidden:function(){return this.loadButtonHidden},setLoadButtonIsHidden:function(a){this.loadButtonHidden=a;metExploreD3.fireEvent("graphPanel","setLoadButtonHidden")},windowsAlertIsDisable:function(){return this.windowsAlertDisable},setWindowsAlertDisable:function(a){this.windowsAlertDisable=a},getColorMinMappingContinuous:function(){return this.colorMinMappingContinuous},getColorMaxMappingContinuous:function(){return this.colorMaxMappingContinuous},setMaxColorMappingContinuous:function(a){this.colorMaxMappingContinuous=a},setMinColorMappingContinuous:function(a){this.colorMinMappingContinuous=a},getWebsiteName:function(){return this.websiteName},getReactionThreshold:function(){return this.maxReactionThreshold},setReactionThreshold:function(a){this.maxReactionThreshold=a},hasEventForNodeInfo:function(){return this.eventForNodeInfo},setEventForNodeInfo:function(a){this.eventForNodeInfo=a},isDisplayedLabelsForOpt:function(){return this.displayLabelsForOpt},setDisplayLabelsForOpt:function(a){this.displayLabelsForOpt=a},isDisplayedLinksForOpt:function(){return this.displayLinksForOpt},setDisplayLinksForOpt:function(a){this.displayLinksForOpt=a},isDisplayedConvexhulls:function(){return this.displayConvexhulls},setDisplayConvexhulls:function(a){this.displayConvexhulls=a},isDisplayedCaption:function(){return this.displayCaption},setDisplayCaption:function(a){this.displayCaption=a},useClusters:function(){return this.clustered},setUseClusters:function(a){this.clustered=a}};var LinkStyle=function(m,c,a,g,f,b,h,d,j){this.size=m;this.lineWidth=c;this.markerWidth=a;this.markerHeight=g;this.markerInColor=f;this.markerOutColor=b;this.markerStrokeColor=h;this.markerStrokeWidth=d;this.strokeColor=j};LinkStyle.prototype={getMarkerInColor:function(){return this.markerInColor},getLineWidth:function(){return this.lineWidth},getMarkerOutColor:function(){return this.markerOutColor},getSize:function(){return this.size},getMarkerWidth:function(){return this.markerWidth},getMarkerStrokeWidth:function(){return this.markerStrokeWidth},getMarkerHeight:function(){return this.markerHeight},getMarkerStrokeColor:function(){return this.markerStrokeColor},getStrokeColor:function(){return this.strokeColor},setMarkerInColor:function(a){this.markerInColor=a},setLineWidth:function(a){this.lineWidth=a},setMarkerOutColor:function(a){this.markerOutColor=a},setSize:function(a){this.size=a},setMarkerWidth:function(a){this.markerWidth=a},setMarkerStrokeWidth:function(a){this.markerStrokeWidth=a},setMarkerHeight:function(a){this.markerHeight=a},setMarkerStrokeColor:function(a){this.markerStrokeColor=a},setStrokeColor:function(a){this.strokeColor=a}};var MetaboliteStyle=function(a,c,h,g,f,j,b,d){this.height=a;this.width=c;this.rx=h;this.ry=g;this.strokeWidth=j;this.fontSize=f;this.label=b;this.strokeColor=d};MetaboliteStyle.prototype={getHeight:function(){return this.height},setHeight:function(a){this.height=a},getWidth:function(){return this.width},setWidth:function(a){this.width=a},getRX:function(){return this.rx},setRX:function(a){this.rx=a},getRY:function(){return this.ry},setRY:function(a){this.ry=a},getStrokeColor:function(){return this.strokeColor},setStrokeColor:function(a){this.strokeColor=a},getStrokeWidth:function(){return this.strokeWidth},setStrokeWidth:function(a){this.strokeWidth=a},getFontSize:function(){return this.fontSize},setFontSize:function(a){this.fontSize=a},getLabel:function(){return this.label},setLabel:function(a){this.label=a},getDisplayLabel:function(b,a){var c;switch(a){case"name":c=b.getName();break;case"dbIdentifier":c=b.getDbIdentifier();break;default:c=b.getName()}if(c==undefined){c=b.getName()}return c}};var ReactionStyle=function(a,c,h,g,b,f,d,j){this.height=a;this.width=c;this.rx=h;this.ry=g;this.label=b;this.strokeColor=d;this.fontSize=f;this.strokeWidth=j};ReactionStyle.prototype={getHeight:function(){return this.height},setHeight:function(a){this.height=a},getStrokeWidth:function(){return this.strokeWidth},setStrokeWidth:function(a){this.strokeWidth=a},getWidth:function(){return this.width},setWidth:function(a){this.width=a},getRX:function(){return this.rx},setRX:function(a){this.rx=a},getRY:function(){return this.ry},setRY:function(a){this.ry=a},getStrokeColor:function(){return this.strokeColor},setStrokeColor:function(a){this.strokeColor=a},getFontSize:function(){return this.fontSize},setFontSize:function(a){this.fontSize=a},getLabel:function(){return this.label},setLabel:function(a){this.label=a},getDisplayLabel:function(b,a){var c;switch(a){case"ec":c=b.getEC();break;case"name":c=b.getName();break;case"dbIdentifier":c=b.getDbIdentifier();break;default:c=b.getName()}if(c==undefined){c=b.getName()}return c}};var Compartment=function(b,a){this.id=b;this.identifier=a;this.name=a;this.color=""};Compartment.prototype={getIdentifier:function(){return this.identifier},getName:function(){return this.name},getColor:function(){return this.color},setColor:function(a){return this.color=a}};var Mapping=function(c,b,a){this.name=c;this.conditions=b;this.targetLabel=a;this.data=[]};Mapping.prototype={getName:function(){return this.name},setName:function(a){this.name=a},getConditions:function(){return this.conditions},getTargetLabel:function(){return this.targetLabel},getConditionByName:function(a){var b=null;this.comparedPanels.forEach(function(c){if(c.name==a){b=c}});return b},addMap:function(a){this.data.push(a)},getData:function(){return this.data}};var MappingData=function(c,b,a,d){this.node=c;this.mappingName=b;this.conditionName=a;this.mapValue=d};MappingData.prototype={getNode:function(){return this.node},setNode:function(a){this.node=a},getMappingName:function(){return this.mappingName},getConditionName:function(){return this.conditionName},getMapValue:function(){return this.mapValue},setMapValue:function(a){this.mapValue=a}};var Scale=function(a){this.graphName=a};Scale.prototype={setScale:function(a,h,b,g,c,f,d){this.xScale=a;this.yScale=h;this.zoomScale=b;this.xScaleCompare=g;this.yScaleCompare=c;this.zoomScaleCompare=f;this.zoom=d},getGraphName:function(){return this.graphName},setGraphName:function(a){this.graphName=a},getXScale:function(){return this.xScale},setXScale:function(a){this.xScale=a},getYScale:function(){return this.yScale},setYScale:function(a){this.yScale=a},getZoomScale:function(){return this.zoomScale},setZoomScale:function(a){this.zoomScale=a},getXScaleCompare:function(){return this.xScaleCompare},setXScaleCompare:function(a){this.xScaleCompare=a},getYScaleCompare:function(){return this.yScaleCompare},setYScaleCompare:function(a){this.yScaleCompare=a},getZoomScaleCompare:function(){return this.zoomScaleCompare},setZoomScaleCompare:function(a){this.zoomScaleCompare=a},getZoom:function(){return this.zoom},setZoom:function(a){this.zoom=a}};var ColorMapping=function(a,b){this.name=a;this.value=b};ColorMapping.prototype={getName:function(){return this.name},setName:function(a){this.name=a},getValue:function(){return this.value},setValue:function(a){this.value=a}};var ComparedPanel=function(a,d,b,c){this.panel=a;this.visible=d;this.parent=b;this.title=c};ComparedPanel.prototype={getPanel:function(){return this.panel},setPanel:function(a){this.panel=a},isVisible:function(){return this.visible},setVisible:function(a){this.visible=a},getParent:function(){return this.parent},setParent:function(a){this.parent=a},getTitle:function(){return this.title},setTitle:function(a){this.title=a}};d3.selection.enter.prototype=d3.selection.prototype.addNodeForm=function(c,a,g,d,f,b){this.append("rect").attr("class",function(h){return h.getBiologicalType()}).attr("id",function(h){return h.getId()}).attr("identifier",function(h){return h.getId()}).attr("width",c).attr("height",a).attr("rx",g).attr("ry",d).attr("transform","translate(-"+c/2+",-"+a/2+")").style("stroke",f).style("stroke-width",b);this.append("rect").attr("class","fontSelected").attr("width",c).attr("height",a).attr("rx",g).attr("ry",d).attr("transform","translate(-"+c/2+",-"+a/2+")").style("fill-opacity","0").style("fill","#000")};d3.selection.prototype.setNodeForm=function(c,a,g,d,f,b){this.style("opacity",1).select("rect").attr("width",c).attr("height",a).attr("rx",g).attr("ry",d).attr("transform","translate(-"+c/2+",-"+a/2+")").style("stroke",f).style("stroke-width",b);this.select(".fontSelected").attr("width",c).attr("height",a).attr("rx",g).attr("ry",d).attr("transform","translate(-"+c/2+",-"+a/2+")").style("stroke-width",b)};metExploreD3.GraphLink={link:"",panelParent:"",delayedInitialisation:function(a){metExploreD3.GraphLink.panelParent=a},funcPathForFlux:function(g,m,c){var r,y,p,a;var h=_metExploreViz.getSessionById("viz").getActiveMapping();var f=_metExploreViz.getSessionById(m).isMapped();var z,w;var o=undefined;var t=undefined;d3.select("#"+m).select("#D3viz").select("#graphComponent").selectAll(".linklabel").attr("x",function(A){return(A.source.x+A.target.x)/2}).attr("y",function(A){return(A.source.y+A.target.y)/2});var j=_metExploreViz.getSessionById("viz").getColorMappingsSet();j.forEach(function(A){if(t==undefined|A.getName()>t){t=A.getName()}});var v=d3.scale.linear().domain([-t,0,0,t]).range([-7,-1,1,7]);function u(A,E){var G=metExploreD3.getMetaboliteStyle();var C=metExploreD3.getReactionStyle();z=a.getMappingDataByNameAndCond(h,f[0]);w=a.getMappingDataByNameAndCond(h,f[1]);var F=Math.sqrt(Math.pow(E.x-A.x,2)+Math.pow(E.y-A.y,2));var D=(E.x-A.x);var B=(E.y-A.y);var I=D/Math.abs(D);var H=B/Math.abs(B);if(c=="linkRev"){if(w==null){var J=0}else{if(isNaN(w.getMapValue())){var J=0}else{var J=v(w.getMapValue())}}if(J==-1||J==1){J=0}if(J<0){p=d(E,A,J)}else{p=s(A,E,J)}}else{if(z==null){var J=0}else{if(isNaN(z.getMapValue())){var J=0}else{var J=v(z.getMapValue())}}if(J==-1||J==1){J=0}if(J<0){p=s(E,A,J)}else{p=d(A,E,J)}}return p}function s(R,af,S){var ad=metExploreD3.getMetaboliteStyle();var ab=metExploreD3.getReactionStyle();var aa=Math.sqrt(Math.pow(af.x-R.x,2)+Math.pow(af.y-R.y,2));var G=(af.x-R.x);var F=(af.y-R.y);var Q=G/Math.abs(G);var P=F/Math.abs(F);if(R.getBiologicalType()=="metabolite"){var Y=(Math.abs(aa)*ab.getWidth()/2)/Math.abs(G);var D=(Math.abs(aa)*ab.getHeight()/2)/Math.abs(F);var K=(Y<D)?rT=Y:rt=D}else{var Y=(Math.abs(aa)*ad.getWidth()/2)/Math.abs(G);var D=(Math.abs(aa)*ad.getHeight()/2)/Math.abs(F);var K=(Y<D)?rT=Y:rt=D}var T=R.x+G*((aa-K)/aa);var B=R.y+F*((aa-K)/aa);var H=2*Math.abs(S);if(H<3){H=3}var C=R.x+G*((aa-K-H)/aa);var M=R.y+F*((aa-K-H)/aa);var I=2.5*Math.abs(S);var Z=(2.5*Math.abs(S))*1/2;if(I<2){I=2}var O=C+F*(-I/aa);var V=M-G*(-I/aa);var E=C+F*(-Z/aa);var L=M-G*(-Z/aa);var ac=Math.abs(S);var N=R.x+G*(ac/aa);var A=R.y+F*(ac/aa);var X=N+F*(-Z/aa);var U=A-G*(-Z/aa);var ae=Math.sqrt(Math.pow(T-R.x,2)+Math.pow(B-R.y,2));if(H+ac>ae){X=E;U=L}var J=R.x;var W=R.y;if(c=="linkRev"){return"M"+(J+F*(-2/aa))+","+(W-G*(-2/aa))+"L"+(T+F*(-2/aa))+","+(B-G*(-2/aa))+"L"+(O+F*(-2/aa))+","+(V-G*(-2/aa))+"L"+(E+F*(-2/aa))+","+(L-G*(-2/aa))+"L"+(X+F*(-2/aa))+","+(U-G*(-2/aa))+"L"+(J+F*(-2/aa))+","+(W-G*(-2/aa))+"Z"}else{return"M"+J+","+W+"L"+T+","+B+"L"+O+","+V+"L"+E+","+L+"L"+X+","+U+"L"+R.x+","+R.y+"Z"}}function d(R,af,S){var ad=metExploreD3.getMetaboliteStyle();var ab=metExploreD3.getReactionStyle();var aa=Math.sqrt(Math.pow(af.x-R.x,2)+Math.pow(af.y-R.y,2));var G=(af.x-R.x);var F=(af.y-R.y);var Q=G/Math.abs(G);var P=F/Math.abs(F);if(R.getBiologicalType()=="metabolite"){var Y=(Math.abs(aa)*ab.getWidth()/2)/Math.abs(G);var D=(Math.abs(aa)*ab.getHeight()/2)/Math.abs(F);var K=(Y<D)?rT=Y:rt=D}else{var Y=(Math.abs(aa)*ad.getWidth()/2)/Math.abs(G);var D=(Math.abs(aa)*ad.getHeight()/2)/Math.abs(F);var K=(Y<D)?rT=Y:rt=D}var T=R.x+G*((aa-K)/aa);var B=R.y+F*((aa-K)/aa);var H=2*Math.abs(S);if(H<3){H=3}var C=R.x+G*((aa-K-H)/aa);var M=R.y+F*((aa-K-H)/aa);var I=2.5*Math.abs(S);var Z=(2.5*Math.abs(S))*1/2;if(I<2){I=2}var O=C+F*(I/aa);var V=M-G*(I/aa);var E=C+F*(Z/aa);var L=M-G*(Z/aa);var ac=Math.abs(S);var N=R.x+G*(ac/aa);var A=R.y+F*(ac/aa);var X=N+F*(Z/aa);var U=A-G*(Z/aa);var ae=Math.sqrt(Math.pow(T-R.x,2)+Math.pow(B-R.y,2));if(H+ac>ae){X=E;U=L}var J=R.x;var W=R.y;if(c=="linkRev"){return"M"+(J+F*(2/aa))+","+(W-G*(2/aa))+"L"+(T+F*(2/aa))+","+(B-G*(2/aa))+"L"+(O+F*(2/aa))+","+(V-G*(2/aa))+"L"+(E+F*(2/aa))+","+(L-G*(2/aa))+"L"+(X+F*(2/aa))+","+(U-G*(2/aa))+"L"+(J+F*(2/aa))+","+(W-G*(2/aa))+"Z"}else{return"M"+J+","+W+"L"+T+","+B+"L"+O+","+V+"L"+E+","+L+"L"+X+","+U+"L"+R.x+","+R.y+"Z"}}if(g.getSource().x==undefined){var b=_metExploreViz.getSessionById(m).getD3Data();var q=b.getNodes();r=q[g.getSource()];y=q[g.getTarget()];if(r.getBiologicalType()=="reaction"){a=r}else{a=y}if(r.x!=undefined&&r.y!=undefined&&y.x!=undefined&&y.y!=undefined){p=u(r,y)}else{p="M0,0L0,0Z"}}else{r=g.getSource();y=g.getTarget();if(r.getBiologicalType()=="reaction"){a=r}else{a=y}if(r.x!=undefined&&r.y!=undefined&&y.x!=undefined&&y.y!=undefined){p=u(r,y)}else{p="M0,0L0,0Z"}}return p},funcPathForFlux3:function(g,b,h,j){var a,f,o;function m(F,Q){var P=metExploreD3.getMetaboliteStyle();var N=metExploreD3.getReactionStyle();var M=Math.sqrt(Math.pow(Q.x-F.x,2)+Math.pow(Q.y-F.y,2));var v=(Q.x-F.x);var u=(Q.y-F.y);var E=v/Math.abs(v);var D=u/Math.abs(u);if(F.getBiologicalType()=="metabolite"){var K=(Math.abs(M)*N.getWidth()/2)/Math.abs(v);var s=(Math.abs(M)*N.getHeight()/2)/Math.abs(u);var y=(K<s)?rT=K:rt=s}else{var K=(Math.abs(M)*P.getWidth()/2)/Math.abs(v);var s=(Math.abs(M)*P.getHeight()/2)/Math.abs(u);var y=(K<s)?rT=K:rt=s}var G=F.x+v*((M-y)/M);var q=F.y+u*((M-y)/M);var w=5*Math.abs(j);var r=F.x+v*((M-y-w)/M);var A=F.y+u*((M-y-w)/M);widthArrow=2*Math.abs(j);var C=r+u*(widthArrow/M);var I=A-v*(widthArrow/M);var t=r+u*((2*widthArrow/3)/M);var z=A-v*((2*widthArrow/3)/M);var O=1.5*Math.abs(j);var B=F.x+v*(O/M);var p=F.y+u*(O/M);var L=2*Math.abs(j);var J=B+u*((2*L/3)/M);var H=p-v*((2*L/3)/M);return"M"+F.x+","+F.y+"L"+G+","+q+"L"+C+","+I+"L"+t+","+z+"L"+J+","+H+"L"+F.x+","+F.y+"Z"}if(g.getSource().x==undefined){var d=_metExploreViz.getSessionById(b).getD3Data();var c=d.getNodes();a=c[g.getSource()];f=c[g.getTarget()];if(a.x!=undefined&&a.y!=undefined&&f.x!=undefined&&f.y!=undefined){if(j<0){o=m(f,a)}else{o=m(a,f)}}else{o="M0,0L0,0Z"}}else{a=g.getSource();f=g.getTarget();if(a.x!=undefined&&a.y!=undefined&&f.x!=undefined&&f.y!=undefined){if(j<0){o=m(f,a)}else{o=m(a,f)}}else{o="M0,0L0,0Z"}}return o},funcPath1:function(d,b){var g,j,h;function a(A,N){var M=metExploreD3.getMetaboliteStyle();var K=metExploreD3.getReactionStyle();var I=Math.sqrt(Math.pow(N.x-A.x,2)+Math.pow(N.y-A.y,2));var q=(N.x-A.x);var p=(N.y-A.y);var z=q/Math.abs(q);var y=p/Math.abs(p);if(A.getBiologicalType()=="metabolite"){var H=(Math.abs(I)*M.getWidth()/2)/Math.abs(q);var o=(Math.abs(I)*M.getHeight()/2)/Math.abs(p);var w=(H<o)?rT=H:rt=o;var H=(Math.abs(I)*K.getWidth()/2)/Math.abs(q);var o=(Math.abs(I)*K.getHeight()/2)/Math.abs(p);var v=(H<o)?rT=H:rt=o}else{var H=(Math.abs(I)*K.getWidth()/2)/Math.abs(q);var o=(Math.abs(I)*K.getHeight()/2)/Math.abs(p);var w=(H<o)?rT=H:rt=o;var H=(Math.abs(I)*M.getWidth()/2)/Math.abs(q);var o=(Math.abs(I)*M.getHeight()/2)/Math.abs(p);var v=(H<o)?rT=H:rt=o}var s=A.x+q*(1-(I-w)/I);var G=A.y+p*(1-(I-w)/I);var B=A.x+q*((I-v)/I);var m=A.y+p*((I-v)/I);var r=5;var D=A.x+q*((I-v-r)/I);var t=A.y+p*((I-v-r)/I);var C=D+p*(3/I);var J=t-q*(3/I);var F=A.x+q*(1-(I-w-r)/I);var u=A.y+p*(1-(I-w-r)/I);var E=F-p*(3/I);var L=u+q*(3/I);return"M"+s+","+G+"L"+B+","+m+"L"+C+","+J+"L"+D+","+t+"L"+s+","+G+"L"+E+","+L+"L"+F+","+u+"Z"}function h(z,G){var F=metExploreD3.getMetaboliteStyle();var E=metExploreD3.getReactionStyle();var D=Math.sqrt(Math.pow(G.x-z.x,2)+Math.pow(G.y-z.y,2));var r=(G.x-z.x);var q=(G.y-z.y);var y=r/Math.abs(r);var w=q/Math.abs(q);if(z.getBiologicalType()=="metabolite"){var C=(Math.abs(D)*E.getWidth()/2)/Math.abs(r);var p=(Math.abs(D)*E.getHeight()/2)/Math.abs(q);var t=(C<p)?rT=C:rt=p}else{var C=(Math.abs(D)*F.getWidth()/2)/Math.abs(r);var p=(Math.abs(D)*F.getHeight()/2)/Math.abs(q);var t=(C<p)?rT=C:rt=p}var A=z.x+r*((D-t)/D);var m=z.y+q*((D-t)/D);var s=5;var o=z.x+r*((D-t-s)/D);var u=z.y+q*((D-t-s)/D);var v=o+q*(3/D);var B=u-r*(3/D);return"M"+z.x+","+z.y+"L"+A+","+m+"L"+v+","+B+"L"+o+","+u+"Z"}if(d.getSource().x==undefined){var f=_metExploreViz.getSessionById(b).getD3Data();var c=f.getNodes();g=c[d.getSource()];j=c[d.getTarget()];if(g.x!=undefined&&g.y!=undefined&&j.x!=undefined&&j.y!=undefined){if(g.getReactionReversibility()||j.getReactionReversibility()){h=a(g,j)}else{h=h(g,j)}}else{h="M0,0L0,0Z"}}else{g=d.getSource();j=d.getTarget();if(g.x!=undefined&&g.y!=undefined&&j.x!=undefined&&j.y!=undefined){if(g.getReactionReversibility()||j.getReactionReversibility()){h=a(g,j)}else{h=h(g,j)}}else{h="M0,0L0,0Z"}}return h},funcPath2:function(d,b){var g,j,h;function a(D,Q){var P=metExploreD3.getMetaboliteStyle();var O=metExploreD3.getReactionStyle();var N=Math.sqrt(Math.pow(Q.x-D.x,2)+Math.pow(Q.y-D.y,2));var s=(Q.x-D.x);var r=(Q.y-D.y);var C=s/Math.abs(s);var B=r/Math.abs(r);if(D.getBiologicalType()=="metabolite"){var K=(Math.abs(N)*O.getWidth()/2)/Math.abs(s);var q=(Math.abs(N)*O.getHeight()/2)/Math.abs(r);var y=(K<q)?rT=K:rt=q}else{var K=(Math.abs(N)*P.getWidth()/2)/Math.abs(s);var q=(Math.abs(N)*P.getHeight()/2)/Math.abs(r);var y=(K<q)?rT=K:rt=q}var u=D.x+s*(1-(N-largeurNoeudS)/N);var J=D.y+r*(1-(N-largeurNoeudS)/N);var F=D.x+s*((N-y)/N);var p=D.y+r*((N-y)/N);var t=5;var H=D.x+s*((N-y-t)/N);var v=D.y+r*((N-y-t)/N);var M=H+r*(3/N);var o=v-s*(3/N);var L=H-r*(3/N);var m=v+s*(3/N);var I=D.x+s*(1-(N-largeurNoeudS-t)/N);var w=D.y+r*(1-(N-largeurNoeudS-t)/N);var A=I-r*(3/N);var G=w+s*(3/N);var z=I+r*(3/N);var E=w-s*(3/N);return"M"+u+","+J+"L"+A+","+G+"L"+I+","+w+"L"+H+","+v+"L"+M+","+o+"L"+F+","+p+"L"+L+","+m+"L"+H+","+v+"L"+I+","+w+"L"+z+","+E+"L"+u+","+J+"Z"}function h(z,H){var G=metExploreD3.getMetaboliteStyle();var F=metExploreD3.getReactionStyle();var D=Math.sqrt(Math.pow(H.x-z.x,2)+Math.pow(H.y-z.y,2));var r=(H.x-z.x);var q=(H.y-z.y);var y=r/Math.abs(r);var w=q/Math.abs(q);if(z.getBiologicalType()=="metabolite"){var u=(F.getWidth()+F.getHeight())/2/2;var v=(G.getHeight()+G.getWidth())/2/2}else{var u=(G.getHeight()+G.getWidth())/2/2;var v=(F.getWidth()+F.getHeight())/2/2}var A=z.x+r*((D-u)/D);var p=z.y+q*((D-u)/D);var s=5;var B=z.x+r*((D-u-s)/D);var t=z.y+q*((D-u-s)/D);var E=B+q*(3/D);var o=t-r*(3/D);var C=B-q*(3/D);var m=t+r*(3/D);return"M"+z.x+","+z.y+"L"+B+","+t+"L"+E+","+o+"L"+A+","+p+"L"+C+","+m+"L"+B+","+t+"Z"}if(d.getSource().x==undefined){var f=_metExploreViz.getSessionById(b).getD3Data();var c=f.getNodes();g=c[d.getSource()];j=c[d.getTarget()];if(g.x!=undefined&&g.y!=undefined&&j.x!=undefined&&j.y!=undefined){if(g.getReactionReversibility()||j.getReactionReversibility()){h=a(g,j)}else{h=h(g,j)}}else{h="M0,0L0,0Z"}}else{g=d.getSource();j=d.getTarget();if(g.x!=undefined&&g.y!=undefined&&j.x!=undefined&&j.y!=undefined){if(g.getReactionReversibility()||j.getReactionReversibility()){h=a(g,j)}else{h=h(g,j)}}else{h="M0,0L0,0Z"}}return h},funcPath3:function(d,b){var g,j,h;function a(B,K){var J=metExploreD3.getMetaboliteStyle();var I=metExploreD3.getReactionStyle();var H=Math.sqrt(Math.pow(K.x-B.x,2)+Math.pow(K.y-B.y,2));var s=(K.x-B.x);var r=(K.y-B.y);var A=s/Math.abs(s);var z=r/Math.abs(r);if(B.getBiologicalType()=="metabolite"){var E=(Math.abs(H)*I.getWidth()/2)/Math.abs(s);var q=(Math.abs(H)*I.getHeight()/2)/Math.abs(r);var y=(E<q)?rT=E:rt=q}else{var E=(Math.abs(H)*J.getWidth()/2)/Math.abs(s);var q=(Math.abs(H)*J.getHeight()/2)/Math.abs(r);var y=(E<q)?rT=E:rt=q}var u=5;var C=B.x+s*((H-y)/H);var p=B.y+r*((H-y)/H);var u=5;var D=B.x+s*((H-y-u)/H);var w=B.y+r*((H-y-u)/H);var t=B.x+s*((H-y-u-u)/H);var v=B.y+r*((H-y-u-u)/H);var G=D+r*(3/H);var o=w-s*(3/H);var F=D-r*(3/H);var m=w+s*(3/H);return"M"+B.x+","+B.y+"L"+t+","+v+"L"+G+","+o+"L"+F+","+m+"L"+C+","+p+"L"+G+","+o+"L"+F+","+m+"L"+t+","+v+"Z"}function h(z,I){var H=metExploreD3.getMetaboliteStyle();var G=metExploreD3.getReactionStyle();var F=Math.sqrt(Math.pow(I.x-z.x,2)+Math.pow(I.y-z.y,2));var s=(I.x-z.x);var r=(I.y-z.y);var y=s/Math.abs(s);var w=r/Math.abs(r);if(z.getBiologicalType()=="metabolite"){var C=(Math.abs(F)*G.getWidth()/2)/Math.abs(s);var q=(Math.abs(F)*G.getHeight()/2)/Math.abs(r);var v=(C<q)?rT=C:rt=q}else{var C=(Math.abs(F)*H.getWidth()/2)/Math.abs(s);var q=(Math.abs(F)*H.getHeight()/2)/Math.abs(r);var v=(C<q)?rT=C:rt=q}var A=z.x+s*((F-v)/F);var p=z.y+r*((F-v)/F);var t=5;var B=z.x+s*((F-v-t)/F);var u=z.y+r*((F-v-t)/F);var E=B+r*(3/F);var o=u-s*(3/F);var D=B-r*(3/F);var m=u+s*(3/F);return"M"+z.x+","+z.y+"L"+B+","+u+"L"+E+","+o+"L"+A+","+p+"L"+D+","+m+"L"+B+","+u+"Z"}if(d.getSource().x==undefined){var f=_metExploreViz.getSessionById(b).getD3Data();var c=f.getNodes();g=c[d.getSource()];j=c[d.getTarget()];if(g!=undefined&&j!=undefined){if(g.x!=undefined&&g.y!=undefined&&j.x!=undefined&&j.y!=undefined){if(g.getReactionReversibility()||j.getReactionReversibility()){h=a(g,j)}else{h=h(g,j)}}else{h="M0,0L0,0Z"}}else{h="M0,0L0,0Z"}}else{g=d.getSource();j=d.getTarget();if(g!=undefined&&j!=undefined){if(g.x!=undefined&&g.y!=undefined&&j.x!=undefined&&j.y!=undefined){if(g.getReactionReversibility()||j.getReactionReversibility()){h=a(g,j)}else{h=h(g,j)}}else{h="M0,0L0,0Z"}}else{h="M0,0L0,0Z"}}return h},funcPath4:function(d,b){var g,j,h;function a(E,Q){var P=metExploreD3.getMetaboliteStyle();var O=metExploreD3.getReactionStyle();var N=Math.sqrt(Math.pow(Q.x-E.x,2)+Math.pow(Q.y-E.y,2));var r=(Q.x-E.x);var q=(Q.y-E.y);var D=r/Math.abs(r);var C=q/Math.abs(q);if(E.getBiologicalType()=="metabolite"){var z=(P.getHeight()+P.getWidth())/2/2;var u=E.x+r*(1-(N-z)/N);var J=E.y+q*(1-(N-z)/N);var s=5;var K=E.x+r*(1-(N-z-s)/N);var y=E.y+q*(1-(N-z-s)/N);var t=E.x+r*(1-(N-z-s-s)/N);var w=E.y+q*(1-(N-z-s-s)/N);var B=K-q*(3/N);var H=y+r*(3/N);var A=K+q*(3/N);var G=y-r*(3/N);h="M"+t+","+w+"L"+B+","+H+"L"+A+","+G+"L"+u+","+J+"L"+B+","+H+"L"+A+","+G+"L"+t+","+w+"L"+Q.x+","+Q.y+"Z"}else{var z=(P.getWidth()+P.getHeight())/2/2;var u=E.x+r*(1-(N-z)/N);var J=E.y+q*(1-(N-z)/N);var s=5;var F=E.x+r*((N-z)/N);var p=E.y+q*((N-z)/N);var s=5;var I=E.x+r*((N-z-s)/N);var v=E.y+q*((N-z-s)/N);var M=I+q*(3/N);var o=v-r*(3/N);var L=I-q*(3/N);var m=v+r*(3/N);var t=E.x+r*((N-z-s-s)/N);var w=E.y+q*((N-z-s-s)/N);h="M"+E.x+","+E.y+"L"+t+","+w+"L"+M+","+o+"L"+L+","+m+"L"+F+","+p+"L"+M+","+o+"L"+L+","+m+"L"+t+","+w+"Z"}return h}function h(C,O){var N=metExploreD3.getMetaboliteStyle();var M=metExploreD3.getReactionStyle();var L=Math.sqrt(Math.pow(O.x-C.x,2)+Math.pow(O.y-C.y,2));var r=(O.x-C.x);var q=(O.y-C.y);var B=r/Math.abs(r);var A=q/Math.abs(q);if(C.getBiologicalType()=="metabolite"){var w=(N.getHeight()+N.getWidth())/2/2;var u=C.x+r*(1-(L-w)/L);var H=C.y+q*(1-(L-w)/L);var s=5;var t=C.x+r*(1-(L-w-s)/L);var J=C.y+q*(1-(L-w-s)/L);var z=u-q*(3/L);var F=H+r*(3/L);var y=u+q*(3/L);var E=H-r*(3/L);return"M"+O.x+","+O.y+"L"+t+","+J+"L"+z+","+F+"L"+u+","+H+"L"+y+","+E+"L"+t+","+J+"Z"}else{var w=(N.getWidth()+N.getHeight())/2/2;var D=C.x+r*((L-w)/L);var p=C.y+q*((L-w)/L);var s=5;var G=C.x+r*((L-w-s)/L);var v=C.y+q*((L-w-s)/L);var K=G+q*(3/L);var o=v-r*(3/L);var I=G-q*(3/L);var m=v+r*(3/L);return"M"+C.x+","+C.y+"L"+G+","+v+"L"+K+","+o+"L"+D+","+p+"L"+I+","+m+"L"+G+","+v+"Z"}return h}if(d.getSource().x==undefined){var f=_metExploreViz.getSessionById(b).getD3Data();var c=f.getNodes();g=c[d.getSource()];j=c[d.getTarget()];if(g.x!=undefined&&g.y!=undefined&&j.x!=undefined&&j.y!=undefined){if(g.getReactionReversibility()||j.getReactionReversibility()){h=a(g,j)}else{h=h(g,j)}}else{h="M0,0L0,0Z"}}else{g=d.getSource();j=d.getTarget();if(g.x!=undefined&&g.y!=undefined&&j.x!=undefined&&j.y!=undefined){if(g.getReactionReversibility()||j.getReactionReversibility()){h=a(g,j)}else{h=h(g,j)}}else{h="M0,0L0,0Z"}}return h},funcPath5:function(d,b){var g,j,h;function a(G,V){var U=metExploreD3.getMetaboliteStyle();var T=metExploreD3.getReactionStyle();var S=Math.sqrt(Math.pow(V.x-G.x,2)+Math.pow(V.y-G.y,2));var s=(V.x-G.x);var r=(V.y-G.y);var F=s/Math.abs(s);var E=r/Math.abs(r);if(G.getBiologicalType()=="metabolite"){var N=(Math.abs(S)*T.getWidth()/2)/Math.abs(s);var q=(Math.abs(S)*T.getHeight()/2)/Math.abs(r);var A=(N<q)?rT=N:rt=q}else{var N=(Math.abs(S)*U.getWidth()/2)/Math.abs(s);var q=(Math.abs(S)*U.getHeight()/2)/Math.abs(r);var A=(N<q)?rT=N:rt=q}var B=(U.getHeight()+U.getWidth())/2/2;var w=G.x+s*(1-(S-B)/S);var L=G.y+r*(1-(S-B)/S);var t=5;var M=G.x+s*(1-(S-B-t)/S);var z=G.y+r*(1-(S-B-t)/S);var Q=G.x+s*(1-(S-B-t-t)/S);var v=G.y+r*(1-(S-B-t-t)/S);var D=M-r*(3/S);var J=z+s*(3/S);var C=M+r*(3/S);var I=z-s*(3/S);var H=G.x+s*((S-B)/S);var p=G.y+r*((S-B)/S);var K=G.x+s*((S-B-t)/S);var y=G.y+r*((S-B-t)/S);var R=K+r*(3/S);var o=y-s*(3/S);var P=K-r*(3/S);var m=y+s*(3/S);var O=G.x+s*((S-B-t-t)/S);var u=G.y+r*((S-B-t-t)/S);return"M"+w+","+L+"L"+D+","+J+"L"+C+","+I+"M"+O+","+u+"L"+R+","+o+"L"+P+","+m+"M"+Q+","+v+"L"+D+","+J+"L"+C+","+I+"L"+w+","+L+"L"+D+","+J+"L"+C+","+I+"L"+Q+","+v+"L"+O+","+u+"L"+R+","+o+"L"+P+","+m+"L"+H+","+p+"L"+R+","+o+"L"+P+","+m+"L"+O+","+u+"Z"}function h(D,P){var O=metExploreD3.getMetaboliteStyle();var N=metExploreD3.getReactionStyle();var M=Math.sqrt(Math.pow(P.x-D.x,2)+Math.pow(P.y-D.y,2));var r=(P.x-D.x);var q=(P.y-D.y);var C=r/Math.abs(r);var B=q/Math.abs(q);if(D.getBiologicalType()=="metabolite"){var w=(N.getWidth()+N.getHeight())/2/2;var y=(O.getHeight()+O.getWidth())/2/2}else{var w=(O.getHeight()+O.getWidth())/2/2;var y=(N.getWidth()+N.getHeight())/2/2}var u=D.x+r*(1-(M-y)/M);var I=D.y+q*(1-(M-y)/M);var F=D.x+r*((M-w)/M);var p=D.y+q*((M-w)/M);var s=5;var H=D.x+r*((M-w-s)/M);var v=D.y+q*((M-w-s)/M);var L=H+q*(3/M);var o=v-r*(3/M);var K=H-q*(3/M);var m=v+r*(3/M);var t=D.x+r*(1-(M-y-s)/M);var J=D.y+q*(1-(M-y-s)/M);var A=u-q*(3/M);var G=I+r*(3/M);var z=u+q*(3/M);var E=I-r*(3/M);return"M"+t+","+J+"L"+A+","+G+"L"+z+","+E+"L"+t+","+J+"L"+H+","+v+"L"+L+","+o+"L"+F+","+p+"L"+K+","+m+"L"+H+","+v+"Z"}if(d.getSource().x==undefined){var f=_metExploreViz.getSessionById(b).getD3Data();var c=f.getNodes();g=c[d.getSource()];j=c[d.getTarget()];if(g.x!=undefined&&g.y!=undefined&&j.x!=undefined&&j.y!=undefined){if(g.getReactionReversibility()||j.getReactionReversibility()){h=a(g,j)}else{h=h(g,j)}}else{h="M0,0L0,0Z"}}else{g=d.getSource();j=d.getTarget();if(g.x!=undefined&&g.y!=undefined&&j.x!=undefined&&j.y!=undefined){if(g.getReactionReversibility()||j.getReactionReversibility()){h=a(g,j)}else{h=h(g,j)}}else{h="M0,0L0,0Z"}}return h},funcPath6:function(d,b){var g,j,h;function a(D,Q){var P=metExploreD3.getMetaboliteStyle();var O=metExploreD3.getReactionStyle();var N=Math.sqrt(Math.pow(Q.x-D.x,2)+Math.pow(Q.y-D.y,2));var s=(Q.x-D.x);var r=(Q.y-D.y);var C=s/Math.abs(s);var B=r/Math.abs(r);if(D.getBiologicalType()=="metabolite"){var K=(Math.abs(N)*O.getWidth()/2)/Math.abs(s);var q=(Math.abs(N)*O.getHeight()/2)/Math.abs(r);var y=(K<q)?rT=K:rt=q}else{var K=(Math.abs(N)*P.getWidth()/2)/Math.abs(s);var q=(Math.abs(N)*P.getHeight()/2)/Math.abs(r);var y=(K<q)?rT=K:rt=q}var u=D.x+s*(1-(N-largeurNoeudS)/N);var J=D.y+r*(1-(N-largeurNoeudS)/N);var F=D.x+s*((N-y)/N);var p=D.y+r*((N-y)/N);var t=5;var H=D.x+s*((N-y-t)/N);var v=D.y+r*((N-y-t)/N);var M=H+r*(3/N);var o=v-s*(3/N);var L=H-r*(3/N);var m=v+s*(3/N);var I=D.x+s*(1-(N-largeurNoeudS-t)/N);var w=D.y+r*(1-(N-largeurNoeudS-t)/N);var A=I-r*(3/N);var G=w+s*(3/N);var z=I+r*(3/N);var E=w-s*(3/N);return"M"+u+","+J+"L"+A+","+G+"L"+z+","+E+"M"+u+","+J+"L"+A+","+G+"L"+I+","+w+"L"+H+","+v+"L"+M+","+o+"L"+F+","+p+"L"+L+","+m+"L"+H+","+v+"L"+I+","+w+"L"+z+","+E+"L"+u+","+J+"Z"}function h(z,H){var G=metExploreD3.getMetaboliteStyle();var F=metExploreD3.getReactionStyle();var D=Math.sqrt(Math.pow(H.x-z.x,2)+Math.pow(H.y-z.y,2));var r=(H.x-z.x);var q=(H.y-z.y);var y=r/Math.abs(r);var w=q/Math.abs(q);if(z.getBiologicalType()=="metabolite"){var u=(F.getWidth()+F.getHeight())/2/2;var v=(G.getHeight()+G.getWidth())/2/2}else{var u=(G.getHeight()+G.getWidth())/2/2;var v=(F.getWidth()+F.getHeight())/2/2}var A=z.x+r*((D-u)/D);var p=z.y+q*((D-u)/D);var s=5;var B=z.x+r*((D-u-s)/D);var t=z.y+q*((D-u-s)/D);var E=B+q*(3/D);var o=t-r*(3/D);var C=B-q*(3/D);var m=t+r*(3/D);return"M"+z.x+","+z.y+"L"+B+","+t+"L"+E+","+o+"L"+A+","+p+"L"+C+","+m+"L"+B+","+t+"Z"}if(d.getSource().x==undefined){var f=_metExploreViz.getSessionById(b).getD3Data();var c=f.getNodes();g=c[d.getSource()];j=c[d.getTarget()];if(g.x!=undefined&&g.y!=undefined&&j.x!=undefined&&j.y!=undefined){if(g.getReactionReversibility()||j.getReactionReversibility()){h=a(g,j)}else{h=h(g,j)}}else{h="M0,0L0,0Z"}}else{g=d.getSource();j=d.getTarget();if(g.x!=undefined&&g.y!=undefined&&j.x!=undefined&&j.y!=undefined){if(g.getReactionReversibility()||j.getReactionReversibility()){h=a(g,j)}else{h=h(g,j)}}else{h="M0,0L0,0Z"}}return h},refreshLink1:function(c,h,b,g){metExploreD3.GraphLink.panelParent="#"+c;var f=h.getD3Data();var a=20;var d=b.getMarkerWidth()/2;metExploreD3.GraphLink.link=d3.select("#"+c).select("#D3viz").select("#graphComponent").selectAll("path.link").data(f.getLinks()).enter().append("svg:path").attr("class",String).attr("d",function(j){return metExploreD3.GraphLink.funcPath1(j,c)}).attr("class","link").attr("fill-rule","evenodd").attr("fill",function(j){if(j.interaction=="out"){return b.getMarkerOutColor()}else{return b.getMarkerInColor()}}).style("stroke",b.getStrokeColor()).style("stroke-width",0.5).style("stroke-linejoin","bevel")},refreshLink:function(c,h,b,g){metExploreD3.GraphLink.panelParent="#"+c;var f=h.getD3Data();var a=20;var d=b.getMarkerWidth()/2;d3.select("#"+c).select("#D3viz").select("#graphComponent").selectAll(".linkGroup").remove();d3.select("#"+c).select("#D3viz").select("#graphComponent").selectAll("path.link").data(f.getLinks()).enter().insert("svg:g",":first-child").attr("class","linkGroup").append("svg:path").attr("class",String).attr("d",function(j){return metExploreD3.GraphLink.funcPath3(j,c,this.id,3)}).attr("class","link").attr("fill-rule","evenodd").attr("fill",function(j){if(j.interaction=="out"){return b.getMarkerOutColor()}else{return b.getMarkerInColor()}}).style("stroke",b.getStrokeColor()).style("stroke-width",0.5).style("opacity",1).style("stroke-dasharray",null);metExploreD3.GraphLink.link=d3.select("#"+c).select("#D3viz").select("#graphComponent").selectAll("path.link")},loadLinksForFlux:function(d,f,c,g,h,a){d3.select("#"+d).select("#D3viz").select("#graphComponent").selectAll(".linkGroup").remove();_metExploreViz.getSessionById(d).setMappingDataType("Flux");var b=d3.select("#"+d).select("#D3viz").select("#graphComponent").selectAll("path.link").data(f.getLinks()).enter().insert("svg:g",":first-child").attr("class","linkGroup");b.each(function(j){d3.select(this).append("svg:path").attr("class",String).attr("d",function(m){return metExploreD3.GraphLink.funcPathForFlux(m,d,this.id)}).attr("class","link").attr("fill-rule","evenodd").style("stroke",c.getStrokeColor()).style("stroke-width",0.5).on("mouseover",function(w){var v,s,m,u;if(w.getSource().getBiologicalType()=="reaction"){v=w.getSource();s=w.getTarget()}else{v=w.getTarget();s=w.getSource()}m=w.getSource();u=w.getTarget();var z=_metExploreViz.getSessionById("viz").getActiveMapping();var o=_metExploreViz.getMappingByName(z);var y=o.getConditions();var r=v.getMappingDataByNameAndCond(z,y[0]);var q=v.getMappingDataByNameAndCond(z,y[1]);var p=r;if(y[1]==a){p=q}if(p==null){var A=0}else{if(isNaN(p.getMapValue())){var A=0}else{var A=p.getMapValue()}if(A<0){u=w.getSource();m=w.getTarget()}}if(!document.getElementById("tooltip2").classList.contains("fixed")){var t="Name: "+w.id+"<br/><b>Source:</b> "+m.getName()+"<br/><b>Target:</b> "+u.getName()+((A!=undefined)?"<br/>Flux: "+Math.abs(A):"");t+="<br/>";document.getElementById("tooltip2").innerHTML=t;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseout",function(m){document.getElementById("tooltip2").classList.add("hide")});d3.select(this).append("svg:path").attr("class",String).attr("id","linkRev").attr("d",function(m){return metExploreD3.GraphLink.funcPathForFlux(m,d,this.id)}).attr("class","link").attr("fill-rule","evenodd").style("stroke",c.getStrokeColor()).style("stroke-width",0.5).on("mouseover",function(w){var v,s,m,u;if(w.getSource().getBiologicalType()=="reaction"){v=w.getSource();s=w.getTarget()}else{v=w.getTarget();s=w.getSource()}m=w.getSource();u=w.getTarget();var z=_metExploreViz.getSessionById("viz").getActiveMapping();var o=_metExploreViz.getMappingByName(z);var y=o.getConditions();var r=v.getMappingDataByNameAndCond(z,y[0]);var q=v.getMappingDataByNameAndCond(z,y[1]);var p=q;if(y[0]==a){p=r}if(p==null){var A=0}else{if(isNaN(p.getMapValue())){var A=0}else{var A=p.getMapValue()}if(A<0){u=w.getSource();m=w.getTarget()}}if(!document.getElementById("tooltip2").classList.contains("fixed")){var t="Name: "+w.id+"<br/><b>Source: </b>"+m.getName()+"<br/><b>Target: </b>"+u.getName()+((A!=undefined)?"<br/>Flux: "+Math.abs(A):"");t+="<br/>";document.getElementById("tooltip2").innerHTML=t;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseout",function(m){document.getElementById("tooltip2").classList.add("hide")})});if(h){d3.select("#"+d).select("#D3viz").select("#graphComponent").selectAll(".linkGroup").append("svg:text").text(function(u){var t,r,j,s;if(u.getSource().getBiologicalType()=="reaction"){t=u.getSource();r=u.getTarget()}else{t=u.getTarget();r=u.getSource()}j=u.getSource();s=u.getTarget();var w=_metExploreViz.getSessionById("viz").getActiveMapping();var m=_metExploreViz.getMappingByName(w);var v=m.getConditions();var q=t.getMappingDataByNameAndCond(w,v[0]);var p=t.getMappingDataByNameAndCond(w,v[1]);var o=q;if(v[1]==a){o=p}if(o==null){var y=0}else{if(isNaN(o.getMapValue())){var y=0}else{var y=o.getMapValue()}if(y<0){s=u.getSource();j=u.getTarget()}}return y}).style("font-size","6px").attr("class","linklabel").attr("transform","translate(-10, -15)").classed("hide",false).style("paint-order","stroke").style("stroke-width",1).style("stroke","77F").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").style("pointer-events","none").filter(function(q){var m,p,j,o;if(q.getSource().getBiologicalType()=="reaction"){p=q.getTarget()}else{p=q.getSource()}return p.getIsSideCompound()}).style("opacity",0.1);d3.select("#"+d).select("#D3viz").select("#graphComponent").selectAll(".linkGroup").append("svg:text").text(function(u){var t,r,j,s;if(u.getSource().getBiologicalType()=="reaction"){t=u.getSource();r=u.getTarget()}else{t=u.getTarget();r=u.getSource()}j=u.getSource();s=u.getTarget();var w=_metExploreViz.getSessionById("viz").getActiveMapping();var m=_metExploreViz.getMappingByName(w);var v=m.getConditions();var q=t.getMappingDataByNameAndCond(w,v[0]);var p=t.getMappingDataByNameAndCond(w,v[1]);var o=p;if(v[0]==a){o=q}if(o==null){var y=0}else{if(isNaN(o.getMapValue())){var y=0}else{var y=o.getMapValue()}if(y<0){s=u.getSource();j=u.getTarget()}}return y}).style("font-size","6px").attr("class","linklabel").attr("id","linkRev").attr("transform","translate(-10, 0)").classed("hide",false).style("paint-order","stroke").style("stroke-width",1).style("stroke","#AA0").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").style("pointer-events","none").filter(function(q){var m,p,j,o;if(q.getSource().getBiologicalType()=="reaction"){p=q.getTarget()}else{p=q.getSource()}return p.getIsSideCompound()}).style("opacity",0.1)}metExploreD3.GraphNetwork.tick("viz")},reloadLinks:function(a,c,b,d){d3.select("#"+a).select("#D3viz").select("#graphComponent").selectAll("path.link").data(c.getLinks()).enter().insert("path",":first-child").attr("class",String).attr("d",function(f){return metExploreD3.GraphLink.funcPath3(f,parent,this.id,3)}).attr("class","link").attr("fill-rule","evenodd").attr("fill",function(f){if(f.interaction=="out"){return b.getMarkerOutColor()}else{return b.getMarkerInColor()}}).style("stroke",b.getStrokeColor()).style("stroke-width",0.5).style("stroke-linejoin","bevel")},linkTypeOfMetabolite:function(){_metExploreViz.setLinkedByTypeOfMetabolite(true);var b="viz";var d=_metExploreViz.getSessionById("viz");if(d!=undefined){var c=d.getForce();if(c!=undefined){c.stop()}}var a=metExploreD3.createLoadMask("Link in progress...",b);if(a!=undefined){metExploreD3.showMask(a);metExploreD3.deferFunction(function(){var p={};var q={};var m={};var o={};d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(r){return r.getInteraction()!="hiddenForce"}).each(function(r){if(r.getInteraction()=="in"){if(p[r.getTarget()]==null){p[r.getTarget()]=[]}p[r.getTarget()][p[r.getTarget()].length]=r.getSource();if(o[r.getSource()]==null){o[r.getSource()]=[]}o[r.getSource()][o[r.getSource()].length]=r.getTarget()}else{if(q[r.getSource()]==null){q[r.getSource()]=[]}q[r.getSource()][q[r.getSource()].length]=r.getTarget();if(m[r.getTarget()]==null){m[r.getTarget()]=[]}m[r.getTarget()][m[r.getTarget()].length]=r.getSource()}});for(var g in p){var f=-1;p[g].forEach(function(r){f++;p[g].forEach(function(s){if(r!=s&&r!=undefined){metExploreD3.GraphLink.addHiddenLinkInDrawing(r+" -- "+s,r,s,"viz")}});delete p[g][f]})}for(var g in q){var f=-1;q[g].forEach(function(r){f++;q[g].forEach(function(s){if(r!=s&&r!=undefined){metExploreD3.GraphLink.addHiddenLinkInDrawing(r+" -- "+s,r,s,"viz")}});delete q[g][f]})}for(var g in m){var f=-1;m[g].forEach(function(r){f++;m[g].forEach(function(s){if(r!=s&&r!=undefined){metExploreD3.GraphLink.addHiddenLinkInDrawing(r+" -- "+s,r,s,"viz")}});delete m[g][f]})}for(var g in o){var f=-1;o[g].forEach(function(r){f++;o[g].forEach(function(s){if(r!=s&&r!=undefined){metExploreD3.GraphLink.addHiddenLinkInDrawing(r+" -- "+s,r,s,"viz")}});delete o[g][f]})}metExploreD3.hideMask(a);var h=metExploreD3.GraphNetwork.isAnimated(d.getId());if(h=="true"){var j=d.getForce();if(j!=undefined){if((metExploreD3.GraphNetwork.isAnimated(d.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(d.getId())==null)){j.start()}}}},100)}},removeLinkTypeOfMetabolite:function(){_metExploreViz.setLinkedByTypeOfMetabolite(false);var b="viz";var d=_metExploreViz.getSessionById("viz");if(d!=undefined){var c=d.getForce();if(c!=undefined){c.stop()}}var a=metExploreD3.createLoadMask("Remove hidden link in progress...",b);if(a!=undefined){metExploreD3.showMask(a);metExploreD3.deferFunction(function(){metExploreD3.GraphLink.removeHiddenLinkInDrawing("viz");metExploreD3.hideMask(a);var f=metExploreD3.GraphNetwork.isAnimated(d.getId());if(f=="true"){var g=d.getForce();if(g!=undefined){if((metExploreD3.GraphNetwork.isAnimated(d.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(d.getId())==null)){g.start()}}}},100)}},addHiddenLinkInDrawing:function(h,a,g,b){var m=_metExploreViz.getSessionById(b);var d=m.getD3Data();d.addLink(h,a,g,"hiddenForce",false);var j=metExploreD3.getMetaboliteStyle();var f=metExploreD3.getLinkStyle();var c=m.getForce();link=d3.select("#"+b).select("#graphComponent").selectAll("path.link").data(c.links(),function(o){return o.source.id+"-"+o.target.id}).enter().insert("path",":first-child").attr("class","link").style("stroke",f.getStrokeColor()).style("opacity",0)},removeHiddenLinkInDrawing:function(b){var g=_metExploreViz.getSessionById(b);var f=g.getD3Data();var a=[];var d=g.getForce();var c=d3.select("#"+b).select("#graphComponent").selectAll("path.link").filter(function(h){return h.getInteraction()=="hiddenForce"}).each(function(h){a.push(h)}).remove();setTimeout(function(){for(i=0;i<a.length;i++){var j=a[i];f.removeLink(j);var h=d.links().indexOf(j);if(h!=-1){d.links().splice(h,1)}}},100)},tick:function(a,c){var b=_metExploreViz.getSessionById(a).getMappingDataType()=="Flux";if(b){funcPath=metExploreD3.GraphLink.funcPathForFlux}else{funcPath=metExploreD3.GraphLink.funcPath3}d3.select("#"+metExploreD3.GraphNode.panelParent).select("#D3viz").selectAll("path.convexhull").attr("d",metExploreD3.GraphNode.groupPath).attr("transform",d3.select("#"+a).select("#D3viz").select("#graphComponent").attr("transform"));d3.select("#"+a).select("#D3viz").select("#graphComponent").selectAll("path.link").attr("d",function(d){return funcPath(d,a,this.id)}).style("stroke-linejoin","bevel")},displayConvexhulls:function(b){var c=_metExploreViz.getGeneralStyle();var d=d3.select("#"+b).select("#D3viz").selectAll("path.convexhull");var a=c.isDisplayedConvexhulls();if(!a){d.remove()}else{if(d[0].length==0){metExploreD3.GraphNode.loadPath(b,a)}d.attr("d",metExploreD3.GraphNode.groupPath).attr("transform",d3.select("#"+b).select("#D3viz").select("#graphComponent").attr("transform"))}}};metExploreD3.GraphNode={node:"",_MyThisGraphNode:"",panelParent:"",activePanel:"",taskClick:"",charKey:"",ctrlKey:"",groups:"",groupPath:"",groupFill:"",dblClickable:false,delayedInitialisation:function(a){metExploreD3.GraphNode.panelParent=a;_MyThisGraphNode=metExploreD3.GraphNode;activePanel=metExploreD3.GraphNode},selectNeighbours:function(b,a){d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(c){return c.getSource()==b||c.getTarget()==b}).each(function(c){if(c.getSource()==b){if(!c.getTarget().isSelected()){_MyThisGraphNode.selection(c.getTarget(),a)}}else{if(!c.getSource().isSelected()){_MyThisGraphNode.selection(c.getSource(),a)}}})},dragstart:function(h,c){_MyThisGraphNode.activePanel=d3.event.sourceEvent.target.viewportElement.parentNode.id;if(_MyThisGraphNode.activePanel==""||_MyThisGraphNode.activePanel.search("node")!=-1){_MyThisGraphNode.activePanel=d3.event.sourceEvent.target.parentNode.viewportElement.parentNode.id}d3.event.sourceEvent.stopPropagation();var g=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(g!=undefined){if(d3.event.sourceEvent.target.classList.contains("backgroundlocker")||d3.event.sourceEvent.target.classList.contains("iconlocker")){if(d3.event.sourceEvent.button!=2){h.setLocked(!h.isLocked());h.fixed=h.isLocked();metExploreD3.GraphNode.node.filter(function(d){return d==h}).select(".locker").classed("hide",false).select(".iconlocker").attr("xlink:href",function(m){if(m.isLocked()){return"resources/icons/lock_font_awesome.svg"}else{return"resources/icons/unlock_font_awesome.svg"}})}}else{if(d3.event.sourceEvent.button==2){if(!h.isSelected()){_MyThisGraphNode.selection(h,_MyThisGraphNode.activePanel);if(_MyThisGraphNode.charKey==78&&h.isSelected()){_MyThisGraphNode.selectNeighbours(h,_MyThisGraphNode.activePanel)}}}else{_MyThisGraphNode.selection(h,_MyThisGraphNode.activePanel);if(_MyThisGraphNode.charKey==78&&h.isSelected()){_MyThisGraphNode.selectNeighbours(h,_MyThisGraphNode.activePanel)}}}d3.selectAll("#D3viz").style("cursor","move");var f=g.getForce();f.stop();if(g.isLinked()){var j=_metExploreViz.getSessionsSet();for(var b in j){if(j[b].isLinked()&&_MyThisGraphNode.activePanel!=j[b].getId()){var a=j[b].getForce();a.stop()}}}}},refreshStyleOfReaction:function(){var a=metExploreD3.getReactionStyle();var b=d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(c){return c.getBiologicalType()=="reaction"});b.select("text").remove();b.setNodeForm(a.getWidth(),a.getHeight(),a.getRX(),a.getRY(),a.getStrokeColor(),a.getStrokeWidth());b.each(function(c){metExploreD3.GraphNode.addText(c,"viz")})},refreshStyleOfMetabolite:function(){var m=metExploreD3.getMetaboliteStyle();var d=d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(p){return p.getBiologicalType()=="metabolite"});d.select("text").remove();d.filter(function(p){return !p.getIsSideCompound()}).setNodeForm(m.getWidth(),m.getHeight(),m.getRX(),m.getRY(),undefined,m.getStrokeWidth());d.filter(function(p){return p.getIsSideCompound()}).setNodeForm(m.getWidth()/2,m.getHeight()/2,m.getRX()/2,m.getRY()/2,undefined,m.getStrokeWidth()/2);var a=Math.min(m.getWidth(),m.getHeight());d.each(function(p){metExploreD3.GraphNode.addText(p,"viz")});d.select(".structure_metabolite").attr("viewBox",function(p){console.log(a);return"0 0 "+a+" "+a}).attr("width",a*8/10+"px").attr("height",a*8/10+"px").attr("x",(-a/2)+(a*1/10)).attr("preserveAspectRatio","xMinYMin").attr("y",(-a/2)+(a*1/10));var o=_metExploreViz.getSessionById("viz");var b=o.getForce();var m=metExploreD3.getMetaboliteStyle();var g=metExploreD3.getReactionStyle();var h=Math.max(g.getWidth(),g.getHeight());var j=Math.max(m.getWidth(),m.getHeight());var c=Math.max(h,j);var f=metExploreD3.getLinkStyle();b.linkDistance(function(p){if(p.getSource().getIsSideCompound()||p.getTarget().getIsSideCompound()){return f.getSize()/2+c}else{return f.getSize()+c}})},moveNode:function(b,a){d3.select("#"+a).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(c){if(_MyThisGraphNode.ctrlKey){return c.isSelected()}else{return b.getId()==c.getId()}}).each(function(c){c.px+=d3.event.dx;c.py+=d3.event.dy;c.x+=d3.event.dx;c.y+=d3.event.dy})},dragmove:function(h,c){if(!h.isSelected()&&!(d3.event.sourceEvent.target.classList.contains("backgroundlocker")||d3.event.sourceEvent.target.classList.contains("iconlocker"))){_MyThisGraphNode.selection(h,_MyThisGraphNode.activePanel);if(_MyThisGraphNode.charKey==78&&h.isSelected()){_MyThisGraphNode.selectNeighbours(h,_MyThisGraphNode.activePanel)}}_MyThisGraphNode.moveNode(h,_MyThisGraphNode.activePanel);_MyThisGraphNode.tick(_MyThisGraphNode.activePanel);var g=metExploreD3.getScaleById(_MyThisGraphNode.activePanel);metExploreD3.GraphLink.tick(_MyThisGraphNode.activePanel,g);var f=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(f.isLinked()){var j=_metExploreViz.getSessionsSet();for(var b in j){if(j[b].isLinked()&&_MyThisGraphNode.activePanel!=j[b].getId()){var a=metExploreD3.getScaleById(j[b].getId());_MyThisGraphNode.moveNode(h,j[b].getId());_MyThisGraphNode.tick(j[b].getId());metExploreD3.GraphLink.tick(j[b].getId(),a)}}}},dragend:function(j,f){var m=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);var c=_metExploreViz.getSessionById("viz");if(m!=undefined){if(m.isLinked()){var h=_metExploreViz.getSessionsSet();for(var p in h){if(h[p].isLinked()&&_MyThisGraphNode.activePanel!=h[p].getId()){var o=metExploreD3.GraphNetwork.isAnimated(c.getId());if(o=="true"){var g=c.getForce();if((metExploreD3.GraphNetwork.isAnimated(_MyThisGraphNode.panelParent)=="true")||(metExploreD3.GraphNetwork.isAnimated(_MyThisGraphNode.panelParent)==null)){g.resume()}}_MyThisGraphNode.tick(h[p].getId());var r=metExploreD3.getScaleById(h[p].getId());metExploreD3.GraphLink.tick(h[p].getId(),r)}}}else{var b=metExploreD3.GraphNetwork.isAnimated(_MyThisGraphNode.activePanel);if(b=="true"){var a=m.getForce();if((metExploreD3.GraphNetwork.isAnimated(_MyThisGraphNode.activePanel)=="true")||(metExploreD3.GraphNetwork.isAnimated(_MyThisGraphNode.activePanel)==null)){a.resume()}}_MyThisGraphNode.tick(_MyThisGraphNode.activePanel);var q=metExploreD3.getScaleById(_MyThisGraphNode.activePanel);metExploreD3.GraphLink.tick(_MyThisGraphNode.activePanel,q)}d3.selectAll("#D3viz").style("cursor","default")}},fixNodeOnRefresh:function(c,a){var b=_metExploreViz.getSessionById(a);if(b!=undefined){if(c.isSelected()){_MyThisGraphNode.selectNode(c,a)}else{_MyThisGraphNode.unSelectNode(c,a)}setTimeout(function(){if(b.isLinked()){var f=_metExploreViz.getSessionsSet();for(var d in f){if(f[d].isLinked()&&a!=f[d].getId()){d3.select("#"+f[d].getId()).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(g){return c.getId()==g.getId()}).each(function(g){g.setIsSelected(!g.isSelected())});if(c.isSelected()){_MyThisGraphNode.selectNode(c,f[d].getId())}else{_MyThisGraphNode.unSelectNode(c,f[d].getId())}}}}},200)}},selection:function(c,a){var b=_metExploreViz.getSessionById(a);if(b!=undefined){d3.select("#"+a).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return c.getId()==d.getId()}).each(function(d){d.setIsSelected(!d.isSelected())});if(c.isSelected()){_MyThisGraphNode.selectNode(c,a)}else{_MyThisGraphNode.unSelectNode(c,a)}setTimeout(function(){if(b.isLinked()){var f=_metExploreViz.getSessionsSet();for(var d in f){if(f[d].isLinked()&&a!=f[d].getId()){d3.select("#"+f[d].getId()).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(g){return c.getId()==g.getId()}).each(function(g){g.setIsSelected(!g.isSelected())});if(c.isSelected()){_MyThisGraphNode.selectNode(c,f[d].getId())}else{_MyThisGraphNode.unSelectNode(c,f[d].getId())}}}}},200)}},selectNode:function(m,b){var c=metExploreD3.getReactionStyle();var j=_metExploreViz.getSessionById(b);var h=metExploreD3.getMetabolitesSet();var a=metExploreD3.getReactionsSet();var g="<b>Name:</b> "+m.getName()+"<br/><b>Biological type:</b> "+m.getBiologicalType()+((m.getCompartment()!=undefined)?"<br/><b>Compartment:</b> "+m.getCompartment():"")+((m.getDbIdentifier()!=undefined)?"<br/><b>Database identifier:</b> "+m.getDbIdentifier():"")+((m.getEC()!=undefined)?"<br/><b>EC number:</b> "+m.getEC():"")+((m.getReactionReversibility()!=undefined)?"<br/><b>Reaction reversibility:</b> "+m.getReactionReversibility():"")+((m.getIsSideCompound()!=undefined)?"<br/><b>SideCompound:</b> "+m.getIsSideCompound():"")+((m.getMappingDatasLength()!=0)?((m.getMappingDatasLength()==1)?"<br/><b>Mapping:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>":"<br/><b>Mappings:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>"):"");m.getMappingDatas().forEach(function(d){g+="<tr><td>"+d.getMappingName()+"</td><td>"+d.getConditionName()+"</td><td>"+d.getMapValue()+"</td></tr>"});g+="</table>";if(m.getSvg()!=""&&m.getSvg()!=undefined&&m.getSvg()!="undefined"){g+='<br/><img src="resources/images/structure_metabolite/'+m.getSvg()+'"/>'}document.getElementById("tooltip2").innerHTML=g;document.getElementById("tooltip2").classList.remove("hide");document.getElementById("tooltip2").classList.add("fixed");d3.select("#"+b).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return m.getId()==d.getId()}).each(function(d){j.addSelectedNode(d.getId());if(d.getBiologicalType()=="reaction"){d3.select(this).select("text").style("fill","white")}});var f=d3.select("#"+b).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return m.getId()==d.getId()}).select(".fontSelected").style("fill-opacity","0.4");_MyThisGraphNode.addText(m,b)},unSelectNode:function(g,b){var f=_metExploreViz.getSessionById(b);var c=metExploreD3.getMetabolitesSet();var a=metExploreD3.getReactionsSet();d3.select("#"+b).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return g.getId()==d.getId()}).select(".fontSelected").style("fill-opacity","0");d3.select("#"+b).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return g.getId()==d.getId()}).each(function(j){f.removeSelectedNode(j.getId());if(j.getBiologicalType()=="reaction"){var h;var d=metExploreD3.GraphUtils.chooseTextColor(this.style.getPropertyValue("fill"));d3.select(this).select("text").style("fill",d)}})},addText:function(f,a){var c=metExploreD3.getMetaboliteStyle();var b=metExploreD3.getReactionStyle();var h=_metExploreViz.getSessionById("viz");if(f.getBiologicalType()=="metabolite"){var g=Math.min(c.getWidth(),c.getHeight());if(d3.select("#"+a).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return f.getId()==d.getId()}).select("text")==""){d3.select("#"+a).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return f.getId()==d.getId()}).append("svg:text").attr("fill","black").attr("class",function(j){return j.getBiologicalType()}).each(function(r){var o=d3.select(this);var j=c.getDisplayLabel(r,c.getLabel());j=j.split(" ");o.text("");for(var m=0;m<j.length;m++){var p=$("<div/>").html(j[m]).text();var q=o.append("tspan").text(p);if(m>0){q.attr("x",0).attr("dy","5")}}}).style("font-size",c.getFontSize()).style("paint-order","stroke").style("stroke-width",1).style("stroke","white").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").style("pointer-events","none").attr("y",g/2+3)}if(f.getSvg()!="undefined"&&f.getSvg()!=undefined&&f.getSvg()!=""){if(d3.select("#"+a).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return f.getId()==d.getId()}).select("image").empty()){d3.select("#"+a).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return f.getId()==d.getId()}).append("svg").attr("viewBox",function(j){return"0 0 "+g+" "+g}).attr("width",g*8/10+"px").attr("height",g*8/10+"px").attr("x",(-g/2)+(g*1/10)).attr("preserveAspectRatio","xMinYMin").attr("y",(-g/2)+(g*1/10)).attr("class","structure_metabolite").append("image").attr("xlink:href",function(j){return"resources/images/structure_metabolite/"+j.getSvg()}).attr("width","100%").attr("height","100%")}}}if(f.getLabelVisible()==true&&f.getBiologicalType()=="reaction"){if(d3.select("#"+a).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return f.getId()==d.getId()}).text()==""){d3.select("#"+a).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(d){return f.getId()==d.getId()}).append("svg:text").attr("fill","black").attr("class",function(j){return j.getBiologicalType()}).text(function(m){var j=$("<div/>").html(b.getDisplayLabel(m,b.getLabel())).text();if(j==""){var j=$("<div/>").html(b.getDisplayLabel(m,b.getLabel())).text()}return j}).style("font-size",function(j){if(b.getDisplayLabel(j,b.getLabel())=="NA"){return 6}return Math.min(b.getWidth(),(b.getWidth()-b.getWidth()/10)/this.getComputedTextLength()*10)+"px"}).style("font-weight","bold").attr("dy",".3em")}}},addTextAllPanels:function(){var b=_metExploreViz.getSessionsSet();for(var a in b){d3.select("#"+b[a].getId()).select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(c){metExploreD3.GraphNode.addText(c,b[a].getId())})}},removeText:function(a){d3.select("#"+a).select("#D3viz").select("#graphComponent").selectAll("g.node").select("text").remove()},removeTextAllPanels:function(a){var c=_metExploreViz.getSessionsSet();for(var b in c){metExploreD3.GraphNode.removeText(c[b].getId())}},searchNode:function(d){var a=d.toUpperCase();var b=d3.select("#viz").select("#D3viz").select("#graphComponent");var c=b.selectAll("g.node").filter(function(o,j){var h=false;if(o.getName()!=undefined){h=o.getName().toUpperCase().indexOf(a)>-1}var m=false;if(o.getEC()!=undefined){m=o.getEC().toUpperCase().indexOf(a)>-1}var g=false;if(o.getDbIdentifier()!=undefined){g=o.getDbIdentifier().toUpperCase().indexOf(a)>-1}var f=false;if(o.getCompartment()!=undefined){f=o.getCompartment().toUpperCase().indexOf(a)>-1}var p=false;if(o.getBiologicalType()!=undefined){p=o.getBiologicalType().toUpperCase().indexOf(a)>-1}return h||m||g||f||p});if(c.size()==0){metExploreD3.displayMessage("Warning",'The node "'+d+"\" doesn't exist.")}else{c.each(function(f){if(!f.isSelected()){_MyThisGraphNode.selection(f,"viz")}})}},refreshNode:function(s){d3.select("body").on("keydown",function(){_MyThisGraphNode.charKey=d3.event.keyCode;_MyThisGraphNode.ctrlKey=d3.event.ctrlKey}).on("keyup",function(h){_MyThisGraphNode.charKey="none";_MyThisGraphNode.ctrlKey=d3.event.ctrlKey});metExploreD3.GraphNode.panelParent=s;_MyThisGraphNode=metExploreD3.GraphNode;var b=d3.behavior.drag().on("dragstart",_MyThisGraphNode.dragstart).on("drag",_MyThisGraphNode.dragmove).on("dragend",_MyThisGraphNode.dragend);var f=metExploreD3.getReactionStyle();var o=metExploreD3.getMetaboliteStyle();var q=metExploreD3.getGeneralStyle();var p=_metExploreViz.getSessionById(s);var m=_metExploreViz.getSessionById("viz");var d=p.getD3Data();var j=parseInt(d3.select("#"+_MyThisGraphNode.panelParent).select("#D3viz").style("height"));var r=parseInt(d3.select("#"+_MyThisGraphNode.panelParent).select("#D3viz").style("width"));d3.selectAll("#D3viz").on("mouseup",this.unselectIfDBClick);var c=metExploreD3.getScaleById(s);metExploreD3.GraphNode.node=d3.select("#"+metExploreD3.GraphNode.panelParent).select("#D3viz").select("#graphComponent").selectAll("g.node").data(d.getNodes()).enter().append("svg:g").attr("class","node").attr("id",function(h){return"node"+h.getId()}).call(b).style("fill","white");metExploreD3.GraphNode.node.filter(function(h){return !h.isDuplicated()}).on("mouseenter",function(y){var u=d3.select(this).attr("transform");var w=u.substring(u.indexOf("scale"),u.length);var v=w.substring(6,w.indexOf(")"));if(isNaN(v)){v=1}var t=d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).attr("transform","translate("+y.x+", "+y.y+") scale("+v*2+")");var h=d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("path.link");if(y.getBiologicalType()=="reaction"){h.filter(function(z){return y.getId()==z.getSource().getId()}).style("stroke","green").style("stroke-width","1.5");h.filter(function(z){return y.getId()==z.getTarget().getId()}).style("stroke","red").style("stroke-width","1.5")}else{h.filter(function(z){return y.getId()==z.getSource().getId()}).style("stroke","red").style("stroke-width","1.5");h.filter(function(z){return y.getId()==z.getTarget().getId()}).style("stroke","green").style("stroke-width","1.5")}}).on("mouseover",function(w){var h=d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).each(function(z){var y=h[0][h.size()-1];this.parentNode.insertBefore(this,y)});w.fixed=true;metExploreD3.GraphNode.node.filter(function(y){return y==w}).select(".locker").classed("hide",false).select(".iconlocker").attr("xlink:href",function(y){if(y.isLocked()){return"resources/icons/lock_font_awesome.svg"}else{return"resources/icons/unlock_font_awesome.svg"}});var v=c.getXScale();var u=c.getYScale();if(!document.getElementById("tooltip2").classList.contains("fixed")){var t="<b>Name:</b> "+w.getName()+"<br/><b>Biological type:</b> "+w.getBiologicalType()+((w.getCompartment()!=undefined)?"<br/><b>Compartment:</b> "+w.getCompartment():"")+((w.getDbIdentifier()!=undefined)?"<br/><b>Database identifier:</b> "+w.getDbIdentifier():"")+((w.getEC()!=undefined)?"<br/><b>EC number: </b>"+w.getEC():"")+((w.getReactionReversibility()!=undefined)?"<br/><b>Reaction reversibility:</b> "+w.getReactionReversibility():"")+((w.getIsSideCompound()!=undefined)?"<br/><b>SideCompound:</b> "+w.getIsSideCompound():"")+((w.getMappingDatasLength()!=0)?((w.getMappingDatasLength()==1)?"<br/><b>Mapping:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>":"<br/><b>Mappings:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>"):"");w.getMappingDatas().forEach(function(y){t+="<tr><td>"+y.getMappingName()+"</td><td>"+y.getConditionName()+"</td><td>"+y.getMapValue()+"</td></tr>"});t+="</table>";if(w.getSvg()!=undefined&&w.getSvg()!="undefined"&&w.getSvg()!=""){t+='<br/><img src="resources/images/structure_metabolite/'+w.getSvg()+'"/>'}document.getElementById("tooltip2").innerHTML=t;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseleave",function(y){var t=d3.select(this).attr("transform");var w=t.substring(t.indexOf("scale"),t.length);var v=w.substring(6,w.indexOf(")"));if(isNaN(v)){v=1}metExploreD3.GraphNode.node.filter(function(z){return z==y}).select(".locker").classed("hide",true);var h=d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).attr("transform","translate("+y.x+", "+y.y+") scale("+v/2+")");if(!y.isLocked()){y.fixed=false}var u=metExploreD3.getLinkStyle();document.getElementById("tooltip2").classList.add("hide");d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(z){return y.getId()==z.getSource().getId()||y.getId()==z.getTarget().getId()}).style("stroke",u.getStrokeColor()).style("stroke-width","0.5");if(y.getBiologicalType()=="reaction"){d3.select(this).selectAll("rect").selectAll(".reaction, .fontSelected").transition().duration(750).attr("width",f.getWidth()).attr("height",f.getHeight()).attr("transform","translate(-"+f.getWidth()/2+",-"+f.getHeight()/2+")")}else{d3.select(this).selectAll("rect").selectAll(".metabolite, .fontSelected").transition().duration(750).attr("width",o.getWidth()).attr("height",o.getHeight()).attr("transform","translate(-"+o.getWidth()/2+",-"+o.getHeight()/2+")")}});metExploreD3.GraphNode.node.filter(function(h){return h.isDuplicated()}).on("mouseenter",function(y){var u=d3.select(this).attr("transform");var w=u.substring(u.indexOf("scale"),u.length);var v=w.substring(6,w.indexOf(")"));if(isNaN(v)){v=1}var t=d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).attr("transform","translate("+y.x+", "+y.y+") scale("+v*2+")");var h=d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("path.link");if(y.getBiologicalType()=="reaction"){h.filter(function(z){return y.getId()==z.getSource().getId()}).style("stroke","green").style("stroke-width","1.5");h.filter(function(z){return y.getId()==z.getTarget().getId()}).style("stroke","red").style("stroke-width","1.5")}else{h.filter(function(z){return y.getId()==z.getSource().getId()}).style("stroke","red").style("stroke-width","1.5");h.filter(function(z){return y.getId()==z.getTarget().getId()}).style("stroke","green").style("stroke-width","1.5")}}).on("mouseover",function(w){var h=d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).each(function(z){var y=h[0][h.size()-1];this.parentNode.insertBefore(this,y)});w.fixed=true;metExploreD3.GraphNode.node.filter(function(y){return y==w}).select(".locker").classed("hide",false).select(".iconlocker").attr("xlink:href",function(y){if(y.isLocked()){return"resources/icons/lock_font_awesome.svg"}else{return"resources/icons/unlock_font_awesome.svg"}});if(w.getBiologicalType()=="reaction"){d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(y){return w.getId()==y.getSource().getId()}).style("stroke","green");d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(y){return w.getId()==y.getTarget().getId()}).style("stroke","red")}else{d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(y){return w.getId()==y.getSource().getId()}).style("stroke","red");d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(y){return w.getId()==y.getTarget().getId()}).style("stroke","green")}var v=c.getXScale();var u=c.getYScale();if(!document.getElementById("tooltip2").classList.contains("fixed")){var t="<b>Name:</b> "+w.getName()+"<br/><b>Biological type:</b> "+w.getBiologicalType()+((w.getCompartment()!=undefined)?"<br/><b>Compartment:</b> "+w.getCompartment():"")+((w.getDbIdentifier()!=undefined)?"<br/><b>Database identifier:</b> "+w.getDbIdentifier():"")+((w.getEC()!=undefined)?"<br/><b>EC number:</b> "+w.getEC():"")+((w.getReactionReversibility()!=undefined)?"<br/><b>Reaction reversibility:</b> "+w.getReactionReversibility():"")+((w.getIsSideCompound()!=undefined)?"<br/><b>SideCompound:</b> "+w.getIsSideCompound():"")+((w.getMappingDatasLength()!=0)?((w.getMappingDatasLength()==1)?"<br/><b>Mapping:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>":"<br/><b>Mappings:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>"):"");w.getMappingDatas().forEach(function(y){t+="<tr><td>"+y.getMappingName()+"</td><td>"+y.getConditionName()+"</td><td>"+y.getMapValue()+"</td></tr>"});t+="</table>";if(w.getSvg()!=undefined&&w.getSvg()!="undefined"&&w.getSvg()!=""){t+='<br/><img src="resources/images/structure_metabolite/'+w.getSvg()+'"/>'}document.getElementById("tooltip2").innerHTML=t;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseleave",function(y){var t=d3.select(this).attr("transform");var w=t.substring(t.indexOf("scale"),t.length);var v=w.substring(6,w.indexOf(")"));if(isNaN(v)){v=1}metExploreD3.GraphNode.node.filter(function(z){return z==y}).select(".locker").classed("hide",true);var h=d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).attr("transform","translate("+y.x+", "+y.y+") scale("+v/2+")");if(!y.isLocked()){y.fixed=false}var u=metExploreD3.getLinkStyle();document.getElementById("tooltip2").classList.add("hide");d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(z){return y.getId()==z.getSource().getId()||y.getId()==z.getTarget().getId()}).style("stroke",u.getStrokeColor()).style("stroke-width","0.5");if(y.getBiologicalType()=="reaction"){d3.select(this).selectAll("rect").selectAll(".reaction, .fontSelected").transition().duration(750).attr("width",f.getWidth()).attr("height",f.getHeight()).attr("transform","translate(-"+f.getWidth()/2+",-"+f.getHeight()/2+")")}else{d3.select(this).selectAll("rect").selectAll(".reaction, .fontSelected").transition().duration(750).attr("width",o.getWidth()).attr("height",o.getHeight()).attr("transform","translate(-"+o.getWidth()/2+",-"+o.getHeight()/2+")")}});metExploreD3.GraphNode.node.filter(function(h){return h.getBiologicalType()=="metabolite"}).filter(function(h){return !h.isDuplicated()}).addNodeForm(o.getWidth(),o.getHeight(),o.getRX(),o.getRY(),o.getStrokeColor(),o.getStrokeWidth());metExploreD3.GraphNode.node.filter(function(h){return h.getBiologicalType()=="metabolite"}).filter(function(h){return h.isDuplicated()}).style("stroke-opacity",0.5).addNodeForm(o.getWidth()/2,o.getHeight()/2,o.getRX()/2,o.getRY()/2,o.getStrokeColor(),o.getStrokeWidth()/2);metExploreD3.GraphNode.node.filter(function(h){return h.getBiologicalType()=="reaction"}).addNodeForm(f.getWidth(),f.getHeight(),f.getRX(),f.getRY(),f.getStrokeColor(),f.getStrokeWidth());metExploreD3.sortCompartmentInBiosource();metExploreD3.GraphNode.colorStoreByCompartment(metExploreD3.GraphNode.node);if(d.getNodes().length<q.getReactionThreshold()||!q.isDisplayedLabelsForOpt()){var a=Math.min(o.getWidth(),o.getHeight());metExploreD3.GraphNode.node.filter(function(h){return h.getLabelVisible()==true}).filter(function(h){return h.getBiologicalType()=="metabolite"}).filter(function(h){return h.getSvg()=="undefined"||h.getSvg()==undefined||h.getSvg()==""}).append("svg:text").attr("fill","black").attr("class",function(h){return h.getBiologicalType()}).each(function(y){var u=d3.select(this);var h=o.getDisplayLabel(y,o.getLabel());h=h.split(" ");u.text("");for(var t=0;t<h.length;t++){var v=$("<div/>").html(h[t]).text();var w=u.append("tspan").text(v);if(t>0){w.attr("x",0).attr("dy","5")}}}).style("font-size",o.getFontSize()).style("paint-order","stroke").style("stroke-width",1).style("stroke","white").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").style("pointer-events","none").attr("y",a/2+3);metExploreD3.GraphNode.node.filter(function(h){return h.getLabelVisible()==true}).filter(function(h){return h.getBiologicalType()=="metabolite"}).filter(function(h){return h.getSvg()!="undefined"&&h.getSvg()!=undefined&&h.getSvg()!=""}).append("svg:text").attr("fill","black").attr("class",function(h){return h.getBiologicalType()}).each(function(y){var u=d3.select(this);var h=o.getDisplayLabel(y,o.getLabel());h=h.split(" ");u.text("");for(var t=0;t<h.length;t++){var v=$("<div/>").html(h[t]).text();var w=u.append("tspan").text(v);if(t>0){w.attr("x",0).attr("dy","7")}}}).style("font-size",o.getFontSize()).style("paint-order","stroke").style("stroke-width",1).style("stroke","white").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").style("pointer-events","none").attr("y",a/2+3);metExploreD3.GraphNode.node.filter(function(h){return(h.getBiologicalType()=="metabolite"&&h.getSvg()!="undefined"&&h.getSvg()!=undefined&&h.getSvg()!="")}).append("svg").attr("viewBox",function(h){return"0 0 "+a+" "+a}).attr("width",a*8/10+"px").attr("height",a*8/10+"px").attr("x",(-a/2)+(a*1/10)).attr("preserveAspectRatio","xMinYMin").attr("y",(-a/2)+(a*1/10)).attr("class","structure_metabolite").append("image").attr("xlink:href",function(h){return"resources/images/structure_metabolite/"+h.getSvg()}).attr("width","100%").attr("height","100%");var g=metExploreD3.GraphNode.node.insert("svg",":first-child").attr("viewBox",function(h){+" "+a}).attr("width",function(h){if(h.getBiologicalType()=="metabolite"){return o.getWidth()}if(h.getBiologicalType()=="reaction"){return f.getWidth()}}).attr("height",function(h){if(h.getBiologicalType()=="metabolite"){return o.getHeight()}if(h.getBiologicalType()=="reaction"){return f.getHeight()}}).attr("preserveAspectRatio","xMinYMin").attr("y",function(h){if(h.getBiologicalType()=="metabolite"){return -o.getHeight()}if(h.getBiologicalType()=="reaction"){return -f.getHeight()}}).attr("x",function(h){if(h.getBiologicalType()=="metabolite"){return -o.getWidth()}if(h.getBiologicalType()=="reaction"){return -f.getWidth()}}).attr("class","locker").classed("hide",true);g.append("svg:path").attr("class","backgroundlocker").attr("d",function(t){if(t.getBiologicalType()=="metabolite"){var h="M"+o.getWidth()+","+o.getHeight()+" L0,"+o.getHeight()+" L0,"+o.getRY()*2+" A"+o.getRX()*2+","+o.getRY()*2+",0 0 1 "+o.getRX()*2+",0 L"+o.getWidth()+",0";return h}if(t.getBiologicalType()=="reaction"){var h="M"+f.getWidth()+","+f.getHeight()+" L0,"+f.getHeight()+" L0,"+f.getRY()*2+" A"+f.getRX()*2+","+f.getRY()*2+",0 0 1 "+f.getRX()*2+",0 L"+f.getWidth()+",0";return h}}).attr("opacity","0.20").attr("fill","black");g.append("image").attr("class","iconlocker").attr("y",function(h){if(h.getBiologicalType()=="metabolite"){return o.getHeight()/4-(o.getHeight()-o.getRY()*2)/8}if(h.getBiologicalType()=="reaction"){return f.getHeight()/4-(f.getHeight()-f.getRY()*2)/8}}).attr("x",function(h){if(h.getBiologicalType()=="metabolite"){return o.getWidth()/4-(o.getWidth()-o.getRX()*2)/8}if(h.getBiologicalType()=="reaction"){return f.getWidth()/4-(f.getWidth()-f.getRX()*2)/8}}).attr("width","40%").attr("height","40%");metExploreD3.GraphNode.node.filter(function(h){return h.getLabelVisible()==true}).filter(function(h){return h.getBiologicalType()=="reaction"}).append("svg:text").attr("fill","black").attr("class",function(h){return h.getBiologicalType()}).text(function(t){var h=$("<div/>").html(f.getDisplayLabel(t,f.getLabel())).text();if(h==""){var h=$("<div/>").html(f.getDisplayLabel(t,f.getLabel())).text()}return h}).style("font-size",function(h){if(f.getDisplayLabel(h,f.getLabel())=="NA"){return 6}return Math.min(f.getWidth(),(f.getWidth()-f.getWidth()/10)/this.getComputedTextLength()*10)+"px"}).style("font-weight","bold").attr("dy",".3em")}metExploreD3.GraphNode.node.filter(function(h){return h.isSelected()}).each(function(h){_MyThisGraphNode.fixNodeOnRefresh(h,"viz")});metExploreD3.GraphNode.node.filter(function(h){return h.isLocked()}).each(function(h){h.fixed=true});metExploreD3.GraphNode.node.filter(function(h){return h.getMappingDatasLength()>0&&p.getActiveMapping()!=""}).filter(function(t){var h=t.getMappingDataByNameAndCond(p.getActiveMapping(),p.isMapped());return(h!=null&&p.getColorMappingById(h.getMapValue())!=null)}).attr("mapped",function(y){var h=y.getMappingDataByNameAndCond(p.getActiveMapping(),p.isMapped());if(p.getMappingDataType()=="Continuous"){if(p.getColorMappingsSet()[0]<p.getColorMappingsSet()[1]){maxValue=p.getColorMappingsSet()[1];minValue=p.getColorMappingsSet()[0]}else{maxValue=p.getColorMappingsSet()[0];minValue=p.getColorMappingsSet()[1]}var u=_metExploreViz.getGeneralStyle();var z=u.getColorMinMappingContinuous();var w=u.getColorMaxMappingContinuous();var v=d3.scale.linear().domain([parseFloat(minValue),parseFloat(maxValue)]).range([z,w]);return v(parseFloat(h.getMapValue()))}var t=p.getColorMappingById(h.getMapValue()).getValue();return t}).style("fill",function(y){var h=y.getMappingDataByNameAndCond(p.getActiveMapping(),p.isMapped());d3.select(this).insert("rect",":first-child").attr("class","stroke").attr("width",parseInt(d3.select(this).select("."+y.getBiologicalType()).attr("width"))+10).attr("height",parseInt(d3.select(this).select("."+y.getBiologicalType()).attr("height"))+10).attr("rx",parseInt(d3.select(this).select("."+y.getBiologicalType()).attr("rx"))+5).attr("ry",parseInt(d3.select(this).select("."+y.getBiologicalType()).attr("ry"))+5).attr("transform","translate(-"+parseInt(parseInt(d3.select(this).select("."+y.getBiologicalType()).attr("width"))+10)/2+",-"+parseInt(parseInt(d3.select(this).select("."+y.getBiologicalType()).attr("height"))+10)/2+")").style("opacity","0.5").style("fill","red");if(p.getMappingDataType()=="Continuous"){if(parseFloat(p.getColorMappingsSet()[0].getName())<parseFloat(p.getColorMappingsSet()[1].getName())){maxValue=parseFloat(p.getColorMappingsSet()[1].getName());minValue=parseFloat(p.getColorMappingsSet()[0].getName())}else{maxValue=parseFloat(p.getColorMappingsSet()[0].getName());minValue=parseFloat(p.getColorMappingsSet()[1].getName())}var u=_metExploreViz.getGeneralStyle();var z=u.getColorMinMappingContinuous();var w=u.getColorMaxMappingContinuous();var v=d3.scale.linear().domain([parseFloat(minValue),parseFloat(maxValue)]).range([z,w]);return v(parseFloat(h.getMapValue()))}var t=p.getColorMappingById(h.getMapValue()).getValue();return t})},tick:function(a){d3.select("#"+a).select("#D3viz").select("#graphComponent").selectAll("g.node").attr("cx",function(g){return g.x}).attr("cy",function(g){return g.y}).attr("transform",function(m){var j=1;if(d3.select(this)!=null){var h=d3.select(this).attr("transform");if(d3.select(this).attr("transform")!=null){var g=h.indexOf("scale(");if(g!=-1){j=parseInt(h.substring(g+6,h.length-1))}}}return"translate("+m.x+","+m.y+") scale("+j+")"});if(a=="viz"){var f=_metExploreViz.getSessionsSet();var c=_metExploreViz.getSessionById(a);if(c.isLinked()){for(var b in f){if(f[b].isLinked()&&a!=f[b].getId()&&d3.select("#"+f[b].getId()).select("#D3viz").select("#graphComponent")[0][0]!=null){d3.select("#"+f[b].getId()).select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(g){d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(h){if(h.getId()==g.getId()){g.x=h.x;g.y=h.y}})});var d=metExploreD3.getScaleById(f[b].getId());metExploreD3.GraphLink.tick(f[b].getId(),d);_MyThisGraphNode.tick(f[b].getId())}}}}},selectNodeData:function(a){return d3.select(a).datum()},selectNodeFromGrid:function(a){d3.select("#viz").select("#D3viz").selectAll("g.node").filter(function(b){return b.getDbIdentifier()==a||b.getId()==a}).each(function(b){if(!b.isSelected()){_MyThisGraphNode.selection(b,"viz")}})},colorStoreByCompartment:function(b){for(var a=0;a<metExploreD3.getCompartmentInBiosourceLength();a++){b.filter(function(c){return(c.getBiologicalType()=="metabolite"&&c.getCompartment()==metExploreD3.getCompartmentInBiosourceSet()[a].getIdentifier())}).selectAll("rect").style("stroke",metExploreD3.getCompartmentInBiosourceSet()[a].getColor())}},unselectIfDBClick:function(){if(d3.event.target==d3.select("#D3viz")[0][0]){document.getElementById("tooltip2").classList.remove("fixed")}if(_MyThisGraphNode.dblClickable&&d3.event.button==0){_MyThisGraphNode.activePanel=this.parentNode.id;d3.select(this).select("#graphComponent").selectAll("g.node").filter(function(f){return f.isSelected()}).each(function(f){_MyThisGraphNode.selection(f,_MyThisGraphNode.activePanel)})}else{if(d3.event.button==0){_MyThisGraphNode.dblClickable=true;_MyThisGraphNode.taskClick=metExploreD3.createDelayedTask(function(){_MyThisGraphNode.dblClickable=false});metExploreD3.fixDelay(_MyThisGraphNode.taskClick,400)}else{}}if(_MyThisGraphNode.dblClickable&&d3.event.button==1){_MyThisGraphNode.activePanel=this.parentNode.id;d3.select(this).select("#graphComponent").selectAll("g.node").filter(function(f){return f.isLocked()}).each(function(f){f.fixed=false})}else{if(d3.event.button==1){_MyThisGraphNode.dblClickable=true;_MyThisGraphNode.taskClick=metExploreD3.createDelayedTask(function(){_MyThisGraphNode.dblClickable=false});metExploreD3.fixDelay(_MyThisGraphNode.taskClick,400)}else{}}var c=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(c!=undefined){if(c.isLinked()){var d=_metExploreViz.getSessionById("viz");if(d!=undefined){var a=metExploreD3.GraphNetwork.isAnimated(d.getId());if(a=="true"){var b=d.getForce();if(b!=undefined){if(metExploreD3.GraphNetwork.isAnimated(d.getId())=="true"||metExploreD3.GraphNetwork.isAnimated(d.getId())==null){b.start()}}}}}else{var b=c.getForce();var a=metExploreD3.GraphNetwork.isAnimated(c.getId());if(a=="true"){var b=c.getForce();if(b!=undefined){if((metExploreD3.GraphNetwork.isAnimated(c.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(c.getId())==null)){b.start()}}}}}},loadNode:function(s){d3.select("body").on("keydown",function(){_MyThisGraphNode.charKey=d3.event.keyCode;_MyThisGraphNode.ctrlKey=d3.event.ctrlKey}).on("keyup",function(h){_MyThisGraphNode.charKey="none";_MyThisGraphNode.ctrlKey=d3.event.ctrlKey});metExploreD3.GraphNode.panelParent=s;_MyThisGraphNode=metExploreD3.GraphNode;var f=metExploreD3.getReactionStyle();var o=metExploreD3.getMetaboliteStyle();var q=metExploreD3.getGeneralStyle();var p=_metExploreViz.getSessionById(s);var m=_metExploreViz.getSessionById("viz");var d=p.getD3Data();var j=parseInt(d3.select("#"+_MyThisGraphNode.panelParent).select("#D3viz").style("height"));var r=parseInt(d3.select("#"+_MyThisGraphNode.panelParent).select("#D3viz").style("width"));d3.selectAll("#D3viz").on("mouseup",this.unselectIfDBClick);var c=metExploreD3.getScaleById(s);var b=d3.behavior.drag().on("dragstart",_MyThisGraphNode.dragstart).on("drag",_MyThisGraphNode.dragmove).on("dragend",_MyThisGraphNode.dragend);metExploreD3.GraphNode.node=d3.select("#"+metExploreD3.GraphNode.panelParent).select("#D3viz").select("#graphComponent").selectAll("g.node").data(d.getNodes()).enter().append("svg:g").attr("class","node").attr("id",function(h){return"node"+h.getId()}).call(b).style("fill",function(h){if(h.isSelected()==false){return"white"}else{return"grey"}}).on("mouseenter",function(y){var u=d3.select(this).attr("transform");var w=u.substring(u.indexOf("scale"),u.length);var v=w.substring(6,w.indexOf(")"));if(isNaN(v)){v=1}var t=d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).attr("transform","translate("+y.x+", "+y.y+") scale("+v/2+")");var h=d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("path.link");if(y.getBiologicalType()=="reaction"){h.filter(function(z){return y.getId()==z.getSource().getId()}).style("stroke","green").style("stroke-width","1.5");h.filter(function(z){return y.getId()==z.getTarget().getId()}).style("stroke","red").style("stroke-width","1.5")}else{h.filter(function(z){return y.getId()==z.getSource().getId()}).style("stroke","red").style("stroke-width","1.5");h.filter(function(z){return y.getId()==z.getTarget().getId()}).style("stroke","green").style("stroke-width","1.5")}}).on("mouseover",function(w){var h=d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).each(function(z){var y=h[0][h.size()-1];this.parentNode.insertBefore(this,y)});w.fixed=true;metExploreD3.GraphNode.node.filter(function(y){return y==w}).select(".locker").classed("hide",false).select(".iconlocker").attr("xlink:href",function(y){if(y.isLocked()){return"resources/icons/lock_font_awesome.svg"}else{return"resources/icons/unlock_font_awesome.svg"}});var v=c.getXScale();var u=c.getYScale();if(!document.getElementById("tooltip2").classList.contains("fixed")){var t="<b>Name:</b> "+w.getName()+"<br/><b>Biological type:</b> "+w.getBiologicalType()+((w.getCompartment()!=undefined)?"<br/><b>Compartment:</b> "+w.getCompartment():"")+((w.getDbIdentifier()!=undefined)?"<br/><b>Database identifier:</b> "+w.getDbIdentifier():"")+((w.getEC()!=undefined)?"<br/><b>EC number:</b> "+w.getEC():"")+((w.getReactionReversibility()!=undefined)?"<br/><b>Reaction reversibility:</b> "+w.getReactionReversibility():"")+((w.getIsSideCompound()!=undefined)?"<br/><b>SideCompound:</b> "+w.getIsSideCompound():"")+((w.getMappingDatasLength()!=0)?((w.getMappingDatasLength()==1)?"<br/><b>Mapping:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>":"<br/><b>Mappings:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>"):"");w.getMappingDatas().forEach(function(y){t+="<tr><td>"+y.getMappingName()+"</td><td>"+y.getConditionName()+"</td><td>"+y.getMapValue()+"</td></tr>"});t+="</table>";if(w.getSvg()!=undefined&&w.getSvg()!="undefined"&&w.getSvg()!=""){t+='<br/><img src="resources/images/structure_metabolite/'+w.getSvg()+'"/>'}document.getElementById("tooltip2").innerHTML=t;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseleave",function(y){var t=d3.select(this).attr("transform");var w=t.substring(t.indexOf("scale"),t.length);var v=w.substring(6,w.indexOf(")"));if(isNaN(v)){v=1}metExploreD3.GraphNode.node.filter(function(z){return z==y}).select(".locker").classed("hide",true);var h=d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).attr("transform","translate("+y.x+", "+y.y+") scale("+v/2+")");if(!y.isLocked()){y.fixed=false}var u=metExploreD3.getLinkStyle();document.getElementById("tooltip2").classList.add("hide");d3.select("#"+s).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(z){return y.getId()==z.getSource().getId()||y.getId()==z.getTarget().getId()}).style("stroke",u.getStrokeColor()).style("stroke-width","0.5");if(y.getBiologicalType()=="reaction"){d3.select(this).selectAll("rect").selectAll(".reaction, .fontSelected").transition().duration(750).attr("width",f.getWidth()).attr("height",f.getHeight()).attr("transform","translate(-"+f.getWidth()/2+",-"+f.getHeight()/2+")")}else{d3.select(this).selectAll("rect").selectAll(".reaction, .fontSelected").transition().duration(750).attr("width",o.getWidth()).attr("height",o.getHeight()).attr("transform","translate(-"+o.getWidth()/2+",-"+o.getHeight()/2+")")}}).filter(function(h){return h.getMappingDatasLength()>0&&p.getActiveMapping()!=""}).attr("mapped",function(t){var h=t.getMappingDataByNameAndCond(p.getActiveMapping(),p.isMapped());return p.getColorMappingById(h.getMapValue())}).style("fill",function(t){var h=t.getMappingDataByNameAndCond(p.getActiveMapping(),p.isMapped());return p.getColorMappingById(h.getMapValue())});metExploreD3.GraphNode.node.filter(function(h){return h.getBiologicalType()=="metabolite"}).append("rect").attr("class",function(h){return h.getBiologicalType()}).attr("id",function(h){return h.getId()}).attr("identifier",function(h){return h.getId()}).attr("width",o.getWidth()).attr("height",o.getHeight()).attr("rx",o.getRX()).attr("ry",o.getRY()).attr("transform","translate(-"+o.getWidth()/2+",-"+o.getHeight()/2+")").style("stroke",o.getStrokeColor()).style("stroke-width",o.getStrokeWidth());metExploreD3.GraphNode.node.filter(function(h){return h.getBiologicalType()=="metabolite"}).append("rect").attr("class","fontSelected").attr("width",o.getWidth()).attr("height",o.getHeight()).attr("rx",o.getRX()).attr("ry",o.getRY()).attr("transform","translate(-"+o.getWidth()/2+",-"+o.getHeight()/2+")").style("fill-opacity","0").style("fill","#000");metExploreD3.GraphNode.node.filter(function(h){return h.getBiologicalType()=="reaction"}).append("rect").attr("class",function(h){return h.getBiologicalType()}).attr("id",function(h){return h.getId()}).attr("width",f.getWidth()).attr("height",f.getHeight()).attr("rx",f.getRX()).attr("ry",f.getRY()).attr("transform","translate(-"+f.getWidth()/2+",-"+f.getHeight()/2+")").style("stroke",f.getStrokeColor()).style("stroke-width",f.getStrokeWidth());metExploreD3.GraphNode.node.filter(function(h){return h.getBiologicalType()=="reaction"}).append("rect").attr("class","fontSelected").attr("width",f.getWidth()).attr("height",f.getHeight()).attr("rx",f.getRX()).attr("ry",f.getRY()).attr("transform","translate(-"+f.getWidth()/2+",-"+f.getHeight()/2+")").style("fill-opacity","0").style("fill","#000");metExploreD3.sortCompartmentInBiosource();for(var g=0;g<metExploreD3.getCompartmentInBiosourceLength();g++){metExploreD3.GraphNode.node.filter(function(h){return(h.getBiologicalType()=="metabolite"&&h.getCompartment()==metExploreD3.getCompartmentInBiosourceSet()[g].getIdentifier())}).selectAll("rect").style("stroke",metExploreD3.getCompartmentInBiosourceSet()[g].getColor())}if(d.getNodes().length<q.getReactionThreshold()||!q.isDisplayedLabelsForOpt()){var a=Math.min(o.getWidth(),o.getHeight());metExploreD3.GraphNode.node.filter(function(h){return h.getLabelVisible()==true}).filter(function(h){return h.getBiologicalType()=="metabolite"}).filter(function(h){return h.getSvg()=="undefined"||h.getSvg()==undefined||h.getSvg()==""}).append("svg:text").attr("fill","black").attr("class",function(h){return h.getBiologicalType()}).each(function(y){var u=d3.select(this);var h=o.getDisplayLabel(y,o.getLabel());h=h.split(" ");u.text("");for(var t=0;t<h.length;t++){var v=$("<div/>").html(h[t]).text();var w=u.append("tspan").text(v);if(t>0){w.attr("x",0).attr("dy","5")}}}).style("font-size",o.getFontSize()).style("paint-order","stroke").style("stroke-width",1).style("stroke","white").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").style("pointer-events","none").attr("y",a/2+3);metExploreD3.GraphNode.node.filter(function(h){return h.getLabelVisible()==true}).filter(function(h){return h.getBiologicalType()=="metabolite"}).filter(function(h){return h.getSvg()!="undefined"&&h.getSvg()!=undefined&&h.getSvg()!=""}).append("svg:text").attr("fill","black").attr("class",function(h){return h.getBiologicalType()}).each(function(y){var u=d3.select(this);var h=o.getDisplayLabel(y,o.getLabel());h=h.split(" ");u.text("");for(var t=0;t<h.length;t++){var v=$("<div/>").html(h[t]).text();var w=u.append("tspan").text(v);if(t>0){w.attr("x",0).attr("dy","7")}}}).style("font-size",o.getFontSize()).style("paint-order","stroke").style("stroke-width",1).style("stroke","white").style("stroke-opacity","0.7").attr("dy",".4em").style("font-weight","bold").style("pointer-events","none").attr("y",a/2+3);metExploreD3.GraphNode.node.filter(function(h){return(h.getBiologicalType()=="metabolite"&&h.getSvg()!="undefined"&&h.getSvg()!=undefined&&h.getSvg()!="")}).append("svg").attr("viewBox",function(h){return"0 0 "+a+" "+a}).attr("width",a*8/10+"px").attr("height",a*8/10+"px").attr("x",(-a/2)+(a*1/10)).attr("preserveAspectRatio","xMinYMin").attr("y",(-a/2)+(a*1/10)).attr("class","structure_metabolite").append("image").attr("xlink:href",function(h){return"resources/images/structure_metabolite/"+h.getSvg()}).attr("width","100%").attr("height","100%");metExploreD3.GraphNode.node.filter(function(h){return h.getLabelVisible()==true}).filter(function(h){return h.getBiologicalType()=="reaction"}).append("svg:text").attr("fill","black").attr("class",function(h){return h.getBiologicalType()}).text(function(t){var h=$("<div/>").html(f.getDisplayLabel(t,f.getLabel())).text();if(h==""){var h=$("<div/>").html(f.getDisplayLabel(t,f.getLabel())).text()}return h}).style("font-size",function(h){if(f.getDisplayLabel(h,f.getLabel())=="NA"){return 6}return Math.min(f.getWidth(),(f.getWidth()-f.getWidth()/10)/this.getComputedTextLength()*10)+"px"}).style("font-weight","bold").attr("dy",".3em")}metExploreD3.GraphNode.loadPath(metExploreD3.GraphNode.panelParent)},loadSideCompounds:function(b,a){var c=[];b.forEach(function(g){var f=_metExploreViz.getSessionById("viz").getD3Data().getNodeByDbIdentifier(g);if(f!=null){if(metExploreD3.getMetabolitesSet()!=undefined){var d=metExploreD3.getMetaboliteById(metExploreD3.getMetabolitesSet(),f.getId());if(d!=null){d.set("sideCompound",true)}}f.setIsSideCompound(true);c.push(f)}});if(a!=undefined){a()}return c.length>0},setIsSideCompoundById:function(j,g){var f=_metExploreViz.getSessionById("viz").getD3Data();var a=f.getNodes();if(a!=undefined){var d=f.getNodeById(j);if(d!=undefined){d.setIsSideCompound(g)}var h=_metExploreViz.getSessionsSet();for(var b in h){if(h[b].getId()!="viz"){var c=h[b].getD3Data().getNodeById(j);c.setIsSideCompound(g);if(c!=undefined){c.setIsSideCompound(g)}}}}},setIsReversibleById:function(c,h){var g=_metExploreViz.getSessionById("viz").getD3Data();var a=g.getNodes();if(a!=undefined){var f=g.getNodeById(c);if(f!=undefined){f.setReactionReversibility(h)}var j=_metExploreViz.getSessionsSet();for(var b in j){if(j[b].getId()!="viz"){var d=j[b].getD3Data().getNodeById(c);d.setReactionReversibility(h);if(d!=undefined){d.setReactionReversibility(h)}}}}},loadPath:function(d,c){var f=_metExploreViz.getSessionById(d);if(c=="Compartments"){var b=d3.select("#"+d).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(g){return g.getBiologicalType()=="metabolite"});f.groups=metExploreD3.getCompartmentsGroup();metExploreD3.GraphNetwork.initCentroids()}else{f.groups=metExploreD3.getPathwaysGroup();metExploreD3.GraphNetwork.initCentroids()}metExploreD3.GraphNode.groupPath=function(p){var o=metExploreD3.getScaleById("viz");if(p.values!=undefined){if(p.values.length>0){if(p.values.length>2){return"M"+d3.geom.hull(p.values.map(function(q){return[q.x,q.y]})).join("L")+"Z"}else{var m=[];p.values.forEach(function(q){m.push([q.x,q.y])});var h,g;for(var j=p.values.length;j<3;j++){h=p.values[0].x*(1+0.00001*j);g=p.values[0].y*(1+0.000011*j);m.push([h,g])}return"M"+d3.geom.hull(m).join("L")+"Z"}}}};metExploreD3.GraphNode.groupFill=function(s,p){var m;if(c=="Compartments"){for(var o=0;o<metExploreD3.getCompartmentInBiosourceLength();o++){if(s.key==metExploreD3.getCompartmentInBiosourceSet()[o].getName()){m=metExploreD3.getCompartmentInBiosourceSet()[o].getColor()}}return m}else{var h=metExploreD3.getPathwaysLength();if(h==undefined){h=0}center=128;width=127;frequency=Math.PI*2*0.95/h;var r=Math.sin(frequency*p+2+h)*width+center;var q=Math.sin(frequency*p+0+h)*width+center;var g=Math.sin(frequency*p+4+h)*width+center;var m=metExploreD3.GraphUtils.RGB2Color(r,q,g);s.color=m;return m}};var a="M0,0L10,10Z";d3.select("#"+d).select("#D3viz").selectAll("path.convexhull").data(f.groups).enter().insert("path",":first-child").attr("class",String).attr("d",function(g){return a}).attr("class",function(g){return g.key}).classed("convexhull",true).attr("id",function(g){return g.key}).style("fill",metExploreD3.GraphNode.groupFill).style("stroke",metExploreD3.GraphNode.groupFill).style("stroke-width",40).style("stroke-linejoin","round").style("opacity",0.15)},fixSelectedNode:function(){metExploreD3.GraphNode.node.filter(function(a){return a.isSelected()}).each(function(a){a.setLocked(true);a.fixed=a.isLocked()})}};metExploreD3.GraphCaption={refreshStyleOfReaction:function(){var a=metExploreD3.getReactionStyle();var b=Math.max(a.getWidth(),a.getHeight());var c=15/b;d3.select("#viz").select("#D3viz").select(".reactionCaption").attr("x",15/2-a.getWidth()*c/2).attr("y",15+15/2-a.getHeight()*c/2).attr("width",a.getWidth()*c).attr("height",a.getHeight()*c).attr("rx",a.getRX()*c).attr("ry",a.getRY()*c).attr("fill","white").attr("transform","translate(15,95)").style("stroke",a.getStrokeColor()).style("stroke-width",2)},refreshStyleOfMetabolite:function(){var b=metExploreD3.getMetaboliteStyle();var c=Math.max(b.getWidth(),b.getHeight());var a=15/c;d3.select("#viz").select("#D3viz").select(".metaboliteCaption").attr("x",15/2-b.getWidth()*a/2).attr("y",15+15/2-b.getHeight()*a/2).attr("width",b.getWidth()*a).attr("height",b.getHeight()*a).attr("rx",b.getRX()*a).attr("ry",b.getRY()*a).attr("fill","white").style("stroke","black").style("stroke-width",2).attr("transform","translate(15,130)")},drawCaption:function(){var G=metExploreD3.getReactionStyle();var L=Math.max(G.getWidth(),G.getHeight());var t=15/L;var J=metExploreD3.getMetaboliteStyle();var C=Math.max(J.getWidth(),J.getHeight());var r=15/C;var v=15/2-G.getWidth()*t/2;var u=15;var K=20+15/2-G.getWidth()*t/2;var H=15;var I=metExploreD3.getLinkStyle();var F=Math.sqrt(Math.pow(K-v,2)+Math.pow(H-u,2));var h=(K-v);var g=(H-u);var y=h/Math.abs(h);var w=g/Math.abs(g);var B=(Math.abs(F)*10/2)/Math.abs(h);var f=(Math.abs(F)*10/2)/Math.abs(g);var s=(B<f)?rT=B:rt=f;var m=5;var z=v+h*((F-s)/F);var c=u+g*((F-s)/F);var m=5;var A=v+h*((F-s-m)/F);var q=u+g*((F-s-m)/F);var j=v+h*((F-s-m-m)/F);var p=u+g*((F-s-m-m)/F);var E=A+g*(3/F);var b=q-h*(3/F);var D=A-g*(3/F);var a=q+h*(3/F);var o="M"+v+","+u+"L"+j+","+p+"L"+E+","+b+"L"+D+","+a+"L"+z+","+c+"L"+E+","+b+"L"+D+","+a+"L"+j+","+p+"Z";d3.select("#viz").select("#D3viz").append("svg:path").attr("class",String).attr("d",o).attr("class","linkCaptionRev").attr("fill-rule","evenodd").attr("fill","white").style("stroke",I.getStrokeColor()).style("stroke-width",1.5).style("stroke-linejoin","bevel").attr("transform","translate(15,65)");d3.select("#viz").select("#D3viz").append("svg:text").text("Reversible link").attr("x",20).attr("y",15).attr("transform","translate(30,70)");I=metExploreD3.getLinkStyle();var F=Math.sqrt(Math.pow(K-v,2)+Math.pow(H-u,2));var h=(K-v);var g=(H-u);var y=h/Math.abs(h);var w=g/Math.abs(g);var B=(Math.abs(F)*10/2)/Math.abs(h);var f=(Math.abs(F)*10/2)/Math.abs(g);var s=(B<f)?rT=B:rt=f;var z=v+h*((F-s)/F);var c=u+g*((F-s)/F);var m=5;var A=v+h*((F-s-m)/F);var q=u+g*((F-s-m)/F);var E=A+g*(3/F);var b=q-h*(3/F);var D=A-g*(3/F);var a=q+h*(3/F);o="M"+v+","+u+"L"+A+","+q+"L"+E+","+b+"L"+z+","+c+"L"+D+","+a+"L"+A+","+q+"Z";d3.select("#viz").select("#D3viz").append("svg:path").attr("class",String).attr("d",o).attr("class","linkCaptionRev").attr("fill-rule","evenodd").attr("fill","white").style("stroke",I.getStrokeColor()).style("stroke-width",1.5).style("stroke-linejoin","bevel").attr("transform","translate(15,40)");d3.select("#viz").select("#D3viz").append("svg:text").text("Link").attr("x",20).attr("y",15).attr("transform","translate(30,45)");d3.select("#viz").select("#D3viz").append("svg:text").attr("id","metexplore").text("metExploreViz").attr("x",$("#viz").width()-130).attr("y",$("#viz").height()-10);d3.select("#viz").select("#D3viz").append("svg:g").attr("class","logoViz").attr("id","logoViz").append("image").attr("xlink:href","resources/icons/metExploreViz_Logo.svg").attr("width","50").attr("height","50").attr("x",$("#viz").width()-110).attr("y",$("#viz").height()-75);d3.select("#viz").select("#D3viz").append("svg:rect").attr("class","reactionCaption").attr("x",15/2-G.getWidth()*t/2).attr("y",15).attr("width",G.getWidth()*t).attr("height",G.getHeight()*t).attr("rx",G.getRX()*t).attr("ry",G.getRY()*t).attr("fill","white").attr("transform","translate(15,95)").style("stroke",G.getStrokeColor()).style("stroke-width",2);d3.select("#viz").select("#D3viz").append("svg:text").text("Reaction").attr("x",20).attr("y",15).attr("transform","translate(30,105)");d3.select("#viz").select("#D3viz").append("svg:rect").attr("class","metaboliteCaption").attr("x",15/2-J.getWidth()*r/2).attr("y",15+15/2-J.getHeight()*r/2).attr("width",J.getWidth()*r).attr("height",J.getHeight()*r).attr("rx",J.getRX()*r).attr("ry",J.getRY()*r).attr("fill","white").style("stroke","black").style("stroke-width",2).attr("transform","translate(15,130)");d3.select("#viz").select("#D3viz").append("svg:text").text("Metabolites").attr("x",20).attr("y",15).attr("transform","translate(30,140)");metExploreD3.GraphCaption.colorMetaboliteLegend(175);d3.select("#viz").select("#D3viz").select("#captionComparment").classed("hide",true);metExploreD3.GraphCaption.majCaption()},majCaption:function(){var b=_metExploreViz.getGeneralStyle();var a=b.isDisplayedCaption();if(a=="Pathways"){metExploreD3.GraphCaption.colorPathwayLegend(175);d3.select("#viz").select("#D3viz").select("#captionComparment").classed("hide",true)}else{d3.select("#viz").select("#D3viz").select("#captionComparment").classed("hide",false);d3.select("#viz").select("#D3viz").select("#captionPathway").remove()}},colorMetaboliteLegend:function(o){var q=d3.select("#viz").select("#D3viz").append("svg:g").attr("id","captionComparment").attr("x1",0).attr("y1",0).attr("x2",15).attr("y2",0);var d=metExploreD3.getReactionStyle();var h=Math.max(d.getWidth(),d.getHeight());var a=20/h;var m=metExploreD3.getMetaboliteStyle();var j=Math.max(m.getWidth(),m.getHeight());var b=20/j;metExploreD3.sortCompartmentInBiosource();var p=metExploreD3.getCompartmentInBiosourceLength();if(p==undefined){p=0}center=128;width=127;frequency=Math.PI*2*0.95/p;var g=o;g+=20;q.append("svg:text").text("Compartments :").attr("x",0).attr("y",0).attr("transform","translate(15,"+g+")");g+=20;for(var f=0;f<p;f++){red=Math.sin(frequency*f+2+p)*width+center;green=Math.sin(frequency*f+0+p)*width+center;blue=Math.sin(frequency*f+4+p)*width+center;var c=metExploreD3.getCompartmentInBiosourceSet()[f];c.setColor(metExploreD3.GraphUtils.RGB2Color(red,green,blue));q.append("svg:line").attr("class","metabolite").attr("x1",0).attr("y1",0).attr("x2",15).attr("y2",0).style("stroke",c.getColor()).style("stroke-width",2).attr("transform","translate(15,"+g+")");g+=10;q.append("svg:text").html(c.getName()).attr("x",20).attr("y",-6).attr("transform","translate(30,"+g+")");g+=10}},colorPathwayLegend:function(o){var r=d3.select("#viz").select("#D3viz").append("svg:g").attr("id","captionPathway").attr("x1",0).attr("y1",0).attr("x2",15).attr("y2",0);var c=metExploreD3.getReactionStyle();var g=Math.max(c.getWidth(),c.getHeight());var a=20/g;var j=metExploreD3.getMetaboliteStyle();var h=Math.max(j.getWidth(),j.getHeight());var b=20/h;var m=_metExploreViz.getSessionById("viz");m.groups.sort(function(t,s){if(t.key<s.key){return -1}if(t.key>s.key){return 1}return 0});var p=m.groups.length;if(p==undefined){p=0}center=128;width=127;frequency=Math.PI*2*0.95/p;var f=o;f+=20;r.append("svg:text").text("Pathways :").attr("x",0).attr("y",0).attr("transform","translate(15,"+f+")");f+=20;for(var d=0;d<p;d++){red=Math.sin(frequency*d+2+p)*width+center;green=Math.sin(frequency*d+0+p)*width+center;blue=Math.sin(frequency*d+4+p)*width+center;var q=m.groups[d];r.append("svg:line").attr("class","metabolite").attr("x1",0).attr("y1",0).attr("x2",15).attr("y2",0).style("stroke",q.color).style("stroke-width",2).attr("transform","translate(15,"+f+")");f+=10;r.append("svg:text").html(q.key).attr("x",20).attr("y",-6).attr("transform","translate(30,"+f+")");f+=10}}};metExploreD3.GraphUtils={decodeJSON:function(c){try{var a=Ext.decode(c)}catch(b){metExploreD3.displayWarning("Invalid JSON String","Unable to parse the JSON")}return a},launchWebService:function(a,b){$.ajax({url:"src/php/metExplore.php",type:"POST",dataType:"text",data:{data:a},success:function(c){b(c)},error:function(c){alert("Bad")}})},parseWebServiceMapping:function(a){var c=Ext.decode(a);var d=c.mappingdata[0].mappings;d.forEach(function(j){var h=j.data;var g=0;var f=false;while(g<h.length&&!f){if(h.value!=undefined){f=true}g++}if(!f){j.name="undefined"}});var b=JSON.stringify(c.mappingdata[0]);return b},handleFileSelect:function(b,c){if(!window.File||!window.FileReader||!window.FileList||!window.Blob){alert("The File APIs are not fully supported in this browser.");return}if(!b){alert("couldn't find the fileinput element.")}else{if(!b.files){alert("This browser doesn't seem to support the `files` property of file inputs.")}else{file=b.files[0];var a=new FileReader();a.onload=function(){c(a.result,file.name)};a.readAsText(file)}}},colorNameToHex:function(b){var a={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};if(typeof a[b.toLowerCase()]!="undefined"){return a[b.toLowerCase()]}return false},RGB2Color:function(d,c,a){return"#"+metExploreD3.GraphUtils.byte2Hex(d)+metExploreD3.GraphUtils.byte2Hex(c)+metExploreD3.GraphUtils.byte2Hex(a)},chooseTextColor:function(c){if(c!=undefined){var b;if(c.slice(0,1)=="#"){var d=metExploreD3.GraphUtils.hexToRGB(c);var g=d.r;var f=d.g;var a=d.b;if((g*0.299+f*0.687+a*0.114)>186){b="black"}else{b="white"}}else{if(c.slice(0,3)=="rgb"){c=c.replace("rgb","");c=c.replace("(","");c=c.replace(")","");d=c.split(",");var g=d[0];var f=d[1];var a=d[2];if((g*0.299+f*0.687+a*0.114)>186){b="black"}else{b="white"}}else{b="black"}}return b}else{return"black"}},byte2Hex:function(b){var a="0123456789ABCDEF";return String(a.substr((b>>4)&15,1))+a.substr(b&15,1)},hexToRGB:function(c){var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;c=c.replace(b,function(f,j,h,d){return j+j+h+h+d+d});var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null},exportGraphPng:function(){var c=$("#viz").cytoscape("get");var b=c.png();var a=new Blob([String(b)],{type:"image/png",encoding:"utf-8"});saveAs(a,"graph.png")},exportPNG:function(){metExploreD3.GraphUtils.escapeUnExportNode();window.URL=(window.URL||window.webkitURL);metExploreD3.GraphUtils.initialize("png")},exportJPG:function(){metExploreD3.GraphUtils.escapeUnExportNode();window.URL=(window.URL||window.webkitURL);metExploreD3.GraphUtils.initialize("jpeg")},escapeUnExportNode:function(){d3.selectAll("#buttonAnim").style("display","none");var b=d3.selectAll("#brush");if(b!=null){b.style("display","none")}var c=d3.selectAll("#buttonLink");if(c!=null){c.style("display","none")}var f=d3.selectAll("#buttonZoomIn");if(f!=null){f.style("display","none")}var h=d3.selectAll("#buttonHand");if(h!=null){h.style("display","none")}var a=d3.selectAll("#whiteBlack");if(a!=null){a.style("display","none")}var g=d3.selectAll("#invertColor");if(g!=null){g.style("display","none")}var d=d3.selectAll("#buttonZoomOut");if(d!=null){d.style("display","none")}},exportSVG:function(){metExploreD3.GraphUtils.escapeUnExportNode();window.URL=(window.URL||window.webkitURL);var a=metExploreD3.GraphUtils.initialize("svg")},initialize:function(j){var h=_metExploreViz.getSessionById("viz");var a=h.getForce();if(h!=undefined){var a=h.getForce();if(a!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){a.stop()}}}var g={xmlns:"http://www.w3.org/2000/xmlns/",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};var m=[window.document],b=[];iframes=document.querySelectorAll("iframe"),objects=document.querySelectorAll("object");var c=window.document.createElementNS(g.svg,"svg");window.document.body.appendChild(c);var f=getComputedStyle(c);var d=metExploreD3.createLoadMask("Export initialization...","viz");if(d!=undefined){metExploreD3.showMask(d);metExploreD3.deferFunction(function(){[].forEach.call(iframes,function(p){try{if(p.contentDocument){m.push(p.contentDocument)}}catch(q){console.log(q)}});[].forEach.call(objects,function(p){try{if(p.contentDocument){m.push(p.contentDocument)}}catch(q){console.log(q)}});m.forEach(function(q){var r=metExploreD3.GraphUtils.getSources(q,f,g);for(var p=0;p<r.length;p++){if(r[p].classe=="D3viz"){b.push(r[p])}}});metExploreD3.hideMask(d);var o=c.parentNode;o.removeChild(c);if(b.length>1){metExploreD3.GraphUtils.createPopover(b,j)}else{if(b.length>0){return metExploreD3.GraphUtils.download(b[0],j)}else{alert("The Crowbar couldn\u2019t find any SVG nodes.")}}},100)}},createPopover:function(b,d){metExploreD3.GraphUtils.cleanup();b.forEach(function(f){b.forEach(function(g){if(f!==g){if((Math.abs(f.top-g.top)<38)&&(Math.abs(f.left-g.left)<38)){g.top+=38;g.left+=38}}})});var a=document.createElement("div");document.body.appendChild(a);a.setAttribute("class","svg-crowbar");a.style["z-index"]=10000000;a.style.position="absolute";a.style.top=0;a.style.left=0;var c=document.createElement("div");document.body.appendChild(c);c.setAttribute("class","svg-crowbar");c.style.background="rgba(255, 255, 255, 0.7)";c.style.position="fixed";c.style.left=0;c.style.top=0;c.style.width="100%";c.style.height="100%";b.forEach(function(j,g){var h=document.createElement("div");a.appendChild(h);h.setAttribute("class","svg-crowbar");h.style.position="absolute";h.style.top=(j.top+document.body.scrollTop)+"px";h.style.left=(document.body.scrollLeft+j.left)+"px";h.style.padding="4px";h.style["border-radius"]="3px";h.style.color="white";h.style["text-align"]="center";h.style["font-family"]="'Helvetica Neue'";h.style.background="rgba(0, 0, 0, 0.8)";h.style["box-shadow"]="0px 4px 18px rgba(0, 0, 0, 0.4)";h.style.cursor="move";h.textContent="SVG #"+g+": "+(j.id?"#"+j.id:"")+(j.classe?"."+j.classe:"");var f=document.createElement("button");h.appendChild(f);f.setAttribute("data-source-id",g);f.style.width="150px";f.style["font-size"]="12px";f.style["line-height"]="1.4em";f.style.margin="5px 0 0 0";f.textContent="Download";f.onclick=function(m){metExploreD3.GraphUtils.download(j,d)}})},cleanup:function(){var g=document.querySelectorAll(".svg-crowbar");[].forEach.call(g,function(m){m.parentNode.removeChild(m)});d3.selectAll("#buttonAnim").style("display","inline");var b=d3.selectAll("#brush");if(b!=null){b.style("display","inline")}var c=d3.selectAll("#buttonLink");if(c!=null){c.style("display ","inline")}var f=d3.selectAll("#buttonZoomIn");if(f!=null){f.style("display","inline")}var j=d3.selectAll("#buttonHand");if(j!=null){j.style("display","inline")}var h=d3.selectAll("#invertColor");if(h!=null){h.style("display","inline")}var a=d3.selectAll("#whiteBlack");if(a!=null){a.style("display","inline")}var d=d3.selectAll("#buttonZoomOut");if(d!=null){d.style("display","inline")}},getSources:function(c,d,a){var b=[],f=c.querySelectorAll("svg");[].forEach.call(f,function(p){svg=p;if(svg.id=="D3viz"){function o(E){var F=d3.select(E).node();return d3.select(F.parentNode.insertBefore(F.cloneNode(true),F.nextSibling))[0][0]}var w=o(svg);w.setAttribute("version","1.1");w.removeAttribute("xmlns");w.removeAttribute("xlink");if(!w.hasAttributeNS(a.xmlns,"xmlns")){w.setAttributeNS(a.xmlns,"xmlns",a.svg)}if(!w.hasAttributeNS(a.xmlns,"xmlns:xlink")){w.setAttributeNS(a.xmlns,"xmlns:xlink",a.xlink)}var t=w.getElementById("buttonZoomIn");if(t!=null){t.parentNode.removeChild(t)}var s=w.getElementById("buttonZoomOut");if(s!=null){s.parentNode.removeChild(s)}var B=w.getElementById("buttonHand");if(B!=null){B.parentNode.removeChild(B)}var j=w.getElementById("buttonAnim");if(j!=null){j.parentNode.removeChild(j)}var m=w.getElementById("invertColor");if(m!=null){m.parentNode.removeChild(m)}var z=w.getElementById("whiteBlack");if(z!=null){z.parentNode.removeChild(z)}var h=w.getElementById("brush");if(h!=null){h.parentNode.removeChild(h)}var q;d3.select(w).select("#graphComponent").selectAll("g.node").select(".structure_metabolite").each(function(){var F=this.firstChild.getAttribute("href");if(window.XDomainRequest){xdr=new XDomainRequest()}else{if(window.XMLHttpRequest){var J=new XMLHttpRequest();J.open("GET",F,false);J.send(null);if(J.responseXML!=null){var H=J.responseXML.getElementsByTagName("svg")[0];if(this.getAttribute("width")!=null){var K=parseFloat(this.getAttribute("width").split("px")[0])/parseFloat(H.getAttribute("width").split("px")[0]);H.setAttribute("x",this.getAttribute("x"));H.setAttribute("y",this.getAttribute("y"));H.setAttribute("width",this.getAttribute("width").split("px")[0]);H.setAttribute("height",this.getAttribute("height").split("px")[0]);H.setAttribute("class","structure_metabolite");var E=H.children;for(var G=0;G<E.length;G++){E[G].setAttribute("transform","scale("+K+")")}var I=this.parentNode;I.removeChild(this);I.appendChild(H)}}}else{alert("Votre navigateur ne gre pas l'AJAX cross-domain !")}}});d3.select(w).select(".logoViz").each(function(){var F=this.firstChild.getAttribute("href");if(window.XDomainRequest){xdr=new XDomainRequest()}else{if(window.XMLHttpRequest){var I=new XMLHttpRequest();I.open("GET",F,false);I.send(null);if(I.responseXML!=null){var G=I.responseXML.getElementsByTagName("svg")[0];if(this.firstChild.getAttribute("width")!=null){G.setAttribute("x",this.firstChild.getAttribute("x"));G.setAttribute("y",this.firstChild.getAttribute("y"));G.setAttribute("width",this.firstChild.getAttribute("width").split("px")[0]);G.setAttribute("height",this.firstChild.getAttribute("height").split("px")[0]);G.setAttribute("class","logoViz");var E=G.children;var H=this.parentNode;H.removeChild(this);H.appendChild(G)}}}else{alert("Votre navigateur ne gre pas l'AJAX cross-domain !")}}});q=metExploreD3.GraphUtils.setInlineStyles(w,d,q);var v=svg.parentNode.getBoundingClientRect();var r=d3.select(w).select("#graphComponent")[0][0].getBoundingClientRect();var D=v.left+100-r.left;var C=v.top+50-r.top;d3.select(w).select("#graphComponent").attr("transform","translate("+D+","+C+") scale(1)");r=d3.select(w).select("#graphComponent")[0][0].getBoundingClientRect();var y=v.width;if((v.width+r.right-v.right+20)>y){y=v.width+r.right-v.right+20}else{d3.select(w).select("#graphComponent").attr("transform","translate(0,"+C+") scale(1)")}w.setAttribute("width",y);var g=v.height;if((v.height+r.bottom-v.bottom+20)>g){g=v.height+r.bottom-v.bottom+20}w.setAttribute("height",g);d3.select(w).select("#metexplore").text("MetExploreViz").attr("x",w.getAttribute("width")-92).attr("y",w.getAttribute("height")-10);var r=d3.select(w).select("#graphComponent")[0][0].getBoundingClientRect();var D=v.left+100-r.left;var C=v.top+50-r.top;d3.select(w).select("#graphComponent").attr("transform",d3.select(svg).select("#graphComponent").attr("transform"));r=d3.select(w).select("#graphComponent")[0][0].getBoundingClientRect();var y=v.width;w.setAttribute("width",y);var g=v.height;w.setAttribute("height",g);var u=(new XMLSerializer()).serializeToString(w);var A='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';b.push({top:v.top,left:v.left,width:parseInt(w.getAttribute("width"))*2,height:parseInt(w.getAttribute("height"))*2,classe:w.getAttribute("class"),id:w.getAttribute("id"),parent:svg.parentNode.id,childElementCount:w.childElementCount,source:[A+u]});d3.select(w).remove()}});return b},saveAsSvg:function(c,a){var b=document.createElement("a");if(typeof b.download==="string"){b.href=c;b.download=a;document.body.appendChild(b);b.click();document.body.removeChild(b)}else{window.open(c)}var f=_metExploreViz.getSessionById("viz");var d=f.getForce();if(f!=undefined){if(d!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){d.start()}}}},binaryblob:function(b,j){var d=window.atob(b.toDataURL("image/"+j).replace(/^data:image\/(png|jpeg);base64,/,""));var p=new ArrayBuffer(d.length);var c=new Uint8Array(p);for(var h=0;h<d.length;h++){c[h]=d.charCodeAt(h)}var m=new DataView(p);var a=new Blob([m],{type:"image/"+j});var f=self.URL||self.webkitURL||self;var o=f.createObjectURL(a);var g='<img src="'+o+'">';d3.select("#img").html(g);return o},saveAsBinary:function(f,b,d){var h="data:image/svg+xml;base64,"+window.btoa(decodeURIComponent(encodeURIComponent(f.source)));var c=document.createElement("canvas");c.id="canvas";c.height=f.height*4;c.width=f.width*4;c.style.zIndex=8;c.style.position="absolute";c.style.border="1px solid";var a=document.getElementsByTagName("body")[0];a.appendChild(c);context=c.getContext("2d");var g=new Image();g.onload=function(){var j=metExploreD3.createLoadMask("Export in progress...",f.parent);if(j!=undefined){metExploreD3.showMask(j);metExploreD3.deferFunction(function(){context.drawImage(g,0,0,f.width*4,f.height*4);var m=metExploreD3.GraphUtils.binaryblob(c,d);var p=document.createElement("a");if(typeof p.download==="string"){p.download=b;p.href=m;document.body.appendChild(p);p.click();document.body.removeChild(p)}else{window.open(m)}var o=c.parentNode;o.removeChild(c);metExploreD3.hideMask(j);var r=_metExploreViz.getSessionById("viz");var q=r.getForce();if(r!=undefined){if(q!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){q.start()}}}},100)}};g.src=h},download:function(d,c){if(c=="jpeg"||c=="png"){metExploreD3.GraphUtils.saveAsBinary(d,"metabolicNetwork."+c,c)}if(c=="svg"){var a=new Blob([d.source],{type:"data:image/svg+xml"});var b=URL.createObjectURL(a);metExploreD3.GraphUtils.saveAsSvg(b,"metabolicNetwork.svg")}metExploreD3.GraphUtils.cleanup()},explicitlySetStyle:function(g,j){var b=getComputedStyle(g);var f,a,d,h;var c="";for(f=0,a=b.length;f<a;f++){d=b[f];h=b.getPropertyValue(d);if(h!==j.getPropertyValue(d)){if(g.tagName=="rect"){if(g.getAttribute("class")=="stroke"){if(d!="height"&&d!="width"){c+=d+":"+h+";"}}else{if(d!="fill"&&d!="height"&&d!="width"){c+=d+":"+h+";"}}}else{if(d!="marker-start"||d!="marker-end"){c+=d+":"+h+";"}}}}g.setAttribute("style",c)},traverse:function(c){var a=[];a.push(c);b(c);function b(d){if(d&&d.hasChildNodes()){var f=d.firstChild;if(f.className!=undefined){if(f.tagName!="image"){while(f){if(f.getAttribute!=undefined){if(f.getAttribute("href")!="resources/icons/pause.svg"&&f.getAttribute("href")!="resources/icons/whiteBlack.png"&&f.getAttribute("href")!="resources/icons/invertColor.svg"&&f.getAttribute("href")!="resources/icons/link.svg"&&f.getAttribute("href")!="resources/icons/unlink.svg"){if(f.nodeType===1&&f.nodeName!="SCRIPT"){a.push(f);b(f)}f=f.nextSibling}}else{if(f.nodeType===1&&f.nodeName!="SCRIPT"){b(f)}f=f.nextSibling}}}}else{while(f){if(f.nodeType===1&&f.nodeName!="SCRIPT"){b(f)}f=f.nextSibling}}}}return a},setInlineStyles:function(a,f,d){var c=metExploreD3.GraphUtils.traverse(a);d=c;var b=c.length;while(b--){metExploreD3.GraphUtils.explicitlySetStyle(c[b],f)}return d},exportSVGMain:function(){d3.selectAll("#buttonAnim").style("display","none");var c=d3.selectAll("#buttonLink");if(c!=null){c.style("display","none")}var b=d3.selectAll("#brush");if(b!=null){b.style("display","none")}var g=d3.selectAll("#buttonZoomIn");if(g!=null){g.style("display","none")}var j=d3.selectAll("#buttonHand");if(j!=null){j.style("display","none")}var h=d3.selectAll("#invertColor");if(h!=null){h.style("display","none")}var a=d3.selectAll("#whiteBlack");if(a!=null){a.style("display","none")}var f=d3.selectAll("#buttonZoomOut");if(f!=null){f.style("display","none")}window.URL=(window.URL||window.webkitURL);var d=metExploreD3.GraphUtils.initializeMain();return d},initializeMain:function(){var d={xmlns:"http://www.w3.org/TR/xml-names/",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};var b=[window.document],a=[];iframes=document.querySelectorAll("iframe"),objects=document.querySelectorAll("object");var c=window.document.createElementNS(d.svg,"svg");window.document.body.appendChild(c);var f=getComputedStyle(c);[].forEach.call(iframes,function(g){try{if(g.contentDocument){b.push(g.contentDocument)}}catch(h){console.log(h)}});[].forEach.call(objects,function(g){try{if(g.contentDocument){b.push(g.contentDocument)}}catch(h){console.log(h)}});b.forEach(function(h){var j=metExploreD3.GraphUtils.getSources(h,f,d);for(var g=0;g<j.length;g++){if(j[g].classe=="D3viz"){a.push(j[g])}}});if(a.length>0){return metExploreD3.GraphUtils.downloadMain(a[a.length-1])}else{alert("The Crowbar couldn\u2019t find any SVG nodes.")}},downloadMain:function(c){var a="untitled";if(c.id){a=c.id}else{if(c.classe){a=c.classe}else{if(window.document.title){a=window.document.title.replace(/[^a-z0-9]/gi,"-").toLowerCase()}}}var b=window.URL.createObjectURL(new Blob(c.source,{type:"text/xml"}));metExploreD3.GraphUtils.cleanup();return c.source[0]},saveNetworkDot:function(){var a=metExploreD3.createLoadMask("Export DOT file...","viz");if(a!=undefined){metExploreD3.showMask(a);metExploreD3.deferFunction(function(){var b="digraph dotGraph {";var d=_metExploreViz.getSessionById("viz").getD3Data().getLinks();var g=d.length;var h={};var m=0;d.forEach(function(o){var p=o.getSource().getId();var q=o.getTarget().getId();if(h[p]==undefined){h[p]=i;p=i;i++}else{p=h[p]}if(h[q]==undefined){h[q]=i;q=i;i++}else{q=h[q]}if(o.isReversible()=="true"){b+=p+" -> "+q;b+=",\n";b+=q+" -> "+p}else{b+=p+" -> "+q}if(d.indexOf(o)!=g-1){b+=",\n"}});b+="}";var c=new Blob([b],{type:"text"});var f=URL.createObjectURL(c);var j=document.createElement("a");if(typeof j.download==="string"){j.href=f;j.download="save.dot";document.body.appendChild(j);j.click();document.body.removeChild(j)}else{window.open(uri)}metExploreD3.hideMask(a)},100)}},saveNetworkJSON:function(){var a=metExploreD3.createLoadMask("Saving...","viz");if(a!=undefined){metExploreD3.showMask(a);metExploreD3.deferFunction(function(){var b="{";b+='\n"linkStyle":'+JSON.stringify(metExploreD3.getLinkStyle());b+=',\n"reactionStyle":'+JSON.stringify(metExploreD3.getReactionStyle());b+=',\n"biosource":'+JSON.stringify(_metExploreViz.getBiosource());b+=',\n"generalStyle":'+JSON.stringify(metExploreD3.getGeneralStyle());b+=',\n"metaboliteStyle":'+JSON.stringify(metExploreD3.getMetaboliteStyle());b+=',\n"comparedPanels":'+JSON.stringify(_metExploreViz.comparedPanels);b+=',\n"linkedByTypeOfMetabolite":'+JSON.stringify(_metExploreViz.linkedByTypeOfMetabolite);b+=',\n"sessions":{';var m=_metExploreViz.getSessionsSet();var g=0;for(var f in m){m[f].getD3Data().initNodeIndex();b+="\n"+JSON.stringify(f)+':{\n"id":"'+_metExploreViz.getSessionById(f).getId()+'",';b+='\n"animated": false ,';b+='\n"d3Data":{"id":'+JSON.stringify(f)+",";b+='"nodes":[';_metExploreViz.getSessionById(f).getD3Data().getNodes().forEach(function(p){b+='{"name":'+JSON.stringify(p.getName())+",";if(p.getCompartment()!=undefined){b+='"compartment":'+JSON.stringify(p.getCompartment())+","}if(p.getPathways()!=undefined){b+='"pathways":'+JSON.stringify(p.getPathways())+","}b+='"dbIdentifier":'+JSON.stringify(p.getDbIdentifier())+",";if(p.getIdentifier()!=undefined){b+='"identifier":'+JSON.stringify(p.getIdentifier())+","}if(p.getEC()!=undefined){b+='"ec":'+JSON.stringify(p.getEC())+","}b+='"id":'+JSON.stringify(p.getId())+",";if(p.getIdentifier()!=undefined){b+='"identifier":'+JSON.stringify(p.getIdentifier())+","}if(p.getReactionReversibility()!=undefined){b+='"reactionReversibility":'+JSON.stringify(p.getReactionReversibility())+","}if(p.getIsSideCompound()!=undefined){b+='"isSideCompound":'+JSON.stringify(p.getIsSideCompound())+","}b+='"biologicalType":'+JSON.stringify(p.getBiologicalType())+",";b+='"selected":'+JSON.stringify(p.isSelected())+",";b+='"locked":'+JSON.stringify(p.isLocked())+",";if(p.isDuplicated()!=undefined){b+='"duplicated":'+JSON.stringify(p.isDuplicated())+","}else{b+='"duplicated":false,'}b+='"labelVisible":'+JSON.stringify(p.getLabelVisible())+",";if(p.getSvg()!=undefined){b+='"svg":'+JSON.stringify(p.getSvg())+",";b+='"svgWidth":'+JSON.stringify(p.getSvgWidth())+",";b+='"svgHeight":'+JSON.stringify(p.getSvgHeight())+","}if(p.x!=undefined){b+='"x":'+JSON.stringify(p.x)+","}if(p.y!=undefined){b+='"y":'+JSON.stringify(p.y)+","}if(p.px!=undefined){b+='"px":'+JSON.stringify(p.px)+","}if(p.py!=undefined){b+='"py":'+JSON.stringify(p.py)}b+="}";var o=_metExploreViz.getSessionById(f).getD3Data().getNodes().indexOf(p);if(o!=_metExploreViz.getSessionById(f).getD3Data().getNodes().length-1){b+=","}});b+="],";b+='"links":[';var j=_metExploreViz.getSessionById(f).getD3Data().getLinks().filter(function(o){return o.getInteraction()!="hiddenForce"});j.forEach(function(p){b+='{"id":'+JSON.stringify(p.getId())+",";b+='"source":'+JSON.stringify(p.getSource().index)+",";b+='"target":'+JSON.stringify(p.getTarget().index)+",";b+='"interaction":'+JSON.stringify(p.getInteraction())+",";b+='"reversible":'+JSON.stringify(p.isReversible());b+="}";var o=j.indexOf(p);if(o!=j.length-1){b+=","}});b+="]},";b+='\n"colorMappings":'+JSON.stringify(_metExploreViz.getSessionById(f).getColorMappingsSet())+",";b+='\n"linked":'+JSON.stringify(_metExploreViz.getSessionById(f).isLinked())+",";b+='\n"active":'+JSON.stringify(_metExploreViz.getSessionById(f).isActive())+",";b+='\n"duplicatedNodes":'+JSON.stringify(_metExploreViz.getSessionById(f).getDuplicatedNodes())+",";b+='\n"selectedNodes":'+JSON.stringify(_metExploreViz.getSessionById(f).getSelectedNodes())+",";b+='\n"resizable":'+_metExploreViz.getSessionById(f).isResizable();b+="}";if(g<m.length-1){b+=","}g++}b+="}}";var c=new Blob([b],{type:"text/json"});var d=URL.createObjectURL(c);var h=document.createElement("a");if(typeof h.download==="string"){h.href=d;h.download="save.json";document.body.appendChild(h);h.click();document.body.removeChild(h)}else{window.open(uri)}metExploreD3.hideMask(a)},100)}},saveNetworkGml:function(){var a=metExploreD3.createLoadMask("Export GML file...","viz");if(a!=undefined){metExploreD3.showMask(a);metExploreD3.deferFunction(function(){var b="graph [";b+="\ndirected 1\n";var f=0;var h={};_metExploreViz.getSessionById("viz").getD3Data().getNodes().forEach(function(j){h[j.getId()]=f;b+="node [\n";b+="id "+f+"\n";b+='label "'+j.getName()+'"\n';b+="graphics [\n";b+="x "+j.x+"\n";b+="y "+j.y+"\n";b+="]\n";b+="]\n";f++});_metExploreViz.getSessionById("viz").getD3Data().getLinks().forEach(function(j){b+="edge [\n";b+="source "+h[j.getSource().getId()]+"\n";b+="target "+h[j.getTarget().getId()]+"\n";b+='label "'+j.getSource().getId().replace("-","")+"-"+j.getTarget().getId().replace("-","")+'"\n';b+="]\n";if(j.isReversible()=="true"){b+="edge [\n";b+="source "+h[j.getTarget().getId()]+"\n";b+="target "+h[j.getSource().getId()]+"\n";b+='label "'+j.getSource().getId().replace("-","")+"-"+j.getTarget().getId().replace("-","")+'"\n';b+="]\n"}});b+="]";var c=new Blob([b],{type:"text"});var d=URL.createObjectURL(c);var g=document.createElement("a");if(typeof g.download==="string"){g.href=d;g.download="save.gml";document.body.appendChild(g);g.click();document.body.removeChild(g)}else{window.open(uri)}metExploreD3.hideMask(a)},100)}}};metExploreD3.GraphNetwork={task:"",delayedInitialisation:function(a){var b={};b.render=function(){var c=d3.select("#"+a);c.append("svg").attr("width","100%").attr("height","100%").attr("class","D3viz").attr("id","D3viz").style("background-color","#fff")};b.render();metExploreD3.GraphLink.delayedInitialisation(a);metExploreD3.GraphNode.delayedInitialisation(a);return b},tick:function(j){if(_metExploreViz.getComparedPanelById(j)!=null||j=="viz"){var w=metExploreD3.getScaleById(j);metExploreD3.GraphLink.tick(j,w);metExploreD3.GraphNode.tick(j);var u=w.getZoomScale();var r=metExploreD3.GraphNetwork.isAnimated(j);var b=_metExploreViz.getSessionById(j);var p=metExploreD3.getGeneralStyle();if(r&&u>0.05&&b.isResizable()){var f=document.getElementById(j).getBoundingClientRect();var a=d3.select("#"+j).select("#D3viz")[0][0].getElementById("graphComponent").getBoundingClientRect();var o=parseInt(d3.select("#"+j).select("#D3viz").style("width"));var m=parseInt(d3.select("#"+j).select("#D3viz").style("height"));if(f.top>a.top||f.left>a.left||f.bottom<a.bottom||f.right<a.right){var g=b.getD3Data().getNodesLength();var v=3000;if(g<p.getReactionThreshold()||!p.isDisplayedLabelsForOpt()){v=3000}metExploreD3.fixDelay(metExploreD3.GraphNetwork.task,v);var d=w.getZoom();var t=0.01*g/100;var s=u-(u*t);d.scale(s);var h=s*o;var q=s*m;var y=(o-h)/2;var c=(m-q)/2;d.translate([y,c]);d.event(d3.select("#"+j).select("#D3viz"));w.setZoomScale(s);w.setXScale(d.x());w.setYScale(d.y())}else{if(!((f.top+m/10>a.top&&f.bottom-m/10<a.bottom)||(f.left+o/10>a.left&&f.right-o/10<a.right))){var g=b.getD3Data().getNodesLength();var v=3000;if(g<p.getReactionThreshold()||!p.isDisplayedLabelsForOpt()){v=3000}metExploreD3.fixDelay(metExploreD3.GraphNetwork.task,v);var d=w.getZoom();if(t==undefined){t=0.01}else{t=t/2}var s=u+(u*t);d.scale(s);var h=s*o;var q=s*m;var y=(o-h)/2;var c=(m-q)/2;d.translate([y,c]);d.event(d3.select("#"+j).select("#D3viz"));w.setZoomScale(s);w.setXScale(d.x());w.setYScale(d.y())}}}}},zoom:function(a){var c=metExploreD3.getScaleById(a);d3.select("#"+a).select("#D3viz").select("#graphComponent").attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")");var b=c.getZoom();c.setZoomScale(d3.event.scale);c.setXScale(b.x());c.setYScale(b.y());metExploreD3.GraphLink.tick(a,c)},zoomIn:function(){_MyThisGraphNode.dblClickable=false;var b=this.parentNode.parentNode.id;var j=metExploreD3.getScaleById(b);var d=j.getZoom();var f=_metExploreViz.getSessionById(b);var h=document.getElementById(b).getBoundingClientRect();var g=d3.select("#"+b).select("#D3viz")[0][0].getElementById("graphComponent").getBoundingClientRect();var d=j.getZoom();var c=parseInt(d3.select("#"+b).select("#D3viz").style("width"));var a=parseInt(d3.select("#"+b).select("#D3viz").style("height"));d.scale(j.getZoomScale()*1.1);d.event(d3.select("#"+b).select("#D3viz"));j.setXScale(d.x());j.setYScale(d.y());j.setZoomScale(j.getZoomScale()*1.1);metExploreD3.GraphLink.tick(b,j)},zoomOut:function(){_MyThisGraphNode.dblClickable=false;var b=this.parentNode.parentNode.id;var j=metExploreD3.getScaleById(b);var d=j.getZoom();var f=_metExploreViz.getSessionById(b);var h=document.getElementById(b).getBoundingClientRect();var g=d3.select("#"+b).select("#D3viz")[0][0].getElementById("graphComponent").getBoundingClientRect();var d=j.getZoom();var c=parseInt(d3.select("#"+b).select("#D3viz").style("width"));var a=parseInt(d3.select("#"+b).select("#D3viz").style("height"));d.scale(j.getZoomScale()*0.9);d.event(d3.select("#"+b).select("#D3viz"));j.setXScale(d.x());j.setYScale(d.y());j.setZoomScale(j.getZoomScale()*0.9);metExploreD3.GraphLink.tick(b,j)},animationButtonOn:function(a){d3.select("#"+a).select("#buttonAnim").select("image").remove();d3.select("#"+a).select("#buttonAnim").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/pause.svg").attr("width","50").attr("height","50").attr("transform","translate(10,10) scale(.5)");metExploreD3.GraphNetwork.setAnimated(a,true)},animationButtonOff:function(a){d3.select("#"+a).select("#buttonAnim").select("image").remove();d3.select("#"+a).select("#buttonAnim").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/play.svg").attr("width","50").attr("height","50").attr("transform","translate(10,10) scale(.5)");metExploreD3.GraphNetwork.setAnimated(a,false)},play:function(h){var j=_metExploreViz.getSessionsSet();var a=this.parentNode.parentNode.id;var g=_metExploreViz.getSessionById(a);if(g!=undefined){var f=metExploreD3.GraphNetwork.isAnimated(a);if(f=="false"){if(g.isLinked()){for(var b in j){if(j[b].isLinked()){metExploreD3.GraphNetwork.animationButtonOn(j[b].getId())}}var c=_metExploreViz.getSessionById("viz").getForce();c.start()}else{metExploreD3.GraphNetwork.animationButtonOn(a);var c=g.getForce();c.start()}}else{if(g.isLinked()){for(var b in j){if(j[b].isLinked()){metExploreD3.GraphNetwork.animationButtonOff(j[b].getId())}}var c=_metExploreViz.getSessionById("viz").getForce();c.stop()}else{metExploreD3.GraphNetwork.animationButtonOff(a);var c=g.getForce();c.stop()}}}},setLink:function(g){that=this;var a=this.parentNode.parentNode.id;var f=_metExploreViz.getSessionById(a);var b=_metExploreViz.getSessionById("viz");if(f!=undefined){var c=f.getForce();var h=d3.select(this).attr("isLink");d3.select(this).select("image").remove();if(h=="false"){metExploreD3.GraphNetwork.link(that)}else{metExploreD3.GraphNetwork.unLink(that)}}},link:function(d){var a=d.parentNode.parentNode.id;var g=_metExploreViz.getSessionById(a);var c=_metExploreViz.getSessionById("viz");var f=metExploreD3.GraphNetwork.isAnimated("viz");d3.select(d).attr("isLink","true");g.setLinked(true);c.setLinked(true);if(f=="true"){metExploreD3.GraphNetwork.animationButtonOn(a)}else{metExploreD3.GraphNetwork.animationButtonOff(a)}var h=d3.select(d).attr("isLink");d3.select(d).select("image").remove();d3.select(d).append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/link.svg").attr("width","50").attr("height","50").attr("transform","translate(10,50) scale(.5)");if(g!=undefined){if(c.getDuplicatedNodesCount()>0){var b=d3.select("#"+a).select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(j){return j.getBiologicalType()=="metabolite"});c.getDuplicatedNodes().forEach(function(j){b.filter(function(m){return m.getId()==j}).each(function(m){m.setIsSideCompound(true)})});metExploreD3.GraphNetwork.duplicateSideCompoundsById(c.getDuplicatedNodes(),a);metExploreD3.GraphNetwork.looksLinked();if(g.isLinked()){metExploreD3.GraphNetwork.graphAlignment(a)}}else{metExploreD3.GraphNetwork.graphAlignment(a)}}metExploreD3.GraphNetwork.initCentroids()},unLink:function(b){var a=b.parentNode.parentNode.id;var f=_metExploreViz.getSessionById(a);d3.select(b).append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/unlink.svg").attr("width","50").attr("height","50").attr("transform","translate(10,50) scale(.5)");d3.select(b).attr("isLink","false");f.setLinked(false);metExploreD3.GraphNetwork.looksLinked();var d=metExploreD3.GraphNetwork.isAnimated(a);if(d=="true"){var c=f.getForce();c.start()}},looksLinked:function(){var c=_metExploreViz.getSessionsSet();var b=_metExploreViz.getSessionById("viz");b.setLinked(false);for(var a in c){if(c[a].isLinked()){b.setLinked(true)}}},refreshSvg:function(p){var g=_metExploreViz.getSessionById(p).getD3Data();var s=g.getNodes();metExploreD3.fireEventParentWebSite("refreshCart",s);var r=[];for(var v=0;v<s.length-1;v++){r.push(s[v].name)}r=r.sort();var y=parseInt(metExploreD3.GraphPanel.getHeight(p));var o=parseInt(metExploreD3.GraphPanel.getWidth(p));var C=metExploreD3.getLinkStyle();var t=metExploreD3.getGeneralStyle();var D=metExploreD3.getMetaboliteStyle();var B=metExploreD3.getReactionStyle();var F=Math.max(B.getWidth(),B.getHeight());var z=Math.max(D.getWidth(),D.getHeight());var f=Math.max(F,z);var b=d3.layout.force().friction(0.9).gravity(0.06).charge(-150).linkDistance(function(h){if(h.getSource().getIsSideCompound()||h.getTarget().getIsSideCompound()){return C.getSize()/2+f}else{return C.getSize()+f}}).size([o,y]);var a=_metExploreViz.getSessionById(p);a.setActivity(true);a.setForce(b);if(p=="viz"){metExploreD3.GraphCaption.drawCaption()}var G=d3.scale.linear().domain([0,o]).range([0,o]);var d=d3.scale.linear().domain([y,0]).range([y,0]);if(a.getScale()==undefined){var m=metExploreD3.GraphNetwork;metExploreD3.GraphNetwork.zoomListener=d3.behavior.zoom().x(G).y(d).scaleExtent([0.01,30]).on("zoom",function(w){if(metExploreD3.GraphNetwork.zoomListener.scale()<0.8){d3.select("#"+p).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",true)}else{d3.select("#"+p).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",false)}var h=_metExploreViz.getSessionById(p);if(d3.event.sourceEvent!=null){if(d3.event.sourceEvent.type=="wheel"){h.setResizable(false)}}if(h.isActive()){m.zoom(p)}});var E=new Scale(p);E.setScale(G,d,1,1,1,metExploreD3.GraphNetwork.zoomListener.scale(),metExploreD3.GraphNetwork.zoomListener);metExploreD3.setScale(E,p)}else{var m=metExploreD3.GraphNetwork;metExploreD3.GraphNetwork.zoomListener=d3.behavior.zoom().x(G).y(d).scaleExtent([0.01,30]).on("zoom",function(w){if(metExploreD3.GraphNetwork.zoomListener.scale()<0.8){d3.select("#"+p).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",true)}else{d3.select("#"+p).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",false)}var h=_metExploreViz.getSessionById(this.parentNode.id);if(d3.event.sourceEvent!=null){if(d3.event.sourceEvent.type=="wheel"){h.setResizable(false)}}if(h.isActive()){m.zoom(this.parentNode.id)}});var E=new Scale(p);E.setScale(G,d,1,1,1,metExploreD3.GraphNetwork.zoomListener.scale(),metExploreD3.GraphNetwork.zoomListener);metExploreD3.setScale(E,p)}b.on("start",function(){if(g.getNodes().length>t.getReactionThreshold()&&t.isDisplayedLinksForOpt()){d3.selectAll("path.link").remove()}});b.on("end",function(){var h=metExploreD3.getScaleById(p);if((g.getNodes().length>t.getReactionThreshold()&&t.isDisplayedLinksForOpt())){metExploreD3.GraphLink.reloadLinks(p,g,C,D)}metExploreD3.GraphLink.tick(p,h)});var q=d3.select("#"+p);q.svg=q.select("#D3viz").selectAll("*").remove();_metExploreViz.setLinkedByTypeOfMetabolite(false);var A;var j=false;var c=d3.select("#"+p).select("#D3viz").append("g").datum(function(){return{selected:false,previouslySelected:false}}).attr("id","brush").attr("class","brush").call(d3.svg.brush().x(G).y(d).on("brushstart",function(I){document.addEventListener("mousedown",function(K){if(K.button===1){K.stopPropagation();K.preventDefault();K.stopImmediatePropagation()}});var w=d3.select("#"+p).select("#buttonHand").attr("scrollable");_MyThisGraphNode.activePanel=this.parentNode.parentNode.id;var H=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(d3.event.sourceEvent.button!=1&&w!="true"){if(H!=undefined){if(H.isLinked()){var J=_metExploreViz.getSessionById("viz");if(J!=undefined){var h=J.getForce();if(h!=undefined){h.stop()}}}else{var h=H.getForce();if(h!=undefined){h.stop()}}}j=true;d3.select("#"+p).select("#brush").classed("hide",false);d3.select("#"+p).select("#D3viz").on("mousedown.zoom",null);A=d3.select("#"+p).select("#graphComponent").selectAll("g.node");A.each(function(K){K.previouslySelected=K.isSelected()})}else{var h=H.getForce();if(h!=undefined){h.stop()}d3.select("#"+p).selectAll("#D3viz").style("cursor","all-scroll");d3.selectAll("#brush").classed("hide",true)}}).on("brushend",function(){if(d3.event.sourceEvent.button!=1&&j){var N=d3.event.target.extent();if(N[1][0]-N[0][0]>20||N[1][1]-N[0][1]>20){var K;var N=d3.event.target.extent();var H=metExploreD3.getScaleById(p);var J=H.getZoomScale();var w=metExploreD3.createLoadMask("Selection in progress...",p);if(w!=undefined){metExploreD3.showMask(w);metExploreD3.deferFunction(function(){A.classed("selected",function(U){var T=H.getXScale();var S=H.getYScale();K=(T(N[0][0])<=T(U.x)&&T(U.x)<T(N[1][0]))&&(S(N[0][1])<=S(U.y)&&S(U.y)<S(N[1][1]));if((U.isSelected()==false&&K==true)||(U.isSelected()==true&&K==false&&!U.previouslySelected)){_MyThisGraphNode.selection(U,p)}return K});metExploreD3.hideMask(w);var Q=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(Q!=undefined){if(Q.isLinked()){var R=_metExploreViz.getSessionById("viz");if(R!=undefined){var O=metExploreD3.GraphNetwork.isAnimated(R.getId());if(O=="true"){var P=R.getForce();if(P!=undefined){if((metExploreD3.GraphNetwork.isAnimated(R.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(R.getId())==null)){P.start()}}}}}else{var P=Q.getForce();var O=metExploreD3.GraphNetwork.isAnimated(Q.getId());if(O=="true"){var P=Q.getForce();if(P!=undefined){if((metExploreD3.GraphNetwork.isAnimated(Q.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(Q.getId())==null)){P.start()}}}}}j=false},100)}}}else{var L=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(L!=undefined){if(L.isLinked()){var I=_metExploreViz.getSessionById("viz");if(I!=undefined){var M=metExploreD3.GraphNetwork.isAnimated(I.getId());if(M=="true"){var h=I.getForce();if(h!=undefined){if((metExploreD3.GraphNetwork.isAnimated(I.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(I.getId())==null)){h.start()}}}}}else{var h=L.getForce();var M=metExploreD3.GraphNetwork.isAnimated(L.getId());if(M=="true"){var h=L.getForce();if(h!=undefined){if(d3.select(metExploreD3.GraphNetwork.isAnimated(L.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(L.getId())==null)){h.start()}}}}}}d3.event.target.clear();d3.select(this).call(d3.event.target);var H=metExploreD3.getScaleById(p);d3.select("#"+p).selectAll("#D3viz").style("cursor","default");d3.select("#"+p).selectAll("#D3viz").call(H.getZoom()).on("dblclick.zoom",null).on("mousedown",null);d3.event.target.extent();d3.selectAll("#brush").classed("hide",false)}));var y=parseInt(metExploreD3.GraphPanel.getHeight(p));var o=parseInt(metExploreD3.GraphPanel.getWidth(p));d3.select("#"+p).select("#D3viz").append("foreignObject").attr("x",o-300).attr("y",100).attr("width","500").attr("height","500").append("xhtml:div").attr("id","tooltip2").classed("tooltip2",true).classed("hide",true);q.svg=d3.select("#"+p).select("#D3viz").call(metExploreD3.GraphNetwork.zoomListener).on("dblclick.zoom",null).attr("pointer-events","all").append("svg:g").attr("class","graphComponent").attr("id","graphComponent");if(a!=undefined){var b=a.getForce();if(a.isResizable()!=undefined&&a.isResizable()!=false){metExploreD3.GraphNetwork.task.cancel()}a.setResizable(true);metExploreD3.GraphNetwork.task=metExploreD3.createDelayedTask(function(){a.setResizable(false)})}d3.select("#"+p).select("#D3viz").attr("animation",function(){if(a.isAnimated()){return true}else{return false}}).append("svg:g").attr("class","buttonAnim").attr("id","buttonAnim").on("click",metExploreD3.GraphNetwork.play).style("cursor","hand").append("image").attr("xlink:href",function(){if(a.isAnimated()){return document.location.href.split("index.html")[0]+"resources/icons/pause.svg"}else{return document.location.href.split("index.html")[0]+"resources/icons/play.svg"}}).attr("width","50").attr("height","50").attr("transform","translate(10,10) scale(.5)");d3.select("#"+p).select("#D3viz").append("svg:g").attr("class","buttonRescale").attr("id","buttonRescale").on("click",function(){metExploreD3.GraphNetwork.rescale(p)}).style("cursor","hand").append("image").attr("xlink:href",function(){return document.location.href.split("index.html")[0]+"resources/icons/rescale.png"}).attr("width","50").attr("height","50").attr("transform","translate(80,10) scale(.5)");d3.select("#"+p).select("#D3viz").append("svg:g").attr("class","whiteBlack").attr("id","whiteBlack").attr("x",(o-100)).attr("y",100).on("click",function(){if(d3.select("#"+p).style("-webkit-filter").search("grayscale")==-1&&d3.select("#"+p).style("filter").search("grayscale")==-1){d3.select("#"+p).style("filter","grayscale(100%)").style("-webkit-filter","grayscale(100%)")}else{d3.select("#"+p).style("filter","").style("-webkit-filter","")}}).style("cursor","hand").style("visibility","hidden").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/blackWhite.png").attr("width","50").attr("height","50").attr("transform","translate("+(o-100)+",100) scale(0.5)");d3.select("#"+p).select("#D3viz").append("svg:g").attr("class","invertColor").attr("id","invertColor").attr("x",(o-100)).attr("y",150).on("click",function(){if(d3.select("#"+p).style("-webkit-filter").search("invert")==-1&&d3.select("#"+p).style("filter").search("invert")==-1){d3.select("#"+p).style("filter","invert(100%)").style("-webkit-filter","invert(100%)")}else{d3.select("#"+p).style("filter","").style("-webkit-filter","")}}).style("cursor","hand").style("visibility","hidden").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/invertColor.svg").attr("width","50").attr("height","50").attr("transform","translate("+(o-100)+",150) scale(0.5)");d3.select("#"+p).select("#D3viz").append("svg:g").attr("class","buttonZoomIn").attr("id","buttonZoomIn").attr("x",(o-60)).attr("y",10).on("click",metExploreD3.GraphNetwork.zoomIn).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/zoomin.svg").attr("width","50").attr("height","50").style("opacity",0.2).attr("transform","translate("+(o-60)+",10) scale(1)").on("mouseover",function(h){d3.select(this).transition().duration(500).style("opacity",1)}).on("mouseout",function(h){d3.select(this).transition().duration(500).style("opacity",0.2)});d3.select("#"+p).select("#D3viz").append("svg:g").attr("class","buttonZoomOut").attr("id","buttonZoomOut").attr("x",(o-110)).attr("y",10).on("click",metExploreD3.GraphNetwork.zoomOut).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/zoomout.svg").attr("width","50").attr("height","50").style("opacity",0.2).attr("transform","translate("+(o-110)+",10) scale(1)").on("mouseover",function(h){d3.select(this).transition().duration(500).style("opacity",1)}).on("mouseout",function(h){d3.select(this).transition().duration(500).style("opacity",0.2)});d3.select("#"+p).select("#D3viz").append("svg:g").attr("class","buttonHand").attr("id","buttonHand").attr("x",(o-160)).attr("y",10).attr("scrollable","false").on("click",metExploreD3.GraphNetwork.moveGraph).style("opacity",1).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/handcursor.svg").attr("width","50").attr("height","50").attr("transform","translate("+(o-160)+",10) scale(1)");d3.select("#"+p).select("#D3viz").select("buttonHand").style("opacity",0);d3.select("#"+p).on("mouseover",function(){d3.select("#"+p).select("#D3viz").select("#buttonZoomOut").transition().duration(500).style("opacity",1);d3.select("#"+p).select("#D3viz").select("#buttonZoomIn").transition().duration(500).style("opacity",1);var w=_metExploreViz.getSessionById(p);if(w.isActive()){var h=d3.select("#"+p).select("#buttonHand").attr("scrollable");if(h=="false"){d3.select("#"+p).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",0.2)}else{d3.select("#"+p).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",1)}}}).on("mouseout",function(){d3.select("#"+p).select("#D3viz").select("#buttonZoomOut").transition().duration(500).style("opacity",0);d3.select("#"+p).select("#D3viz").select("#buttonZoomIn").transition().duration(500).style("opacity",0);d3.select("#"+p).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",0)});if(a.isAnimated()){metExploreD3.GraphNetwork.setAnimated(p,true)}else{metExploreD3.GraphNetwork.setAnimated(p,false)}var C=metExploreD3.getLinkStyle();var D=metExploreD3.getMetaboliteStyle();metExploreD3.GraphLink.refreshLink(p,a,C,D);metExploreD3.GraphNode.refreshNode(p);if(p!="viz"){d3.select("#"+p).select("#D3viz").append("svg:g").attr("class","buttonLink").attr("id","buttonLink").attr("isLink","false").on("click",metExploreD3.GraphNetwork.setLink).style("cursor","hand").append("image").attr("xlink:href",function(){if(a.isLinked()){return document.location.href.split("index.html")[0]+"resources/icons/link.svg"}else{return document.location.href.split("index.html")[0]+"resources/icons/unlink.svg"}}).attr("width","50").attr("height","50").attr("transform","translate(10,50) scale(.5)")}else{metExploreD3.GraphNetwork.looksLinked();if(a.isLinked()){metExploreD3.GraphNetwork.graphAlignment(p)}}var g=a.getD3Data();var b=a.getForce();b.nodes(g.getNodes()).links(g.getLinks()).on("tick",function(I){var w=metExploreD3.getGeneralStyle().useClusters();var H=metExploreD3.getGeneralStyle().isDisplayedConvexhulls();if(w&&H!=false){var h=I.alpha*0.1;g.getNodes().forEach(function(O){if(H=="Compartments"){var P=null;if(O.getBiologicalType()=="metabolite"){P=O.getCompartment()}else{var N=[];for(var M in a.groups){if(a.groups.hasOwnProperty(M)){var K=a.groups[M].values.indexOf(O);if(K!=-1){N.push(a.groups[M].key)}}}if(N.length<2){P=N[0]}}if(P!=null){var L=_metExploreViz.getSessionById(p).getForceCentroids();var J=L.nodes().find(function(Q){return Q.id==P});O.x+=(J.x-O.x)*h;O.y+=(J.y-O.y)*h}}else{if(H=="Pathways"&&O.getPathways().length<2){var P=a.getGroupByKey(O.getPathways()[0]);if(P!=null){var L=_metExploreViz.getSessionById(p).getForceCentroids();var J=L.nodes().find(function(Q){return Q.id==O.getPathways()[0]});O.x+=(J.x-O.x)*h;O.y+=(J.y-O.y)*h}}}})}if(b.alpha()>=0.005){setTimeout(metExploreD3.GraphNetwork.tick(p),0)}});if(a.isAnimated()){b.start()}else{b.start();b.stop();metExploreD3.GraphNetwork.tick(p)}var u=t.isDisplayedConvexhulls();if(u&&p=="viz"){metExploreD3.GraphLink.displayConvexhulls(p)}a.setForce(b)},rescale:function(b){var j=d3.select("#"+b).select("#D3viz")[0][0].getElementById("graphComponent").getBoundingClientRect();var m=document.getElementById(b).getBoundingClientRect();var h=m.bottom-m.top-20;var r=j.bottom-j.top;console.log(r);var f=metExploreD3.getScaleById(b);var o=f.getZoom();var g=h*o.scale()/r;console.log(g);f.setZoomScale(g);var d=j.right-j.left;var r=j.bottom-j.top;var h=m.bottom-m.top-20;var p=m.right-m.left-20;d3.select("#"+b).select("#D3viz").select("#graphComponent");var q=f.getZoom();q.scale(g);var c=(p/2-((p/2)*q.scale()));var a=(h/2-((h/2)*q.scale()));q.translate([c,a]);d3.select("#"+b).select("#D3viz").select("#graphComponent").attr("transform","translate("+c+","+a+")scale("+g+")")},initCentroids:function(){var a="viz";var g=parseInt(metExploreD3.GraphPanel.getHeight(a));var p=parseInt(metExploreD3.GraphPanel.getWidth(a));var f=metExploreD3.getLinkStyle();var o=metExploreD3.getGeneralStyle();var m=_metExploreViz.getSessionById(a);var d=m.getD3Data();var b=d3.layout.force().friction(0.9).gravity(0.08).charge(-4000).theta(0.2).linkDistance(600).size([p,g]);m.setForceCentroids(b);var c=metExploreD3.getGeneralStyle().isDisplayedConvexhulls();var j=[];if(c=="Compartments"){d.getCompartments().forEach(function(h){j.push({id:h.identifier,x:2,y:2})});var q=[];d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(h){return h.getBiologicalType()=="reaction"}).filter(function(t){var s=0;for(var r in m.groups){if(m.groups.hasOwnProperty(r)){if(m.groups[r].values!=undefined){return false}var h=m.groups[r].values.indexOf(t);if(h!=-1){s++}}}return s.length>1}).each(function(h){h.getCompartment().forEach(function(r){h.getCompartment().forEach(function(u){if(r!=u){var s=j.findIndex(function(w){return w.id==r});var t=j.findIndex(function(w){return w.id==u});var v=q.find(function(w){return w.source==s&&w.target==t});if(v==undefined){q.push({source:s,target:t})}}})})})}else{d.getPathways().forEach(function(h){j.push({id:h,x:2,y:2})});var q=[];d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(h){return h.getPathways().length>1}).each(function(h){h.getPathways().forEach(function(r){h.getPathways().forEach(function(t){if(r!=t){var s=j.findIndex(function(w){return w.id==r});var u=j.findIndex(function(w){return w.id==t});var v=q.find(function(w){return w.source==s&&w.target==u});if(v==undefined){q.push({source:s,target:u})}}})})})}b.nodes(j).links(q).start()},moveGraph:function(){_MyThisGraphNode.dblClickable=false;var a=this.parentNode.parentNode.id;var b=d3.select("#"+a).select("#buttonHand").attr("scrollable");if(b=="false"){d3.select("#"+a).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",1);d3.select("#"+a).select("#buttonHand").attr("scrollable",true)}else{d3.select("#"+a).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",0.2);d3.select("#"+a).select("#buttonHand").attr("scrollable",false)}},graphAlignment:function(a){var d=_metExploreViz.getSessionById(a);if(a!="viz"){var b=_metExploreViz.getSessionById("viz");d3.select("#"+a).select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(j){var h=this;var g=d3.select(h).select("rect").style("fill");d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").each(function(r){if(r.getId()==j.getId()){j.x=r.x;j.y=r.y;if(r.getMappingDatasLength()>0){r.getMappingDatas().forEach(function(s){if(s.getMapValue()==undefined){j.addMappingData(new MappingData(j,s.getMappingName().valueOf(),s.getConditionName().valueOf(),undefined))}else{j.addMappingData(new MappingData(j,s.getMappingName().valueOf(),s.getConditionName().valueOf(),s.getMapValue().valueOf()))}})}if(j.selected&&!r.isSelected()){_MyThisGraphNode.selection(r,"viz")}if(!j.selected&&r.isSelected()){_MyThisGraphNode.selection(j,a)}var q=d3.select(this).select("rect."+r.getBiologicalType()).style("fill");if(g!=q){d3.select(h).select("rect."+r.getBiologicalType()).style("fill",q);if(r.getBiologicalType()=="metabolite"){var o=metExploreD3.getMetaboliteStyle()}else{var o=metExploreD3.getReactionStyle();var p=metExploreD3.GraphUtils.chooseTextColor(q);d3.select(h).select("text").style("fill",p)}var m=d3.select(this).select("rect."+r.getBiologicalType()).attr("mapped");if(m>0){d3.select(h).insert("rect",":first-child").attr("class","stroke").attr("width",o.getWidth()+4).attr("height",o.getHeight()+4).attr("rx",o.getRX()).attr("ry",o.getRY()).attr("transform","translate(-"+parseInt(o.getWidth()+4)/2+",-"+parseInt(o.getHeight()+4)/2+")").style("opacity","0.5").style("fill","red")}d.setMappingDataType(b.getMappingDataType());d.setMapped(b.isMapped())}}})});d.setActiveMapping(b.getActiveMapping().valueOf());d.resetColorMapping();b.getColorMappingsSet().forEach(function(g){d.addColorMapping(g.getName().valueOf(),g.getValue().valueOf())});var c=d.getForce();c.stop();var f=metExploreD3.getScaleById(a);metExploreD3.GraphLink.tick(a,f);metExploreD3.GraphNode.tick(a)}},scaledX:function(a,b){var j=metExploreD3.getSessionsSet();var h;if(b=="viz"){var g;for(var d in sessions){if(sessions[d].getId()=="viz"){g=sessions[d].getId()}}var f=parseInt(d3.select("#"+g).select("#D3viz").style("width"));var c=parseInt(d3.select("#viz").select("#D3viz").style("width"));h=(a*f)/c}else{var g;for(var d in sessions){if(sessions[d].getId()=="viz"){g=sessions[d].getId()}}var f=parseInt(d3.select("#"+b).select("#D3viz").style("width"));var c=parseInt(d3.select("#viz").select("#D3viz").style("width"));h=(a*c)/f}return h},scaledY:function(j,a){var h=metExploreD3.getSessionsSet();var b;if(a=="viz"){var g;for(var d in sessions){if(sessions[d].getId()=="viz"){g=sessions[d].getId()}}var f=parseInt(d3.select("#"+g).select("#D3viz").style("height"));var c=parseInt(d3.select("#viz").select("#D3viz").style("height"));b=(j*f)/c}else{var g;for(var d in sessions){if(sessions[d].getId()=="viz"){g=sessions[d].getId()}}var f=parseInt(d3.select("#"+a).select("#D3viz").style("height"));var c=parseInt(d3.select("#viz").select("#D3viz").style("height"));b=(j*c)/f}return Scaled},addLinkInDrawing:function(m,b,j,r,a,c){var q=_metExploreViz.getSessionById(c);var h=q.getD3Data();h.addLink(m,b,j,r,a);var o=metExploreD3.getMetaboliteStyle();var g=metExploreD3.getLinkStyle();var f=q.getForce();var s=_metExploreViz.getSessionById(c).getMappingDataType()=="Flux";var d={};if(s){d3.select("#"+c).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(t){if(b.getBiologicalType()=="metabolite"){return(t.getSource().getId()==b.getIdentifier()||t.getSource().getId()==j.getId())&&(t.getTarget().getId()==b.getIdentifier()||t.getTarget().getId()==j.getId())}else{return(t.getSource().getId()==b.getId()||t.getSource().getId()==j.getIdentifier())&&(t.getTarget().getId()==b.getId()||t.getTarget().getId()==j.getIdentifier())}}).each(function(v){var t;if(b.getBiologicalType()=="reaction"){t=b.getId()}else{t=j.getId()}var u;if(this.id=="linkRev"){u="linkRev"}else{u="link"}if(d[t]==undefined){d[t]={}}d[t][u]={fill:d3.select(this).style("fill"),strokeDasharray:d3.select(this).style("stroke-dasharray")}});var p=d3.select("#"+c).select("#D3viz").select("#graphComponent").selectAll("path.link").data(f.links(),function(t){return t.source.id+"-"+t.target.id}).enter().insert("svg:g",":first-child");p.each(function(t){d3.select(this).filter(function(v){var u;if(b.getBiologicalType()=="reaction"){u=b.getId()}else{u=j.getId()}return d[u].link!=undefined}).append("svg:path").attr("class",String).attr("d",function(u){return metExploreD3.GraphLink.funcPathForFlux(u,c,this.id)}).attr("class","link").attr("fill-rule","evenodd").style("stroke",g.getStrokeColor()).style("stroke-width",0.5).style("opacity",0.1).style("stroke-dasharray",function(v){var u;if(b.getBiologicalType()=="reaction"){u=b.getId()}else{u=j.getId()}return d[u].link.strokeDasharray}).style("fill",function(v){var u;if(b.getBiologicalType()=="reaction"){u=b.getId()}else{u=j.getId()}return d[u].link.fill}).on("mouseover",function(B){var A,w,u,z;if(B.getSource().getBiologicalType()=="reaction"){A=B.getSource();w=B.getTarget()}else{A=B.getTarget();w=B.getSource()}u=B.getSource();z=B.getTarget();var E=_metExploreViz.getSessionById("viz").getActiveMapping();var v=_metExploreViz.getMappingByName(E);var D=v.getConditions();var C=A.getMappingDataByNameAndCond(E,D[0]);if(C!=null){var F=C.getMapValue();if(F<0){z=B.getSource();u=B.getTarget()}}if(!document.getElementById("tooltip2").classList.contains("fixed")){var y="Name: "+B.id+"<br/><b>Source:</b> "+u.getName()+"<br/><b>Target:</b> "+z.getName()+((F!=undefined)?"<br/>Flux: "+Math.abs(F):"");y+="<br/>";document.getElementById("tooltip2").innerHTML=y;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseout",function(u){document.getElementById("tooltip2").classList.add("hide")});d3.select(this).filter(function(v){var u;if(b.getBiologicalType()=="reaction"){u=b.getId()}else{u=j.getId()}return d[u].linkRev!=undefined}).append("svg:path").attr("class",String).attr("id","linkRev").attr("d",function(u){return metExploreD3.GraphLink.funcPathForFlux(u,c,this.id)}).attr("class","link").attr("fill-rule","evenodd").style("stroke",g.getStrokeColor()).style("stroke-width",0.5).style("opacity",0.1).style("stroke-dasharray",function(v){var u;if(b.getBiologicalType()=="reaction"){u=b.getId()}else{u=j.getId()}return d[u].linkRev.strokeDasharray}).style("fill",function(v){var u;if(b.getBiologicalType()=="reaction"){u=b.getId()}else{u=j.getId()}return d[u].linkRev.fill}).on("mouseover",function(B){var A,w,u,z;if(B.getSource().getBiologicalType()=="reaction"){A=B.getSource();w=B.getTarget()}else{A=B.getTarget();w=B.getSource()}u=B.getSource();z=B.getTarget();var E=_metExploreViz.getSessionById("viz").getActiveMapping();var v=_metExploreViz.getMappingByName(E);var D=v.getConditions();var C=A.getMappingDataByNameAndCond(E,D[1]);if(C!=null){var F=C.getMapValue();if(F<0){z=B.getSource();u=B.getTarget()}}if(!document.getElementById("tooltip2").classList.contains("fixed")){var y="Name: "+B.id+"<br/><b>Source: </b>"+u.getName()+"<br/><b>Target: </b>"+z.getName()+((F!=undefined)?"<br/>Flux: "+Math.abs(F):"");y+="<br/>";document.getElementById("tooltip2").innerHTML=y;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseout",function(u){document.getElementById("tooltip2").classList.add("hide")})})}else{link=d3.select("#"+c).select("#graphComponent").selectAll("path.link").data(f.links(),function(t){return t.source.id+"-"+t.target.id}).enter().insert("path",":first-child").attr("class",String).attr("d",function(t){return metExploreD3.GraphLink.funcPath4(t,c)}).attr("class","link").attr("fill-rule","evenodd").attr("fill",function(t){if(t.interaction=="out"){return g.getMarkerOutColor()}else{return g.getMarkerInColor()}}).style("stroke",g.getStrokeColor()).style("stroke-width",0.5).style("opacity",0.5).attr("x1",b.x).attr("y1",b.y).attr("x2",j.x).attr("y2",j.y)}},addMetaboliteInDrawing:function(p,t,j,q){var d=t+"-"+j;var a=_metExploreViz.getSessionById(q);var f=a.getD3Data();var b=a.getForce();var A=metExploreD3.getMetaboliteStyle();var y=metExploreD3.getGeneralStyle();var u=d3.behavior.drag().on("dragstart",_MyThisGraphNode.dragstart).on("drag",_MyThisGraphNode.dragmove).on("dragend",_MyThisGraphNode.dragend);var B=metExploreD3.getScaleById(q);metExploreD3.fireEventParentWebSite("sideCompound",p);var c=f.addNode(p.getName(),p.getCompartment(),p.getDbIdentifier(),d,p.getReactionReversibility(),p.getBiologicalType(),false,p.getLabelVisible(),p.getSvg(),p.getSvgWidth(),p.getSvgHeight(),p.getIsSideCompound(),undefined,true,t,f.getNodeById(j).getPathways());if(p.getMappingDatasLength()!=0){p.getMappingDatas().forEach(function(D){f.getNodeById(d).addMappingData(new MappingData(p,D.getMappingName(),D.getConditionName(),D.getMapValue()))})}var w=d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("g.node");var s=false;var v=w.filter(function(D){return D.getId()==t});v.each(function(){s=this.getAttribute("mapped")});w=w.data(b.nodes(),function(D){return D.getId()});w.enter().append("svg:g").attr("class","node").attr("duplicated",function(D){return"true"}).call(u).style("fill","white");w.filter(function(D){return D.getBiologicalType()=="metabolite"}).filter(function(D){return D.getId()==d}).style("stroke-opacity",0.5).addNodeForm(A.getWidth()/2,A.getHeight()/2,A.getRX()/2,A.getRY()/2,A.getStrokeColor(),A.getStrokeWidth()/2);w.filter(function(D){return D.getBiologicalType()=="metabolite"}).filter(function(D){return D.getId()==d}).on("mouseenter",function(E){var D=d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("g.node");d3.select(this).each(function(G){var F=D[0][D.size()-1];this.parentNode.insertBefore(this,F)}).attr("transform","translate("+E.x+", "+E.y+") scale(2)")}).on("mouseover",function(G){G.fixed=true;w.filter(function(H){return H==G}).select(".locker").classed("hide",false).select(".iconlocker").attr("xlink:href",function(H){if(H.isLocked()){return"resources/icons/lock_font_awesome.svg"}else{return"resources/icons/unlock_font_awesome.svg"}});if(G.getBiologicalType()=="reaction"){d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(H){return G.getId()==H.getSource().getId()}).style("stroke","green");d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(H){return G.getId()==H.getTarget().getId()}).style("stroke","red")}else{d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(H){return G.getId()==H.getSource().getId()}).style("stroke","red");d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(H){return G.getId()==H.getTarget().getId()}).style("stroke","green")}var F=B.getXScale();var E=B.getYScale();if(!document.getElementById("tooltip2").classList.contains("fixed")){var D="<b>Name:</b> "+G.getName()+"<br/><b>Biological type:</b> "+G.getBiologicalType()+((G.getCompartment()!=undefined)?"<br/><b>Compartment:</b> "+G.getCompartment():"")+((G.getDbIdentifier()!=undefined)?"<br/><b>Database identifier:</b> "+G.getDbIdentifier():"")+((G.getEC()!=undefined)?"<br/><b>EC number:</b> "+G.getEC():"")+((G.getReactionReversibility()!=undefined)?"<br/><b>Reaction reversibility:</b> "+G.getReactionReversibility():"")+((G.getIsSideCompound()!=undefined)?"<br/><b>SideCompound:</b> "+G.getIsSideCompound():"")+((G.getMappingDatasLength()!=0)?((G.getMappingDatasLength()==1)?"<br/><b>Mapping:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>":"<br/><b>Mappings:</b><br/><table style='width:100%; margin-left: 30px; padding-right: 30px;'>"):"");G.getMappingDatas().forEach(function(H){D+="<tr><td>"+H.getMappingName()+"</td><td>"+H.getConditionName()+"</td><td>"+H.getMapValue()+"</td></tr>"});D+="</table>";if(G.getSvg()!=undefined&&G.getSvg()!="undefined"&&G.getSvg()!=""){D+='<br/><img src="resources/images/structure_metabolite/'+G.getSvg()+'"/>'}document.getElementById("tooltip2").innerHTML=D;document.getElementById("tooltip2").classList.remove("hide")}}).on("mouseleave",function(E){d3.select(this).attr("transform","translate("+E.x+", "+E.y+") scale(1)");if(!E.isLocked()){E.fixed=false}w.filter(function(F){return F==E}).select(".locker").classed("hide",true);var D=metExploreD3.getLinkStyle();document.getElementById("tooltip2").classList.add("hide");d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(F){return E.getId()==F.getSource().getId()||E.getId()==F.getTarget().getId()}).style("stroke",D.getStrokeColor());if(E.getBiologicalType()=="reaction"){d3.select(this).selectAll("rect").selectAll(".reaction, .fontSelected").transition().duration(750).attr("width",reactionStyle.getWidth()).attr("height",reactionStyle.getHeight()).attr("transform","translate(-"+reactionStyle.getWidth()/2+",-"+reactionStyle.getHeight()/2+")")}else{d3.select(this).selectAll("rect").selectAll(".reaction, .fontSelected").transition().duration(750).attr("width",A.getWidth()).attr("height",A.getHeight()).attr("transform","translate(-"+A.getWidth()/2+",-"+A.getHeight()/2+")")}});var C=w.filter(function(D){return D.getId()==d});metExploreD3.GraphNode.colorStoreByCompartment(C);if(f.getNodes().length<y.getReactionThreshold()||!y.isDisplayedLabelsForOpt()){var r=Math.min(A.getWidth()/2,A.getHeight()/2);w.filter(function(D){return D.getId()==d}).filter(function(D){return D.getLabelVisible()==true}).filter(function(D){return D.getBiologicalType()=="metabolite"}).filter(function(D){return D.getSvg()=="undefined"||D.getSvg()==undefined||D.getSvg()==""}).append("svg:text").attr("fill","black").attr("class",function(D){return D.getBiologicalType()}).text(function(D){return $("<div/>").html(D.getName()).text()}).style("font-size",function(D){return Math.min((2*r/2),(2*r/2-3)/this.getComputedTextLength()*10)+"px"}).attr("dy",".3em").style("pointer-events","none").style("opacity",0.5);w.filter(function(D){return D.getId()==d}).filter(function(D){return D.getLabelVisible()==true}).filter(function(D){return D.getBiologicalType()=="metabolite"}).filter(function(D){return D.getSvg()!="undefined"&&D.getSvg()!=undefined&&D.getSvg()!=""}).append("svg:text").attr("fill","black").attr("class",function(D){return D.getBiologicalType()}).text(function(D){return $("<div/>").html(D.getName()).text()}).style("font-size",function(D){return Math.min((r)/2,((r-3)/this.getComputedTextLength()*10)/2)+"px"}).attr("dy",".3em").style("pointer-events","none").attr("y",+(3/4*(r/2)));w.filter(function(D){return D.getId()==d}).filter(function(D){return(D.getBiologicalType()=="metabolite"&&D.getSvg()!="undefined"&&D.getSvg()!=undefined&&D.getSvg()!="")}).append("svg").attr("viewBox",function(D){return"0 0 "+r+" "+r}).attr("width",r*8/10+"px").attr("height",r*8/10+"px").attr("x",(-r/2)+(r*1/10)).attr("preserveAspectRatio","xMinYMin").attr("y",(-r/2)+(r*1/10)).attr("class","structure_metabolite").append("image").style("opacity",0.5).attr("xlink:href",function(D){return"resources/images/structure_metabolite/"+D.getSvg()}).attr("width","100%").attr("height","100%");var m=w.filter(function(D){return D.getId()==d}).insert("svg",":first-child").attr("viewBox",function(D){+" "+r}).attr("width",A.getWidth()/2).attr("height",A.getHeight()/2).attr("preserveAspectRatio","xMinYMin").attr("y",-A.getHeight()/2).attr("x",-A.getWidth()/2).attr("class","locker").classed("hide",true);m.append("svg:path").attr("class","backgroundlocker").attr("d",function(E){var D="M"+A.getWidth()/2+","+A.getHeight()/2+" L0,"+A.getHeight()/2+" L0,"+A.getRY()*2/2+" A"+A.getRX()*2/2+","+A.getRY()*2/2+",0 0 1 "+A.getRX()*2/2+",0 L"+A.getWidth()/2+",0";return D}).attr("opacity","0.20").attr("fill","black");m.append("image").attr("class","iconlocker").attr("y",A.getHeight()/4/2-(A.getHeight()/2-A.getRY()*2/2)/8).attr("x",A.getWidth()/4/2-(A.getWidth()/2-A.getRX()*2/2)/8).attr("width","40%").attr("height","40%");w.filter(function(D){return D.getId()==d}).filter(function(D){return D.getLabelVisible()==true}).filter(function(D){return D.getBiologicalType()=="reaction"}).append("svg:text").attr("fill","black").attr("class",function(D){return D.getBiologicalType()}).text(function(D){return $("<div/>").html(D.getName()).text()}).style("font-size",function(D){return Math.min(2*r,(r-2)/this.getComputedTextLength()*10)+"px"}).attr("dy",".3em")}if(s!=undefined&&s!=false&&s!="false"){if(s==true||s=="true"){w.filter(function(D){return D.getId()==d}).attr("mapped","true").insert("rect",":first-child").attr("class","stroke").attr("width",A.getWidth()/2+10).attr("height",A.getHeight()/2+10).attr("rx",A.getRX()/2+5).attr("ry",A.getRY()/2+5).attr("transform","translate(-"+parseInt(A.getWidth()/2+10)/2+",-"+parseInt(A.getWidth()/2+10)/2+")").style("opacity","0.5").style("fill","red")}else{var z=s;w.filter(function(D){return D.getId()==d}).attr("mapped",z).style("fill",z)}}var h=100;var g=100;w.filter(function(D){return D.getBiologicalType()=="reaction"}).filter(function(D){return D.getId()==j}).each(function(F){var E=F.x-p.x;var D=F.y-p.y;var G=Math.sqrt(Math.pow(E,2)+Math.pow(D,2));h=F.x-(40*E)/G;g=F.y-(40*D)/G});w.filter(function(D){return D.getBiologicalType()=="metabolite"}).filter(function(D){return D.getId()==d}).attr("transform",function(D){return"translate("+h+","+g+")"}).each(function(D){D.px=h;D.py=g;D.x=h;D.y=g});var o=undefined;a.groups.forEach(function(E){if(o=="compartment"){if(E.key==c.getCompartment()){E.values.push(c)}}else{var D=c.getPathways().find(function(F){return E.key==F});if(D!=undefined){E.values.push(c)}}});if(metExploreD3.GraphNetwork.isAnimated(q)==true||metExploreD3.GraphNetwork.isAnimated(q)=="true"){b.start()}return c},duplicateANode:function(s,b){var t=_metExploreViz.getSessionById(b);t.addDuplicatedNode(s.getId());var c=t.getForce();var m=t.getD3Data();var a,u;u=[];a=[];var d=d3.select("#"+b).select("#D3viz");var f=d3.behavior.drag().on("dragstart",function(v){_MyThisGraphNode.dragstart(v)}).on("drag",function(v){_MyThisGraphNode.dragmove(v)}).on("dragend",_MyThisGraphNode.dragend);var j=metExploreD3.getScaleById(b);d.selectAll("path.link").filter(function(v){return v.getInteraction()!="hiddenForce"}).each(function(y){var v=y.source;var w=y.target;if(v==s){if(a.indexOf(w)==-1){a.push(w)}}else{if(w==s){if(u.indexOf(v)==-1){u.push(v)}}}});a.forEach(function(y){var v=s.getId()+"-"+y.getId();var w=metExploreD3.GraphNetwork.addMetaboliteInDrawing(s,s.getId(),y.getId(),b);metExploreD3.GraphNetwork.addLinkInDrawing(v+"-"+y.getId(),w,y,"in",y.getReactionReversibility(),b)});u.forEach(function(y){var v=s.getId()+"-"+y.getId();var w=metExploreD3.GraphNetwork.addMetaboliteInDrawing(s,s.getId(),y.getId(),b);metExploreD3.GraphNetwork.addLinkInDrawing(y.getId()+"-"+v,y,w,"out",y.getReactionReversibility(),b)});var r=metExploreD3.getMetaboliteStyle();var o=metExploreD3.getReactionStyle();var p=Math.max(o.getWidth(),o.getHeight());var q=Math.max(r.getWidth(),r.getHeight());var g=Math.max(p,q);var h=metExploreD3.getLinkStyle();c.linkDistance(function(v){if(v.getSource().getIsSideCompound()||v.getTarget().getIsSideCompound()){return h.getSize()/2+g}else{return h.getSize()+g}})},duplicateSideCompounds:function(b,c){if(b==undefined){b="viz"}var f=d3.select("#"+b).select("#D3viz");var d=[];var a=metExploreD3.createLoadMask("Duplicate in progress...",b);if(a!=undefined){metExploreD3.showMask(a);metExploreD3.deferFunction(function(){f.selectAll("g.node").filter(function(m){return m.getIsSideCompound()&&m.getBiologicalType()=="metabolite"}).filter(function(m){if(this.getAttribute("duplicated")==undefined){return true}else{return !this.getAttribute("duplicated")}}).each(function(m){metExploreD3.GraphNetwork.duplicateSideCompound(m,b);d.push(m)});metExploreD3.hideMask(a);d.forEach(function(m){metExploreD3.GraphNetwork.removeANode(m,b)});if(_metExploreViz.isLinkedByTypeOfMetabolite()){metExploreD3.GraphLink.linkTypeOfMetabolite()}var j=_metExploreViz.getSessionsSet();var g=_metExploreViz.getSessionById(b);if(c!=undefined){c()}if(b!="viz"&&g.isLinked()){metExploreD3.fireEvent("graphPanel","afterDuplicate")}else{for(var h in j){if(j[h].isLinked()&&j[h].getId()!="viz"){metExploreD3.deferFunction(function(){j[h].setLinked(false);metExploreD3.GraphNetwork.looksLinked();var o=j[h].getForce();var m=_metExploreViz.getSessionById("viz");if(j[h]!=undefined){if(m.getDuplicatedNodesCount()>0){var o=j[h].getForce();j[h].setLinked(true);m.setLinked(true);metExploreD3.GraphNetwork.duplicateSideCompounds(j[h].getId());metExploreD3.GraphNetwork.looksLinked();if(j[h].isLinked()){metExploreD3.GraphNetwork.graphAlignment(j[h].getId())}}else{metExploreD3.GraphNetwork.graphAlignment(j[h].getId());j[h].setLinked(true);m.setLinked(true)}}},100)}}}},1)}metExploreD3.GraphNetwork.initCentroids()},duplicateSideCompoundsById:function(c,b){var f=d3.select("#"+b).select("#D3viz");var d=[];var a=metExploreD3.createLoadMask("Duplicate in progress...",b);if(a!=undefined){metExploreD3.showMask(a);metExploreD3.deferFunction(function(){f.selectAll("g.node").filter(function(g){return c.indexOf(g.getId())!=-1}).filter(function(g){if(this.getAttribute("duplicated")==undefined){return true}else{return !this.getAttribute("duplicated")}}).each(function(g){metExploreD3.GraphNetwork.duplicateSideCompound(g,b);d.push(g)});metExploreD3.hideMask(a);d.forEach(function(g){metExploreD3.GraphNetwork.removeANode(g,b)});if(_metExploreViz.isLinkedByTypeOfMetabolite()){metExploreD3.GraphLink.linkTypeOfMetabolite()}},0)}metExploreD3.GraphNetwork.initCentroids()},duplicateSideCompoundsSelected:function(b){var d=d3.select("#"+b).select("#D3viz");var c=[];var a=metExploreD3.createLoadMask("Duplicate in progress...",b);if(a!=undefined){metExploreD3.showMask(a);metExploreD3.deferFunction(function(){d.selectAll("g.node").filter(function(j){return j.isSelected()&&j.getBiologicalType()=="metabolite"}).filter(function(j){if(this.getAttribute("duplicated")==undefined){return true}else{return !this.getAttribute("duplicated")}}).each(function(m){if(metExploreD3.getMetabolitesSet()!=undefined){var j=metExploreD3.getMetaboliteById(metExploreD3.getMetabolitesSet(),m.getId());j.set("sideCompound",true)}m.setIsSideCompound(true);metExploreD3.GraphNetwork.duplicateSideCompound(m,b);c.push(m)});metExploreD3.hideMask(a);c.forEach(function(j){metExploreD3.GraphNetwork.removeANode(j,b)});if(_metExploreViz.isLinkedByTypeOfMetabolite()){metExploreD3.GraphLink.linkTypeOfMetabolite()}var h=_metExploreViz.getSessionsSet();var f=_metExploreViz.getSessionById(b);if(b!="viz"&&f.isLinked()){metExploreD3.fireEvent("graphPanel","afterDuplicate")}else{for(var g in h){if(h[g].isLinked()&&h[g].getId()!="viz"){metExploreD3.deferFunction(function(){h[g].setLinked(false);metExploreD3.GraphNetwork.looksLinked();var m=h[g].getForce();var j=_metExploreViz.getSessionById("viz");if(h[g]!=undefined){if(j.getDuplicatedNodesCount()>0){var m=h[g].getForce();h[g].setLinked(true);j.setLinked(true);metExploreD3.GraphNetwork.duplicateSideCompoundsSelected(h[g].getId());metExploreD3.GraphNetwork.looksLinked();if(h[g].isLinked()){metExploreD3.GraphNetwork.graphAlignment(h[g].getId())}}else{metExploreD3.GraphNetwork.graphAlignment(h[g].getId());h[g].setLinked(true);j.setLinked(true)}}},100)}}}},0)}metExploreD3.GraphNetwork.initCentroids()},duplicateASideCompoundSelected:function(f,b){var d=d3.select("#"+b).select("#D3viz");var c=[];var a=metExploreD3.createLoadMask("Duplicate in progress...",b);if(a!=undefined){metExploreD3.showMask(a);metExploreD3.deferFunction(function(){d.selectAll("g.node").filter(function(m){if(f.querySelector("rect.metabolite")!=null){return m.getId()==f.querySelector("rect.metabolite").id&&m.isSelected()&&m.getBiologicalType()=="metabolite"}else{return false}}).filter(function(m){if(this.getAttribute("duplicated")==undefined){return true}else{return !this.getAttribute("duplicated")}}).each(function(o){if(metExploreD3.getMetabolitesSet()!=undefined){var m=metExploreD3.getMetaboliteById(metExploreD3.getMetabolitesSet(),o.getId());m.set("sideCompound",true)}o.setIsSideCompound(true);metExploreD3.GraphNetwork.duplicateSideCompound(o,b);c.push(o)});metExploreD3.hideMask(a);c.forEach(function(m){metExploreD3.GraphNetwork.removeANode(m,b)});if(_metExploreViz.isLinkedByTypeOfMetabolite()){metExploreD3.GraphLink.linkTypeOfMetabolite()}var j=_metExploreViz.getSessionsSet();var g=_metExploreViz.getSessionById(b);if(b!="viz"&&g.isLinked()){metExploreD3.fireEvent("graphPanel","afterDuplicate")}else{for(var h in j){if(j[h].isLinked()&&j[h].getId()!="viz"){metExploreD3.deferFunction(function(){j[h].setLinked(false);metExploreD3.GraphNetwork.looksLinked();var o=j[h].getForce();var m=_metExploreViz.getSessionById("viz");if(j[h]!=undefined){if(m.getDuplicatedNodesCount()>0){var o=j[h].getForce();j[h].setLinked(true);m.setLinked(true);metExploreD3.GraphNetwork.duplicateASideCompoundSelected(f,j[h].getId());metExploreD3.GraphNetwork.looksLinked();if(j[h].isLinked()){metExploreD3.GraphNetwork.graphAlignment(j[h].getId())}}else{metExploreD3.GraphNetwork.graphAlignment(j[h].getId());j[h].setLinked(true);m.setLinked(true)}}},100)}}}},0)}metExploreD3.GraphNetwork.initCentroids()},duplicateSideCompound:function(d,a){var f=_metExploreViz.getSessionById(a);var c=d3.select("#"+a).select("#D3viz");if(f!=undefined){if(f.isLinked()){var f=_metExploreViz.getSessionById("viz");if(f!=undefined){var b=f.getForce();if(b!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"||metExploreD3.GraphNetwork.isAnimated("viz")==true){b.resume()}}}}else{var b=f.getForce();if(b!=undefined){if(metExploreD3.GraphNetwork.isAnimated(a)=="true"||metExploreD3.GraphNetwork.isAnimated(a)==true){b.resume()}}}}metExploreD3.GraphNetwork.duplicateANode(d,a);if(f!=undefined){if(b!=undefined){if(metExploreD3.GraphNetwork.isAnimated(a)=="true"||metExploreD3.GraphNetwork.isAnimated(a)==true){b.start()}}}metExploreD3.GraphNetwork.initCentroids()},removeSelectedNode:function(b){var f=_metExploreViz.getSessionById(b);var d=f.getForce();var c=f.getD3Data();var a=metExploreD3.createLoadMask("Remove in process...",b);if(a!=undefined){metExploreD3.showMask(a);metExploreD3.deferFunction(function(){var h=d3.select("#"+b).select("#D3viz");if(j!=undefined){if(j.isLinked()){var j=_metExploreViz.getSessionById("viz");if(j!=undefined){var g=j.getForce();if(g!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){g.stop()}}}}else{var g=j.getForce();if(g!=undefined){if(metExploreD3.GraphNetwork.isAnimated(b)=="true"){g.stop()}}}}h.selectAll("g.node").filter(function(m){return m.isSelected()}).each(function(m){metExploreD3.GraphNetwork.removeANode(m,b)});metExploreD3.hideMask(a);metExploreD3.GraphNetwork.removeIsolatedNode(b);if(j!=undefined){if(g!=undefined){if(metExploreD3.GraphNetwork.isAnimated(b)=="true"){g.start()}}}},1)}metExploreD3.GraphNetwork.initCentroids()},removeOnlyClickedNode:function(g,b){var f=_metExploreViz.getSessionById(b);var d=f.getForce();var c=f.getD3Data();var a=metExploreD3.createLoadMask("Remove in process...",b);if(a!=undefined){metExploreD3.showMask(a);metExploreD3.deferFunction(function(){var j=d3.select("#"+b).select("#D3viz");if(m!=undefined){if(m.isLinked()){var m=metExploreD3.getSessionById(sessionsStore,"viz");if(m!=undefined){var h=m.getForce();if(h!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){h.resume()}}}}else{var h=m.getForce();if(h!=undefined){if(metExploreD3.GraphNetwork.isAnimated(b)=="true"){h.resume()}}}}metExploreD3.GraphNetwork.removeASelectedNode(g,b);metExploreD3.GraphNetwork.removeIsolatedNode(b);if(m!=undefined){if(h!=undefined){if(metExploreD3.GraphNetwork.isAnimated(b)=="true"){h.start()}}}metExploreD3.hideMask(a)},100)}},removeASelectedNode:function(f,b){var g=_metExploreViz.getSessionById(b);var a=metExploreD3.createLoadMask("Remove in process...",b);if(a!=undefined){metExploreD3.showMask(a);var d=d3.select("#"+b).select("#D3viz");if(g!=undefined){if(g.isLinked()){var g=metExploreD3.getSessionById(sessionsStore,"viz");if(g!=undefined){var c=g.getForce();if(c!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){c.resume()}}}}else{var c=g.getForce();if(c!=undefined){if(metExploreD3.GraphNetwork.isAnimated(b)=="true"){c.resume()}}}}metExploreD3.GraphNetwork.removeANode(f,b);if(g!=undefined){if(c!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){c.start()}}}metExploreD3.hideMask(a)}metExploreD3.GraphNetwork.initCentroids()},removeANode:function(j,b){var h=_metExploreViz.getSessionById(b);var g=h.getForce();var f=h.getD3Data();var a=[];var d=d3.select("#"+b).select("#D3viz");d.selectAll("path.link").filter(function(p){var m=p.source;var o=p.target;if(m==j||o==j){a.push(p)}return(m==j||o==j)}).remove();var c=d.selectAll("g.node");c.filter(function(m){return j==m}).transition().duration(1000).style("opacity",0).remove();setTimeout(function(){var p=h.getSelectedNodes();var m=p.indexOf(j.getId());if(m!=-1){p.splice(m,1)}h.groups.forEach(function(r){if(r.key==j.getCompartment()){var q=r.values.indexOf(j);if(q!=-1){r.values.splice(q,1)}if(r.values.length==0){q=h.groups.indexOf(r);if(q!=-1){h.groups.splice(q,1);d3.select("#"+b).select("#D3viz").select("path#"+r.key).remove()}}}j.getPathways().forEach(function(t){if(r.key==t){var s=r.values.indexOf(j);if(s!=-1){r.values.splice(s,1)}if(r.values.length==0){s=h.groups.indexOf(r);if(s!=-1){h.groups.splice(s,1);d3.select("#"+b).select("#D3viz").select("path#"+r.key).remove()}}}})});var m=g.nodes().indexOf(j);if(m!=-1){g.nodes().splice(m,1)}for(i=0;i<a.length;i++){var o=a[i];var m=g.links().indexOf(o);if(m!=-1){g.links().splice(m,1)}}},1)},removeIsolatedNode:function(b){var h=_metExploreViz.getSessionById(b);var d=h.getForce();var g=h.getD3Data();var j=[];var f=d3.select("#"+b).select("#D3viz");var m=[];var c=g.getNodes().map(function(o){return o.getId()});var a=false;f.selectAll("path.link").each(function(o){var r=o.source;var s=o.target;var p=c.indexOf(r.getId());if(p!=-1){c.splice(p,1)}var q=c.indexOf(s.getId());if(q!=-1){c.splice(q,1)}});f.selectAll("g.node").filter(function(o){return c.indexOf(o.getId())!=-1}).each(function(o){j.push(o)}).transition().duration(1000).style("opacity",0).remove();setTimeout(function(){for(i=0;i<j.length;i++){var p=j[i];h.groups.forEach(function(r){if(r.key==p.getCompartment()){var q=r.values.indexOf(p);if(q!=-1){r.values.splice(q,1)}if(r.values.length==0){q=h.groups.indexOf(r);if(q!=-1){h.groups.splice(q,1);d3.select("#"+b).select("#D3viz").select("path#"+r.key).remove()}}}p.getPathways().forEach(function(t){if(r.key==t){var s=r.values.indexOf(p);if(s!=-1){r.values.splice(s,1)}if(r.values.length==0){s=h.groups.indexOf(r);if(s!=-1){h.groups.splice(s,1);d3.select("#"+b).select("#D3viz").select("path#"+r.key).remove()}}}})});var o=d.nodes().indexOf(p);if(o!=-1){d.nodes().splice(o,1)}}for(i=0;i<j.length;i++){var p=j[i];var o=d.nodes().indexOf(p);if(o!=-1){d.nodes().splice(o,1)}}},10)},removeSideCompounds:function(){var a=d3.select("#viz").select("#D3viz");a.selectAll("g.node").filter(function(b){return b.getBiologicalType()=="metabolite"&&b.getIsSideCompound()}).each(function(b){metExploreD3.GraphNetwork.removeASelectedNode(b,"viz")});metExploreD3.GraphNetwork.removeIsolatedNode("viz");metExploreD3.GraphNetwork.initCentroids()},setAnimated:function(a,b){if(b){d3.select("#"+a).select("#D3viz").attr("animation","true");_metExploreViz.getSessionById(a).setAnimated(true)}else{d3.select("#"+a).select("#D3viz").attr("animation","false");_metExploreViz.getSessionById(a).setAnimated(false)}},isAnimated:function(a){return d3.select("#"+a).select("#D3viz").attr("animation")},selectAllNodes:function(a){return d3.select("#"+a).select("#D3viz").selectAll("g.node")},stopForce:function(b){var a=b.getForce();if(a!=undefined){a.stop();metExploreD3.GraphNetwork.setAnimated(b.getId(),false)}},loadSvg:function(j,p){var r=parseInt(metExploreD3.GraphPanel.getHeight(p));var m=parseInt(metExploreD3.GraphPanel.getWidth(p));var u=metExploreD3.getLinkStyle();var b=j.getForce();var y=metExploreD3.getScaleById(p);metExploreD3.GraphCaption.drawCaption();if(y==undefined){var g=metExploreD3.GraphNetwork;metExploreD3.GraphNetwork.zoomListener=d3.behavior.zoom().x(z).y(d).scaleExtent([0.01,30]).on("zoom",function(w){if(metExploreD3.GraphNetwork.zoomListener.scale()<0.8){d3.select("#"+p).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",true)}else{d3.select("#"+p).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",false)}var h=_metExploreViz.getSessionById(p);if(d3.event.sourceEvent!=null){if(d3.event.sourceEvent.type=="wheel"){h.setResizable(false)}}if(h.isActive()){g.zoom(p)}});y.add({graphName:p,xScale:z,yScale:d,zoomScale:1,xScaleCompare:1,yScaleCompare:1,zoomScaleCompare:metExploreD3.GraphNetwork.zoomListener.scale(),zoom:metExploreD3.GraphNetwork.zoomListener})}else{var g=metExploreD3.GraphNetwork;var z=d3.scale.linear().domain([0,m]).range([0,m]);var d=d3.scale.linear().domain([r,0]).range([r,0]);metExploreD3.GraphNetwork.zoomListener=d3.behavior.zoom().x(z).y(d).scaleExtent([0.01,30]).on("zoom",function(w){if(metExploreD3.GraphNetwork.zoomListener.scale()<0.8){d3.select("#"+p).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",true)}else{d3.select("#"+p).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",false)}var h=_metExploreViz.getSessionById(this.parentNode.id);if(d3.event.sourceEvent!=null){if(d3.event.sourceEvent.type=="wheel"){h.setResizable(false)}}if(h.isActive()){g.zoom(this.parentNode.id)}});y.setScale(z,d,1,1,1,metExploreD3.GraphNetwork.zoomListener.scale(),metExploreD3.GraphNetwork.zoomListener)}var q=d3.select("#"+p);q.svg=q.select("#D3viz").selectAll("*").remove();var t;var f=false;var c=d3.select("#"+p).select("#D3viz").append("g").datum(function(){return{selected:false,previouslySelected:false}}).attr("id","brush").attr("class","brush").call(d3.svg.brush().x(z).y(d).on("brushstart",function(B){var w=d3.select("#"+p).select("#buttonHand").attr("scrollable");_MyThisGraphNode.activePanel=this.parentNode.parentNode.id;var A=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(d3.event.sourceEvent.button!=1&&w!="true"){if(A!=undefined){if(A.isLinked()){var C=_metExploreViz.getSessionById("viz");if(C!=undefined){var h=C.getForce();if(h!=undefined){h.stop()}}}else{var h=A.getForce();if(h!=undefined){h.stop()}}}f=true;d3.select("#"+p).select("#brush").classed("hide",false);d3.select("#"+p).select("#D3viz").on("mousedown.zoom",null);t=d3.select("#"+p).select("#graphComponent").selectAll("g.node");t.each(function(D){D.previouslySelected=D.isSelected()})}else{var h=A.getForce();if(h!=undefined){h.stop()}d3.select("#"+p).selectAll("#D3viz").style("cursor","all-scroll");d3.selectAll("#brush").classed("hide",true)}}).on("brushend",function(){if(d3.event.sourceEvent.button!=1&&f){var G=d3.event.target.extent();if(G[1][0]-G[0][0]>20||G[1][1]-G[0][1]>20){var D;var G=d3.event.target.extent();var A=metExploreD3.getScaleById(p);var C=A.getZoomScale();var w=metExploreD3.createLoadMask("Selection in progress...",p);if(w!=undefined){metExploreD3.showMask(w);metExploreD3.deferFunction(function(){t.classed("selected",function(N){var M=A.getXScale();var L=A.getYScale();D=(M(G[0][0])<=M(N.x)&&M(N.x)<M(G[1][0]))&&(L(G[0][1])<=L(N.y)&&L(N.y)<L(G[1][1]));if((N.isSelected()==false&&D==true)||(N.isSelected()==true&&D==false&&!N.previouslySelected)){_MyThisGraphNode.selection(N,p)}return D});metExploreD3.hideMask(w);var J=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(J!=undefined){if(J.isLinked()){var K=_metExploreViz.getSessionById("viz");if(K!=undefined){var H=metExploreD3.GraphNetwork.isAnimated(K.getId());if(H=="true"){var I=K.getForce();if(I!=undefined){if((metExploreD3.GraphNetwork.isAnimated(K.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(K.getId())==null)){I.start()}}}}}else{var I=J.getForce();var H=metExploreD3.GraphNetwork.isAnimated(J.getId());if(H=="true"){var I=J.getForce();if(I!=undefined){if((metExploreD3.GraphNetwork.isAnimated(J.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(J.getId())==null)){I.start()}}}}}f=false},100)}}d3.event.target.clear();d3.select(this).call(d3.event.target);var A=metExploreD3.getScaleById(p);d3.select("#"+p).selectAll("#D3viz").style("cursor","default");d3.select("#"+p).selectAll("#D3viz").call(A.getZoom()).on("dblclick.zoom",null).on("mousedown",null)}else{var E=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(E!=undefined){if(E.isLinked()){var B=_metExploreViz.getSessionById("viz");if(B!=undefined){var F=metExploreD3.GraphNetwork.isAnimated(B.getId());if(F=="true"){var h=B.getForce();if(h!=undefined){if((metExploreD3.GraphNetwork.isAnimated(B.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(B.getId())==null)){h.start()}}}}}else{var h=E.getForce();var F=metExploreD3.GraphNetwork.isAnimated(E.getId());if(F=="true"){var h=E.getForce();if(h!=undefined){if(d3.select(metExploreD3.GraphNetwork.isAnimated(E.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(E.getId())==null)){h.start()}}}}}}d3.event.target.clear();d3.select(this).call(d3.event.target);var A=metExploreD3.getScaleById(p);d3.select("#"+p).selectAll("#D3viz").style("cursor","default");d3.select("#"+p).selectAll("#D3viz").call(A.getZoom()).on("dblclick.zoom",null).on("mousedown",null);d3.event.target.extent();d3.selectAll("#brush").classed("hide",false)}));q.svg=d3.select("#"+p).select("#D3viz").call(metExploreD3.GraphNetwork.zoomListener).on("dblclick.zoom",null).attr("pointer-events","all").append("svg:g").attr("class","graphComponent").attr("id","graphComponent");var a=_metExploreViz.getSessionById(p);if(a!=undefined){var b=a.getForce();if(b!=undefined){b.stop();metExploreD3.GraphNetwork.setAnimated(p,false)}if(a.isResizable()!=undefined){metExploreD3.GraphNetwork.task.cancel()}a.setResizable(true);metExploreD3.GraphNetwork.task=metExploreD3.createDelayedTask(function(){a.setResizable(false)})}var s=false;d3.select("#"+p).select("#D3viz").attr("animation",function(){if(s){return"true"}else{return"false"}}).append("svg:g").attr("class","buttonAnim").attr("id","buttonAnim").on("click",metExploreD3.GraphNetwork.play).style("cursor","hand").append("image").attr("xlink:href",function(){if(s){return document.location.href.split("index.html")[0]+"resources/icons/pause.svg"}else{return document.location.href.split("index.html")[0]+"resources/icons/play.svg"}}).attr("width","50").attr("height","50").attr("transform","translate(10,10) scale(.5)");d3.select("#"+p).select("#D3viz").append("svg:g").attr("class","buttonRescale").attr("id","buttonRescale").on("click",function(){metExploreD3.GraphNetwork.rescale(p)}).style("cursor","hand").append("image").attr("xlink:href",function(){return document.location.href.split("index.html")[0]+"resources/icons/rescale.png"}).attr("width","50").attr("height","50").attr("transform","translate(80,10) scale(.5)");d3.select("#"+p).select("#D3viz").append("svg:g").attr("class","buttonZoomIn").attr("id","buttonZoomIn").attr("x",(m-60)).attr("y",10).on("click",metExploreD3.GraphNetwork.zoomIn).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/zoomin.svg").attr("width","50").attr("height","50").style("opacity",0.2).attr("transform","translate("+(m-60)+",10) scale(1)").on("mouseover",function(h){d3.select(this).transition().duration(500).style("opacity",1)}).on("mouseout",function(h){d3.select(this).transition().duration(500).style("opacity",0.2)});d3.select("#"+p).select("#D3viz").append("svg:g").attr("class","buttonZoomOut").attr("id","buttonZoomOut").attr("x",(m-110)).attr("y",10).on("click",metExploreD3.GraphNetwork.zoomOut).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/zoomout.svg").attr("width","50").attr("height","50").style("opacity",0.2).attr("transform","translate("+(m-110)+",10) scale(1)").on("mouseover",function(h){d3.select(this).transition().duration(500).style("opacity",1)}).on("mouseout",function(h){d3.select(this).transition().duration(500).style("opacity",0.2)});d3.select("#"+p).select("#D3viz").append("svg:g").attr("class","buttonHand").attr("id","buttonHand").attr("x",(m-160)).attr("y",10).attr("scrollable","false").on("click",metExploreD3.GraphNetwork.moveGraph).style("opacity",1).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/handcursor.svg").attr("width","50").attr("height","50").attr("transform","translate("+(m-160)+",10) scale(1)");d3.select("#"+p).select("#D3viz").select("buttonHand").style("opacity",0);d3.select("#"+p).on("mouseover",function(){d3.select("#"+p).select("#D3viz").select("#buttonZoomOut").transition().duration(500).style("opacity",1);d3.select("#"+p).select("#D3viz").select("#buttonZoomIn").transition().duration(500).style("opacity",1);var w=_metExploreViz.getSessionById(p);if(w.isActive()){var h=d3.select("#"+p).select("#buttonHand").attr("scrollable");if(h=="false"){d3.select("#"+p).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",0.2)}else{d3.select("#"+p).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",1)}}}).on("mouseout",function(){d3.select("#"+p).select("#D3viz").select("#buttonZoomOut").transition().duration(500).style("opacity",0);d3.select("#"+p).select("#D3viz").select("#buttonZoomIn").transition().duration(500).style("opacity",0);d3.select("#"+p).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",0)});var a=_metExploreViz.getSessionById(p);var u=metExploreD3.getLinkStyle();var v=metExploreD3.getMetaboliteStyle();metExploreD3.GraphLink.loadLink(p,a,u,v);metExploreD3.GraphNode.loadNode(p);var o=document.createElement("div");o.id="tooltip2";o.className="tooltip2";metExploreD3.GraphNetwork.looksLinked();if(a.isLinked()){metExploreD3.GraphNetwork.graphAlignment(p)}metExploreD3.GraphNetwork.tick(p)},loadSvgFromJSON:function(q){var s=parseInt(metExploreD3.GraphPanel.getHeight(q));var o=parseInt(metExploreD3.GraphPanel.getWidth(q));var v=metExploreD3.getLinkStyle();var b=d3.layout.force().friction(0.9).gravity(0.06).charge(-150).linkDistance(v.getSize()).size([o,s]);var a=metExploreD3.getSessionById(q);a.setActivity(true);a.setForce(b);if(q=="viz"){metExploreD3.GraphCaption.drawCaption()}var A=d3.scale.linear().domain([0,o]).range([0,o]);var d=d3.scale.linear().domain([s,0]).range([s,0]);if(metExploreD3.getScaleById(q)==undefined){var m=metExploreD3.GraphNetwork;var z=metExploreD3.getScaleById(q);var g=z.getZoom();g=d3.behavior.zoom().x(A).y(d).scaleExtent([0.01,30]).on("zoom",function(w){if(metExploreD3.GraphNetwork.zoomListener.scale()<0.8){d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",true)}else{d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",false)}var h=metExploreD3.getSessionById(q);if(d3.event.sourceEvent!=null){if(d3.event.sourceEvent.type=="wheel"){h.setResizable(false)}}if(h.isActive()){m.zoom(q)}});z.add({graphName:q,xScale:A,yScale:d,zoomScale:1,xScaleCompare:1,yScaleCompare:1,zoomScaleCompare:g.scale(),zoom:g})}else{var m=metExploreD3.GraphNetwork;var z=metExploreD3.getScaleById(q);var g=z.getZoom();g=d3.behavior.zoom().x(A).y(d).scaleExtent([0.01,30]).on("zoom",function(w){if(g.scale()<0.8){d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",true)}else{d3.select("#"+q).select("#D3viz").select("#graphComponent").selectAll("text").classed("hide",false)}var h=metExploreD3.getSessionById(this.parentNode.id);if(d3.event.sourceEvent!=null){if(d3.event.sourceEvent.type=="wheel"){h.setResizable(false)}}if(h.isActive()){m.zoom(this.parentNode.id)}});z.getStoreByGraphName(q).setScale(A,d,1,1,1,g.scale(),g)}var r=d3.select("#"+q);r.svg=r.select("#D3viz").selectAll("*").remove();var u;var j=false;var c=d3.select("#"+q).select("#D3viz").append("g").datum(function(){return{selected:false,previouslySelected:false}}).attr("id","brush").attr("class","brush").call(d3.svg.brush().x(A).y(d).on("brushstart",function(C){var w=d3.select("#"+q).select("#buttonHand").attr("scrollable");_MyThisGraphNode.activePanel=this.parentNode.parentNode.id;var B=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(d3.event.sourceEvent.button!=1&&w!="true"){if(B!=undefined){if(B.isLinked()){var D=_metExploreViz.getSessionById("viz");if(D!=undefined){var h=D.getForce();if(h!=undefined){h.stop()}}}else{var h=B.getForce();if(h!=undefined){h.stop()}}}j=true;d3.select("#"+q).select("#brush").classed("hide",false);d3.select("#"+q).select("#D3viz").on("mousedown.zoom",null);u=d3.select("#"+q).select("#graphComponent").selectAll("g.node");u.each(function(E){E.previouslySelected=E.isSelected()})}else{var h=B.getForce();if(h!=undefined){h.stop()}d3.select("#"+q).selectAll("#D3viz").style("cursor","all-scroll");d3.selectAll("#brush").classed("hide",true)}}).on("brushend",function(){if(d3.event.sourceEvent.button!=1&&j){var H=d3.event.target.extent();if(H[1][0]-H[0][0]>20||H[1][1]-H[0][1]>20){var E;var H=d3.event.target.extent();var B=metExploreD3.getScaleById(q);var D=B.getZoomScale();var w=metExploreD3.createLoadMask("Selection in progress...",q);if(w!=undefined){metExploreD3.showMask(w);metExploreD3.deferFunction(function(){u.classed("selected",function(O){var N=B.getXScale();var M=B.getYScale();E=(N(H[0][0])<=N(O.x)&&N(O.x)<N(H[1][0]))&&(M(H[0][1])<=M(O.y)&&M(O.y)<M(H[1][1]));if((O.isSelected()==false&&E==true)||(O.isSelected()==true&&E==false&&!O.previouslySelected)){_MyThisGraphNode.selection(O,q)}return E});metExploreD3.hideMask(w);var K=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(K!=undefined){if(K.isLinked()){var L=_metExploreViz.getSessionById("viz");if(L!=undefined){var I=metExploreD3.GraphNetwork.isAnimated(L.getId());if(I=="true"){var J=L.getForce();if(J!=undefined){if((metExploreD3.GraphNetwork.isAnimated(L.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(L.getId())==null)){J.start()}}}}}else{var J=K.getForce();var I=metExploreD3.GraphNetwork.isAnimated(K.getId());if(I=="true"){var J=K.getForce();if(J!=undefined){if((metExploreD3.GraphNetwork.isAnimated(K.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(K.getId())==null)){J.start()}}}}}j=false},100)}}d3.event.target.clear();d3.select(this).call(d3.event.target);var B=metExploreD3.getScaleById(q);d3.select("#"+q).selectAll("#D3viz").style("cursor","default");d3.select("#"+q).selectAll("#D3viz").call(B.getZoom()).on("dblclick.zoom",null).on("mousedown",null)}else{var F=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(F!=undefined){if(F.isLinked()){var C=_metExploreViz.getSessionById("viz");if(C!=undefined){var G=metExploreD3.GraphNetwork.isAnimated(C.getId());if(G=="true"){var h=C.getForce();if(h!=undefined){if((metExploreD3.GraphNetwork.isAnimated(C.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(C.getId())==null)){h.start()}}}}}else{var h=F.getForce();var G=metExploreD3.GraphNetwork.isAnimated(F.getId());if(G=="true"){var h=F.getForce();if(h!=undefined){if(d3.select(metExploreD3.GraphNetwork.isAnimated(F.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(F.getId())==null)){h.start()}}}}}}d3.event.target.clear();d3.select(this).call(d3.event.target);var B=metExploreD3.getScaleById(q);d3.select("#"+q).selectAll("#D3viz").style("cursor","default");d3.select("#"+q).selectAll("#D3viz").call(B.getZoom()).on("dblclick.zoom",null).on("mousedown",null);d3.event.target.extent();d3.selectAll("#brush").classed("hide",false)}));var z=metExploreD3.getScaleById(q);var g=z.getZoom();r.svg=d3.select("#"+q).select("#D3viz").call(g).on("dblclick.zoom",null).attr("pointer-events","all").append("svg:g").attr("class","graphComponent").attr("id","graphComponent");var a=_metExploreViz.getSessionById(q);if(a!=undefined){var b=a.getForce();if(b!=undefined){b.stop();metExploreD3.GraphNetwork.setAnimated(q,false)}if(a.isResizable()!=undefined&&a.isResizable()!=false){metExploreD3.GraphNetwork.task.cancel()}a.setResizable(true);metExploreD3.GraphNetwork.task=metExploreD3.createDelayedTask(function(){a.setResizable(false)})}d3.select("#"+q).select("#D3viz").attr("animation","true").append("svg:g").attr("class","buttonAnim").attr("id","buttonAnim").on("click",metExploreD3.GraphNetwork.play).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/pause.svg").attr("width","50").attr("height","50").attr("transform","translate(10,10) scale(.5)");d3.select("#"+q).select("#D3viz").append("svg:g").attr("class","whiteBlack").attr("id","whiteBlack").attr("x",(o-100)).attr("y",100).on("click",function(){if(d3.select("#"+q).style("-webkit-filter").search("grayscale")==-1&&d3.select("#"+q).style("filter").search("grayscale")==-1){d3.select("#"+q).style("filter","grayscale(100%)").style("-webkit-filter","grayscale(100%)")}else{d3.select("#"+q).style("filter","").style("-webkit-filter","")}}).style("cursor","hand").style("visibility","hidden").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/blackWhite.png").attr("width","50").attr("height","50").attr("transform","translate("+(o-100)+",100) scale(0.5)");d3.select("#"+q).select("#D3viz").append("svg:g").attr("class","invertColor").attr("id","invertColor").attr("x",(o-100)).attr("y",150).on("click",function(){if(d3.select("#"+q).style("-webkit-filter").search("invert")==-1&&d3.select("#"+q).style("filter").search("invert")==-1){d3.select("#"+q).style("filter","invert(100%)").style("-webkit-filter","invert(100%)")}else{d3.select("#"+q).style("filter","").style("-webkit-filter","")}}).style("cursor","hand").style("visibility","hidden").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/invertColor.svg").attr("width","50").attr("height","50").attr("transform","translate("+(o-100)+",150) scale(0.5)");d3.select("#"+q).select("#D3viz").append("svg:g").attr("class","buttonZoomIn").attr("id","buttonZoomIn").attr("x",(o-60)).attr("y",10).on("click",metExploreD3.GraphNetwork.zoomIn).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/zoomin.svg").attr("width","50").attr("height","50").style("opacity",0.2).attr("transform","translate("+(o-60)+",10) scale(1)").on("mouseover",function(h){d3.select(this).transition().duration(500).style("opacity",1)}).on("mouseout",function(h){d3.select(this).transition().duration(500).style("opacity",0.2)});d3.select("#"+q).select("#D3viz").append("svg:g").attr("class","buttonZoomOut").attr("id","buttonZoomOut").attr("x",(o-110)).attr("y",10).on("click",metExploreD3.GraphNetwork.zoomOut).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/zoomout.svg").attr("width","50").attr("height","50").style("opacity",0.2).attr("transform","translate("+(o-110)+",10) scale(1)").on("mouseover",function(h){d3.select(this).transition().duration(500).style("opacity",1)}).on("mouseout",function(h){d3.select(this).transition().duration(500).style("opacity",0.2)});d3.select("#"+q).select("#D3viz").append("svg:g").attr("class","buttonHand").attr("id","buttonHand").attr("x",(o-160)).attr("y",10).attr("scrollable","false").on("click",metExploreD3.GraphNetwork.moveGraph).style("opacity",1).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/handcursor.svg").attr("width","50").attr("height","50").attr("transform","translate("+(o-160)+",10) scale(1)");d3.select("#"+q).select("#D3viz").select("buttonHand").style("opacity",0);d3.select("#"+q).on("mouseover",function(){d3.select("#"+q).select("#D3viz").select("#buttonZoomOut").transition().duration(500).style("opacity",1);d3.select("#"+q).select("#D3viz").select("#buttonZoomIn").transition().duration(500).style("opacity",1);var w=_metExploreViz.getSessionById(q);if(w.isActive()){var h=d3.select("#"+q).select("#buttonHand").attr("scrollable");if(h=="false"){d3.select("#"+q).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",0.2)}else{d3.select("#"+q).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",1)}}}).on("mouseout",function(){d3.select("#"+q).select("#D3viz").select("#buttonZoomOut").transition().duration(500).style("opacity",0);d3.select("#"+q).select("#D3viz").select("#buttonZoomIn").transition().duration(500).style("opacity",0);d3.select("#"+q).select("#D3viz").select("#buttonHand").transition().duration(500).style("opacity",0)});metExploreD3.GraphNetwork.setAnimated(q,true);var a=_metExploreViz.getSessionById(q);var v=metExploreD3.getLinkStyle();var y=metExploreD3.getMetaboliteStyle();metExploreD3.GraphLink.refreshLink(q,a,v,y);metExploreD3.GraphNode.refreshNode(q);var p=document.createElement("div");p.id="tooltip2";p.className="tooltip2";document.getElementById("viz").appendChild(p);var t=d3.select(m).attr("isLink");d3.select(m).select("image").remove();d3.select(m).append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/link.svg").attr("width","50").attr("height","50").attr("transform","translate(10,50) scale(.5)");a.setLinked(false);if(q!="viz"){d3.select("#"+q).select("#D3viz").append("svg:g").attr("class","buttonLink").attr("id","buttonLink").attr("isLink","false").on("click",metExploreD3.GraphNetwork.setLink).style("cursor","hand").append("image").attr("xlink:href",document.location.href.split("index.html")[0]+"resources/icons/unlink.svg").attr("width","50").attr("height","50").attr("transform","translate(10,50) scale(.5)")}else{metExploreD3.GraphNetwork.looksLinked();if(a.isLinked()){metExploreD3.GraphNetwork.graphAlignment(q)}}var a=metExploreD3.getSessionById(q);var f=a.getD3Data();var b=a.getForce();b.nodes(f.getNodes()).links(f.getLinks()).on("tick",function(){if(b.alpha()>=0.005){setTimeout(metExploreD3.GraphNetwork.tick(q),0)}}).start();a.setForce(b)}};metExploreD3.GraphFunction={bfs:function(d){var f=metExploreD3.GraphFunction.getGraphNotDirected();var b=f.getNode(d.getId());for(var c in f.nodes){f.nodes[c].distance="INFINITY";f.nodes[c].parent=null}var a=[];b.distance=0;a.push(b);while(a.length!=0){var g=a.pop();g.getAdjacents().forEach(function(h){if(h.distance=="INFINITY"){h.distance=g.distance+1;h.parent=g;a.push(h)}})}return f},colorDistanceOnNode:function(f,c){var d=_metExploreViz.getSessionById("viz").getD3Data();var g=0;for(var b in f.nodes){var h=f.nodes[b].distance;if(g<h){g=h}d.getNodeById(b).distance=h}var a=d3.scale.category20();var a=d3.scale.linear().domain([0,4]).range(["blue","yellow"]);d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").style("fill",function(j){return a(j.distance)});if(c!=undefined){c()}},test3:function(){var b=_metExploreViz.getSessionById("viz").getD3Data();d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").on("click",function(f){var h=[];_metExploreViz.getSessionById("viz").getSelectedNodes().forEach(function(j){var o=b.getNodeById(j);var m=metExploreD3.GraphFunction.bfs(o);h.push(m)});var g=h[0];for(var d in g.nodes){var c=h.filter(function(j){return j.nodes[d].distance!="INFINITY"}).map(function(j){return j.nodes[d].distance});g.nodes[d].distance=Math.min.apply(Math,c);if(g.nodes[d].distance=="Infinity"){g.nodes[d].distance=10000}}metExploreD3.GraphFunction.colorDistanceOnNode(g,a)});function a(){var c=d3.scale.linear().domain([0,1,2,3]).range([-600,-500,-400,-30]);metExploreD3.getGlobals().getSessionById("viz").getForce().charge(function(d){var f=d.distance;if(d.distance>3){f=3}var g=c(f);return g})}},testFlux:function(){var b=_metExploreViz.getSessionById("viz").getD3Data();var a=d3.scale.linear().domain([0,0.1,0.2,0.5,1]).range([-30,-50,-60,-500-600]);metExploreD3.getGlobals().getSessionById("viz").getForce().charge(function(c){var d=d3.select("g#node"+c.getId()+".node").attr("opacity");var f=a(d);return f})},test:function(){var b=_metExploreViz.getSessionById("viz").getD3Data();d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").on("click",function(c){metExploreD3.GraphFunction.colorDistanceOnNode(metExploreD3.GraphFunction.bfs(c),a)});function a(){var c=d3.scale.linear().domain([0,1,2,3]).range([-600,-500,-400,-30]);metExploreD3.getGlobals().getSessionById("viz").getForce().charge(function(d){var f=d.distance;if(d.distance>3){f=3}var g=c(f);return g})}},test2:function(){var b=_metExploreViz.getSessionById("viz").getD3Data();d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").on("click",function(c){metExploreD3.GraphFunction.colorDistanceOnNode(metExploreD3.GraphFunction.bfs(c),a)});function a(){var f=metExploreD3.getLinkStyle();var d=d3.scale.linear().domain([0,1,2,3]).range([5*f.getSize(),4*f.getSize(),3*f.getSize(),f.getSize()]);var c=d3.scale.linear().domain([0,1,2,3]).range([-600,-500,-400,-30]);metExploreD3.getGlobals().getSessionById("viz").getForce().linkDistance(function(g){var h=Math.max(g.getSource().distance,g.getTarget().distance);if(h>3){h=3}var j=d(h);return j}).gravity(0.04).charge(function(g){var h=g.distance;if(g.distance>3){h=3}var j=c(h);return j})}},hierarchicalDrawing:function(){},drawNetwork:function(){},randomDrawing:function(){},stopSpringDrawing:function(){},extractSubNetwork:function(c){var b=_metExploreViz.getSessionById("viz");var w=[];if(b.getVizEngine()=="D3"){var h=d3.select("#viz").select("#D3viz");w=b.getSelectedNodes();if(w.length<2){metExploreD3.displayMessage("Warning","At least two nodes have to be selected or mapped.");return null}else{var y={};for(u=0;u<w.length;u++){y[w[u]]=u}var r=[];for(u=0;u<w.length;u++){r[u]=[];for(t=0;t<w.length;t++){r[u][t]=null}}for(var o in c.nodes){c.nodes[o].inSubNet=false}for(var u=0;u<c.edges.length;u++){c.edges[u].inSubNet=false}for(var u=0;u<w.length;u++){var a=w[u];var z=new Array();for(var t=0;t<w.length;t++){if(t!=u){if(r[u][t]==null){var B=new Array();var d=w[t];for(var o in c.nodes){c.nodes[o].distance=Infinity;c.nodes[o].predecessor=null;c.nodes[o].optimized=false}var p=c.nodes[a];p.distance=0;var m=new BinaryMinHeap(c.nodes,"distance");var s;var f=false;while((m.min()!=undefined)&&(!f)){s=m.extractMin();s.optimized=true;for(e in s.edges){var g=s.edges[e].target;if(g.optimized){continue}var A=s.distance+(s.edges.length)*(s.edges.length);if((A<g.distance)&&B.indexOf(metExploreD3.GraphFunction.getReactionIdWithoutBack(g.id))==-1){B.push(metExploreD3.GraphFunction.getReactionIdWithoutBack(g.id));g.distance=A;m.heapify();g.predecessor=s}if(g.id==d){f=true;r[u][t]=metExploreD3.GraphFunction.getPathBasedOnPredecessors(c,d)}else{var v=y[g.id];if((v!=undefined)&&(r[u][v]==null)){r[u][v]=metExploreD3.GraphFunction.getPathBasedOnPredecessors(c,g.id)}}}}}}}}}return c}},getGraph:function(){var c=_metExploreViz.getSessionById("viz");var b=new Graph();var a=d3.select("#viz").select("#D3viz");a.selectAll("g.node").each(function(d){if(d.getBiologicalType()=="reaction"&&d.getReactionReversibility()){b.addNode(d.getId()+"_back")}b.addNode(d.getId())});a.selectAll("path.link").each(function(f){var h=f.source;var j=f.target;var g=h.getId();var d=j.getId();if(h.getBiologicalType()=="reaction"&&h.getReactionReversibility()){b.addEdge(d,g+"_back")}if(j.getBiologicalType()=="reaction"&&j.getReactionReversibility()){b.addEdge(d+"_back",g)}b.addEdge(g,d)});return b},getGraphNotDirected:function(){var c=_metExploreViz.getSessionById("viz");var b=new Graph();var a=d3.select("#viz").select("#D3viz");a.selectAll("g.node").each(function(d){b.addNode(d.getId())});a.selectAll("path.link").each(function(f){var h=f.source;var j=f.target;var g=h.getId();var d=j.getId();b.addEdge(g,d)});return b},getPathBasedOnPredecessors:function(h,d){var j=new Array();var f=h.nodes[d].predecessor;if(f==null){return j}else{var c=new Array();var b=h.nodes[d];b.inSubNet=true;while(b!=null){c.push(b);b.inSubNet=true;for(e in b.edges){var g=b.edges[e];if(b.predecessor!=null){if(g.source.id==b.predecessor.id){g.inSubNet=true}}}b=b.predecessor}for(var a=c.length-1;a>=0;a--){j.push(c[a].id)}return j}},keepOnlySubnetwork:function(){var f=_metExploreViz.getSessionById("viz");var d=f.getForce();var c=f.getD3Data();var b=metExploreD3.GraphFunction.getGraph();var a=metExploreD3.createLoadMask("Remove elements not in path...","viz");if(a!=undefined){metExploreD3.showMask(a);metExploreD3.deferFunction(function(){var o=d3.select("#viz").select("#D3viz");if(f!=undefined){var m=f.getForce();if(m!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){m.stop()}}}var j=metExploreD3.GraphFunction.extractSubNetwork(b);console.log("graph after extraction ",j);if(j!=null){var h=true;for(var g in f.getSelectedNodes()){var p=f.getSelectedNodes()[g];if(j.nodes[p].inSubNet){h=false}}if(h){metExploreD3.displayMessage("Warning","There is no path between the selected nodes !!")}else{var o=d3.select("#viz").select("#D3viz");o.selectAll("g.node").filter(function(r){if(r.getBiologicalType()=="metabolite"){var s=r.getId();return !j.nodes[s].inSubNet}else{if(r.getBiologicalType()=="reaction"){var s=r.getId();var q=r.getId()+"_back";if(j.nodes[q]==undefined){return !j.nodes[s].inSubNet}else{return !(j.nodes[s].inSubNet||j.nodes[q].inSubNet)}}}}).each(function(q){metExploreD3.GraphNetwork.removeANode(q,"viz")})}}if(f!=undefined){if(m!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){m.start()}}}metExploreD3.hideMask(a)},10)}},highlightSubnetwork:function(){var b=_metExploreViz.getSessionById("viz");var a=metExploreD3.createLoadMask("Highlight Subnetwork...","viz");if(a!=undefined){metExploreD3.showMask(a);metExploreD3.deferFunction(function(){var j=d3.select("#viz").select("#D3viz");if(b!=undefined){var h=b.getForce();if(h!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){h.stop()}}}var c=metExploreD3.GraphFunction.getGraph();var g=metExploreD3.GraphFunction.extractSubNetwork(c);console.log("graph after extraction in highlight subnetwork ",g);if(g!=null){var f=true;for(var d in b.getSelectedNodes()){var m=b.getSelectedNodes()[d];if(g.nodes[m].inSubNet){f=false}}if(f){metExploreD3.displayMessage("Warning","There is no path between the selected nodes !!")}else{var j=d3.select("#viz").select("#D3viz");j.selectAll("g.node").filter(function(o){return o.getBiologicalType()=="metabolite"}).filter(function(o){var p=o.getId();return g.nodes[p].inSubNet}).selectAll(".metabolite").transition().duration(4000).style("opacity",1);j.selectAll("g.node").filter(function(o){return o.getBiologicalType()=="metabolite"}).filter(function(o){var p=o.getId();return !g.nodes[p].inSubNet}).selectAll(".metabolite").transition().duration(4000).style("stroke","gray").style("opacity",0.25);j.selectAll("g.node").filter(function(o){return o.getBiologicalType()=="metabolite"}).filter(function(o){var p=o.getId();return g.nodes[p].inSubNet}).selectAll("text").transition().duration(4000).style("opacity",1);j.selectAll("g.node").filter(function(o){return o.getBiologicalType()=="metabolite"}).filter(function(o){var p=o.getId();return !g.nodes[p].inSubNet}).selectAll("text").transition().duration(4000).style("opacity",0.25);j.selectAll("g.node").filter(function(o){return o.getBiologicalType()=="reaction"}).filter(function(p){var q=p.getId();var o=p.getId()+"_back";if(g.nodes[o]==undefined){return g.nodes[q].inSubNet}else{return(g.nodes[q].inSubNet||g.nodes[o].inSubNet)}}).selectAll(".reaction").transition().duration(4000).style("opacity",1);j.selectAll("g.node").filter(function(o){return o.getBiologicalType()=="reaction"}).filter(function(p){var q=p.getId();var o=p.getId()+"_back";if(g.nodes[o]==undefined){return !g.nodes[q].inSubNet}else{return !(g.nodes[q].inSubNet||g.nodes[o].inSubNet)}}).selectAll(".reaction").transition().duration(4000).style("stroke","gray").style("opacity",0.25);j.selectAll("g.node").filter(function(o){return o.getBiologicalType()=="reaction"}).filter(function(p){var q=p.getId();var o=p.getId()+"_back";if(g.nodes[o]==undefined){return g.nodes[q].inSubNet}else{return(g.nodes[q].inSubNet||g.nodes[o].inSubNet)}}).selectAll("text").transition().duration(4000).style("opacity",1);j.selectAll("g.node").filter(function(o){return o.getBiologicalType()=="reaction"}).filter(function(p){var q=p.getId();var o=p.getId()+"_back";if(g.nodes[o]==undefined){return !g.nodes[q].inSubNet}else{return !(g.nodes[q].inSubNet||g.nodes[o].inSubNet)}}).selectAll("text").transition().duration(4000).style("opacity",0.25);j.selectAll("path.link").filter(function(r){var p=r.source.getId();var q=r.target.getId();if(r.source.getBiologicalType()=="reaction"){var o=p+"_back";if(g.nodes[o]==undefined){return(g.nodes[p].inSubNet&&g.nodes[q].inSubNet)}else{return(g.nodes[p].inSubNet&&g.nodes[q].inSubNet)||(g.nodes[o].inSubNet&&g.nodes[q].inSubNet)}}else{var o=q+"_back";if(g.nodes[o]==undefined){return(g.nodes[p].inSubNet&&g.nodes[q].inSubNet)}else{return(g.nodes[p].inSubNet&&g.nodes[q].inSubNet)||(g.nodes[p].inSubNet&&g.nodes[o].inSubNet)}}}).transition().duration(4000).style("opacity",1);j.selectAll("path.link").filter(function(r){var p=r.source.getId();var q=r.target.getId();if(r.source.getBiologicalType()=="reaction"){var o=p+"_back";if(g.nodes[o]==undefined){return !(g.nodes[p].inSubNet&&g.nodes[q].inSubNet)}else{return !(g.nodes[p].inSubNet&&g.nodes[q].inSubNet)&&!(g.nodes[o].inSubNet&&g.nodes[q].inSubNet)}}else{var o=q+"_back";if(g.nodes[o]==undefined){return !(g.nodes[p].inSubNet&&g.nodes[q].inSubNet)}else{return !(g.nodes[p].inSubNet&&g.nodes[q].inSubNet)&&!(g.nodes[p].inSubNet&&g.nodes[o].inSubNet)}}}).transition().duration(4000).style("stroke","gray").style("opacity",0.25)}}if(b!=undefined){if(h!=undefined){if(metExploreD3.GraphNetwork.isAnimated("viz")=="true"){h.start()}}}metExploreD3.hideMask(a)},10)}},isBackReaction:function(a){if(a.indexOf("_back")!=-1){return true}else{return false}},getReactionIdWithoutBack:function(a){if(metExploreD3.GraphFunction.isBackReaction(a)){a=a.replace("_back","")}return a},nodeInDegree:function(c){var b=0;for(e in c.edges){var a=c.edges[e].source;if(a.id!=c.id){b++}}return b},nodeOutDegree:function(c){var b=0;for(e in c.edges){var a=c.edges[e].source;if(a.id==c.id){b++}}return b},getLeafs:function(c){var a=new Array();for(var d in c.nodes){var b=c.nodes[d];if(metExploreD3.GraphFunction.nodeOutDegree(b)==0){a.push(b)}}return a},isAcyclic:function(b){var f=new Graph();for(var g in b.edges){var d=b.edges[g];f.addEdge(d.source.id,d.target.id)}var a=metExploreD3.GraphFunction.getLeafs(f);while(a.length!=0&&Object.keys(f.nodes).length!=0){var c=a.pop();f.removeNode(c);a=metExploreD3.GraphFunction.getLeafs(f)}if(Object.keys(f.nodes).length==0){return true}if(a.length==0){return false}},getMinimalFAS:function(f){var b=new Array();var d=new Graph();var a=new Array();for(e in f.edges){var c=f.edges[e];d.addEdge(c.source.id,c.target.id);if(metExploreD3.GraphFunction.isAcyclic(d)){b.push(c)}else{d.removeEdge(c);a.push(c)}}return a},getStronglyConnectedComponents:function(f){if(f==null){f=this.createGraph(false)}var d=new Array();var c=0;var a=new Array();for(n in f.nodes){var b=f.nodes[n];b.index=undefined;b.lowlink=Number.MAX_VALUE}for(n in f.nodes){var b=f.nodes[n];if(b.index==undefined){metExploreD3.GraphFunction.strongconnect(b,f,c,d,a)}}return a},strongconnect:function(d,h,f,g,b){d.index=f;d.lowlink=f;f=f+1;g.push(d);for(e in d.edges){var a=d.edges[e].target;if(a.id!=d.id){if(a.index==undefined){metExploreD3.GraphFunction.strongconnect(a,h,f,g,b);d.lowlink=Math.min(d.lowlink,a.lowlink)}else{if(g.indexOf(a)!=undefined){d.lowlink=Math.min(d.lowlink,a.lowlink)}}}}if(d.lowlink==d.index){var c=new Array();var a=g.pop();while(a.id!=d.id){c.push(a);var a=g.pop()}c.push(a);b.push(c)}},getMinimalFASstory:function(h,a){var c=new Array();var g=new Graph();var b=new Array();var j=h.edges.length;for(e in h.edges){var d=h.edges[e];var f=0;if(a.length>0){if(a.indexOf(d.source.id)==-1){f=f+j}if(a.indexOf(d.target.id)==-1){f=f+j}}f=f-Math.max(d.source.edges.length,f+d.target.edges.length);d.weight=f}h.edges.sort(function(o,m){return o.weight-m.weight});for(e in h.edges){var d=h.edges[e];g.addEdge(d.source.id,d.target.id);if(metExploreD3.GraphFunction.isAcyclic(g)){c.push(d)}else{g.removeEdge(d);b.push(d)}}return b}};metExploreD3.GraphMapping={compareMappingConditionChart:function(){var m=_metExploreViz.getSessionsSet();var c=[];var p=[];var o=[];for(var r in m){p.push(m[r].getActiveMapping());o.push(m[r].isMapped());if(r!="viz"){c=m[r].getD3Data().getNodes().concat(c)}}var d=[];c.forEach(function(t){var s=c.filter(function(u){return u.getIdentifier()==t.getIdentifier()});if(s.length>1&&d.indexOf(t)==-1&&t.getMappingDataByNameAndCond(p[0],o[0])!=undefined){d.push(t)}});var q=d.map(function(s){return s.getName()});var a=_metExploreViz.getMappingByName(p);var h=d.map(function(s){return -Math.abs(parseInt(s.getMappingDataByNameAndCond(p[0],o[0]).getMapValue()))});var g=d.map(function(s){return Math.abs(parseInt(s.getMappingDataByNameAndCond(p[1],o[1]).getMapValue()))});var f=[{name:o[0],data:h},{name:o[1],data:g}];var b={categories:q,conditions:f};var j=new MetXCompareBar(b,1300,q.length*15,"xaxis","yaxis",p[0]+" analysis");return j},mapNodeDataFile:function(b,d){var f=_metExploreViz.getSessionById("viz");var c=f.getForce();c.stop();var a=metExploreD3.createLoadMask("Mapping in progress...","viz");if(a!=undefined){metExploreD3.showMask(a);setTimeout(function(){var p=f.getD3Data();var q=b.getConditions();var g=d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node");var j=undefined;switch(b.getTargetLabel()){case"reactionDBIdentifier":for(var h=q.length-1;h>=0;h--){d.forEach(function(t){var s=new MappingData(t[b.getTargetLabel()],b.getName(),q[h],t[q[h]]);b.addMap(s);j=p.getNodeByDbIdentifier(t[b.getTargetLabel()]);if(j!=undefined){var r=new MappingData(j,b.getName(),q[h],t[q[h]]);j.addMappingData(r)}})}break;case"reactionId":for(var h=q.length-1;h>=0;h--){d.forEach(function(t){var s=new MappingData(t[b.getTargetLabel()],b.getName(),q[h],t[q[h]]);b.addMap(s);j=p.getNodeByDbIdentifier(t[b.getTargetLabel()]);if(j!=undefined){var r=new MappingData(j,b.getName(),q[h],t[q[h]]);j.addMappingData(r)}})}break;case"metaboliteId":for(var h=q.length-1;h>=0;h--){d.forEach(function(t){var s=new MappingData(t[b.getTargetLabel()],b.getName(),q[h],t[q[h]]);b.addMap(s);j=p.getNodeByDbIdentifier(t[b.getTargetLabel()]);if(j!=undefined){var r=new MappingData(j,b.getName(),q[h],t[q[h]]);j.addMappingData(r)}})}break;case"metaboliteDBIdentifier":for(var h=q.length-1;h>=0;h--){d.forEach(function(t){var s=new MappingData(t[b.getTargetLabel()],b.getName(),q[h],t[q[h]]);b.addMap(s);j=p.getNodeByDbIdentifier(t[b.getTargetLabel()]);if(j!=undefined){var r=new MappingData(j,b.getName(),q[h],t[q[h]]);j.addMappingData(r)}})}break;case"inchi":for(var h=q.length-1;h>=0;h--){d.forEach(function(s){var r=new MappingData(s[b.getTargetLabel()],b.getName(),q[h],s[q[h]]);b.addMap(r);j=p.getNodeByMappedInchi(s[b.getTargetLabel()]);if(j!=undefined){j.forEach(function(u){var t=new MappingData(u,b.getName(),q[h],s[q[h]]);u.addMappingData(t)})}})}break;default:metExploreD3.displayMessage("Warning",'The type of node "'+b.getTargetLabel()+"\" isn't know.")}metExploreD3.hideMask(a);var o=metExploreD3.GraphNetwork.isAnimated("viz");if(o=="true"){var m=f.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){m.resume()}}},1)}},mapNodeData:function(c,b){console.log(b);var f=_metExploreViz.getSessionById("viz");var d=f.getForce();d.stop();var a=metExploreD3.createLoadMask("Mapping in progress...","viz");if(a!=undefined){metExploreD3.showMask(a);setTimeout(function(){var p=f.getD3Data();var q=c.getConditions();var g=d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node");var j=undefined;switch(c.getTargetLabel()){case"reactionDBIdentifier":for(var h=q.length-1;h>=0;h--){b.forEach(function(r){var t=new MappingData(r[0],c.getName(),q[h],r[h+1]);c.addMap(t);j=p.getNodeByDbIdentifier(r[0]);if(j!=undefined){var s=new MappingData(j,c.getName(),q[h],r[h+1]);j.addMappingData(s)}})}break;case"reactionId":for(var h=q.length-1;h>=0;h--){b.forEach(function(r){var t=new MappingData(r[0],c.getName(),q[h],r[h+1]);c.addMap(t);j=p.getNodeById(r[0]);if(j!=undefined){var s=new MappingData(j,c.getName(),q[h],r[h+1]);j.addMappingData(s)}})}break;case"metaboliteId":for(var h=q.length-1;h>=0;h--){b.forEach(function(r){var t=new MappingData(r[0],c.getName(),q[h],r[h+1]);c.addMap(t);j=p.getNodeById(r[0]);if(j!=undefined){var s=new MappingData(j,c.getName(),q[h],r[h+1]);j.addMappingData(s)}})}break;case"metaboliteDBIdentifier":for(var h=q.length-1;h>=0;h--){b.forEach(function(r){var t=new MappingData(r[0],c.getName(),q[h],r[h+1]);c.addMap(t);j=p.getNodeByDbIdentifier(r[0]);if(j!=undefined){var s=new MappingData(j,c.getName(),q[h],r[h+1]);j.addMappingData(s)}})}break;case"inchi":break;default:metExploreD3.displayMessage("Warning",'The type of node "'+c.getTargetLabel()+"\" isn't know.")}metExploreD3.hideMask(a);var o=metExploreD3.GraphNetwork.isAnimated("viz");if(o=="true"){var m=f.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){m.resume()}}},1)}},mapNodes:function(b,a){metExploreD3.onloadMapping(b,function(){d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(f){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return false}else{return true}}).attr("mapped","false").selectAll("rect.stroke").remove();var c=metExploreD3.createLoadMask("Mapping in progress...","viz");var d=_metExploreViz.getMappingByName(b);if(c!=undefined){metExploreD3.showMask(c);setTimeout(function(){var j=_metExploreViz.getSessionById("viz");var g=j.getForce();g.stop();var h=d.getConditions();h.forEach(function(m){d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("g.node").filter(function(o){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return true}else{return false}}).each(function(q){if(q.getBiologicalType()=="reaction"){if(q.getMappingDataByNameAndCond(d.getName(),m)!=null){var o=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(q,"viz",o);d3.select(this).attr("mapped","true").insert("rect",":first-child").attr("class","stroke").attr("width",parseInt(d3.select(this).select(".reaction").attr("width"))+10).attr("height",parseInt(d3.select(this).select(".reaction").attr("height"))+10).attr("rx",parseInt(d3.select(this).select(".reaction").attr("rx"))+5).attr("ry",parseInt(d3.select(this).select(".reaction").attr("ry"))+5).attr("transform","translate(-"+parseInt(parseInt(d3.select(this).select(".reaction").attr("width"))+10)/2+",-"+parseInt(parseInt(d3.select(this).select(".reaction").attr("height"))+10)/2+")").style("opacity","0.5").style("fill","red");j.addSelectedNode(q.getId())}}else{if(q.getBiologicalType()=="metabolite"){var r=d3.select(this).select(".metabolite").attr("identifier");if(q.getMappingDataByNameAndCond(d.getName(),m)!=null){var p=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(q,"viz",p);d3.select(this).attr("mapped","true").insert("rect",":first-child").attr("class","stroke").attr("width",parseInt(d3.select(this).select(".metabolite").attr("width"))+10).attr("height",parseInt(d3.select(this).select(".metabolite").attr("height"))+10).attr("rx",parseInt(d3.select(this).select(".metabolite").attr("rx"))+5).attr("ry",parseInt(d3.select(this).select(".metabolite").attr("ry"))+5).attr("transform","translate(-"+parseInt(parseInt(d3.select(this).select(".metabolite").attr("width"))+10)/2+",-"+parseInt(parseInt(d3.select(this).select(".metabolite").attr("height"))+10)/2+")").style("opacity","0.5").style("fill","red");j.addSelectedNode(q.getId())}}}}).each(function(q){if(d3.select(this).select(".stroke")[0][0]==null){if(q.getBiologicalType()=="reaction"){if(q.getMappingDataByNameAndCond(d.getName(),m)!=null){var o=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(q,"viz",o);d3.select(this).insert("rect",":first-child").attr("class","stroke").attr("width",parseInt(d3.select(this).select(".reaction").attr("width"))+10).attr("height",parseInt(d3.select(this).select(".reaction").attr("height"))+10).attr("rx",parseInt(d3.select(this).select(".reaction").attr("rx"))+5).attr("ry",parseInt(d3.select(this).select(".reaction").attr("ry"))+5).attr("transform","translate(-"+parseInt(parseInt(d3.select(this).select(".reaction").attr("width"))+10)/2+",-"+parseInt(parseInt(d3.select(this).select(".reaction").attr("height"))+10)/2+")").style("opacity","0.5").style("fill","red");j.addSelectedNode(q.getId());return true}else{return false}}else{if(q.getBiologicalType()=="metabolite"){var r=d3.select(this).select(".metabolite").attr("identifier");if(q.getMappingDataByNameAndCond(d.getName(),m)!=null){var p=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(q,"viz",p);d3.select(this).insert("rect",":first-child").attr("class","stroke").attr("width",parseInt(d3.select(this).select(".metabolite").attr("width"))+10).attr("height",parseInt(d3.select(this).select(".metabolite").attr("height"))+10).attr("rx",parseInt(d3.select(this).select(".metabolite").attr("rx"))+5).attr("ry",parseInt(d3.select(this).select(".metabolite").attr("ry"))+5).attr("transform","translate(-"+parseInt(parseInt(d3.select(this).select(".metabolite").attr("width"))+10)/2+",-"+parseInt(parseInt(d3.select(this).select(".metabolite").attr("height"))+10)/2+")").style("opacity","0.5").style("fill","red");j.addSelectedNode(q.getId());return true}else{return false}}}}})});metExploreD3.hideMask(c);if(a!=undefined){a()}var f=metExploreD3.GraphNetwork.isAnimated("viz");if(f=="true"){var j=_metExploreViz.getSessionById("viz");var g=j.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){g.resume()}}},1)}})},mapFluxes:function(h,d,g,j,b,f){var c=_metExploreViz.getMappingByName(h);var a=metExploreD3.createLoadMask("Mapping in progress...","viz");if(a!=undefined){metExploreD3.showMask(a);setTimeout(function(){var A=_metExploreViz.getGeneralStyle();var s=d3.select("#viz").select("#D3viz");var y=_metExploreViz.getSessionById("viz");var p=_metExploreViz.getSessionById("viz").getD3Data().getNodes();var B=metExploreD3.getConditionsMapped();var w=undefined;var C=undefined;var D=c.getName();var t=metExploreD3.getLinkStyle();var r=y.getForce();r.linkDistance(function(F){if(F.getSource().getIsSideCompound()||F.getTarget().getIsSideCompound()){return t.getSize()}else{return t.getSize()*2}});s.selectAll("g.node").filter(function(F){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return false}else{return true}}).selectAll("rect.stroke").remove();B.forEach(function(F){p.forEach(function(H){var I=H.getMappingDataByNameAndCond(D,F);if(I!=null){var G=Math.abs(I.getMapValue())}else{var G=0}if(!isNaN(G)){if(w==undefined){C=parseFloat(G);w=parseFloat(G)}else{if(C>parseFloat(G)){C=parseFloat(G)}if(w<parseFloat(G)){w=parseFloat(G)}}}})});if(j==undefined){j=metExploreD3.GraphUtils.colorNameToHex(A.getColorMinMappingContinuous());if(j==false){j=A.getColorMinMappingContinuous()}}else{A.setMinColorMappingContinuous(j)}if(g==undefined){g=metExploreD3.GraphUtils.colorNameToHex(A.getColorMaxMappingContinuous());if(g==false){g=A.getColorMaxMappingContinuous()}}else{A.setMaxColorMappingContinuous(g)}var s=d3.select("#viz").select("#D3viz");var o=y.getColorMappingsSet();y.resetColorMapping();var q=g;if(B[1]==d){q=j}if(b){var m=0.5;var E=0.2}else{var m=1;var E=1}var v=d3.scale.linear().domain([-4,-1,0,1,4]).range([1,m,E,m,1]);var z=d3.scale.linear().domain([-w,0,w]).range([-7,0,7]);y.addColorMapping(w,g);y.addColorMapping(-w,j);s.selectAll("g.node").each(function(K){if(K.getMappingDatasLength()!=0){if(K.getBiologicalType()=="reaction"){var J=K.getMappingDataByNameAndCond(D,B[0]);var I=K.getMappingDataByNameAndCond(D,B[1]);var H=J;if(B[1]==d){H=I}if(H==null){var F=0}else{if(isNaN(H.getMapValue())){var F=0}else{var F=H.getMapValue()}}var G=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(K,"viz",G);d3.select(this).transition().duration(2000).style("opacity",v(z(parseFloat(F))));y.addSelectedNode(K.getId())}}});metExploreD3.hideMask(a);d3.select("#viz").select("#D3viz").selectAll("path.link").style("fill",function(H){var I,K;if(H.getSource().getBiologicalType()=="reaction"){I=H.getSource();K=H.getTarget()}else{K=H.getSource();I=H.getTarget()}var L=I.getMappingDataByNameAndCond(D,B[0]);var J=I.getMappingDataByNameAndCond(D,B[1]);s.selectAll("g#node"+K.getId()+".node").each(function(N){var O=L;if(B[1]==d){O=J}if(O==null){var M=0}else{if(isNaN(O.getMapValue())){var M=0}else{var M=O.getMapValue()}}if(N.flux==undefined){N.flux=z(M)}else{if(Math.abs(N.flux)<Math.abs(z(M))){N.flux=z(M)}}});s.selectAll("g#node"+K.getId()+".node").style("opacity",function(M){if(M.getIsSideCompound()){return 0.2}return v(M.flux)});if(this.id!="linkRev"){if(L==null){var F=0}else{if(isNaN(L.getMapValue())){var F=0}else{var F=L.getMapValue()}}if(z(F)==0){var G=d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("path:link");d3.select(this).style("opacity",0.5).style("stroke","black").style("stroke-width",0.5).style("stroke-dasharray","2,3").each(function(M){var N=G[0][0];this.parentNode.insertBefore(this,N)})}else{d3.select(this).style("opacity",v(z(parseFloat(F))))}if(K.getIsSideCompound()){d3.select(this).style("opacity",0.1)}return g}else{if(J==null){var F=0}else{if(isNaN(J.getMapValue())){var F=0}else{var F=J.getMapValue()}}if(z(F)==0){var G=d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("path:link");d3.select(this).style("opacity",0.5).style("stroke","black").style("stroke-width",0.5).style("stroke-dasharray","2,3").each(function(M){var N=G[0][0];this.parentNode.insertBefore(this,N)})}else{d3.select(this).style("opacity",v(z(parseFloat(F))))}if(K.getIsSideCompound()){d3.select(this).style("opacity",0.1)}return j}});if(C!=undefined){metExploreD3.fireEventArg("selectConditionForm","afterContinuousMapping","flux")}else{metExploreD3.displayMessage("Warning","No mapped node on network.")}if(f!=undefined){f()}var u=metExploreD3.GraphNetwork.isAnimated("viz");if(u=="true"){var y=_metExploreViz.getSessionById("viz");if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){r.start()}}metExploreD3.GraphNetwork.tick("viz")},1)}},mapUniqueFlux:function(h,d,g,b,f){var c=_metExploreViz.getMappingByName(h);var a=metExploreD3.createLoadMask("Mapping in progress...","viz");if(a!=undefined){metExploreD3.showMask(a);setTimeout(function(){var A=_metExploreViz.getGeneralStyle();var y=d3.select("#viz").select("#D3viz");var m=_metExploreViz.getSessionById("viz");var z=_metExploreViz.getSessionById("viz").getD3Data().getNodes();var s=c.getConditions();var C=undefined;var w=undefined;var t=c.getName();var D=metExploreD3.getLinkStyle();var o=m.getForce();o.linkDistance(function(F){if(F.getSource().getIsSideCompound()||F.getTarget().getIsSideCompound()){return D.getSize()}else{return D.getSize()*2}});y.selectAll("g.node").filter(function(F){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return false}else{return true}}).selectAll("rect.stroke").remove();s.forEach(function(F){z.forEach(function(H){var I=H.getMappingDataByNameAndCond(t,F);if(I!=null){var G=I.getMapValue();if(!isNaN(G)){if(C==undefined){w=parseFloat(G);C=parseFloat(G)}else{if(w>parseFloat(G)){w=parseFloat(G)}if(C<parseFloat(G)){C=parseFloat(G)}}}}})});if(g==undefined){g=A.getColorMaxMappingContinuous()}else{A.setMaxColorMappingContinuous(g)}var y=d3.select("#viz").select("#D3viz");var r=m.getColorMappingsSet();m.resetColorMapping();var u=d3.scale.linear().domain([-4,-1,1,4]).range([g,g,g,g]);if(b){var p=0.5;var j=0.2}else{var p=1;var j=1}var q=d3.scale.linear().domain([-4,-1,0,1,4]).range([1,p,j,p,1]);var v=d3.scale.linear().domain([-4,-1,1,4]).range([g,g,g,g]);var E=d3.scale.linear().domain([w,0,C]).range([-7,0,7]);m.addColorMapping(C,u(parseFloat(C)));y.selectAll("g.node").each(function(H){if(H.getMappingDatasLength()!=0){if(H.getBiologicalType()=="reaction"){var I=metExploreD3.getConditionsMapped()[0];var G=H.getMappingDataByNameAndCond(t,I);if(G!=null){if(!isNaN(G.getMapValue())){var F=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(H,"viz",F);d3.select(this).transition().duration(2000).style("opacity",q(E(parseFloat(G.getMapValue()))));m.addSelectedNode(H.getId())}}}}});metExploreD3.hideMask(a);d3.select("#viz").select("#D3viz").selectAll("path.link").style("fill",function(H){var I,K;if(H.getSource().getBiologicalType()=="reaction"){I=H.getSource();K=H.getTarget()}else{K=H.getSource();I=H.getTarget()}var L=metExploreD3.getConditionsMapped()[0];var J=I.getMappingDataByNameAndCond(t,L);y.selectAll("g#node"+K.getId()+".node").each(function(N){if(J==null){var M=0}if(N.flux==undefined){N.flux=E(M)}else{if(Math.abs(N.flux)<Math.abs(E(M))){N.flux=E(M)}}});y.selectAll("g#node"+K.getId()+".node").style("opacity",function(M){if(M.getIsSideCompound()){return 0.2}return q(M.flux)});if(J==null){var F=0}else{if(isNaN(J.getMapValue())){var F=0}else{var F=J.getMapValue()}}if(E(F)==0){var G=d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("path:link");d3.select(this).style("opacity",0.5).style("stroke","black").style("stroke-width",0.5).style("stroke-dasharray","2,3").each(function(M){var N=G[0][0];this.parentNode.insertBefore(this,N)})}else{d3.select(this).style("opacity",q(E(parseFloat(F))))}if(K.getIsSideCompound()){d3.select(this).style("opacity",0.1)}return u(E(F))}).filter(function(F){return this.id=="linkRev"}).remove();d3.select("#viz").select("#D3viz").selectAll(".linklabel").filter(function(F){return this.id=="linkRev"}).remove();if(w!=undefined){metExploreD3.fireEventArg("selectConditionForm","afterContinuousMapping","flux")}else{metExploreD3.displayMessage("Warning","No mapped node on network.")}if(f!=undefined){f()}var B=metExploreD3.GraphNetwork.isAnimated("viz");if(B=="true"){var m=_metExploreViz.getSessionById("viz");if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){o.start()}}metExploreD3.GraphNetwork.tick("viz")},1)}},parseFluxValues:function(c){var b=_metExploreViz.getMappingByName(c);var a=metExploreD3.createLoadMask("Mapping in progress...","viz");if(a!=undefined){metExploreD3.showMask(a);setTimeout(function(){var o=_metExploreViz.getSessionById("viz");var f=_metExploreViz.getSessionById("viz").getD3Data().getNodes();var m=b.getConditions();var j=undefined;var g=undefined;var h=b.getName();var p=[];m.forEach(function(q){f.forEach(function(s){var t=s.getMappingDataByNameAndCond(h,q);if(t!=null){var r=t.getMapValue()}else{var r=0}if(!isNaN(r)){if(parseFloat(r)!=0&(999999-Math.abs(parseFloat(r)))*100/999999<0.001){p.push(s)}else{if(j==undefined){g=parseFloat(r);j=parseFloat(r)}else{if(g>parseFloat(r)){g=parseFloat(r)}if(j<parseFloat(r)){j=parseFloat(r)}}}}})});if(p.length>0){j=j+j/2;var d=_metExploreViz.getSessionById("viz").getColorMappingsSet();p.forEach(function(q){m.forEach(function(r){if((999999-Math.abs(parseFloat(q.getMappingDataByNameAndCond(h,r).getMapValue())))*100/999999<0.001){d.forEach(function(s){if(s.getName()==parseFloat(q.getMappingDataByNameAndCond(h,r).getMapValue())){s.setName(g)}if(s.getName()==parseFloat(q.getMappingDataByNameAndCond(h,r).getMapValue())){s.setName(j)}});q.setMappingDataByNameAndCond(h,r,j)}})})}metExploreD3.hideMask(a)},1)}},graphMappingFlux:function(f,a,c,b,h,d,g){metExploreD3.onloadMapping(f,function(){var j=_metExploreViz.getSessionById("viz");metExploreD3.GraphMapping.parseFluxValues(f);metExploreD3.GraphLink.loadLinksForFlux("viz",j.getD3Data(),metExploreD3.getLinkStyle(),metExploreD3.getMetaboliteStyle(),g,a);if(c=="Compare"){metExploreD3.GraphMapping.mapFluxes(f,a,b,h,d)}else{metExploreD3.GraphMapping.mapUniqueFlux(f,a,b,d)}})},reloadMapping:function(b){var d=_metExploreViz.getSessionById("viz");var c=d.getForce();c.stop();var a=metExploreD3.createLoadMask("Mapping in progress...","viz");if(a!=undefined){metExploreD3.showMask(a);setTimeout(function(){var j=d.getD3Data();var m=b.getConditions();var f=undefined;switch(b.getTargetLabel()){case"reactionDBIdentifier":b.getData().forEach(function(q){if(typeof q.getNode()=="object"){var o=j.getNodeByDbIdentifier(q.getNode().getDbIdentifier())}else{var o=j.getNodeByDbIdentifier(q.getNode())}console.log(o);if(o!=undefined){var p=new MappingData(o,b.getName(),q.getConditionName(),q.getMapValue());o.addMappingData(p)}});break;case"reactionId":b.getData().forEach(function(q){if(typeof q.getNode()=="object"){var o=j.getNodeById(q.getNode().getId())}else{var o=j.getNodeById(q.getNode())}if(o!=undefined){var p=new MappingData(o,b.getName(),q.getConditionName(),q.getMapValue());o.addMappingData(p)}});break;case"metaboliteId":b.getData().forEach(function(q){if(typeof q.getNode()=="object"){var o=j.getNodeById(q.getNode().getId())}else{var o=j.getNodeById(q.getNode())}if(o!=undefined){var p=new MappingData(o,b.getName(),q.getConditionName(),q.getMapValue());o.addMappingData(p)}});break;case"metaboliteDBIdentifier":b.getData().forEach(function(q){if(typeof q.getNode()=="object"){var o=j.getNodeByDbIdentifier(q.getNode().getDbIdentifier())}else{var o=j.getNodeByDbIdentifier(q.getNode())}if(o!=undefined){var p=new MappingData(o,b.getName(),q.getConditionName(),q.getMapValue());o.addMappingData(p)}});break;case"inchi":break;default:metExploreD3.displayMessage("Warning",'The type of node "'+b.getTargetLabel()+"\" isn't know.")}metExploreD3.hideMask(a);var h=metExploreD3.GraphNetwork.isAnimated("viz");if(h=="true"){var g=d.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){g.resume()}}},1)}},graphMappingDiscreteData:function(c,a,b){metExploreD3.onloadMapping(c,function(){var f=_metExploreViz.getMappingByName(c);var d=metExploreD3.createLoadMask("Mapping in progress...","viz");if(d!=undefined){metExploreD3.showMask(d);setTimeout(function(){var w=_metExploreViz.getSessionById("viz");var m=w.getForce();m.stop();var y=f.getConditions();var j=w.getD3Data().getNodes();var B=[];var o=d3.select("#viz").select("#D3viz");o.selectAll("g.node").filter(function(C){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return false}else{return true}}).selectAll("rect.stroke").remove();y.forEach(function(C){j.forEach(function(F){var G=F.getMappingDataByNameAndCond(f.getName(),C);if(G!=null){var E=false;var D=G.getMapValue().valueOf();B.forEach(function(H){if(H.valueOf()==D.valueOf()){E=true}});if(!E){B.push(D)}}})});function g(D,C){if(parseFloat(D)<parseFloat(C)){return -1}if(parseFloat(D)>parseFloat(C)){return 1}return 0}function u(D,C){if(D<C){return -1}if(D>C){return 1}return 0}var v=[];var A=[];B.forEach(function(C){if(isNaN(C)){A.push(C)}else{v.push(C)}});v.sort(g);A.sort(u);B=v.concat(A);if(B.length==undefined){B.length=0}center=128;width=127;frequency=Math.PI*2*0.95/B.length;var t=top;var h=w.getColorMappingsSet();w.resetColorMapping();for(var s=0;s<B.length;s++){var p=Math.sin(frequency*s+2+B.length)*width+center;var r=Math.sin(frequency*s+0+B.length)*width+center;var z=Math.sin(frequency*s+4+B.length)*width+center;color=metExploreD3.GraphUtils.RGB2Color(p,r,z);w.addColorMapping(B[s],color);metExploreD3.GraphMapping.fixMappingColorOnNodeData(color,B[s],a,f.getName())}metExploreD3.hideMask(d);if(b!=undefined){b()}if(B.length!=0){metExploreD3.fireEventArg("selectConditionForm","afterDiscreteMapping","discrete")}else{metExploreD3.displayMessage("Warning","No mapped node on network.")}var q=metExploreD3.GraphNetwork.isAnimated("viz");if(q=="true"){var w=_metExploreViz.getSessionById("viz");var m=w.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){m.resume()}}},1)}})},fixMappingColorOnNodeData:function(a,f,c,h){var d=d3.select("#viz").select("#D3viz");var g=_metExploreViz.getSessionById("viz");var b=a;d.selectAll("g.node").filter(function(p){if(p.getBiologicalType()=="reaction"){if(p.getMappingDatasLength()==0){return false}else{var o=p.getMappingDataByNameAndCond(h,c);if(o!=null){if(o.getMapValue()==f){var j=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(p,"viz",j);g.addSelectedNode(p.getId());return true}else{return false}}else{return false}}}else{if(p.getBiologicalType()=="metabolite"){if(p.getMappingDatasLength()==0){return false}else{var o=p.getMappingDataByNameAndCond(h,c);if(o!=null){if(o.getMapValue()==f){var m=metExploreD3.getMetaboliteStyle();_MyThisGraphNode.addText(p,"viz",m);g.addSelectedNode(p.getId());return true}else{return false}}else{return false}}}}}).transition().duration(3000).attr("mapped",a).style("fill",a).each(function(m){if(m.getBiologicalType()=="reaction"){var j=metExploreD3.GraphUtils.chooseTextColor(b);d3.select(this).select("text").style("fill",j)}})},graphMappingContinuousData:function(d,a,f,c,b){metExploreD3.onloadMapping(d,function(){var h=_metExploreViz.getMappingByName(d);var g=metExploreD3.createLoadMask("Mapping in progress...","viz");if(g!=undefined){metExploreD3.showMask(g);setTimeout(function(){var y=_metExploreViz.getGeneralStyle();var p=d3.select("#viz").select("#D3viz");var w=_metExploreViz.getSessionById("viz");var m=_metExploreViz.getSessionById("viz").getD3Data().getNodes();var z=h.getConditions();var t=undefined;var A=undefined;var B=h.getName();var v='{"mapping":[';var u=metExploreD3.getMetaboliteStyle();var r=metExploreD3.getReactionStyle();p.selectAll("g.node").filter(function(C){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return false}else{return true}}).selectAll("rect.stroke").remove();z.forEach(function(C){v+='\n{"'+C+'":[';m.forEach(function(E){var F=E.getMappingDataByNameAndCond(B,C);if(F!=null){v+="\n{";var D=F.getMapValue();v+='"node" : "'+E.getName();v+='", "value" : "'+D;if(!isNaN(D)){if(t==undefined){A=parseFloat(D);t=parseFloat(D)}else{if(A>parseFloat(D)){A=parseFloat(D)}if(t<parseFloat(D)){t=parseFloat(D)}}}v+='"},\n'}});v+="]}\n"});v+="]}\n";if(f==undefined){f=y.getColorMinMappingContinuous()}else{y.setMinColorMappingContinuous(f)}if(c==undefined){c=y.getColorMaxMappingContinuous()}else{y.setMaxColorMappingContinuous(c)}var p=d3.select("#viz").select("#D3viz");var j=w.getColorMappingsSet();w.resetColorMapping();var s=d3.scale.linear().domain([parseFloat(A),parseFloat(t)]).range([f,c]);if(A==t){w.addColorMapping(t,s(parseFloat(t)))}else{w.addColorMapping(t,s(parseFloat(t)));w.addColorMapping(A,s(parseFloat(A)))}p.selectAll("g.node").each(function(F){if(F.getMappingDatasLength()!=0){if(F.getBiologicalType()=="reaction"){var E=F.getMappingDataByNameAndCond(B,a);if(E!=null){if(!isNaN(E.getMapValue())){_MyThisGraphNode.addText(F,"viz",r);d3.select(this).transition().duration(2000).attr("mapped",s(parseFloat(parseFloat(E.getMapValue())))).style("fill",s(parseFloat(E.getMapValue())));var C=metExploreD3.GraphUtils.chooseTextColor(s(parseFloat(E.getMapValue())));d3.select(this).select("text").style("fill",C);w.addSelectedNode(F.getId())}}}else{var E=F.getMappingDataByNameAndCond(B,a);if(E!=null){if(!isNaN(E.getMapValue())){var D=metExploreD3.getMetaboliteStyle();_MyThisGraphNode.addText(F,"viz",D);d3.select(this).transition().duration(2000).attr("mapped",s(parseFloat(parseFloat(E.getMapValue())))).style("fill",s(parseFloat(E.getMapValue())));w.addSelectedNode(F.getId())}}}}});metExploreD3.hideMask(g);if(A!=undefined){metExploreD3.fireEventArg("selectConditionForm","afterContinuousMapping","continuous")}else{metExploreD3.displayMessage("Warning","No mapped node on network.")}if(b!=undefined){b()}var q=metExploreD3.GraphNetwork.isAnimated("viz");if(q=="true"){var w=_metExploreViz.getSessionById("viz");var o=w.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){o.resume()}}},1)}})},graphMappingBinary:function(b){var c=metExploreD3.getSessionsSet();var f=metExploreD3.getSessionById(c,"viz");var d=f.getForce();d.stop();var a=metExploreD3.createLoadMask("Mapping in progress...","viz");if(a!=undefined){metExploreD3.showMask(a);setTimeout(function(){metExploreD3.GraphMapping.fixMappingColorOnNode("#056da1",1,b);metExploreD3.hideMask(a);var j=metExploreD3.GraphNetwork.isAnimated("viz");if(j=="true"){var g=metExploreD3.getSessionsSet();var m=metExploreD3.getSessionById(g,"viz");var h=m.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){h.resume()}}},1)}},fixMappingColorOnNode:function(b,f,c){var d=d3.select("#viz").select("#D3viz");var g=metExploreD3.getMetabolitesSet();var a=metExploreD3.getReactionsSet();d.selectAll("g.node").filter(function(m){if(m.getBiologicalType()=="reaction"){if(metExploreD3.getReactionById(a,m.getId()).get("mapped")==undefined){return false}else{if((metExploreD3.getReactionById(a,m.getId()).get("mapped")!=0)&&metExploreD3.getReactionById(a,m.getId()).get(c)==f){var o=metExploreD3.getSessionsSet();var h=metExploreD3.getReactionStyle();_MyThisGraphNode.addText(m,"viz",h,o);return true}else{return false}}}else{if(m.getBiologicalType()=="metabolite"&&!m.isSideCompound()){if(metExploreD3.getMetaboliteById(g,m.getId())==null){return false}if(metExploreD3.getMetaboliteById(g,m.getId()).get("mapped")==undefined){return false}else{if((metExploreD3.getMetaboliteById(g,m.getId()).get("mapped")!=0)&&metExploreD3.getMetaboliteById(g,m.getId()).get(c)==f){var o=metExploreD3.getSessionsSet();var j=metExploreD3.getMetaboliteStyle();_MyThisGraphNode.addText(m,"viz",j,o);return true}else{return false}}}}}).transition().duration(4000).attr("mapped",b).style("fill",b)},setDiscreteMappingColor:function(b,f,c,h){var g=_metExploreViz.getSessionById("viz");var d=g.getForce();d.stop();var a=metExploreD3.createLoadMask("Mapping in progress...","viz");if(a!=undefined){metExploreD3.showMask(a);setTimeout(function(){var m=d3.select("#viz").select("#D3viz");var o=g.getColorMappingsSet();var j=g.getColorMappingById(f);j.setValue(b);metExploreD3.GraphMapping.fixMappingColorOnNodeData(b,f,c,h);metExploreD3.hideMask(a)},1)}},setContinuousMappingColor:function(g,m,o,f){var j=_metExploreViz.getSessionById("viz");var b=j.getForce();b.stop();var d=metExploreD3.createLoadMask("Mapping in progress...","viz");if(d!=undefined){metExploreD3.showMask(d);var c=d3.select("#viz").select("#D3viz");var a=j.getColorMappingsSet();var h=j.getColorMappingById(m);h.setValue(g);metExploreD3.hideMask(d)}},removeGraphMapping:function(b){var f=_metExploreViz.getSessionById("viz");var c=d3.select("#viz").select("#D3viz");var d=metExploreD3.getMetabolitesSet();var a=metExploreD3.getReactionsSet();c.selectAll("g.node").filter(function(g){if(g.getBiologicalType()=="reaction"){if(metExploreD3.getReactionById(a,g.getId()).get("mapped")==undefined){return false}else{return metExploreD3.getReactionById(a,g.getId()).get("mapped")!=0}}else{if(g.getBiologicalType()=="metabolite"){if(metExploreD3.getMetaboliteById(d,g.getId()).get("mapped")==undefined){return false}else{return metExploreD3.getMetaboliteById(d,g.getId()).get("mapped")!=0}}}}).transition().duration(1000).attr("transform",function(g){return"translate("+g.x+", "+g.y+") scale(1)"}).style("fill","white");c.selectAll("g.node").filter(function(g){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return false}else{return true}}).attr("mapped","false").selectAll("rect.stroke").remove()},removeGraphMappingData:function(a){var f=_metExploreViz.getSessionById("viz");var c=d3.select("#viz").select("#D3viz");c.selectAll("g.node").transition().duration(1000).attr("transform",function(g){return"translate("+g.x+", "+g.y+") scale(1)"}).style("fill","white").style("opacity",1).each(function(g){if(g.getBiologicalType()=="reaction"){if(g.isSelected()){d3.select(this).select("text").transition().duration(4000).style("fill","white")}else{d3.select(this).select("text").transition().duration(4000).style("fill","black")}}});c.selectAll("g.node").filter(function(g){if(this.getAttribute("mapped")==undefined||this.getAttribute("mapped")==false||this.getAttribute("mapped")=="false"){return false}else{return true}}).attr("mapped","false").selectAll("rect.stroke").remove();var d=metExploreD3.getMetaboliteStyle();var b=metExploreD3.getLinkStyle();metExploreD3.GraphLink.refreshLink("viz",f,b,d)},launchAfterMappingFunction:function(b,d){var a=_metExploreViz.getMappingByName(b);if(a!==null){d(a);return}var c=this;setTimeout(function(){c.launchAfterMappingFunction(b,d)},100)},onloadMapping:function(a,b){this.launchAfterMappingFunction(a,b)},removeMappingData:function(a){this.onloadMapping(a.get("title"),function(b){metExploreD3.fireEventArg("selectConditionForm","removeMapping",b)})},loadDataFromJSON:function(b){var c=metExploreD3.GraphUtils.decodeJSON(b);if(c){var f=_metExploreViz.getSessionById("viz");var d=f.getForce();d.stop();var a=metExploreD3.createLoadMask("Mapping in progress...","viz");if(a!=undefined){metExploreD3.showMask(a);setTimeout(function(){var h=[];c.mappings.forEach(function(o){h.push(o.name)});var g=new Mapping(c.name,h,c.targetLabel);_metExploreViz.addMapping(g);metExploreD3.GraphMapping.generateMapping(g,c.mappings);metExploreD3.hideMask(a);metExploreD3.fireEventArg("selectMappingVisu","jsonmapping",g);var m=metExploreD3.GraphNetwork.isAnimated("viz");if(m=="true"){var j=f.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){j.resume()}}},1)}}},loadDataTSV:function(b,c){var f=_metExploreViz.getSessionById("viz");var d=f.getForce();d.stop();var a=metExploreD3.createLoadMask("Mapping in progress...","viz");if(a!=undefined){metExploreD3.showMask(a);d3.tsv(b,function(m){var o=b.split("/");var s=b.split("/")[o.length-1];var p=Object.keys(m[0])[0];var t=Object.keys(m[0]).indexOf(p);var q=Object.keys(m[0]);if(t>-1){q.splice(t,1)}var r=[];var g=new Mapping(s,q,p,r);_metExploreViz.addMapping(g);metExploreD3.GraphMapping.mapNodeDataFile(g,m);metExploreD3.fireEventArg("selectMappingVisu","jsonmapping",g);metExploreD3.hideMask(a);if(c!=undefined){c()}var j=metExploreD3.GraphNetwork.isAnimated("viz");if(j=="true"){var h=f.getForce();if((d3.select("#viz").select("#D3viz").attr("animation")=="true")||(d3.select("#viz").select("#D3viz").attr("animation")==null)){h.resume()}}})}},generateMapping:function(a,b){var d=_metExploreViz.getSessionById("viz");var c=d.getD3Data();switch(a.getTargetLabel()){case"reactionDBIdentifier":if(!(b.length==1&&b[0].name=="undefined")){b.forEach(function(f){f.data.forEach(function(j){var m=new MappingData(j.node,a.getName(),f.name,j.value);a.addMap(m);var g=c.getNodeByDbIdentifier(j.node);if(g!=undefined){var h=new MappingData(g,a.getName(),f.name,j.value);g.addMappingData(h)}})})}else{b[0].data.forEach(function(h){var j=new MappingData(h.node,a.getName(),b[0].name,h.value);a.addMap(j);var f=c.getNodeByDbIdentifier(h.node);if(f!=undefined){var g=new MappingData(f,a.getName(),b[0].name,h.value);f.addMappingData(g)}})}break;case"metaboliteDBIdentifier":b.forEach(function(f){f.data.forEach(function(j){var m=new MappingData(j.node,a.getName(),f.name,j.value);a.addMap(m);var g=c.getNodeByDbIdentifier(j.node);if(g!=undefined){var h=new MappingData(g,a.getName(),f.name,j.value);g.addMappingData(h)}})});break;case"reactionId":if(!(b.length==1&&b[0].name=="undefined")){b.forEach(function(f){f.data.forEach(function(j){var m=new MappingData(j.node,a.getName(),f.name,j.value);a.addMap(m);var g=c.getNodeById(j.node);if(g!=undefined){var h=new MappingData(g,a.getName(),f.name,j.value);g.addMappingData(h)}})})}else{b[0].data.forEach(function(h){var j=new MappingData(h.node,a.getName(),b[0].name,h.value);a.addMap(j);var f=c.getNodeById(h.node);if(f!=undefined){var g=new MappingData(f,a.getName(),b[0].name,h.value);f.addMappingData(g)}})}break;case"metaboliteId":b.forEach(function(f){f.data.forEach(function(j){var m=new MappingData(j.node,a.getName(),f.name,j.value);a.addMap(m);var g=c.getNodeById(j.node);if(g!=undefined){var h=new MappingData(g,a.getName(),f.name,j.value);if(j.inchi!=undefined){g.mappedInchi=j.inchi}g.addMappingData(h)}})});break;case"inchi":break;default:metExploreD3.displayMessage("Warning",'The type of node "'+a.getTargetLabel()+"\" isn't know.")}}};metExploreD3.GraphPanel={getHeight:function(a){return d3.select("#"+a).select("#D3viz").style("height")},getWidth:function(a){return d3.select("#"+a).select("#D3viz").style("width")},resizeViz:function(b){var g=metExploreD3.getScaleById(b);if(g!=undefined){d3.select("#metexplore").text("");d3.select("#"+b).select("#D3viz").attr("width",$("#"+b).width());d3.select("#"+b).select("#D3viz").attr("height",$("#"+b).height());d3.select("#"+b).select("#D3viz").select("#foreignObject").attr("transform","translate("+($("#"+b).width()-300)+",100) scale(1)");var a=g.getZoomScale();var f=d3.scale.linear().domain([0,$("#"+b).width()]).range([0,$("#"+b).width()]);var d=d3.scale.linear().domain([$("#"+b).height(),0]).range([$("#"+b).height(),0]);var c=g.getZoom().translate();g.getZoom().x(f).y(d).translate(c).scale(a);d3.select("#"+b).select("#D3viz").select("#brush").call(d3.svg.brush().x(f).y(d).on("brushstart",function(o){document.addEventListener("mousedown",function(q){if(q.button===1){q.stopPropagation();q.preventDefault();q.stopImmediatePropagation()}});var j=d3.select("#"+b).select("#buttonHand").attr("scrollable");_MyThisGraphNode.activePanel=this.parentNode.parentNode.id;var m=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(d3.event.sourceEvent.button!=1&&j!="true"){if(m!=undefined){if(m.isLinked()){var p=_metExploreViz.getSessionById("viz");if(p!=undefined){var h=p.getForce();if(h!=undefined){h.stop()}}}else{var h=m.getForce();if(h!=undefined){h.stop()}}}brushing=true;d3.select("#"+b).select("#brush").classed("hide",false);d3.select("#"+b).select("#D3viz").on("mousedown.zoom",null);nodeBrushed=d3.select("#"+b).select("#graphComponent").selectAll("g.node");nodeBrushed.each(function(q){q.previouslySelected=q.isSelected()})}else{var h=m.getForce();if(h!=undefined){h.stop()}d3.select("#"+b).selectAll("#D3viz").style("cursor","all-scroll");d3.selectAll("#brush").classed("hide",true)}}).on("brushend",function(){if(d3.event.sourceEvent.button!=1&&brushing){var t=d3.event.target.extent();if(t[1][0]-t[0][0]>20||t[1][1]-t[0][1]>20){var q;var t=d3.event.target.extent();var m=metExploreD3.getScaleById(b);var p=m.getZoomScale();var j=metExploreD3.createLoadMask("Selection in progress...",b);if(j!=undefined){metExploreD3.showMask(j);metExploreD3.deferFunction(function(){nodeBrushed.classed("selected",function(B){var A=m.getZoom().x();var z=m.getZoom().y();q=(A(t[0][0])<=A(B.x)&&A(B.x)<A(t[1][0]))&&(z(t[0][1])<=z(B.y)&&z(B.y)<z(t[1][1]));if((B.isSelected()==false&&q==true)||(B.isSelected()==true&&q==false&&!B.previouslySelected)){_MyThisGraphNode.selection(B,b)}return q});metExploreD3.hideMask(j);var w=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(w!=undefined){if(w.isLinked()){var y=_metExploreViz.getSessionById("viz");if(y!=undefined){var u=metExploreD3.GraphNetwork.isAnimated(y.getId());if(u=="true"){var v=y.getForce();if(v!=undefined){if((metExploreD3.GraphNetwork.isAnimated(y.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(y.getId())==null)){v.start()}}}}}else{var v=w.getForce();var u=metExploreD3.GraphNetwork.isAnimated(w.getId());if(u=="true"){var v=w.getForce();if(v!=undefined){if((metExploreD3.GraphNetwork.isAnimated(w.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(w.getId())==null)){v.start()}}}}}brushing=false},100)}}}else{var r=_metExploreViz.getSessionById(_MyThisGraphNode.activePanel);if(r!=undefined){if(r.isLinked()){var o=_metExploreViz.getSessionById("viz");if(o!=undefined){var s=metExploreD3.GraphNetwork.isAnimated(o.getId());if(s=="true"){var h=o.getForce();if(h!=undefined){if((metExploreD3.GraphNetwork.isAnimated(o.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(o.getId())==null)){h.start()}}}}}else{var h=r.getForce();var s=metExploreD3.GraphNetwork.isAnimated(r.getId());if(s=="true"){var h=r.getForce();if(h!=undefined){if(d3.select(metExploreD3.GraphNetwork.isAnimated(r.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(r.getId())==null)){h.start()}}}}}}d3.event.target.clear();d3.select(this).call(d3.event.target);var m=metExploreD3.getScaleById(b);d3.select("#"+b).selectAll("#D3viz").style("cursor","default");d3.select("#"+b).selectAll("#D3viz").call(m.getZoom()).on("dblclick.zoom",null).on("mousedown",null);d3.event.target.extent();d3.selectAll("#brush").classed("hide",false)}));d3.select("#viz").select("#D3viz").select("#logoViz").select("image").attr("x",$("#viz").width()-88).attr("y",$("#viz").height()-70);d3.select("#metexplore").text("metExploreViz").attr("x",$("#viz").width()-112).attr("y",$("#viz").height()-10)}},resizePanels:function(a){var j=_metExploreViz.getSessionsSet();var m=_metExploreViz.getSessionById(a);var f=$("#"+a).height();var p=$("#"+a).width();d3.select("#"+a).select("#D3viz").select("foreignObject").attr("x",p-300);if(d3.select("#"+a).select("#D3viz").select("#buttonZoomIn")[0][0]!=null&&d3.select("#"+a).select("#D3viz").select("#buttonZoomOut")[0][0]!=null&&d3.select("#"+a).select("#D3viz").select("#buttonHand")[0][0]!=null){var o=d3.select("#"+a).select("#D3viz").select("#buttonZoomIn").attr("x");var d=p-60-o;d3.select("#"+a).select("#D3viz").select("#buttonZoomIn").attr("transform","translate("+d+",0) scale(1)");o=d3.select("#"+a).select("#D3viz").select("#buttonZoomOut").attr("x");d=p-110-o;d3.select("#"+a).select("#D3viz").select("#buttonZoomOut").attr("transform","translate("+d+",0) scale(1)");o=d3.select("#"+a).select("#D3viz").select("#buttonHand").attr("x");d=p-160-o;d3.select("#"+a).select("#D3viz").select("#buttonHand").attr("transform","translate("+d+",0) scale(1)");o=d3.select("#"+a).select("#D3viz").select("#whiteBlack").attr("x");d=p-100-o;d3.select("#"+a).select("#D3viz").select("#whiteBlack").attr("transform","translate("+d+",0) scale(1)");o=d3.select("#"+a).select("#D3viz").select("#invertColor").attr("x");d=p-100-o;d3.select("#"+a).select("#D3viz").select("#invertColor").attr("transform","translate("+d+",0) scale(1)")}if(m!=undefined){if(m.isLinked()){var g=_metExploreViz.getSessionById("viz");var b=g.getForce();if(b!=undefined){var f=$("#viz").height();var p=$("#viz").width();b.size([p,f]);var c=d3.select("#viz").select("#buttonAnim").attr("animation");if(c=="true"){b.resume()}}}else{var b=m.getForce();if(b!=undefined){var f=$("#"+a).height();var p=$("#"+a).width();b.size([p,f]);var c=d3.select("#"+a).select("#buttonAnim").attr("animation");if(c=="true"){b.resume()}}}}var r=_metExploreViz.getSessionsSet();var m=_metExploreViz.getSessionById(a);if(m!=undefined){var c=metExploreD3.GraphNetwork.isAnimated(a);if(c=="true"){if(m.isLinked()){for(var q in r){if(r[q].isLinked()){metExploreD3.GraphNetwork.animationButtonOn(r[q].getId())}}var b=_metExploreViz.getSessionById("viz").getForce();b.resume()}else{metExploreD3.GraphNetwork.animationButtonOn(a);var b=m.getForce();b.resume()}}}},removeSvgComponents:function(a){d3.select("#"+a).select("#D3viz").selectAll("*").remove()},refreshJSON:function(c){var b=metExploreD3.GraphUtils.decodeJSON(c);if(b){if(!_metExploreViz.isLaunched()){metExploreD3.GraphPanel.initiateViz("D3")}var d=Ext.getCmp("viz");if(d!=undefined){var a=metExploreD3.createLoadMask("Refresh in process...","viz");if(a!=undefined){metExploreD3.showMask(a);var f=this;setTimeout(function(){metExploreD3.fireEvent("selectConditionForm","resetMapping");if(b.sessions!=undefined){metExploreD3.GraphPanel.loadDataJSON(c,g)}else{metExploreD3.GraphPanel.initDataJSON(c,g)}function g(){metExploreD3.hideMask(a);metExploreD3.fireEvent("graphPanel","afterrefresh")}},100)}}}},refreshPanel:function(a,c){var b=this;metExploreD3.hideInitialMask();if(metExploreD3.GraphUtils.decodeJSON(a).nodes||metExploreD3.GraphUtils.decodeJSON(a).sessions){if(!_metExploreViz.isLaunched()||metExploreD3.getGeneralStyle().windowsAlertIsDisable()){metExploreD3.GraphPanel.refreshJSON(a);if(typeof c==="function"){c()}}else{Ext.Msg.show({title:"Are you sure?",msg:"This action will remove previous network. <br />Would you like to do this?",buttons:Ext.Msg.OKCANCEL,fn:function(d){if(d=="ok"){metExploreD3.GraphPanel.refreshJSON(a);if(c!=undefined&&typeof c==="function"){c()}}},icon:Ext.Msg.QUESTION})}}else{metExploreD3.displayWarning("Syntaxe error",'File have bad syntax. Use a saved file from MetExploreViz or see <a href="http://metexplore.toulouse.inra.fr/metexploreViz/doc/documentation.php#generalfunctioning">MetExploreViz documentation</a>.')}},loadDataJSON:function(c,a){var b=metExploreD3.GraphUtils.decodeJSON(c);if(b){console.log(metExploreD3.bioSourceControled());if(metExploreD3.bioSourceControled()){_metExploreViz.setBiosource(b.biosource);metExploreD3.fireEventParentWebSite("loadNetworkBiosource",{biosource:b.biosource,func:d,endFunc:a,json:c})}else{d();a()}function d(){var r=_metExploreViz.getSessionById("viz");var p=r.getForce();if(p!=undefined){p.nodes([]);p.links([]);p.on("start",null);p.on("end",null);p.on("tick",null)}r.reset();if(b.comparedPanels){b.comparedPanels.forEach(function(v){_metExploreViz.addComparedPanel(new ComparedPanel(v.panel,v.visible,v.parent,v.title))})}if(b.mappings){b.mappings.forEach(function(v){var v=new Mapping(v.name,v.conditions,v.targetLabel);_metExploreViz.addMapping(v)})}if(b.generalStyle){var h=metExploreD3.getGeneralStyle();var g=new GeneralStyle(h.getWebsiteName(),b.generalStyle.colorMinMappingContinuous,b.generalStyle.colorMaxMappingContinuous,b.generalStyle.maxReactionThreshold,b.generalStyle.displayLabelsForOpt,b.generalStyle.displayLinksForOpt,b.generalStyle.displayConvexhulls,b.generalStyle.clustered,b.generalStyle.displayCaption,h.hasEventForNodeInfo(),h.loadButtonIsHidden(),h.windowsAlertIsDisable());metExploreD3.setGeneralStyle(g)}var s=b.sessions;for(var t in s){if(t!="viz"){var r=new NetworkVizSession();r.setVizEngine("D3");r.setId(t);r.setLinked(s[t].linked);_metExploreViz.addSession(r);var q=Ext.getCmp("comparePanel");var m=_metExploreViz.getComparedPanelById(t);var u=[{id:m.getParent(),title:m.getTitle(),html:'<div id="'+m.getParent()+'" height="100%" width="100%"></div>',flex:1,closable:true,collapsible:true,collapseDirection:"left"}];q.add(u);q.expand();metExploreD3.fireEventArg("comparePanel","initiateviz",t)}if(s[t].colorMappings){s[t].colorMappings.forEach(function(v){r.addColorMapping(v.name,v.value)})}var o=s[t].animated;if(!o){o=false}r.setAnimated(o);var j=new NetworkData(t);j.cloneObject(s[t].d3Data);var f=j.getNodes();f.forEach(function(v){if(v.getBiologicalType()=="metabolite"){if(j.getCompartmentByName(v.getCompartment())==null){j.addCompartment(v.getCompartment())}}else{v.getPathways().forEach(function(w){if(j.getPathwayByName(w)==null){j.addPathway(w)}})}if(v.getMappingDatasLength()>0){v.getMappingDatas().forEach(function(w){w.setNode(v);if(_metExploreViz.getMappingByName(w.getMappingName())!=null){var y=_metExploreViz.getMappingByName(w.getMappingName());y.addMap(w)}})}});j.setId(t);if(t=="viz"){_metExploreViz.setInitialData(_metExploreViz.cloneNetworkData(j))}r.setD3Data(j);if(s[t].selectedNodes){s[t].selectedNodes.forEach(function(v){r.addSelectedNode(v)})}if(_metExploreViz.getMappingsLength()>0&&t=="viz"&&!metExploreD3.getGeneralStyle().windowsAlertIsDisable()){metExploreD3.displayMessageYesNo("Mapping","Do you want keep mappings.",function(v){if(v=="yes"){_metExploreViz.getMappingsSet().forEach(function(w){metExploreD3.GraphMapping.reloadMapping(w);metExploreD3.fireEventArg("selectMappingVisu","jsonmapping",w)});metExploreD3.fireEventArg("buttonRefresh","reloadMapping",true)}else{metExploreD3.fireEventArg("buttonMap","reloadMapping",false);metExploreD3.fireEventArg("buttonRefresh","reloadMapping",false);metExploreD3.fireEventArg("selectConditionForm","closeMapping",_metExploreViz.getActiveMapping);_metExploreViz.resetMappings()}})}if(s[t].mapped){r.setMapped(s[t].mapped)}if(s[t].mappingDataType){r.setMappingDataType(s[t].mappingDataType)}if(s[t].activeMapping){r.setActiveMapping(s[t].activeMapping)}}if(b.linkStyle){var g=new LinkStyle(b.linkStyle.size,b.linkStyle.lineWidth,b.linkStyle.markerWidth,b.linkStyle.markerHeight,b.linkStyle.markerInColor,b.linkStyle.markerOutColor,b.linkStyle.markerStrokeColor,b.linkStyle.markerStrokeWidth,b.linkStyle.strokeColor);metExploreD3.setLinkStyle(g)}if(b.metaboliteStyle){var g=new MetaboliteStyle(b.metaboliteStyle.height,b.metaboliteStyle.width,b.metaboliteStyle.rx,b.metaboliteStyle.ry,b.metaboliteStyle.fontSize,b.metaboliteStyle.strokeWidth,b.metaboliteStyle.label,b.metaboliteStyle.strokeColor);metExploreD3.setMetaboliteStyle(g)}if(b.reactionStyle){var g=new ReactionStyle(b.reactionStyle.height,b.reactionStyle.width,b.reactionStyle.rx,b.reactionStyle.ry,b.reactionStyle.label,b.reactionStyle.fontSize,b.reactionStyle.strokeColor,b.reactionStyle.strokeWidth);metExploreD3.setReactionStyle(g)}for(var t in s){metExploreD3.GraphNetwork.refreshSvg(t)}a()}}},initDataJSON:function(m,b){var o=metExploreD3.GraphUtils.decodeJSON(m);if(o){var j=_metExploreViz.getSessionById("viz");var c=j.getD3Data();_metExploreViz.resetOldCoodinates();c.getNodes().forEach(function(p){_metExploreViz.addOldCoodinates({id:p.getId(),x:p.x,px:p.px,y:p.y,py:p.py})});var d=j.getForce();if(d!=undefined){d.nodes([]);d.links([]);d.on("start",null);d.on("end",null);d.on("tick",null)}j.reset();j.setAnimated(true);var c=new NetworkData("viz");c.cloneObject(o);var a=c.getNodes();a.forEach(function(p){if(p.getBiologicalType()=="metabolite"){if(c.getCompartmentByName(p.getCompartment())==null){c.addCompartment(p.getCompartment())}}else{p.getPathways().forEach(function(q){if(c.getPathwayByName(q)==null){c.addPathway(q)}})}});c.setId("viz");_metExploreViz.setInitialData(_metExploreViz.cloneNetworkData(c));j.setD3Data(c);metExploreD3.GraphNetwork.refreshSvg("viz");var g=_metExploreViz.getOldCoodinates();if(g.length>0){var h=false;var f=0;while(f<g.length-1&&!h){if(c.getNodeById(g[f].id)!=undefined){h=true}f++}if(h&&!metExploreD3.getGeneralStyle().windowsAlertIsDisable()){metExploreD3.displayMessageYesNo("Coodinates","Do you want keep node coordinates.",function(p){if(p=="yes"){var q=[];g.forEach(function(r){var s=c.getNodeById(r.id);if(s!=undefined){s.x=r.x;s.y=r.y;s.px=r.px;s.py=r.py;q.push(r.id)}});d3.select("#viz").select("#graphComponent").selectAll("g.node").filter(function(r){return q.indexOf(r.id)!=-1}).each(function(r){r.setLocked(!r.isLocked());r.fixed=r.isLocked()});d3.select("#viz").select("#graphComponent").selectAll("g.node").filter(function(r){return q.indexOf(r.id)!=-1}).each(function(r){_MyThisGraphNode.selection(r,"viz")})}})}}if(_metExploreViz.getMappingsLength()>0){_metExploreViz.getMappingsSet().forEach(function(p){metExploreD3.GraphMapping.reloadMapping(p);metExploreD3.fireEventArg("selectMappingVisu","jsonmapping",p)});metExploreD3.fireEventArg("buttonRefresh","reloadMapping",true)}}b()},initiateViz:function(a){d3.select("#viz").selectAll("#presentationViz, #presentationLogoViz").classed("hide",true);metExploreD3.fireEvent("viz","initiateviz");_metExploreViz.setLaunched(true);if(a=="D3"){metExploreD3.GraphNetwork.delayedInitialisation("viz")}},loadData:function(a){var b=_metExploreViz.getSessionById(a);return b}};metExploreD3.GraphPath={panelParent:"",delayedInitialisation:function(a){metExploreD3.GraphLink.panelParent=a},refreshLink:function(c,h,b,g){metExploreD3.GraphLink.panelParent="#"+c;var f=h.getD3Data();var a=20;var d=b.getMarkerWidth()/2;d3.select("#"+c).select("#D3viz").select("#graphComponent").append("svg:defs").selectAll("marker").data(["in","out"]).enter().append("svg:marker").attr("id",String).attr("viewBox","0 0 "+b.getMarkerWidth()+" "+b.getMarkerHeight()).attr("refY",d).attr("markerWidth",b.getMarkerWidth()).attr("markerHeight",b.getMarkerHeight()).attr("orient","auto").append("svg:path").attr("class",String).attr("d","M0,0L"+b.getMarkerWidth()+","+b.getMarkerHeight()/2+"L0,"+b.getMarkerWidth()+"Z").style("visibility","hidden");metExploreD3.GraphLink.link=d3.select("#"+c).select("#D3viz").select("#graphComponent").selectAll("line").data(f.getLinks()).enter().append("line").attr("class","link").attr("marker-end",function(j){if(j.interaction=="out"){d3.select("#"+c).select("#D3viz").select("#graphComponent").select("#"+j.interaction).attr("refX",(g.getWidth()+g.getHeight())/2/2+(b.getMarkerWidth())).style("fill",b.getMarkerOutColor()).style("stroke",b.getMarkerStrokeColor()).style("stroke-width",b.getMarkerStrokeWidth());return"url(#"+j.interaction+")"}else{return"none"}}).attr("marker-start",function(j){if(j.interaction=="out"){return"none"}else{d3.select("#"+c).select("#D3viz").select("#graphComponent").select("#"+j.interaction).attr("refX",-((g.getWidth()+g.getHeight())/2/2)).style("fill",b.getMarkerInColor()).style("stroke",b.getMarkerStrokeColor()).style("stroke-width",b.getMarkerStrokeWidth());return"url(#"+j.interaction+")"}}).style("stroke",b.getStrokeColor())},tick:function(a,b){d3.select("#"+a).select("#D3viz").selectAll("path").filter(function(c){return c!="linkCaptionRev"}).attr("d",metExploreD3.GraphPath.groupPath).attr("transform",d3.select("#"+a).select("#D3viz").select("#graphComponent").attr("transform"))},loadPath:function(c){d3.select("#"+c).select("#D3viz").select("#graphComponent").selectAll("g.node");var b=metExploreD3.GraphPath.node.filter(function(f){return f.getBiologicalType()=="metabolite"});session.groups=d3.nest().key(function(f){return f.getCompartment()}).entries(b.data());metExploreD3.GraphPath.groupPath=function(o){var m=metExploreD3.getScaleById("viz");if(o.values.length>0){if(o.values.length>2){return"M"+d3.geom.hull(o.values.map(function(d){return[d.x,d.y]})).join("L")+"Z"}else{var j=[];o.values.forEach(function(d){j.push([d.x,d.y])});var g,f;for(var h=o.values.length;h<3;h++){g=o.values[0].x*(1+0.00001*h);f=o.values[0].y*(1+0.000011*h);j.push([g,f])}return"M"+d3.geom.hull(j).join("L")+"Z"}}};metExploreD3.GraphPath.groupFill=function(m,h){metExploreD3.sortCompartmentInBiosource();var f;for(var g=0;g<metExploreD3.getCompartmentInBiosourceLength();g++){if(m.key==metExploreD3.getCompartmentInBiosourceSet()[g].getIdentifier()){f=metExploreD3.getCompartmentInBiosourceSet()[g].getColor()}}return f};var a="M0,0L10,10Z";d3.select("#"+c).select("#D3viz").selectAll("path").filter(function(f){return f!="linkCaptionRev"}).data(session.groups).attr("d",function(f){return a}).enter().insert("path",":first-child").attr("class",function(f){return f.key}).attr("id",function(f){return f.key}).style("fill",metExploreD3.GraphPath.groupFill).style("stroke",metExploreD3.GraphPath.groupFill).style("stroke-width",40).style("stroke-linejoin","round").style("opacity",0.15)}};